(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const C of document.querySelectorAll('link[rel="modulepreload"]'))g(C);new MutationObserver(C=>{for(const M of C)if(M.type==="childList")for(const l of M.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&g(l)}).observe(document,{childList:!0,subtree:!0});function s(C){const M={};return C.integrity&&(M.integrity=C.integrity),C.referrerPolicy&&(M.referrerPolicy=C.referrerPolicy),C.crossOrigin==="use-credentials"?M.credentials="include":C.crossOrigin==="anonymous"?M.credentials="omit":M.credentials="same-origin",M}function g(C){if(C.ep)return;C.ep=!0;const M=s(C);fetch(C.href,M)}})();var Om=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ip(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var sp={exports:{}};(function(i,t){(function(g,C){i.exports=C()})(Om,()=>(()=>{var s={6659:l=>{var T=Object.prototype.hasOwnProperty,e="~";function d(){}Object.create&&(d.prototype=Object.create(null),new d().__proto__||(e=!1));function x(n,r,f){this.fn=n,this.context=r,this.once=f||!1}function u(n,r,f,a,c){if(typeof f!="function")throw new TypeError("The listener must be a function");var p=new x(f,a||n,c),v=e?e+r:r;return n._events[v]?n._events[v].fn?n._events[v]=[n._events[v],p]:n._events[v].push(p):(n._events[v]=p,n._eventsCount++),n}function h(n,r){--n._eventsCount===0?n._events=new d:delete n._events[r]}function o(){this._events=new d,this._eventsCount=0}o.prototype.eventNames=function(){var r=[],f,a;if(this._eventsCount===0)return r;for(a in f=this._events)T.call(f,a)&&r.push(e?a.slice(1):a);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(f)):r},o.prototype.listeners=function(r){var f=e?e+r:r,a=this._events[f];if(!a)return[];if(a.fn)return[a.fn];for(var c=0,p=a.length,v=new Array(p);c<p;c++)v[c]=a[c].fn;return v},o.prototype.listenerCount=function(r){var f=e?e+r:r,a=this._events[f];return a?a.fn?1:a.length:0},o.prototype.emit=function(r,f,a,c,p,v){var m=e?e+r:r;if(!this._events[m])return!1;var y=this._events[m],P=arguments.length,E,S;if(y.fn){switch(y.once&&this.removeListener(r,y.fn,void 0,!0),P){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,f),!0;case 3:return y.fn.call(y.context,f,a),!0;case 4:return y.fn.call(y.context,f,a,c),!0;case 5:return y.fn.call(y.context,f,a,c,p),!0;case 6:return y.fn.call(y.context,f,a,c,p,v),!0}for(S=1,E=new Array(P-1);S<P;S++)E[S-1]=arguments[S];y.fn.apply(y.context,E)}else{var w=y.length,R;for(S=0;S<w;S++)switch(y[S].once&&this.removeListener(r,y[S].fn,void 0,!0),P){case 1:y[S].fn.call(y[S].context);break;case 2:y[S].fn.call(y[S].context,f);break;case 3:y[S].fn.call(y[S].context,f,a);break;case 4:y[S].fn.call(y[S].context,f,a,c);break;default:if(!E)for(R=1,E=new Array(P-1);R<P;R++)E[R-1]=arguments[R];y[S].fn.apply(y[S].context,E)}}return!0},o.prototype.on=function(r,f,a){return u(this,r,f,a,!1)},o.prototype.once=function(r,f,a){return u(this,r,f,a,!0)},o.prototype.removeListener=function(r,f,a,c){var p=e?e+r:r;if(!this._events[p])return this;if(!f)return h(this,p),this;var v=this._events[p];if(v.fn)v.fn===f&&(!c||v.once)&&(!a||v.context===a)&&h(this,p);else{for(var m=0,y=[],P=v.length;m<P;m++)(v[m].fn!==f||c&&!v[m].once||a&&v[m].context!==a)&&y.push(v[m]);y.length?this._events[p]=y.length===1?y[0]:y:h(this,p)}return this},o.prototype.removeAllListeners=function(r){var f;return r?(f=e?e+r:r,this._events[f]&&h(this,f)):(this._events=new d,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=e,o.EventEmitter=o,l.exports=o},62270:(l,T,e)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82590),x=function(u,h,o,n){for(var r=u[0],f=1;f<u.length;f++){var a=u[f];d(a,r,h,o,n),r=a}return u};l.exports=x},61148:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6124),x=function(u,h,o,n,r){return d(u,"angle",h,o,n,r)};l.exports=x},22015:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){for(var u=0;u<e.length;u++){var h=e[u];d.call(x,h)}return e};l.exports=T},31060:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){x===void 0&&(x=0);for(var u=x;u<e.length;u++){var h=e[u],o=!0;for(var n in d)h[n]!==d[n]&&(o=!1);if(o)return h}return null};l.exports=T},52367:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){x===void 0&&(x=0);for(var u=x;u<e.length;u++){var h=e[u],o=!0;for(var n in d)h[n]!==d[n]&&(o=!1);if(o)return h}return null};l.exports=T},12673:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(40327),x=e(84093),u=e(72632),h=e(72283),o=e(71030),n=new o({sys:{queueDepthSort:h,events:{once:h}}},0,0,1,1).setOrigin(0,0),r=function(f,a){a===void 0&&(a={});var c=a.hasOwnProperty("width"),p=a.hasOwnProperty("height"),v=u(a,"width",-1),m=u(a,"height",-1),y=u(a,"cellWidth",1),P=u(a,"cellHeight",y),E=u(a,"position",x.TOP_LEFT),S=u(a,"x",0),w=u(a,"y",0),R=0,A=0,O=v*y,F=m*P;n.setPosition(S,w),n.setSize(y,P);for(var b=0;b<f.length;b++)if(d(f[b],n,E),c&&v===-1)n.x+=y;else if(p&&m===-1)n.y+=P;else if(p&&!c){if(A+=P,n.y+=P,A===F&&(A=0,R+=y,n.y=w,n.x+=y,R===O))break}else if(R+=y,n.x+=y,R===O&&(R=0,A+=P,n.x=S,n.y+=P,A===F))break;return f};l.exports=r},691:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6124),x=function(u,h,o,n,r){return d(u,"alpha",h,o,n,r)};l.exports=x},3877:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6124),x=function(u,h,o,n,r){return d(u,"x",h,o,n,r)};l.exports=x},71020:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6124),x=function(u,h,o,n,r,f,a){return o==null&&(o=h),d(u,"x",h,n,f,a),d(u,"y",o,r,f,a)};l.exports=x},28970:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6124),x=function(u,h,o,n,r){return d(u,"y",h,o,n,r)};l.exports=x},82249:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){x===void 0&&(x=0),u===void 0&&(u=6.28);for(var h=x,o=(u-x)/e.length,n=d.x,r=d.y,f=d.radius,a=0;a<e.length;a++)e[a].x=n+f*Math.cos(h),e[a].y=r+f*Math.sin(h),h+=o;return e};l.exports=T},30285:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){x===void 0&&(x=0),u===void 0&&(u=6.28);for(var h=x,o=(u-x)/e.length,n=d.width/2,r=d.height/2,f=0;f<e.length;f++)e[f].x=d.x+n*Math.cos(h),e[f].y=d.y+r*Math.sin(h),h+=o;return e};l.exports=T},61557:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(8570),x=function(u,h){for(var o=d(h,u.length),n=0;n<u.length;n++){var r=u[n],f=o[n];r.x=f.x,r.y=f.y}return u};l.exports=x},63549:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(40053),x=e(77640),u=e(38487),h=function(o,n,r){r===void 0&&(r=0);var f=d(n,!1,o.length);r>0?x(f,r):r<0&&u(f,Math.abs(r));for(var a=0;a<o.length;a++)o[a].x=f[a].x,o[a].y=f[a].y;return o};l.exports=h},51629:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(58813),x=function(u,h,o){var n=d({x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2},o),r=d({x1:h.x2,y1:h.y2,x2:h.x3,y2:h.y3},o),f=d({x1:h.x3,y1:h.y3,x2:h.x1,y2:h.y1},o);n.pop(),r.pop(),f.pop(),n=n.concat(r,f);for(var a=n.length/u.length,c=0,p=0;p<u.length;p++){var v=u[p],m=n[Math.floor(c)];v.x=m.x,v.y=m.y,c+=a}return u};l.exports=x},1045:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){for(var u=0;u<e.length;u++){var h=e[u];h.anims&&h.anims.play(d,x)}return e};l.exports=T},6124:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,h,o){u===void 0&&(u=0),h===void 0&&(h=0),o===void 0&&(o=1);var n,r=0,f=e.length;if(o===1)for(n=h;n<f;n++)e[n][d]+=x+r*u,r++;else for(n=h;n>=0;n--)e[n][d]+=x+r*u,r++;return e};l.exports=T},23646:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,h,o){u===void 0&&(u=0),h===void 0&&(h=0),o===void 0&&(o=1);var n,r=0,f=e.length;if(o===1)for(n=h;n<f;n++)e[n][d]=x+r*u,r++;else for(n=h;n>=0;n--)e[n][d]=x+r*u,r++;return e};l.exports=T},4392:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(30977),x=function(u,h){for(var o=0;o<u.length;o++)d(h,u[o]);return u};l.exports=x},94985:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72006),x=function(u,h){for(var o=0;o<u.length;o++)d(h,u[o]);return u};l.exports=x},63305:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74077),x=function(u,h){for(var o=0;o<u.length;o++)d(h,u[o]);return u};l.exports=x},90739:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(30001),x=function(u,h){for(var o=0;o<u.length;o++)d(h,u[o]);return u};l.exports=x},91417:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(99761),x=function(u,h){for(var o=0;o<u.length;o++)d(h,u[o]);return u};l.exports=x},26182:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6124),x=function(u,h,o,n,r){return d(u,"rotation",h,o,n,r)};l.exports=x},87299:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72395),x=e(53996),u=function(h,o,n){for(var r=o.x,f=o.y,a=0;a<h.length;a++){var c=h[a];d(c,r,f,n,Math.max(1,x(c.x,c.y,r,f)))}return h};l.exports=u},92194:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72395),x=function(u,h,o,n){var r=h.x,f=h.y;if(n===0)return u;for(var a=0;a<u.length;a++)d(u[a],r,f,o,n);return u};l.exports=x},30363:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6124),x=function(u,h,o,n,r){return d(u,"scaleX",h,o,n,r)};l.exports=x},51449:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6124),x=function(u,h,o,n,r,f,a){return o==null&&(o=h),d(u,"scaleX",h,n,f,a),d(u,"scaleY",o,r,f,a)};l.exports=x},64895:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6124),x=function(u,h,o,n,r){return d(u,"scaleY",h,o,n,r)};l.exports=x},30329:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,h,o,n,r){return d(u,"alpha",h,o,n,r)};l.exports=x},43954:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,h,o,n){return d(u,"blendMode",h,0,o,n)};l.exports=x},70688:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,h,o,n,r){return d(u,"depth",h,o,n,r)};l.exports=x},8314:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){for(var u=0;u<e.length;u++)e[u].setInteractive(d,x);return e};l.exports=T},12894:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,h,o,n,r,f,a){return o==null&&(o=h),d(u,"originX",h,n,f,a),d(u,"originY",o,r,f,a),u.forEach(function(c){c.updateDisplayOrigin()}),u};l.exports=x},38767:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,h,o,n,r){return d(u,"rotation",h,o,n,r)};l.exports=x},18584:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,h,o,n,r,f,a){return o==null&&(o=h),d(u,"scaleX",h,n,f,a),d(u,"scaleY",o,r,f,a)};l.exports=x},17381:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,h,o,n,r){return d(u,"scaleX",h,o,n,r)};l.exports=x},74370:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,h,o,n,r){return d(u,"scaleY",h,o,n,r)};l.exports=x},27773:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,h,o,n,r,f,a){return o==null&&(o=h),d(u,"scrollFactorX",h,n,f,a),d(u,"scrollFactorY",o,r,f,a)};l.exports=x},75257:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,h,o,n,r){return d(u,"scrollFactorX",h,o,n,r)};l.exports=x},54512:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,h,o,n,r){return d(u,"scrollFactorY",h,o,n,r)};l.exports=x},69423:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,h){for(var o=0;o<e.length;o++)e[o].setTint(d,x,u,h);return e};l.exports=T},58291:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,h,o,n){return d(u,"visible",h,0,o,n)};l.exports=x},94833:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,h,o,n,r){return d(u,"x",h,o,n,r)};l.exports=x},14284:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,h,o,n,r,f,a){return o==null&&(o=h),d(u,"x",h,n,f,a),d(u,"y",o,r,f,a)};l.exports=x},96574:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,h,o,n,r){return d(u,"y",h,o,n,r)};l.exports=x},74086:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),x=function(u,h,o,n,r){n===void 0&&(n=0),r===void 0&&(r=new d);var f,a,c=u.length;if(c===1)f=u[0].x,a=u[0].y,u[0].x=h,u[0].y=o;else{var p=1,v=0;n===0&&(v=c-1,p=c-2),f=u[v].x,a=u[v].y,u[v].x=h,u[v].y=o;for(var m=0;m<c;m++)if(!(p>=c||p===-1)){var y=u[p],P=y.x,E=y.y;y.x=f,y.y=a,f=P,a=E,n===0?p--:p++}}return r.x=f,r.y=a,r};l.exports=x},86347:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(18592),x=function(u){return d(u)};l.exports=x},1558:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(5514),x=function(u,h,o,n,r){r===void 0&&(r=!1);var f=Math.abs(n-o)/u.length,a;if(r)for(a=0;a<u.length;a++)u[a][h]+=d(a*f,o,n);else for(a=0;a<u.length;a++)u[a][h]=d(a*f,o,n);return u};l.exports=x},9938:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(87736),x=function(u,h,o,n,r){r===void 0&&(r=!1);var f=Math.abs(n-o)/u.length,a;if(r)for(a=0;a<u.length;a++)u[a][h]+=d(a*f,o,n);else for(a=0;a<u.length;a++)u[a][h]=d(a*f,o,n);return u};l.exports=x},71060:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,h){if(h===void 0&&(h=!1),e.length===0)return e;if(e.length===1)return h?e[0][d]+=(u+x)/2:e[0][d]=(u+x)/2,e;var o=Math.abs(u-x)/(e.length-1),n;if(h)for(n=0;n<e.length;n++)e[n][d]+=n*o+x;else for(n=0;n<e.length;n++)e[n][d]=n*o+x;return e};l.exports=T},11207:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var d=0;d<e.length;d++)e[d].visible=!e[d].visible;return e};l.exports=T},24404:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(1071),x=function(u,h,o){o===void 0&&(o=0);for(var n=0;n<u.length;n++){var r=u[n];r.x=d(r.x,h.left-o,h.right+o),r.y=d(r.y,h.top-o,h.bottom+o)}return u};l.exports=x},83979:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={AlignTo:e(62270),Angle:e(61148),Call:e(22015),GetFirst:e(31060),GetLast:e(52367),GridAlign:e(12673),IncAlpha:e(691),IncX:e(3877),IncXY:e(71020),IncY:e(28970),PlaceOnCircle:e(82249),PlaceOnEllipse:e(30285),PlaceOnLine:e(61557),PlaceOnRectangle:e(63549),PlaceOnTriangle:e(51629),PlayAnimation:e(1045),PropertyValueInc:e(6124),PropertyValueSet:e(23646),RandomCircle:e(4392),RandomEllipse:e(94985),RandomLine:e(63305),RandomRectangle:e(90739),RandomTriangle:e(91417),Rotate:e(26182),RotateAround:e(87299),RotateAroundDistance:e(92194),ScaleX:e(30363),ScaleXY:e(51449),ScaleY:e(64895),SetAlpha:e(30329),SetBlendMode:e(43954),SetDepth:e(70688),SetHitArea:e(8314),SetOrigin:e(12894),SetRotation:e(38767),SetScale:e(18584),SetScaleX:e(17381),SetScaleY:e(74370),SetScrollFactor:e(27773),SetScrollFactorX:e(75257),SetScrollFactorY:e(54512),SetTint:e(69423),SetVisible:e(58291),SetX:e(94833),SetXY:e(14284),SetY:e(96574),ShiftPosition:e(74086),Shuffle:e(86347),SmootherStep:e(9938),SmoothStep:e(1558),Spread:e(71060),ToggleVisible:e(11207),WrapInRectangle:e(24404)}},85463:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),x=e(56694),u=e(16938),h=e(2406),o=e(71519),n=e(10850),r=e(28834),f=new x({initialize:function(c,p,v){this.manager=c,this.key=p,this.type="frame",this.frames=this.getFrames(c.textureManager,n(v,"frames",[]),n(v,"defaultTextureKey",null),n(v,"sortFrames",!0)),this.frameRate=n(v,"frameRate",null),this.duration=n(v,"duration",null),this.msPerFrame,this.skipMissedFrames=n(v,"skipMissedFrames",!0),this.delay=n(v,"delay",0),this.repeat=n(v,"repeat",0),this.repeatDelay=n(v,"repeatDelay",0),this.yoyo=n(v,"yoyo",!1),this.showBeforeDelay=n(v,"showBeforeDelay",!1),this.showOnStart=n(v,"showOnStart",!1),this.hideOnComplete=n(v,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(u.PAUSE_ALL,this.pause,this),this.manager.on(u.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(a,c,p,v){p===null&&v===null?(a.frameRate=24,a.duration=24/c*1e3):p&&v===null?(a.duration=p,a.frameRate=c/(p/1e3)):(a.frameRate=v,a.duration=c/v*1e3),a.msPerFrame=1e3/a.frameRate},addFrame:function(a){return this.addFrameAt(this.frames.length,a)},addFrameAt:function(a,c){var p=this.getFrames(this.manager.textureManager,c);if(p.length>0){if(a===0)this.frames=p.concat(this.frames);else if(a===this.frames.length)this.frames=this.frames.concat(p);else{var v=this.frames.slice(0,a),m=this.frames.slice(a);this.frames=v.concat(p,m)}this.updateFrameSequence()}return this},checkFrame:function(a){return a>=0&&a<this.frames.length},getFirstTick:function(a){a.accumulator=0,a.nextTick=a.msPerFrame+a.currentFrame.duration},getFrameAt:function(a){return this.frames[a]},getFrames:function(a,c,p,v){v===void 0&&(v=!0);var m=[],y,P,E=1,S,w;if(typeof c=="string"){if(w=c,!a.exists(w))return console.warn('Texture "%s" not found',w),m;var R=a.get(w),A=R.getFrameNames();v&&r(A),c=[],A.forEach(function(B){c.push({key:w,frame:B})})}if(!Array.isArray(c)||c.length===0)return m;for(S=0;S<c.length;S++){var O=c[S],F=n(O,"key",p);if(F){var b=n(O,"frame",0),D=a.getFrame(F,b);if(!D){console.warn('Texture "%s" not found',F);continue}P=new o(F,b,E,D),P.duration=n(O,"duration",0),P.isFirst=!y,y&&(y.nextFrame=P,P.prevFrame=y),m.push(P),y=P,E++}}if(m.length>0){P.isLast=!0,P.nextFrame=m[0],m[0].prevFrame=P;var I=1/(m.length-1);for(S=0;S<m.length;S++)m[S].progress=S*I}return m},getNextTick:function(a){a.accumulator-=a.nextTick,a.nextTick=a.msPerFrame+a.currentFrame.duration},getFrameByProgress:function(a){return a=d(a,0,1),h(a,this.frames,"progress")},nextFrame:function(a){var c=a.currentFrame;c.isLast?a.yoyo?this.handleYoyoFrame(a,!1):a.repeatCounter>0?a.inReverse&&a.forward?a.forward=!1:this.repeatAnimation(a):a.complete():this.updateAndGetNextTick(a,c.nextFrame)},handleYoyoFrame:function(a,c){if(c||(c=!1),a.inReverse===!c&&a.repeatCounter>0){(a.repeatDelay===0||a.pendingRepeat)&&(a.forward=c),this.repeatAnimation(a);return}if(a.inReverse!==c&&a.repeatCounter===0){a.complete();return}a.forward=c;var p=c?a.currentFrame.nextFrame:a.currentFrame.prevFrame;this.updateAndGetNextTick(a,p)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(a){var c=a.currentFrame;c.isFirst?a.yoyo?this.handleYoyoFrame(a,!0):a.repeatCounter>0?a.inReverse&&!a.forward?this.repeatAnimation(a):(a.forward=!0,this.repeatAnimation(a)):a.complete():this.updateAndGetNextTick(a,c.prevFrame)},updateAndGetNextTick:function(a,c){a.setCurrentFrame(c),this.getNextTick(a)},removeFrame:function(a){var c=this.frames.indexOf(a);return c!==-1&&this.removeFrameAt(c),this},removeFrameAt:function(a){return this.frames.splice(a,1),this.updateFrameSequence(),this},repeatAnimation:function(a){if(a._pendingStop===2){if(a._pendingStopValue===0)return a.stop();a._pendingStopValue--}a.repeatDelay>0&&!a.pendingRepeat?(a.pendingRepeat=!0,a.accumulator-=a.nextTick,a.nextTick+=a.repeatDelay):(a.repeatCounter--,a.forward?a.setCurrentFrame(a.currentFrame.nextFrame):a.setCurrentFrame(a.currentFrame.prevFrame),a.isPlaying&&(this.getNextTick(a),a.handleRepeat()))},toJSON:function(){var a={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(c){a.frames.push(c.toJSON())}),a},updateFrameSequence:function(){for(var a=this.frames.length,c=1/(a-1),p,v=0;v<a;v++)p=this.frames[v],p.index=v+1,p.isFirst=!1,p.isLast=!1,p.progress=v*c,v===0?(p.isFirst=!0,a===1?(p.isLast=!0,p.nextFrame=p,p.prevFrame=p):(p.isLast=!1,p.prevFrame=this.frames[a-1],p.nextFrame=this.frames[v+1])):v===a-1&&a>1?(p.isLast=!0,p.prevFrame=this.frames[a-2],p.nextFrame=this.frames[0]):a>1&&(p.prevFrame=this.frames[v-1],p.nextFrame=this.frames[v+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(u.PAUSE_ALL,this.pause,this),this.manager.off(u.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var a=0;a<this.frames.length;a++)this.frames[a].destroy();this.frames=[],this.manager=null}});l.exports=f},71519:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(h,o,n,r,f){f===void 0&&(f=!1),this.textureKey=h,this.textureFrame=o,this.index=n,this.frame=r,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=f},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});l.exports=x},90249:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(85463),x=e(56694),u=e(33885),h=e(6659),o=e(16938),n=e(97081),r=e(72632),f=e(10850),a=e(83392),c=e(13401),p=e(76400),v=new x({Extends:h,initialize:function(y){h.call(this),this.game=y,this.textureManager=null,this.globalTimeScale=1,this.anims=new u,this.mixes=new u,this.paused=!1,this.name="AnimationManager",y.events.once(n.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(n.DESTROY,this.destroy,this)},addMix:function(m,y,P){var E=this.anims,S=this.mixes,w=typeof m=="string"?m:m.key,R=typeof y=="string"?y:y.key;if(E.has(w)&&E.has(R)){var A=S.get(w);A||(A={}),A[R]=P,S.set(w,A)}return this},removeMix:function(m,y){var P=this.mixes,E=typeof m=="string"?m:m.key,S=P.get(E);if(S)if(y){var w=typeof y=="string"?y:y.key;S.hasOwnProperty(w)&&delete S[w]}else y||P.delete(E);return this},getMix:function(m,y){var P=this.mixes,E=typeof m=="string"?m:m.key,S=typeof y=="string"?y:y.key,w=P.get(E);return w&&w.hasOwnProperty(S)?w[S]:0},add:function(m,y){return this.anims.has(m)?(console.warn("Animation key exists: "+m),this):(y.key=m,this.anims.set(m,y),this.emit(o.ADD_ANIMATION,m,y),this)},exists:function(m){return this.anims.has(m)},createFromAseprite:function(m,y,P){var E=[],S=this.game.cache.json.get(m);if(!S)return console.warn("No Aseprite data found for: "+m),E;var w=this,R=f(S,"meta",null),A=f(S,"frames",null);if(R&&A){var O=f(R,"frameTags",[]);O.forEach(function(F){var b=[],D=r(F,"name",null),I=r(F,"from",0),B=r(F,"to",0),k=r(F,"direction","forward");if(D&&(!y||y&&y.indexOf(D)>-1)){for(var U=0,X=I;X<=B;X++){var H=X.toString(),N=A[H];if(N){var z=r(N,"duration",a.MAX_SAFE_INTEGER);b.push({key:m,frame:H,duration:z}),U+=z}}var L=U/b.length;b.forEach(function(Y){Y.duration-=L}),k==="reverse"&&(b=b.reverse());var G={key:D,frames:b,duration:U,yoyo:k==="pingpong"},V;P?P.anims&&(V=P.anims.create(G)):V=w.create(G),V&&E.push(V)}})}return E},create:function(m){var y=m.key,P=!1;return y&&(P=this.get(y),P?console.warn("AnimationManager key already exists: "+y):(P=new d(this,y,m),this.anims.set(y,P),this.emit(o.ADD_ANIMATION,y,P))),P},fromJSON:function(m,y){y===void 0&&(y=!1),y&&this.anims.clear(),typeof m=="string"&&(m=JSON.parse(m));var P=[];if(m.hasOwnProperty("anims")&&Array.isArray(m.anims)){for(var E=0;E<m.anims.length;E++)P.push(this.create(m.anims[E]));m.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=m.globalTimeScale)}else m.hasOwnProperty("key")&&m.type==="frame"&&P.push(this.create(m));return P},generateFrameNames:function(m,y){var P=f(y,"prefix",""),E=f(y,"start",0),S=f(y,"end",0),w=f(y,"suffix",""),R=f(y,"zeroPad",0),A=f(y,"outputArray",[]),O=f(y,"frames",!1);if(!this.textureManager.exists(m))return console.warn('Texture "%s" not found',m),A;var F=this.textureManager.get(m);if(!F)return A;var b;if(y)for(O||(O=c(E,S)),b=0;b<O.length;b++){var D=P+p(O[b],R,"0",1)+w;F.has(D)?A.push({key:m,frame:D}):console.warn('Frame "%s" not found in texture "%s"',D,m)}else for(O=F.getFrameNames(),b=0;b<O.length;b++)A.push({key:m,frame:O[b]});return A},generateFrameNumbers:function(m,y){var P=f(y,"start",0),E=f(y,"end",-1),S=f(y,"first",!1),w=f(y,"outputArray",[]),R=f(y,"frames",!1);if(!this.textureManager.exists(m))return console.warn('Texture "%s" not found',m),w;var A=this.textureManager.get(m);if(!A)return w;S&&A.has(S)&&w.push({key:m,frame:S}),R||(E===-1&&(E=A.frameTotal-2),R=c(P,E));for(var O=0;O<R.length;O++){var F=R[O];A.has(F)?w.push({key:m,frame:F}):console.warn('Frame "%s" not found in texture "%s"',F,m)}return w},get:function(m){return this.anims.get(m)},getAnimsFromTexture:function(m){for(var y=this.textureManager.get(m),P=y.key,E=this.anims.getArray(),S=[],w=0;w<E.length;w++)for(var R=E[w],A=R.frames,O=0;O<A.length;O++)if(A[O].textureKey===P){S.push(R.key);break}return S},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(o.PAUSE_ALL)),this},play:function(m,y){Array.isArray(y)||(y=[y]);for(var P=0;P<y.length;P++)y[P].anims.play(m);return this},staggerPlay:function(m,y,P,E){P===void 0&&(P=0),E===void 0&&(E=!0),Array.isArray(y)||(y=[y]);var S=y.length;E||S--;for(var w=0;w<y.length;w++){var R=P<0?Math.abs(P)*(S-w):P*w;y[w].anims.playAfterDelay(m,R)}return this},remove:function(m){var y=this.get(m);return y&&(this.emit(o.REMOVE_ANIMATION,m,y),this.anims.delete(m),this.removeMix(m)),y},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(o.RESUME_ALL)),this},toJSON:function(m){var y={anims:[],globalTimeScale:this.globalTimeScale};return m!==void 0&&m!==""?y.anims.push(this.anims.get(m).toJSON()):this.anims.each(function(P,E){y.anims.push(E.toJSON())}),y},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});l.exports=v},16569:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(33885),u=e(72632),h=e(16938),o=e(85463),n=new d({initialize:function(f){this.parent=f,this.animationManager=f.scene.sys.anims,this.animationManager.on(h.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(r){var f=this.parent;if(r===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,f;Array.isArray(r)||(r=[r]);for(var a=0;a<r.length;a++){var c=r[a];this.nextAnim?this.nextAnimsQueue.push(c):this.nextAnim=c}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(r){this.isPlaying&&this.stop();var f=this.animationManager,a=typeof r=="string"?r:u(r,"key",null),c=this.exists(a)?this.get(a):f.get(a);if(!c)console.warn("Missing animation: "+a);else{this.currentAnim=c;var p=c.getTotalFrames(),v=u(r,"frameRate",c.frameRate),m=u(r,"duration",c.duration);c.calculateDuration(this,p,m,v),this.delay=u(r,"delay",c.delay),this.repeat=u(r,"repeat",c.repeat),this.repeatDelay=u(r,"repeatDelay",c.repeatDelay),this.yoyo=u(r,"yoyo",c.yoyo),this.showBeforeDelay=u(r,"showBeforeDelay",c.showBeforeDelay),this.showOnStart=u(r,"showOnStart",c.showOnStart),this.hideOnComplete=u(r,"hideOnComplete",c.hideOnComplete),this.skipMissedFrames=u(r,"skipMissedFrames",c.skipMissedFrames),this.timeScale=u(r,"timeScale",this.timeScale);var y=u(r,"startFrame",0);y>c.getTotalFrames()&&(y=0);var P=c.frames[y];y===0&&!this.forward&&(P=c.getLastFrame()),this.currentFrame=P}return this.parent},pause:function(r){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),r!==void 0&&this.setCurrentFrame(r),this.parent},resume:function(r){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),r!==void 0&&this.setCurrentFrame(r),this.parent},playAfterDelay:function(r,f){if(!this.isPlaying)this.delayCounter=f,this.play(r,!0);else{var a=this.nextAnim,c=this.nextAnimsQueue;a&&c.unshift(a),this.nextAnim=r,this._pendingStop=1,this._pendingStopValue=f}return this.parent},playAfterRepeat:function(r,f){if(f===void 0&&(f=1),!this.isPlaying)this.play(r);else{var a=this.nextAnim,c=this.nextAnimsQueue;a&&c.unshift(a),this.repeatCounter!==-1&&f>this.repeatCounter&&(f=this.repeatCounter),this.nextAnim=r,this._pendingStop=2,this._pendingStopValue=f}return this.parent},play:function(r,f){f===void 0&&(f=!1);var a=this.currentAnim,c=this.parent,p=typeof r=="string"?r:r.key;if(f&&this.isPlaying&&a.key===p)return c;if(a&&this.isPlaying){var v=this.animationManager.getMix(a.key,r);if(v>0)return this.playAfterDelay(r,v)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(r)},playReverse:function(r,f){f===void 0&&(f=!1);var a=typeof r=="string"?r:r.key;return f&&this.isPlaying&&this.currentAnim.key===a?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(r))},startAnimation:function(r){this.load(r);var f=this.currentAnim,a=this.parent;return f&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,f.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),a},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(h.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(h.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(h.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(h.ANIMATION_COMPLETE,h.ANIMATION_COMPLETE_KEY)},emitEvents:function(r,f){var a=this.currentAnim;if(a){var c=this.currentFrame,p=this.parent,v=c.textureFrame;p.emit(r,a,c,p,v),f&&p.emit(f+a.key,a,c,p,v)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var r=this.currentFrame;if(!r)return 0;var f=r.progress;return this.inReverse&&(f*=-1),f},setProgress:function(r){return this.forward||(r=1-r),this.setCurrentFrame(this.currentAnim.getFrameByProgress(r)),this.parent},setRepeat:function(r){return this.repeatCounter=r===-1?Number.MAX_VALUE:r,this.parent},globalRemove:function(r,f){f===void 0&&(f=this.currentAnim),this.isPlaying&&f.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(r,f){r===void 0&&(r=!1),f===void 0&&(f=!1);var a=this.currentAnim,c=this.parent;return a?(f&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),a.getFirstTick(this),this.emitEvents(h.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!r,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(a.frames[0]),this.parent):c},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var r=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(r)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var r=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(r)}return this.parent},stopAfterDelay:function(r){return this._pendingStop=1,this._pendingStopValue=r,this.parent},stopAfterRepeat:function(r){return r===void 0&&(r=1),this.repeatCounter!==-1&&r>this.repeatCounter&&(r=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=r,this.parent},stopOnFrame:function(r){return this._pendingStop=3,this._pendingStopValue=r,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(r,f){var a=this.currentAnim;if(!(!this.isPlaying||!a||a.paused)){if(this.accumulator+=f*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=f,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?a.nextFrame(this):a.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var c=0;do this.forward?a.nextFrame(this):a.previousFrame(this),c++;while(this.isPlaying&&this.accumulator>this.nextTick&&c<60)}}},setCurrentFrame:function(r){var f=this.parent;return this.currentFrame=r,f.texture=r.frame.texture,f.frame=r.frame,f.isCropped&&f.frame.updateCropUVs(f._crop,f.flipX,f.flipY),r.setAlpha&&(f.alpha=r.alpha),f.setSizeToFrame(),f._originComponent&&(r.frame.customPivot?f.setOrigin(r.frame.pivotX,r.frame.pivotY):f.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(h.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===r&&this.stop()),f},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(r){return this.anims?this.anims.get(r):null},exists:function(r){return this.anims?this.anims.has(r):!1},create:function(r){var f=r.key,a=!1;return f&&(a=this.get(f),a?console.warn("Animation key already exists: "+f):(a=new o(this,f,r),this.anims||(this.anims=new x),this.anims.set(f,a))),a},createFromAseprite:function(r,f){return this.animationManager.createFromAseprite(r,f,this.parent)},generateFrameNames:function(r,f){return this.animationManager.generateFrameNames(r,f)},generateFrameNumbers:function(r,f){return this.animationManager.generateFrameNumbers(r,f)},remove:function(r){var f=this.get(r);return f&&(this.currentAnim===f&&this.stop(),this.anims.delete(r)),f},destroy:function(){this.animationManager.off(h.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});l.exports=n},44509:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="add"},84563:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="animationcomplete"},61586:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="animationcomplete-"},72175:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="animationrepeat"},568:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="animationrestart"},37690:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="animationstart"},58525:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="animationstop"},5243:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="animationupdate"},10598:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pauseall"},4860:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="remove"},31865:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="resumeall"},16938:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={ADD_ANIMATION:e(44509),ANIMATION_COMPLETE:e(84563),ANIMATION_COMPLETE_KEY:e(61586),ANIMATION_REPEAT:e(72175),ANIMATION_RESTART:e(568),ANIMATION_START:e(37690),ANIMATION_STOP:e(58525),ANIMATION_UPDATE:e(5243),PAUSE_ALL:e(10598),REMOVE_ANIMATION:e(4860),RESUME_ALL:e(31865)}},13517:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={Animation:e(85463),AnimationFrame:e(71519),AnimationManager:e(90249),AnimationState:e(16569),Events:e(16938)}},23740:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(33885),u=e(6659),h=e(69773),o=new d({initialize:function(){this.entries=new x,this.events=new u},add:function(n,r){return this.entries.set(n,r),this.events.emit(h.ADD,this,n,r),this},has:function(n){return this.entries.has(n)},exists:function(n){return this.entries.has(n)},get:function(n){return this.entries.get(n)},remove:function(n){var r=this.get(n);return r&&(this.entries.delete(n),this.events.emit(h.REMOVE,this,n,r.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});l.exports=o},43474:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23740),x=e(56694),u=e(97081),h=new x({initialize:function(n){this.game=n,this.binary=new d,this.bitmapFont=new d,this.json=new d,this.physics=new d,this.shader=new d,this.audio=new d,this.video=new d,this.text=new d,this.html=new d,this.obj=new d,this.tilemap=new d,this.xml=new d,this.custom={},this.game.events.once(u.DESTROY,this.destroy,this)},addCustom:function(o){return this.custom.hasOwnProperty(o)||(this.custom[o]=new d),this.custom[o]},destroy:function(){for(var o=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],n=0;n<o.length;n++)this[o[n]].destroy(),this[o[n]]=null;for(var r in this.custom)this.custom[r].destroy();this.custom=null,this.game=null}});l.exports=h},94762:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="add"},75968:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="remove"},69773:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={ADD:e(94762),REMOVE:e(75968)}},45820:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={BaseCache:e(23740),CacheManager:e(43474),Events:e(69773)}},51052:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(64937),u=e(75606),h=e(6659),o=e(89787),n=e(74118),r=e(69360),f=e(93222),a=e(93736),c=new d({Extends:h,Mixins:[x.AlphaSingle,x.Visible],initialize:function(v,m,y,P){v===void 0&&(v=0),m===void 0&&(m=0),y===void 0&&(y=0),P===void 0&&(P=0),h.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new n,this.dirty=!0,this._x=v,this._y=m,this._width=y,this._height=P,this._bounds=new n,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new r,this.transparent=!0,this.backgroundColor=f("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new a(y/2,P/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0},addToRenderList:function(p){this.renderList.push(p)},setOrigin:function(p,v){return p===void 0&&(p=.5),v===void 0&&(v=p),this.originX=p,this.originY=v,this},getScroll:function(p,v,m){m===void 0&&(m=new a);var y=this.width*.5,P=this.height*.5;return m.x=p-y,m.y=v-P,this.useBounds&&(m.x=this.clampX(m.x),m.y=this.clampY(m.y)),m},centerOnX:function(p){var v=this.width*.5;return this.midPoint.x=p,this.scrollX=p-v,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(p){var v=this.height*.5;return this.midPoint.y=p,this.scrollY=p-v,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(p,v){return this.centerOnX(p),this.centerOnY(v),this},centerToBounds:function(){if(this.useBounds){var p=this._bounds,v=this.width*.5,m=this.height*.5;this.midPoint.set(p.centerX,p.centerY),this.scrollX=p.centerX-v,this.scrollY=p.centerY-m}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(p){if(this.disableCull)return p;var v=this.matrix.matrix,m=v[0],y=v[1],P=v[2],E=v[3],S=m*E-y*P;if(!S)return p;var w=v[4],R=v[5],A=this.scrollX,O=this.scrollY,F=this.width,b=this.height,D=this.y,I=D+b,B=this.x,k=B+F,U=this.culledObjects,X=p.length;S=1/S,U.length=0;for(var H=0;H<X;++H){var N=p[H];if(!N.hasOwnProperty("width")||N.parentContainer){U.push(N);continue}var z=N.width,L=N.height,G=N.x-A*N.scrollFactorX-z*N.originX,V=N.y-O*N.scrollFactorY-L*N.originY,Y=G*m+V*P+w,W=G*y+V*E+R,$=(G+z)*m+(V+L)*P+w,K=(G+z)*y+(V+L)*E+R;$>B&&Y<k&&K>D&&W<I&&U.push(N)}return U},getWorldPoint:function(p,v,m){m===void 0&&(m=new a);var y=this.matrix.matrix,P=y[0],E=y[1],S=y[2],w=y[3],R=y[4],A=y[5],O=P*w-E*S;if(!O)return m.x=p,m.y=v,m;O=1/O;var F=w*O,b=-E*O,D=-S*O,I=P*O,B=(S*A-w*R)*O,k=(E*R-P*A)*O,U=Math.cos(this.rotation),X=Math.sin(this.rotation),H=this.zoomX,N=this.zoomY,z=this.scrollX,L=this.scrollY,G=p+(z*U-L*X)*H,V=v+(z*X+L*U)*N;return m.x=G*F+V*D+B,m.y=G*b+V*I+k,m},ignore:function(p){var v=this.id;Array.isArray(p)||(p=[p]);for(var m=0;m<p.length;m++){var y=p[m];Array.isArray(y)?this.ignore(y):y.isParent?this.ignore(y.getChildren()):y.cameraFilter|=v}return this},preRender:function(){this.renderList.length=0;var p=this.width,v=this.height,m=p*.5,y=v*.5,P=this.zoomX,E=this.zoomY,S=this.matrix,w=p*this.originX,R=v*this.originY,A=this.scrollX,O=this.scrollY;this.useBounds&&(A=this.clampX(A),O=this.clampY(O)),this.roundPixels&&(w=Math.round(w),R=Math.round(R)),this.scrollX=A,this.scrollY=O;var F=A+m,b=O+y;this.midPoint.set(F,b);var D=p/P,I=v/E;this.worldView.setTo(F-D/2,b-I/2,D,I),S.applyITRS(this.x+w,this.y+R,this.rotation,P,E),S.translate(-w,-R)},clampX:function(p){var v=this._bounds,m=this.displayWidth,y=v.x+(m-this.width)/2,P=Math.max(y,y+v.width-m);return p<y?p=y:p>P&&(p=P),p},clampY:function(p){var v=this._bounds,m=this.displayHeight,y=v.y+(m-this.height)/2,P=Math.max(y,y+v.height-m);return p<y?p=y:p>P&&(p=P),p},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(p){return p===void 0&&(p=0),this.rotation=u(p),this},setBackgroundColor:function(p){return p===void 0&&(p="rgba(0,0,0,0)"),this.backgroundColor=f(p),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(p,v,m,y,P){return P===void 0&&(P=!1),this._bounds.setTo(p,v,m,y),this.dirty=!0,this.useBounds=!0,P?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(p){p===void 0&&(p=new n);var v=this._bounds;return p.setTo(v.x,v.y,v.width,v.height),p},setName:function(p){return p===void 0&&(p=""),this.name=p,this},setPosition:function(p,v){return v===void 0&&(v=p),this.x=p,this.y=v,this},setRotation:function(p){return p===void 0&&(p=0),this.rotation=p,this},setRoundPixels:function(p){return this.roundPixels=p,this},setScene:function(p,v){v===void 0&&(v=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=p,this.isSceneCamera=v;var m=p.sys;return this.sceneManager=m.game.scene,this.scaleManager=m.scale,this.cameraManager=m.cameras,this.updateSystem(),this},setScroll:function(p,v){return v===void 0&&(v=p),this.scrollX=p,this.scrollY=v,this},setSize:function(p,v){return v===void 0&&(v=p),this.width=p,this.height=v,this},setViewport:function(p,v,m,y){return this.x=p,this.y=v,this.width=m,this.height=y,this},setZoom:function(p,v){return p===void 0&&(p=1),v===void 0&&(v=p),p===0&&(p=.001),v===0&&(v=.001),this.zoomX=p,this.zoomY=v,this},setMask:function(p,v){return v===void 0&&(v=!0),this.mask=p,this._maskCamera=v?this.cameraManager.default:this,this},clearMask:function(p){return p===void 0&&(p=!1),p&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var p={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(p.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),p},update:function(){},setIsSceneCamera:function(p){return this.isSceneCamera=p,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var p=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,v=this.sceneManager;p&&!this._customViewport?v.customViewports++:!p&&this._customViewport&&v.customViewports--,this.dirty=!0,this._customViewport=p}},destroy:function(){this.emit(o.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(p){this._x=p,this.updateSystem()}},y:{get:function(){return this._y},set:function(p){this._y=p,this.updateSystem()}},width:{get:function(){return this._width},set:function(p){this._width=p,this.updateSystem()}},height:{get:function(){return this._height},set:function(p){this._height=p,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(p){p!==this._scrollX&&(this._scrollX=p,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(p){p!==this._scrollY&&(this._scrollY=p,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(p){this._zoomX=p,this._zoomY=p,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(p){this._zoomX=p,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(p){this._zoomY=p,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(p){this._rotation=p,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});l.exports=c},47751:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(51052),x=e(79993),u=e(82897),h=e(56694),o=e(64937),n=e(53030),r=e(89787),f=e(42798),a=e(74118),c=e(93736),p=new h({Extends:d,Mixins:[o.PostPipeline],initialize:function(m,y,P,E){d.call(this,m,y,P,E),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new n.Fade(this),this.flashEffect=new n.Flash(this),this.shakeEffect=new n.Shake(this),this.panEffect=new n.Pan(this),this.rotateToEffect=new n.RotateTo(this),this.zoomEffect=new n.Zoom(this),this.lerp=new c(1,1),this.followOffset=new c,this.deadzone=null,this._follow=null},setDeadzone:function(v,m){if(v===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=v,this.deadzone.height=m):this.deadzone=new a(0,0,v,m),this._follow){var y=this.width/2,P=this.height/2,E=this._follow.x-this.followOffset.x,S=this._follow.y-this.followOffset.y;this.midPoint.set(E,S),this.scrollX=E-y,this.scrollY=S-P}x(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(v,m,y,P,E,S){return this.fadeEffect.start(!1,v,m,y,P,!0,E,S)},fadeOut:function(v,m,y,P,E,S){return this.fadeEffect.start(!0,v,m,y,P,!0,E,S)},fadeFrom:function(v,m,y,P,E,S,w){return this.fadeEffect.start(!1,v,m,y,P,E,S,w)},fade:function(v,m,y,P,E,S,w){return this.fadeEffect.start(!0,v,m,y,P,E,S,w)},flash:function(v,m,y,P,E,S,w){return this.flashEffect.start(v,m,y,P,E,S,w)},shake:function(v,m,y,P,E){return this.shakeEffect.start(v,m,y,P,E)},pan:function(v,m,y,P,E,S,w){return this.panEffect.start(v,m,y,P,E,S,w)},rotateTo:function(v,m,y,P,E,S,w){return this.rotateToEffect.start(v,m,y,P,E,S,w)},zoomTo:function(v,m,y,P,E,S){return this.zoomEffect.start(v,m,y,P,E,S)},preRender:function(){this.renderList.length=0;var v=this.width,m=this.height,y=v*.5,P=m*.5,E=this.zoom,S=this.matrix,w=v*this.originX,R=m*this.originY,A=this._follow,O=this.deadzone,F=this.scrollX,b=this.scrollY;O&&x(O,this.midPoint.x,this.midPoint.y);var D=!1;if(this.roundPixels&&(w=Math.floor(w),R=Math.floor(R)),A&&!this.panEffect.isRunning){var I=this.lerp,B=A.x-this.followOffset.x,k=A.y-this.followOffset.y;this.roundPixels&&(B=Math.floor(B),k=Math.floor(k)),O?(B<O.x?F=f(F,F-(O.x-B),I.x):B>O.right&&(F=f(F,F+(B-O.right),I.x)),k<O.y?b=f(b,b-(O.y-k),I.y):k>O.bottom&&(b=f(b,b+(k-O.bottom),I.y))):(F=f(F,B-w,I.x),b=f(b,k-R,I.y)),D=!0}this.useBounds&&(F=this.clampX(F),b=this.clampY(b)),this.roundPixels&&(F=Math.floor(F),b=Math.floor(b)),this.scrollX=F,this.scrollY=b;var U=F+y,X=b+P;this.midPoint.set(U,X);var H=v/E,N=m/E,z=U-H/2,L=X-N/2;this.roundPixels&&(z=Math.floor(z),L=Math.floor(L)),this.worldView.setTo(z,L,H,N),S.applyITRS(Math.floor(this.x+w),Math.floor(this.y+R),this.rotation,E,E),S.translate(-w,-R),this.shakeEffect.preRender(),D&&this.emit(r.FOLLOW_UPDATE,this,A)},setLerp:function(v,m){return v===void 0&&(v=1),m===void 0&&(m=v),this.lerp.set(v,m),this},setFollowOffset:function(v,m){return v===void 0&&(v=0),m===void 0&&(m=0),this.followOffset.set(v,m),this},startFollow:function(v,m,y,P,E,S){m===void 0&&(m=!1),y===void 0&&(y=1),P===void 0&&(P=y),E===void 0&&(E=0),S===void 0&&(S=E),this._follow=v,this.roundPixels=m,y=u(y,0,1),P=u(P,0,1),this.lerp.set(y,P),this.followOffset.set(E,S);var w=this.width/2,R=this.height/2,A=v.x-E,O=v.y-S;return this.midPoint.set(A,O),this.scrollX=A-w,this.scrollY=O-R,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(v,m){this.visible&&(this.rotateToEffect.update(v,m),this.panEffect.update(v,m),this.zoomEffect.update(v,m),this.shakeEffect.update(v,m),this.flashEffect.update(v,m),this.fadeEffect.update(v,m))},destroy:function(){this.resetFX(),d.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});l.exports=p},62382:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(47751),x=e(56694),u=e(72632),h=e(91963),o=e(94287),n=e(40444),r=e(7599),f=new x({initialize:function(c){this.scene=c,this.systems=c.sys,this.roundPixels=c.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,c.sys.events.once(r.BOOT,this.boot,this),c.sys.events.on(r.START,this.start,this)},boot:function(){var a=this.systems;a.settings.cameras?this.fromJSON(a.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new d(0,0,a.scale.width,a.scale.height).setScene(this.scene),a.game.scale.on(n.RESIZE,this.onResize,this),this.systems.events.once(r.DESTROY,this.destroy,this)},start:function(){if(!this.main){var a=this.systems;a.settings.cameras?this.fromJSON(a.settings.cameras):this.add(),this.main=this.cameras[0]}var c=this.systems.events;c.on(r.UPDATE,this.update,this),c.once(r.SHUTDOWN,this.shutdown,this)},add:function(a,c,p,v,m,y){a===void 0&&(a=0),c===void 0&&(c=0),p===void 0&&(p=this.scene.sys.scale.width),v===void 0&&(v=this.scene.sys.scale.height),m===void 0&&(m=!1),y===void 0&&(y="");var P=new d(a,c,p,v);return P.setName(y),P.setScene(this.scene),P.setRoundPixels(this.roundPixels),P.id=this.getNextID(),this.cameras.push(P),m&&(this.main=P),P},addExisting:function(a,c){c===void 0&&(c=!1);var p=this.cameras.indexOf(a);return p===-1?(a.id=this.getNextID(),a.setRoundPixels(this.roundPixels),this.cameras.push(a),c&&(this.main=a),a):null},getNextID:function(){for(var a=this.cameras,c=1,p=0;p<32;p++){for(var v=!1,m=0;m<a.length;m++){var y=a[m];if(y&&y.id===c){v=!0;continue}}if(v)c=c<<1;else return c}return 0},getTotal:function(a){a===void 0&&(a=!1);for(var c=0,p=this.cameras,v=0;v<p.length;v++){var m=p[v];(!a||a&&m.visible)&&c++}return c},fromJSON:function(a){Array.isArray(a)||(a=[a]);for(var c=this.scene.sys.scale.width,p=this.scene.sys.scale.height,v=0;v<a.length;v++){var m=a[v],y=u(m,"x",0),P=u(m,"y",0),E=u(m,"width",c),S=u(m,"height",p),w=this.add(y,P,E,S);w.name=u(m,"name",""),w.zoom=u(m,"zoom",1),w.rotation=u(m,"rotation",0),w.scrollX=u(m,"scrollX",0),w.scrollY=u(m,"scrollY",0),w.roundPixels=u(m,"roundPixels",!1),w.visible=u(m,"visible",!0);var R=u(m,"backgroundColor",!1);R&&w.setBackgroundColor(R);var A=u(m,"bounds",null);if(A){var O=u(A,"x",0),F=u(A,"y",0),b=u(A,"width",c),D=u(A,"height",p);w.setBounds(O,F,b,D)}}return this},getCamera:function(a){for(var c=this.cameras,p=0;p<c.length;p++)if(c[p].name===a)return c[p];return null},getCamerasBelowPointer:function(a){for(var c=this.cameras,p=a.x,v=a.y,m=[],y=0;y<c.length;y++){var P=c[y];P.visible&&P.inputEnabled&&o(P,p,v)&&m.unshift(P)}return m},remove:function(a,c){c===void 0&&(c=!0),Array.isArray(a)||(a=[a]);for(var p=0,v=this.cameras,m=0;m<a.length;m++){var y=v.indexOf(a[m]);y!==-1&&(c?v[y].destroy():v[y].renderList=[],v.splice(y,1),p++)}return!this.main&&v[0]&&(this.main=v[0]),p},render:function(a,c){for(var p=this.scene,v=this.cameras,m=0;m<v.length;m++){var y=v[m];if(y.visible&&y.alpha>0){y.preRender();var P=this.getVisibleChildren(c.getChildren(),y);a.render(p,P,y)}}},getVisibleChildren:function(a,c){return a.filter(function(p){return p.willRender(c)})},resetAll:function(){for(var a=0;a<this.cameras.length;a++)this.cameras[a].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(a,c){for(var p=0;p<this.cameras.length;p++)this.cameras[p].update(a,c)},onResize:function(a,c,p,v,m){for(var y=0;y<this.cameras.length;y++){var P=this.cameras[y];P._x===0&&P._y===0&&P._width===v&&P._height===m&&P.setSize(c.width,c.height)}},resize:function(a,c){for(var p=0;p<this.cameras.length;p++)this.cameras[p].setSize(a,c)},shutdown:function(){this.main=void 0;for(var a=0;a<this.cameras.length;a++)this.cameras[a].destroy();this.cameras=[];var c=this.systems.events;c.off(r.UPDATE,this.update,this),c.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(r.START,this.start,this),this.systems.events.off(r.DESTROY,this.destroy,this),this.systems.game.scale.off(n.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});h.register("CameraManager",f,"cameras"),l.exports=f},92522:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),x=e(56694),u=e(89787),h=new x({initialize:function(n){this.camera=n,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(o,n,r,f,a,c,p,v){if(o===void 0&&(o=!0),n===void 0&&(n=1e3),r===void 0&&(r=0),f===void 0&&(f=0),a===void 0&&(a=0),c===void 0&&(c=!1),p===void 0&&(p=null),v===void 0&&(v=this.camera.scene),!c&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=n,this.direction=o,this.progress=0,this.red=r,this.green=f,this.blue=a,this.alpha=o?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=p,this._onUpdateScope=v;var m=o?u.FADE_OUT_START:u.FADE_IN_START;return this.camera.emit(m,this.camera,this,n,r,f,a),this.camera},update:function(o,n){this.isRunning&&(this._elapsed+=n,this.progress=d(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(o){if(!this.isRunning&&!this.isComplete)return!1;var n=this.camera;return o.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",o.fillRect(n.x,n.y,n.width,n.height),!0},postRenderWebGL:function(o,n){if(!this.isRunning&&!this.isComplete)return!1;var r=this.camera,f=this.red/255,a=this.green/255,c=this.blue/255;return o.drawFillRect(r.x,r.y,r.width,r.height,n(c,a,f,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var o=this.direction?u.FADE_OUT_COMPLETE:u.FADE_IN_COMPLETE;this.camera.emit(o,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});l.exports=h},22151:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),x=e(56694),u=e(89787),h=new x({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(o,n,r,f,a,c,p){return o===void 0&&(o=250),n===void 0&&(n=255),r===void 0&&(r=255),f===void 0&&(f=255),a===void 0&&(a=!1),c===void 0&&(c=null),p===void 0&&(p=this.camera.scene),!a&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=o,this.progress=0,this.red=n,this.green=r,this.blue=f,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=c,this._onUpdateScope=p,this.camera.emit(u.FLASH_START,this.camera,this,o,n,r,f),this.camera)},update:function(o,n){this.isRunning&&(this._elapsed+=n,this.progress=d(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(o){if(!this.isRunning)return!1;var n=this.camera;return o.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",o.fillRect(n.x,n.y,n.width,n.height),!0},postRenderWebGL:function(o,n){if(!this.isRunning)return!1;var r=this.camera,f=this.red/255,a=this.green/255,c=this.blue/255;return o.drawFillRect(r.x,r.y,r.width,r.height,n(c,a,f,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});l.exports=h},37551:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),x=e(56694),u=e(35060),h=e(89787),o=e(93736),n=new x({initialize:function(f){this.camera=f,this.isRunning=!1,this.duration=0,this.source=new o,this.current=new o,this.destination=new o,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(r,f,a,c,p,v,m){a===void 0&&(a=1e3),c===void 0&&(c=u.Linear),p===void 0&&(p=!1),v===void 0&&(v=null),m===void 0&&(m=this.camera.scene);var y=this.camera;return!p&&this.isRunning||(this.isRunning=!0,this.duration=a,this.progress=0,this.source.set(y.scrollX,y.scrollY),this.destination.set(r,f),y.getScroll(r,f,this.current),typeof c=="string"&&u.hasOwnProperty(c)?this.ease=u[c]:typeof c=="function"&&(this.ease=c),this._elapsed=0,this._onUpdate=v,this._onUpdateScope=m,this.camera.emit(h.PAN_START,this.camera,this,a,r,f)),y},update:function(r,f){if(this.isRunning){this._elapsed+=f;var a=d(this._elapsed/this.duration,0,1);this.progress=a;var c=this.camera;if(this._elapsed<this.duration){var p=this.ease(a);c.getScroll(this.destination.x,this.destination.y,this.current);var v=this.source.x+(this.current.x-this.source.x)*p,m=this.source.y+(this.current.y-this.source.y)*p;c.setScroll(v,m),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,c,a,v,m)}else c.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,c,a,c.scrollX,c.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(h.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});l.exports=n},1771:(l,T,e)=>{/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var d=e(82897),x=e(56694),u=e(89787),h=e(35060),o=new x({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(n,r,f,a,c,p,v){f===void 0&&(f=1e3),a===void 0&&(a=h.Linear),c===void 0&&(c=!1),p===void 0&&(p=null),v===void 0&&(v=this.camera.scene),r===void 0&&(r=!1),this.shortestPath=r;var m=n;n<0?(m=-1*n,this.clockwise=!1):this.clockwise=!0;var y=360*Math.PI/180;m=m-Math.floor(m/y)*y;var P=this.camera;if(!c&&this.isRunning)return P;if(this.isRunning=!0,this.duration=f,this.progress=0,this.source=P.rotation,this.destination=m,typeof a=="string"&&h.hasOwnProperty(a)?this.ease=h[a]:typeof a=="function"&&(this.ease=a),this._elapsed=0,this._onUpdate=p,this._onUpdateScope=v,this.shortestPath){var E=0,S=0;this.destination>this.source?E=Math.abs(this.destination-this.source):E=Math.abs(this.destination+y)-this.source,this.source>this.destination?S=Math.abs(this.source-this.destination):S=Math.abs(this.source+y)-this.destination,E<S?this.clockwise=!0:E>S&&(this.clockwise=!1)}return this.camera.emit(u.ROTATE_START,this.camera,this,f,m),P},update:function(n,r){if(this.isRunning){this._elapsed+=r;var f=d(this._elapsed/this.duration,0,1);this.progress=f;var a=this.camera;if(this._elapsed<this.duration){var c=this.ease(f);this.current=a.rotation;var p=0,v=360*Math.PI/180,m=this.destination,y=this.current;this.clockwise===!1&&(m=this.current,y=this.destination),m>=y?p=Math.abs(m-y):p=Math.abs(m+v)-y;var P=0;this.clockwise?P=a.rotation+p*c:P=a.rotation-p*c,a.rotation=P,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,a,f,P)}else a.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,a,f,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});l.exports=o},3241:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),x=e(56694),u=e(89787),h=e(93736),o=new x({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.intensity=new h,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(n,r,f,a,c){return n===void 0&&(n=100),r===void 0&&(r=.05),f===void 0&&(f=!1),a===void 0&&(a=null),c===void 0&&(c=this.camera.scene),!f&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=n,this.progress=0,typeof r=="number"?this.intensity.set(r):this.intensity.set(r.x,r.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=a,this._onUpdateScope=c,this.camera.emit(u.SHAKE_START,this.camera,this,n,r),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(n,r){if(this.isRunning)if(this._elapsed+=r,this.progress=d(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var f=this.intensity,a=this.camera.width,c=this.camera.height,p=this.camera.zoom;this._offsetX=(Math.random()*f.x*a*2-f.x*a)*p,this._offsetY=(Math.random()*f.y*c*2-f.y*c)*p,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});l.exports=o},13383:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),x=e(56694),u=e(35060),h=e(89787),o=new x({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(n,r,f,a,c,p){r===void 0&&(r=1e3),f===void 0&&(f=u.Linear),a===void 0&&(a=!1),c===void 0&&(c=null),p===void 0&&(p=this.camera.scene);var v=this.camera;return!a&&this.isRunning||(this.isRunning=!0,this.duration=r,this.progress=0,this.source=v.zoom,this.destination=n,typeof f=="string"&&u.hasOwnProperty(f)?this.ease=u[f]:typeof f=="function"&&(this.ease=f),this._elapsed=0,this._onUpdate=c,this._onUpdateScope=p,this.camera.emit(h.ZOOM_START,this.camera,this,r,n)),v},update:function(n,r){this.isRunning&&(this._elapsed+=r,this.progress=d(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(h.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});l.exports=o},53030:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={Fade:e(92522),Flash:e(22151),Pan:e(37551),Shake:e(3241),RotateTo:e(1771),Zoom:e(13383)}},39577:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="cameradestroy"},85373:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="camerafadeincomplete"},92057:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="camerafadeinstart"},1903:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="camerafadeoutcomplete"},96131:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="camerafadeoutstart"},85409:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="cameraflashcomplete"},25500:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="cameraflashstart"},44071:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="followupdate"},19818:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="camerapancomplete"},80002:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="camerapanstart"},87966:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="postrender"},74217:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="prerender"},34805:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="camerarotatecomplete"},30408:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="camerarotatestart"},49856:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="camerashakecomplete"},69189:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="camerashakestart"},67657:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="camerazoomcomplete"},14229:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="camerazoomstart"},89787:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={DESTROY:e(39577),FADE_IN_COMPLETE:e(85373),FADE_IN_START:e(92057),FADE_OUT_COMPLETE:e(1903),FADE_OUT_START:e(96131),FLASH_COMPLETE:e(85409),FLASH_START:e(25500),FOLLOW_UPDATE:e(44071),PAN_COMPLETE:e(19818),PAN_START:e(80002),POST_RENDER:e(87966),PRE_RENDER:e(74217),ROTATE_COMPLETE:e(34805),ROTATE_START:e(30408),SHAKE_COMPLETE:e(49856),SHAKE_START:e(69189),ZOOM_COMPLETE:e(67657),ZOOM_START:e(14229)}},32356:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={Camera:e(47751),BaseCamera:e(51052),CameraManager:e(62382),Effects:e(53030),Events:e(89787)}},84219:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(10850),u=new d({initialize:function(o){this.camera=x(o,"camera",null),this.left=x(o,"left",null),this.right=x(o,"right",null),this.up=x(o,"up",null),this.down=x(o,"down",null),this.zoomIn=x(o,"zoomIn",null),this.zoomOut=x(o,"zoomOut",null),this.zoomSpeed=x(o,"zoomSpeed",.01),this.minZoom=x(o,"minZoom",.001),this.maxZoom=x(o,"maxZoom",1e3),this.speedX=0,this.speedY=0;var n=x(o,"speed",null);typeof n=="number"?(this.speedX=n,this.speedY=n):(this.speedX=x(o,"speed.x",0),this.speedY=x(o,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(h){return this.camera=h,this},update:function(h){if(this.active){h===void 0&&(h=1);var o=this.camera;this.up&&this.up.isDown?o.scrollY-=this.speedY*h|0:this.down&&this.down.isDown&&(o.scrollY+=this.speedY*h|0),this.left&&this.left.isDown?o.scrollX-=this.speedX*h|0:this.right&&this.right.isDown&&(o.scrollX+=this.speedX*h|0),this.zoomIn&&this.zoomIn.isDown?(o.zoom-=this.zoomSpeed,o.zoom<this.minZoom&&(o.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(o.zoom+=this.zoomSpeed,o.zoom>this.maxZoom&&(o.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});l.exports=u},69370:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(10850),u=new d({initialize:function(o){this.camera=x(o,"camera",null),this.left=x(o,"left",null),this.right=x(o,"right",null),this.up=x(o,"up",null),this.down=x(o,"down",null),this.zoomIn=x(o,"zoomIn",null),this.zoomOut=x(o,"zoomOut",null),this.zoomSpeed=x(o,"zoomSpeed",.01),this.minZoom=x(o,"minZoom",.001),this.maxZoom=x(o,"maxZoom",1e3),this.accelX=0,this.accelY=0;var n=x(o,"acceleration",null);typeof n=="number"?(this.accelX=n,this.accelY=n):(this.accelX=x(o,"acceleration.x",0),this.accelY=x(o,"acceleration.y",0)),this.dragX=0,this.dragY=0;var r=x(o,"drag",null);typeof r=="number"?(this.dragX=r,this.dragY=r):(this.dragX=x(o,"drag.x",0),this.dragY=x(o,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var f=x(o,"maxSpeed",null);typeof f=="number"?(this.maxSpeedX=f,this.maxSpeedY=f):(this.maxSpeedX=x(o,"maxSpeed.x",0),this.maxSpeedY=x(o,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(h){return this.camera=h,this},update:function(h){if(this.active){h===void 0&&(h=1);var o=this.camera;this._speedX>0?(this._speedX-=this.dragX*h,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*h,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*h,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*h,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(o.scrollX-=this._speedX*h|0),this._speedY!==0&&(o.scrollY-=this._speedY*h|0),this._zoom!==0&&(o.zoom+=this._zoom,o.zoom<this.minZoom?o.zoom=this.minZoom:o.zoom>this.maxZoom&&(o.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});l.exports=u},6524:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={FixedKeyControl:e(84219),SmoothedKeyControl:e(69370)}},44143:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={Controls:e(6524),Scene2D:e(32356)}},86459:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={VERSION:"3.60.0",BlendModes:e(95723),ScaleModes:e(27394),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};l.exports=d},14033:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(86459),u=e(18360),h=e(77290),o=e(72632),n=e(10850),r=e(42911),f=e(72283),a=e(5923),c=e(65641),p=e(93222),v=new d({initialize:function(y){y===void 0&&(y={});var P=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],E="#ffffff",S=n(y,"scale",null);this.width=n(S,"width",1024,y),this.height=n(S,"height",768,y),this.zoom=n(S,"zoom",1,y),this.parent=n(S,"parent",void 0,y),this.scaleMode=n(S,S?"mode":"scaleMode",0,y),this.expandParent=n(S,"expandParent",!0,y),this.autoRound=n(S,"autoRound",!1,y),this.autoCenter=n(S,"autoCenter",0,y),this.resizeInterval=n(S,"resizeInterval",500,y),this.fullscreenTarget=n(S,"fullscreenTarget",null,y),this.minWidth=n(S,"minWidth",0,y),this.maxWidth=n(S,"maxWidth",0,y),this.minHeight=n(S,"minHeight",0,y),this.maxHeight=n(S,"maxHeight",0,y),this.renderType=n(y,"type",x.AUTO),this.canvas=n(y,"canvas",null),this.context=n(y,"context",null),this.canvasStyle=n(y,"canvasStyle",null),this.customEnvironment=n(y,"customEnvironment",!1),this.sceneConfig=n(y,"scene",null),this.seed=n(y,"seed",[(Date.now()*Math.random()).toString()]),a.RND=new a.RandomDataGenerator(this.seed),this.gameTitle=n(y,"title",""),this.gameURL=n(y,"url","https://phaser.io"),this.gameVersion=n(y,"version",""),this.autoFocus=n(y,"autoFocus",!0),this.stableSort=n(y,"stableSort",-1),this.stableSort===-1&&(this.stableSort=h.browser.es2019?1:0),h.features.stableSort=this.stableSort,this.domCreateContainer=n(y,"dom.createContainer",!1),this.domPointerEvents=n(y,"dom.pointerEvents","none"),this.inputKeyboard=n(y,"input.keyboard",!0),this.inputKeyboardEventTarget=n(y,"input.keyboard.target",window),this.inputKeyboardCapture=n(y,"input.keyboard.capture",[]),this.inputMouse=n(y,"input.mouse",!0),this.inputMouseEventTarget=n(y,"input.mouse.target",null),this.inputMousePreventDefaultDown=n(y,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=n(y,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=n(y,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=n(y,"input.mouse.preventDefaultWheel",!0),this.inputTouch=n(y,"input.touch",h.input.touch),this.inputTouchEventTarget=n(y,"input.touch.target",null),this.inputTouchCapture=n(y,"input.touch.capture",!0),this.inputActivePointers=n(y,"input.activePointers",1),this.inputSmoothFactor=n(y,"input.smoothFactor",0),this.inputWindowEvents=n(y,"input.windowEvents",!0),this.inputGamepad=n(y,"input.gamepad",!1),this.inputGamepadEventTarget=n(y,"input.gamepad.target",window),this.disableContextMenu=n(y,"disableContextMenu",!1),this.audio=n(y,"audio",{}),this.hideBanner=n(y,"banner",null)===!1,this.hidePhaser=n(y,"banner.hidePhaser",!1),this.bannerTextColor=n(y,"banner.text",E),this.bannerBackgroundColor=n(y,"banner.background",P),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=n(y,"fps",null);var w=n(y,"render",null);this.pipeline=n(w,"pipeline",null,y),this.autoMobilePipeline=n(w,"autoMobilePipeline",!0,y),this.defaultPipeline=n(w,"defaultPipeline",c.MULTI_PIPELINE,y),this.antialias=n(w,"antialias",!0,y),this.antialiasGL=n(w,"antialiasGL",!0,y),this.mipmapFilter=n(w,"mipmapFilter","",y),this.desynchronized=n(w,"desynchronized",!1,y),this.roundPixels=n(w,"roundPixels",!1,y),this.pixelArt=n(w,"pixelArt",this.zoom!==1,y),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=n(w,"transparent",!1,y),this.clearBeforeRender=n(w,"clearBeforeRender",!0,y),this.preserveDrawingBuffer=n(w,"preserveDrawingBuffer",!1,y),this.premultipliedAlpha=n(w,"premultipliedAlpha",!0,y),this.failIfMajorPerformanceCaveat=n(w,"failIfMajorPerformanceCaveat",!1,y),this.powerPreference=n(w,"powerPreference","default",y),this.batchSize=n(w,"batchSize",4096,y),this.maxTextures=n(w,"maxTextures",-1,y),this.maxLights=n(w,"maxLights",10,y);var R=n(y,"backgroundColor",0);this.backgroundColor=p(R),this.transparent&&(this.backgroundColor=p(0),this.backgroundColor.alpha=0),this.preBoot=n(y,"callbacks.preBoot",f),this.postBoot=n(y,"callbacks.postBoot",f),this.physics=n(y,"physics",{}),this.defaultPhysicsSystem=n(this.physics,"default",!1),this.loaderBaseURL=n(y,"loader.baseURL",""),this.loaderPath=n(y,"loader.path",""),this.loaderMaxParallelDownloads=n(y,"loader.maxParallelDownloads",h.os.android?6:32),this.loaderCrossOrigin=n(y,"loader.crossOrigin",void 0),this.loaderResponseType=n(y,"loader.responseType",""),this.loaderAsync=n(y,"loader.async",!0),this.loaderUser=n(y,"loader.user",""),this.loaderPassword=n(y,"loader.password",""),this.loaderTimeout=n(y,"loader.timeout",0),this.loaderWithCredentials=n(y,"loader.withCredentials",!1),this.loaderImageLoadType=n(y,"loader.imageLoadType","XHR"),this.loaderLocalScheme=n(y,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=n(y,"fx.glow.quality",.1),this.glowFXDistance=n(y,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var A=n(y,"plugins",null),O=u.DefaultScene;A&&(Array.isArray(A)?this.defaultPlugins=A:r(A)&&(this.installGlobalPlugins=o(A,"global",[]),this.installScenePlugins=o(A,"scene",[]),Array.isArray(A.default)?O=A.default:Array.isArray(A.defaultMerge)&&(O=O.concat(A.defaultMerge)))),this.defaultPlugins=O;var F="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=n(y,"images.default",F+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=n(y,"images.missing",F+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=n(y,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=x.WEBGL:window.FORCE_CANVAS&&(this.renderType=x.CANVAS))}});l.exports=v},50150:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70616),x=e(61068),u=e(86459),h=e(90185),o=function(n){var r=n.config;if((r.customEnvironment||r.canvas)&&r.renderType===u.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!r.customEnvironment&&!r.canvas&&r.renderType!==u.HEADLESS)if(r.renderType===u.AUTO&&(r.renderType=h.webGL?u.WEBGL:u.CANVAS),r.renderType===u.WEBGL){if(!h.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(r.renderType===u.CANVAS){if(!h.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+r.renderType);r.antialias||x.disableSmoothing();var f=n.scale.baseSize,a=f.width,c=f.height;if(r.canvas?(n.canvas=r.canvas,n.canvas.width=a,n.canvas.height=c):n.canvas=x.create(n,a,c,r.renderType),r.canvasStyle&&(n.canvas.style=r.canvasStyle),r.antialias||d.setCrisp(n.canvas),r.renderType!==u.HEADLESS){var p,v;p=e(91135),v=e(11857),r.renderType===u.WEBGL?n.renderer=new v(n):(n.renderer=new p(n),n.context=n.renderer.gameContext)}};l.exports=o},77291:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(86459),x=function(u){var h=u.config;if(!h.hideBanner){var o="WebGL";h.renderType===d.CANVAS?o="Canvas":h.renderType===d.HEADLESS&&(o="Headless");var n=h.audio,r=u.device.audio,f;if(r.webAudio&&!n.disableWebAudio?f="Web Audio":n.noAudio||!r.webAudio&&!r.audioData?f="No Audio":f="HTML5 Audio",u.device.browser.ie)window.console&&console.log("Phaser v"+d.VERSION+" / https://phaser.io");else{var a="",c=[a];if(Array.isArray(h.bannerBackgroundColor)){var p;h.bannerBackgroundColor.forEach(function(m){a=a.concat("%c "),c.push("background: "+m),p=m}),c[c.length-1]="color: "+h.bannerTextColor+"; background: "+p}else a=a.concat("%c "),c.push("color: "+h.bannerTextColor+"; background: "+h.bannerBackgroundColor);c.push("background: transparent"),h.gameTitle&&(a=a.concat(h.gameTitle),h.gameVersion&&(a=a.concat(" v"+h.gameVersion)),h.hidePhaser||(a=a.concat(" / ")));var v="";h.hidePhaser||(a=a.concat("Phaser v"+d.VERSION+v+" ("+o+" | "+f+")")),a=a.concat(" %c "+h.gameURL),c[0]=a,console.log.apply(console,c)}}};l.exports=x},15213:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(99584),x=e(90249),u=e(43474),h=e(61068),o=e(56694),n=e(14033),r=e(85178),f=e(50150),a=e(81078),c=e(77291),p=e(77290),v=e(21546),m=e(6659),y=e(97081),P=e(69898),E=e(91963),S=e(49274),w=e(756),R=e(13553),A=e(38203),O=e(6237),F=e(26617),b=e(26493),D=e(84191),I=new o({initialize:function(k){this.config=new n(k),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new m,this.anims=new x(this),this.textures=new O(this),this.cache=new u(this),this.registry=new a(this,new m),this.input=new P(this,this.config),this.scene=new R(this,this.config.sceneConfig),this.device=p,this.scale=new w(this,this.config),this.sound=null,this.sound=D.create(this),this.loop=new F(this,this.config.fps),this.plugins=new S(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,v(this.boot.bind(this))},boot:function(){if(!E.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),f(this),r(this),c(this),d(this.canvas,this.config.parent),this.textures.once(A.READY,this.texturesReady,this),this.events.emit(y.BOOT)},texturesReady:function(){this.events.emit(y.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),b(this);var B=this.events;B.on(y.HIDDEN,this.onHidden,this),B.on(y.VISIBLE,this.onVisible,this),B.on(y.BLUR,this.onBlur,this),B.on(y.FOCUS,this.onFocus,this)},step:function(B,k){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var U=this.events;U.emit(y.PRE_STEP,B,k),U.emit(y.STEP,B,k),this.scene.update(B,k),U.emit(y.POST_STEP,B,k);var X=this.renderer;X.preRender(),U.emit(y.PRE_RENDER,X,B,k),this.scene.render(X),X.postRender(),U.emit(y.POST_RENDER,X,B,k)}},headlessStep:function(B,k){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var U=this.events;U.emit(y.PRE_STEP,B,k),U.emit(y.STEP,B,k),this.scene.update(B,k),U.emit(y.POST_STEP,B,k),this.scene.isProcessing=!1,U.emit(y.PRE_RENDER,null,B,k),U.emit(y.POST_RENDER,null,B,k)}},onHidden:function(){this.loop.pause(),this.events.emit(y.PAUSE)},pause:function(){var B=this.isPaused;this.isPaused=!0,B||this.events.emit(y.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(y.RESUME)},resume:function(){var B=this.isPaused;this.isPaused=!1,B&&this.events.emit(y.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(B,k){k===void 0&&(k=!1),this.pendingDestroy=!0,this.removeCanvas=B,this.noReturn=k},runDestroy:function(){this.scene.destroy(),this.events.emit(y.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(h.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});l.exports=I},26617:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(10850),u=e(72283),h=e(27385),o=new d({initialize:function(r,f){this.game=r,this.raf=new h,this.started=!1,this.running=!1,this.minFps=x(f,"min",5),this.targetFps=x(f,"target",60),this.fpsLimit=x(f,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=u,this.forceSetTimeOut=x(f,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=x(f,"deltaHistory",10),this.panicMax=x(f,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=x(f,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var n=window.performance.now();this.time=n,this.lastTime=n,this.nextFpsUpdate=n+1e3,this.framesThisSecond=0;for(var r=0;r<this.deltaSmoothingMax;r++)this.deltaHistory[r]=Math.min(this._target,this.deltaHistory[r]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(n){if(this.started)return this;this.started=!0,this.running=!0;for(var r=0;r<this.deltaSmoothingMax;r++)this.deltaHistory[r]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=n;var f=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(f,this.forceSetTimeOut,this._target)},smoothDelta:function(n){var r=this.deltaIndex,f=this.deltaHistory,a=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,n=Math.min(n,this._target)),n>this._min&&(n=f[r],n=Math.min(n,this._min)),f[r]=n,this.deltaIndex++,this.deltaIndex>=a&&(this.deltaIndex=0);for(var c=0,p=0;p<a;p++)c+=f[p];return c/=a,c},updateFPS:function(n){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=n+1e3,this.framesThisSecond=0},stepLimitFPS:function(n){this.now=n;var r=Math.max(0,n-this.lastTime);this.rawDelta=r,this.time+=this.rawDelta,this.smoothStep&&(r=this.smoothDelta(r)),this.delta+=r,n>=this.nextFpsUpdate&&this.updateFPS(n),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(n,this.delta),this.delta=0),this.lastTime=n,this.frame++},step:function(n){this.now=n;var r=Math.max(0,n-this.lastTime);this.rawDelta=r,this.time+=this.rawDelta,this.smoothStep&&(r=this.smoothDelta(r)),this.delta=r,n>=this.nextFpsUpdate&&this.updateFPS(n),this.framesThisSecond++,this.callback(n,r),this.lastTime=n,this.frame++},tick:function(){var n=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(n):this.step(n)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(n){n===void 0&&(n=!1);var r=window.performance.now();if(!this.running){n&&(this.startTime+=-this.lastTime+(this.lastTime+r));var f=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(f,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=r+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});l.exports=o},26493:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97081),x=function(u){var h,o=u.events;if(document.hidden!==void 0)h="visibilitychange";else{var n=["webkit","moz","ms"];n.forEach(function(f){document[f+"Hidden"]!==void 0&&(document.hidden=function(){return document[f+"Hidden"]},h=f+"visibilitychange")})}var r=function(f){document.hidden||f.type==="pause"?o.emit(d.HIDDEN):o.emit(d.VISIBLE)};h&&document.addEventListener(h,r,!1),window.onblur=function(){o.emit(d.BLUR)},window.onfocus=function(){o.emit(d.FOCUS)},window.focus&&u.config.autoFocus&&window.focus()};l.exports=x},41651:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="blur"},5520:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="boot"},51673:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="contextlost"},25055:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="destroy"},23767:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="focus"},57564:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="hidden"},38327:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pause"},43807:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="postrender"},73652:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="poststep"},780:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="prerender"},13781:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="prestep"},38247:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="ready"},29129:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="resume"},34994:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="step"},98704:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="visible"},97081:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={BLUR:e(41651),BOOT:e(5520),CONTEXT_LOST:e(51673),DESTROY:e(25055),FOCUS:e(23767),HIDDEN:e(57564),PAUSE:e(38327),POST_RENDER:e(43807),POST_STEP:e(73652),PRE_RENDER:e(780),PRE_STEP:e(13781),READY:e(38247),RESUME:e(29129),STEP:e(34994),VISIBLE:e(98704)}},80293:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={Config:e(14033),CreateRenderer:e(50150),DebugHeader:e(77291),Events:e(97081),TimeStep:e(26617),VisibilityHandler:e(26493)}},52780:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(81543),x=e(61068),u=e(10850),h=function(o){var n=u(o,"data",[]),r=u(o,"canvas",null),f=u(o,"palette",d),a=u(o,"pixelWidth",1),c=u(o,"pixelHeight",a),p=u(o,"resizeCanvas",!0),v=u(o,"clearCanvas",!0),m=u(o,"preRender",null),y=u(o,"postRender",null),P=Math.floor(Math.abs(n[0].length*a)),E=Math.floor(Math.abs(n.length*c));r||(r=x.create2D(this,P,E),p=!1,v=!1),p&&(r.width=P,r.height=E);var S=r.getContext("2d",{willReadFrequently:!0});v&&S.clearRect(0,0,P,E),m&&m(r,S);for(var w=0;w<n.length;w++)for(var R=n[w],A=0;A<R.length;A++){var O=R[A];O!=="."&&O!==" "&&(S.fillStyle=f[O],S.fillRect(A*a,w*c,a,c))}return y&&y(r,S),r};l.exports=h},84106:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={GenerateTexture:e(52780),Palettes:e(25235)}},81543:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},75846:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},83206:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},13194:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},50686:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},25235:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={ARNE16:e(81543),C64:e(75846),CGA:e(83206),JMP:e(13194),MSX:e(50686)}},63120:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(34631),u=e(38517),h=e(93736),o=new d({Extends:u,initialize:function(r,f,a,c){u.call(this,"CubicBezierCurve"),Array.isArray(r)&&(c=new h(r[6],r[7]),a=new h(r[4],r[5]),f=new h(r[2],r[3]),r=new h(r[0],r[1])),this.p0=r,this.p1=f,this.p2=a,this.p3=c},getStartPoint:function(n){return n===void 0&&(n=new h),n.copy(this.p0)},getResolution:function(n){return n},getPoint:function(n,r){r===void 0&&(r=new h);var f=this.p0,a=this.p1,c=this.p2,p=this.p3;return r.set(x(n,f.x,a.x,c.x,p.x),x(n,f.y,a.y,c.y,p.y))},draw:function(n,r){r===void 0&&(r=32);var f=this.getPoints(r);n.beginPath(),n.moveTo(this.p0.x,this.p0.y);for(var a=1;a<f.length;a++)n.lineTo(f[a].x,f[a].y);return n.strokePath(),n},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});o.fromJSON=function(n){var r=n.points,f=new h(r[0],r[1]),a=new h(r[2],r[3]),c=new h(r[4],r[5]),p=new h(r[6],r[7]);return new o(f,a,c,p)},l.exports=o},38517:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(80222),u=e(74118),h=e(93736),o=new d({initialize:function(r){this.type=r,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new h,this._tmpVec2B=new h},draw:function(n,r){return r===void 0&&(r=32),n.strokePoints(this.getPoints(r))},getBounds:function(n,r){n||(n=new u),r===void 0&&(r=16);var f=this.getLength();r>f&&(r=f/2);var a=Math.max(1,Math.round(f/r));return x(this.getSpacedPoints(a),n)},getDistancePoints:function(n){var r=this.getLength(),f=Math.max(1,r/n);return this.getSpacedPoints(f)},getEndPoint:function(n){return n===void 0&&(n=new h),this.getPointAt(1,n)},getLength:function(){var n=this.getLengths();return n[n.length-1]},getLengths:function(n){if(n===void 0&&(n=this.arcLengthDivisions),this.cacheArcLengths.length===n+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var r=[],f,a=this.getPoint(0,this._tmpVec2A),c=0;r.push(0);for(var p=1;p<=n;p++)f=this.getPoint(p/n,this._tmpVec2B),c+=f.distance(a),r.push(c),a.copy(f);return this.cacheArcLengths=r,r},getPointAt:function(n,r){var f=this.getUtoTmapping(n);return this.getPoint(f,r)},getPoints:function(n,r,f){f===void 0&&(f=[]),n||(r?n=this.getLength()/r:n=this.defaultDivisions);for(var a=0;a<=n;a++)f.push(this.getPoint(a/n));return f},getRandomPoint:function(n){return n===void 0&&(n=new h),this.getPoint(Math.random(),n)},getSpacedPoints:function(n,r,f){f===void 0&&(f=[]),n||(r?n=this.getLength()/r:n=this.defaultDivisions);for(var a=0;a<=n;a++){var c=this.getUtoTmapping(a/n,null,n);f.push(this.getPoint(c))}return f},getStartPoint:function(n){return n===void 0&&(n=new h),this.getPointAt(0,n)},getTangent:function(n,r){r===void 0&&(r=new h);var f=1e-4,a=n-f,c=n+f;return a<0&&(a=0),c>1&&(c=1),this.getPoint(a,this._tmpVec2A),this.getPoint(c,r),r.subtract(this._tmpVec2A).normalize()},getTangentAt:function(n,r){var f=this.getUtoTmapping(n);return this.getTangent(f,r)},getTFromDistance:function(n,r){return n<=0?0:this.getUtoTmapping(0,n,r)},getUtoTmapping:function(n,r,f){var a=this.getLengths(f),c=0,p=a.length,v;r?v=Math.min(r,a[p-1]):v=n*a[p-1];for(var m=0,y=p-1,P;m<=y;)if(c=Math.floor(m+(y-m)/2),P=a[c]-v,P<0)m=c+1;else if(P>0)y=c-1;else{y=c;break}if(c=y,a[c]===v)return c/(p-1);var E=a[c],S=a[c+1],w=S-E,R=(v-E)/w;return(c+R)/(p-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});l.exports=o},48835:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(38517),u=e(75606),h=e(10850),o=e(23701),n=e(93736),r=new d({Extends:x,initialize:function(a,c,p,v,m,y,P,E){if(typeof a=="object"){var S=a;a=h(S,"x",0),c=h(S,"y",0),p=h(S,"xRadius",0),v=h(S,"yRadius",p),m=h(S,"startAngle",0),y=h(S,"endAngle",360),P=h(S,"clockwise",!1),E=h(S,"rotation",0)}else v===void 0&&(v=p),m===void 0&&(m=0),y===void 0&&(y=360),P===void 0&&(P=!1),E===void 0&&(E=0);x.call(this,"EllipseCurve"),this.p0=new n(a,c),this._xRadius=p,this._yRadius=v,this._startAngle=u(m),this._endAngle=u(y),this._clockwise=P,this._rotation=u(E)},getStartPoint:function(f){return f===void 0&&(f=new n),this.getPoint(0,f)},getResolution:function(f){return f*2},getPoint:function(f,a){a===void 0&&(a=new n);for(var c=Math.PI*2,p=this._endAngle-this._startAngle,v=Math.abs(p)<Number.EPSILON;p<0;)p+=c;for(;p>c;)p-=c;p<Number.EPSILON&&(v?p=0:p=c),this._clockwise&&!v&&(p===c?p=-c:p=p-c);var m=this._startAngle+f*p,y=this.p0.x+this._xRadius*Math.cos(m),P=this.p0.y+this._yRadius*Math.sin(m);if(this._rotation!==0){var E=Math.cos(this._rotation),S=Math.sin(this._rotation),w=y-this.p0.x,R=P-this.p0.y;y=w*E-R*S+this.p0.x,P=w*S+R*E+this.p0.y}return a.set(y,P)},setXRadius:function(f){return this.xRadius=f,this},setYRadius:function(f){return this.yRadius=f,this},setWidth:function(f){return this.xRadius=f/2,this},setHeight:function(f){return this.yRadius=f/2,this},setStartAngle:function(f){return this.startAngle=f,this},setEndAngle:function(f){return this.endAngle=f,this},setClockwise:function(f){return this.clockwise=f,this},setRotation:function(f){return this.rotation=f,this},x:{get:function(){return this.p0.x},set:function(f){this.p0.x=f}},y:{get:function(){return this.p0.y},set:function(f){this.p0.y=f}},xRadius:{get:function(){return this._xRadius},set:function(f){this._xRadius=f}},yRadius:{get:function(){return this._yRadius},set:function(f){this._yRadius=f}},startAngle:{get:function(){return o(this._startAngle)},set:function(f){this._startAngle=u(f)}},endAngle:{get:function(){return o(this._endAngle)},set:function(f){this._endAngle=u(f)}},clockwise:{get:function(){return this._clockwise},set:function(f){this._clockwise=f}},angle:{get:function(){return o(this._rotation)},set:function(f){this._rotation=u(f)}},rotation:{get:function(){return this._rotation},set:function(f){this._rotation=f}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:o(this._startAngle),endAngle:o(this._endAngle),clockwise:this._clockwise,rotation:o(this._rotation)}}});r.fromJSON=function(f){return new r(f)},l.exports=r},58084:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(38517),u=e(80222),h=e(74118),o=e(93736),n=new d({Extends:x,initialize:function(f,a){x.call(this,"LineCurve"),Array.isArray(f)&&(a=new o(f[2],f[3]),f=new o(f[0],f[1])),this.p0=f,this.p1=a,this.arcLengthDivisions=1},getBounds:function(r){return r===void 0&&(r=new h),u([this.p0,this.p1],r)},getStartPoint:function(r){return r===void 0&&(r=new o),r.copy(this.p0)},getResolution:function(r){return r===void 0&&(r=1),r},getPoint:function(r,f){return f===void 0&&(f=new o),r===1?f.copy(this.p1):(f.copy(this.p1).subtract(this.p0).scale(r).add(this.p0),f)},getPointAt:function(r,f){return this.getPoint(r,f)},getTangent:function(r,f){return f===void 0&&(f=new o),f.copy(this.p1).subtract(this.p0).normalize(),f},getUtoTmapping:function(r,f,a){var c;if(f){var p=this.getLengths(a),v=p[p.length-1],m=Math.min(f,v);c=m/v}else c=r;return c},draw:function(r){return r.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});n.fromJSON=function(r){var f=r.points,a=new o(f[0],f[1]),c=new o(f[2],f[3]);return new n(a,c)},l.exports=n},64761:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(38517),u=e(16252),h=e(93736),o=new d({Extends:x,initialize:function(r,f,a){x.call(this,"QuadraticBezierCurve"),Array.isArray(r)&&(a=new h(r[4],r[5]),f=new h(r[2],r[3]),r=new h(r[0],r[1])),this.p0=r,this.p1=f,this.p2=a},getStartPoint:function(n){return n===void 0&&(n=new h),n.copy(this.p0)},getResolution:function(n){return n},getPoint:function(n,r){r===void 0&&(r=new h);var f=this.p0,a=this.p1,c=this.p2;return r.set(u(n,f.x,a.x,c.x),u(n,f.y,a.y,c.y))},draw:function(n,r){r===void 0&&(r=32);var f=this.getPoints(r);n.beginPath(),n.moveTo(this.p0.x,this.p0.y);for(var a=1;a<f.length;a++)n.lineTo(f[a].x,f[a].y);return n.strokePath(),n},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});o.fromJSON=function(n){var r=n.points,f=new h(r[0],r[1]),a=new h(r[2],r[3]),c=new h(r[4],r[5]);return new o(f,a,c)},l.exports=o},11956:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(14976),x=e(56694),u=e(38517),h=e(93736),o=new x({Extends:u,initialize:function(r){r===void 0&&(r=[]),u.call(this,"SplineCurve"),this.points=[],this.addPoints(r)},addPoints:function(n){for(var r=0;r<n.length;r++){var f=new h;typeof n[r]=="number"?(f.x=n[r],f.y=n[r+1],r++):Array.isArray(n[r])?(f.x=n[r][0],f.y=n[r][1]):(f.x=n[r].x,f.y=n[r].y),this.points.push(f)}return this},addPoint:function(n,r){var f=new h(n,r);return this.points.push(f),f},getStartPoint:function(n){return n===void 0&&(n=new h),n.copy(this.points[0])},getResolution:function(n){return n*this.points.length},getPoint:function(n,r){r===void 0&&(r=new h);var f=this.points,a=(f.length-1)*n,c=Math.floor(a),p=a-c,v=f[c===0?c:c-1],m=f[c],y=f[c>f.length-2?f.length-1:c+1],P=f[c>f.length-3?f.length-1:c+2];return r.set(d(p,v.x,m.x,y.x,P.x),d(p,v.y,m.y,y.y,P.y))},toJSON:function(){for(var n=[],r=0;r<this.points.length;r++)n.push(this.points[r].x),n.push(this.points[r].y);return{type:this.type,points:n}}});o.fromJSON=function(n){return new o(n.points)},l.exports=o},73962:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={Path:e(12822),MoveTo:e(53639),CubicBezier:e(63120),Curve:e(38517),Ellipse:e(48835),Line:e(58084),QuadraticBezier:e(64761),Spline:e(11956)}},53639:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(93736),u=new d({initialize:function(o,n){this.active=!1,this.p0=new x(o,n)},getPoint:function(h,o){return o===void 0&&(o=new x),o.copy(this.p0)},getPointAt:function(h,o){return this.getPoint(h,o)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});l.exports=u},12822:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(63120),u=e(48835),h=e(61286),o=e(58084),n=e(53639),r=e(64761),f=e(74118),a=e(11956),c=e(93736),p=e(83392),v=new d({initialize:function(y,P){y===void 0&&(y=0),P===void 0&&(P=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new c,this._tmpVec2A=new c,this._tmpVec2B=new c,typeof y=="object"?this.fromJSON(y):this.startPoint.set(y,P)},add:function(m){return this.curves.push(m),this},circleTo:function(m,y,P){return y===void 0&&(y=!1),this.ellipseTo(m,m,0,360,y,P)},closePath:function(){var m=this.curves[0].getPoint(0),y=this.curves[this.curves.length-1].getPoint(1);return m.equals(y)||this.curves.push(new o(y,m)),this},cubicBezierTo:function(m,y,P,E,S,w){var R=this.getEndPoint(),A,O,F;return m instanceof c?(A=m,O=y,F=P):(A=new c(P,E),O=new c(S,w),F=new c(m,y)),this.add(new x(R,A,O,F))},quadraticBezierTo:function(m,y,P,E){var S=this.getEndPoint(),w,R;return m instanceof c?(w=m,R=y):(w=new c(P,E),R=new c(m,y)),this.add(new r(S,w,R))},draw:function(m,y){for(var P=0;P<this.curves.length;P++){var E=this.curves[P];E.active&&E.draw(m,y)}return m},ellipseTo:function(m,y,P,E,S,w){var R=new u(0,0,m,y,P,E,S,w),A=this.getEndPoint(this._tmpVec2A),O=R.getStartPoint(this._tmpVec2B);return A.subtract(O),R.x=A.x,R.y=A.y,this.add(R)},fromJSON:function(m){this.curves=[],this.cacheLengths=[],this.startPoint.set(m.x,m.y),this.autoClose=m.autoClose;for(var y=0;y<m.curves.length;y++){var P=m.curves[y];switch(P.type){case"LineCurve":this.add(o.fromJSON(P));break;case"EllipseCurve":this.add(u.fromJSON(P));break;case"SplineCurve":this.add(a.fromJSON(P));break;case"CubicBezierCurve":this.add(x.fromJSON(P));break;case"QuadraticBezierCurve":this.add(r.fromJSON(P));break}}return this},getBounds:function(m,y){m===void 0&&(m=new f),y===void 0&&(y=16),m.x=Number.MAX_VALUE,m.y=Number.MAX_VALUE;for(var P=new f,E=p.MIN_SAFE_INTEGER,S=p.MIN_SAFE_INTEGER,w=0;w<this.curves.length;w++){var R=this.curves[w];R.active&&(R.getBounds(P,y),m.x=Math.min(m.x,P.x),m.y=Math.min(m.y,P.y),E=Math.max(E,P.right),S=Math.max(S,P.bottom))}return m.right=E,m.bottom=S,m},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var m=[],y=0,P=0;P<this.curves.length;P++)y+=this.curves[P].getLength(),m.push(y);return this.cacheLengths=m,m},getCurveAt:function(m){for(var y=m*this.getLength(),P=this.getCurveLengths(),E=0;E<P.length;){if(P[E]>=y)return this.curves[E];E++}return null},getEndPoint:function(m){return m===void 0&&(m=new c),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,m):m.copy(this.startPoint),m},getLength:function(){var m=this.getCurveLengths();return m[m.length-1]},getPoint:function(m,y){y===void 0&&(y=new c);for(var P=m*this.getLength(),E=this.getCurveLengths(),S=0;S<E.length;){if(E[S]>=P){var w=E[S]-P,R=this.curves[S],A=R.getLength(),O=A===0?0:1-w/A;return R.getPointAt(O,y)}S++}return null},getPoints:function(m){m===void 0&&(m=12);for(var y=[],P,E=0;E<this.curves.length;E++){var S=this.curves[E];if(S.active)for(var w=S.getResolution(m),R=S.getPoints(w),A=0;A<R.length;A++){var O=R[A];P&&P.equals(O)||(y.push(O),P=O)}}return this.autoClose&&y.length>1&&!y[y.length-1].equals(y[0])&&y.push(y[0]),y},getRandomPoint:function(m){return m===void 0&&(m=new c),this.getPoint(Math.random(),m)},getSpacedPoints:function(m){m===void 0&&(m=40);for(var y=[],P=0;P<=m;P++)y.push(this.getPoint(P/m));return this.autoClose&&y.push(y[0]),y},getStartPoint:function(m){return m===void 0&&(m=new c),m.copy(this.startPoint)},getTangent:function(m,y){y===void 0&&(y=new c);for(var P=m*this.getLength(),E=this.getCurveLengths(),S=0;S<E.length;){if(E[S]>=P){var w=E[S]-P,R=this.curves[S],A=R.getLength(),O=A===0?0:1-w/A;return R.getTangentAt(O,y)}S++}return null},lineTo:function(m,y){m instanceof c?this._tmpVec2B.copy(m):this._tmpVec2B.set(m,y);var P=this.getEndPoint(this._tmpVec2A);return this.add(new o([P.x,P.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(m){return m.unshift(this.getEndPoint()),this.add(new a(m))},moveTo:function(m,y){return m instanceof c?this.add(new n(m.x,m.y)):this.add(new n(m,y))},toJSON:function(){for(var m=[],y=0;y<this.curves.length;y++)m.push(this.curves[y].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:m}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});h.register("path",function(m,y){return new v(m,y)}),l.exports=v},81078:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(35026),u=new d({initialize:function(o,n){this.parent=o,this.events=n,n||(this.events=o.events?o.events:o),this.list={},this.values={},this._frozen=!1,!o.hasOwnProperty("sys")&&this.events&&this.events.once(x.DESTROY,this.destroy,this)},get:function(h){var o=this.list;if(Array.isArray(h)){for(var n=[],r=0;r<h.length;r++)n.push(o[h[r]]);return n}else return o[h]},getAll:function(){var h={};for(var o in this.list)this.list.hasOwnProperty(o)&&(h[o]=this.list[o]);return h},query:function(h){var o={};for(var n in this.list)this.list.hasOwnProperty(n)&&n.match(h)&&(o[n]=this.list[n]);return o},set:function(h,o){if(this._frozen)return this;if(typeof h=="string")return this.setValue(h,o);for(var n in h)this.setValue(n,h[n]);return this},inc:function(h,o){if(this._frozen)return this;o===void 0&&(o=1);var n=this.get(h);return n===void 0&&(n=0),this.set(h,n+o),this},toggle:function(h){return this._frozen?this:(this.set(h,!this.get(h)),this)},setValue:function(h,o){if(this._frozen)return this;if(this.has(h))this.values[h]=o;else{var n=this,r=this.list,f=this.events,a=this.parent;Object.defineProperty(this.values,h,{enumerable:!0,configurable:!0,get:function(){return r[h]},set:function(c){if(!n._frozen){var p=r[h];r[h]=c,f.emit(x.CHANGE_DATA,a,h,c,p),f.emit(x.CHANGE_DATA_KEY+h,a,c,p)}}}),r[h]=o,f.emit(x.SET_DATA,a,h,o)}return this},each:function(h,o){for(var n=[this.parent,null,void 0],r=1;r<arguments.length;r++)n.push(arguments[r]);for(var f in this.list)n[1]=f,n[2]=this.list[f],h.apply(o,n);return this},merge:function(h,o){o===void 0&&(o=!0);for(var n in h)h.hasOwnProperty(n)&&(o||!o&&!this.has(n))&&this.setValue(n,h[n]);return this},remove:function(h){if(this._frozen)return this;if(Array.isArray(h))for(var o=0;o<h.length;o++)this.removeValue(h[o]);else return this.removeValue(h);return this},removeValue:function(h){if(this.has(h)){var o=this.list[h];delete this.list[h],delete this.values[h],this.events.emit(x.REMOVE_DATA,this.parent,h,o)}return this},pop:function(h){var o=void 0;return!this._frozen&&this.has(h)&&(o=this.list[h],delete this.list[h],delete this.values[h],this.events.emit(x.REMOVE_DATA,this.parent,h,o)),o},has:function(h){return this.list.hasOwnProperty(h)},setFreeze:function(h){return this._frozen=h,this},reset:function(){for(var h in this.list)delete this.list[h],delete this.values[h];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(x.CHANGE_DATA),this.events.off(x.SET_DATA),this.events.off(x.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(h){this._frozen=!!h}},count:{get:function(){var h=0;for(var o in this.list)this.list[o]!==void 0&&h++;return h}}});l.exports=u},76508:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(81078),u=e(91963),h=e(7599),o=new d({Extends:x,initialize:function(r){x.call(this,r,r.sys.events),this.scene=r,this.systems=r.sys,r.sys.events.once(h.BOOT,this.boot,this),r.sys.events.on(h.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(h.DESTROY,this.destroy,this)},start:function(){this.events.once(h.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){x.prototype.destroy.call(this),this.events.off(h.START,this.start,this),this.scene=null,this.systems=null}});u.register("DataManagerPlugin",o,"data"),l.exports=o},73569:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="changedata"},15590:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="changedata-"},37669:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="destroy"},87090:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="removedata"},90142:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="setdata"},35026:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={CHANGE_DATA:e(73569),CHANGE_DATA_KEY:e(15590),DESTROY:e(37669),REMOVE_DATA:e(87090),SET_DATA:e(90142)}},1999:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={DataManager:e(81078),DataManagerPlugin:e(76508),Events:e(35026)}},10720:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(1350),x={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function u(){if(typeof importScripts=="function")return x;x.audioData=!!window.Audio,x.webAudio=!!(window.AudioContext||window.webkitAudioContext);var h=document.createElement("audio"),o=!!h.canPlayType;try{if(o){var n=function(a,c){var p=h.canPlayType("audio/"+a).replace(/^no$/,"");return c?!!(p||h.canPlayType("audio/"+c).replace(/^no$/,"")):!!p};if(x.ogg=n('ogg; codecs="vorbis"'),x.opus=n('ogg; codecs="opus"',"opus"),x.mp3=n("mpeg"),x.wav=n("wav"),x.m4a=n("x-m4a"),x.aac=n("aac"),x.flac=n("flac","x-flac"),x.webm=n('webm; codecs="vorbis"'),h.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(d.edge)x.dolby=!0;else if(d.safari&&d.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var r=parseInt(RegExp.$1,10),f=parseInt(RegExp.$2,10);(r===10&&f>=11||r>10)&&(x.dolby=!0)}}}}catch{}return x}l.exports=u()},1350:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(36580),x={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function u(){var h=navigator.userAgent;return/Edg\/\d+/.test(h)?(x.edge=!0,x.es2019=!0):/OPR/.test(h)?(x.opera=!0,x.es2019=!0):/Chrome\/(\d+)/.test(h)&&!d.windowsPhone?(x.chrome=!0,x.chromeVersion=parseInt(RegExp.$1,10),x.es2019=x.chromeVersion>69):/Firefox\D+(\d+)/.test(h)?(x.firefox=!0,x.firefoxVersion=parseInt(RegExp.$1,10),x.es2019=x.firefoxVersion>10):/AppleWebKit/.test(h)&&d.iOS?x.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(h)?(x.ie=!0,x.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+) Safari/.test(h)&&!d.windowsPhone?(x.safari=!0,x.safariVersion=parseInt(RegExp.$1,10),x.es2019=x.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(h)&&(x.ie=!0,x.trident=!0,x.tridentVersion=parseInt(RegExp.$1,10),x.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(h)&&(x.silk=!0),x}l.exports=u()},98581:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61068),x={supportInverseAlpha:!1,supportNewBlendModes:!1};function u(){var n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",r="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",f=new Image;return f.onload=function(){var a=new Image;a.onload=function(){var c=d.create2D(a,6),p=c.getContext("2d",{willReadFrequently:!0});if(p.globalCompositeOperation="multiply",p.drawImage(f,0,0),p.drawImage(a,2,0),!p.getImageData(2,0,1,1))return!1;var v=p.getImageData(2,0,1,1).data;d.remove(a),x.supportNewBlendModes=v[0]===255&&v[1]===0&&v[2]===0},a.src=n+"/wCKxvRF"+r},f.src=n+"AP804Oa6"+r,!1}function h(){var n=d.create2D(this,2),r=n.getContext("2d",{willReadFrequently:!0});r.fillStyle="rgba(10, 20, 30, 0.5)",r.fillRect(0,0,1,1);var f=r.getImageData(0,0,1,1);if(f===null)return!1;r.putImageData(f,1,0);var a=r.getImageData(1,0,1,1),c=a.data[0]===f.data[0]&&a.data[1]===f.data[1]&&a.data[2]===f.data[2]&&a.data[3]===f.data[3];return d.remove(this),c}function o(){return typeof importScripts!="function"&&document!==void 0&&(x.supportNewBlendModes=u(),x.supportInverseAlpha=h()),x}l.exports=o()},90185:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(36580),x=e(1350),u=e(61068),h={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function o(){var r=new ArrayBuffer(4),f=new Uint8Array(r),a=new Uint32Array(r);return f[0]=161,f[1]=178,f[2]=195,f[3]=212,a[0]===3569595041?!0:a[0]===2712847316?!1:null}function n(){if(typeof importScripts=="function")return h;h.canvas=!!window.CanvasRenderingContext2D;try{h.localStorage=!!localStorage.getItem}catch{h.localStorage=!1}h.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,h.fileSystem=!!window.requestFileSystem;var r=!1,f=function(){if(window.WebGLRenderingContext)try{var a=u.createWebGL(this),c=a.getContext("webgl")||a.getContext("experimental-webgl"),p=u.create2D(this),v=p.getContext("2d",{willReadFrequently:!0}),m=v.createImageData(1,1);return r=m.data instanceof Uint8ClampedArray,u.remove(a),u.remove(p),!!c}catch{return!1}return!1};return h.webGL=f(),h.worker=!!window.Worker,h.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,h.getUserMedia=h.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,x.firefox&&x.firefoxVersion<21&&(h.getUserMedia=!1),!d.iOS&&(x.ie||x.firefox||x.chrome)&&(h.canvasBitBltShift=!0),(x.safari||x.mobileSafari)&&(h.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(h.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(h.littleEndian=o()),h.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&h.littleEndian!==null&&r,h}l.exports=n()},33553:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={available:!1,cancel:"",keyboard:!1,request:""};function e(){if(typeof importScripts=="function")return T;var d,x="Fullscreen",u="FullScreen",h=["request"+x,"request"+u,"webkitRequest"+x,"webkitRequest"+u,"msRequest"+x,"msRequest"+u,"mozRequest"+u,"mozRequest"+x];for(d=0;d<h.length;d++)if(document.documentElement[h[d]]){T.available=!0,T.request=h[d];break}var o=["cancel"+u,"exit"+x,"webkitCancel"+u,"webkitExit"+x,"msCancel"+u,"msExit"+x,"mozCancel"+u,"mozExit"+x];if(T.available){for(d=0;d<o.length;d++)if(document[o[d]]){T.cancel=o[d];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(T.keyboard=!0),Object.defineProperty(T,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),T}l.exports=e()},95872:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(1350),x={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function u(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(x.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(x.mspointer=!0),navigator.getGamepads&&(x.gamepads=!0),"onwheel"in window||d.ie&&"WheelEvent"in window?x.wheelEvent="wheel":"onmousewheel"in window?x.wheelEvent="mousewheel":d.firefox&&"MouseScrollEvent"in window&&(x.wheelEvent="DOMMouseScroll")),x}l.exports=u()},36580:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function e(){if(typeof importScripts=="function")return T;var d=navigator.userAgent;/Windows/.test(d)?T.windows=!0:/Mac OS/.test(d)&&!/like Mac OS/.test(d)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(T.iOS=!0,T.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),T.iOSVersion=parseInt(RegExp.$1,10)):T.macOS=!0:/Android/.test(d)?T.android=!0:/Linux/.test(d)?T.linux=!0:/iP[ao]d|iPhone/i.test(d)?(T.iOS=!0,navigator.appVersion.match(/OS (\d+)/),T.iOSVersion=parseInt(RegExp.$1,10),T.iPhone=d.toLowerCase().indexOf("iphone")!==-1,T.iPad=d.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(d)||/\bKF[A-Z][A-Z]+/.test(d)||/Silk.*Mobile Safari/.test(d)?T.kindle=!0:/CrOS/.test(d)&&(T.chromeOS=!0),(/Windows Phone/i.test(d)||/IEMobile/i.test(d))&&(T.android=!1,T.iOS=!1,T.macOS=!1,T.windows=!0,T.windowsPhone=!0);var x=/Silk/.test(d);return(T.windows||T.macOS||T.linux&&!x||T.chromeOS)&&(T.desktop=!0),(T.windowsPhone||/Windows NT/i.test(d)&&/Touch/i.test(d))&&(T.desktop=!1),navigator.standalone&&(T.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(T.cordova=!0),window.ejecta!==void 0&&(T.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(T.node=!0),T.node&&typeof process.versions=="object"&&(T.nodeWebkit=!!process.versions["node-webkit"],T.electron=!!process.versions.electron),/Crosswalk/.test(d)&&(T.crosswalk=!0),T.pixelRatio=window.devicePixelRatio||1,T}l.exports=e()},53861:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72632),x={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};function u(){if(typeof importScripts=="function")return x;var h=document.createElement("video"),o=!!h.canPlayType,n=/^no$/;try{o&&(h.canPlayType('video/ogg; codecs="theora"').replace(n,"")&&(x.ogg=!0),h.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(n,"")&&(x.h264=!0,x.mp4=!0),h.canPlayType("video/x-m4v").replace(n,"")&&(x.m4v=!0),h.canPlayType('video/webm; codecs="vp8, vorbis"').replace(n,"")&&(x.webm=!0),h.canPlayType('video/webm; codecs="vp9"').replace(n,"")&&(x.vp9=!0),h.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(n,"")&&(x.hls=!0))}catch{}return h.parentNode&&h.parentNode.removeChild(h),x.getVideoURL=function(r){Array.isArray(r)||(r=[r]);for(var f=0;f<r.length;f++){var a=d(r[f],"url",r[f]);if(a.indexOf("blob:")===0)return{url:a,type:""};var c;if(a.indexOf("data:")===0?c=a.split(",")[0].match(/\/(.*?);/):c=a.match(/\.([a-zA-Z0-9]+)($|\?)/),c=d(r[f],"type",c?c[1]:"").toLowerCase(),x[c])return{url:a,type:c}}return null},x}l.exports=u()},77290:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={os:e(36580),browser:e(1350),features:e(90185),input:e(95872),audio:e(10720),video:e(53861),fullscreen:e(33553),canvasFeatures:e(98581)}},65246:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new Float32Array(20),u=new d({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(h){return this._matrix.set(h),this._dirty=!0,this},reset:function(){var h=this._matrix;return h.fill(0),h[0]=1,h[6]=1,h[12]=1,h[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var h=this._data;return this._dirty&&(h.set(this._matrix),h[4]/=255,h[9]/=255,h[14]/=255,h[19]/=255,this._dirty=!1),h},brightness:function(h,o){h===void 0&&(h=0),o===void 0&&(o=!1);var n=h;return this.multiply([n,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0],o)},saturate:function(h,o){h===void 0&&(h=0),o===void 0&&(o=!1);var n=h*2/3+1,r=(n-1)*-.5;return this.multiply([n,r,r,0,0,r,n,r,0,0,r,r,n,0,0,0,0,0,1,0],o)},desaturate:function(h){return h===void 0&&(h=!1),this.saturate(-1,h)},hue:function(h,o){h===void 0&&(h=0),o===void 0&&(o=!1),h=h/180*Math.PI;var n=Math.cos(h),r=Math.sin(h),f=.213,a=.715,c=.072;return this.multiply([f+n*(1-f)+r*-f,a+n*-a+r*-a,c+n*-c+r*(1-c),0,0,f+n*-f+r*.143,a+n*(1-a)+r*.14,c+n*-c+r*-.283,0,0,f+n*-f+r*-(1-f),a+n*-a+r*a,c+n*(1-c)+r*c,0,0,0,0,0,1,0],o)},grayscale:function(h,o){return h===void 0&&(h=1),o===void 0&&(o=!1),this.saturate(-h,o)},blackWhite:function(h){return h===void 0&&(h=!1),this.multiply(u.BLACK_WHITE,h)},contrast:function(h,o){h===void 0&&(h=0),o===void 0&&(o=!1);var n=h+1,r=-.5*(n-1);return this.multiply([n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0],o)},negative:function(h){return h===void 0&&(h=!1),this.multiply(u.NEGATIVE,h)},desaturateLuminance:function(h){return h===void 0&&(h=!1),this.multiply(u.DESATURATE_LUMINANCE,h)},sepia:function(h){return h===void 0&&(h=!1),this.multiply(u.SEPIA,h)},night:function(h,o){return h===void 0&&(h=.1),o===void 0&&(o=!1),this.multiply([h*-2,-h,0,0,0,-h,0,h,0,0,0,h,h*2,0,0,0,0,0,1,0],o)},lsd:function(h){return h===void 0&&(h=!1),this.multiply(u.LSD,h)},brown:function(h){return h===void 0&&(h=!1),this.multiply(u.BROWN,h)},vintagePinhole:function(h){return h===void 0&&(h=!1),this.multiply(u.VINTAGE,h)},kodachrome:function(h){return h===void 0&&(h=!1),this.multiply(u.KODACHROME,h)},technicolor:function(h){return h===void 0&&(h=!1),this.multiply(u.TECHNICOLOR,h)},polaroid:function(h){return h===void 0&&(h=!1),this.multiply(u.POLAROID,h)},shiftToBGR:function(h){return h===void 0&&(h=!1),this.multiply(u.SHIFT_BGR,h)},multiply:function(h,o){o===void 0&&(o=!1),o||this.reset();var n=this._matrix,r=x;return r.set(n),n.set([r[0]*h[0]+r[1]*h[5]+r[2]*h[10]+r[3]*h[15],r[0]*h[1]+r[1]*h[6]+r[2]*h[11]+r[3]*h[16],r[0]*h[2]+r[1]*h[7]+r[2]*h[12]+r[3]*h[17],r[0]*h[3]+r[1]*h[8]+r[2]*h[13]+r[3]*h[18],r[0]*h[4]+r[1]*h[9]+r[2]*h[14]+r[3]*h[19]+r[4],r[5]*h[0]+r[6]*h[5]+r[7]*h[10]+r[8]*h[15],r[5]*h[1]+r[6]*h[6]+r[7]*h[11]+r[8]*h[16],r[5]*h[2]+r[6]*h[7]+r[7]*h[12]+r[8]*h[17],r[5]*h[3]+r[6]*h[8]+r[7]*h[13]+r[8]*h[18],r[5]*h[4]+r[6]*h[9]+r[7]*h[14]+r[8]*h[19]+r[9],r[10]*h[0]+r[11]*h[5]+r[12]*h[10]+r[13]*h[15],r[10]*h[1]+r[11]*h[6]+r[12]*h[11]+r[13]*h[16],r[10]*h[2]+r[11]*h[7]+r[12]*h[12]+r[13]*h[17],r[10]*h[3]+r[11]*h[8]+r[12]*h[13]+r[13]*h[18],r[10]*h[4]+r[11]*h[9]+r[12]*h[14]+r[13]*h[19]+r[14],r[15]*h[0]+r[16]*h[5]+r[17]*h[10]+r[18]*h[15],r[15]*h[1]+r[16]*h[6]+r[17]*h[11]+r[18]*h[16],r[15]*h[2]+r[16]*h[7]+r[17]*h[12]+r[18]*h[17],r[15]*h[3]+r[16]*h[8]+r[17]*h[13]+r[18]*h[18],r[15]*h[4]+r[16]*h[9]+r[17]*h[14]+r[18]*h[19]+r[19]]),this._dirty=!0,this}});u.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],u.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],u.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],u.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],u.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],u.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],u.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],u.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],u.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],u.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],u.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],l.exports=u},39298:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72283),u=new d({initialize:function(o,n,r){this._rgb=[0,0,0],this.onChangeCallback=x,this.dirty=!1,this.set(o,n,r)},set:function(h,o,n){return h===void 0&&(h=0),o===void 0&&(o=0),n===void 0&&(n=0),this._rgb=[h,o,n],this.onChange(),this},equals:function(h,o,n){var r=this._rgb;return r[0]===h&&r[1]===o&&r[2]===n},onChange:function(){this.dirty=!0;var h=this._rgb;this.onChangeCallback.call(this,h[0],h[1],h[2])},r:{get:function(){return this._rgb[0]},set:function(h){this._rgb[0]=h,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(h){this._rgb[1]=h,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(h){this._rgb[2]=h,this.onChange()}},destroy:function(){this.onChangeCallback=null}});l.exports=u},84093:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};l.exports=T},32058:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97328),x=e(59994),u=e(73174),h=e(28417),o=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),h(n,x(r)+f),u(n,d(r)+a),n};l.exports=o},85535:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97328),x=e(40163),u=e(73174),h=e(74465),o=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),h(n,x(r)-f),u(n,d(r)+a),n};l.exports=o},9605:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97328),x=e(70271),u=e(73174),h=e(19298),o=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),h(n,x(r)+f),u(n,d(r)+a),n};l.exports=o},22529:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(21843),x=e(59994),u=e(29568),h=function(o,n,r,f){return r===void 0&&(r=0),f===void 0&&(f=0),d(o,x(n)+r,u(n)+f),o};l.exports=h},5739:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(29568),x=e(40163),u=e(81711),h=e(74465),o=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),h(n,x(r)-f),u(n,d(r)+a),n};l.exports=o},40327:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84093),x=[];x[d.BOTTOM_CENTER]=e(32058),x[d.BOTTOM_LEFT]=e(85535),x[d.BOTTOM_RIGHT]=e(9605),x[d.CENTER]=e(22529),x[d.LEFT_CENTER]=e(5739),x[d.RIGHT_CENTER]=e(27683),x[d.TOP_CENTER]=e(96439),x[d.TOP_LEFT]=e(81447),x[d.TOP_RIGHT]=e(47888),x[d.LEFT_BOTTOM]=x[d.BOTTOM_LEFT],x[d.LEFT_TOP]=x[d.TOP_LEFT],x[d.RIGHT_BOTTOM]=x[d.BOTTOM_RIGHT],x[d.RIGHT_TOP]=x[d.TOP_RIGHT];var u=function(h,o,n,r,f){return x[n](h,o,r,f)};l.exports=u},27683:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(29568),x=e(70271),u=e(81711),h=e(19298),o=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),h(n,x(r)+f),u(n,d(r)+a),n};l.exports=o},96439:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(59994),x=e(47196),u=e(28417),h=e(84349),o=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),u(n,d(r)+f),h(n,x(r)-a),n};l.exports=o},81447:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(40163),x=e(47196),u=e(74465),h=e(84349),o=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),u(n,d(r)-f),h(n,x(r)-a),n};l.exports=o},47888:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70271),x=e(47196),u=e(19298),h=e(84349),o=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),u(n,d(r)+f),h(n,x(r)-a),n};l.exports=o},46997:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={BottomCenter:e(32058),BottomLeft:e(85535),BottomRight:e(9605),Center:e(22529),LeftCenter:e(5739),QuickSet:e(40327),RightCenter:e(27683),TopCenter:e(96439),TopLeft:e(81447),TopRight:e(47888)}},93545:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84093),x=e(98611),u={In:e(46997),To:e(86639)};u=x(!1,u,d),l.exports=u},27118:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97328),x=e(59994),u=e(28417),h=e(84349),o=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),u(n,x(r)+f),h(n,d(r)+a),n};l.exports=o},84469:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97328),x=e(40163),u=e(74465),h=e(84349),o=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),u(n,x(r)-f),h(n,d(r)+a),n};l.exports=o},51577:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97328),x=e(70271),u=e(19298),h=e(84349),o=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),u(n,x(r)+f),h(n,d(r)+a),n};l.exports=o},90271:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97328),x=e(40163),u=e(73174),h=e(19298),o=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),h(n,x(r)-f),u(n,d(r)+a),n};l.exports=o},30466:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(29568),x=e(40163),u=e(81711),h=e(19298),o=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),h(n,x(r)-f),u(n,d(r)+a),n};l.exports=o},50087:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(40163),x=e(47196),u=e(19298),h=e(84349),o=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),u(n,d(r)-f),h(n,x(r)-a),n};l.exports=o},82590:(l,T,e)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84093),x=[];x[d.BOTTOM_CENTER]=e(27118),x[d.BOTTOM_LEFT]=e(84469),x[d.BOTTOM_RIGHT]=e(51577),x[d.LEFT_BOTTOM]=e(90271),x[d.LEFT_CENTER]=e(30466),x[d.LEFT_TOP]=e(50087),x[d.RIGHT_BOTTOM]=e(13555),x[d.RIGHT_CENTER]=e(99049),x[d.RIGHT_TOP]=e(67788),x[d.TOP_CENTER]=e(78170),x[d.TOP_LEFT]=e(54145),x[d.TOP_RIGHT]=e(75548);var u=function(h,o,n,r,f){return x[n](h,o,r,f)};l.exports=u},13555:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97328),x=e(70271),u=e(73174),h=e(74465),o=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),h(n,x(r)+f),u(n,d(r)+a),n};l.exports=o},99049:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(29568),x=e(70271),u=e(81711),h=e(74465),o=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),h(n,x(r)+f),u(n,d(r)+a),n};l.exports=o},67788:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70271),x=e(47196),u=e(74465),h=e(84349),o=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),u(n,d(r)+f),h(n,x(r)-a),n};l.exports=o},78170:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(59994),x=e(47196),u=e(73174),h=e(28417),o=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),h(n,d(r)+f),u(n,x(r)-a),n};l.exports=o},54145:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(40163),x=e(47196),u=e(73174),h=e(74465),o=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),h(n,d(r)-f),u(n,x(r)-a),n};l.exports=o},75548:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70271),x=e(47196),u=e(73174),h=e(19298),o=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),h(n,d(r)+f),u(n,x(r)-a),n};l.exports=o},86639:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={BottomCenter:e(27118),BottomLeft:e(84469),BottomRight:e(51577),LeftBottom:e(90271),LeftCenter:e(30466),LeftTop:e(50087),QuickSet:e(82590),RightBottom:e(13555),RightCenter:e(99049),RightTop:e(67788),TopCenter:e(78170),TopLeft:e(54145),TopRight:e(75548)}},21843:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(28417),x=e(81711),u=function(h,o,n){return d(h,o),x(h,n)};l.exports=u},97328:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.y+e.height-e.height*e.originY};l.exports=T},7126:(l,T,e)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97328),x=e(40163),u=e(70271),h=e(47196),o=e(74118),n=function(r,f){f===void 0&&(f=new o);var a=x(r),c=h(r);return f.x=a,f.y=c,f.width=u(r)-a,f.height=d(r)-c,f};l.exports=n},59994:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x-e.width*e.originX+e.width*.5};l.exports=T},29568:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.y-e.height*e.originY+e.height*.5};l.exports=T},40163:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x-e.width*e.originX};l.exports=T},52088:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.width*e.originX};l.exports=T},23379:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.height*e.originY};l.exports=T},70271:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x+e.width-e.width*e.originX};l.exports=T},47196:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.y-e.height*e.originY};l.exports=T},73174:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.y=d-e.height+e.height*e.originY,e};l.exports=T},28417:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=e.width*e.originX;return e.x=d+x-e.width*.5,e};l.exports=T},81711:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=e.height*e.originY;return e.y=d+x-e.height*.5,e};l.exports=T},74465:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.x=d+e.width*e.originX,e};l.exports=T},19298:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.x=d-e.width+e.width*e.originX,e};l.exports=T},84349:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.y=d+e.height*e.originY,e};l.exports=T},15252:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={CenterOn:e(21843),GetBottom:e(97328),GetBounds:e(7126),GetCenterX:e(59994),GetCenterY:e(29568),GetLeft:e(40163),GetOffsetX:e(52088),GetOffsetY:e(23379),GetRight:e(70271),GetTop:e(47196),SetBottom:e(73174),SetCenterX:e(28417),SetCenterY:e(81711),SetLeft:e(74465),SetRight:e(19298),SetTop:e(84349)}},70616:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setCrisp:function(e){var d=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return d.forEach(function(x){e.style["image-rendering"]=x}),e.style.msInterpolationMode="nearest-neighbor",e},setBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}};l.exports=T},61068:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(86459),x=e(8213),u=[],h=!1,o=function(){var n=function(P,E,S,w,R){E===void 0&&(E=1),S===void 0&&(S=1),w===void 0&&(w=d.CANVAS),R===void 0&&(R=!1);var A,O=a(w);return O===null?(O={parent:P,canvas:document.createElement("canvas"),type:w},w===d.CANVAS&&u.push(O),A=O.canvas):(O.parent=P,A=O.canvas),R&&(O.parent=A),A.width=E,A.height=S,h&&w===d.CANVAS&&x.disable(A.getContext("2d",{willReadFrequently:!1})),A},r=function(P,E,S){return n(P,E,S,d.CANVAS)},f=function(P,E,S){return n(P,E,S,d.WEBGL)},a=function(P){if(P===void 0&&(P=d.CANVAS),P===d.WEBGL)return null;for(var E=0;E<u.length;E++){var S=u[E];if(!S.parent&&S.type===P)return S}return null},c=function(P){var E=P instanceof HTMLCanvasElement;u.forEach(function(S){(E&&S.canvas===P||!E&&S.parent===P)&&(S.parent=null,S.canvas.width=1,S.canvas.height=1)})},p=function(){var P=0;return u.forEach(function(E){E.parent&&P++}),P},v=function(){return u.length-p()},m=function(){h=!0},y=function(){h=!1};return{create2D:r,create:n,createWebGL:f,disableSmoothing:m,enableSmoothing:y,first:a,free:v,pool:u,remove:c,total:p}};l.exports=o()},8213:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T="",e=function(){var d=function(o){for(var n=["i","webkitI","msI","mozI","oI"],r=0;r<n.length;r++){var f=n[r]+"mageSmoothingEnabled";if(f in o)return f}return null},x=function(o){return T===""&&(T=d(o)),T&&(o[T]=!0),o},u=function(o){return T===""&&(T=d(o)),T&&(o[T]=!1),o},h=function(o){return T!==null?o[T]:null};return{disable:u,enable:x,getPrefix:d,isEnabled:h}};l.exports=e()},59271:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d===void 0&&(d="none"),e.style.msTouchAction=d,e.style["ms-touch-action"]=d,e.style["touch-action"]=d,e};l.exports=T},36505:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){d===void 0&&(d="none");var x=["-webkit-","-khtml-","-moz-","-ms-",""];return x.forEach(function(u){e.style[u+"user-select"]=d}),e.style["-webkit-touch-callout"]=d,e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",e};l.exports=T},23514:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={CanvasInterpolation:e(70616),CanvasPool:e(61068),Smoothing:e(8213),TouchAction:e(59271),UserSelect:e(36505)}},27119:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(22946),u=e(5657),h=e(24650),o=e(68033),n=new d({initialize:function(f,a,c,p){f===void 0&&(f=0),a===void 0&&(a=0),c===void 0&&(c=0),p===void 0&&(p=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(f,a,c,p)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(r,f,a,c,p){return c===void 0&&(c=255),p===void 0&&(p=!0),this._locked=!0,this.red=r,this.green=f,this.blue=a,this.alpha=c,this._locked=!1,this.update(p)},setGLTo:function(r,f,a,c){return c===void 0&&(c=1),this._locked=!0,this.redGL=r,this.greenGL=f,this.blueGL=a,this.alphaGL=c,this._locked=!1,this.update(!0)},setFromRGB:function(r){return this._locked=!0,this.red=r.r,this.green=r.g,this.blue=r.b,r.hasOwnProperty("a")&&(this.alpha=r.a),this._locked=!1,this.update(!0)},setFromHSV:function(r,f,a){return h(r,f,a,this)},update:function(r){if(r===void 0&&(r=!1),this._locked)return this;var f=this.r,a=this.g,c=this.b,p=this.a;return this._color=x(f,a,c),this._color32=u(f,a,c,p),this._rgba="rgba("+f+","+a+","+c+","+p/255+")",r&&o(f,a,c,this),this},updateHSV:function(){var r=this.r,f=this.g,a=this.b;return o(r,f,a,this),this},clone:function(){return new n(this.r,this.g,this.b,this.a)},gray:function(r){return this.setTo(r,r,r)},random:function(r,f){r===void 0&&(r=0),f===void 0&&(f=255);var a=Math.floor(r+Math.random()*(f-r)),c=Math.floor(r+Math.random()*(f-r)),p=Math.floor(r+Math.random()*(f-r));return this.setTo(a,c,p)},randomGray:function(r,f){r===void 0&&(r=0),f===void 0&&(f=255);var a=Math.floor(r+Math.random()*(f-r));return this.setTo(a,a,a)},saturate:function(r){return this.s+=r/100,this},desaturate:function(r){return this.s-=r/100,this},lighten:function(r){return this.v+=r/100,this},darken:function(r){return this.v-=r/100,this},brighten:function(r){var f=this.r,a=this.g,c=this.b;return f=Math.max(0,Math.min(255,f-Math.round(255*-(r/100)))),a=Math.max(0,Math.min(255,a-Math.round(255*-(r/100)))),c=Math.max(0,Math.min(255,c-Math.round(255*-(r/100)))),this.setTo(f,a,c)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(r){this.gl[0]=Math.min(Math.abs(r),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(r){this.gl[1]=Math.min(Math.abs(r),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(r){this.gl[2]=Math.min(Math.abs(r),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(r){this.gl[3]=Math.min(Math.abs(r),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(r){r=Math.floor(Math.abs(r)),this.r=Math.min(r,255),this.gl[0]=r/255,this.update(!0)}},green:{get:function(){return this.g},set:function(r){r=Math.floor(Math.abs(r)),this.g=Math.min(r,255),this.gl[1]=r/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(r){r=Math.floor(Math.abs(r)),this.b=Math.min(r,255),this.gl[2]=r/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(r){r=Math.floor(Math.abs(r)),this.a=Math.min(r,255),this.gl[3]=r/255,this.update()}},h:{get:function(){return this._h},set:function(r){this._h=r,h(r,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(r){this._s=r,h(this._h,r,this._v,this)}},v:{get:function(){return this._v},set:function(r){this._v=r,h(this._h,this._s,r,this)}}});l.exports=n},30245:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(22946),x=function(u){u===void 0&&(u=1024);var h=[],o=255,n,r=255,f=0,a=0;for(n=0;n<=o;n++)h.push({r,g:n,b:a,color:d(r,n,a)});for(f=255,n=o;n>=0;n--)h.push({r:n,g:f,b:a,color:d(n,f,a)});for(r=0,n=0;n<=o;n++,f--)h.push({r,g:f,b:n,color:d(r,f,n)});for(f=0,a=255,n=0;n<=o;n++,a--,r++)h.push({r,g:f,b:a,color:d(r,f,a)});if(u===1024)return h;var c=[],p=0,v=1024/u;for(n=0;n<u;n++)c.push(h[Math.floor(p)]),p+=v;return c};l.exports=x},86672:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d={r:e>>16&255,g:e>>8&255,b:e&255,a:255};return e>16777215&&(d.a=e>>>24),d};l.exports=T},25409:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d=e.toString(16);return d.length===1?"0"+d:d};l.exports=T},22946:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return e<<16|d<<8|x};l.exports=T},5657:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){return u<<24|e<<16|d<<8|x};l.exports=T},74777:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(27119),x=e(59998),u=function(h,o,n){var r=n,f=n,a=n;if(o!==0){var c=n<.5?n*(1+o):n+o-n*o,p=2*n-c;r=x(p,c,h+1/3),f=x(p,c,h),a=x(p,c,h-1/3)}var v=new d;return v.setGLTo(r,f,a,1)};l.exports=u},89263:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(24650),x=function(u,h){u===void 0&&(u=1),h===void 0&&(h=1);for(var o=[],n=0;n<=359;n++)o.push(d(n/359,u,h));return o};l.exports=x},24650:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(22946);function x(h,o,n,r){var f=(h+o*6)%6,a=Math.min(f,4-f,1);return Math.round(255*(r-r*n*Math.max(0,a)))}var u=function(h,o,n,r){o===void 0&&(o=1),n===void 0&&(n=1);var f=x(5,h,o,n),a=x(3,h,o,n),c=x(1,h,o,n);return r?r.setTo?r.setTo(f,a,c,r.alpha,!0):(r.r=f,r.g=a,r.b=c,r.color=d(f,a,c),r):{r:f,g:a,b:c,color:d(f,a,c)}};l.exports=u},91487:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(27119),x=function(u){var h=new d;u=u.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,c,p,v){return c+c+p+p+v+v});var o=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(u);if(o){var n=parseInt(o[1],16),r=parseInt(o[2],16),f=parseInt(o[3],16);h.setTo(n,r,f)}return h};l.exports=x},59998:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return x<0&&(x+=1),x>1&&(x-=1),x<.16666666666666666?e+(d-e)*6*x:x<.5?d:x<.6666666666666666?e+(d-e)*(.6666666666666666-x)*6:e};l.exports=T},74853:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(27119),x=e(15978),u=function(h){var o=x(h);return new d(o.r,o.g,o.b,o.a)};l.exports=u},15978:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e>16777215?{a:e>>>24,r:e>>16&255,g:e>>8&255,b:e&255}:{a:255,r:e>>16&255,g:e>>8&255,b:e&255}};l.exports=T},53756:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(42798),x=function(o,n,r,f,a,c,p,v){p===void 0&&(p=100),v===void 0&&(v=0);var m=v/p;return{r:d(o,f,m),g:d(n,a,m),b:d(r,c,m)}},u=function(o,n,r,f){return r===void 0&&(r=100),f===void 0&&(f=0),x(o.r,o.g,o.b,n.r,n.g,n.b,r,f)},h=function(o,n,r,f,a,c){return a===void 0&&(a=100),c===void 0&&(c=0),x(o.r,o.g,o.b,n,r,f,a,c)};l.exports={RGBWithRGB:x,ColorWithRGB:h,ColorWithColor:u}},73904:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(27119),x=function(u){return new d(u.r,u.g,u.b,u.a)};l.exports=x},26841:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(27119),x=function(u){var h=new d,o=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(u.toLowerCase());if(o){var n=parseInt(o[1],10),r=parseInt(o[2],10),f=parseInt(o[3],10),a=o[4]!==void 0?parseFloat(o[4]):1;h.setTo(n,r,f,a*255)}return h};l.exports=x},68033:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){u===void 0&&(u={h:0,s:0,v:0}),e/=255,d/=255,x/=255;var h=Math.min(e,d,x),o=Math.max(e,d,x),n=o-h,r=0,f=o===0?0:n/o,a=o;return o!==h&&(o===e?r=(d-x)/n+(d<x?6:0):o===d?r=(x-e)/n+2:o===x&&(r=(e-d)/n+4),r/=6),u.hasOwnProperty("_h")?(u._h=r,u._s=f,u._v=a):(u.h=r,u.s=f,u.v=a),u};l.exports=T},4880:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(25409),x=function(u,h,o,n,r){return n===void 0&&(n=255),r===void 0&&(r="#"),r==="#"?"#"+((1<<24)+(u<<16)+(h<<8)+o).toString(16).slice(1,7):"0x"+d(n)+d(u)+d(h)+d(o)};l.exports=x},37243:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(17489),x=e(27119),u=function(h,o){return h===void 0&&(h=0),o===void 0&&(o=255),new x(d(h,o),d(h,o),d(h,o))};l.exports=u},93222:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(91487),x=e(74853),u=e(73904),h=e(26841),o=function(n){var r=typeof n;switch(r){case"string":return n.substr(0,3).toLowerCase()==="rgb"?h(n):d(n);case"number":return x(n);case"object":return u(n)}};l.exports=o},95509:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(27119);d.ColorSpectrum=e(30245),d.ColorToRGBA=e(86672),d.ComponentToHex=e(25409),d.GetColor=e(22946),d.GetColor32=e(5657),d.HexStringToColor=e(91487),d.HSLToColor=e(74777),d.HSVColorWheel=e(89263),d.HSVToRGB=e(24650),d.HueToComponent=e(59998),d.IntegerToColor=e(74853),d.IntegerToRGB=e(15978),d.Interpolate=e(53756),d.ObjectToColor=e(73904),d.RandomRGB=e(37243),d.RGBStringToColor=e(26841),d.RGBToHSV=e(68033),d.RGBToString=e(4880),d.ValueToColor=e(93222),l.exports=d},24816:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={Align:e(93545),BaseShader:e(31053),Bounds:e(15252),Canvas:e(23514),Color:e(95509),ColorMatrix:e(65246),Masks:e(93310),RGB:e(39298)}},76756:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(61286),u=new d({initialize:function(o,n,r,f,a,c){n||(n=o.sys.make.image({x:r,y:f,key:a,frame:c,add:!1})),this.bitmapMask=n,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(h){this.bitmapMask=h},preRenderWebGL:function(h,o,n){h.pipelines.BITMAPMASK_PIPELINE.beginMask(this,o,n)},postRenderWebGL:function(h,o,n){h.pipelines.BITMAPMASK_PIPELINE.endMask(this,o,n)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});x.register("bitmapMask",function(h,o,n,r,f){return new u(this.scene,h,o,n,r,f)}),l.exports=u},63037:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(h,o){this.geometryMask=o,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(u){return this.geometryMask=u,this},setInvertAlpha:function(u){return u===void 0&&(u=!0),this.invertAlpha=u,this},preRenderWebGL:function(u,h,o){var n=u.gl;u.flush(),u.maskStack.length===0&&(n.enable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),u.maskCount=0),u.currentCameraMask.mask!==this&&(u.currentMask.mask=this),u.maskStack.push({mask:this,camera:o}),this.applyStencil(u,o,!0),u.maskCount++},applyStencil:function(u,h,o){var n=u.gl,r=this.geometryMask,f=u.maskCount,a=255;n.colorMask(!1,!1,!1,!1),o?(n.stencilFunc(n.EQUAL,f,a),n.stencilOp(n.KEEP,n.KEEP,n.INCR),f++):(n.stencilFunc(n.EQUAL,f+1,a),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),this.level=f,r.renderWebGL(u,r,h),u.flush(),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),this.invertAlpha?n.stencilFunc(n.NOTEQUAL,f,a):n.stencilFunc(n.EQUAL,f,a)},postRenderWebGL:function(u){var h=u.gl;u.maskStack.pop(),u.maskCount--,u.flush();var o=u.currentMask;if(u.maskStack.length===0)o.mask=null,h.disable(h.STENCIL_TEST);else{var n=u.maskStack[u.maskStack.length-1];n.mask.applyStencil(u,n.camera,!1),u.currentCameraMask.mask!==n.mask?(o.mask=n.mask,o.camera=n.camera):o.mask=null}},preRenderCanvas:function(u,h,o){var n=this.geometryMask;u.currentContext.save(),n.renderCanvas(u,n,o,null,null,!0),u.currentContext.clip()},postRenderCanvas:function(u){u.currentContext.restore()},destroy:function(){this.geometryMask=null}});l.exports=x},93310:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={BitmapMask:e(76756),GeometryMask:e(63037)}},31053:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(h,o,n,r){(!o||o==="")&&(o=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!n||n==="")&&(n=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),r===void 0&&(r=null),this.key=h,this.fragmentSrc=o,this.vertexSrc=n,this.uniforms=r}});l.exports=x},99584:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x;if(d)typeof d=="string"?x=document.getElementById(d):typeof d=="object"&&d.nodeType===1&&(x=d);else if(e.parentElement||d===null)return e;return x||(x=document.body),x.appendChild(e),e};l.exports=T},85178:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(99584),x=function(u){var h=u.config;if(!(!h.parent||!h.domCreateContainer)){var o=document.createElement("div");o.style.cssText=["display: block;","width: "+u.scale.width+"px;","height: "+u.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+h.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),u.domContainer=o,d(o,h.parent)}};l.exports=x},21546:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(36580),x=function(u){if(document.readyState==="complete"||document.readyState==="interactive"){u();return}var h=function(){document.removeEventListener("deviceready",h,!0),document.removeEventListener("DOMContentLoaded",h,!0),window.removeEventListener("load",h,!0),u()};document.body?d.cordova?document.addEventListener("deviceready",h,!1):(document.addEventListener("DOMContentLoaded",h,!0),window.addEventListener("load",h,!0)):window.setTimeout(h,20)};l.exports=x},74181:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){if(!e)return window.innerHeight;var d=Math.abs(window.orientation),x={w:0,h:0},u=document.createElement("div");return u.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(u),x.w=d===90?u.offsetHeight:window.innerWidth,x.h=d===90?window.innerWidth:u.offsetHeight,document.documentElement.removeChild(u),u=null,Math.abs(window.orientation)!==90?x.h:x.w};l.exports=T},9229:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(55301),x=function(u,h){var o=window.screen,n=o?o.orientation||o.mozOrientation||o.msOrientation:!1;if(n&&typeof n.type=="string")return n.type;if(typeof n=="string")return n;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?d.ORIENTATION.PORTRAIT:d.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return d.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return d.ORIENTATION.LANDSCAPE}else return h>u?d.ORIENTATION.PORTRAIT:d.ORIENTATION.LANDSCAPE};l.exports=x},2893:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d;return e!==""&&(typeof e=="string"?d=document.getElementById(e):e&&e.nodeType===1&&(d=e)),d||(d=document.body),d};l.exports=T},89200:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d="";try{if(window.DOMParser){var x=new DOMParser;d=x.parseFromString(e,"text/xml")}else d=new ActiveXObject("Microsoft.XMLDOM"),d.loadXML(e)}catch{d=null}return!d||!d.documentElement||d.getElementsByTagName("parsererror").length?null:d};l.exports=T},55638:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){e.parentNode&&e.parentNode.removeChild(e)};l.exports=T},27385:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72283),u=new d({initialize:function(){this.isRunning=!1,this.callback=x,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var o=this;this.step=function n(r){o.callback(r),o.isRunning&&(o.timeOutID=window.requestAnimationFrame(n))},this.stepTimeout=function n(){o.isRunning&&(o.timeOutID=window.setTimeout(n,o.delay)),o.callback(window.performance.now())}},start:function(h,o,n){this.isRunning||(this.callback=h,this.isSetTimeOut=o,this.delay=n,this.isRunning=!0,this.timeOutID=o?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=x}});l.exports=u},3590:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={AddToDOM:e(99584),DOMContentLoaded:e(21546),GetInnerHeight:e(74181),GetScreenOrientation:e(9229),GetTarget:e(2893),ParseXML:e(89200),RemoveFromDOM:e(55638),RequestAnimationFrame:e(27385)};l.exports=d},78491:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(6659),u=e(91963),h=new d({Extends:x,initialize:function(){x.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});u.register("EventEmitter",h,"events"),l.exports=h},95146:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={EventEmitter:e(78491)}},20170:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47551),u=e(47406),h=new d({Extends:x,initialize:function(n,r){r===void 0&&(r=1),x.call(this,u.BARREL,n),this.amount=r}});l.exports=h},51182:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47551),u=e(47406),h=new d({Extends:x,initialize:function(n,r,f,a,c,p,v){f===void 0&&(f=1),a===void 0&&(a=1),c===void 0&&(c=1),p===void 0&&(p=1),v===void 0&&(v=4),x.call(this,u.BLOOM,n),this.steps=v,this.offsetX=f,this.offsetY=a,this.blurStrength=c,this.strength=p,this.glcolor=[1,1,1],r!=null&&(this.color=r)},color:{get:function(){var o=this.glcolor;return(o[0]*255<<16)+(o[1]*255<<8)+(o[2]*255|0)},set:function(o){var n=this.glcolor;n[0]=(o>>16&255)/255,n[1]=(o>>8&255)/255,n[2]=(o&255)/255}}});l.exports=h},51498:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47551),u=e(47406),h=new d({Extends:x,initialize:function(n,r,f,a,c,p,v){f===void 0&&(f=2),a===void 0&&(a=2),c===void 0&&(c=1),v===void 0&&(v=4),x.call(this,u.BLUR,n),this.quality=0,this.x=f,this.y=a,this.steps=v,this.strength=c,this.glcolor=[1,1,1],p!=null&&(this.color=p)},color:{get:function(){var o=this.glcolor;return(o[0]*255<<16)+(o[1]*255<<8)+(o[2]*255|0)},set:function(o){var n=this.glcolor;n[0]=(o>>16&255)/255,n[1]=(o>>8&255)/255,n[2]=(o&255)/255}}});l.exports=h},12042:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47551),u=e(47406),h=new d({Extends:x,initialize:function(n,r,f,a,c,p,v,m){r===void 0&&(r=.5),f===void 0&&(f=1),a===void 0&&(a=.2),c===void 0&&(c=!1),p===void 0&&(p=1),v===void 0&&(v=1),m===void 0&&(m=1),x.call(this,u.BOKEH,n),this.radius=r,this.amount=f,this.contrast=a,this.isTiltShift=c,this.strength=m,this.blurX=p,this.blurY=v}});l.exports=h},69900:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47551),u=e(47406),h=new d({Extends:x,initialize:function(n,r,f,a,c,p){r===void 0&&(r=8),c===void 0&&(c=1),p===void 0&&(p=.005),x.call(this,u.CIRCLE,n),this.scale=c,this.feather=p,this.thickness=r,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],f!=null&&(this.color=f),a!=null&&(this.backgroundColor=a)},color:{get:function(){var o=this.glcolor;return(o[0]*255<<16)+(o[1]*255<<8)+(o[2]*255|0)},set:function(o){var n=this.glcolor;n[0]=(o>>16&255)/255,n[1]=(o>>8&255)/255,n[2]=(o&255)/255}},backgroundColor:{get:function(){var o=this.glcolor2;return(o[0]*255<<16)+(o[1]*255<<8)+(o[2]*255|0)},set:function(o){var n=this.glcolor2;n[0]=(o>>16&255)/255,n[1]=(o>>8&255)/255,n[2]=(o&255)/255}}});l.exports=h},48991:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(65246),u=e(47406),h=new d({Extends:x,initialize:function(n){x.call(this),this.type=u.COLOR_MATRIX,this.gameObject=n,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});l.exports=h},47551:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(h,o){this.type=h,this.gameObject=o,this.active=!0},setActive:function(u){return this.active=u,this},destroy:function(){this.gameObject=null,this.active=!1}});l.exports=x},47909:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47551),u=e(47406),h=new d({Extends:x,initialize:function(n,r,f,a){r===void 0&&(r="__WHITE"),f===void 0&&(f=.005),a===void 0&&(a=.005),x.call(this,u.DISPLACEMENT,n),this.x=f,this.y=a,this.glTexture,this.setTexture(r)},setTexture:function(o){var n=this.gameObject.scene.sys.textures.getFrame(o);return n&&(this.glTexture=n.glTexture),this}});l.exports=h},18919:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47551),u=e(47406),h=new d({Extends:x,initialize:function(n,r,f,a,c){f===void 0&&(f=4),a===void 0&&(a=0),c===void 0&&(c=!1),x.call(this,u.GLOW,n),this.outerStrength=f,this.innerStrength=a,this.knockout=c,this.glcolor=[1,1,1,1],r!==void 0&&(this.color=r)},color:{get:function(){var o=this.glcolor;return(o[0]*255<<16)+(o[1]*255<<8)+(o[2]*255|0)},set:function(o){var n=this.glcolor;n[0]=(o>>16&255)/255,n[1]=(o>>8&255)/255,n[2]=(o&255)/255}}});l.exports=h},62494:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47551),u=e(47406),h=new d({Extends:x,initialize:function(n,r,f,a,c,p,v,m,y){a===void 0&&(a=.2),c===void 0&&(c=0),p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=1),y===void 0&&(y=0),x.call(this,u.GRADIENT,n),this.alpha=a,this.size=y,this.fromX=c,this.fromY=p,this.toX=v,this.toY=m,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],r!=null&&(this.color1=r),f!=null&&(this.color2=f)},color1:{get:function(){var o=this.glcolor1;return(o[0]<<16)+(o[1]<<8)+(o[2]|0)},set:function(o){var n=this.glcolor1;n[0]=o>>16&255,n[1]=o>>8&255,n[2]=o&255}},color2:{get:function(){var o=this.glcolor2;return(o[0]<<16)+(o[1]<<8)+(o[2]|0)},set:function(o){var n=this.glcolor2;n[0]=o>>16&255,n[1]=o>>8&255,n[2]=o&255}}});l.exports=h},68897:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47551),u=e(47406),h=new d({Extends:x,initialize:function(n,r){r===void 0&&(r=1),x.call(this,u.PIXELATE,n),this.amount=r}});l.exports=h},58575:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47551),u=e(47406),h=new d({Extends:x,initialize:function(n,r,f,a,c,p,v,m){r===void 0&&(r=0),f===void 0&&(f=0),a===void 0&&(a=.1),c===void 0&&(c=1),v===void 0&&(v=6),m===void 0&&(m=1),x.call(this,u.SHADOW,n),this.x=r,this.y=f,this.decay=a,this.power=c,this.glcolor=[0,0,0,1],this.samples=v,this.intensity=m,p!==void 0&&(this.color=p)},color:{get:function(){var o=this.glcolor;return(o[0]*255<<16)+(o[1]*255<<8)+(o[2]*255|0)},set:function(o){var n=this.glcolor;n[0]=(o>>16&255)/255,n[1]=(o>>8&255)/255,n[2]=(o&255)/255}}});l.exports=h},33755:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47551),u=e(47406),h=new d({Extends:x,initialize:function(n,r,f,a,c){r===void 0&&(r=.5),f===void 0&&(f=.5),a===void 0&&(a=3),c===void 0&&(c=!1),x.call(this,u.SHINE,n),this.speed=r,this.lineWidth=f,this.gradient=a,this.reveal=c}});l.exports=h},24949:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47551),u=e(47406),h=new d({Extends:x,initialize:function(n,r,f,a,c){r===void 0&&(r=.5),f===void 0&&(f=.5),a===void 0&&(a=.5),c===void 0&&(c=.5),x.call(this,u.VIGNETTE,n),this.x=r,this.y=f,this.radius=a,this.strength=c}});l.exports=h},66241:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47551),u=e(47406),h=new d({Extends:x,initialize:function(n,r,f,a,c){r===void 0&&(r=.1),f===void 0&&(f=0),a===void 0&&(a=0),c===void 0&&(c=!1),x.call(this,u.WIPE,n),this.progress=0,this.wipeWidth=r,this.direction=f,this.axis=a,this.reveal=c}});l.exports=h},47406:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};l.exports=T},96910:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(98611),x=e(47406),u={Barrel:e(20170),Controller:e(47551),Bloom:e(51182),Blur:e(51498),Bokeh:e(12042),Circle:e(69900),ColorMatrix:e(48991),Displacement:e(47909),Glow:e(18919),Gradient:e(62494),Pixelate:e(68897),Shadow:e(58575),Shine:e(33755),Vignette:e(24949),Wipe:e(66241)};u=d(!1,u,x),l.exports=u},88933:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(95723),x=e(20494),u=function(h,o,n){o.x=x(n,"x",0),o.y=x(n,"y",0),o.depth=x(n,"depth",0),o.flipX=x(n,"flipX",!1),o.flipY=x(n,"flipY",!1);var r=x(n,"scale",null);typeof r=="number"?o.setScale(r):r!==null&&(o.scaleX=x(r,"x",1),o.scaleY=x(r,"y",1));var f=x(n,"scrollFactor",null);typeof f=="number"?o.setScrollFactor(f):f!==null&&(o.scrollFactorX=x(f,"x",1),o.scrollFactorY=x(f,"y",1)),o.rotation=x(n,"rotation",0);var a=x(n,"angle",null);a!==null&&(o.angle=a),o.alpha=x(n,"alpha",1);var c=x(n,"origin",null);if(typeof c=="number")o.setOrigin(c);else if(c!==null){var p=x(c,"x",.5),v=x(c,"y",.5);o.setOrigin(p,v)}o.blendMode=x(n,"blendMode",d.NORMAL),o.visible=x(n,"visible",!0);var m=x(n,"add",!0);return m&&h.sys.displayList.add(o),o.preUpdate&&h.sys.updateList.add(o),o};l.exports=u},32291:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(20494),x=function(u,h){var o=d(h,"anims",null);if(o===null)return u;if(typeof o=="string")u.anims.play(o);else if(typeof o=="object"){var n=u.anims,r=d(o,"key",void 0);if(r){var f=d(o,"startFrame",void 0),a=d(o,"delay",0),c=d(o,"repeat",0),p=d(o,"repeatDelay",0),v=d(o,"yoyo",!1),m=d(o,"play",!1),y=d(o,"delayedPlay",0),P={key:r,delay:a,repeat:c,repeatDelay:p,yoyo:v,startFrame:f};m?n.play(P):y>0?n.playAfterDelay(P,y):n.load(P)}}return u};l.exports=x},91713:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(71207),u=e(91963),h=e(56631),o=e(7599),n=e(17922),r=new d({Extends:x,initialize:function(a){x.call(this,a),this.sortChildrenFlag=!1,this.scene=a,this.systems=a.sys,this.events=a.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(o.BOOT,this.boot,this),this.events.on(o.START,this.start,this)},boot:function(){this.events.once(o.DESTROY,this.destroy,this)},addChildCallback:function(f){f.displayList&&f.displayList!==this&&f.removeFromDisplayList(),f.parentContainer&&f.parentContainer.remove(f),f.displayList||(this.queueDepthSort(),f.displayList=this,f.emit(h.ADDED_TO_SCENE,f,this.scene),this.events.emit(o.ADDED_TO_SCENE,f,this.scene))},removeChildCallback:function(f){this.queueDepthSort(),f.displayList=null,f.emit(h.REMOVED_FROM_SCENE,f,this.scene),this.events.emit(o.REMOVED_FROM_SCENE,f,this.scene)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(n(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(f,a){return f._depth-a._depth},getChildren:function(){return this.list},shutdown:function(){for(var f=this.list;f.length;)f[0].destroy(!0);this.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});u.register("DisplayList",r,"displayList"),l.exports=r},89980:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(48129),u=e(81078),h=e(6659),o=e(56631),n=e(7599),r=new d({Extends:h,initialize:function(a,c){h.call(this),this.scene=a,this.displayList=null,this.type=c,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(o.ADDED_TO_SCENE,this.addedToScene,this),this.on(o.REMOVED_FROM_SCENE,this.removedFromScene,this),a.sys.queueDepthSort()},setActive:function(f){return this.active=f,this},setName:function(f){return this.name=f,this},setState:function(f){return this.state=f,this},setDataEnabled:function(){return this.data||(this.data=new u(this)),this},setData:function(f,a){return this.data||(this.data=new u(this)),this.data.set(f,a),this},incData:function(f,a){return this.data||(this.data=new u(this)),this.data.inc(f,a),this},toggleData:function(f){return this.data||(this.data=new u(this)),this.data.toggle(f),this},getData:function(f){return this.data||(this.data=new u(this)),this.data.get(f)},setInteractive:function(f,a,c){return this.scene.sys.input.enable(this,f,a,c),this},disableInteractive:function(){return this.scene.sys.input.disable(this),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return x(this)},willRender:function(f){var a=this.displayList&&this.displayList.active?this.displayList.willRender(f):!0;return!(!a||r.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&f.id)},getIndexList:function(){for(var f=this,a=this.parentContainer,c=[];a&&(c.unshift(a.getIndex(f)),f=a,a.parentContainer);)a=a.parentContainer;return this.displayList?c.unshift(this.displayList.getIndex(f)):c.unshift(this.scene.sys.displayList.getIndex(f)),c},addToDisplayList:function(f){return f===void 0&&(f=this.scene.sys.displayList),this.displayList&&this.displayList!==f&&this.removeFromDisplayList(),f.exists(this)||(this.displayList=f,f.add(this,!0),f.queueDepthSort(),this.emit(o.ADDED_TO_SCENE,this,this.scene),f.events.emit(n.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var f=this.displayList||this.scene.sys.displayList;return f&&f.exists(this)&&(f.remove(this,!0),f.queueDepthSort(),this.displayList=null,this.emit(o.REMOVED_FROM_SCENE,this,this.scene),f.events.emit(n.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(f){!this.scene||this.ignoreDestroy||(f===void 0&&(f=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(o.DESTROY,this,f),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});r.RENDER_MASK=15,l.exports=r},99325:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(91963),u=e(7599),h=new d({initialize:function(n){this.scene=n,this.systems=n.sys,this.events=n.sys.events,this.displayList,this.updateList,this.events.once(u.BOOT,this.boot,this),this.events.on(u.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(u.DESTROY,this.destroy,this)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});h.register=function(o,n){h.prototype.hasOwnProperty(o)||(h.prototype[o]=n)},h.remove=function(o){h.prototype.hasOwnProperty(o)&&delete h.prototype[o]},x.register("GameObjectCreator",h,"make"),l.exports=h},61286:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(91963),u=e(7599),h=new d({initialize:function(n){this.scene=n,this.systems=n.sys,this.events=n.sys.events,this.displayList,this.updateList,this.events.once(u.BOOT,this.boot,this),this.events.on(u.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(u.DESTROY,this.destroy,this)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},existing:function(o){return(o.renderCanvas||o.renderWebGL)&&this.displayList.add(o),o.preUpdate&&this.updateList.add(o),o},shutdown:function(){this.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});h.register=function(o,n){h.prototype.hasOwnProperty(o)||(h.prototype[o]=n)},h.remove=function(o){h.prototype.hasOwnProperty(o)&&delete h.prototype[o]},x.register("GameObjectFactory",h,"add"),l.exports=h},73329:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(69360),x=new d,u=new d,h=new d,o={camera:x,sprite:u,calc:h},n=function(r,f,a){var c=x,p=u,v=h;return p.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY),c.copyFrom(f.matrix),a?(c.multiplyWithOffset(a,-f.scrollX*r.scrollFactorX,-f.scrollY*r.scrollFactorY),p.e=r.x,p.f=r.y):(p.e-=f.scrollX*r.scrollFactorX,p.f-=f.scrollY*r.scrollFactorY),c.multiply(p,v),o};l.exports=n},92034:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(74623),u=e(91963),h=e(7599),o=new d({Extends:x,initialize:function(r){x.call(this),this.checkQueue=!0,this.scene=r,this.systems=r.sys,r.sys.events.once(h.BOOT,this.boot,this),r.sys.events.on(h.START,this.start,this)},boot:function(){this.systems.events.once(h.DESTROY,this.destroy,this)},start:function(){var n=this.systems.events;n.on(h.PRE_UPDATE,this.update,this),n.on(h.UPDATE,this.sceneUpdate,this),n.once(h.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(n,r){for(var f=this._active,a=f.length,c=0;c<a;c++){var p=f[c];p.active&&p.preUpdate.call(p,n,r)}},shutdown:function(){for(var n=this._active.length;n--;)this._active[n].destroy(!0);for(n=this._pending.length;n--;)this._pending[n].destroy(!0);for(n=this._destroy.length;n--;)this._destroy[n].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var r=this.systems.events;r.off(h.PRE_UPDATE,this.update,this),r.off(h.UPDATE,this.sceneUpdate,this),r.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(h.START,this.start,this),this.scene=null,this.systems=null}});u.register("UpdateList",o,"updateList"),l.exports=o},8810:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,h,o,n,r,f,a,c,p,v,m,y){var P=x.x-d.displayOriginX+h,E=x.y-d.displayOriginY+o,S=P+x.w,w=E+x.h,R=n.getXRound(P,E,r),A=n.getYRound(P,E,r),O=n.getXRound(P,w,r),F=n.getYRound(P,w,r),b=n.getXRound(S,w,r),D=n.getYRound(S,w,r),I=n.getXRound(S,E,r),B=n.getYRound(S,E,r);e.batchQuad(d,R,A,O,F,b,D,I,B,u.u0,u.v0,u.u1,u.v1,f,a,c,p,v,m,y)};l.exports=T},82173:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){if(x===void 0&&(x=!1),u===void 0)return u={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},u;var h=e.text,o=h.length,n=e.maxWidth,r=e.wordWrapCharCode,f=Number.MAX_VALUE,a=Number.MAX_VALUE,c=0,p=0,v=e.fontData.chars,m=e.fontData.lineHeight,y=e.letterSpacing,P=e.lineSpacing,E=0,S=0,w=0,R=null,A=e._align,O=0,F=0,b=e.fontSize/e.fontData.size,D=b*e.scaleX,I=b*e.scaleY,B=null,k=0,U=[],X=Number.MAX_VALUE,H=0,N=0,z=0,L,G=[],V=[],Y=null;if(n>0){for(L=0;L<o;L++){if(w=h.charCodeAt(L),w===10){Y!==null&&(G.push({word:Y.word,i:Y.i,x:Y.x*D,y:Y.y*I,w:Y.w*D,h:Y.h*I,cr:!0}),Y=null),E=0,S+=m+P,B=null;continue}if(R=v[w],!!R){if(B!==null)var W=R.kerning[k];w===r?Y!==null&&(G.push({word:Y.word,i:Y.i,x:Y.x*D,y:Y.y*I,w:Y.w*D,h:Y.h*I,cr:!1}),Y=null):(Y===null&&(Y={word:"",i:L,x:E,y:S,w:0,h:m,cr:!1}),Y.word=Y.word.concat(h[L]),Y.w+=R.xOffset+R.xAdvance+(W!==void 0?W:0)),E+=R.xAdvance+y,B=R,k=w}}Y!==null&&G.push({word:Y.word,i:Y.i,x:Y.x*D,y:Y.y*I,w:Y.w*D,h:Y.h*I,cr:!1}),E=0,S=0,B=null,k=0;var $,K=0,j=[];for(L=0;L<G.length;L++){var J=G[L],q=J.x,_=J.x+J.w;if($){var et=q-($.x+$.w);K=q-(et+$.w),$=null}var tt=q-K,rt=_-K;tt>n||rt>n?(j.push(J.i-1),J.cr?(j.push(J.i+J.word.length),K=0,$=null):$=J):J.cr&&(j.push(J.i+J.word.length),K=0,$=null)}var ft=function(Z,Q,nt){return Z.substr(0,Q)+nt+Z.substr(Q+1)};for(L=j.length-1;L>=0;L--)h=ft(h,j[L],`
`);u.wrappedText=h,o=h.length,G=[],Y=null}var vt=0;for(L=0;L<o;L++){if(w=h.charCodeAt(L),w===10){Y!==null&&(G.push({word:Y.word,i:Y.i,x:Y.x*D,y:Y.y*I,w:Y.w*D,h:Y.h*I}),Y=null),E=0,S+=m+P,B=null,U[N]=z,z>H&&(H=z),z<X&&(X=z),N++,z=0;continue}if(R=v[w],!!R){if(O=E,F=S,B!==null){var ct=R.kerning[k];O+=ct!==void 0?ct:0}f>O&&(f=O),a>F&&(a=F);var st=O+R.xAdvance,dt=F+m;c<st&&(c=st),p<dt&&(p=dt);var ut=R.xOffset+R.xAdvance+(ct!==void 0?ct:0);w===r?Y!==null&&(G.push({word:Y.word,i:Y.i,x:Y.x*D,y:Y.y*I,w:Y.w*D,h:Y.h*I}),Y=null):(Y===null&&(Y={word:"",i:vt,x:E,y:S,w:0,h:m}),Y.word=Y.word.concat(h[L]),Y.w+=ut),V.push({i:vt,idx:L,char:h[L],code:w,x:(R.xOffset+O)*b,y:(R.yOffset+S)*b,w:R.width*b,h:R.height*b,t:S*b,r:st*b,b:m*b,line:N,glyph:R}),E+=R.xAdvance+y+(ct!==void 0?ct:0),B=R,k=w,z=st*b,vt++}}if(Y!==null&&G.push({word:Y.word,i:Y.i,x:Y.x*D,y:Y.y*I,w:Y.w*D,h:Y.h*I}),U[N]=z,z>H&&(H=z),z<X&&(X=z),A>0)for(var Ct=0;Ct<V.length;Ct++){var Tt=V[Ct];if(A===1){var Xt=(H-U[Tt.line])/2;Tt.x+=Xt,Tt.r+=Xt}else if(A===2){var Bt=H-U[Tt.line];Tt.x+=Bt,Tt.r+=Bt}}var Ot=u.local,yt=u.global,Gt=u.lines;return Ot.x=f*b,Ot.y=a*b,Ot.width=c*b,Ot.height=p*b,yt.x=e.x-e._displayOriginX+f*D,yt.y=e.y-e._displayOriginY+a*I,yt.width=c*D,yt.height=p*I,Gt.shortest=X,Gt.longest=H,Gt.lengths=U,d&&(Ot.x=Math.ceil(Ot.x),Ot.y=Math.ceil(Ot.y),Ot.width=Math.ceil(Ot.width),Ot.height=Math.ceil(Ot.height),yt.x=Math.ceil(yt.x),yt.y=Math.ceil(yt.y),yt.width=Math.ceil(yt.width),yt.height=Math.ceil(yt.height),Gt.shortest=Math.ceil(X),Gt.longest=Math.ceil(H)),x&&(e._displayOriginX=e.originX*Ot.width,e._displayOriginY=e.originY*Ot.height,yt.x=e.x-e._displayOriginX*e.scaleX,yt.y=e.y-e._displayOriginY*e.scaleY,d&&(yt.x=Math.ceil(yt.x),yt.y=Math.ceil(yt.y))),u.words=G,u.characters=V,u.lines.height=m,u.scale=b,u.scaleX=e.scaleX,u.scaleY=e.scaleY,u};l.exports=T},68298:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(31476),x=function(u,h,o,n,r,f,a){var c=u.sys.textures.get(o),p=c.get(n),v=u.sys.cache.xml.get(r);if(p&&v){var m=d(v,p,f,a,c);return u.sys.cache.bitmapFont.add(h,{data:m,texture:o,frame:n,fromAtlas:!0}),!0}else return!1};l.exports=x},39860:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(10850),x=function(u,h){var o=h.width,n=h.height,r=Math.floor(o/2),f=Math.floor(n/2),a=d(h,"chars","");if(a!==""){var c=d(h,"image",""),p=u.sys.textures.getFrame(c),v=p.cutX,m=p.cutY,y=p.source.width,P=p.source.height,E=d(h,"offset.x",0),S=d(h,"offset.y",0),w=d(h,"spacing.x",0),R=d(h,"spacing.y",0),A=d(h,"lineSpacing",0),O=d(h,"charsPerRow",null);O===null&&(O=y/o,O>a.length&&(O=a.length));for(var F=E,b=S,D={retroFont:!0,font:c,size:o,lineHeight:n+A,chars:{}},I=0,B=0;B<a.length;B++){var k=a.charCodeAt(B),U=(v+F)/y,X=(m+b)/P,H=(v+F+o)/y,N=(m+b+n)/P;D.chars[k]={x:F,y:b,width:o,height:n,centerX:r,centerY:f,xOffset:0,yOffset:0,xAdvance:o,data:{},kerning:{},u0:U,v0:X,u1:H,v1:N},I++,I===O?(I=0,F=E,b+=n+R):F+=o+w}var z={data:D,frame:null,texture:c};return z}};l.exports=x},31476:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(d,x){return parseInt(d.getAttribute(x),10)}var e=function(d,x,u,h,o){u===void 0&&(u=0),h===void 0&&(h=0);var n=x.cutX,r=x.cutY,f=x.source.width,a=x.source.height,c=x.sourceIndex,p={},v=d.getElementsByTagName("info")[0],m=d.getElementsByTagName("common")[0];p.font=v.getAttribute("face"),p.size=T(v,"size"),p.lineHeight=T(m,"lineHeight")+h,p.chars={};var y=d.getElementsByTagName("char"),P=x!==void 0&&x.trimmed;if(P)var E=x.height,S=x.width;for(var w=0;w<y.length;w++){var R=y[w],A=T(R,"id"),O=String.fromCharCode(A),F=T(R,"x"),b=T(R,"y"),D=T(R,"width"),I=T(R,"height");P&&(F<S&&(S=F),b<E&&(E=b)),P&&E!==0&&S!==0&&(F-=x.x,b-=x.y);var B=(n+F)/f,k=(r+b)/a,U=(n+F+D)/f,X=(r+b+I)/a;if(p.chars[A]={x:F,y:b,width:D,height:I,centerX:Math.floor(D/2),centerY:Math.floor(I/2),xOffset:T(R,"xoffset"),yOffset:T(R,"yoffset"),xAdvance:T(R,"xadvance")+u,data:{},kerning:{},u0:B,v0:k,u1:U,v1:X},o&&D!==0&&I!==0){var H=o.add(O,c,F,b,D,I);H&&H.setUVs(D,I,B,k,U,X)}}var N=d.getElementsByTagName("kerning");for(w=0;w<N.length;w++){var z=N[w],L=T(z,"first"),G=T(z,"second"),V=T(z,"amount");p.chars[G].kerning[L]=V}return p};l.exports=e},55873:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66863),x=e(98611),u={Parse:e(39860)};u=x(!1,u,d),l.exports=u},66863:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};l.exports=T},13468:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(44616),x=e(56694),u=e(88899),h=new x({Extends:d,Mixins:[u],initialize:function(n,r,f,a,c,p,v){d.call(this,n,r,f,a,c,p,v),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(o,n){return this.cropWidth=o,this.cropHeight=n,this},setDisplayCallback:function(o){return this.displayCallback=o,this},setScrollX:function(o){return this.scrollX=o,this},setScrollY:function(o){return this.scrollY=o,this}});l.exports=h},93438:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(49584),x=function(u,h,o,n){var r=h._text,f=r.length,a=u.currentContext;if(!(f===0||!d(u,a,h,o,n))){o.addToRenderList(h);var c=h.fromAtlas?h.frame:h.texture.frames.__BASE,p=h.displayCallback,v=h.callbackData,m=h.fontData.chars,y=h.fontData.lineHeight,P=h._letterSpacing,E=0,S=0,w=0,R=null,A=0,O=0,F=0,b=0,D=0,I=0,B=null,k=0,U=h.frame.source.image,X=c.cutX,H=c.cutY,N=0,z=0,L=h._fontSize/h.fontData.size,G=h._align,V=0,Y=0;h.getTextBounds(!1);var W=h._bounds.lines;G===1?Y=(W.longest-W.lengths[0])/2:G===2&&(Y=W.longest-W.lengths[0]),a.translate(-h.displayOriginX,-h.displayOriginY);var $=o.roundPixels;h.cropWidth>0&&h.cropHeight>0&&(a.beginPath(),a.rect(0,0,h.cropWidth,h.cropHeight),a.clip());for(var K=0;K<f;K++){if(z=L,N=0,w=r.charCodeAt(K),w===10){V++,G===1?Y=(W.longest-W.lengths[V])/2:G===2&&(Y=W.longest-W.lengths[V]),E=0,S+=y,B=null;continue}if(R=m[w],!!R){if(A=X+R.x,O=H+R.y,F=R.width,b=R.height,D=R.xOffset+E-h.scrollX,I=R.yOffset+S-h.scrollY,B!==null){var j=R.kerning[k];D+=j!==void 0?j:0}if(p){v.index=K,v.charCode=w,v.x=D,v.y=I,v.scale=z,v.rotation=N,v.data=R.data;var J=p(v);D=J.x,I=J.y,z=J.scale,N=J.rotation}D*=z,I*=z,D+=Y,E+=R.xAdvance+P+(j!==void 0?j:0),B=R,k=w,!(F===0||b===0||w===32)&&($&&(D=Math.round(D),I=Math.round(I)),a.save(),a.translate(D,I),a.rotate(N),a.scale(z,z),a.drawImage(U,A,O,F,b,0,0,F,b),a.restore())}}a.restore()}};l.exports=x},67513:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(13468),x=e(88933),u=e(99325),h=e(20494);u.register("dynamicBitmapText",function(o,n){o===void 0&&(o={});var r=h(o,"font",""),f=h(o,"text",""),a=h(o,"size",!1),c=new d(this.scene,0,0,r,f,a);return n!==void 0&&(o.add=n),x(this.scene,c,o),c})},94145:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(13468),x=e(61286);x.register("dynamicBitmapText",function(u,h,o,n,r){return this.displayList.add(new d(this.scene,u,h,o,n,r))})},88899:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(16873),u=e(93438),l.exports={renderWebGL:x,renderCanvas:u}},16873:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=e(69360),u=e(75512),h=new x,o=function(n,r,f,a){var c=r.text,p=c.length;if(p!==0){f.addToRenderList(r);var v=n.pipelines.set(r.pipeline,r),m=d(r,f,a);n.pipelines.preBatch(r);var y=m.sprite,P=m.calc,E=h,S=r.cropWidth>0||r.cropHeight>0;S&&(v.flush(),n.pushScissor(P.tx,P.ty,r.cropWidth*P.scaleX,r.cropHeight*P.scaleY));var w=r.frame,R=w.glTexture,A=r.tintFill,O=u.getTintAppendFloatAlpha(r.tintTopLeft,f.alpha*r._alphaTL),F=u.getTintAppendFloatAlpha(r.tintTopRight,f.alpha*r._alphaTR),b=u.getTintAppendFloatAlpha(r.tintBottomLeft,f.alpha*r._alphaBL),D=u.getTintAppendFloatAlpha(r.tintBottomRight,f.alpha*r._alphaBR),I=v.setGameObject(r),B=0,k=0,U=0,X=0,H=r.letterSpacing,N,z=0,L=0,G,V=r.scrollX,Y=r.scrollY,W=r.fontData,$=W.chars,K=W.lineHeight,j=r.fontSize/W.size,J=0,q=r._align,_=0,et=0,tt=r.getTextBounds(!1);r.maxWidth>0&&(c=tt.wrappedText,p=c.length);var rt=r._bounds.lines;q===1?et=(rt.longest-rt.lengths[0])/2:q===2&&(et=rt.longest-rt.lengths[0]);for(var ft=f.roundPixels,vt=r.displayCallback,ct=r.callbackData,st=0;st<p;st++){if(U=c.charCodeAt(st),U===10){_++,q===1?et=(rt.longest-rt.lengths[_])/2:q===2&&(et=rt.longest-rt.lengths[_]),B=0,k+=K,G=null;continue}if(N=$[U],!!N){z=N.width,L=N.height;var dt=N.xOffset+B-V,ut=N.yOffset+k-Y;if(G!==null){var Ct=N.kerning[X];dt+=Ct!==void 0?Ct:0}if(B+=N.xAdvance+H,G=N,X=U,!(z===0||L===0||U===32)){if(j=r.fontSize/r.fontData.size,J=0,vt){ct.color=0,ct.tint.topLeft=O,ct.tint.topRight=F,ct.tint.bottomLeft=b,ct.tint.bottomRight=D,ct.index=st,ct.charCode=U,ct.x=dt,ct.y=ut,ct.scale=j,ct.rotation=J,ct.data=N.data;var Tt=vt(ct);dt=Tt.x,ut=Tt.y,j=Tt.scale,J=Tt.rotation,Tt.color?(O=Tt.color,F=Tt.color,b=Tt.color,D=Tt.color):(O=Tt.tint.topLeft,F=Tt.tint.topRight,b=Tt.tint.bottomLeft,D=Tt.tint.bottomRight),O=u.getTintAppendFloatAlpha(O,f.alpha*r._alphaTL),F=u.getTintAppendFloatAlpha(F,f.alpha*r._alphaTR),b=u.getTintAppendFloatAlpha(b,f.alpha*r._alphaBL),D=u.getTintAppendFloatAlpha(D,f.alpha*r._alphaBR)}dt*=j,ut*=j,dt-=r.displayOriginX,ut-=r.displayOriginY,dt+=et,E.applyITRS(dt,ut,J,j,j),P.multiply(E,y);var Xt=N.u0,Bt=N.v0,Ot=N.u1,yt=N.v1,Gt=z,Z=L,Q=y.e,nt=y.f,it=Z*y.c+y.e,lt=Z*y.d+y.f,pt=Gt*y.a+Z*y.c+y.e,mt=Gt*y.b+Z*y.d+y.f,Et=Gt*y.a+y.e,wt=Gt*y.b+y.f;ft&&(Q=Math.round(Q),nt=Math.round(nt),it=Math.round(it),lt=Math.round(lt),pt=Math.round(pt),mt=Math.round(mt),Et=Math.round(Et),wt=Math.round(wt)),v.batchQuad(r,Q,nt,it,lt,pt,mt,Et,wt,Xt,Bt,Ot,yt,O,F,b,D,A,R,I)}}}S&&(v.flush(),n.popScissor()),n.pipelines.postBatch(r)}};l.exports=o},44616:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(82897),u=e(64937),h=e(89980),o=e(82173),n=e(68298),r=e(31476),f=e(74118),a=e(84557),c=new d({Extends:h,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Texture,u.Tint,u.Transform,u.Visible,a],initialize:function(v,m,y,P,E,S,w){E===void 0&&(E=""),w===void 0&&(w=0),h.call(this,v,"BitmapText"),this.font=P;var R=this.scene.sys.cache.bitmapFont.get(P);R||console.warn("Invalid BitmapText key: "+P),this.fontData=R.data,this._text="",this._fontSize=S||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=w,this._bounds=o(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=R.fromAtlas,this.setTexture(R.texture,R.frame),this.setPosition(m,y),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(E)},setLeftAlign:function(){return this._align=c.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=c.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=c.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(p){return this._fontSize=p,this._dirty=!0,this},setLetterSpacing:function(p){return p===void 0&&(p=0),this._letterSpacing=p,this._dirty=!0,this},setLineSpacing:function(p){return p===void 0&&(p=0),this.lineSpacing=p,this},setText:function(p){return!p&&p!==0&&(p=""),Array.isArray(p)&&(p=p.join(`
`)),p!==this.text&&(this._text=p.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(p,v,m,y){return p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=0),y===void 0&&(y=.5),this.dropShadowX=p,this.dropShadowY=v,this.dropShadowColor=m,this.dropShadowAlpha=y,this},setCharacterTint:function(p,v,m,y,P,E,S){p===void 0&&(p=0),v===void 0&&(v=1),m===void 0&&(m=!1),y===void 0&&(y=-1),P===void 0&&(P=y,E=y,S=y);var w=this.text.length;v===-1&&(v=w),p<0&&(p=w+p),p=x(p,0,w-1);for(var R=x(p+v,p,w),A=this.charColors,O=p;O<R;O++){var F=A[O];if(y===-1)A[O]=null;else{var b=m?1:0;F?(F.tintEffect=b,F.tintTL=y,F.tintTR=P,F.tintBL=E,F.tintBR=S):A[O]={tintEffect:b,tintTL:y,tintTR:P,tintBL:E,tintBR:S}}}return this},setWordTint:function(p,v,m,y,P,E,S){v===void 0&&(v=1);for(var w=this.getTextBounds(),R=w.words,A=typeof p=="number",O=0,F=0;F<R.length;F++){var b=R[F];if((A&&F===p||!A&&b.word===p)&&(this.setCharacterTint(b.i,b.word.length,m,y,P,E,S),O++,O===v))return this}return this},getTextBounds:function(p){var v=this._bounds;return(this._dirty||p||this.scaleX!==v.scaleX||this.scaleY!==v.scaleY)&&(o(this,p,!0,v),this._dirty=!1),v},getCharacterAt:function(p,v,m){for(var y=this.getLocalPoint(p,v,null,m),P=this.getTextBounds(),E=P.characters,S=new f,w=0;w<E.length;w++){var R=E[w];if(S.setTo(R.x,R.t,R.r-R.x,R.b),S.contains(y.x,y.y))return R}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(p,v,m){if(v===void 0&&(v=this._fontSize),m===void 0&&(m=this._align),p!==this.font){var y=this.scene.sys.cache.bitmapFont.get(p);y&&(this.font=p,this.fontData=y.data,this._fontSize=v,this._align=m,this.fromAtlas=y.fromAtlas===!0,this.setTexture(y.texture,y.frame),o(this,!1,!0,this._bounds))}return this},setMaxWidth:function(p,v){return this._maxWidth=p,this._dirty=!0,v!==void 0&&(this.wordWrapCharCode=v),this},align:{set:function(p){this._align=p,this._dirty=!0},get:function(){return this._align}},text:{set:function(p){this.setText(p)},get:function(){return this._text}},fontSize:{set:function(p){this._fontSize=p,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(p){this._letterSpacing=p,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(p){this._lineSpacing=p,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(p){this._maxWidth=p,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{get:function(){return this.width}},displayHeight:{get:function(){return this.height}},toJSON:function(){var p=u.ToJSON(this),v={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return p.data=v,p},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});c.ALIGN_LEFT=0,c.ALIGN_CENTER=1,c.ALIGN_RIGHT=2,c.ParseFromAtlas=n,c.ParseXMLBitmapFont=r,l.exports=c},97545:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(49584),x=function(u,h,o,n){var r=h._text,f=r.length,a=u.currentContext;if(!(f===0||!d(u,a,h,o,n))){o.addToRenderList(h);var c=h.fromAtlas?h.frame:h.texture.frames.__BASE,p=h.fontData.chars,v=h.fontData.lineHeight,m=h._letterSpacing,y=h._lineSpacing,P=0,E=0,S=0,w=null,R=0,A=0,O=0,F=0,b=0,D=0,I=null,B=0,k=c.source.image,U=c.cutX,X=c.cutY,H=h._fontSize/h.fontData.size,N=h._align,z=0,L=0,G=h.getTextBounds(!1);h.maxWidth>0&&(r=G.wrappedText,f=r.length);var V=h._bounds.lines;N===1?L=(V.longest-V.lengths[0])/2:N===2&&(L=V.longest-V.lengths[0]),a.translate(-h.displayOriginX,-h.displayOriginY);for(var Y=o.roundPixels,W=0;W<f;W++){if(S=r.charCodeAt(W),S===10){z++,N===1?L=(V.longest-V.lengths[z])/2:N===2&&(L=V.longest-V.lengths[z]),P=0,E+=v+y,I=null;continue}if(w=p[S],!!w){if(R=U+w.x,A=X+w.y,O=w.width,F=w.height,b=w.xOffset+P,D=w.yOffset+E,I!==null){var $=w.kerning[B];b+=$!==void 0?$:0}b*=H,D*=H,b+=L,P+=w.xAdvance+m+($!==void 0?$:0),I=w,B=S,!(O===0||F===0||S===32)&&(Y&&(b=Math.round(b),D=Math.round(D)),a.save(),a.translate(b,D),a.scale(H,H),a.drawImage(k,R,A,O,F,0,0,O,F),a.restore())}}a.restore()}};l.exports=x},95499:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(44616),x=e(88933),u=e(99325),h=e(20494),o=e(10850);u.register("bitmapText",function(n,r){n===void 0&&(n={});var f=o(n,"font",""),a=h(n,"text",""),c=h(n,"size",!1),p=o(n,"align",0),v=new d(this.scene,0,0,f,a,c,p);return r!==void 0&&(n.add=r),x(this.scene,v,n),v})},21797:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(44616),x=e(61286);x.register("bitmapText",function(u,h,o,n,r,f){return this.displayList.add(new d(this.scene,u,h,o,n,r,f))})},84557:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(26372),u=e(97545),l.exports={renderWebGL:x,renderCanvas:u}},26372:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(8810),x=e(73329),u=e(75512),h=function(o,n,r,f){var a=n._text,c=a.length;if(c!==0){r.addToRenderList(n);var p=o.pipelines.set(n.pipeline,n),v=x(n,r,f).calc;o.pipelines.preBatch(n);var m=r.roundPixels,y=r.alpha,P=n.charColors,E=n.tintFill,S=u.getTintAppendFloatAlpha,w=S(n.tintTopLeft,y*n._alphaTL),R=S(n.tintTopRight,y*n._alphaTR),A=S(n.tintBottomLeft,y*n._alphaBL),O=S(n.tintBottomRight,y*n._alphaBR),F=n.frame.glTexture,b=p.setGameObject(n),D=n.getTextBounds(!1),I,B,k,U=D.characters,X=n.dropShadowX,H=n.dropShadowY,N=X!==0||H!==0;if(N){var z=n.dropShadowColor,L=n.dropShadowAlpha,G=S(z,y*L*n._alphaTL),V=S(z,y*L*n._alphaTR),Y=S(z,y*L*n._alphaBL),W=S(z,y*L*n._alphaBR);for(I=0;I<U.length;I++)B=U[I],k=B.glyph,!(B.code===32||k.width===0||k.height===0)&&d(p,n,B,k,X,H,v,m,G,V,Y,W,1,F,b)}for(I=0;I<U.length;I++)if(B=U[I],k=B.glyph,!(B.code===32||k.width===0||k.height===0))if(P[B.i]){var $=P[B.i],K=$.tintEffect,j=S($.tintTL,y*n._alphaTL),J=S($.tintTR,y*n._alphaTR),q=S($.tintBL,y*n._alphaBL),_=S($.tintBR,y*n._alphaBR);d(p,n,B,k,0,0,v,m,j,J,q,_,K,F,b)}else d(p,n,B,k,0,0,v,m,w,R,A,O,E,F,b);o.pipelines.postBatch(n)}};l.exports=h},52816:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(92246),x=e(41664),u=e(56694),h=e(64937),o=e(82047),n=e(89980),r=e(71207),f=new u({Extends:n,Mixins:[h.Alpha,h.BlendMode,h.Depth,h.Mask,h.Pipeline,h.PostPipeline,h.ScrollFactor,h.Size,h.Texture,h.Transform,h.Visible,d],initialize:function(c,p,v,m,y){n.call(this,c,"Blitter"),this.setTexture(m,y),this.setPosition(p,v),this.initPipeline(),this.initPostPipeline(),this.children=new r,this.renderList=[],this.dirty=!1},create:function(a,c,p,v,m){v===void 0&&(v=!0),m===void 0&&(m=this.children.length),p===void 0?p=this.frame:p instanceof o||(p=this.texture.get(p));var y=new x(this,a,c,p,v);return this.children.addAt(y,m,!1),this.dirty=!0,y},createFromCallback:function(a,c,p,v){for(var m=this.createMultiple(c,p,v),y=0;y<m.length;y++){var P=m[y];a.call(this,P,y)}return m},createMultiple:function(a,c,p){c===void 0&&(c=this.frame.name),p===void 0&&(p=!0),Array.isArray(c)||(c=[c]);var v=[],m=this;return c.forEach(function(y){for(var P=0;P<a;P++)v.push(m.create(0,0,y,p))}),v},childCanRender:function(a){return a.visible&&a.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});l.exports=f},33177:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){var h=d.getRenderList();if(h.length!==0){var o=e.currentContext,n=x.alpha*d.alpha;if(n!==0){x.addToRenderList(d),o.globalCompositeOperation=e.blendModes[d.blendMode],o.imageSmoothingEnabled=!d.frame.source.scaleMode;var r=d.x-x.scrollX*d.scrollFactorX,f=d.y-x.scrollY*d.scrollFactorY;o.save(),u&&u.copyToContext(o);for(var a=x.roundPixels,c=0;c<h.length;c++){var p=h[c],v=p.flipX||p.flipY,m=p.frame,y=m.canvasData,P=m.x,E=m.y,S=1,w=1,R=p.alpha*n;R!==0&&(o.globalAlpha=R,v?(p.flipX&&(S=-1,P-=y.width),p.flipY&&(w=-1,E-=y.height),y.width>0&&y.height>0&&(o.save(),o.translate(p.x+r,p.y+f),o.scale(S,w),o.drawImage(m.source.image,y.x,y.y,y.width,y.height,P,E,y.width,y.height),o.restore())):(a&&(P=Math.round(P),E=Math.round(E)),y.width>0&&y.height>0&&o.drawImage(m.source.image,y.x,y.y,y.width,y.height,P+p.x+r,E+p.y+f,y.width,y.height)))}o.restore()}}};l.exports=T},68452:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(52816),x=e(88933),u=e(99325),h=e(20494);u.register("blitter",function(o,n){o===void 0&&(o={});var r=h(o,"key",null),f=h(o,"frame",null),a=new d(this.scene,0,0,r,f);return n!==void 0&&(o.add=n),x(this.scene,a,o),a})},38906:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(52816),x=e(61286);x.register("blitter",function(u,h,o,n){return this.displayList.add(new d(this.scene,u,h,o,n))})},92246:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(89165),u=e(33177),l.exports={renderWebGL:x,renderCanvas:u}},89165:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(69360),x=e(75512),u=new d,h=function(o,n,r,f){var a=n.getRenderList(),c=r.alpha*n.alpha;if(!(a.length===0||c===0)){r.addToRenderList(n);var p=o.pipelines.set(this.pipeline,n),v=r.scrollX*n.scrollFactorX,m=r.scrollY*n.scrollFactorY,y=u.copyFrom(r.matrix);f&&(y.multiplyWithOffset(f,-v,-m),v=0,m=0);var P=n.x-v,E=n.y-m,S=-1,w=!1,R=r.roundPixels;o.pipelines.preBatch(n);for(var A=0;A<a.length;A++){var O=a[A],F=O.frame,b=O.alpha*c;if(b!==0){var D=F.width,I=F.height,B=P+O.x+F.x,k=E+O.y+F.y;O.flipX&&(D*=-1,B+=F.width),O.flipY&&(I*=-1,k+=F.height);var U=y.setQuad(B,k,B+D,k+I,R),X=x.getTintAppendFloatAlpha(O.tint,b);if(F.sourceIndex!==S){var H=p.setGameObject(n,F);S=F.sourceIndex}p.batchQuad(n,U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],F.u0,F.v0,F.u1,F.v1,X,X,X,X,w,F.glTexture,H)&&(S=-1)}}o.pipelines.postBatch(n)}};l.exports=h},41664:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(82047),u=new d({initialize:function(o,n,r,f,a){this.parent=o,this.x=n,this.y=r,this.frame=f,this.data={},this.tint=16777215,this._visible=a,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(h){return h===void 0?this.frame=this.parent.frame:h instanceof x&&h.texture===this.parent.texture?this.frame=h:this.frame=this.parent.texture.get(h),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(h,o,n){return this.x=h,this.y=o,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,n&&this.setFrame(n),this},setPosition:function(h,o){return this.x=h,this.y=o,this},setFlipX:function(h){return this.flipX=h,this},setFlipY:function(h){return this.flipY=h,this},setFlip:function(h,o){return this.flipX=h,this.flipY=o,this},setVisible:function(h){return this.visible=h,this},setAlpha:function(h){return this.alpha=h,this},setTint:function(h){return this.tint=h,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(h){this.parent.dirty|=this._visible!==h,this._visible=h}},alpha:{get:function(){return this._alpha},set:function(h){this.parent.dirty|=this._alpha>0!=h>0,this._alpha=h}}});l.exports=u},97123:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),x=2,u={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(h,o,n,r){return h===void 0&&(h=1),o===void 0?this.alpha=h:(this._alphaTL=d(h,0,1),this._alphaTR=d(o,0,1),this._alphaBL=d(n,0,1),this._alphaBR=d(r,0,1)),this},alpha:{get:function(){return this._alpha},set:function(h){var o=d(h,0,1);this._alpha=o,this._alphaTL=o,this._alphaTR=o,this._alphaBL=o,this._alphaBR=o,o===0?this.renderFlags&=~x:this.renderFlags|=x}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(h){var o=d(h,0,1);this._alphaTL=o,o!==0&&(this.renderFlags|=x)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(h){var o=d(h,0,1);this._alphaTR=o,o!==0&&(this.renderFlags|=x)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(h){var o=d(h,0,1);this._alphaBL=o,o!==0&&(this.renderFlags|=x)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(h){var o=d(h,0,1);this._alphaBR=o,o!==0&&(this.renderFlags|=x)}}};l.exports=u},15720:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),x=2,u={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(h){return h===void 0&&(h=1),this.alpha=h,this},alpha:{get:function(){return this._alpha},set:function(h){var o=d(h,0,1);this._alpha=o,o===0?this.renderFlags&=~x:this.renderFlags|=x}}};l.exports=u},69732:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(95723),x={_blendMode:d.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(u){typeof u=="string"&&(u=d[u]),u|=0,u>=-1&&(this._blendMode=u)}},setBlendMode:function(u){return this.blendMode=u,this}};l.exports=x},28284:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,d){return this.width=e,this.height=d,this},setDisplaySize:function(e,d){return this.displayWidth=e,this.displayHeight=d,this}};l.exports=T},85293:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={texture:null,frame:null,isCropped:!1,setCrop:function(e,d,x,u){if(e===void 0)this.isCropped=!1;else if(this.frame){if(typeof e=="number")this.frame.setCropUVs(this._crop,e,d,x,u,this.flipX,this.flipY);else{var h=e;this.frame.setCropUVs(this._crop,h.x,h.y,h.width,h.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};l.exports=T},14975:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={_depth:0,depth:{get:function(){return this._depth},set:function(e){this.displayList&&this.displayList.queueDepthSort(),this._depth=e}},setDepth:function(e){return e===void 0&&(e=0),this.depth=e,this}};l.exports=T},88677:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(96910),u=e(72677),h=new d({initialize:function(n,r){this.gameObject=n,this.isPost=r,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(o){return o===void 0&&(o=0),this.padding=o,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(o){if(!this.isPost){var n=this.gameObject.scene.sys.renderer;n&&n.pipelines?(this.gameObject.pipeline=n.pipelines.FX_PIPELINE,o!==void 0&&(this.padding=o),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var o=this.list,n=0;n<o.length;n++)o[n].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(o){var n;if(this.isPost){var r=this.gameObject.getPostPipeline(String(o.type));for(Array.isArray(r)||(r=[r]),n=0;n<r.length;n++){var f=r[n];if(f.controller===o){this.gameObject.removePostPipeline(f),o.destroy();break}}}else{var a=this.list;for(n=0;n<a.length;n++)a[n]===o&&(u(a,n),o.destroy())}return this.gameObject},disable:function(o){return o===void 0&&(o=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,o&&this.clear(),this.gameObject},add:function(o,n){if(this.isPost){var r=String(o.type);this.gameObject.setPostPipeline(r,n);var f=this.gameObject.getPostPipeline(r);if(f)return Array.isArray(f)&&(f=f.pop()),f.controller=o,o}else return this.enabled||this.enable(),this.list.push(o),o},addGlow:function(o,n,r,f,a,c){return this.add(new x.Glow(this.gameObject,o,n,r,f),{quality:a,distance:c})},addShadow:function(o,n,r,f,a,c,p){return this.add(new x.Shadow(this.gameObject,o,n,r,f,a,c,p))},addPixelate:function(o){return this.add(new x.Pixelate(this.gameObject,o))},addVignette:function(o,n,r,f){return this.add(new x.Vignette(this.gameObject,o,n,r,f))},addShine:function(o,n,r,f){return this.add(new x.Shine(this.gameObject,o,n,r,f))},addBlur:function(o,n,r,f,a,c){return this.add(new x.Blur(this.gameObject,o,n,r,f,a,c))},addGradient:function(o,n,r,f,a,c,p,v){return this.add(new x.Gradient(this.gameObject,o,n,r,f,a,c,p,v))},addBloom:function(o,n,r,f,a,c){return this.add(new x.Bloom(this.gameObject,o,n,r,f,a,c))},addColorMatrix:function(){return this.add(new x.ColorMatrix(this.gameObject))},addCircle:function(o,n,r,f,a){return this.add(new x.Circle(this.gameObject,o,n,r,f,a))},addBarrel:function(o){return this.add(new x.Barrel(this.gameObject,o))},addDisplacement:function(o,n,r){return this.add(new x.Displacement(this.gameObject,o,n,r))},addWipe:function(o,n,r){return this.add(new x.Wipe(this.gameObject,o,n,r))},addReveal:function(o,n,r){return this.add(new x.Wipe(this.gameObject,o,n,r,!0))},addBokeh:function(o,n,r){return this.add(new x.Bokeh(this.gameObject,o,n,r))},addTiltShift:function(o,n,r,f,a,c){return this.add(new x.Bokeh(this.gameObject,o,n,r,!0,f,a,c))},destroy:function(){this.clear(),this.gameObject=null}});l.exports=h},92972:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(e){return this.flipX=e,this},setFlipY:function(e){return this.flipY=e,this},setFlip:function(e,d){return this.flipX=e,this.flipY=d,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};l.exports=T},80693:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),x=e(2386),u=e(93736),h={prepareBoundsOutput:function(o,n){if(n===void 0&&(n=!1),this.rotation!==0&&x(o,this.x,this.y,this.rotation),n&&this.parentContainer){var r=this.parentContainer.getBoundsTransformMatrix();r.transformPoint(o.x,o.y,o)}return o},getCenter:function(o,n){return o===void 0&&(o=new u),o.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,o.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(o,n)},getTopLeft:function(o,n){return o||(o=new u),o.x=this.x-this.displayWidth*this.originX,o.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(o,n)},getTopCenter:function(o,n){return o||(o=new u),o.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,o.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(o,n)},getTopRight:function(o,n){return o||(o=new u),o.x=this.x-this.displayWidth*this.originX+this.displayWidth,o.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(o,n)},getLeftCenter:function(o,n){return o||(o=new u),o.x=this.x-this.displayWidth*this.originX,o.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(o,n)},getRightCenter:function(o,n){return o||(o=new u),o.x=this.x-this.displayWidth*this.originX+this.displayWidth,o.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(o,n)},getBottomLeft:function(o,n){return o||(o=new u),o.x=this.x-this.displayWidth*this.originX,o.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(o,n)},getBottomCenter:function(o,n){return o||(o=new u),o.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,o.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(o,n)},getBottomRight:function(o,n){return o||(o=new u),o.x=this.x-this.displayWidth*this.originX+this.displayWidth,o.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(o,n)},getBounds:function(o){o===void 0&&(o=new d);var n,r,f,a,c,p,v,m;if(this.parentContainer){var y=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(o),y.transformPoint(o.x,o.y,o),n=o.x,r=o.y,this.getTopRight(o),y.transformPoint(o.x,o.y,o),f=o.x,a=o.y,this.getBottomLeft(o),y.transformPoint(o.x,o.y,o),c=o.x,p=o.y,this.getBottomRight(o),y.transformPoint(o.x,o.y,o),v=o.x,m=o.y}else this.getTopLeft(o),n=o.x,r=o.y,this.getTopRight(o),f=o.x,a=o.y,this.getBottomLeft(o),c=o.x,p=o.y,this.getBottomRight(o),v=o.x,m=o.y;return o.x=Math.min(n,f,c,v),o.y=Math.min(r,a,p,m),o.width=Math.max(n,f,c,v)-o.x,o.height=Math.max(r,a,p,m)-o.y,o}};l.exports=h},39171:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(76756),x=e(63037),u={mask:null,setMask:function(h){return this.mask=h,this},clearMask:function(h){return h===void 0&&(h=!1),h&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(h,o,n,r,f){return h===void 0&&(this.texture||this.shader||this.geom)&&(h=this),new d(this.scene,h,o,n,r,f)},createGeometryMask:function(h){return h===void 0&&(this.type==="Graphics"||this.geom)&&(h=this),new x(this.scene,h)}};l.exports=u},28072:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(e){this._displayOriginX=e,this.originX=e/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(e){this._displayOriginY=e,this.originY=e/this.height}},setOrigin:function(e,d){return e===void 0&&(e=.5),d===void 0&&(d=e),this.originX=e,this.originY=d,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(e,d){return e===void 0&&(e=0),d===void 0&&(d=e),this.displayOriginX=e,this.displayOriginY=d,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};l.exports=T},54211:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(75606),x=e(63130),u=e(10850),h=e(55303),o=e(93736),n={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:h.PLAYING_FORWARD,setPath:function(r,f){f===void 0&&(f=this.pathConfig);var a=this.pathTween;return a&&a.isPlaying()&&a.stop(),this.path=r,f&&this.startFollow(f),this},setRotateToPath:function(r,f){return f===void 0&&(f=0),this.rotateToPath=r,this.pathRotationOffset=f,this},isFollowing:function(){var r=this.pathTween;return r&&r.isPlaying()},startFollow:function(r,f){r===void 0&&(r={}),f===void 0&&(f=0);var a=this.pathTween;a&&a.isPlaying()&&a.stop(),typeof r=="number"&&(r={duration:r}),r.from=u(r,"from",0),r.to=u(r,"to",1);var c=x(r,"positionOnPath",!1);this.rotateToPath=x(r,"rotateToPath",!1),this.pathRotationOffset=u(r,"rotationOffset",0);var p=u(r,"startAt",f);if(p&&(r.onStart=function(m){var y=m.data[0];y.progress=p,y.elapsed=y.duration*p;var P=y.ease(y.progress);y.current=y.start+(y.end-y.start)*P,y.setTargetValue()}),this.pathOffset||(this.pathOffset=new o(this.x,this.y)),this.pathVector||(this.pathVector=new o),this.pathDelta||(this.pathDelta=new o),this.pathDelta.reset(),r.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(r),this.path.getStartPoint(this.pathOffset),c&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=h.PLAYING_FORWARD,this.rotateToPath){var v=this.path.getPoint(.1);this.rotation=Math.atan2(v.y-this.y,v.x-this.x)+d(this.pathRotationOffset)}return this.pathConfig=r,this},pauseFollow:function(){var r=this.pathTween;return r&&r.isPlaying()&&r.pause(),this},resumeFollow:function(){var r=this.pathTween;return r&&r.isPaused()&&r.resume(),this},stopFollow:function(){var r=this.pathTween;return r&&r.isPlaying()&&r.stop(),this},pathUpdate:function(){var r=this.pathTween;if(r){var f=r.data[0],a=this.pathDelta,c=this.pathVector;if(a.copy(c).negate(),f.state===h.COMPLETE){this.path.getPoint(f.end,c),a.add(c),c.add(this.pathOffset),this.setPosition(c.x,c.y);return}else if(f.state!==h.PLAYING_FORWARD&&f.state!==h.PLAYING_BACKWARD)return;this.path.getPoint(r.getValue(),c),a.add(c),c.add(this.pathOffset);var p=this.x,v=this.y;this.setPosition(c.x,c.y);var m=this.x-p,y=this.y-v;if(m===0&&y===0)return;if(f.state!==this._prevDirection){this._prevDirection=f.state;return}this.rotateToPath&&(this.rotation=Math.atan2(y,m)+d(this.pathRotationOffset))}}};l.exports=n},58210:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(28699),x={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(u){this.pipelineData={};var h=this.scene.sys.renderer;if(!h)return!1;var o=h.pipelines;if(o){u===void 0&&(u=o.default);var n=o.get(u);if(n)return this.defaultPipeline=n,this.pipeline=n,!0}return!1},setPipeline:function(u,h,o){var n=this.scene.sys.renderer;if(!n)return this;var r=n.pipelines;if(r){var f=r.get(u);f&&(this.pipeline=f),h&&(this.pipelineData=o?d(h):h)}return this},setPipelineData:function(u,h){var o=this.pipelineData;return h===void 0?delete o[u]:o[u]=h,this},resetPipeline:function(u){return u===void 0&&(u=!1),this.pipeline=this.defaultPipeline,u&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline.name}};l.exports=x},44086:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(28699),x=e(88677),u=e(72677),h={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(o){this.postPipelines=[],this.postPipelineData={},this.postFX=new x(this,!0),o&&(this.preFX=new x(this,!1))},setPostPipeline:function(o,n,r){var f=this.scene.sys.renderer;if(!f)return this;var a=f.pipelines;if(a){Array.isArray(o)||(o=[o]);for(var c=0;c<o.length;c++){var p=a.getPostPipeline(o[c],this,n);p&&this.postPipelines.push(p)}n&&(this.postPipelineData=r?d(n):n)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(o,n){var r=this.postPipelineData;return n===void 0?delete r[o]:r[o]=n,this},getPostPipeline:function(o){for(var n=typeof o=="string",r=this.postPipelines,f=[],a=0;a<r.length;a++){var c=r[a];(n&&c.name===o||!n&&c instanceof o)&&f.push(c)}return f.length===1?f[0]:f},resetPostPipeline:function(o){o===void 0&&(o=!1);for(var n=this.postPipelines,r=0;r<n.length;r++)n[r].destroy();this.postPipelines=[],this.hasPostPipeline=!1,o&&(this.postPipelineData={})},removePostPipeline:function(o){for(var n=typeof o=="string",r=this.postPipelines,f=r.length-1;f>=0;f--){var a=r[f];(n&&a.name===o||!n&&a===o)&&(a.destroy(),u(r,f))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};l.exports=h},45900:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(e,d){return d===void 0&&(d=e),this.scrollFactorX=e,this.scrollFactorY=d,this}};l.exports=T},31654:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(e){this.scaleX=e/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(e){this.scaleY=e/this.frame.realHeight}},setSizeToFrame:function(e){e||(e=this.frame),this.width=e.realWidth,this.height=e.realHeight;var d=this.input;return d&&!d.customHitArea&&(d.hitArea.width=this.width,d.hitArea.height=this.height),this},setSize:function(e,d){return this.width=e,this.height=d,this},setDisplaySize:function(e,d){return this.displayWidth=e,this.displayHeight=d,this}};l.exports=T},82081:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82047),x=8,u={texture:null,frame:null,isCropped:!1,setTexture:function(h,o){return this.texture=this.scene.sys.textures.get(h),this.setFrame(o)},setFrame:function(h,o,n){return o===void 0&&(o=!0),n===void 0&&(n=!0),h instanceof d?(this.texture=this.scene.sys.textures.get(h.texture.key),this.frame=h):this.frame=this.texture.get(h),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~x:this.renderFlags|=x,this._sizeComponent&&o&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};l.exports=u},21850:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82047),x=8,u={texture:null,frame:null,isCropped:!1,setCrop:function(h,o,n,r){if(h===void 0)this.isCropped=!1;else if(this.frame){if(typeof h=="number")this.frame.setCropUVs(this._crop,h,o,n,r,this.flipX,this.flipY);else{var f=h;this.frame.setCropUVs(this._crop,f.x,f.y,f.width,f.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(h,o){return this.texture=this.scene.sys.textures.get(h),this.setFrame(o)},setFrame:function(h,o,n){return o===void 0&&(o=!0),n===void 0&&(n=!0),h instanceof d?(this.texture=this.scene.sys.textures.get(h.texture.key),this.frame=h):this.frame=this.texture.get(h),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~x:this.renderFlags|=x,this._sizeComponent&&o&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};l.exports=u},58072:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(e,d,x,u){return e===void 0&&(e=16777215),d===void 0&&(d=e,x=e,u=e),this.tintTopLeft=e,this.tintTopRight=d,this.tintBottomLeft=x,this.tintBottomRight=u,this.tintFill=!1,this},setTintFill:function(e,d,x,u){return this.setTint(e,d,x,u),this.tintFill=!0,this},tint:{set:function(e){this.setTint(e,e,e,e)}},isTinted:{get:function(){var e=16777215;return this.tintFill||this.tintTopLeft!==e||this.tintTopRight!==e||this.tintBottomLeft!==e||this.tintBottomRight!==e}}};l.exports=T},48129:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d={name:e.name,type:e.type,x:e.x,y:e.y,depth:e.depth,scale:{x:e.scaleX,y:e.scaleY},origin:{x:e.originX,y:e.originY},flipX:e.flipX,flipY:e.flipY,rotation:e.rotation,alpha:e.alpha,visible:e.visible,blendMode:e.blendMode,textureKey:"",frameKey:"",data:{}};return e.texture&&(d.textureKey=e.texture.key,d.frameKey=e.frame.name),d};l.exports=T},56584:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),x=e(69360),u=e(64462),h=e(35786),o=e(62138),n=e(93736),r=4,f={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(a){this._scaleX=a,this._scaleY=a,a===0?this.renderFlags&=~r:this.renderFlags|=r}},scaleX:{get:function(){return this._scaleX},set:function(a){this._scaleX=a,a===0?this.renderFlags&=~r:this._scaleY!==0&&(this.renderFlags|=r)}},scaleY:{get:function(){return this._scaleY},set:function(a){this._scaleY=a,a===0?this.renderFlags&=~r:this._scaleX!==0&&(this.renderFlags|=r)}},angle:{get:function(){return o(this._rotation*d.RAD_TO_DEG)},set:function(a){this.rotation=o(a)*d.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(a){this._rotation=h(a)}},setPosition:function(a,c,p,v){return a===void 0&&(a=0),c===void 0&&(c=a),p===void 0&&(p=0),v===void 0&&(v=0),this.x=a,this.y=c,this.z=p,this.w=v,this},copyPosition:function(a){return a.x!==void 0&&(this.x=a.x),a.y!==void 0&&(this.y=a.y),a.z!==void 0&&(this.z=a.z),a.w!==void 0&&(this.w=a.w),this},setRandomPosition:function(a,c,p,v){return a===void 0&&(a=0),c===void 0&&(c=0),p===void 0&&(p=this.scene.sys.scale.width),v===void 0&&(v=this.scene.sys.scale.height),this.x=a+Math.random()*p,this.y=c+Math.random()*v,this},setRotation:function(a){return a===void 0&&(a=0),this.rotation=a,this},setAngle:function(a){return a===void 0&&(a=0),this.angle=a,this},setScale:function(a,c){return a===void 0&&(a=1),c===void 0&&(c=a),this.scaleX=a,this.scaleY=c,this},setX:function(a){return a===void 0&&(a=0),this.x=a,this},setY:function(a){return a===void 0&&(a=0),this.y=a,this},setZ:function(a){return a===void 0&&(a=0),this.z=a,this},setW:function(a){return a===void 0&&(a=0),this.w=a,this},getLocalTransformMatrix:function(a){return a===void 0&&(a=new x),a.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(a,c){a===void 0&&(a=new x);var p=this.parentContainer;if(!p)return this.getLocalTransformMatrix(a);for(c||(c=new x),a.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);p;)c.applyITRS(p.x,p.y,p._rotation,p._scaleX,p._scaleY),c.multiply(a,a),p=p.parentContainer;return a},getLocalPoint:function(a,c,p,v){p||(p=new n),v||(v=this.scene.sys.cameras.main);var m=v.scrollX,y=v.scrollY,P=a+m*this.scrollFactorX-m,E=c+y*this.scrollFactorY-y;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(P,E,p):u(P,E,this.x,this.y,this.rotation,this.scaleX,this.scaleY,p),this._originComponent&&(p.x+=this._displayOriginX,p.y+=this._displayOriginY),p},getParentRotation:function(){for(var a=0,c=this.parentContainer;c;)a+=c.rotation,c=c.parentContainer;return a}};l.exports=f},69360:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(83392),u=e(93736),h=new d({initialize:function(n,r,f,a,c,p){n===void 0&&(n=1),r===void 0&&(r=0),f===void 0&&(f=0),a===void 0&&(a=1),c===void 0&&(c=0),p===void 0&&(p=0),this.matrix=new Float32Array([n,r,f,a,c,p,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(o){this.matrix[0]=o}},b:{get:function(){return this.matrix[1]},set:function(o){this.matrix[1]=o}},c:{get:function(){return this.matrix[2]},set:function(o){this.matrix[2]=o}},d:{get:function(){return this.matrix[3]},set:function(o){this.matrix[3]=o}},e:{get:function(){return this.matrix[4]},set:function(o){this.matrix[4]=o}},f:{get:function(){return this.matrix[5]},set:function(o){this.matrix[5]=o}},tx:{get:function(){return this.matrix[4]},set:function(o){this.matrix[4]=o}},ty:{get:function(){return this.matrix[5]},set:function(o){this.matrix[5]=o}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var o=this.matrix,n=o[0],r=o[1],f=o[2],a=o[3];return n||r?r>0?Math.acos(n/this.scaleX):-Math.acos(n/this.scaleX):f||a?x.TAU-(a>0?Math.acos(-f/this.scaleY):-Math.acos(f/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var o=this.matrix;return o[0]=1,o[1]=0,o[2]=0,o[3]=1,o[4]=0,o[5]=0,this},translate:function(o,n){var r=this.matrix;return r[4]=r[0]*o+r[2]*n+r[4],r[5]=r[1]*o+r[3]*n+r[5],this},scale:function(o,n){var r=this.matrix;return r[0]*=o,r[1]*=o,r[2]*=n,r[3]*=n,this},rotate:function(o){var n=Math.sin(o),r=Math.cos(o),f=this.matrix,a=f[0],c=f[1],p=f[2],v=f[3];return f[0]=a*r+p*n,f[1]=c*r+v*n,f[2]=a*-n+p*r,f[3]=c*-n+v*r,this},multiply:function(o,n){var r=this.matrix,f=o.matrix,a=r[0],c=r[1],p=r[2],v=r[3],m=r[4],y=r[5],P=f[0],E=f[1],S=f[2],w=f[3],R=f[4],A=f[5],O=n===void 0?r:n.matrix;return O[0]=P*a+E*p,O[1]=P*c+E*v,O[2]=S*a+w*p,O[3]=S*c+w*v,O[4]=R*a+A*p+m,O[5]=R*c+A*v+y,O},multiplyWithOffset:function(o,n,r){var f=this.matrix,a=o.matrix,c=f[0],p=f[1],v=f[2],m=f[3],y=f[4],P=f[5],E=n*c+r*v+y,S=n*p+r*m+P,w=a[0],R=a[1],A=a[2],O=a[3],F=a[4],b=a[5];return f[0]=w*c+R*v,f[1]=w*p+R*m,f[2]=A*c+O*v,f[3]=A*p+O*m,f[4]=F*c+b*v+E,f[5]=F*p+b*m+S,this},transform:function(o,n,r,f,a,c){var p=this.matrix,v=p[0],m=p[1],y=p[2],P=p[3],E=p[4],S=p[5];return p[0]=o*v+n*y,p[1]=o*m+n*P,p[2]=r*v+f*y,p[3]=r*m+f*P,p[4]=a*v+c*y+E,p[5]=a*m+c*P+S,this},transformPoint:function(o,n,r){r===void 0&&(r={x:0,y:0});var f=this.matrix,a=f[0],c=f[1],p=f[2],v=f[3],m=f[4],y=f[5];return r.x=o*a+n*p+m,r.y=o*c+n*v+y,r},invert:function(){var o=this.matrix,n=o[0],r=o[1],f=o[2],a=o[3],c=o[4],p=o[5],v=n*a-r*f;return o[0]=a/v,o[1]=-r/v,o[2]=-f/v,o[3]=n/v,o[4]=(f*p-a*c)/v,o[5]=-(n*p-r*c)/v,this},copyFrom:function(o){var n=this.matrix;return n[0]=o.a,n[1]=o.b,n[2]=o.c,n[3]=o.d,n[4]=o.e,n[5]=o.f,this},copyFromArray:function(o){var n=this.matrix;return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],this},copyToContext:function(o){var n=this.matrix;return o.transform(n[0],n[1],n[2],n[3],n[4],n[5]),o},setToContext:function(o){var n=this.matrix;return o.setTransform(n[0],n[1],n[2],n[3],n[4],n[5]),o},copyToArray:function(o){var n=this.matrix;return o===void 0?o=[n[0],n[1],n[2],n[3],n[4],n[5]]:(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5]),o},setTransform:function(o,n,r,f,a,c){var p=this.matrix;return p[0]=o,p[1]=n,p[2]=r,p[3]=f,p[4]=a,p[5]=c,this},decomposeMatrix:function(){var o=this.decomposedMatrix,n=this.matrix,r=n[0],f=n[1],a=n[2],c=n[3],p=r*c-f*a;if(o.translateX=n[4],o.translateY=n[5],r||f){var v=Math.sqrt(r*r+f*f);o.rotation=f>0?Math.acos(r/v):-Math.acos(r/v),o.scaleX=v,o.scaleY=p/v}else if(a||c){var m=Math.sqrt(a*a+c*c);o.rotation=Math.PI*.5-(c>0?Math.acos(-a/m):-Math.acos(a/m)),o.scaleX=p/m,o.scaleY=m}else o.rotation=0,o.scaleX=0,o.scaleY=0;return o},applyITRS:function(o,n,r,f,a){var c=this.matrix,p=Math.sin(r),v=Math.cos(r);return c[4]=o,c[5]=n,c[0]=v*f,c[1]=p*f,c[2]=-p*a,c[3]=v*a,this},applyInverse:function(o,n,r){r===void 0&&(r=new u);var f=this.matrix,a=f[0],c=f[1],p=f[2],v=f[3],m=f[4],y=f[5],P=1/(a*v+p*-c);return r.x=v*P*o+-p*P*n+(y*p-m*v)*P,r.y=a*P*n+-c*P*o+(-y*a+m*c)*P,r},setQuad:function(o,n,r,f,a,c){c===void 0&&(c=this.quad);var p=this.matrix,v=p[0],m=p[1],y=p[2],P=p[3],E=p[4],S=p[5];return c[0]=o*v+n*y+E,c[1]=o*m+n*P+S,c[2]=o*v+f*y+E,c[3]=o*m+f*P+S,c[4]=r*v+f*y+E,c[5]=r*m+f*P+S,c[6]=r*v+n*y+E,c[7]=r*m+n*P+S,a&&c.forEach(function(w,R){c[R]=Math.round(w)}),c},getX:function(o,n){return o*this.a+n*this.c+this.e},getY:function(o,n){return o*this.b+n*this.d+this.f},getXRound:function(o,n,r){var f=this.getX(o,n);return r&&(f=Math.round(f)),f},getYRound:function(o,n,r){var f=this.getY(o,n);return r&&(f=Math.round(f)),f},getCSSMatrix:function(){var o=this.matrix;return"matrix("+o[0]+","+o[1]+","+o[2]+","+o[3]+","+o[4]+","+o[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});l.exports=h},59694:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=1,e={_visible:!0,visible:{get:function(){return this._visible},set:function(d){d?(this._visible=!0,this.renderFlags|=T):(this._visible=!1,this.renderFlags&=~T)}},setVisible:function(d){return this.visible=d,this}};l.exports=e},64937:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={Alpha:e(97123),AlphaSingle:e(15720),BlendMode:e(69732),ComputedSize:e(28284),Crop:e(85293),Depth:e(14975),Flip:e(92972),FX:e(88677),GetBounds:e(80693),Mask:e(39171),Origin:e(28072),PathFollower:e(54211),Pipeline:e(58210),PostPipeline:e(44086),ScrollFactor:e(45900),Size:e(31654),Texture:e(82081),TextureCrop:e(21850),Tint:e(58072),ToJSON:e(48129),Transform:e(56584),TransformMatrix:e(69360),Visible:e(59694)}},70339:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(59959),x=e(95723),u=e(56694),h=e(64937),o=e(56631),n=e(89980),r=e(74118),f=e(98524),a=e(58795),c=e(93736),p=new u({Extends:n,Mixins:[h.AlphaSingle,h.BlendMode,h.ComputedSize,h.Depth,h.Mask,h.PostPipeline,h.Transform,h.Visible,f],initialize:function(m,y,P,E){n.call(this,m,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new h.TransformMatrix,this.tempTransformMatrix=new h.TransformMatrix,this._sortKey="",this._sysEvents=m.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(y,P),this.setBlendMode(x.SKIP_CHECK),E&&this.add(E)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(v){return v===void 0&&(v=!0),this.exclusive=v,this},getBounds:function(v){if(v===void 0&&(v=new r),v.setTo(this.x,this.y,0,0),this.parentContainer){var m=this.parentContainer.getBoundsTransformMatrix(),y=m.transformPoint(this.x,this.y);v.setTo(y.x,y.y,0,0)}if(this.list.length>0){var P=this.list,E=new r,S=!1;v.setEmpty();for(var w=0;w<P.length;w++){var R=P[w];R.getBounds&&(R.getBounds(E),S?a(E,v,v):(v.setTo(E.x,E.y,E.width,E.height),S=!0))}}return v},addHandler:function(v){v.once(o.DESTROY,this.remove,this),this.exclusive&&(v.parentContainer&&v.parentContainer.remove(v),v.parentContainer=this,v.removeFromDisplayList(),v.addedToScene())},removeHandler:function(v){v.off(o.DESTROY,this.remove,this),this.exclusive&&(v.parentContainer=null,v.removedFromScene(),v.addToDisplayList())},pointToContainer:function(v,m){m===void 0&&(m=new c),this.parentContainer?this.parentContainer.pointToContainer(v,m):(m.x=v.x,m.y=v.y);var y=this.tempTransformMatrix;return y.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),y.invert(),y.transformPoint(v.x,v.y,m),m},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(v){return d.Add(this.list,v,this.maxSize,this.addHandler,this),this},addAt:function(v,m){return d.AddAt(this.list,v,m,this.maxSize,this.addHandler,this),this},getAt:function(v){return this.list[v]},getIndex:function(v){return this.list.indexOf(v)},sort:function(v,m){return v?(m===void 0&&(m=function(y,P){return y[v]-P[v]}),d.StableSort(this.list,m),this):this},getByName:function(v){return d.GetFirst(this.list,"name",v)},getRandom:function(v,m){return d.GetRandom(this.list,v,m)},getFirst:function(v,m,y,P){return d.GetFirst(this.list,v,m,y,P)},getAll:function(v,m,y,P){return d.GetAll(this.list,v,m,y,P)},count:function(v,m,y,P){return d.CountAllMatching(this.list,v,m,y,P)},swap:function(v,m){return d.Swap(this.list,v,m),this},moveTo:function(v,m){return d.MoveTo(this.list,v,m),this},moveAbove:function(v,m){return d.MoveAbove(this.list,v,m),this},moveBelow:function(v,m){return d.MoveBelow(this.list,v,m),this},remove:function(v,m){var y=d.Remove(this.list,v,this.removeHandler,this);if(m&&y){Array.isArray(y)||(y=[y]);for(var P=0;P<y.length;P++)y[P].destroy()}return this},removeAt:function(v,m){var y=d.RemoveAt(this.list,v,this.removeHandler,this);return m&&y&&y.destroy(),this},removeBetween:function(v,m,y){var P=d.RemoveBetween(this.list,v,m,this.removeHandler,this);if(y)for(var E=0;E<P.length;E++)P[E].destroy();return this},removeAll:function(v){var m=this.list;if(v){for(var y=0;y<m.length;y++)m[y]&&m[y].scene&&(m[y].off(o.DESTROY,this.remove,this),m[y].destroy());this.list=[]}else d.RemoveBetween(m,0,m.length,this.removeHandler,this);return this},bringToTop:function(v){return d.BringToTop(this.list,v),this},sendToBack:function(v){return d.SendToBack(this.list,v),this},moveUp:function(v){return d.MoveUp(this.list,v),this},moveDown:function(v){return d.MoveDown(this.list,v),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return d.Shuffle(this.list),this},replace:function(v,m,y){var P=d.Replace(this.list,v,m);return P&&(this.addHandler(m),this.removeHandler(v),y&&v.destroy()),this},exists:function(v){return this.list.indexOf(v)>-1},setAll:function(v,m,y,P){return d.SetAll(this.list,v,m,y,P),this},each:function(v,m){var y=[null],P,E=this.list.slice(),S=E.length;for(P=2;P<arguments.length;P++)y.push(arguments[P]);for(P=0;P<S;P++)y[0]=E[P],v.apply(m,y);return this},iterate:function(v,m){var y=[null],P;for(P=2;P<arguments.length;P++)y.push(arguments[P]);for(P=0;P<this.list.length;P++)y[0]=this.list[P],v.apply(m,y);return this},setScrollFactor:function(v,m,y){return m===void 0&&(m=v),y===void 0&&(y=!1),this.scrollFactorX=v,this.scrollFactorY=m,y&&(d.SetAll(this.list,"scrollFactorX",v),d.SetAll(this.list,"scrollFactorY",m)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});l.exports=p},13916:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){x.addToRenderList(d);var h=d.list;if(h.length!==0){var o=d.localTransform;u?(o.loadIdentity(),o.multiply(u),o.translate(d.x,d.y),o.rotate(d.rotation),o.scale(d.scaleX,d.scaleY)):o.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY);var n=d.blendMode!==-1;n||e.setBlendMode(0);var r=d._alpha,f=d.scrollFactorX,a=d.scrollFactorY;d.mask&&d.mask.preRenderCanvas(e,null,x);for(var c=0;c<h.length;c++){var p=h[c];if(p.willRender(x)){var v=p.alpha,m=p.scrollFactorX,y=p.scrollFactorY;!n&&p.blendMode!==e.currentBlendMode&&e.setBlendMode(p.blendMode),p.setScrollFactor(m*f,y*a),p.setAlpha(v*r),p.renderCanvas(e,p,x,o),p.setAlpha(v),p.setScrollFactor(m,y)}}d.mask&&d.mask.postRenderCanvas(e)}};l.exports=T},44516:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(70339),u=e(99325),h=e(20494);u.register("container",function(o,n){o===void 0&&(o={});var r=h(o,"x",0),f=h(o,"y",0),a=h(o,"children",null),c=new x(this.scene,r,f,a);return n!==void 0&&(o.add=n),d(this.scene,c,o),c})},23400:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70339),x=e(61286);x.register("container",function(u,h,o){return this.displayList.add(new d(this.scene,u,h,o))})},98524:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(36934),u=e(13916),l.exports={renderWebGL:x,renderCanvas:u}},36934:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){x.addToRenderList(d);var h=d.list,o=h.length;if(o!==0){var n=d.localTransform;u?(n.loadIdentity(),n.multiply(u),n.translate(d.x,d.y),n.rotate(d.rotation),n.scale(d.scaleX,d.scaleY)):n.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY),e.pipelines.preBatch(d);var r=d.blendMode!==-1;r||e.setBlendMode(0);for(var f=d.alpha,a=d.scrollFactorX,c=d.scrollFactorY,p=0;p<o;p++){var v=h[p];if(v.willRender(x)){var m,y,P,E;if(v.alphaTopLeft!==void 0)m=v.alphaTopLeft,y=v.alphaTopRight,P=v.alphaBottomLeft,E=v.alphaBottomRight;else{var S=v.alpha;m=S,y=S,P=S,E=S}var w=v.scrollFactorX,R=v.scrollFactorY;!r&&v.blendMode!==e.currentBlendMode&&e.setBlendMode(v.blendMode);var A=v.mask;A&&A.preRenderWebGL(e,v,x);var O=v.type;O!==e.currentType&&(e.newType=!0,e.currentType=O),e.nextTypeMatch=p<o-1?h[p+1].type===e.currentType:!1,v.setScrollFactor(w*a,R*c),v.setAlpha(m*f,y*f,P*f,E*f),v.renderWebGL(e,v,x,n,d),v.setAlpha(m,y,P,E),v.setScrollFactor(w,R),A&&A.postRenderWebGL(e,x),e.newType=!1}}e.pipelines.postBatch(d)}};l.exports=T},2452:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},38943:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(64937),u=e(11603),h=e(89980),o=e(42911),n=e(55638),r=e(7599),f=e(51729),a=new d({Extends:h,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.Origin,x.ScrollFactor,x.Transform,x.Visible,u],initialize:function(p,v,m,y,P,E){h.call(this,p,"DOMElement"),this.parent=p.sys.game.domContainer,this.cache=p.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new f,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(v,m),typeof y=="string"?y[0]==="#"?this.setElement(y.substr(1),P,E):this.createElement(y,P,E):y&&this.setElement(y,P,E),p.sys.events.on(r.SLEEP,this.handleSceneEvent,this),p.sys.events.on(r.WAKE,this.handleSceneEvent,this),p.sys.events.on(r.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(c){var p=this.node,v=p.style;p&&(v.display=c.settings.visible?"block":"none")},setSkew:function(c,p){return c===void 0&&(c=0),p===void 0&&(p=c),this.skewX=c,this.skewY=p,this},setPerspective:function(c){return this.parent.style.perspective=c+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(c){this.parent.style.perspective=c+"px"}},addListener:function(c){if(this.node){c=c.split(" ");for(var p=0;p<c.length;p++)this.node.addEventListener(c[p],this.handler,!1)}return this},removeListener:function(c){if(this.node){c=c.split(" ");for(var p=0;p<c.length;p++)this.node.removeEventListener(c[p],this.handler)}return this},dispatchNativeEvent:function(c){this.emit(c.type,c)},createElement:function(c,p,v){return this.setElement(document.createElement(c),p,v)},setElement:function(c,p,v){this.removeElement();var m;if(typeof c=="string"?(c[0]==="#"&&(c=c.substr(1)),m=document.getElementById(c)):typeof c=="object"&&c.nodeType===1&&(m=c),!m)return this;if(this.node=m,p&&o(p))for(var y in p)m.style[y]=p[y];else typeof p=="string"&&(m.style=p);return m.style.zIndex="0",m.style.display="inline",m.style.position="absolute",m.phaser=this,this.parent&&this.parent.appendChild(m),v&&(m.innerText=v),this.updateSize()},createFromCache:function(c,p){var v=this.cache.get(c);return v&&this.createFromHTML(v,p),this},createFromHTML:function(c,p){p===void 0&&(p="div"),this.removeElement();var v=document.createElement(p);return this.node=v,v.style.zIndex="0",v.style.display="inline",v.style.position="absolute",v.phaser=this,this.parent&&this.parent.appendChild(v),v.innerHTML=c,this.updateSize()},removeElement:function(){return this.node&&(n(this.node),this.node=null),this},updateSize:function(){var c=this.node,p=c.getBoundingClientRect();return this.width=c.clientWidth,this.height=c.clientHeight,this.displayWidth=p.width||0,this.displayHeight=p.height||0,this},getChildByProperty:function(c,p){if(this.node){for(var v=this.node.querySelectorAll("*"),m=0;m<v.length;m++)if(v[m][c]===p)return v[m]}return null},getChildByID:function(c){return this.getChildByProperty("id",c)},getChildByName:function(c){return this.getChildByProperty("name",c)},setClassName:function(c){return this.node&&(this.node.className=c,this.updateSize()),this},setText:function(c){return this.node&&(this.node.innerText=c,this.updateSize()),this},setHTML:function(c){return this.node&&(this.node.innerHTML=c,this.updateSize()),this},preRender:function(){var c=this.parentContainer,p=this.node;p&&c&&!c.willRender()&&(p.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(r.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(r.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(r.PRE_RENDER,this.preRender,this)}});l.exports=a},66070:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(2452),x=e(89980),u=e(69360),h=new u,o=new u,n=new u,r=function(f,a,c,p){if(a.node){var v=a.node.style,m=a.scene.sys.settings;if(!v||!m.visible||x.RENDER_MASK!==a.renderFlags||a.cameraFilter!==0&&a.cameraFilter&c.id||a.parentContainer&&!a.parentContainer.willRender()){v.display="none";return}var y=a.parentContainer,P=c.alpha*a.alpha;y&&(P*=y.alpha);var E=h,S=o,w=n,R=0,A=0,O="0%",F="0%";p?(R=a.width*a.scaleX*a.originX,A=a.height*a.scaleY*a.originY,S.applyITRS(a.x-R,a.y-A,a.rotation,a.scaleX,a.scaleY),E.copyFrom(c.matrix),E.multiplyWithOffset(p,-c.scrollX*a.scrollFactorX,-c.scrollY*a.scrollFactorY),S.e=a.x-R,S.f=a.y-A,E.multiply(S,w)):(R=a.width*a.originX,A=a.height*a.originY,S.applyITRS(a.x-R,a.y-A,a.rotation,a.scaleX,a.scaleY),E.copyFrom(c.matrix),O=100*a.originX+"%",F=100*a.originY+"%",S.e-=c.scrollX*a.scrollFactorX,S.f-=c.scrollY*a.scrollFactorY,E.multiply(S,w)),a.transformOnly||(v.display="block",v.opacity=P,v.zIndex=a._depth,v.pointerEvents=a.pointerEvents,v.mixBlendMode=d[a._blendMode]),v.transform=w.getCSSMatrix()+" skew("+a.skewX+"rad, "+a.skewY+"rad) rotate3d("+a.rotate3d.x+","+a.rotate3d.y+","+a.rotate3d.z+","+a.rotate3d.w+a.rotate3dAngle+")",v.transformOrigin=O+" "+F}};l.exports=r},66788:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(38943),x=e(61286);x.register("dom",function(u,h,o,n,r){var f=new d(this.scene,u,h,o,n,r);return this.displayList.add(f),f})},11603:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(66070),u=e(66070),l.exports={renderWebGL:x,renderCanvas:u}},65492:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="addedtoscene"},98398:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="destroy"},40239:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="removedfromscene"},17286:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="complete"},31496:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="created"},89587:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="error"},59792:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="locked"},96342:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="loop"},6017:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="playing"},49614:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="play"},24418:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="seeked"},87318:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="seeking"},50009:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="stalled"},61922:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="stop"},79501:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="textureready"},4052:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="unlocked"},54857:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="unsupported"},56631:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={ADDED_TO_SCENE:e(65492),DESTROY:e(98398),REMOVED_FROM_SCENE:e(40239),VIDEO_COMPLETE:e(17286),VIDEO_CREATED:e(31496),VIDEO_ERROR:e(89587),VIDEO_LOCKED:e(59792),VIDEO_LOOP:e(96342),VIDEO_PLAY:e(49614),VIDEO_PLAYING:e(6017),VIDEO_SEEKED:e(24418),VIDEO_SEEKING:e(87318),VIDEO_STALLED:e(50009),VIDEO_STOP:e(61922),VIDEO_TEXTURE:e(79501),VIDEO_UNLOCKED:e(4052),VIDEO_UNSUPPORTED:e(54857)}},39419:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(64937),u=e(89980),h=e(79394),o=new d({Extends:u,Mixins:[x.Alpha,x.BlendMode,x.Depth,x.Flip,x.Origin,x.ScrollFactor,x.Size,x.Texture,x.Tint,x.Transform,x.Visible,h],initialize:function(r){u.call(this,r,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});l.exports=o},96699:()=>{},41155:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(39419),x=e(61286);x.register("extern",function(){var u=new d(this.scene);return this.displayList.add(u),u})},79394:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(81410),u=e(96699),l.exports={renderWebGL:x,renderCanvas:u}},81410:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=function(u,h,o,n){u.pipelines.clear();var r=d(h,o,n).calc;h.render.call(h,u,o,r),u.pipelines.rebind()};l.exports=x},36266:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},33182:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(51052),x=e(56694),u=e(36266),h=e(64937),o=e(95669),n=e(89980),r=e(72632),f=e(10850),a=e(83392),c=e(60898),p=new x({Extends:n,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.Mask,h.Pipeline,h.PostPipeline,h.Transform,h.Visible,h.ScrollFactor,c],initialize:function(m,y){var P=f(y,"x",0),E=f(y,"y",0);n.call(this,m,"Graphics"),this.setPosition(P,E),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(y)},setDefaultStyles:function(v){return f(v,"lineStyle",null)&&(this.defaultStrokeWidth=f(v,"lineStyle.width",1),this.defaultStrokeColor=f(v,"lineStyle.color",16777215),this.defaultStrokeAlpha=f(v,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),f(v,"fillStyle",null)&&(this.defaultFillColor=f(v,"fillStyle.color",16777215),this.defaultFillAlpha=f(v,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(v,m,y){return y===void 0&&(y=1),this.commandBuffer.push(u.LINE_STYLE,v,m,y),this._lineWidth=v,this},fillStyle:function(v,m){return m===void 0&&(m=1),this.commandBuffer.push(u.FILL_STYLE,v,m),this},fillGradientStyle:function(v,m,y,P,E,S,w,R){return E===void 0&&(E=1),S===void 0&&(S=E),w===void 0&&(w=E),R===void 0&&(R=E),this.commandBuffer.push(u.GRADIENT_FILL_STYLE,E,S,w,R,v,m,y,P),this},lineGradientStyle:function(v,m,y,P,E,S){return S===void 0&&(S=1),this.commandBuffer.push(u.GRADIENT_LINE_STYLE,v,S,m,y,P,E),this},beginPath:function(){return this.commandBuffer.push(u.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(u.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(u.FILL_PATH),this},fill:function(){return this.commandBuffer.push(u.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(u.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(u.STROKE_PATH),this},fillCircleShape:function(v){return this.fillCircle(v.x,v.y,v.radius)},strokeCircleShape:function(v){return this.strokeCircle(v.x,v.y,v.radius)},fillCircle:function(v,m,y){return this.beginPath(),this.arc(v,m,y,0,a.PI2),this.fillPath(),this},strokeCircle:function(v,m,y){return this.beginPath(),this.arc(v,m,y,0,a.PI2),this.strokePath(),this},fillRectShape:function(v){return this.fillRect(v.x,v.y,v.width,v.height)},strokeRectShape:function(v){return this.strokeRect(v.x,v.y,v.width,v.height)},fillRect:function(v,m,y,P){return this.commandBuffer.push(u.FILL_RECT,v,m,y,P),this},strokeRect:function(v,m,y,P){var E=this._lineWidth/2,S=v-E,w=v+E;return this.beginPath(),this.moveTo(v,m),this.lineTo(v,m+P),this.strokePath(),this.beginPath(),this.moveTo(v+y,m),this.lineTo(v+y,m+P),this.strokePath(),this.beginPath(),this.moveTo(S,m),this.lineTo(w+y,m),this.strokePath(),this.beginPath(),this.moveTo(S,m+P),this.lineTo(w+y,m+P),this.strokePath(),this},fillRoundedRect:function(v,m,y,P,E){E===void 0&&(E=20);var S=E,w=E,R=E,A=E;typeof E!="number"&&(S=r(E,"tl",20),w=r(E,"tr",20),R=r(E,"bl",20),A=r(E,"br",20));var O=S>=0,F=w>=0,b=R>=0,D=A>=0;return S=Math.abs(S),w=Math.abs(w),R=Math.abs(R),A=Math.abs(A),this.beginPath(),this.moveTo(v+S,m),this.lineTo(v+y-w,m),F?this.arc(v+y-w,m+w,w,-a.TAU,0):this.arc(v+y,m,w,Math.PI,a.TAU,!0),this.lineTo(v+y,m+P-A),D?this.arc(v+y-A,m+P-A,A,0,a.TAU):this.arc(v+y,m+P,A,-a.TAU,Math.PI,!0),this.lineTo(v+R,m+P),b?this.arc(v+R,m+P-R,R,a.TAU,Math.PI):this.arc(v,m+P,R,0,-a.TAU,!0),this.lineTo(v,m+S),O?this.arc(v+S,m+S,S,-Math.PI,-a.TAU):this.arc(v,m,S,a.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(v,m,y,P,E){E===void 0&&(E=20);var S=E,w=E,R=E,A=E,O=Math.min(y,P)/2;typeof E!="number"&&(S=r(E,"tl",20),w=r(E,"tr",20),R=r(E,"bl",20),A=r(E,"br",20));var F=S>=0,b=w>=0,D=R>=0,I=A>=0;return S=Math.min(Math.abs(S),O),w=Math.min(Math.abs(w),O),R=Math.min(Math.abs(R),O),A=Math.min(Math.abs(A),O),this.beginPath(),this.moveTo(v+S,m),this.lineTo(v+y-w,m),this.moveTo(v+y-w,m),b?this.arc(v+y-w,m+w,w,-a.TAU,0):this.arc(v+y,m,w,Math.PI,a.TAU,!0),this.lineTo(v+y,m+P-A),this.moveTo(v+y,m+P-A),I?this.arc(v+y-A,m+P-A,A,0,a.TAU):this.arc(v+y,m+P,A,-a.TAU,Math.PI,!0),this.lineTo(v+R,m+P),this.moveTo(v+R,m+P),D?this.arc(v+R,m+P-R,R,a.TAU,Math.PI):this.arc(v,m+P,R,0,-a.TAU,!0),this.lineTo(v,m+S),this.moveTo(v,m+S),F?this.arc(v+S,m+S,S,-Math.PI,-a.TAU):this.arc(v,m,S,a.TAU,0,!0),this.strokePath(),this},fillPointShape:function(v,m){return this.fillPoint(v.x,v.y,m)},fillPoint:function(v,m,y){return!y||y<1?y=1:(v-=y/2,m-=y/2),this.commandBuffer.push(u.FILL_RECT,v,m,y,y),this},fillTriangleShape:function(v){return this.fillTriangle(v.x1,v.y1,v.x2,v.y2,v.x3,v.y3)},strokeTriangleShape:function(v){return this.strokeTriangle(v.x1,v.y1,v.x2,v.y2,v.x3,v.y3)},fillTriangle:function(v,m,y,P,E,S){return this.commandBuffer.push(u.FILL_TRIANGLE,v,m,y,P,E,S),this},strokeTriangle:function(v,m,y,P,E,S){return this.commandBuffer.push(u.STROKE_TRIANGLE,v,m,y,P,E,S),this},strokeLineShape:function(v){return this.lineBetween(v.x1,v.y1,v.x2,v.y2)},lineBetween:function(v,m,y,P){return this.beginPath(),this.moveTo(v,m),this.lineTo(y,P),this.strokePath(),this},lineTo:function(v,m){return this.commandBuffer.push(u.LINE_TO,v,m),this},moveTo:function(v,m){return this.commandBuffer.push(u.MOVE_TO,v,m),this},strokePoints:function(v,m,y,P){m===void 0&&(m=!1),y===void 0&&(y=!1),P===void 0&&(P=v.length),this.beginPath(),this.moveTo(v[0].x,v[0].y);for(var E=1;E<P;E++)this.lineTo(v[E].x,v[E].y);return m&&this.lineTo(v[0].x,v[0].y),y&&this.closePath(),this.strokePath(),this},fillPoints:function(v,m,y,P){m===void 0&&(m=!1),y===void 0&&(y=!1),P===void 0&&(P=v.length),this.beginPath(),this.moveTo(v[0].x,v[0].y);for(var E=1;E<P;E++)this.lineTo(v[E].x,v[E].y);return m&&this.lineTo(v[0].x,v[0].y),y&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(v,m){m===void 0&&(m=32);var y=v.getPoints(m);return this.strokePoints(y,!0)},strokeEllipse:function(v,m,y,P,E){E===void 0&&(E=32);var S=new o(v,m,y,P),w=S.getPoints(E);return this.strokePoints(w,!0)},fillEllipseShape:function(v,m){m===void 0&&(m=32);var y=v.getPoints(m);return this.fillPoints(y,!0)},fillEllipse:function(v,m,y,P,E){E===void 0&&(E=32);var S=new o(v,m,y,P),w=S.getPoints(E);return this.fillPoints(w,!0)},arc:function(v,m,y,P,E,S,w){return S===void 0&&(S=!1),w===void 0&&(w=0),this.commandBuffer.push(u.ARC,v,m,y,P,E,S,w),this},slice:function(v,m,y,P,E,S,w){return S===void 0&&(S=!1),w===void 0&&(w=0),this.commandBuffer.push(u.BEGIN_PATH),this.commandBuffer.push(u.MOVE_TO,v,m),this.commandBuffer.push(u.ARC,v,m,y,P,E,S,w),this.commandBuffer.push(u.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(u.SAVE),this},restore:function(){return this.commandBuffer.push(u.RESTORE),this},translateCanvas:function(v,m){return this.commandBuffer.push(u.TRANSLATE,v,m),this},scaleCanvas:function(v,m){return this.commandBuffer.push(u.SCALE,v,m),this},rotateCanvas:function(v){return this.commandBuffer.push(u.ROTATE,v),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(v,m,y){var P=this.scene.sys,E=P.game.renderer;m===void 0&&(m=P.scale.width),y===void 0&&(y=P.scale.height),p.TargetCamera.setScene(this.scene),p.TargetCamera.setViewport(0,0,m,y),p.TargetCamera.scrollX=this.x,p.TargetCamera.scrollY=this.y;var S,w,R={willReadFrequently:!0};if(typeof v=="string")if(P.textures.exists(v)){S=P.textures.get(v);var A=S.getSourceImage();A instanceof HTMLCanvasElement&&(w=A.getContext("2d",R))}else S=P.textures.createCanvas(v,m,y),w=S.getSourceImage().getContext("2d",R);else v instanceof HTMLCanvasElement&&(w=v.getContext("2d",R));return w&&(this.renderCanvas(E,this,p.TargetCamera,null,w,!1),S&&S.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});p.TargetCamera=new d,l.exports=p},91543:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(36266),x=e(49584),u=function(h,o,n,r,f,a){var c=o.commandBuffer,p=c.length,v=f||h.currentContext;if(!(p===0||!x(h,v,o,n,r))){n.addToRenderList(o);var m=1,y=1,P=0,E=0,S=1,w=0,R=0,A=0;v.beginPath();for(var O=0;O<p;++O){var F=c[O];switch(F){case d.ARC:v.arc(c[O+1],c[O+2],c[O+3],c[O+4],c[O+5],c[O+6]),O+=7;break;case d.LINE_STYLE:S=c[O+1],P=c[O+2],m=c[O+3],w=(P&16711680)>>>16,R=(P&65280)>>>8,A=P&255,v.strokeStyle="rgba("+w+","+R+","+A+","+m+")",v.lineWidth=S,O+=3;break;case d.FILL_STYLE:E=c[O+1],y=c[O+2],w=(E&16711680)>>>16,R=(E&65280)>>>8,A=E&255,v.fillStyle="rgba("+w+","+R+","+A+","+y+")",O+=2;break;case d.BEGIN_PATH:v.beginPath();break;case d.CLOSE_PATH:v.closePath();break;case d.FILL_PATH:a||v.fill();break;case d.STROKE_PATH:a||v.stroke();break;case d.FILL_RECT:a?v.rect(c[O+1],c[O+2],c[O+3],c[O+4]):v.fillRect(c[O+1],c[O+2],c[O+3],c[O+4]),O+=4;break;case d.FILL_TRIANGLE:v.beginPath(),v.moveTo(c[O+1],c[O+2]),v.lineTo(c[O+3],c[O+4]),v.lineTo(c[O+5],c[O+6]),v.closePath(),a||v.fill(),O+=6;break;case d.STROKE_TRIANGLE:v.beginPath(),v.moveTo(c[O+1],c[O+2]),v.lineTo(c[O+3],c[O+4]),v.lineTo(c[O+5],c[O+6]),v.closePath(),a||v.stroke(),O+=6;break;case d.LINE_TO:v.lineTo(c[O+1],c[O+2]),O+=2;break;case d.MOVE_TO:v.moveTo(c[O+1],c[O+2]),O+=2;break;case d.LINE_FX_TO:v.lineTo(c[O+1],c[O+2]),O+=5;break;case d.MOVE_FX_TO:v.moveTo(c[O+1],c[O+2]),O+=5;break;case d.SAVE:v.save();break;case d.RESTORE:v.restore();break;case d.TRANSLATE:v.translate(c[O+1],c[O+2]),O+=2;break;case d.SCALE:v.scale(c[O+1],c[O+2]),O+=2;break;case d.ROTATE:v.rotate(c[O+1]),O+=1;break;case d.GRADIENT_FILL_STYLE:O+=5;break;case d.GRADIENT_LINE_STYLE:O+=6;break}}v.restore()}};l.exports=u},41286:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(99325),x=e(33182);d.register("graphics",function(u,h){u===void 0&&(u={}),h!==void 0&&(u.add=h);var o=new x(this.scene,u);return u.add&&this.scene.sys.displayList.add(o),o})},13122:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(33182),x=e(61286);x.register("graphics",function(u){return this.displayList.add(new d(this.scene,u))})},60898:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(34429),u=e(91543),u=e(91543),l.exports={renderWebGL:x,renderCanvas:u}},34429:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(36266),x=e(73329),u=e(69360),h=e(75512),o=function(c,p,v){this.x=c,this.y=p,this.width=v},n=function(c,p,v){this.points=[],this.pointsLength=1,this.points[0]=new o(c,p,v)},r=[],f=new u,a=function(c,p,v,m){if(p.commandBuffer.length!==0){v.addToRenderList(p);var y=c.pipelines.set(p.pipeline,p);c.pipelines.preBatch(p);for(var P=x(p,v,m).calc,E=f.loadIdentity(),S=p.commandBuffer,w=v.alpha*p.alpha,R=1,A=y.fillTint,O=y.strokeTint,F=0,b=0,D=0,I=.01,B=Math.PI*2,k,U=[],X=0,H=!0,N=null,z=h.getTintAppendFloatAlpha,L=0;L<S.length;L++)switch(k=S[L],k){case d.BEGIN_PATH:{U.length=0,N=null,H=!0;break}case d.CLOSE_PATH:{H=!1,N&&N.points.length&&N.points.push(N.points[0]);break}case d.FILL_PATH:{for(X=0;X<U.length;X++)y.batchFillPath(U[X].points,E,P);break}case d.STROKE_PATH:{for(X=0;X<U.length;X++)y.batchStrokePath(U[X].points,R,H,E,P);break}case d.LINE_STYLE:{R=S[++L];var G=S[++L],V=S[++L]*w,Y=z(G,V);O.TL=Y,O.TR=Y,O.BL=Y,O.BR=Y;break}case d.FILL_STYLE:{var W=S[++L],$=S[++L]*w,K=z(W,$);A.TL=K,A.TR=K,A.BL=K,A.BR=K;break}case d.GRADIENT_FILL_STYLE:{var j=S[++L]*w,J=S[++L]*w,q=S[++L]*w,_=S[++L]*w;A.TL=z(S[++L],j),A.TR=z(S[++L],J),A.BL=z(S[++L],q),A.BR=z(S[++L],_);break}case d.GRADIENT_LINE_STYLE:{R=S[++L];var et=S[++L]*w;O.TL=z(S[++L],et),O.TR=z(S[++L],et),O.BL=z(S[++L],et),O.BR=z(S[++L],et);break}case d.ARC:{var tt=0,rt=S[++L],ft=S[++L],vt=S[++L],ct=S[++L],st=S[++L],dt=S[++L],ut=S[++L];for(st-=ct,dt?st<-B?st=-B:st>0&&(st=-B+st%B):st>B?st=B:st<0&&(st=B+st%B),N===null&&(N=new n(rt+Math.cos(ct)*vt,ft+Math.sin(ct)*vt,R),U.push(N),tt+=I);tt<1+ut;)D=st*tt+ct,F=rt+Math.cos(D)*vt,b=ft+Math.sin(D)*vt,N.points.push(new o(F,b,R)),tt+=I;D=st+ct,F=rt+Math.cos(D)*vt,b=ft+Math.sin(D)*vt,N.points.push(new o(F,b,R));break}case d.FILL_RECT:{y.batchFillRect(S[++L],S[++L],S[++L],S[++L],E,P);break}case d.FILL_TRIANGLE:{y.batchFillTriangle(S[++L],S[++L],S[++L],S[++L],S[++L],S[++L],E,P);break}case d.STROKE_TRIANGLE:{y.batchStrokeTriangle(S[++L],S[++L],S[++L],S[++L],S[++L],S[++L],R,E,P);break}case d.LINE_TO:{N!==null?N.points.push(new o(S[++L],S[++L],R)):(N=new n(S[++L],S[++L],R),U.push(N));break}case d.MOVE_TO:{N=new n(S[++L],S[++L],R),U.push(N);break}case d.SAVE:{r.push(E.copyToArray());break}case d.RESTORE:{E.copyFromArray(r.pop());break}case d.TRANSLATE:{rt=S[++L],ft=S[++L],E.translate(rt,ft);break}case d.SCALE:{rt=S[++L],ft=S[++L],E.scale(rt,ft);break}case d.ROTATE:{E.rotate(S[++L]);break}}c.pipelines.postBatch(p)}};l.exports=a},59192:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83979),x=e(56694),u=e(56631),h=e(6659),o=e(71608),n=e(72632),r=e(10850),f=e(19256),a=e(42911),c=e(75757),p=e(58403),v=e(13747),m=new x({Extends:h,initialize:function(P,E,S){h.call(this),S?E&&!Array.isArray(E)&&(E=[E]):Array.isArray(E)?a(E[0])&&(S=E,E=null):a(E)&&(S=E,E=null),this.scene=P,this.children=new p,this.isParent=!0,this.type="Group",this.classType=n(S,"classType",v),this.name=n(S,"name",""),this.active=n(S,"active",!0),this.maxSize=n(S,"maxSize",-1),this.defaultKey=n(S,"defaultKey",null),this.defaultFrame=n(S,"defaultFrame",null),this.runChildUpdate=n(S,"runChildUpdate",!1),this.createCallback=n(S,"createCallback",null),this.removeCallback=n(S,"removeCallback",null),this.createMultipleCallback=n(S,"createMultipleCallback",null),this.internalCreateCallback=n(S,"internalCreateCallback",null),this.internalRemoveCallback=n(S,"internalRemoveCallback",null),E&&this.addMultiple(E),S&&this.createMultiple(S),this.on(u.ADDED_TO_SCENE,this.addedToScene,this),this.on(u.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(y,P,E,S,w,R){if(y===void 0&&(y=0),P===void 0&&(P=0),E===void 0&&(E=this.defaultKey),S===void 0&&(S=this.defaultFrame),w===void 0&&(w=!0),R===void 0&&(R=!0),this.isFull())return null;var A=new this.classType(this.scene,y,P,E,S);return A.addToDisplayList(this.scene.sys.displayList),A.addToUpdateList(),A.visible=w,A.setActive(R),this.add(A),A},createMultiple:function(y){if(this.isFull())return[];Array.isArray(y)||(y=[y]);var P=[];if(y[0].key)for(var E=0;E<y.length;E++){var S=this.createFromConfig(y[E]);P=P.concat(S)}return P},createFromConfig:function(y){if(this.isFull())return[];this.classType=n(y,"classType",this.classType);var P=n(y,"key",void 0),E=n(y,"frame",null),S=n(y,"visible",!0),w=n(y,"active",!0),R=[];if(P===void 0)return R;Array.isArray(P)||(P=[P]),Array.isArray(E)||(E=[E]);var A=n(y,"repeat",0),O=n(y,"randomKey",!1),F=n(y,"randomFrame",!1),b=n(y,"yoyo",!1),D=n(y,"quantity",!1),I=n(y,"frameQuantity",1),B=n(y,"max",0),k=c(P,E,{max:B,qty:D||I,random:O,randomB:F,repeat:A,yoyo:b});y.createCallback&&(this.createCallback=y.createCallback),y.removeCallback&&(this.removeCallback=y.removeCallback);for(var U=0;U<k.length;U++){var X=this.create(0,0,k[U].a,k[U].b,S,w);if(!X)break;R.push(X)}if(f(y,"setXY")){var H=r(y,"setXY.x",0),N=r(y,"setXY.y",0),z=r(y,"setXY.stepX",0),L=r(y,"setXY.stepY",0);d.SetXY(R,H,N,z,L)}if(f(y,"setRotation")){var G=r(y,"setRotation.value",0),V=r(y,"setRotation.step",0);d.SetRotation(R,G,V)}if(f(y,"setScale")){var Y=r(y,"setScale.x",1),W=r(y,"setScale.y",Y),$=r(y,"setScale.stepX",0),K=r(y,"setScale.stepY",0);d.SetScale(R,Y,W,$,K)}if(f(y,"setOrigin")){var j=r(y,"setOrigin.x",.5),J=r(y,"setOrigin.y",j),q=r(y,"setOrigin.stepX",0),_=r(y,"setOrigin.stepY",0);d.SetOrigin(R,j,J,q,_)}if(f(y,"setAlpha")){var et=r(y,"setAlpha.value",1),tt=r(y,"setAlpha.step",0);d.SetAlpha(R,et,tt)}if(f(y,"setDepth")){var rt=r(y,"setDepth.value",0),ft=r(y,"setDepth.step",0);d.SetDepth(R,rt,ft)}if(f(y,"setScrollFactor")){var vt=r(y,"setScrollFactor.x",1),ct=r(y,"setScrollFactor.y",vt),st=r(y,"setScrollFactor.stepX",0),dt=r(y,"setScrollFactor.stepY",0);d.SetScrollFactor(R,vt,ct,st,dt)}var ut=n(y,"hitArea",null),Ct=n(y,"hitAreaCallback",null);ut&&d.SetHitArea(R,ut,Ct);var Tt=n(y,"gridAlign",!1);return Tt&&d.GridAlign(R,Tt),this.createMultipleCallback&&this.createMultipleCallback.call(this,R),R},preUpdate:function(y,P){if(!(!this.runChildUpdate||this.children.size===0))for(var E=this.children.entries.slice(),S=0;S<E.length;S++){var w=E[S];w.active&&w.update(y,P)}},add:function(y,P){return P===void 0&&(P=!1),this.isFull()?this:(this.children.set(y),this.internalCreateCallback&&this.internalCreateCallback.call(this,y),this.createCallback&&this.createCallback.call(this,y),P&&(y.addToDisplayList(this.scene.sys.displayList),y.addToUpdateList()),y.on(u.DESTROY,this.remove,this),this)},addMultiple:function(y,P){if(P===void 0&&(P=!1),Array.isArray(y))for(var E=0;E<y.length;E++)this.add(y[E],P);return this},remove:function(y,P,E){return P===void 0&&(P=!1),E===void 0&&(E=!1),this.children.contains(y)?(this.children.delete(y),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,y),this.removeCallback&&this.removeCallback.call(this,y),y.off(u.DESTROY,this.remove,this),E?y.destroy():P&&(y.removeFromDisplayList(),y.removeFromUpdateList()),this):this},clear:function(y,P){y===void 0&&(y=!1),P===void 0&&(P=!1);for(var E=this.children,S=0;S<E.size;S++){var w=E.entries[S];w.off(u.DESTROY,this.remove,this),P?w.destroy():y&&(w.removeFromDisplayList(),w.removeFromUpdateList())}return this.children.clear(),this},contains:function(y){return this.children.contains(y)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(y,P,E,S){return o(this.children.entries,y,P,E,S)},getFirst:function(y,P,E,S,w,R,A){return this.getHandler(!0,1,y,P,E,S,w,R,A)},getFirstNth:function(y,P,E,S,w,R,A,O){return this.getHandler(!0,y,P,E,S,w,R,A,O)},getLast:function(y,P,E,S,w,R,A){return this.getHandler(!1,1,y,P,E,S,w,R,A)},getLastNth:function(y,P,E,S,w,R,A,O){return this.getHandler(!1,y,P,E,S,w,R,A,O)},getHandler:function(y,P,E,S,w,R,A,O,F){E===void 0&&(E=!1),S===void 0&&(S=!1);var b,D,I=0,B=this.children.entries;if(y)for(D=0;D<B.length;D++)if(b=B[D],b.active===E){if(I++,I===P)break}else b=null;else for(D=B.length-1;D>=0;D--)if(b=B[D],b.active===E){if(I++,I===P)break}else b=null;return b?(typeof w=="number"&&(b.x=w),typeof R=="number"&&(b.y=R),b):S?this.create(w,R,A,O,F):null},get:function(y,P,E,S,w){return this.getFirst(!1,!0,y,P,E,S,w)},getFirstAlive:function(y,P,E,S,w,R){return this.getFirst(!0,y,P,E,S,w,R)},getFirstDead:function(y,P,E,S,w,R){return this.getFirst(!1,y,P,E,S,w,R)},playAnimation:function(y,P){return d.PlayAnimation(this.children.entries,y,P),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(y){y===void 0&&(y=!0);for(var P=0,E=0;E<this.children.size;E++)this.children.entries[E].active===y&&P++;return P},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var y=this.getTotalUsed(),P=this.maxSize===-1?999999999999:this.maxSize;return P-y},setActive:function(y){return this.active=y,this},setName:function(y){return this.name=y,this},propertyValueSet:function(y,P,E,S,w){return d.PropertyValueSet(this.children.entries,y,P,E,S,w),this},propertyValueInc:function(y,P,E,S,w){return d.PropertyValueInc(this.children.entries,y,P,E,S,w),this},setX:function(y,P){return d.SetX(this.children.entries,y,P),this},setY:function(y,P){return d.SetY(this.children.entries,y,P),this},setXY:function(y,P,E,S){return d.SetXY(this.children.entries,y,P,E,S),this},incX:function(y,P){return d.IncX(this.children.entries,y,P),this},incY:function(y,P){return d.IncY(this.children.entries,y,P),this},incXY:function(y,P,E,S){return d.IncXY(this.children.entries,y,P,E,S),this},shiftPosition:function(y,P,E){return d.ShiftPosition(this.children.entries,y,P,E),this},angle:function(y,P){return d.Angle(this.children.entries,y,P),this},rotate:function(y,P){return d.Rotate(this.children.entries,y,P),this},rotateAround:function(y,P){return d.RotateAround(this.children.entries,y,P),this},rotateAroundDistance:function(y,P,E){return d.RotateAroundDistance(this.children.entries,y,P,E),this},setAlpha:function(y,P){return d.SetAlpha(this.children.entries,y,P),this},setTint:function(y,P,E,S){return d.SetTint(this.children.entries,y,P,E,S),this},setOrigin:function(y,P,E,S){return d.SetOrigin(this.children.entries,y,P,E,S),this},scaleX:function(y,P){return d.ScaleX(this.children.entries,y,P),this},scaleY:function(y,P){return d.ScaleY(this.children.entries,y,P),this},scaleXY:function(y,P,E,S){return d.ScaleXY(this.children.entries,y,P,E,S),this},setDepth:function(y,P){return d.SetDepth(this.children.entries,y,P),this},setBlendMode:function(y){return d.SetBlendMode(this.children.entries,y),this},setHitArea:function(y,P){return d.SetHitArea(this.children.entries,y,P),this},shuffle:function(){return d.Shuffle(this.children.entries),this},kill:function(y){this.children.contains(y)&&y.setActive(!1)},killAndHide:function(y){this.children.contains(y)&&(y.setActive(!1),y.setVisible(!1))},setVisible:function(y,P,E){return d.SetVisible(this.children.entries,y,P,E),this},toggleVisible:function(){return d.ToggleVisible(this.children.entries),this},destroy:function(y,P){y===void 0&&(y=!1),P===void 0&&(P=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(u.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(P,y),this.scene=void 0,this.children=void 0)}});l.exports=m},61295:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(99325),x=e(59192);d.register("group",function(u){return new x(this.scene,null,u)})},62598:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(59192),x=e(61286);x.register("group",function(u,h){return this.updateList.add(new d(this.scene,u,h))})},1539:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(64937),u=e(89980),h=e(57322),o=new d({Extends:u,Mixins:[x.Alpha,x.BlendMode,x.Depth,x.Flip,x.GetBounds,x.Mask,x.Origin,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Size,x.TextureCrop,x.Tint,x.Transform,x.Visible,h],initialize:function(r,f,a,c,p){u.call(this,r,"Image"),this._crop=this.resetCropObject(),this.setTexture(c,p),this.setPosition(f,a),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});l.exports=o},57786:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){x.addToRenderList(d),e.batchSprite(d,d.frame,x,u)};l.exports=T},83556:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(99325),u=e(20494),h=e(1539);x.register("image",function(o,n){o===void 0&&(o={});var r=u(o,"key",null),f=u(o,"frame",null),a=new h(this.scene,0,0,r,f);return n!==void 0&&(o.add=n),d(this.scene,a,o),a})},20927:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(1539),x=e(61286);x.register("image",function(u,h,o,n){return this.displayList.add(new d(this.scene,u,h,o,n))})},57322:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(59390),u=e(57786),l.exports={renderWebGL:x,renderCanvas:u}},59390:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){x.addToRenderList(d),this.pipeline.batchSprite(d,x,u)};l.exports=T},48013:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={Events:e(56631),DisplayList:e(91713),GameObjectCreator:e(99325),GameObjectFactory:e(61286),UpdateList:e(92034),Components:e(64937),GetCalcMatrix:e(73329),BuildGameObject:e(88933),BuildGameObjectAnimation:e(32291),GameObject:e(89980),BitmapText:e(44616),Blitter:e(52816),Bob:e(41664),Container:e(70339),DOMElement:e(38943),DynamicBitmapText:e(13468),Extern:e(39419),Graphics:e(33182),Group:e(59192),Image:e(1539),Layer:e(85305),Particles:e(27684),PathFollower:e(29598),RenderTexture:e(15996),RetroFont:e(55873),Rope:e(79968),Sprite:e(13747),Text:e(76555),GetTextSize:e(32979),MeasureText:e(27030),TextStyle:e(74744),TileSprite:e(35856),Zone:e(71030),Video:e(8630),Shape:e(91461),Arc:e(28593),Curve:e(15220),Ellipse:e(28591),Grid:e(39169),IsoBox:e(4415),IsoTriangle:e(65159),Line:e(579),Polygon:e(91249),Rectangle:e(517),Star:e(77843),Triangle:e(21873),Factories:{Blitter:e(38906),Container:e(23400),DOMElement:e(66788),DynamicBitmapText:e(94145),Extern:e(41155),Graphics:e(13122),Group:e(62598),Image:e(20927),Layer:e(17676),Particles:e(81212),PathFollower:e(19626),RenderTexture:e(29599),Rope:e(31982),Sprite:e(66135),StaticBitmapText:e(21797),Text:e(94627),TileSprite:e(20509),Zone:e(34546),Video:e(215),Arc:e(10369),Curve:e(10147),Ellipse:e(99869),Grid:e(9326),IsoBox:e(88154),IsoTriangle:e(67765),Line:e(85665),Polygon:e(88203),Rectangle:e(94355),Star:e(23962),Triangle:e(79296)},Creators:{Blitter:e(68452),Container:e(44516),DynamicBitmapText:e(67513),Graphics:e(41286),Group:e(61295),Image:e(83556),Layer:e(56378),Particles:e(765),RenderTexture:e(85692),Rope:e(96027),Sprite:e(89219),StaticBitmapText:e(95499),Text:e(75397),TileSprite:e(63950),Zone:e(24067),Video:e(65601)}};d.Shader=e(27902),d.Mesh=e(83321),d.NineSlice=e(44139),d.PointLight=e(13171),d.Plane=e(33412),d.Factories.Shader=e(51979),d.Factories.Mesh=e(8767),d.Factories.NineSlice=e(53778),d.Factories.PointLight=e(91201),d.Factories.Plane=e(58322),d.Creators.Shader=e(13908),d.Creators.Mesh=e(41839),d.Creators.NineSlice=e(40964),d.Creators.PointLight=e(162),d.Creators.Plane=e(10912),d.Light=e(14455),d.LightsManager=e(26193),d.LightsPlugin=e(50296),l.exports=d},85305:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(95723),x=e(56694),u=e(64937),h=e(48129),o=e(81078),n=e(6659),r=e(56631),f=e(71207),a=e(58010),c=e(7599),p=e(17922),v=new x({Extends:f,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Mask,u.PostPipeline,u.Visible,n,a],initialize:function(y,P){f.call(this,y),n.call(this),this.scene=y,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=y.sys,this.events=y.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(d.SKIP_CHECK),P&&this.add(P),y.sys.queueDepthSort()},setActive:function(m){return this.active=m,this},setName:function(m){return this.name=m,this},setState:function(m){return this.state=m,this},setDataEnabled:function(){return this.data||(this.data=new o(this)),this},setData:function(m,y){return this.data||(this.data=new o(this)),this.data.set(m,y),this},incData:function(m,y){return this.data||(this.data=new o(this)),this.data.inc(m,y),this},toggleData:function(m){return this.data||(this.data=new o(this)),this.data.toggle(m),this},getData:function(m){return this.data||(this.data=new o(this)),this.data.get(m)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return h(this)},willRender:function(m){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&m.id)},getIndexList:function(){for(var m=this,y=this.parentContainer,P=[];y&&(P.unshift(y.getIndex(m)),m=y,y.parentContainer);)y=y.parentContainer;return P.unshift(this.displayList.getIndex(m)),P},addChildCallback:function(m){m.displayList&&m.displayList!==this&&m.removeFromDisplayList(),m.displayList||(this.queueDepthSort(),m.displayList=this,m.emit(r.ADDED_TO_SCENE,m,this.scene),this.events.emit(c.ADDED_TO_SCENE,m,this.scene))},removeChildCallback:function(m){this.queueDepthSort(),m.displayList=null,m.emit(r.REMOVED_FROM_SCENE,m,this.scene),this.events.emit(c.REMOVED_FROM_SCENE,m,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(p(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(m,y){return m._depth-y._depth},getChildren:function(){return this.list},addToDisplayList:function(m){return m===void 0&&(m=this.scene.sys.displayList),this.displayList&&this.displayList!==m&&this.removeFromDisplayList(),m.exists(this)||(this.displayList=m,m.add(this,!0),m.queueDepthSort(),this.emit(r.ADDED_TO_SCENE,this,this.scene),m.events.emit(c.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var m=this.displayList||this.scene.sys.displayList;return m.exists(this)&&(m.remove(this,!0),m.queueDepthSort(),this.displayList=null,this.emit(r.REMOVED_FROM_SCENE,this,this.scene),m.events.emit(c.REMOVED_FROM_SCENE,this,this.scene)),this},destroy:function(m){if(!(!this.scene||this.ignoreDestroy)){this.emit(r.DESTROY,this);for(var y=this.list;y.length;)y[0].destroy(m);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});l.exports=v},834:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=d.list;if(u.length!==0){d.depthSort();var h=d.blendMode!==-1;h||e.setBlendMode(0);var o=d._alpha;d.mask&&d.mask.preRenderCanvas(e,null,x);for(var n=0;n<u.length;n++){var r=u[n];if(r.willRender(x)){var f=r.alpha;!h&&r.blendMode!==e.currentBlendMode&&e.setBlendMode(r.blendMode),r.setAlpha(f*o),r.renderCanvas(e,r,x),r.setAlpha(f)}}d.mask&&d.mask.postRenderCanvas(e)}};l.exports=T},56378:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(85305),u=e(99325),h=e(20494);u.register("layer",function(o,n){o===void 0&&(o={});var r=h(o,"children",null),f=new x(this.scene,r);return n!==void 0&&(o.add=n),d(this.scene,f,o),f})},17676:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(85305),x=e(61286);x.register("layer",function(u){return this.displayList.add(new d(this.scene,u))})},58010:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(17576),u=e(834),l.exports={renderWebGL:x,renderCanvas:u}},17576:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=d.list,h=u.length;if(h!==0){d.depthSort(),e.pipelines.preBatch(d);var o=d.blendMode!==-1;o||e.setBlendMode(0);for(var n=d.alpha,r=0;r<h;r++){var f=u[r];if(f.willRender(x)){var a,c,p,v;if(f.alphaTopLeft!==void 0)a=f.alphaTopLeft,c=f.alphaTopRight,p=f.alphaBottomLeft,v=f.alphaBottomRight;else{var m=f.alpha;a=m,c=m,p=m,v=m}!o&&f.blendMode!==e.currentBlendMode&&e.setBlendMode(f.blendMode);var y=f.mask;y&&y.preRenderWebGL(e,f,x);var P=f.type;P!==e.currentType&&(e.newType=!0,e.currentType=P),e.nextTypeMatch=r<h-1?u[r+1].type===e.currentType:!1,f.setAlpha(a*n,c*n,p*n,v*n),f.renderWebGL(e,f,x),f.setAlpha(a,c,p,v),y&&y.postRenderWebGL(e,x),e.newType=!1}}e.pipelines.postBatch(d)}};l.exports=T},14455:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(26673),x=e(56694),u=e(64937),h=e(39298),o=e(75512),n=new x({Extends:d,Mixins:[u.Origin,u.ScrollFactor,u.Transform,u.Visible],initialize:function(f,a,c,p,v,m,y){d.call(this,f,a,c),this.color=new h(p,v,m),this.intensity=y,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(c)},displayWidth:{get:function(){return this.diameter},set:function(r){this.diameter=r}},displayHeight:{get:function(){return this.diameter},set:function(r){this.diameter=r}},width:{get:function(){return this.diameter},set:function(r){this.diameter=r}},height:{get:function(){return this.diameter},set:function(r){this.diameter=r}},willRender:function(r){return!(n.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&r.id)},setColor:function(r){var f=o.getFloatsFromUintRGB(r);return this.color.set(f[0],f[1],f[2]),this},setIntensity:function(r){return this.intensity=r,this},setRadius:function(r){return this.radius=r,this}});n.RENDER_MASK=15,l.exports=n},26193:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(26535),x=e(56694),u=e(53996),h=e(14455),o=e(13171),n=e(39298),r=e(72677),f=e(17922),a=e(75512),c=new x({initialize:function(){this.lights=[],this.ambientColor=new n(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(p,v,m,y,P,E){return this.systems.displayList.add(new o(this.scene,p,v,m,y,P,E))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(p){for(var v=this.lights,m=p.worldView,y=[],P=0;P<v.length;P++){var E=v[P];E.willRender(p)&&d(E,m)&&y.push({light:E,distance:u(E.x,E.y,m.centerX,m.centerY)})}return y.length>this.maxLights&&(f(y,this.sortByDistance),y=y.slice(0,this.maxLights)),this.visibleLights=y.length,y},sortByDistance:function(p,v){return p.distance>=v.distance},setAmbientColor:function(p){var v=a.getFloatsFromUintRGB(p);return this.ambientColor.set(v[0],v[1],v[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(p,v,m,y,P){p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=128),y===void 0&&(y=16777215),P===void 0&&(P=1);var E=a.getFloatsFromUintRGB(y),S=new h(p,v,m,E[0],E[1],E[2],P);return this.lights.push(S),S},removeLight:function(p){var v=this.lights.indexOf(p);return v>=0&&r(this.lights,v),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});l.exports=c},50296:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(26193),u=e(91963),h=e(7599),o=new d({Extends:x,initialize:function(r){this.scene=r,this.systems=r.sys,r.sys.settings.isBooted||r.sys.events.once(h.BOOT,this.boot,this),x.call(this)},boot:function(){var n=this.systems.events;n.on(h.SHUTDOWN,this.shutdown,this),n.on(h.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});u.register("LightsPlugin",o,"lights"),l.exports=o},83321:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(64937),u=e(75606),h=e(18693),o=e(89980),n=e(53267),r=e(67623),f=e(73329),a=e(16650),c=e(23464),p=e(23701),v=e(17922),m=e(70015),y=e(85769),P=new d({Extends:o,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.Mask,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Size,x.Texture,x.Transform,x.Visible,c],initialize:function(S,w,R,A,O,F,b,D,I,B,k,U){w===void 0&&(w=0),R===void 0&&(R=0),A===void 0&&(A="__WHITE"),o.call(this,S,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new m,this.modelScale=new m(1,1,1),this.modelRotation=new m,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new a,this.viewPosition=new m,this.viewMatrix=new a,this.projectionMatrix=new a,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var X=S.sys.renderer;this.setPosition(w,R),this.setTexture(A,O),this.setSize(X.width,X.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(X.width,X.height),F&&this.addVertices(F,b,D,I,B,k,U)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(E){return this.viewPosition.addScale(m.LEFT,E),this.dirtyCache[10]=1,this},panY:function(E){return this.viewPosition.y+=m.DOWN.y*E,this.dirtyCache[10]=1,this},panZ:function(E){return this.viewPosition.z+=E,this.dirtyCache[10]=1,this},setPerspective:function(E,S,w,R,A){return w===void 0&&(w=45),R===void 0&&(R=.01),A===void 0&&(A=1e3),this.fov=w,this.projectionMatrix.perspective(u(w),E/S,R,A),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(E,S,w,R){return E===void 0&&(E=this.scene.sys.renderer.getAspectRatio()),S===void 0&&(S=1),w===void 0&&(w=-1e3),R===void 0&&(R=1e3),this.fov=0,this.projectionMatrix.ortho(-E,E,-S,S,w,R),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(E){E.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(E,S,w,R,A,O,F,b,D){var I=this.scene.sys.cache.obj.get(E),B;return I&&(B=n(I,this,S,w,R,A,O,F,b,D)),(!B||B.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",E),this},sortByDepth:function(E,S){return E.depth-S.depth},depthSort:function(){return v(this.faces,this.sortByDepth),this},addVertex:function(E,S,w,R,A,O,F){var b=new y(E,S,w,R,A,O,F);return this.vertices.push(b),b},addFace:function(E,S,w){var R=new h(E,S,w);return this.faces.push(R),this.dirtyCache[9]=-1,R},addVertices:function(E,S,w,R,A,O,F){var b=r(E,S,w,R,A,O,F);return b?(this.faces=this.faces.concat(b.faces),this.vertices=this.vertices.concat(b.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(E){return this.faces[E]},hasFaceAt:function(E,S,w){w===void 0&&(w=this.scene.sys.cameras.main);for(var R=f(this,w).calc,A=this.faces,O=0;O<A.length;O++){var F=A[O];if(F.contains(E,S,R))return!0}return!1},getFaceAt:function(E,S,w){w===void 0&&(w=this.scene.sys.cameras.main);for(var R=f(this,w).calc,A=this.faces,O=[],F=0;F<A.length;F++){var b=A[F];b.contains(E,S,R)&&O.push(b)}return v(O,this.sortByDepth)},setDebug:function(E,S){return this.debugGraphic=E,!E&&!S?this.debugCallback=null:S?this.debugCallback=S:this.debugCallback=this.renderDebug,this},isDirty:function(){var E=this.modelPosition,S=this.modelRotation,w=this.modelScale,R=this.dirtyCache,A=E.x,O=E.y,F=E.z,b=S.x,D=S.y,I=S.z,B=w.x,k=w.y,U=w.z,X=this.getFaceCount(),H=R[0],N=R[1],z=R[2],L=R[3],G=R[4],V=R[5],Y=R[6],W=R[7],$=R[8],K=R[9];return R[0]=A,R[1]=O,R[2]=F,R[3]=b,R[4]=D,R[5]=I,R[6]=B,R[7]=k,R[8]=U,R[9]=X,H!==A||N!==O||z!==F||L!==b||G!==D||V!==I||Y!==B||W!==k||$!==U||K!==X},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var E=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!E[10]&&!this.isDirty())){var S=this.width,w=this.height,R=this.viewMatrix,A=this.viewPosition;E[10]&&(R.identity(),R.translate(A),R.invert(),E[10]=0);var O=this.transformMatrix;O.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var F=A.z,b=this.faces,D=0;D<b.length;D++)b[D].transformCoordinatesLocal(O,S,w,F);this.depthSort()}},renderDebug:function(E,S){for(var w=E.debugGraphic,R=0;R<S.length;R++){var A=S[R],O=A.vertex1.tx,F=A.vertex1.ty,b=A.vertex2.tx,D=A.vertex2.ty,I=A.vertex3.tx,B=A.vertex3.ty;w.strokeTriangle(O,F,b,D,I,B)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(){var E=this.faces,S=function(w,R,A){for(var O=0;O<E.length;O++){var F=E[O];if(F.contains(R,A))return!0}return!1};return this.scene.sys.input.enable(this,S),this},setTint:function(E){E===void 0&&(E=16777215);for(var S=this.vertices,w=0;w<S.length;w++)S[w].color=E;return this},uvScroll:function(E,S){for(var w=this.faces,R=0;R<w.length;R++)w[R].scrollUV(E,S);return this},uvScale:function(E,S){for(var w=this.faces,R=0;R<w.length;R++)w[R].scaleUV(E,S);return this},tint:{set:function(E){this.setTint(E)}},rotateX:{get:function(){return p(this.modelRotation.x)},set:function(E){this.modelRotation.x=u(E)}},rotateY:{get:function(){return p(this.modelRotation.y)},set:function(E){this.modelRotation.y=u(E)}},rotateZ:{get:function(){return p(this.modelRotation.z)},set:function(E){this.modelRotation.z=u(E)}}});l.exports=P},6317:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){};l.exports=T},41839:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(99325),u=e(20494),h=e(10850),o=e(83321);x.register("mesh",function(n,r){n===void 0&&(n={});var f=u(n,"key",null),a=u(n,"frame",null),c=h(n,"vertices",[]),p=h(n,"uvs",[]),v=h(n,"indicies",[]),m=h(n,"containsZ",!1),y=h(n,"normals",[]),P=h(n,"colors",16777215),E=h(n,"alphas",1),S=new o(this.scene,0,0,f,a,c,p,v,m,y,P,E);return r!==void 0&&(n.add=r),d(this.scene,S,n),S})},8767:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83321),x=e(61286);x.register("mesh",function(u,h,o,n,r,f,a,c,p,v,m){return this.displayList.add(new d(this.scene,u,h,o,n,r,f,a,c,p,v,m))})},23464:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(57410),u=e(6317),l.exports={renderWebGL:x,renderCanvas:u}},57410:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=function(u,h,o,n){var r=h.faces,f=r.length;if(f!==0){o.addToRenderList(h);var a=u.pipelines.set(h.pipeline,h),c=d(h,o,n).calc;u.pipelines.preBatch(h);for(var p=a.setGameObject(h),v=a.vertexViewF32,m=a.vertexViewU32,y=a.vertexCount*a.currentShader.vertexComponentCount-1,P=h.tintFill,E=[],S=h.debugCallback,w=c.a,R=c.b,A=c.c,O=c.d,F=c.e,b=c.f,D=h.viewPosition.z,I=h.hideCCW,B=o.roundPixels,k=o.alpha*h.alpha,U=0,X=0;X<f;X++){var H=r[X];H.isInView(o,I,D,k,w,R,A,O,F,b,B)&&(a.shouldFlush(3)&&(a.flush(),p=a.setGameObject(h),y=0),y=H.load(v,m,y,p,P),U++,a.vertexCount+=3,a.currentBatch.count=a.vertexCount-a.currentBatch.start,S&&E.push(H))}h.totalFrame+=U,S&&S.call(h,h,E),u.pipelines.postBatch(h)}};l.exports=x},44139:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(64937),u=e(89980),h=e(94456),o=e(85769),n=new d({Extends:u,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.GetBounds,x.Mask,x.Origin,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Texture,x.Transform,x.Visible,h],initialize:function(f,a,c,p,v,m,y,P,E,S,w){m===void 0&&(m=256),y===void 0&&(y=256),P===void 0&&(P=10),E===void 0&&(E=10),S===void 0&&(S=0),w===void 0&&(w=0),u.call(this,f,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1,this.is3Slice=S===0&&w===0;for(var R=this.is3Slice?18:54,A=0;A<R;A++)this.vertices.push(new o);this.setPosition(a,c),this.setTexture(p,v),this.setSlices(m,y,P,E,S,w),this.setOrigin(.5,.5),this.initPipeline(),this.initPostPipeline()},setSlices:function(r,f,a,c,p,v){r===void 0&&(r=256),f===void 0&&(f=256),a===void 0&&(a=10),c===void 0&&(c=10),p===void 0&&(p=0),v===void 0&&(v=0);var m=p===0&&v===0;return this.is3Slice!==m?console.warn("Cannot change 9 slice to 3 slice"):(this._width=r,this._height=f,this.leftWidth=a,this.rightWidth=c,this.topHeight=p,this.bottomHeight=v,this.is3Slice&&(f=this.frame.height,this._height=f,this.topHeight=f,this.bottomHeight=0),this.updateVertices(),this.updateUVs()),this},updateUVs:function(){var r=this.leftWidth,f=this.rightWidth,a=this.topHeight,c=this.bottomHeight,p=this.frame.width,v=this.frame.height;this.updateQuadUVs(0,0,0,r/p,a/v),this.updateQuadUVs(6,r/p,0,1-f/p,a/v),this.updateQuadUVs(12,1-f/p,0,1,a/v),this.is3Slice||(this.updateQuadUVs(18,0,a/v,r/p,1-c/v),this.updateQuadUVs(24,r/p,a/v,1-f/p,1-c/v),this.updateQuadUVs(30,1-f/p,a/v,1,1-c/v),this.updateQuadUVs(36,0,1-c/v,r/p,1),this.updateQuadUVs(42,r/p,1-c/v,1-f/p,1),this.updateQuadUVs(48,1-f/p,1-c/v,1,1))},updateVertices:function(){var r=this.leftWidth,f=this.rightWidth,a=this.topHeight,c=this.bottomHeight,p=this.width,v=this.height;this.updateQuad(0,-.5,.5,-.5+r/p,.5-a/v),this.updateQuad(6,-.5+r/p,.5,.5-f/p,.5-a/v),this.updateQuad(12,.5-f/p,.5,.5,.5-a/v),this.is3Slice||(this.updateQuad(18,-.5,.5-a/v,-.5+r/p,-.5+c/v),this.updateQuad(24,-.5+r/p,.5-a/v,.5-f/p,-.5+c/v),this.updateQuad(30,.5-f/p,.5-a/v,.5,-.5+c/v),this.updateQuad(36,-.5,-.5+c/v,-.5+r/p,-.5),this.updateQuad(42,-.5+r/p,-.5+c/v,.5-f/p,-.5),this.updateQuad(48,.5-f/p,-.5+c/v,.5,-.5))},updateQuad:function(r,f,a,c,p){var v=this.width,m=this.height,y=this.originX,P=this.originY,E=this.vertices;E[r+0].resize(f,a,v,m,y,P),E[r+1].resize(f,p,v,m,y,P),E[r+2].resize(c,a,v,m,y,P),E[r+3].resize(f,p,v,m,y,P),E[r+4].resize(c,p,v,m,y,P),E[r+5].resize(c,a,v,m,y,P)},updateQuadUVs:function(r,f,a,c,p){var v=this.vertices,m=this.frame,y=m.u0,P=m.v0,E=m.u1,S=m.v1;if(y!==0||E!==1){var w=E-y;f=y+f*w,c=y+c*w}if(P!==0||S!==1){var R=S-P;a=P+a*R,p=P+p*R}v[r+0].setUVs(f,a),v[r+1].setUVs(f,p),v[r+2].setUVs(c,a),v[r+3].setUVs(f,p),v[r+4].setUVs(c,p),v[r+5].setUVs(c,a)},clearTint:function(){return this.setTint(16777215),this},setTint:function(r){return r===void 0&&(r=16777215),this.tint=r,this.tintFill=!1,this},setTintFill:function(r){return this.setTint(r),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(r){this._width=Math.max(r,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(r){this.is3Slice||(this._height=Math.max(r,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(r){this.scaleX=r/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(r){this.scaleY=r/this.height}},setSize:function(r,f){this.width=r,this.height=f;var a=this.input;return a&&!a.customHitArea&&(a.hitArea.width=this.width,a.hitArea.height=this.height),this},setDisplaySize:function(r,f){return this.displayWidth=r,this.displayHeight=f,this},originX:{get:function(){return this._originX},set:function(r){this._originX=r,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(r){this._originY=r,this.updateVertices()}},setOrigin:function(r,f){return r===void 0&&(r=.5),f===void 0&&(f=r),this._originX=r,this._originY=f,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var r=this.frame.height;this._height=r,this.topHeight=r,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});l.exports=n},40964:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(99325),u=e(20494),h=e(10850),o=e(44139);x.register("nineslice",function(n,r){n===void 0&&(n={});var f=u(n,"key",null),a=u(n,"frame",null),c=h(n,"width",256),p=h(n,"height",256),v=h(n,"leftWidth",10),m=h(n,"rightWidth",10),y=h(n,"topHeight",0),P=h(n,"bottomHeight",0),E=new o(this.scene,0,0,f,a,c,p,v,m,y,P);return r!==void 0&&(n.add=r),d(this.scene,E,n),E})},53778:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(44139),x=e(61286);x.register("nineslice",function(u,h,o,n,r,f,a,c,p,v){return this.displayList.add(new d(this.scene,u,h,o,n,r,f,a,c,p,v))})},94456:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(27420),l.exports={renderWebGL:x,renderCanvas:u}},27420:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=e(75512),u=function(h,o,n,r){var f=o.vertices,a=f.length;if(a!==0){n.addToRenderList(o);var c=h.pipelines.set(o.pipeline,o),p=d(o,n,r,!1).calc;h.pipelines.preBatch(o);var v=c.setGameObject(o),m=c.vertexViewF32,y=c.vertexViewU32,P=c.vertexCount*c.currentShader.vertexComponentCount-1,E=n.roundPixels,S=o.tintFill,w=n.alpha*o.alpha,R=x.getTintAppendFloatAlpha(o.tint,w),A=c.vertexAvailable(),O=-1;A<a&&(O=A);for(var F=0;F<a;F++){var b=f[F];F===O&&(c.flush(),v=c.setGameObject(o),P=0),m[++P]=p.getXRound(b.vx,b.vy,E),m[++P]=p.getYRound(b.vx,b.vy,E),m[++P]=b.u,m[++P]=b.v,m[++P]=v,m[++P]=S,y[++P]=R,c.vertexCount++,c.currentBatch.count=c.vertexCount-c.currentBatch.start}h.pipelines.postBatch(o)}};l.exports=u},19737:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(93025),u=e(22946),h=e(21902),o=e(4840),n=e(15978),r=new d({Extends:x,initialize:function(a){x.call(this,a,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var f=this.propertyValue,a=f,c=this.defaultEmit,p=this.defaultUpdate;if(this.method===9){this.start=f[0],this.ease=h("Linear"),this.interpolation=o("linear"),c=this.easedValueEmit,p=this.easeValueUpdate,a=f[0],this.active=!0;for(var v=0;v<f.length;v++){var m=n(f[v]);this.r.push(m.r),this.g.push(m.g),this.b.push(m.b)}}return this.onEmit=c,this.onUpdate=p,this.current=a,this},setEase:function(f){this.easeName=f,this.ease=h(f)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(f,a,c){var p=this.ease(c),v=this.interpolation(this.r,p),m=this.interpolation(this.g,p),y=this.interpolation(this.b,p),P=u(v,m,y);return this.current=P,P}});l.exports=r},93025:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(17489),x=e(82897),u=e(56694),h=e(61616),o=e(21902),n=e(72632),r=e(4840),f=e(88462),a=e(1071),c=new u({initialize:function(v,m,y){y===void 0&&(y=!1),this.propertyKey=v,this.propertyValue=m,this.defaultValue=m,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=y,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(p,v){p===void 0&&(p={}),v&&(this.propertyKey=v),this.propertyValue=n(p,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(p){var v;switch(this.method){case 1:case 3:case 8:v=p;break;case 2:this.propertyValue.indexOf(p)>=0&&(v=p);break;case 4:var m=(this.end-this.start)/this.steps;v=f(p,m),this.counter=v;break;case 5:case 6:case 7:v=x(p,this.start,this.end);break;case 9:v=this.start[0];break}return this.current=v,this},getMethod:function(){var p=this.propertyValue;if(p===null)return 0;var v=typeof p;if(v==="number")return 1;if(Array.isArray(p))return 2;if(v==="function")return 3;if(v==="object"){if(this.hasBoth(p,"start","end"))return this.has(p,"steps")?4:5;if(this.hasBoth(p,"min","max"))return 6;if(this.has(p,"random"))return 7;if(this.hasEither(p,"onEmit","onUpdate"))return 8;if(this.has(p,"interpolation"))return 9}return 0},setMethods:function(){var p=this.propertyValue,v=p,m=this.defaultEmit,y=this.defaultUpdate;switch(this.method){case 1:m=this.staticValueEmit;break;case 2:m=this.randomStaticValueEmit,v=p[0];break;case 3:this._onEmit=p,m=this.proxyEmit;break;case 4:this.start=p.start,this.end=p.end,this.steps=p.steps,this.counter=this.start,this.yoyo=this.has(p,"yoyo")?p.yoyo:!1,this.direction=0,m=this.steppedEmit,v=this.start;break;case 5:this.start=p.start,this.end=p.end;var P=this.has(p,"ease")?p.ease:"Linear";this.ease=o(P,p.easeParams),m=this.has(p,"random")&&p.random?this.randomRangedValueEmit:this.easedValueEmit,y=this.easeValueUpdate,v=this.start;break;case 6:this.start=p.min,this.end=p.max,m=this.has(p,"int")&&p.int?this.randomRangedIntEmit:this.randomRangedValueEmit,v=this.start;break;case 7:var E=p.random;Array.isArray(E)&&(this.start=E[0],this.end=E[1]),m=this.randomRangedIntEmit,v=this.start;break;case 8:this._onEmit=this.has(p,"onEmit")?p.onEmit:this.defaultEmit,this._onUpdate=this.has(p,"onUpdate")?p.onUpdate:this.defaultUpdate,m=this.proxyEmit,y=this.proxyUpdate;break;case 9:this.start=p.values;var S=this.has(p,"ease")?p.ease:"Linear";this.ease=o(S,p.easeParams),this.interpolation=r(p.interpolation),m=this.easedValueEmit,y=this.easeValueUpdate,v=this.start[0];break}return this.onEmit=m,this.onUpdate=y,this.current=v,this},has:function(p,v){return p.hasOwnProperty(v)},hasBoth:function(p,v,m){return p.hasOwnProperty(v)&&p.hasOwnProperty(m)},hasEither:function(p,v,m){return p.hasOwnProperty(v)||p.hasOwnProperty(m)},defaultEmit:function(p,v,m){return m},defaultUpdate:function(p,v,m,y){return y},proxyEmit:function(p,v,m){var y=this._onEmit(p,v,m);return this.current=y,y},proxyUpdate:function(p,v,m,y){var P=this._onUpdate(p,v,m,y);return this.current=P,P},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var p=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[p],this.current},randomRangedValueEmit:function(p,v){var m=h(this.start,this.end);return p&&p.data[v]&&(p.data[v].min=m,p.data[v].max=this.end),this.current=m,m},randomRangedIntEmit:function(p,v){var m=d(this.start,this.end);return p&&p.data[v]&&(p.data[v].min=m,p.data[v].max=this.end),this.current=m,m},steppedEmit:function(){var p=this.counter,v=p,m=(this.end-this.start)/this.steps;if(this.yoyo){var y;this.direction===0?(v+=m,v>=this.end&&(y=v-this.end,v=this.end-y,this.direction=1)):(v-=m,v<=this.start&&(y=this.start-v,v=this.start+y,this.direction=0)),this.counter=v}else this.counter=a(v+m,this.start,this.end);return this.current=p,p},easedValueEmit:function(p,v){if(p&&p.data[v]){var m=p.data[v];m.min=this.start,m.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(p,v,m){var y=p.data[v],P,E=this.ease(m);return this.interpolation?P=this.interpolation(this.start,E):P=(y.max-y.min)*E+y.min,this.current=P,P},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});l.exports=c},87811:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72632),u=e(30891),h=new d({Extends:u,initialize:function(n,r,f,a,c){if(typeof n=="object"){var p=n;n=x(p,"x",0),r=x(p,"y",0),f=x(p,"power",0),a=x(p,"epsilon",100),c=x(p,"gravity",50)}else n===void 0&&(n=0),r===void 0&&(r=0),f===void 0&&(f=0),a===void 0&&(a=100),c===void 0&&(c=50);u.call(this,n,r,!0),this._gravity=c,this._power=f*c,this._epsilon=a*a},update:function(o,n){var r=this.x-o.x,f=this.y-o.y,a=r*r+f*f;if(a!==0){var c=Math.sqrt(a);a<this._epsilon&&(a=this._epsilon);var p=this._power*n/(a*c)*100;o.velocityX+=r*p,o.velocityY+=f*p}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(o){this._epsilon=o*o}},power:{get:function(){return this._power/this._gravity},set:function(o){this._power=o*this._gravity}},gravity:{get:function(){return this._gravity},set:function(o){var n=this.power;this._gravity=o,this.power=n}}});l.exports=h},14909:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16569),x=e(82897),u=e(56694),h=e(75606),o=e(74118),n=e(2386),r=e(93736),f=new u({initialize:function(c){this.emitter=c,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new r,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=c.scene,this.anims=new d(this),this.bounds=new o},emit:function(a,c,p,v,m,y){return this.emitter.emit(a,c,p,v,m,y)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(a,c){a===void 0&&(a=0),c===void 0&&(c=0),this.x=a,this.y=c},fire:function(a,c){var p=this.emitter,v=p.ops,m=p.getAnim();if(m?this.anims.play(m):(this.frame=p.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(p.getEmitZone(this),a===void 0?this.x+=v.x.onEmit(this,"x"):v.x.steps>0?this.x+=a+v.x.onEmit(this,"x"):this.x+=a,c===void 0?this.y+=v.y.onEmit(this,"y"):v.y.steps>0?this.y+=c+v.y.onEmit(this,"y"):this.y+=c,this.life=v.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=v.delay.onEmit(this,"delay"),this.holdCurrent=v.hold.onEmit(this,"hold"),this.scaleX=v.scaleX.onEmit(this,"scaleX"),this.scaleY=v.scaleY.active?v.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=v.rotate.onEmit(this,"rotate"),this.rotation=h(this.angle),p.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&p.getDeathZone(this))return this.lifeCurrent=0,!1;var y=v.speedX.onEmit(this,"speedX"),P=v.speedY.active?v.speedY.onEmit(this,"speedY"):y;if(p.radial){var E=h(v.angle.onEmit(this,"angle"));this.velocityX=Math.cos(E)*Math.abs(y),this.velocityY=Math.sin(E)*Math.abs(P)}else if(p.moveTo){var S=v.moveToX.onEmit(this,"moveToX"),w=v.moveToY.onEmit(this,"moveToY"),R=this.life/1e3;this.velocityX=(S-this.x)/R,this.velocityY=(w-this.y)/R}else this.velocityX=y,this.velocityY=P;return p.acceleration&&(this.accelerationX=v.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=v.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=v.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=v.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=v.bounce.onEmit(this,"bounce"),this.alpha=v.alpha.onEmit(this,"alpha"),v.color.active?this.tint=v.color.onEmit(this,"tint"):this.tint=v.tint.onEmit(this,"tint"),!0},update:function(a,c,p){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=a,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=a,!1;this.anims.update(0,a);var v=this.emitter,m=v.ops,y=1-this.lifeCurrent/this.life;if(this.lifeT=y,this.x=m.x.onUpdate(this,"x",y,this.x),this.y=m.y.onUpdate(this,"y",y,this.y),v.moveTo){var P=m.moveToX.onUpdate(this,"moveToX",y,v.moveToX),E=m.moveToY.onUpdate(this,"moveToY",y,v.moveToY),S=this.lifeCurrent/1e3;this.velocityX=(P-this.x)/S,this.velocityY=(E-this.y)/S}return this.computeVelocity(v,a,c,p,y),this.scaleX=m.scaleX.onUpdate(this,"scaleX",y,this.scaleX),this.scaleY=this.scaleX,m.scaleY.active&&(this.scaleY=m.scaleY.onUpdate(this,"scaleY",y,this.scaleY)),this.angle=m.rotate.onUpdate(this,"rotate",y,this.angle),this.rotation=h(this.angle),v.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=m.alpha.onUpdate(this,"alpha",y,this.alpha),m.color.active?this.tint=m.color.onUpdate(this,"color",y,this.tint):this.tint=m.tint.onUpdate(this,"tint",y,this.tint),this.lifeCurrent-=a,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(a,c,p,v,m){var y=a.ops,P=this.velocityX,E=this.velocityY,S=y.accelerationX.onUpdate(this,"accelerationX",m,this.accelerationX),w=y.accelerationY.onUpdate(this,"accelerationY",m,this.accelerationY),R=y.maxVelocityX.onUpdate(this,"maxVelocityX",m,this.maxVelocityX),A=y.maxVelocityY.onUpdate(this,"maxVelocityY",m,this.maxVelocityY);this.bounce=y.bounce.onUpdate(this,"bounce",m,this.bounce),P+=a.gravityX*p+S*p,E+=a.gravityY*p+w*p,P=x(P,-R,R),E=x(E,-A,A),this.velocityX=P,this.velocityY=E,this.x+=P*p,this.y+=E*p,a.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var O=0;O<v.length;O++){var F=v[O];F.active&&F.update(this,c,p,m)}},setSizeToFrame:function(){},getBounds:function(a){a===void 0&&(a=this.emitter.getWorldTransformMatrix());var c=Math.abs(a.scaleX)*this.scaleX,p=Math.abs(a.scaleY)*this.scaleY,v=this.x,m=this.y,y=this.rotation,P=this.frame.width*c/2,E=this.frame.height*p/2,S=this.bounds,w=new r(v-P,m-E),R=new r(v+P,m-E),A=new r(v-P,m+E),O=new r(v+P,m+E);return y!==0&&(n(w,v,m,y),n(R,v,m,y),n(A,v,m,y),n(O,v,m,y)),a.transformPoint(w.x,w.y,w),a.transformPoint(R.x,R.y,R),a.transformPoint(A.x,A.y,A),a.transformPoint(O.x,O.y,O),S.x=Math.min(w.x,R.x,A.x,O.x),S.y=Math.min(w.y,R.y,A.y,O.y),S.width=Math.max(w.x,R.x,A.x,O.x)-S.x,S.height=Math.max(w.y,R.y,A.y,O.y)-S.y,S},destroy:function(){this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});l.exports=f},73106:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(30891),u=e(74118),h=new d({Extends:x,initialize:function(n,r,f,a,c,p,v,m){c===void 0&&(c=!0),p===void 0&&(p=!0),v===void 0&&(v=!0),m===void 0&&(m=!0),x.call(this,n,r,!0),this.bounds=new u(n,r,f,a),this.collideLeft=c,this.collideRight=p,this.collideTop=v,this.collideBottom=m},update:function(o){var n=this.bounds,r=-o.bounce,f=o.worldPosition;f.x<n.x&&this.collideLeft?(o.x+=n.x-f.x,o.velocityX*=r):f.x>n.right&&this.collideRight&&(o.x-=f.x-n.right,o.velocityX*=r),f.y<n.y&&this.collideTop?(o.y+=n.y-f.y,o.velocityY*=r):f.y>n.bottom&&this.collideBottom&&(o.y-=f.y-n.bottom,o.velocityY*=r)}});l.exports=h},9216:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(64937),u=e(48129),h=e(29538),o=e(69361),n=e(54213),r=e(19737),f=e(93025),a=e(40629),c=e(89980),p=e(72632),v=e(72861),m=e(87811),y=e(53523),P=e(19256),E=e(7782),S=e(71207),w=e(14655),R=e(14909),A=e(68433),O=e(74118),F=e(90205),b=e(66458),D=e(69116),I=e(17922),B=e(69360),k=e(93736),U=e(1071),X=e(73106),H=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],N=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],z=new d({Extends:c,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.Mask,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Texture,x.Transform,x.Visible,D],initialize:function(G,V,Y,W,$){c.call(this,G,"ParticleEmitter"),this.particleClass=R,this.ops={accelerationX:new f("accelerationX",0),accelerationY:new f("accelerationY",0),alpha:new f("alpha",1),angle:new f("angle",{min:0,max:360},!0),bounce:new f("bounce",0),color:new r("color"),delay:new f("delay",0,!0),hold:new f("hold",0,!0),lifespan:new f("lifespan",1e3,!0),maxVelocityX:new f("maxVelocityX",1e4),maxVelocityY:new f("maxVelocityY",1e4),moveToX:new f("moveToX",0),moveToY:new f("moveToY",0),quantity:new f("quantity",1,!0),rotate:new f("rotate",0),scaleX:new f("scaleX",1),scaleY:new f("scaleY",1),speedX:new f("speedX",0,!0),speedY:new f("speedY",0,!0),tint:new f("tint",16777215),x:new f("x",0),y:new f("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new k,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new B,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new S(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(V,Y),this.setTexture(W),$&&this.setConfig($)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(L){if(!L)return this;var G=0,V="",Y=this.ops;for(G=0;G<N.length;G++)V=N[G],Y[V].loadConfig(L);for(G=0;G<H.length;G++)V=H[G],P(L,V)&&(this[V]=p(L,V));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=this.moveToX!==0&&this.moveToY!==0,P(L,"speed")&&(Y.speedX.loadConfig(L,"speed"),Y.speedY.active=!1),(y(L,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),P(L,"scale")&&(Y.scaleX.loadConfig(L,"scale"),Y.scaleY.active=!1),P(L,"callbackScope")){var W=p(L,"callbackScope",null);this.emitCallbackScope=W,this.deathCallbackScope=W}if(P(L,"emitZone")&&this.addEmitZone(L.emitZone),P(L,"deathZone")&&this.addDeathZone(L.deathZone),P(L,"bounds")){var $=this.addParticleBounds(L.bounds);$.collideLeft=p(L,"collideLeft",!0),$.collideRight=p(L,"collideRight",!0),$.collideTop=p(L,"collideTop",!0),$.collideBottom=p(L,"collideBottom",!0)}return P(L,"followOffset")&&this.followOffset.setFromObject(p(L,"followOffset",0)),P(L,"texture")&&this.setTexture(L.texture),P(L,"frame")?this.setEmitterFrame(L.frame):P(L,"anim")&&this.setAnim(L.anim),P(L,"reserve")&&this.reserve(L.reserve),P(L,"advance")&&this.fastForward(L.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(a.START,this),this},toJSON:function(){var L=u(this),G=0,V="";for(G=0;G<H.length;G++)V=H[G],L[V]=this[V];var Y=this.ops;for(G=0;G<N.length;G++)V=N[G],Y[V]&&(L[V]=Y[V].toJSON());return Y.speedY.active||(delete L.speedX,L.speed=Y.speedX.toJSON()),this.scaleX===this.scaleY&&(delete L.scaleX,delete L.scaleY,L.scale=Y.scaleX.toJSON()),L},resetCounters:function(L,G){var V=this.counters;V.fill(0),V[0]=L,G&&(V[5]=1)},startFollow:function(L,G,V,Y){return G===void 0&&(G=0),V===void 0&&(V=0),Y===void 0&&(Y=!1),this.follow=L,this.followOffset.set(G,V),this.trackVisible=Y,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var L=this.frames,G=L.length,V;return G===1?V=L[0]:this.randomFrame?V=v(L):(V=L[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===G&&(this.currentFrame=0))),this.texture.get(V)},setEmitterFrame:function(L,G,V){G===void 0&&(G=!0),V===void 0&&(V=1),this.randomFrame=G,this.frameQuantity=V,this.currentFrame=0;var Y=typeof L;if(this.frames.length=0,Array.isArray(L))this.frames=this.frames.concat(L);else if(Y==="string"||Y==="number")this.frames.push(L);else if(Y==="object"){var W=L;L=p(W,"frames",null),L&&(this.frames=this.frames.concat(L));var $=p(W,"cycle",!1);this.randomFrame=!$,this.frameQuantity=p(W,"quantity",V)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var L=this.anims,G=L.length;if(G===0)return null;if(G===1)return L[0];if(this.randomAnim)return v(L);var V=L[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=U(this.currentAnim+1,0,G-1)),V},setAnim:function(L,G,V){G===void 0&&(G=!0),V===void 0&&(V=1),this.randomAnim=G,this.animQuantity=V,this.currentAnim=0;var Y=typeof L;if(this.anims.length=0,Array.isArray(L))this.anims=this.anims.concat(L);else if(Y==="string")this.anims.push(L);else if(Y==="object"){var W=L;L=p(W,"anims",null),L&&(this.anims=this.anims.concat(L));var $=p(W,"cycle",!1);this.randomAnim=!$,this.animQuantity=p(W,"quantity",V)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(L){return L===void 0&&(L=!0),this.radial=L,this},addParticleBounds:function(L,G,V,Y,W,$,K,j){if(typeof L=="object"){var J=L;L=J.x,G=J.y,V=P(J,"w")?J.w:J.width,Y=P(J,"h")?J.h:J.height}return this.addParticleProcessor(new X(L,G,V,Y,W,$,K,j))},setParticleSpeed:function(L,G){return G===void 0&&(G=L),this.ops.speedX.onChange(L),L===G?this.ops.speedY.active=!1:this.ops.speedY.onChange(G),this.radial=!0,this},setParticleScale:function(L,G){return L===void 0&&(L=1),G===void 0&&(G=L),this.ops.scaleX.onChange(L),this.ops.scaleY.onChange(G),this},setParticleGravity:function(L,G){return this.gravityX=L,this.gravityY=G,this},setParticleAlpha:function(L){return this.ops.alpha.onChange(L),this},setParticleTint:function(L){return this.ops.tint.onChange(L),this},setEmitterAngle:function(L){return this.ops.angle.onChange(L),this},setParticleLifespan:function(L){return this.ops.lifespan.onChange(L),this},setQuantity:function(L){return this.quantity=L,this},setFrequency:function(L,G){return this.frequency=L,this.flowCounter=L>0?L:0,G&&(this.quantity=G),this},addDeathZone:function(L){Array.isArray(L)||(L=[L]);for(var G,V=this.deathZones,Y=0;Y<L.length;Y++)if(G=L[Y],G instanceof o)V.push(G);else if(typeof G.contains=="function")G=new o(G,!0),V.push(G);else{var W=p(G,"type","onEnter"),$=p(G,"source",null);if($&&typeof $.contains=="function"){var K=W==="onEnter";G=new o($,K),V.push(G)}}return G},removeDeathZone:function(L){return b(this.deathZones,L),this},addEmitZone:function(L){Array.isArray(L)||(L=[L]);for(var G,V=this.emitZones,Y=[],W=0;W<L.length;W++){if(G=L[W],G instanceof A||G instanceof n)V.push(G);else{var $=p(G,"type","random"),K=p(G,"source",null);if($==="random")G=new A(K);else if($==="edge"){var j=p(G,"quantity",1),J=p(G,"stepRate",0),q=p(G,"yoyo",!1),_=p(G,"seamless",!0),et=p(G,"total",-1);G=new n(K,j,J,q,_,et)}G&&V.push(G)}Y.push(G)}return Y},removeEmitZone:function(L){return b(this.emitZones,L),this.zoneIndex=0,this},getEmitZone:function(L){var G=this.emitZones,V=G.length;if(V!==0){var Y=G[this.zoneIndex];Y.getPoint(L),Y.total>-1&&(this.zoneTotal++,this.zoneTotal===Y.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===V&&(this.zoneIndex=0)))}},getDeathZone:function(L){for(var G=this.deathZones,V=0;V<G.length;V++){var Y=G[V];if(Y.willKill(L))return this.emit(a.DEATH_ZONE,this,L,Y),!0}return!1},setEmitZone:function(L){var G;return isFinite(L)?G=L:G=this.emitZones.indexOf(L),G>=0&&(this.zoneIndex=G),this},addParticleProcessor:function(L){return this.processors.exists(L)||(L.emitter&&L.emitter.removeParticleProcessor(L),this.processors.add(L),L.emitter=this),L},removeParticleProcessor:function(L){return this.processors.exists(L)&&(this.processors.remove(L,!0),L.emitter=null),L},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(L){return this.addParticleProcessor(new m(L))},reserve:function(L){var G=this.dead;if(this.maxParticles>0){var V=this.getParticleCount();V+L>this.maxParticles&&(L=this.maxParticles-(V+L))}for(var Y=0;Y<L;Y++)G.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(L,G){return L===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof L=="function"&&(this.emitCallback=L,G&&(this.emitCallbackScope=G)),this},onParticleDeath:function(L,G){return L===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof L=="function"&&(this.deathCallback=L,G&&(this.deathCallbackScope=G)),this},killAll:function(){for(var L=this.dead,G=this.alive;G.length>0;)L.push(G.pop());return this},forEachAlive:function(L,G){for(var V=this.alive,Y=V.length,W=0;W<Y;W++)L.call(G,V[W],this);return this},forEachDead:function(L,G){for(var V=this.dead,Y=V.length,W=0;W<Y;W++)L.call(G,V[W],this);return this},start:function(L,G){return L===void 0&&(L=0),this.emitting||(L>0&&this.fastForward(L),this.emitting=!0,this.resetCounters(this.frequency,!0),G!==void 0&&(this.duration=Math.abs(G)),this.emit(a.START,this)),this},stop:function(L){return L===void 0&&(L=!1),this.emitting&&(this.emitting=!1,L&&this.killAll(),this.emit(a.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(L,G){return L===void 0&&(L=""),G===void 0&&(G=this.true),this.sortProperty=L,this.sortOrderAsc=G,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(L){return this.sortProperty!==""?L=this.depthSortCallback:L=null,this.sortCallback=L,this},depthSort:function(){return I(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(L,G){var V=this.sortProperty;return this.sortOrderAsc?L[V]-G[V]:G[V]-L[V]},flow:function(L,G,V){return G===void 0&&(G=1),this.emitting=!1,this.frequency=L,this.quantity=G,V!==void 0&&(this.stopAfter=V),this.start()},explode:function(L,G,V){this.frequency=-1,this.resetCounters(-1,!0);var Y=this.emitParticle(L,G,V);return this.emit(a.EXPLODE,this,Y),Y},emitParticleAt:function(L,G,V){return this.emitParticle(V,L,G)},emitParticle:function(L,G,V){if(!this.atLimit()){L===void 0&&(L=this.ops.quantity.onEmit());for(var Y=this.dead,W=this.stopAfter,$=this.follow?this.follow.x+this.followOffset.x:G,K=this.follow?this.follow.y+this.followOffset.y:V,j=0;j<L;j++){var J=Y.pop();if(J||(J=new this.particleClass(this)),J.fire($,K)?(this.particleBringToTop?this.alive.push(J):this.alive.unshift(J),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,J,this)):this.dead.push(J),W>0&&(this.stopCounter++,this.stopCounter>=W)||this.atLimit())break}return J}},fastForward:function(L,G){G===void 0&&(G=1e3/60);var V=0;for(this.skipping=!0;V<Math.abs(L);)this.preUpdate(0,G),V+=G;return this.skipping=!1,this},preUpdate:function(L,G){G*=this.timeScale;var V=G/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var Y=this.getProcessors(),W=this.alive,$=this.dead,K=0,j=[],J=W.length;for(K=0;K<J;K++){var q=W[K];q.update(G,V,Y)&&j.push({index:K,particle:q})}if(J=j.length,J>0){var _=this.deathCallback,et=this.deathCallbackScope;for(K=J-1;K>=0;K--){var tt=j[K];W.splice(tt.index,1),$.push(tt.particle),_&&_.call(et,tt.particle),tt.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&W.length===0&&(this.completeFlag=0,this.emit(a.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=G;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=G,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(L){for(var G=this.getWorldTransformMatrix(),V=this.alive,Y=V.length,W=[],$=0;$<Y;$++){var K=V[$];F(L,K.getBounds(G))&&W.push(K)}return W},getBounds:function(L,G,V,Y){L===void 0&&(L=0),G===void 0&&(G=0),V===void 0&&(V=1e3/60),Y===void 0&&(Y=new O);var W=this.getWorldTransformMatrix(),$,K,j=this.alive,J=!1;if(Y.setTo(0,0,0,0),G>0){var q=0;for(this.skipping=!0;q<Math.abs(G);){for(this.preUpdate(0,V),$=0;$<j.length;$++)K=j[$].getBounds(W),J?w(Y,K):(J=!0,h(K,Y));q+=V}this.skipping=!1}else for($=0;$<j.length;$++)K=j[$].getBounds(W),J?w(Y,K):(J=!0,h(K,Y));return L>0&&E(Y,L,L),Y},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(L){this.ops.x.onChange(L)}},particleY:{get:function(){return this.ops.y.current},set:function(L){this.ops.y.onChange(L)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(L){this.ops.accelerationX.onChange(L)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(L){this.ops.accelerationY.onChange(L)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(L){this.ops.maxVelocityX.onChange(L)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(L){this.ops.maxVelocityY.onChange(L)}},speed:{get:function(){return this.ops.speedX.current},set:function(L){this.ops.speedX.onChange(L),this.ops.speedY.onChange(L)}},speedX:{get:function(){return this.ops.speedX.current},set:function(L){this.ops.speedX.onChange(L)}},speedY:{get:function(){return this.ops.speedY.current},set:function(L){this.ops.speedY.onChange(L)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(L){this.ops.moveToX.onChange(L)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(L){this.ops.moveToY.onChange(L)}},bounce:{get:function(){return this.ops.bounce.current},set:function(L){this.ops.bounce.onChange(L)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(L){this.ops.scaleX.onChange(L)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(L){this.ops.scaleY.onChange(L)}},particleColor:{get:function(){return this.ops.color.current},set:function(L){this.ops.color.onChange(L)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(L){this.ops.color.setEase(L)}},particleTint:{get:function(){return this.ops.tint.current},set:function(L){this.ops.tint.onChange(L)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(L){this.ops.alpha.onChange(L)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(L){this.ops.lifespan.onChange(L)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(L){this.ops.angle.onChange(L)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(L){this.ops.rotate.onChange(L)}},quantity:{get:function(){return this.ops.quantity.current},set:function(L){this.ops.quantity.onChange(L)}},delay:{get:function(){return this.ops.delay.current},set:function(L){this.ops.delay.onChange(L)}},hold:{get:function(){return this.ops.hold.current},set:function(L){this.ops.hold.onChange(L)}},flowCounter:{get:function(){return this.counters[0]},set:function(L){this.counters[0]=L}},frameCounter:{get:function(){return this.counters[1]},set:function(L){this.counters[1]=L}},animCounter:{get:function(){return this.counters[2]},set:function(L){this.counters[2]=L}},elapsed:{get:function(){return this.counters[3]},set:function(L){this.counters[3]=L}},stopCounter:{get:function(){return this.counters[4]},set:function(L){this.counters[4]=L}},completeFlag:{get:function(){return this.counters[5]},set:function(L){this.counters[5]=L}},zoneIndex:{get:function(){return this.counters[6]},set:function(L){this.counters[6]=L}},zoneTotal:{get:function(){return this.counters[7]},set:function(L){this.counters[7]=L}},currentFrame:{get:function(){return this.counters[8]},set:function(L){this.counters[8]=L}},currentAnim:{get:function(){return this.counters[9]},set:function(L){this.counters[9]=L}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var L,G=this.ops;for(L=0;L<N.length;L++){var V=N[L];G[V].destroy()}for(L=0;L<this.alive.length;L++)this.alive[L].destroy();for(L=0;L<this.dead.length;L++)this.dead[L].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});l.exports=z},10456:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(90205),x=e(69360),u=new x,h=new x,o=new x,n=new x,r=function(f,a,c,p){var v=u,m=h,y=o,P=n;p?(P.loadIdentity(),P.multiply(p),P.translate(a.x,a.y),P.rotate(a.rotation),P.scale(a.scaleX,a.scaleY)):P.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY);var E=f.currentContext,S=c.roundPixels,w=c.alpha,R=a.alpha,A=a.alive,O=A.length,F=a.viewBounds;if(!(!a.visible||O===0||F&&!d(F,c.worldView))){a.sortCallback&&a.depthSort(),c.addToRenderList(a);var b=a.scrollFactorX,D=a.scrollFactorY;E.save(),E.globalCompositeOperation=f.blendModes[a.blendMode];for(var I=0;I<O;I++){var B=A[I],k=B.alpha*R*w;if(!(k<=0||B.scaleX===0||B.scaleY===0)){y.applyITRS(B.x,B.y,B.rotation,B.scaleX,B.scaleY),v.copyFrom(c.matrix),v.multiplyWithOffset(P,-c.scrollX*b,-c.scrollY*D),y.e=B.x,y.f=B.y,v.multiply(y,m);var U=B.frame,X=U.canvasData;if(X.width>0&&X.height>0){var H=-U.halfWidth,N=-U.halfHeight;E.globalAlpha=k,E.save(),m.setToContext(E),S&&(H=Math.round(H),N=Math.round(N)),E.imageSmoothingEnabled=!U.source.scaleMode,E.drawImage(U.source.image,X.x,X.y,X.width,X.height,H,N,X.width,X.height),E.restore()}}}E.restore()}};l.exports=r},765:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(99325),u=e(20494),h=e(72632),o=e(9216);x.register("particles",function(n,r){n===void 0&&(n={});var f=u(n,"key",null),a=h(n,"config",null),c=new o(this.scene,0,0,f);return r!==void 0&&(n.add=r),d(this.scene,c,n),a&&c.setConfig(a),c})},81212:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(9216);d.register("particles",function(u,h,o,n){return u!==void 0&&typeof u=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new x(this.scene,u,h,o,n))})},69116:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(10275),u=e(10456),l.exports={renderWebGL:x,renderCanvas:u}},10275:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(90205),x=e(69360),u=e(75512),h=new x,o=new x,n=new x,r=new x,f=function(a,c,p,v){var m=a.pipelines.set(c.pipeline),y=h,P=o,E=n,S=r;v?(S.loadIdentity(),S.multiply(v),S.translate(c.x,c.y),S.rotate(c.rotation),S.scale(c.scaleX,c.scaleY)):S.applyITRS(c.x,c.y,c.rotation,c.scaleX,c.scaleY);var w=p.roundPixels,R=u.getTintAppendFloatAlpha,A=p.alpha,O=c.alpha,F=c.frame.glTexture;a.pipelines.preBatch(c);var b=c.alive,D=b.length,I=c.viewBounds;if(!(D===0||I&&!d(I,p.worldView))){c.sortCallback&&c.depthSort();var B=m.setGameObject(c,c.frame);p.addToRenderList(c),y.copyFrom(p.matrix),y.multiplyWithOffset(S,-p.scrollX*c.scrollFactorX,-p.scrollY*c.scrollFactorY),a.setBlendMode(c.blendMode),c.mask&&(c.mask.preRenderWebGL(a,c,p),a.pipelines.set(c.pipeline));for(var k=c.tintFill,U=0;U<D;U++){var X=b[U],H=X.alpha*O*A;if(!(H<=0||X.scaleX===0||X.scaleY===0)){E.applyITRS(X.x,X.y,X.rotation,X.scaleX,X.scaleY),E.e=X.x,E.f=X.y,y.multiply(E,P);var N=X.frame,z=-N.halfWidth,L=-N.halfHeight,G=P.setQuad(z,L,z+N.width,L+N.height,w),V=R(X.tint,H);m.shouldFlush(6)&&(m.flush(),B=m.setGameObject(c,c.frame)),m.batchQuad(c,G[0],G[1],G[2],G[3],G[4],G[5],G[6],G[7],N.u0,N.v0,N.u1,N.v1,V,V,V,V,k,F,B)}}c.mask&&c.mask.postRenderWebGL(a,p),a.pipelines.postBatch(c)}};l.exports=f},30891:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(h,o,n){h===void 0&&(h=0),o===void 0&&(o=0),n===void 0&&(n=!0),this.emitter,this.x=h,this.y=o,this.active=n},update:function(){},destroy:function(){this.emitter=null}});l.exports=x},76100:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="complete"},26677:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="deathzone"},62736:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="explode"},56490:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="start"},85715:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="stop"},40629:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={COMPLETE:e(76100),DEATH_ZONE:e(26677),EXPLODE:e(62736),START:e(56490),STOP:e(85715)}},27684:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={EmitterColorOp:e(19737),EmitterOp:e(93025),Events:e(40629),GravityWell:e(87811),Particle:e(14909),ParticleBounds:e(73106),ParticleEmitter:e(9216),ParticleProcessor:e(30891),Zones:e(25962)}},69361:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(h,o){this.source=h,this.killOnEnter=o},willKill:function(u){var h=u.worldPosition,o=this.source.contains(h.x,h.y);return o&&this.killOnEnter||!o&&!this.killOnEnter}});l.exports=x},54213:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(h,o,n,r,f,a){r===void 0&&(r=!1),f===void 0&&(f=!0),a===void 0&&(a=-1),this.source=h,this.points=[],this.quantity=o,this.stepRate=n,this.yoyo=r,this.counter=-1,this.seamless=f,this._length=0,this._direction=0,this.total=a,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var u=this.points[0],h=this.points[this.points.length-1];u.x===h.x&&u.y===h.y&&this.points.pop()}var o=this._length;return this._length=this.points.length,this._length<o&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(u){return this.source=u,this.updateSource()},getPoint:function(u){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var h=this.points[this.counter];h&&(u.x=h.x,u.y=h.y)}});l.exports=x},68433:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(93736),u=new d({initialize:function(o){this.source=o,this._tempVec=new x,this.total=-1},getPoint:function(h){var o=this._tempVec;this.source.getRandomPoint(o),h.x=o.x,h.y=o.y}});l.exports=u},25962:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={DeathZone:e(69361),EdgeZone:e(54213),RandomZone:e(68433)}},29598:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(64937),u=e(13747),h=new d({Extends:u,Mixins:[x.PathFollower],initialize:function(n,r,f,a,c,p){u.call(this,n,f,a,c,p),this.path=r},preUpdate:function(o,n){this.anims.update(o,n),this.pathUpdate(o)}});l.exports=h},19626:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(29598);d.register("follower",function(u,h,o,n,r){var f=new x(this.scene,u,h,o,n,r);return this.displayList.add(f),this.updateList.add(f),f})},33412:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16569),x=e(56694),u=e(99425),h=e(15978),o=e(83321),n=e(76583),r=new x({Extends:o,initialize:function(a,c,p,v,m,y,P,E){v||(v="__DEFAULT"),o.call(this,a,c,p,v,m),this.type="Plane",this.anims=new d(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(y,P,E),this.setSizeToFrame(!1),this.setViewHeight()},setGridSize:function(f,a,c){f===void 0&&(f=8),a===void 0&&(a=8),c===void 0&&(c=!1);var p=!1;return c&&(p=!0),this.gridWidth=f,this.gridHeight=a,this.isTiled=c,this.clear(),u({mesh:this,widthSegments:f,heightSegments:a,isOrtho:!1,tile:c,flipY:p}),this},setSizeToFrame:function(f){f===void 0&&(f=!0);var a=this.frame;if(this.setPerspective(this.width/a.width,this.height/a.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!f)return this;var c=this.gridWidth,p=this.gridHeight,v=this.vertices,m=a.u0,y=a.u1,P=a.v0,E=a.v1,S,w,R=0;if(this.isTiled)for(P=a.v1,E=a.v0,w=0;w<p;w++)for(S=0;S<c;S++)v[R++].setUVs(m,E),v[R++].setUVs(m,P),v[R++].setUVs(y,E),v[R++].setUVs(m,P),v[R++].setUVs(y,P),v[R++].setUVs(y,E);else{var A=c+1,O=p+1,F=y-m,b=E-P,D=[];for(w=0;w<O;w++)for(S=0;S<A;S++){var I=m+F*(S/c),B=P+b*(w/p);D.push(I,B)}for(w=0;w<p;w++)for(S=0;S<c;S++){var k=(S+A*w)*2,U=(S+A*(w+1))*2,X=(S+1+A*(w+1))*2,H=(S+1+A*w)*2;v[R++].setUVs(D[k],D[k+1]),v[R++].setUVs(D[U],D[U+1]),v[R++].setUVs(D[H],D[H+1]),v[R++].setUVs(D[U],D[U+1]),v[R++].setUVs(D[X],D[X+1]),v[R++].setUVs(D[H],D[H+1])}}return this},setViewHeight:function(f){f===void 0&&(f=this.frame.height);var a=this.fov*(Math.PI/180);this.viewPosition.z=this.height/f/Math.tan(a/2),this.dirtyCache[10]=1},createCheckerboard:function(f,a,c,p,v){f===void 0&&(f=16777215),a===void 0&&(a=255),c===void 0&&(c=255),p===void 0&&(p=255),v===void 0&&(v=128);var m=this.scene.sys.renderer.gl,y=m.createTexture();m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,y),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.NEAREST),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST);for(var P=h(f),E=h(a),S=[],w=0;w<16;w++)for(var R=0;R<16;R++)w<8&&R<8||w>7&&R>7?S.push(P.r,P.g,P.b,c):S.push(E.r,E.g,E.b,p);m.texImage2D(m.TEXTURE_2D,0,m.RGBA,16,16,0,m.RGBA,m.UNSIGNED_BYTE,new Uint8Array(S)),y.isAlphaPremultiplied=!0,y.isRenderTexture=!1,y.width=16,y.height=16;var A=this.scene.sys.textures.addGLTexture(n(),y,16,16);return this.removeCheckerboard(),this._checkerboard=A,m.bindTexture(m.TEXTURE_2D,null),this.setTexture(A),this.setSizeToFrame(),this.setViewHeight(v),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(f,a){return this.anims.play(f,a)},playReverse:function(f,a){return this.anims.playReverse(f,a)},playAfterDelay:function(f,a){return this.anims.playAfterDelay(f,a)},playAfterRepeat:function(f,a){return this.anims.playAfterRepeat(f,a)},stop:function(){return this.anims.stop()},stopAfterDelay:function(f){return this.anims.stopAfterDelay(f)},stopAfterRepeat:function(f){return this.anims.stopAfterRepeat(f)},stopOnFrame:function(f){return this.anims.stopOnFrame(f)},preUpdate:function(f,a){o.prototype.preUpdate.call(this,f,a),this.anims.update(f,a)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});l.exports=r},10912:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(32291),u=e(99325),h=e(20494),o=e(10850),n=e(33412);u.register("plane",function(r,f){r===void 0&&(r={});var a=h(r,"key",null),c=h(r,"frame",null),p=o(r,"width",8),v=o(r,"height",8),m=o(r,"tile",!1),y=new n(this.scene,0,0,a,c,p,v,m);f!==void 0&&(r.add=f);var P=o(r,"checkerboard",null);if(P){var E=o(P,"color1",16777215),S=o(P,"color2",255),w=o(P,"alpha1",255),R=o(P,"alpha2",255),A=o(P,"height",128);y.createCheckerboard(E,S,w,R,A)}return d(this.scene,y,r),x(y,r),y})},58322:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(33412),x=e(61286);x.register("plane",function(u,h,o,n,r,f,a){return this.displayList.add(new d(this.scene,u,h,o,n,r,f,a))})},13171:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(64937),u=e(89980),h=e(74853),o=e(65641),n=e(71606),r=new d({Extends:u,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.Mask,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Transform,x.Visible,n],initialize:function(a,c,p,v,m,y,P){v===void 0&&(v=16777215),m===void 0&&(m=128),y===void 0&&(y=1),P===void 0&&(P=.1),u.call(this,a,"PointLight"),this.initPipeline(o.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(c,p),this.color=h(v),this.intensity=y,this.attenuation=P,this.width=m*2,this.height=m*2,this._radius=m},radius:{get:function(){return this._radius},set:function(f){this._radius=f,this.width=f*2,this.height=f*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});l.exports=r},162:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(99325),u=e(20494),h=e(13171);x.register("pointlight",function(o,n){o===void 0&&(o={});var r=u(o,"color",16777215),f=u(o,"radius",128),a=u(o,"intensity",1),c=u(o,"attenuation",.1),p=new h(this.scene,0,0,r,f,a,c);return n!==void 0&&(o.add=n),d(this.scene,p,o),p})},91201:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(13171);d.register("pointlight",function(u,h,o,n,r,f){return this.displayList.add(new x(this.scene,u,h,o,n,r,f))})},71606:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(80590),l.exports={renderWebGL:x,renderCanvas:u}},80590:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=function(u,h,o,n){o.addToRenderList(h);var r=u.pipelines.set(h.pipeline),f=d(h,o,n).calc,a=h.width,c=h.height,p=-h._radius,v=-h._radius,m=p+a,y=v+c,P=f.getX(0,0),E=f.getY(0,0),S=f.getX(p,v),w=f.getY(p,v),R=f.getX(p,y),A=f.getY(p,y),O=f.getX(m,y),F=f.getY(m,y),b=f.getX(m,v),D=f.getY(m,v);u.pipelines.preBatch(h),r.batchPointLight(h,o,S,w,R,A,O,F,b,D,P,E),u.pipelines.postBatch(h)};l.exports=x},15996:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(845),u=e(1539),h=new d({Extends:u,initialize:function(n,r,f,a,c){r===void 0&&(r=0),f===void 0&&(f=0),a===void 0&&(a=32),c===void 0&&(c=32);var p=new x(n.sys.textures,"",a,c);u.call(this,n,r,f,p),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(o,n){this.width=o,this.height=n,this.texture.setSize(o,n),this.updateDisplayOrigin();var r=this.input;return r&&!r.customHitArea&&(r.hitArea.width=o,r.hitArea.height=n),this},resize:function(o,n){return this.setSize(o,n),this},saveTexture:function(o){var n=this.texture;return n.key=o,n.manager.addDynamicTexture(n)&&(this._saved=!0),n},fill:function(o,n,r,f,a,c){return this.texture.fill(o,n,r,f,a,c),this},clear:function(){return this.texture.clear(),this},stamp:function(o,n,r,f,a){return this.texture.stamp(o,n,r,f,a),this},erase:function(o,n,r){return this.texture.erase(o,n,r),this},draw:function(o,n,r,f,a){return this.texture.draw(o,n,r,f,a),this},drawFrame:function(o,n,r,f,a,c){return this.texture.drawFrame(o,n,r,f,a,c),this},repeat:function(o,n,r,f,a,c,p,v,m){return this.texture.repeat(o,n,r,f,a,c,p,v,m),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(o,n,r,f,a){return this.texture.batchDraw(o,n,r,f,a),this},batchDrawFrame:function(o,n,r,f,a,c){return this.texture.batchDrawFrame(o,n,r,f,a,c),this},endDraw:function(o){return this.texture.endDraw(o),this},snapshotArea:function(o,n,r,f,a,c,p){return this.texture.snapshotArea(o,n,r,f,a,c,p),this},snapshot:function(o,n,r){return this.snapshotArea(0,0,this.width,this.height,o,n,r)},snapshotPixel:function(o,n,r){return this.snapshotArea(o,n,1,1,r,"pixel")},preDestroy:function(){this._saved||this.texture.destroy()}});l.exports=h},85692:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(99325),u=e(20494),h=e(15996);x.register("renderTexture",function(o,n){o===void 0&&(o={});var r=u(o,"x",0),f=u(o,"y",0),a=u(o,"width",32),c=u(o,"height",32),p=new h(this.scene,r,f,a,c);return n!==void 0&&(o.add=n),d(this.scene,p,o),p})},29599:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(15996);d.register("renderTexture",function(u,h,o,n){return this.displayList.add(new x(this.scene,u,h,o,n))})},79968:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16569),x=e(56694),u=e(64937),h=e(89980),o=e(65641),n=e(58912),r=e(93736),f=new x({Extends:h,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Flip,u.Mask,u.Pipeline,u.PostPipeline,u.Size,u.Texture,u.Transform,u.Visible,u.ScrollFactor,n],initialize:function(c,p,v,m,y,P,E,S,w){m===void 0&&(m="__DEFAULT"),P===void 0&&(P=2),E===void 0&&(E=!0),h.call(this,c,"Rope"),this.anims=new d(this),this.points=P,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=m==="__DEFAULT",this.dirty=!1,this.horizontal=E,this._flipX=!1,this._flipY=!1,this._perp=new r,this.debugCallback=null,this.debugGraphic=null,this.setTexture(m,y),this.setPosition(p,v),this.setSizeToFrame(),this.initPipeline(o.ROPE_PIPELINE),Array.isArray(P)&&this.resizeArrays(P.length),this.setPoints(P,S,w),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(a,c){var p=this.anims.currentFrame;this.anims.update(a,c),this.anims.currentFrame!==p&&(this.updateUVs(),this.updateVertices())},play:function(a,c,p){return this.anims.play(a,c,p),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(a,c,p){return a===void 0&&(a=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(a,c,p))},setVertical:function(a,c,p){return a===void 0&&(a=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(a,c,p)):this},setTintFill:function(a){return a===void 0&&(a=!1),this.tintFill=a,this},setAlphas:function(a,c){var p=this.points.length;if(p<1)return this;var v=this.alphas;a===void 0?a=[1]:!Array.isArray(a)&&c===void 0&&(a=[a]);var m,y=0;if(c!==void 0)for(m=0;m<p;m++)y=m*2,v[y]=a,v[y+1]=c;else if(a.length===p)for(m=0;m<p;m++)y=m*2,v[y]=a[m],v[y+1]=a[m];else{var P=a[0];for(m=0;m<p;m++)y=m*2,a.length>y&&(P=a[y]),v[y]=P,a.length>y+1&&(P=a[y+1]),v[y+1]=P}return this},setColors:function(a){var c=this.points.length;if(c<1)return this;var p=this.colors;a===void 0?a=[16777215]:Array.isArray(a)||(a=[a]);var v,m=0;if(a.length===c)for(v=0;v<c;v++)m=v*2,p[m]=a[v],p[m+1]=a[v];else{var y=a[0];for(v=0;v<c;v++)m=v*2,a.length>m&&(y=a[m]),p[m]=y,a.length>m+1&&(y=a[m+1]),p[m+1]=y}return this},setPoints:function(a,c,p){if(a===void 0&&(a=2),typeof a=="number"){var v=a;v<2&&(v=2),a=[];var m,y,P;if(this.horizontal)for(P=-this.frame.halfWidth,y=this.frame.width/(v-1),m=0;m<v;m++)a.push({x:P+m*y,y:0});else for(P=-this.frame.halfHeight,y=this.frame.height/(v-1),m=0;m<v;m++)a.push({x:0,y:P+m*y})}var E=a.length,S=this.points.length;return E<1?(console.warn("Rope: Not enough points given"),this):(E===1&&(a.unshift({x:0,y:0}),E++),S!==E&&this.resizeArrays(E),this.dirty=!0,this.points=a,this.updateUVs(),c!=null&&this.setColors(c),p!=null&&this.setAlphas(p),this)},updateUVs:function(){for(var a=this.uv,c=this.points.length,p=this.frame.u0,v=this.frame.v0,m=this.frame.u1,y=this.frame.v1,P=(m-p)/(c-1),E=(y-v)/(c-1),S=0;S<c;S++){var w=S*4,R,A,O,F;this.horizontal?(this._flipX?(R=m-S*P,O=m-S*P):(R=p+S*P,O=p+S*P),this._flipY?(A=y,F=v):(A=v,F=y)):(this._flipX?(R=p,O=m):(R=m,O=p),this._flipY?(A=y-S*E,F=y-S*E):(A=v+S*E,F=v+S*E)),a[w+0]=R,a[w+1]=A,a[w+2]=O,a[w+3]=F}return this},resizeArrays:function(a){var c=this.colors,p=this.alphas;this.vertices=new Float32Array(a*4),this.uv=new Float32Array(a*4),c=new Uint32Array(a*2),p=new Float32Array(a*2);for(var v=0;v<a*2;v++)c[v]=16777215,p[v]=1;return this.colors=c,this.alphas=p,this.dirty=!0,this},updateVertices:function(){var a=this._perp,c=this.points,p=this.vertices,v=c.length;if(this.dirty=!1,!(v<1)){for(var m,y=c[0],P=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,E=0;E<v;E++){var S=c[E],w=E*4;E<v-1?m=c[E+1]:m=S,a.x=m.y-y.y,a.y=-(m.x-y.x);var R=a.length();a.x/=R,a.y/=R,a.x*=P,a.y*=P,p[w]=S.x+a.x,p[w+1]=S.y+a.y,p[w+2]=S.x-a.x,p[w+3]=S.y-a.y,y=S}return this}},setDebug:function(a,c){return this.debugGraphic=a,!a&&!c?this.debugCallback=null:c?this.debugCallback=c:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(a,c,p){var v=a.debugGraphic,m=p[0],y=p[1],P=p[2],E=p[3];v.lineBetween(m,y,P,E);for(var S=4;S<c;S+=4){var w=p[S+0],R=p[S+1],A=p[S+2],O=p[S+3];v.lineBetween(m,y,w,R),v.lineBetween(P,E,A,O),v.lineBetween(P,E,w,R),v.lineBetween(w,R,A,O),m=w,y=R,P=A,E=O}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(a){return this._flipX=a,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(a){return this._flipY=a,this.updateUVs()}}});l.exports=f},44598:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){};l.exports=T},96027:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(99325),u=e(20494),h=e(10850),o=e(79968);x.register("rope",function(n,r){n===void 0&&(n={});var f=u(n,"key",null),a=u(n,"frame",null),c=u(n,"horizontal",!0),p=h(n,"points",void 0),v=h(n,"colors",void 0),m=h(n,"alphas",void 0),y=new o(this.scene,0,0,f,a,p,c,v,m);return r!==void 0&&(n.add=r),d(this.scene,y,n),y})},31982:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79968),x=e(61286);x.register("rope",function(u,h,o,n,r,f,a,c){return this.displayList.add(new d(this.scene,u,h,o,n,r,f,a,c))})},58912:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(49489),u=e(44598),l.exports={renderWebGL:x,renderCanvas:u}},49489:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=e(75512),u=function(h,o,n,r){n.addToRenderList(o);var f=h.pipelines.set(o.pipeline,o),a=d(o,n,r).calc,c=o.vertices,p=o.uv,v=o.colors,m=o.alphas,y=o.alpha,P=x.getTintAppendFloatAlpha,E=n.roundPixels,S=c.length,w=Math.floor(S*.5);f.flush(),h.pipelines.preBatch(o);var R=f.setGameObject(o),A=f.vertexViewF32,O=f.vertexViewU32,F=f.vertexCount*f.currentShader.vertexComponentCount-1,b=0,D=o.tintFill;o.dirty&&o.updateVertices();for(var I=o.debugCallback,B=[],k=0;k<S;k+=2){var U=c[k+0],X=c[k+1],H=U*a.a+X*a.c+a.e,N=U*a.b+X*a.d+a.f;E&&(H=Math.round(H),N=Math.round(N)),A[++F]=H,A[++F]=N,A[++F]=p[k+0],A[++F]=p[k+1],A[++F]=R,A[++F]=D,O[++F]=P(v[b],n.alpha*(m[b]*y)),b++,I&&(B[k+0]=H,B[k+1]=N)}I&&I.call(o,o,S,B),f.vertexCount+=w,f.currentBatch.count=f.vertexCount-f.currentBatch.start,h.pipelines.postBatch(o)};l.exports=u},27902:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(64937),u=e(89980),h=e(72632),o=e(98611),n=e(22440),r=e(24252),f=e(69360),a=new d({Extends:u,Mixins:[x.ComputedSize,x.Depth,x.GetBounds,x.Mask,x.Origin,x.ScrollFactor,x.Transform,x.Visible,r],initialize:function(p,v,m,y,P,E,S,w){m===void 0&&(m=0),y===void 0&&(y=0),P===void 0&&(P=128),E===void 0&&(E=128),u.call(this,p,"Shader"),this.blendMode=-1,this.shader;var R=p.sys.renderer;this.renderer=R,this.gl=R.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=R.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new f,this._tempMatrix2=new f,this._tempMatrix3=new f,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=R.width,this._rendererHeight=R.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(m,y),this.setSize(P,E),this.setOrigin(.5,.5),this.setShader(v,S,w)},willRender:function(c){return this.renderToTexture?!0:!(u.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&c.id)},setRenderToTexture:function(c,p){if(p===void 0&&(p=!1),!this.renderToTexture){var v=this.width,m=this.height,y=this.renderer;this.glTexture=y.createTextureFromSource(null,v,m,0),this.glTexture.flipY=p,this.framebuffer=y.createFramebuffer(v,m,this.glTexture,!1),this._rendererWidth=v,this._rendererHeight=m,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),c&&(this.texture=this.scene.sys.textures.addGLTexture(c,this.glTexture,v,m))}return this.shader&&(y.pipelines.clear(),this.load(),this.flush(),y.pipelines.rebind()),this},setShader:function(c,p,v){if(p===void 0&&(p=[]),typeof c=="string"){var m=this.scene.sys.cache.shader;if(!m.has(c))return console.warn("Shader missing: "+c),this;this.shader=m.get(c)}else this.shader=c;var y=this.gl,P=this.renderer;this.program&&y.deleteProgram(this.program);var E=P.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);y.uniformMatrix4fv(y.getUniformLocation(E,"uViewMatrix"),!1,this.viewMatrix),y.uniformMatrix4fv(y.getUniformLocation(E,"uProjectionMatrix"),!1,this.projectionMatrix),y.uniform2f(y.getUniformLocation(E,"uResolution"),this.width,this.height),this.program=E;var S=new Date,w={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[S.getFullYear(),S.getMonth(),S.getDate(),S.getHours()*60*60+S.getMinutes()*60+S.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=o(!0,{},this.shader.uniforms,w):this.uniforms=w;for(var R=0;R<4;R++)p[R]&&this.setSampler2D("iChannel"+R,p[R],R,v);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(c){return this.pointer=c,this},projOrtho:function(c,p,v,m){var y=-1e3,P=1e3,E=1/(c-p),S=1/(v-m),w=1/(y-P),R=this.projectionMatrix;R[0]=-2*E,R[5]=-2*S,R[10]=2*w,R[12]=(c+p)*E,R[13]=(m+v)*S,R[14]=(P+y)*w;var A=this.program,O=this.gl,F=this.renderer;F.setProgram(A),O.uniformMatrix4fv(O.getUniformLocation(A,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=p,this._rendererHeight=v},initUniforms:function(){var c=this.gl,p=this.renderer.glFuncMap,v=this.program;this._textureCount=0;for(var m in this.uniforms){var y=this.uniforms[m],P=y.type,E=p[P];y.uniformLocation=c.getUniformLocation(v,m),P!=="sampler2D"&&(y.glMatrix=E.matrix,y.glValueLength=E.length,y.glFunc=E.func)}},setSampler2DBuffer:function(c,p,v,m,y,P){y===void 0&&(y=0),P===void 0&&(P={});var E=this.uniforms[c];return E.value=p,P.width=v,P.height=m,E.textureData=P,this._textureCount=y,this.initSampler2D(E),this},setSampler2D:function(c,p,v,m){v===void 0&&(v=0);var y=this.scene.sys.textures;if(y.exists(p)){var P=y.getFrame(p);if(P.glTexture&&P.glTexture.isRenderTexture)return this.setSampler2DBuffer(c,P.glTexture,P.width,P.height,v,m);var E=this.uniforms[c],S=P.source;E.textureKey=p,E.source=S.image,E.value=P.glTexture,S.isGLTexture&&(m||(m={}),m.width=S.width,m.height=S.height),m&&(E.textureData=m),this._textureCount=v,this.initSampler2D(E)}return this},setUniform:function(c,p){return n(this.uniforms,c,p),this},getUniform:function(c){return h(this.uniforms,c,null)},setChannel0:function(c,p){return this.setSampler2D("iChannel0",c,0,p)},setChannel1:function(c,p){return this.setSampler2D("iChannel1",c,1,p)},setChannel2:function(c,p){return this.setSampler2D("iChannel2",c,2,p)},setChannel3:function(c,p){return this.setSampler2D("iChannel3",c,3,p)},initSampler2D:function(c){if(c.value){var p=this.gl;p.activeTexture(p.TEXTURE0+this._textureCount),p.bindTexture(p.TEXTURE_2D,c.value);var v=c.textureData;if(v&&!c.value.isRenderTexture){var m=p[h(v,"magFilter","linear").toUpperCase()],y=p[h(v,"minFilter","linear").toUpperCase()],P=p[h(v,"wrapS","repeat").toUpperCase()],E=p[h(v,"wrapT","repeat").toUpperCase()],S=p[h(v,"format","rgba").toUpperCase()];if(v.repeat&&(P=p.REPEAT,E=p.REPEAT),p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,!!v.flipY),v.width){var w=h(v,"width",512),R=h(v,"height",2),A=h(v,"border",0);p.texImage2D(p.TEXTURE_2D,0,S,w,R,A,S,p.UNSIGNED_BYTE,null)}else p.texImage2D(p.TEXTURE_2D,0,S,p.RGBA,p.UNSIGNED_BYTE,c.source);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,m),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,y),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,P),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,E)}this.renderer.setProgram(this.program),p.uniform1i(c.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var c=this.gl,p=this.uniforms,v,m,y,P,E,S=0;for(var w in p)v=p[w],y=v.glFunc,m=v.glValueLength,P=v.uniformLocation,E=v.value,E!==null&&(m===1?v.glMatrix?y.call(c,P,v.transpose,E):y.call(c,P,E):m===2?y.call(c,P,E.x,E.y):m===3?y.call(c,P,E.x,E.y,E.z):m===4?y.call(c,P,E.x,E.y,E.z,E.w):v.type==="sampler2D"&&(c.activeTexture(c.TEXTURE0+S),c.bindTexture(c.TEXTURE_2D,E),c.uniform1i(P,S),S++))},load:function(c){var p=this.gl,v=this.width,m=this.height,y=this.renderer,P=this.program,E=this.viewMatrix;if(!this.renderToTexture){var S=-this._displayOriginX,w=-this._displayOriginY;E[0]=c[0],E[1]=c[1],E[4]=c[2],E[5]=c[3],E[8]=c[4],E[9]=c[5],E[12]=E[0]*S+E[4]*w,E[13]=E[1]*S+E[5]*w}p.useProgram(P),p.uniformMatrix4fv(p.getUniformLocation(P,"uViewMatrix"),!1,E),p.uniform2f(p.getUniformLocation(P,"uResolution"),this.width,this.height);var R=this.uniforms,A=R.resolution;A.value.x=v,A.value.y=m,R.time.value=y.game.loop.getDuration();var O=this.pointer;if(O){var F=R.mouse,b=O.x/v,D=1-O.y/m;F.value.x=b.toFixed(2),F.value.y=D.toFixed(2)}this.syncUniforms()},flush:function(){var c=this.width,p=this.height,v=this.program,m=this.gl,y=this.vertexBuffer,P=this.renderer,E=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(P.setFramebuffer(this.framebuffer),m.clearColor(0,0,0,0),m.clear(m.COLOR_BUFFER_BIT)),m.bindBuffer(m.ARRAY_BUFFER,y);var S=m.getAttribLocation(v,"inPosition");S!==-1&&(m.enableVertexAttribArray(S),m.vertexAttribPointer(S,2,m.FLOAT,!1,E,0));var w=this.vertexViewF32;w[3]=p,w[4]=c,w[5]=p,w[8]=c,w[9]=p,w[10]=c;var R=6;m.bufferSubData(m.ARRAY_BUFFER,0,this.bytes.subarray(0,R*E)),m.drawArrays(m.TRIANGLES,0,R),this.renderToTexture&&P.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var c=this.gl;c.deleteProgram(this.program),c.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});l.exports=a},10612:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){};l.exports=T},13908:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(99325),u=e(20494),h=e(27902);x.register("shader",function(o,n){o===void 0&&(o={});var r=u(o,"key",null),f=u(o,"x",0),a=u(o,"y",0),c=u(o,"width",128),p=u(o,"height",128),v=new h(this.scene,r,f,a,c,p);return n!==void 0&&(o.add=n),d(this.scene,v,o),v})},51979:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(27902),x=e(61286);x.register("shader",function(u,h,o,n,r,f,a){return this.displayList.add(new d(this.scene,u,h,o,n,r,f,a))})},24252:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(19782),u=e(10612),l.exports={renderWebGL:x,renderCanvas:u}},19782:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=function(u,h,o,n){if(h.shader){if(o.addToRenderList(h),u.pipelines.clear(),h.renderToTexture)h.load(),h.flush();else{var r=d(h,o,n).calc;(u.width!==h._rendererWidth||u.height!==h._rendererHeight)&&h.projOrtho(0,u.width,u.height,0),h.load(r.matrix),h.flush()}u.pipelines.rebind()}};l.exports=x},19543:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(75512),x=function(u,h,o,n,r,f){for(var a=d.getTintAppendFloatAlpha(o.fillColor,o.fillAlpha*n),c=o.pathData,p=o.pathIndexes,v=0;v<p.length;v+=3){var m=p[v]*2,y=p[v+1]*2,P=p[v+2]*2,E=c[m+0]-r,S=c[m+1]-f,w=c[y+0]-r,R=c[y+1]-f,A=c[P+0]-r,O=c[P+1]-f,F=h.getX(E,S),b=h.getY(E,S),D=h.getX(w,R),I=h.getY(w,R),B=h.getX(A,O),k=h.getY(A,O);u.batchTri(o,F,b,D,I,B,k,0,0,1,1,a,a,a,2)}};l.exports=x},15608:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){var h=x||d.fillColor,o=u||d.fillAlpha,n=(h&16711680)>>>16,r=(h&65280)>>>8,f=h&255;e.fillStyle="rgba("+n+","+r+","+f+","+o+")"};l.exports=T},17876:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){var h=x||d.strokeColor,o=u||d.strokeAlpha,n=(h&16711680)>>>16,r=(h&65280)>>>8,f=h&255;e.strokeStyle="rgba("+n+","+r+","+f+","+o+")",e.lineWidth=d.lineWidth};l.exports=T},91461:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(64937),u=e(89980),h=e(88829),o=new d({Extends:u,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.GetBounds,x.Mask,x.Origin,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Transform,x.Visible],initialize:function(r,f,a){f===void 0&&(f="Shape"),u.call(this,r,f),this.geom=a,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new h,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(n,r){return r===void 0&&(r=1),n===void 0?this.isFilled=!1:(this.fillColor=n,this.fillAlpha=r,this.isFilled=!0),this},setStrokeStyle:function(n,r,f){return f===void 0&&(f=1),n===void 0?this.isStroked=!1:(this.lineWidth=n,this.strokeColor=r,this.strokeAlpha=f,this.isStroked=!0),this},setClosePath:function(n){return this.closePath=n,this},setSize:function(n,r){return this.width=n,this.height=r,this},setDisplaySize:function(n,r){return this.displayWidth=n,this.displayHeight=r,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(n){this.scaleX=n/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(n){this.scaleY=n/this.height}}});l.exports=o},50262:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(75512),x=function(u,h,o,n,r){var f=u.strokeTint,a=d.getTintAppendFloatAlpha(h.strokeColor,h.strokeAlpha*o);f.TL=a,f.TR=a,f.BL=a,f.BR=a;var c=h.pathData,p=c.length-1,v=h.lineWidth,m=v/2,y=c[0]-n,P=c[1]-r;h.closePath||(p-=2);for(var E=2;E<p;E+=2){var S=c[E]-n,w=c[E+1]-r;u.batchLine(y,P,S,w,m,m,v,E-2,h.closePath?E===p-1:!1),y=S,P=w}};l.exports=x},28593:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(2213),x=e(56694),u=e(75606),h=e(11117),o=e(26673),n=e(83392),r=e(91461),f=new x({Extends:r,Mixins:[d],initialize:function(c,p,v,m,y,P,E,S,w){p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=128),y===void 0&&(y=0),P===void 0&&(P=360),E===void 0&&(E=!1),r.call(this,c,"Arc",new o(0,0,m)),this._startAngle=y,this._endAngle=P,this._anticlockwise=E,this._iterations=.01,this.setPosition(p,v);var R=this.geom.radius*2;this.setSize(R,R),S!==void 0&&this.setFillStyle(S,w),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(a){this._iterations=a,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(a){this.geom.radius=a;var c=a*2;this.setSize(c,c),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(a){this._startAngle=a,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(a){this._endAngle=a,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(a){this._anticlockwise=a,this.updateData()}},setRadius:function(a){return this.radius=a,this},setIterations:function(a){return a===void 0&&(a=.01),this.iterations=a,this},setStartAngle:function(a,c){return this._startAngle=a,c!==void 0&&(this._anticlockwise=c),this.updateData()},setEndAngle:function(a,c){return this._endAngle=a,c!==void 0&&(this._anticlockwise=c),this.updateData()},updateData:function(){var a=this._iterations,c=a,p=this.geom.radius,v=u(this._startAngle),m=u(this._endAngle),y=this._anticlockwise,P=p,E=p;m-=v,y?m<-n.PI2?m=-n.PI2:m>0&&(m=-n.PI2+m%n.PI2):m>n.PI2?m=n.PI2:m<0&&(m=n.PI2+m%n.PI2);for(var S=[P+Math.cos(v)*p,E+Math.sin(v)*p],w;c<1;)w=m*c+v,S.push(P+Math.cos(w)*p,E+Math.sin(w)*p),c+=a;return w=m+v,S.push(P+Math.cos(w)*p,E+Math.sin(w)*p),S.push(P+Math.cos(v)*p,E+Math.sin(v)*p),this.pathIndexes=h(S),this.pathData=S,this}});l.exports=f},23560:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(75606),x=e(15608),u=e(17876),h=e(49584),o=function(n,r,f,a){f.addToRenderList(r);var c=n.currentContext;if(h(n,c,r,f,a)){var p=r.radius;c.beginPath(),c.arc(p-r.originX*(p*2),p-r.originY*(p*2),p,d(r._startAngle),d(r._endAngle),r.anticlockwise),r.closePath&&c.closePath(),r.isFilled&&(x(c,r),c.fill()),r.isStroked&&(u(c,r),c.stroke()),c.restore()}};l.exports=o},10369:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(28593),x=e(61286);x.register("arc",function(u,h,o,n,r,f,a,c){return this.displayList.add(new d(this.scene,u,h,o,n,r,f,a,c))}),x.register("circle",function(u,h,o,n,r){return this.displayList.add(new d(this.scene,u,h,o,0,360,!1,n,r))})},2213:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(58356),u=e(23560),l.exports={renderWebGL:x,renderCanvas:u}},58356:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=e(19543),u=e(50262),h=function(o,n,r,f){r.addToRenderList(n);var a=o.pipelines.set(n.pipeline),c=d(n,r,f),p=a.calcMatrix.copyFrom(c.calc),v=n._displayOriginX,m=n._displayOriginY,y=r.alpha*n.alpha;o.pipelines.preBatch(n),n.isFilled&&x(a,p,n,y,v,m),n.isStroked&&u(a,n,y,v,m),o.pipelines.postBatch(n)};l.exports=h},15220:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(87203),u=e(11117),h=e(74118),o=e(91461),n=new d({Extends:o,Mixins:[x],initialize:function(f,a,c,p,v,m){a===void 0&&(a=0),c===void 0&&(c=0),o.call(this,f,"Curve",p),this._smoothness=32,this._curveBounds=new h,this.closePath=!1,this.setPosition(a,c),v!==void 0&&this.setFillStyle(v,m),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(r){this._smoothness=r,this.updateData()}},setSmoothness:function(r){return this._smoothness=r,this.updateData()},updateData:function(){var r=this._curveBounds,f=this._smoothness;this.geom.getBounds(r,f),this.setSize(r.width,r.height),this.updateDisplayOrigin();for(var a=[],c=this.geom.getPoints(f),p=0;p<c.length;p++)a.push(c[p].x,c[p].y);return a.push(c[0].x,c[0].y),this.pathIndexes=u(a),this.pathData=a,this}});l.exports=n},4024:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15608),x=e(17876),u=e(49584),h=function(o,n,r,f){r.addToRenderList(n);var a=o.currentContext;if(u(o,a,n,r,f)){var c=n._displayOriginX+n._curveBounds.x,p=n._displayOriginY+n._curveBounds.y,v=n.pathData,m=v.length-1,y=v[0]-c,P=v[1]-p;a.beginPath(),a.moveTo(y,P),n.closePath||(m-=2);for(var E=2;E<m;E+=2){var S=v[E]-c,w=v[E+1]-p;a.lineTo(S,w)}n.closePath&&a.closePath(),n.isFilled&&(d(a,n),a.fill()),n.isStroked&&(x(a,n),a.stroke()),a.restore()}};l.exports=h},10147:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(15220);d.register("curve",function(u,h,o,n,r){return this.displayList.add(new x(this.scene,u,h,o,n,r))})},87203:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(82958),u=e(4024),l.exports={renderWebGL:x,renderCanvas:u}},82958:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(19543),x=e(73329),u=e(50262),h=function(o,n,r,f){r.addToRenderList(n);var a=o.pipelines.set(n.pipeline),c=x(n,r,f),p=a.calcMatrix.copyFrom(c.calc),v=n._displayOriginX+n._curveBounds.x,m=n._displayOriginY+n._curveBounds.y,y=r.alpha*n.alpha;o.pipelines.preBatch(n),n.isFilled&&d(a,p,n,y,v,m),n.isStroked&&u(a,n,y,v,m),o.pipelines.postBatch(n)};l.exports=h},28591:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(11117),u=e(84171),h=e(95669),o=e(91461),n=new d({Extends:o,Mixins:[u],initialize:function(f,a,c,p,v,m,y){a===void 0&&(a=0),c===void 0&&(c=0),p===void 0&&(p=128),v===void 0&&(v=128),o.call(this,f,"Ellipse",new h(p/2,v/2,p,v)),this._smoothness=64,this.setPosition(a,c),this.width=p,this.height=v,m!==void 0&&this.setFillStyle(m,y),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(r){this._smoothness=r,this.updateData()}},setSize:function(r,f){return this.width=r,this.height=f,this.geom.setPosition(r/2,f/2),this.geom.setSize(r,f),this.updateData()},setSmoothness:function(r){return this._smoothness=r,this.updateData()},updateData:function(){for(var r=[],f=this.geom.getPoints(this._smoothness),a=0;a<f.length;a++)r.push(f[a].x,f[a].y);return r.push(f[0].x,f[0].y),this.pathIndexes=x(r),this.pathData=r,this}});l.exports=n},55881:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15608),x=e(17876),u=e(49584),h=function(o,n,r,f){r.addToRenderList(n);var a=o.currentContext;if(u(o,a,n,r,f)){var c=n._displayOriginX,p=n._displayOriginY,v=n.pathData,m=v.length-1,y=v[0]-c,P=v[1]-p;a.beginPath(),a.moveTo(y,P),n.closePath||(m-=2);for(var E=2;E<m;E+=2){var S=v[E]-c,w=v[E+1]-p;a.lineTo(S,w)}a.closePath(),n.isFilled&&(d(a,n),a.fill()),n.isStroked&&(x(a,n),a.stroke()),a.restore()}};l.exports=h},99869:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(28591),x=e(61286);x.register("ellipse",function(u,h,o,n,r,f){return this.displayList.add(new d(this.scene,u,h,o,n,r,f))})},84171:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(17554),u=e(55881),l.exports={renderWebGL:x,renderCanvas:u}},17554:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(19543),x=e(73329),u=e(50262),h=function(o,n,r,f){r.addToRenderList(n);var a=o.pipelines.set(n.pipeline),c=x(n,r,f),p=a.calcMatrix.copyFrom(c.calc),v=n._displayOriginX,m=n._displayOriginY,y=r.alpha*n.alpha;o.pipelines.preBatch(n),n.isFilled&&d(a,p,n,y,v,m),n.isStroked&&u(a,n,y,v,m),o.pipelines.postBatch(n)};l.exports=h},39169:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(91461),u=e(88059),h=new d({Extends:x,Mixins:[u],initialize:function(n,r,f,a,c,p,v,m,y,P,E){r===void 0&&(r=0),f===void 0&&(f=0),a===void 0&&(a=128),c===void 0&&(c=128),p===void 0&&(p=32),v===void 0&&(v=32),x.call(this,n,"Grid",null),this.cellWidth=p,this.cellHeight=v,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(r,f),this.setSize(a,c),this.setFillStyle(m,y),P!==void 0&&this.setOutlineStyle(P,E),this.updateDisplayOrigin()},setFillStyle:function(o,n){return n===void 0&&(n=1),o===void 0?this.showCells=!1:(this.fillColor=o,this.fillAlpha=n,this.showCells=!0),this},setAltFillStyle:function(o,n){return n===void 0&&(n=1),o===void 0?this.showAltCells=!1:(this.altFillColor=o,this.altFillAlpha=n,this.showAltCells=!0),this},setOutlineStyle:function(o,n){return n===void 0&&(n=1),o===void 0?this.showOutline=!1:(this.outlineFillColor=o,this.outlineFillAlpha=n,this.showOutline=!0),this}});l.exports=h},95525:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15608),x=e(17876),u=e(49584),h=function(o,n,r,f){r.addToRenderList(n);var a=o.currentContext;if(u(o,a,n,r,f)){var c=-n._displayOriginX,p=-n._displayOriginY,v=r.alpha*n.alpha,m=n.width,y=n.height,P=n.cellWidth,E=n.cellHeight,S=Math.ceil(m/P),w=Math.ceil(y/E),R=P,A=E,O=P-(S*P-m),F=E-(w*E-y),b=n.showCells,D=n.showAltCells,I=n.showOutline,B=0,k=0,U=0,X=0,H=0;if(I&&(R--,A--,O===P&&O--,F===E&&F--),b&&n.fillAlpha>0)for(d(a,n),k=0;k<w;k++)for(D&&(U=k%2),B=0;B<S;B++){if(D&&U){U=0;continue}U++,X=B<S-1?R:O,H=k<w-1?A:F,a.fillRect(c+B*P,p+k*E,X,H)}if(D&&n.altFillAlpha>0)for(d(a,n,n.altFillColor,n.altFillAlpha*v),k=0;k<w;k++)for(D&&(U=k%2),B=0;B<S;B++){if(D&&!U){U=1;continue}U=0,X=B<S-1?R:O,H=k<w-1?A:F,a.fillRect(c+B*P,p+k*E,X,H)}if(I&&n.outlineFillAlpha>0){for(x(a,n,n.outlineFillColor,n.outlineFillAlpha*v),B=1;B<S;B++){var N=B*P;a.beginPath(),a.moveTo(N+c,p),a.lineTo(N+c,y+p),a.stroke()}for(k=1;k<w;k++){var z=k*E;a.beginPath(),a.moveTo(c,z+p),a.lineTo(c+m,z+p),a.stroke()}}a.restore()}};l.exports=h},9326:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(39169);d.register("grid",function(u,h,o,n,r,f,a,c,p,v){return this.displayList.add(new x(this.scene,u,h,o,n,r,f,a,c,p,v))})},88059:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(50639),u=e(95525),l.exports={renderWebGL:x,renderCanvas:u}},50639:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=e(75512),u=function(h,o,n,r){n.addToRenderList(o);var f=h.pipelines.set(o.pipeline),a=d(o,n,r),c=f.calcMatrix.copyFrom(a.calc);c.translate(-o._displayOriginX,-o._displayOriginY);var p=n.alpha*o.alpha,v=o.width,m=o.height,y=o.cellWidth,P=o.cellHeight,E=Math.ceil(v/y),S=Math.ceil(m/P),w=y,R=P,A=y-(E*y-v),O=P-(S*P-m),F,b,D=o.showCells,I=o.showAltCells,B=o.showOutline,k=0,U=0,X=0,H=0,N=0;if(B&&(w--,R--,A===y&&A--,O===P&&O--),h.pipelines.preBatch(o),D&&o.fillAlpha>0)for(F=f.fillTint,b=x.getTintAppendFloatAlpha(o.fillColor,o.fillAlpha*p),F.TL=b,F.TR=b,F.BL=b,F.BR=b,U=0;U<S;U++)for(I&&(X=U%2),k=0;k<E;k++){if(I&&X){X=0;continue}X++,H=k<E-1?w:A,N=U<S-1?R:O,f.batchFillRect(k*y,U*P,H,N)}if(I&&o.altFillAlpha>0)for(F=f.fillTint,b=x.getTintAppendFloatAlpha(o.altFillColor,o.altFillAlpha*p),F.TL=b,F.TR=b,F.BL=b,F.BR=b,U=0;U<S;U++)for(I&&(X=U%2),k=0;k<E;k++){if(I&&!X){X=1;continue}X=0,H=k<E-1?w:A,N=U<S-1?R:O,f.batchFillRect(k*y,U*P,H,N)}if(B&&o.outlineFillAlpha>0){var z=f.strokeTint,L=x.getTintAppendFloatAlpha(o.outlineFillColor,o.outlineFillAlpha*p);for(z.TL=L,z.TR=L,z.BL=L,z.BR=L,k=1;k<E;k++){var G=k*y;f.batchLine(G,0,G,m,1,1,1,0,!1)}for(U=1;U<S;U++){var V=U*P;f.batchLine(0,V,v,V,1,1,1,0,!1)}}h.pipelines.postBatch(o)};l.exports=u},4415:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72296),x=e(56694),u=e(91461),h=new x({Extends:u,Mixins:[d],initialize:function(n,r,f,a,c,p,v,m){r===void 0&&(r=0),f===void 0&&(f=0),a===void 0&&(a=48),c===void 0&&(c=32),p===void 0&&(p=15658734),v===void 0&&(v=10066329),m===void 0&&(m=13421772),u.call(this,n,"IsoBox",null),this.projection=4,this.fillTop=p,this.fillLeft=v,this.fillRight=m,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(r,f),this.setSize(a,c),this.updateDisplayOrigin()},setProjection:function(o){return this.projection=o,this},setFaces:function(o,n,r){return o===void 0&&(o=!0),n===void 0&&(n=!0),r===void 0&&(r=!0),this.showTop=o,this.showLeft=n,this.showRight=r,this},setFillStyle:function(o,n,r){return this.fillTop=o,this.fillLeft=n,this.fillRight=r,this.isFilled=!0,this}});l.exports=h},32884:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15608),x=e(49584),u=function(h,o,n,r){n.addToRenderList(o);var f=h.currentContext;if(x(h,f,o,n,r)&&o.isFilled){var a=o.width,c=o.height,p=a/2,v=a/o.projection;o.showTop&&(d(f,o,o.fillTop),f.beginPath(),f.moveTo(-p,-c),f.lineTo(0,-v-c),f.lineTo(p,-c),f.lineTo(p,-1),f.lineTo(0,v-1),f.lineTo(-p,-1),f.lineTo(-p,-c),f.fill()),o.showLeft&&(d(f,o,o.fillLeft),f.beginPath(),f.moveTo(-p,0),f.lineTo(0,v),f.lineTo(0,v-c),f.lineTo(-p,-c),f.lineTo(-p,0),f.fill()),o.showRight&&(d(f,o,o.fillRight),f.beginPath(),f.moveTo(p,0),f.lineTo(0,v),f.lineTo(0,v-c),f.lineTo(p,-c),f.lineTo(p,0),f.fill()),f.restore()}};l.exports=u},88154:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(4415);d.register("isobox",function(u,h,o,n,r,f,a){return this.displayList.add(new x(this.scene,u,h,o,n,r,f,a))})},72296:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(33101),u=e(32884),l.exports={renderWebGL:x,renderCanvas:u}},33101:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=e(75512),u=function(h,o,n,r){n.addToRenderList(o);var f=h.pipelines.set(o.pipeline),a=d(o,n,r),c=f.calcMatrix.copyFrom(a.calc),p=o.width,v=o.height,m=p/2,y=p/o.projection,P=n.alpha*o.alpha;if(o.isFilled){var E,S,w,R,A,O,F,b,D;h.pipelines.preBatch(o),o.showTop&&(E=x.getTintAppendFloatAlpha(o.fillTop,P),S=c.getX(-m,-v),w=c.getY(-m,-v),R=c.getX(0,-y-v),A=c.getY(0,-y-v),O=c.getX(m,-v),F=c.getY(m,-v),b=c.getX(0,y-v),D=c.getY(0,y-v),f.batchQuad(o,S,w,R,A,O,F,b,D,0,0,1,1,E,E,E,E,2)),o.showLeft&&(E=x.getTintAppendFloatAlpha(o.fillLeft,P),S=c.getX(-m,0),w=c.getY(-m,0),R=c.getX(0,y),A=c.getY(0,y),O=c.getX(0,y-v),F=c.getY(0,y-v),b=c.getX(-m,-v),D=c.getY(-m,-v),f.batchQuad(o,S,w,R,A,O,F,b,D,0,0,1,1,E,E,E,E,2)),o.showRight&&(E=x.getTintAppendFloatAlpha(o.fillRight,P),S=c.getX(m,0),w=c.getY(m,0),R=c.getX(0,y),A=c.getY(0,y),O=c.getX(0,y-v),F=c.getY(0,y-v),b=c.getX(m,-v),D=c.getY(m,-v),f.batchQuad(o,S,w,R,A,O,F,b,D,0,0,1,1,E,E,E,E,2)),h.pipelines.postBatch(o)}};l.exports=u},65159:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(93387),u=e(91461),h=new d({Extends:u,Mixins:[x],initialize:function(n,r,f,a,c,p,v,m,y){r===void 0&&(r=0),f===void 0&&(f=0),a===void 0&&(a=48),c===void 0&&(c=32),p===void 0&&(p=!1),v===void 0&&(v=15658734),m===void 0&&(m=10066329),y===void 0&&(y=13421772),u.call(this,n,"IsoTriangle",null),this.projection=4,this.fillTop=v,this.fillLeft=m,this.fillRight=y,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=p,this.isFilled=!0,this.setPosition(r,f),this.setSize(a,c),this.updateDisplayOrigin()},setProjection:function(o){return this.projection=o,this},setReversed:function(o){return this.isReversed=o,this},setFaces:function(o,n,r){return o===void 0&&(o=!0),n===void 0&&(n=!0),r===void 0&&(r=!0),this.showTop=o,this.showLeft=n,this.showRight=r,this},setFillStyle:function(o,n,r){return this.fillTop=o,this.fillLeft=n,this.fillRight=r,this.isFilled=!0,this}});l.exports=h},9923:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15608),x=e(49584),u=function(h,o,n,r){n.addToRenderList(o);var f=h.currentContext;if(x(h,f,o,n,r)&&o.isFilled){var a=o.width,c=o.height,p=a/2,v=a/o.projection,m=o.isReversed;o.showTop&&m&&(d(f,o,o.fillTop),f.beginPath(),f.moveTo(-p,-c),f.lineTo(0,-v-c),f.lineTo(p,-c),f.lineTo(0,v-c),f.fill()),o.showLeft&&(d(f,o,o.fillLeft),f.beginPath(),m?(f.moveTo(-p,-c),f.lineTo(0,v),f.lineTo(0,v-c)):(f.moveTo(-p,0),f.lineTo(0,v),f.lineTo(0,v-c)),f.fill()),o.showRight&&(d(f,o,o.fillRight),f.beginPath(),m?(f.moveTo(p,-c),f.lineTo(0,v),f.lineTo(0,v-c)):(f.moveTo(p,0),f.lineTo(0,v),f.lineTo(0,v-c)),f.fill()),f.restore()}};l.exports=u},67765:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(65159);d.register("isotriangle",function(u,h,o,n,r,f,a,c){return this.displayList.add(new x(this.scene,u,h,o,n,r,f,a,c))})},93387:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(54946),u=e(9923),l.exports={renderWebGL:x,renderCanvas:u}},54946:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=e(75512),u=function(h,o,n,r){n.addToRenderList(o);var f=h.pipelines.set(o.pipeline),a=d(o,n,r),c=f.calcMatrix.copyFrom(a.calc),p=o.width,v=o.height,m=p/2,y=p/o.projection,P=o.isReversed,E=n.alpha*o.alpha;if(o.isFilled){h.pipelines.preBatch(o);var S,w,R,A,O,F,b;if(o.showTop&&P){S=x.getTintAppendFloatAlpha(o.fillTop,E),w=c.getX(-m,-v),R=c.getY(-m,-v),A=c.getX(0,-y-v),O=c.getY(0,-y-v),F=c.getX(m,-v),b=c.getY(m,-v);var D=c.getX(0,y-v),I=c.getY(0,y-v);f.batchQuad(o,w,R,A,O,F,b,D,I,0,0,1,1,S,S,S,S,2)}o.showLeft&&(S=x.getTintAppendFloatAlpha(o.fillLeft,E),P?(w=c.getX(-m,-v),R=c.getY(-m,-v),A=c.getX(0,y),O=c.getY(0,y),F=c.getX(0,y-v),b=c.getY(0,y-v)):(w=c.getX(-m,0),R=c.getY(-m,0),A=c.getX(0,y),O=c.getY(0,y),F=c.getX(0,y-v),b=c.getY(0,y-v)),f.batchTri(o,w,R,A,O,F,b,0,0,1,1,S,S,S,2)),o.showRight&&(S=x.getTintAppendFloatAlpha(o.fillRight,E),P?(w=c.getX(m,-v),R=c.getY(m,-v),A=c.getX(0,y),O=c.getY(0,y),F=c.getX(0,y-v),b=c.getY(0,y-v)):(w=c.getX(m,0),R=c.getY(m,0),A=c.getX(0,y),O=c.getY(0,y),F=c.getX(0,y-v),b=c.getY(0,y-v)),f.batchTri(o,w,R,A,O,F,b,0,0,1,1,S,S,S,2)),h.pipelines.postBatch(o)}};l.exports=u},579:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(91461),u=e(88829),h=e(52660),o=new d({Extends:x,Mixins:[h],initialize:function(r,f,a,c,p,v,m,y,P){f===void 0&&(f=0),a===void 0&&(a=0),c===void 0&&(c=0),p===void 0&&(p=0),v===void 0&&(v=128),m===void 0&&(m=0),x.call(this,r,"Line",new u(c,p,v,m));var E=Math.max(1,this.geom.right-this.geom.left),S=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(f,a),this.setSize(E,S),y!==void 0&&this.setStrokeStyle(1,y,P),this.updateDisplayOrigin()},setLineWidth:function(n,r){return r===void 0&&(r=n),this._startWidth=n,this._endWidth=r,this.lineWidth=n,this},setTo:function(n,r,f,a){return this.geom.setTo(n,r,f,a),this}});l.exports=o},52044:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(17876),x=e(49584),u=function(h,o,n,r){n.addToRenderList(o);var f=h.currentContext;if(x(h,f,o,n,r)){var a=o._displayOriginX,c=o._displayOriginY;o.isStroked&&(d(f,o),f.beginPath(),f.moveTo(o.geom.x1-a,o.geom.y1-c),f.lineTo(o.geom.x2-a,o.geom.y2-c),f.stroke()),f.restore()}};l.exports=u},85665:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(579);d.register("line",function(u,h,o,n,r,f,a,c){return this.displayList.add(new x(this.scene,u,h,o,n,r,f,a,c))})},52660:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(46952),u=e(52044),l.exports={renderWebGL:x,renderCanvas:u}},46952:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=e(75512),u=function(h,o,n,r){n.addToRenderList(o);var f=h.pipelines.set(o.pipeline),a=d(o,n,r);f.calcMatrix.copyFrom(a.calc);var c=o._displayOriginX,p=o._displayOriginY,v=n.alpha*o.alpha;if(h.pipelines.preBatch(o),o.isStroked){var m=f.strokeTint,y=x.getTintAppendFloatAlpha(o.strokeColor,o.strokeAlpha*v);m.TL=y,m.TR=y,m.BL=y,m.BR=y;var P=o._startWidth,E=o._endWidth;f.batchLine(o.geom.x1-c,o.geom.y1-p,o.geom.x2-c,o.geom.y2-p,P,E,1,0,!1,a.sprite,a.camera)}h.pipelines.postBatch(o)};l.exports=u},91249:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70573),x=e(56694),u=e(11117),h=e(14045),o=e(8580),n=e(91461),r=e(18974),f=new x({Extends:n,Mixins:[d],initialize:function(c,p,v,m,y,P){p===void 0&&(p=0),v===void 0&&(v=0),n.call(this,c,"Polygon",new o(m));var E=h(this.geom);this.setPosition(p,v),this.setSize(E.width,E.height),y!==void 0&&this.setFillStyle(y,P),this.updateDisplayOrigin(),this.updateData()},smooth:function(a){a===void 0&&(a=1);for(var c=0;c<a;c++)r(this.geom);return this.updateData()},setTo:function(a){this.geom.setTo(a);var c=h(this.geom);return this.setSize(c.width,c.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var a=[],c=this.geom.points,p=0;p<c.length;p++)a.push(c[p].x,c[p].y);return a.push(c[0].x,c[0].y),this.pathIndexes=u(a),this.pathData=a,this}});l.exports=f},40834:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15608),x=e(17876),u=e(49584),h=function(o,n,r,f){r.addToRenderList(n);var a=o.currentContext;if(u(o,a,n,r,f)){var c=n._displayOriginX,p=n._displayOriginY,v=n.pathData,m=v.length-1,y=v[0]-c,P=v[1]-p;a.beginPath(),a.moveTo(y,P),n.closePath||(m-=2);for(var E=2;E<m;E+=2){var S=v[E]-c,w=v[E+1]-p;a.lineTo(S,w)}n.closePath&&a.closePath(),n.isFilled&&(d(a,n),a.fill()),n.isStroked&&(x(a,n),a.stroke()),a.restore()}};l.exports=h},88203:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(91249);d.register("polygon",function(u,h,o,n,r){return this.displayList.add(new x(this.scene,u,h,o,n,r))})},70573:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(72841),u=e(40834),l.exports={renderWebGL:x,renderCanvas:u}},72841:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(19543),x=e(73329),u=e(50262),h=function(o,n,r,f){r.addToRenderList(n);var a=o.pipelines.set(n.pipeline),c=x(n,r,f),p=a.calcMatrix.copyFrom(c.calc),v=n._displayOriginX,m=n._displayOriginY,y=r.alpha*n.alpha;o.pipelines.preBatch(n),n.isFilled&&d(a,p,n,y,v,m),n.isStroked&&u(a,n,y,v,m),o.pipelines.postBatch(n)};l.exports=h},517:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(74118),u=e(91461),h=e(37673),o=new d({Extends:u,Mixins:[h],initialize:function(r,f,a,c,p,v,m){f===void 0&&(f=0),a===void 0&&(a=0),c===void 0&&(c=128),p===void 0&&(p=128),u.call(this,r,"Rectangle",new x(0,0,c,p)),this.setPosition(f,a),this.setSize(c,p),v!==void 0&&this.setFillStyle(v,m),this.updateDisplayOrigin(),this.updateData()},setSize:function(n,r){this.width=n,this.height=r,this.geom.setSize(n,r),this.updateData(),this.updateDisplayOrigin();var f=this.input;return f&&!f.customHitArea&&(f.hitArea.width=n,f.hitArea.height=r),this},updateData:function(){var n=[],r=this.geom,f=this._tempLine;return r.getLineA(f),n.push(f.x1,f.y1,f.x2,f.y2),r.getLineB(f),n.push(f.x2,f.y2),r.getLineC(f),n.push(f.x2,f.y2),r.getLineD(f),n.push(f.x2,f.y2),this.pathData=n,this}});l.exports=o},4091:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15608),x=e(17876),u=e(49584),h=function(o,n,r,f){r.addToRenderList(n);var a=o.currentContext;if(u(o,a,n,r,f)){var c=n._displayOriginX,p=n._displayOriginY;n.isFilled&&(d(a,n),a.fillRect(-c,-p,n.width,n.height)),n.isStroked&&(x(a,n),a.beginPath(),a.rect(-c,-p,n.width,n.height),a.stroke()),a.restore()}};l.exports=h},94355:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(517);d.register("rectangle",function(u,h,o,n,r,f){return this.displayList.add(new x(this.scene,u,h,o,n,r,f))})},37673:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(43532),u=e(4091),l.exports={renderWebGL:x,renderCanvas:u}},43532:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=e(50262),u=e(75512),h=function(o,n,r,f){r.addToRenderList(n);var a=o.pipelines.set(n.pipeline),c=d(n,r,f);a.calcMatrix.copyFrom(c.calc);var p=n._displayOriginX,v=n._displayOriginY,m=r.alpha*n.alpha;if(o.pipelines.preBatch(n),n.isFilled){var y=a.fillTint,P=u.getTintAppendFloatAlpha(n.fillColor,n.fillAlpha*m);y.TL=P,y.TR=P,y.BL=P,y.BR=P,a.batchFillRect(-p,-v,n.width,n.height)}n.isStroked&&x(a,n,m,p,v),o.pipelines.postBatch(n)};l.exports=h},77843:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(87956),x=e(56694),u=e(11117),h=e(91461),o=new x({Extends:h,Mixins:[d],initialize:function(r,f,a,c,p,v,m,y){f===void 0&&(f=0),a===void 0&&(a=0),c===void 0&&(c=5),p===void 0&&(p=32),v===void 0&&(v=64),h.call(this,r,"Star",null),this._points=c,this._innerRadius=p,this._outerRadius=v,this.setPosition(f,a),this.setSize(v*2,v*2),m!==void 0&&this.setFillStyle(m,y),this.updateDisplayOrigin(),this.updateData()},setPoints:function(n){return this._points=n,this.updateData()},setInnerRadius:function(n){return this._innerRadius=n,this.updateData()},setOuterRadius:function(n){return this._outerRadius=n,this.updateData()},points:{get:function(){return this._points},set:function(n){this._points=n,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(n){this._innerRadius=n,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(n){this._outerRadius=n,this.updateData()}},updateData:function(){var n=[],r=this._points,f=this._innerRadius,a=this._outerRadius,c=Math.PI/2*3,p=Math.PI/r,v=a,m=a;n.push(v,m+-a);for(var y=0;y<r;y++)n.push(v+Math.cos(c)*a,m+Math.sin(c)*a),c+=p,n.push(v+Math.cos(c)*f,m+Math.sin(c)*f),c+=p;return n.push(v,m+-a),this.pathIndexes=u(n),this.pathData=n,this}});l.exports=o},11401:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15608),x=e(17876),u=e(49584),h=function(o,n,r,f){r.addToRenderList(n);var a=o.currentContext;if(u(o,a,n,r,f)){var c=n._displayOriginX,p=n._displayOriginY,v=n.pathData,m=v.length-1,y=v[0]-c,P=v[1]-p;a.beginPath(),a.moveTo(y,P),n.closePath||(m-=2);for(var E=2;E<m;E+=2){var S=v[E]-c,w=v[E+1]-p;a.lineTo(S,w)}a.closePath(),n.isFilled&&(d(a,n),a.fill()),n.isStroked&&(x(a,n),a.stroke()),a.restore()}};l.exports=h},23962:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(77843),x=e(61286);x.register("star",function(u,h,o,n,r,f,a){return this.displayList.add(new d(this.scene,u,h,o,n,r,f,a))})},87956:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(12037),u=e(11401),l.exports={renderWebGL:x,renderCanvas:u}},12037:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(19543),x=e(73329),u=e(50262),h=function(o,n,r,f){r.addToRenderList(n);var a=o.pipelines.set(n.pipeline),c=x(n,r,f),p=a.calcMatrix.copyFrom(c.calc),v=n._displayOriginX,m=n._displayOriginY,y=r.alpha*n.alpha;o.pipelines.preBatch(n),n.isFilled&&d(a,p,n,y,v,m),n.isStroked&&u(a,n,y,v,m),o.pipelines.postBatch(n)};l.exports=h},21873:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(91461),u=e(66349),h=e(70498),o=new d({Extends:x,Mixins:[h],initialize:function(r,f,a,c,p,v,m,y,P,E,S){f===void 0&&(f=0),a===void 0&&(a=0),c===void 0&&(c=0),p===void 0&&(p=128),v===void 0&&(v=64),m===void 0&&(m=0),y===void 0&&(y=128),P===void 0&&(P=128),x.call(this,r,"Triangle",new u(c,p,v,m,y,P));var w=this.geom.right-this.geom.left,R=this.geom.bottom-this.geom.top;this.setPosition(f,a),this.setSize(w,R),E!==void 0&&this.setFillStyle(E,S),this.updateDisplayOrigin(),this.updateData()},setTo:function(n,r,f,a,c,p){return this.geom.setTo(n,r,f,a,c,p),this.updateData()},updateData:function(){var n=[],r=this.geom,f=this._tempLine;return r.getLineA(f),n.push(f.x1,f.y1,f.x2,f.y2),r.getLineB(f),n.push(f.x2,f.y2),r.getLineC(f),n.push(f.x2,f.y2),this.pathData=n,this}});l.exports=o},60213:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15608),x=e(17876),u=e(49584),h=function(o,n,r,f){r.addToRenderList(n);var a=o.currentContext;if(u(o,a,n,r,f)){var c=n._displayOriginX,p=n._displayOriginY,v=n.geom.x1-c,m=n.geom.y1-p,y=n.geom.x2-c,P=n.geom.y2-p,E=n.geom.x3-c,S=n.geom.y3-p;a.beginPath(),a.moveTo(v,m),a.lineTo(y,P),a.lineTo(E,S),a.closePath(),n.isFilled&&(d(a,n),a.fill()),n.isStroked&&(x(a,n),a.stroke()),a.restore()}};l.exports=h},79296:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(21873);d.register("triangle",function(u,h,o,n,r,f,a,c,p,v){return this.displayList.add(new x(this.scene,u,h,o,n,r,f,a,c,p,v))})},70498:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(72291),u=e(60213),l.exports={renderWebGL:x,renderCanvas:u}},72291:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=e(50262),u=e(75512),h=function(o,n,r,f){r.addToRenderList(n);var a=o.pipelines.set(n.pipeline),c=d(n,r,f);a.calcMatrix.copyFrom(c.calc);var p=n._displayOriginX,v=n._displayOriginY,m=r.alpha*n.alpha;if(o.pipelines.preBatch(n),n.isFilled){var y=a.fillTint,P=u.getTintAppendFloatAlpha(n.fillColor,n.fillAlpha*m);y.TL=P,y.TR=P,y.BL=P,y.BR=P;var E=n.geom.x1-p,S=n.geom.y1-v,w=n.geom.x2-p,R=n.geom.y2-v,A=n.geom.x3-p,O=n.geom.y3-v;a.batchFillTriangle(E,S,w,R,A,O,c.sprite,c.camera)}n.isStroked&&x(a,n,m,p,v),o.pipelines.postBatch(n)};l.exports=h},13747:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16569),x=e(56694),u=e(64937),h=e(89980),o=e(20791),n=new x({Extends:h,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Size,u.TextureCrop,u.Tint,u.Transform,u.Visible,o],initialize:function(f,a,c,p,v){h.call(this,f,"Sprite"),this._crop=this.resetCropObject(),this.anims=new d(this),this.setTexture(p,v),this.setPosition(a,c),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(r,f){this.anims.update(r,f)},play:function(r,f){return this.anims.play(r,f)},playReverse:function(r,f){return this.anims.playReverse(r,f)},playAfterDelay:function(r,f){return this.anims.playAfterDelay(r,f)},playAfterRepeat:function(r,f){return this.anims.playAfterRepeat(r,f)},chain:function(r){return this.anims.chain(r)},stop:function(){return this.anims.stop()},stopAfterDelay:function(r){return this.anims.stopAfterDelay(r)},stopAfterRepeat:function(r){return this.anims.stopAfterRepeat(r)},stopOnFrame:function(r){return this.anims.stopOnFrame(r)},toJSON:function(){return u.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});l.exports=n},27573:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){x.addToRenderList(d),e.batchSprite(d,d.frame,x,u)};l.exports=T},89219:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(32291),u=e(99325),h=e(20494),o=e(13747);u.register("sprite",function(n,r){n===void 0&&(n={});var f=h(n,"key",null),a=h(n,"frame",null),c=new o(this.scene,0,0,f,a);return r!==void 0&&(n.add=r),d(this.scene,c,n),x(c,n),c})},66135:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(13747);d.register("sprite",function(u,h,o,n){return this.displayList.add(new x(this.scene,u,h,o,n))})},20791:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(21034),u=e(27573),l.exports={renderWebGL:x,renderCanvas:u}},21034:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){x.addToRenderList(d),d.pipeline.batchSprite(d,x,u)};l.exports=T},32979:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=e.canvas,h=e.context,o=e.style,n=[],r=0,f=x.length;o.maxLines>0&&o.maxLines<x.length&&(f=o.maxLines),o.syncFont(u,h);for(var a=0;a<f;a++){var c=o.strokeThickness;c+=h.measureText(x[a]).width,o.wordWrap&&(c-=h.measureText(" ").width),n[a]=Math.ceil(c),r=Math.max(r,n[a])}var p=d.fontSize+o.strokeThickness,v=p*f,m=e.lineSpacing;return f>1&&(v+=m*(f-1)),{width:r,height:v,lines:f,lineWidths:n,lineSpacing:m,lineHeight:p}};l.exports=T},27030:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61068),x=function(u){var h=d.create(this),o=h.getContext("2d",{willReadFrequently:!0});u.syncFont(h,o);var n=o.measureText(u.testString);if("actualBoundingBoxAscent"in n){var r=n.actualBoundingBoxAscent,f=n.actualBoundingBoxDescent;return d.remove(h),{ascent:r,descent:f,fontSize:r+f}}var a=Math.ceil(n.width*u.baselineX),c=a,p=2*c;c=c*u.baselineY|0,h.width=a,h.height=p,o.fillStyle="#f00",o.fillRect(0,0,a,p),o.font=u._font,o.textBaseline="alphabetic",o.fillStyle="#000",o.fillText(u.testString,0,c);var v={ascent:0,descent:0,fontSize:0},m=o.getImageData(0,0,a,p);if(!m)return v.ascent=c,v.descent=c+6,v.fontSize=v.ascent+v.descent,d.remove(h),v;var y=m.data,P=y.length,E=a*4,S,w,R=0,A=!1;for(S=0;S<c;S++){for(w=0;w<E;w+=4)if(y[R+w]!==255){A=!0;break}if(!A)R+=E;else break}for(v.ascent=c-S,R=P-E,A=!1,S=p;S>c;S--){for(w=0;w<E;w+=4)if(y[R+w]!==255){A=!0;break}if(!A)R-=E;else break}return v.descent=S-c,v.fontSize=v.ascent+v.descent,d.remove(h),v};l.exports=x},76555:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(99584),x=e(61068),u=e(56694),h=e(64937),o=e(89980),n=e(32979),r=e(10850),f=e(55638),a=e(80032),c=e(74744),p=new u({Extends:o,Mixins:[h.Alpha,h.BlendMode,h.ComputedSize,h.Crop,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.PostPipeline,h.ScrollFactor,h.Tint,h.Transform,h.Visible,a],initialize:function(m,y,P,E,S){y===void 0&&(y=0),P===void 0&&(P=0),o.call(this,m,"Text"),this.renderer=m.sys.renderer,this.setPosition(y,P),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=x.create(this),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.style=new c(this,S),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=m.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(E),S&&S.padding&&this.setPadding(S.padding),S&&S.lineSpacing&&this.setLineSpacing(S.lineSpacing)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",d(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(v){var m=this.style;if(m.wordWrapCallback){var y=m.wordWrapCallback.call(m.wordWrapCallbackScope,v,this);return Array.isArray(y)&&(y=y.join(`
`)),y}else return m.wordWrapWidth?m.wordWrapUseAdvanced?this.advancedWordWrap(v,this.context,this.style.wordWrapWidth):this.basicWordWrap(v,this.context,this.style.wordWrapWidth):v},advancedWordWrap:function(v,m,y){for(var P="",E=v.replace(/ +/gi," ").split(this.splitRegExp),S=E.length,w=0;w<S;w++){var R=E[w],A="";R=R.replace(/^ *|\s*$/gi,"");var O=m.measureText(R).width;if(O<y){P+=R+`
`;continue}for(var F=y,b=R.split(" "),D=0;D<b.length;D++){var I=b[D],B=I+" ",k=m.measureText(B).width;if(k>F){if(D===0){for(var U=B;U.length&&(U=U.slice(0,-1),k=m.measureText(U).width,!(k<=F)););if(!U.length)throw new Error("wordWrapWidth < a single character");var X=I.substr(U.length);b[D]=X,A+=U}var H=b[D].length?D:D+1,N=b.slice(H).join(" ").replace(/[ \n]*$/gi,"");E.splice(w+1,0,N),S=E.length;break}else A+=B,F-=k}P+=A.replace(/[ \n]*$/gi,"")+`
`}return P=P.replace(/[\s|\n]*$/gi,""),P},basicWordWrap:function(v,m,y){for(var P="",E=v.split(this.splitRegExp),S=E.length-1,w=m.measureText(" ").width,R=0;R<=S;R++){for(var A=y,O=E[R].split(" "),F=O.length-1,b=0;b<=F;b++){var D=O[b],I=m.measureText(D).width,B=I;b<F&&(B+=w),B>A&&b>0&&(P+=`
`,A=y),P+=D,b<F?(P+=" ",A-=B):A-=I}R<S&&(P+=`
`)}return P},getWrappedText:function(v){v===void 0&&(v=this._text),this.style.syncFont(this.canvas,this.context);var m=this.runWordWrap(v);return m.split(this.splitRegExp)},setText:function(v){return!v&&v!==0&&(v=""),Array.isArray(v)&&(v=v.join(`
`)),v!==this._text&&(this._text=v.toString(),this.updateText()),this},appendText:function(v,m){m===void 0&&(m=!0),!v&&v!==0&&(v=""),Array.isArray(v)&&(v=v.join(`
`)),v=v.toString();var y=this._text.concat(m?`
`+v:v);return y!==this._text&&(this._text=y,this.updateText()),this},setStyle:function(v){return this.style.setStyle(v)},setFont:function(v){return this.style.setFont(v)},setFontFamily:function(v){return this.style.setFontFamily(v)},setFontSize:function(v){return this.style.setFontSize(v)},setFontStyle:function(v){return this.style.setFontStyle(v)},setFixedSize:function(v,m){return this.style.setFixedSize(v,m)},setBackgroundColor:function(v){return this.style.setBackgroundColor(v)},setFill:function(v){return this.style.setFill(v)},setColor:function(v){return this.style.setColor(v)},setStroke:function(v,m){return this.style.setStroke(v,m)},setShadow:function(v,m,y,P,E,S){return this.style.setShadow(v,m,y,P,E,S)},setShadowOffset:function(v,m){return this.style.setShadowOffset(v,m)},setShadowColor:function(v){return this.style.setShadowColor(v)},setShadowBlur:function(v){return this.style.setShadowBlur(v)},setShadowStroke:function(v){return this.style.setShadowStroke(v)},setShadowFill:function(v){return this.style.setShadowFill(v)},setWordWrapWidth:function(v,m){return this.style.setWordWrapWidth(v,m)},setWordWrapCallback:function(v,m){return this.style.setWordWrapCallback(v,m)},setAlign:function(v){return this.style.setAlign(v)},setResolution:function(v){return this.style.setResolution(v)},setLineSpacing:function(v){return this.lineSpacing=v,this.updateText()},setPadding:function(v,m,y,P){if(typeof v=="object"){var E=v,S=r(E,"x",null);S!==null?(v=S,y=S):(v=r(E,"left",0),y=r(E,"right",v));var w=r(E,"y",null);w!==null?(m=w,P=w):(m=r(E,"top",0),P=r(E,"bottom",m))}else v===void 0&&(v=0),m===void 0&&(m=v),y===void 0&&(y=v),P===void 0&&(P=m);return this.padding.left=v,this.padding.top=m,this.padding.right=y,this.padding.bottom=P,this.updateText()},setMaxLines:function(v){return this.style.setMaxLines(v)},updateText:function(){var v=this.canvas,m=this.context,y=this.style,P=y.resolution,E=y.metrics;y.syncFont(v,m);var S=this._text;(y.wordWrapWidth||y.wordWrapCallback)&&(S=this.runWordWrap(this._text));var w=S.split(this.splitRegExp),R=n(this,E,w),A=this.padding,O;y.fixedWidth===0?(this.width=R.width+A.left+A.right,O=R.width):(this.width=y.fixedWidth,O=this.width-A.left-A.right,O<R.width&&(O=R.width)),y.fixedHeight===0?this.height=R.height+A.top+A.bottom:this.height=y.fixedHeight;var F=this.width,b=this.height;this.updateDisplayOrigin(),F*=P,b*=P,F=Math.max(F,1),b=Math.max(b,1),v.width!==F||v.height!==b?(v.width=F,v.height=b,this.frame.setSize(F,b),y.syncFont(v,m),y.rtl&&(m.direction="rtl")):m.clearRect(0,0,F,b),m.save(),m.scale(P,P),y.backgroundColor&&(m.fillStyle=y.backgroundColor,m.fillRect(0,0,F,b)),y.syncStyle(v,m),m.translate(A.left,A.top);for(var D,I,B=0;B<R.lines;B++){if(D=y.strokeThickness/2,I=y.strokeThickness/2+B*R.lineHeight+E.ascent,B>0&&(I+=R.lineSpacing*B),y.rtl)D=F-D-A.left-A.right;else if(y.align==="right")D+=O-R.lineWidths[B];else if(y.align==="center")D+=(O-R.lineWidths[B])/2;else if(y.align==="justify"){var k=.85;if(R.lineWidths[B]/R.width>=k){var U=R.width-R.lineWidths[B],X=m.measureText(" ").width,H=w[B].trim(),N=H.split(" ");U+=(w[B].length-H.length)*X;for(var z=Math.floor(U/X),L=0;z>0;)N[L]+=" ",L=(L+1)%(N.length-1||1),--z;w[B]=N.join(" ")}}this.autoRound&&(D=Math.round(D),I=Math.round(I)),y.strokeThickness&&(y.syncShadow(m,y.shadowStroke),m.strokeText(w[B],D,I)),y.color&&(y.syncShadow(m,y.shadowFill),m.fillText(w[B],D,I))}m.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(v,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var G=this.input;return G&&!G.customHitArea&&(G.hitArea.width=this.width,G.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(v){this.setText(v)}},toJSON:function(){var v=h.ToJSON(this),m={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return v.data=m,v},preDestroy:function(){this.style.rtl&&f(this.canvas),x.remove(this.canvas),this.texture.destroy()}});l.exports=p},71649:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){d.width===0||d.height===0||(x.addToRenderList(d),e.batchSprite(d,d.frame,x,u))};l.exports=T},75397:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(99325),u=e(20494),h=e(76555);x.register("text",function(o,n){o===void 0&&(o={});var r=u(o,"text",""),f=u(o,"style",null),a=u(o,"padding",null);a!==null&&(f.padding=a);var c=new h(this.scene,0,0,r,f);return n!==void 0&&(o.add=n),d(this.scene,c,o),c.autoRound=u(o,"autoRound",!0),c.resolution=u(o,"resolution",1),c})},94627:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(76555),x=e(61286);x.register("text",function(u,h,o,n){return this.displayList.add(new d(this.scene,u,h,o,n))})},80032:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(76128),u=e(71649),l.exports={renderWebGL:x,renderCanvas:u}},74744:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(20494),u=e(10850),h=e(27030),o={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},n=new d({initialize:function(f,a){this.parent=f,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(a,!1,!0)},setStyle:function(r,f,a){f===void 0&&(f=!0),a===void 0&&(a=!1),r&&r.hasOwnProperty("fontSize")&&typeof r.fontSize=="number"&&(r.fontSize=r.fontSize.toString()+"px");for(var c in o){var p=a?o[c][1]:this[c];c==="wordWrapCallback"||c==="wordWrapCallbackScope"?this[c]=u(r,o[c][0],p):this[c]=x(r,o[c][0],p)}var v=u(r,"font",null);v!==null&&this.setFont(v,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var m=u(r,"fill",null);m!==null&&(this.color=m);var y=u(r,"metrics",!1);return y?this.metrics={ascent:u(y,"ascent",0),descent:u(y,"descent",0),fontSize:u(y,"fontSize",0)}:(f||!this.metrics)&&(this.metrics=h(this)),f?this.parent.updateText():this.parent},syncFont:function(r,f){f.font=this._font},syncStyle:function(r,f){f.textBaseline="alphabetic",f.fillStyle=this.color,f.strokeStyle=this.stroke,f.lineWidth=this.strokeThickness,f.lineCap="round",f.lineJoin="round"},syncShadow:function(r,f){f?(r.shadowOffsetX=this.shadowOffsetX,r.shadowOffsetY=this.shadowOffsetY,r.shadowColor=this.shadowColor,r.shadowBlur=this.shadowBlur):(r.shadowOffsetX=0,r.shadowOffsetY=0,r.shadowColor=0,r.shadowBlur=0)},update:function(r){return r&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=h(this)),this.parent.updateText()},setFont:function(r,f){f===void 0&&(f=!0);var a=r,c="",p="";if(typeof r!="string")a=u(r,"fontFamily","Courier"),c=u(r,"fontSize","16px"),p=u(r,"fontStyle","");else{var v=r.split(" "),m=0;p=v.length>2?v[m++]:"",c=v[m++]||"16px",a=v[m++]||"Courier"}return(a!==this.fontFamily||c!==this.fontSize||p!==this.fontStyle)&&(this.fontFamily=a,this.fontSize=c,this.fontStyle=p,f&&this.update(!0)),this.parent},setFontFamily:function(r){return this.fontFamily!==r&&(this.fontFamily=r,this.update(!0)),this.parent},setFontStyle:function(r){return this.fontStyle!==r&&(this.fontStyle=r,this.update(!0)),this.parent},setFontSize:function(r){return typeof r=="number"&&(r=r.toString()+"px"),this.fontSize!==r&&(this.fontSize=r,this.update(!0)),this.parent},setTestString:function(r){return this.testString=r,this.update(!0)},setFixedSize:function(r,f){return this.fixedWidth=r,this.fixedHeight=f,r&&(this.parent.width=r),f&&(this.parent.height=f),this.update(!1)},setBackgroundColor:function(r){return this.backgroundColor=r,this.update(!1)},setFill:function(r){return this.color=r,this.update(!1)},setColor:function(r){return this.color=r,this.update(!1)},setResolution:function(r){return this.resolution=r,this.update(!1)},setStroke:function(r,f){return f===void 0&&(f=this.strokeThickness),r===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==r||this.strokeThickness!==f)&&(this.stroke=r,this.strokeThickness=f,this.update(!0)),this.parent},setShadow:function(r,f,a,c,p,v){return r===void 0&&(r=0),f===void 0&&(f=0),a===void 0&&(a="#000"),c===void 0&&(c=0),p===void 0&&(p=!1),v===void 0&&(v=!0),this.shadowOffsetX=r,this.shadowOffsetY=f,this.shadowColor=a,this.shadowBlur=c,this.shadowStroke=p,this.shadowFill=v,this.update(!1)},setShadowOffset:function(r,f){return r===void 0&&(r=0),f===void 0&&(f=r),this.shadowOffsetX=r,this.shadowOffsetY=f,this.update(!1)},setShadowColor:function(r){return r===void 0&&(r="#000"),this.shadowColor=r,this.update(!1)},setShadowBlur:function(r){return r===void 0&&(r=0),this.shadowBlur=r,this.update(!1)},setShadowStroke:function(r){return this.shadowStroke=r,this.update(!1)},setShadowFill:function(r){return this.shadowFill=r,this.update(!1)},setWordWrapWidth:function(r,f){return f===void 0&&(f=!1),this.wordWrapWidth=r,this.wordWrapUseAdvanced=f,this.update(!1)},setWordWrapCallback:function(r,f){return f===void 0&&(f=null),this.wordWrapCallback=r,this.wordWrapCallbackScope=f,this.update(!1)},setAlign:function(r){return r===void 0&&(r="left"),this.align=r,this.update(!1)},setMaxLines:function(r){return r===void 0&&(r=0),this.maxLines=r,this.update(!1)},getTextMetrics:function(){var r=this.metrics;return{ascent:r.ascent,descent:r.descent,fontSize:r.fontSize}},toJSON:function(){var r={};for(var f in o)r[f]=this[f];return r.metrics=this.getTextMetrics(),r},destroy:function(){this.parent=void 0}});l.exports=n},76128:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(75512),x=function(u,h,o,n){if(!(h.width===0||h.height===0)){o.addToRenderList(h);var r=h.frame,f=r.width,a=r.height,c=d.getTintAppendFloatAlpha,p=u.pipelines.set(h.pipeline,h),v=p.setTexture2D(r.glTexture,h);p.batchTexture(h,r.glTexture,f,a,h.x,h.y,f/h.style.resolution,a/h.style.resolution,h.scaleX,h.scaleY,h.rotation,h.flipX,h.flipY,h.scrollFactorX,h.scrollFactorY,h.displayOriginX,h.displayOriginY,0,0,f,a,c(h.tintTopLeft,o.alpha*h._alphaTL),c(h.tintTopRight,o.alpha*h._alphaTR),c(h.tintBottomLeft,o.alpha*h._alphaBL),c(h.tintBottomRight,o.alpha*h._alphaBR),h.tintFill,0,0,o,n,!1,v)}};l.exports=x},35856:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61068),x=e(56694),u=e(64937),h=e(89980),o=e(3504),n=e(8213),r=e(9271),f=e(93736),a=8,c=new x({Extends:h,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Crop,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Tint,u.Transform,u.Visible,r],initialize:function(v,m,y,P,E,S,w){var R=v.sys.renderer;h.call(this,v,"TileSprite");var A=v.sys.textures.get(S),O=A.get(w);O.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),A=v.sys.textures.get("__MISSING"),O=A.get()),A.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),A=v.sys.textures.get("__MISSING"),O=A.get()),!P||!E?(P=O.width,E=O.height):(P=Math.floor(P),E=Math.floor(E)),this._tilePosition=new f,this._tileScale=new f(1,1),this.dirty=!1,this.renderer=R,this.canvas=d.create(this,P,E),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=A,this.displayFrame=O,this._crop=this.resetCropObject(),this.texture=v.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=o(O.width),this.potHeight=o(O.height),this.fillCanvas=d.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(m,y),this.setSize(P,E),this.setFrame(w),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(p,v){return this.displayTexture=this.scene.sys.textures.get(p),this.setFrame(v)},setFrame:function(p){var v=this.displayTexture.get(p);return this.potWidth=o(v.width),this.potHeight=o(v.height),this.canvas.width=0,!v.cutWidth||!v.cutHeight?this.renderFlags&=~a:this.renderFlags|=a,this.displayFrame=v,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(p,v){return p!==void 0&&(this.tilePositionX=p),v!==void 0&&(this.tilePositionY=v),this},setTileScale:function(p,v){return p===void 0&&(p=this.tileScaleX),v===void 0&&(v=p),this.tileScaleX=p,this.tileScaleY=v,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var p=this.displayFrame;if(p.source.isRenderTexture||p.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var v=this.fillContext,m=this.fillCanvas,y=this.potWidth,P=this.potHeight;(!this.renderer||!this.renderer.gl)&&(y=p.cutWidth,P=p.cutHeight),v.clearRect(0,0,y,P),m.width=y,m.height=P,v.drawImage(p.source.image,p.cutX,p.cutY,p.cutWidth,p.cutHeight,0,0,y,P),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(m,this.fillPattern):this.fillPattern=v.createPattern(m,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var p=this.canvas;if((p.width!==this.width||p.height!==this.height)&&(p.width=this.width,p.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var v=this.context;this.scene.sys.game.config.antialias||n.disable(v);var m=this._tileScale.x,y=this._tileScale.y,P=this._tilePosition.x,E=this._tilePosition.y;v.clearRect(0,0,this.width,this.height),v.save(),v.scale(m,y),v.translate(-P,-E),v.fillStyle=this.fillPattern,v.fillRect(P,E,this.width/m,this.height/y),v.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),d.remove(this.canvas),d.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(p){this._tilePosition.x=p,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(p){this._tilePosition.y=p,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(p){this._tileScale.x=p,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(p){this._tileScale.y=p,this.dirty=!0}}});l.exports=c},93305:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){d.updateCanvas(),x.addToRenderList(d),e.batchSprite(d,d.frame,x,u)};l.exports=T},63950:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(99325),u=e(20494),h=e(35856);x.register("tileSprite",function(o,n){o===void 0&&(o={});var r=u(o,"x",0),f=u(o,"y",0),a=u(o,"width",512),c=u(o,"height",512),p=u(o,"key",""),v=u(o,"frame",""),m=new h(this.scene,r,f,a,c,p,v);return n!==void 0&&(o.add=n),d(this.scene,m,o),m})},20509:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(35856),x=e(61286);x.register("tileSprite",function(u,h,o,n,r,f){return this.displayList.add(new d(this.scene,u,h,o,n,r,f))})},9271:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(74287),u=e(93305),l.exports={renderWebGL:x,renderCanvas:u}},74287:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(75512),x=function(u,h,o,n){h.updateCanvas();var r=h.width,f=h.height;if(!(r===0||f===0)){o.addToRenderList(h);var a=d.getTintAppendFloatAlpha,c=u.pipelines.set(h.pipeline,h),p=c.setTexture2D(h.fillPattern,h);c.batchTexture(h,h.fillPattern,h.displayFrame.width*h.tileScaleX,h.displayFrame.height*h.tileScaleY,h.x,h.y,r,f,h.scaleX,h.scaleY,h.rotation,h.flipX,h.flipY,h.scrollFactorX,h.scrollFactorY,h.originX*r,h.originY*f,0,0,r,f,a(h.tintTopLeft,o.alpha*h._alphaTL),a(h.tintTopRight,o.alpha*h._alphaTR),a(h.tintBottomLeft,o.alpha*h._alphaBL),a(h.tintBottomRight,o.alpha*h._alphaBR),h.tintFill,h.tilePositionX%h.displayFrame.width/h.displayFrame.width,h.tilePositionY%h.displayFrame.height/h.displayFrame.height,o,n,!1,p)}};l.exports=x},8630:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),x=e(56694),u=e(64937),h=e(56631),o=e(97081),n=e(89980),r=e(83392),f=e(76038),a=e(76583),c=e(77974),p=new x({Extends:n,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Size,u.TextureCrop,u.Tint,u.Transform,u.Visible,c],initialize:function(m,y,P,E){n.call(this,m,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=a(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._rfvCallbackId=0;var S=m.sys.game;this._device=S.device.video,this.setPosition(y,P),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),S.events.on(o.PAUSE,this.globalPause,this),S.events.on(o.RESUME,this.globalResume,this);var w=m.sys.sound;w&&w.on(f.GLOBAL_MUTE,this.globalMute,this),E&&this.load(E)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(v){var m=this.scene.sys.cache.video.get(v);return m?(this.cacheKey=v,this.loadHandler(m.url,m.noAudio,m.crossOrigin)):console.warn("No video in cache for key: "+v),this},changeSource:function(v,m,y,P,E){m===void 0&&(m=!0),y===void 0&&(y=!1),this.cacheKey!==v&&(this.load(v),m&&this.play(y,P,E))},getVideoKey:function(){return this.cacheKey},loadURL:function(v,m,y){m===void 0&&(m=!1);var P=this._device.getVideoURL(v);return P?(this.cacheKey="",this.loadHandler(P.url,m,y)):console.warn("No supported video format found for "+v),this},loadMediaStream:function(v,m,y){return this.loadHandler(null,m,y,v)},loadHandler:function(v,m,y,P){m||(m=!1);var E=this.video;if(E?(this.removeLoadEventHandlers(),this.stop()):(E=document.createElement("video"),E.controls=!1,E.setAttribute("playsinline","playsinline"),E.setAttribute("preload","auto"),E.setAttribute("disablePictureInPicture","true")),m?(E.muted=!0,E.defaultMuted=!0,E.setAttribute("autoplay","autoplay")):(E.muted=!1,E.defaultMuted=!1,E.removeAttribute("autoplay")),y?E.setAttribute("crossorigin",y):E.removeAttribute("crossorigin"),P)if("srcObject"in E)try{E.srcObject=P}catch(S){if(S.name!=="TypeError")throw S;E.src=URL.createObjectURL(P)}else E.src=URL.createObjectURL(P);else E.src=v;return this.addLoadEventHandlers(),this.retry=0,this.video=E,this._playCalled=!1,E.load(),this},requestVideoFrame:function(v,m){var y=this.video;if(y){var P=m.width,E=m.height,S=this.videoTexture,w=this.videoTextureSource,R=!S||w.source!==y;R?(this._codePaused=y.paused,this._codeMuted=y.muted,S?(w.source=y,w.width=P,w.height=E,S.get().setSize(P,E)):(S=this.scene.sys.textures.create(this._key,y,P,E),S.add("__BASE",0,0,0,P,E),this.setTexture(S),this.videoTexture=S,this.videoTextureSource=S.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(h.VIDEO_TEXTURE,this,S)),this.setSizeToFrame(),this.updateDisplayOrigin()):w.update(),this.isStalled=!1,this.metadata=m;var A=m.mediaTime;R&&(this._lastUpdate=A,this.emit(h.VIDEO_CREATED,this,P,E),this.frameReady||(this.frameReady=!0,this.emit(h.VIDEO_PLAY,this))),this._playingMarker?A>=this._markerOut&&(y.loop?(y.currentTime=this._markerIn,this.emit(h.VIDEO_LOOP,this)):(this.stop(!1),this.emit(h.VIDEO_COMPLETE,this))):A<this._lastUpdate&&this.emit(h.VIDEO_LOOP,this),this._lastUpdate=A,this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(v,m,y){m===void 0&&(m=-1),y===void 0&&(y=r.MAX_SAFE_INTEGER);var P=this.video;return!P||this.isPlaying()?(P||console.warn("Video not loaded"),this):(v===void 0&&(v=P.loop),P.loop=v,this._markerIn=m,this._markerOut=y,this._playingMarker=m>-1&&y>m&&y<r.MAX_SAFE_INTEGER,this._playCalled||(this._rfvCallbackId=P.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},addLoadEventHandlers:function(){var v=this.video;v&&(v.addEventListener("error",this._loadCallbackHandler),v.addEventListener("abort",this._loadCallbackHandler))},removeLoadEventHandlers:function(){var v=this.video;v&&(v.removeEventListener("error",this._loadCallbackHandler),v.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var v=this.video;if(v){var m=this._callbacks;for(var y in m)v.addEventListener(y,m[y])}},removeEventHandlers:function(){var v=this.video;if(v){var m=this._callbacks;for(var y in m)v.removeEventListener(y,m[y])}},createPlayPromise:function(v){v===void 0&&(v=!0);var m=this.video,y=m.play();if(y!==void 0){var P=this.playSuccess.bind(this),E=this.playError.bind(this);if(!v){var S=this;E=function(){S.failedPlayAttempts++}}y.then(P).catch(E)}else m.addEventListener("playing",this._callbacks.legacy),v||this.failedPlayAttempts++},addMarker:function(v,m,y){return!isNaN(m)&&m>=0&&!isNaN(y)&&y>m&&(this.markers[v]=[m,y]),this},playMarker:function(v,m){var y=this.markers[v];return y&&this.play(m,y[0],y[1]),this},removeMarker:function(v){return delete this.markers[v],this},snapshot:function(v,m){return v===void 0&&(v=this.width),m===void 0&&(m=this.height),this.snapshotArea(0,0,this.width,this.height,v,m)},snapshotArea:function(v,m,y,P,E,S){v===void 0&&(v=0),m===void 0&&(m=0),y===void 0&&(y=this.width),P===void 0&&(P=this.height),E===void 0&&(E=y),S===void 0&&(S=P);var w=this.video,R=this.snapshotTexture;return R?(R.setSize(E,S),w&&R.context.drawImage(w,v,m,y,P,0,0,E,S)):(R=this.scene.sys.textures.createCanvas(a(),E,S),this.snapshotTexture=R,w&&R.context.drawImage(w,v,m,y,P,0,0,E,S)),R.update()},saveSnapshotTexture:function(v){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,v):this.snapshotTexture=this.scene.sys.textures.createCanvas(v,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(h.VIDEO_UNLOCKED,this));var v=this.scene.sys.sound;v&&v.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(v){var m=v.name;m==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(h.VIDEO_LOCKED,this)):m==="NotSupportedError"?(this.stop(!1),this.emit(h.VIDEO_UNSUPPORTED,this,v)):(this.stop(!1),this.emit(h.VIDEO_ERROR,this,v))},legacyPlayHandler:function(){var v=this.video;v&&(this.playSuccess(),v.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(h.VIDEO_PLAYING,this)},loadErrorHandler:function(v){this.stop(!1),this.emit(h.VIDEO_ERROR,this,v)},stalledHandler:function(v){this.isStalled=!0,this.emit(h.VIDEO_STALLED,this,v)},completeHandler:function(){this._playCalled=!1,this.emit(h.VIDEO_COMPLETE,this)},preUpdate:function(v,m){var y=this.video;!y||!this._playCalled||this.touchLocked&&this.playWhenUnlocked&&(this.retry+=m,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(v){var m=this.video;if(m){var y=m.duration;if(y!==1/0&&!isNaN(y)){var P=y*v;this.setCurrentTime(P)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(v){var m=this.video;if(m){if(typeof v=="string"){var y=v[0],P=parseFloat(v.substr(1));y==="+"?v=m.currentTime+P:y==="-"&&(v=m.currentTime-P)}m.currentTime=v}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(h.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(h.VIDEO_SEEKED,this)},getProgress:function(){var v=this.video;if(v){var m=v.duration;if(m!==1/0&&!isNaN(m))return v.currentTime/m}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(v){v===void 0&&(v=!0),this._codeMuted=v;var m=this.video;return m&&(m.muted=this._systemMuted?!0:v),this},isMuted:function(){return this._codeMuted},globalMute:function(v,m){this._systemMuted=m;var y=this.video;y&&(y.muted=this._codeMuted?!0:m)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&!this.video.ended&&this.createPlayPromise()},setPaused:function(v){v===void 0&&(v=!0);var m=this.video;return this._codePaused=v,m&&!m.ended&&(v?m.paused||(this.removeEventHandlers(),m.pause()):v||(this._playCalled?m.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(v){return v===void 0&&(v=1),this.video&&(this.video.volume=d(v,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(v){return this.video&&(this.video.playbackRate=v),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(v){return v===void 0&&(v=!0),this.video&&(this.video.loop=v),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(v,m){return m===void 0&&(m=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,v),this.videoTextureSource.setFlipY(m)),this._key=v,this.flipY=m,!!this.videoTexture},stop:function(v){v===void 0&&(v=!0);var m=this.video;return m&&(this.removeEventHandlers(),m.cancelVideoFrameCallback(this._rfvCallbackId),m.pause()),this.retry=0,this._playCalled=!1,v&&this.emit(h.VIDEO_STOP,this),this},removeVideoElement:function(){var v=this.video;if(v){for(v.parentNode&&v.parentNode.removeChild(v);v.hasChildNodes();)v.removeChild(v.firstChild);v.removeAttribute("autoplay"),v.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var v=this.scene.sys.game.events;v.off(o.PAUSE,this.globalPause,this),v.off(o.RESUME,this.globalResume,this);var m=this.scene.sys.sound;m&&m.off(f.GLOBAL_MUTE,this.globalMute,this)}});l.exports=p},56933:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){d.videoTexture&&(x.addToRenderList(d),e.batchSprite(d,d.frame,x,u))};l.exports=T},65601:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(99325),u=e(20494),h=e(8630);x.register("video",function(o,n){o===void 0&&(o={});var r=u(o,"key",null),f=new h(this.scene,0,0,r);return n!==void 0&&(o.add=n),d(this.scene,f,o),f})},215:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(8630),x=e(61286);x.register("video",function(u,h,o){return this.displayList.add(new d(this.scene,u,h,o))})},77974:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(83572),u=e(56933),l.exports={renderWebGL:x,renderCanvas:u}},83572:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){d.videoTexture&&(x.addToRenderList(d),d.pipeline.batchSprite(d,x,u))};l.exports=T},71030:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(95723),x=e(26673),u=e(65650),h=e(56694),o=e(64937),n=e(89980),r=e(74118),f=e(94287),a=new h({Extends:n,Mixins:[o.Depth,o.GetBounds,o.Origin,o.Transform,o.ScrollFactor,o.Visible],initialize:function(p,v,m,y,P){y===void 0&&(y=1),P===void 0&&(P=y),n.call(this,p,"Zone"),this.setPosition(v,m),this.width=y,this.height=P,this.blendMode=d.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(c){this.scaleX=c/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(c){this.scaleY=c/this.height}},setSize:function(c,p,v){v===void 0&&(v=!0),this.width=c,this.height=p,this.updateDisplayOrigin();var m=this.input;return v&&m&&!m.customHitArea&&(m.hitArea.width=c,m.hitArea.height=p),this},setDisplaySize:function(c,p){return this.displayWidth=c,this.displayHeight=p,this},setCircleDropZone:function(c){return this.setDropZone(new x(0,0,c),u)},setRectangleDropZone:function(c,p){return this.setDropZone(new r(0,0,c,p),f)},setDropZone:function(c,p){return this.input||this.setInteractive(c,p,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(c,p,v){v.addToRenderList(p)},renderWebGL:function(c,p,v){v.addToRenderList(p)}});l.exports=a},24067:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(99325),x=e(20494),u=e(71030);d.register("zone",function(h){var o=x(h,"x",0),n=x(h,"y",0),r=x(h,"width",1),f=x(h,"height",r);return new u(this.scene,o,n,r,f)})},34546:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(71030),x=e(61286);x.register("zone",function(u,h,o,n){return this.displayList.add(new d(this.scene,u,h,o,n))})},95847:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.radius>0?Math.PI*e.radius*e.radius:0};l.exports=T},26673:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(65650),u=e(94026),h=e(62941),o=e(52394),n=e(30977),r=new d({initialize:function(a,c,p){a===void 0&&(a=0),c===void 0&&(c=0),p===void 0&&(p=0),this.type=o.CIRCLE,this.x=a,this.y=c,this._radius=p,this._diameter=p*2},contains:function(f,a){return x(this,f,a)},getPoint:function(f,a){return u(this,f,a)},getPoints:function(f,a,c){return h(this,f,a,c)},getRandomPoint:function(f){return n(this,f)},setTo:function(f,a,c){return this.x=f,this.y=a,this._radius=c,this._diameter=c*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(f,a){return a===void 0&&(a=f),this.x=f,this.y=a,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(f){this._radius=f,this._diameter=f*2}},diameter:{get:function(){return this._diameter},set:function(f){this._diameter=f,this._radius=f*.5}},left:{get:function(){return this.x-this._radius},set:function(f){this.x=f+this._radius}},right:{get:function(){return this.x+this._radius},set:function(f){this.x=f-this._radius}},top:{get:function(){return this.y-this._radius},set:function(f){this.y=f+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(f){this.y=f-this._radius}}});l.exports=r},37964:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return 2*(Math.PI*e.radius)};l.exports=T},72233:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,h,o){return o===void 0&&(o=new d),o.x=u.x+u.radius*Math.cos(h),o.y=u.y+u.radius*Math.sin(h),o};l.exports=x},61761:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(26673),x=function(u){return new d(u.x,u.y,u.radius)};l.exports=x},65650:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){if(e.radius>0&&d>=e.left&&d<=e.right&&x>=e.top&&x<=e.bottom){var u=(e.x-d)*(e.x-d),h=(e.y-x)*(e.y-x);return u+h<=e.radius*e.radius}else return!1};l.exports=T},39187:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(65650),x=function(u,h){return d(u,h.x,h.y)};l.exports=x},58672:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(65650),x=function(u,h){return d(u,h.x,h.y)&&d(u,h.right,h.y)&&d(u,h.x,h.bottom)&&d(u,h.right,h.bottom)};l.exports=x},42997:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d.setTo(e.x,e.y,e.radius)};l.exports=T},94894:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.x===d.x&&e.y===d.y&&e.radius===d.radius};l.exports=T},48027:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),x=function(u,h){return h===void 0&&(h=new d),h.x=u.left,h.y=u.top,h.width=u.diameter,h.height=u.diameter,h};l.exports=x},94026:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72233),x=e(91806),u=e(83392),h=e(79967),o=function(n,r,f){f===void 0&&(f=new h);var a=x(r,0,u.PI2);return d(n,a,f)};l.exports=o},62941:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(37964),x=e(72233),u=e(91806),h=e(83392),o=function(n,r,f,a){a===void 0&&(a=[]),!r&&f>0&&(r=d(n)/f);for(var c=0;c<r;c++){var p=u(c/r,0,h.PI2);a.push(x(n,p))}return a};l.exports=o},34585:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return e.x+=d,e.y+=x,e};l.exports=T},88665:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.x+=d.x,e.y+=d.y,e};l.exports=T},30977:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,h){h===void 0&&(h=new d);var o=2*Math.PI*Math.random(),n=Math.random()+Math.random(),r=n>1?2-n:n,f=r*Math.cos(o),a=r*Math.sin(o);return h.x=u.x+f*u.radius,h.y=u.y+a*u.radius,h};l.exports=x},6112:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(26673);d.Area=e(95847),d.Circumference=e(37964),d.CircumferencePoint=e(72233),d.Clone=e(61761),d.Contains=e(65650),d.ContainsPoint=e(39187),d.ContainsRect=e(58672),d.CopyFrom=e(42997),d.Equals=e(94894),d.GetBounds=e(48027),d.GetPoint=e(94026),d.GetPoints=e(62941),d.Offset=e(34585),d.OffsetPoint=e(88665),d.Random=e(30977),l.exports=d},52394:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};l.exports=T},58605:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.isEmpty()?0:e.getMajorRadius()*e.getMinorRadius()*Math.PI};l.exports=T},39507:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d=e.width/2,x=e.height/2,u=Math.pow(d-x,2)/Math.pow(d+x,2);return Math.PI*(d+x)*(1+3*u/(10+Math.sqrt(4-3*u)))};l.exports=T},86998:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,h,o){o===void 0&&(o=new d);var n=u.width/2,r=u.height/2;return o.x=u.x+n*Math.cos(h),o.y=u.y+r*Math.sin(h),o};l.exports=x},81773:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(95669),x=function(u){return new d(u.x,u.y,u.width,u.height)};l.exports=x},72313:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){if(e.width<=0||e.height<=0)return!1;var u=(d-e.x)/e.width,h=(x-e.y)/e.height;return u*=u,h*=h,u+h<.25};l.exports=T},34368:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72313),x=function(u,h){return d(u,h.x,h.y)};l.exports=x},71431:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72313),x=function(u,h){return d(u,h.x,h.y)&&d(u,h.right,h.y)&&d(u,h.x,h.bottom)&&d(u,h.right,h.bottom)};l.exports=x},75459:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d.setTo(e.x,e.y,e.width,e.height)};l.exports=T},95669:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72313),u=e(95340),h=e(54978),o=e(52394),n=e(72006),r=new d({initialize:function(a,c,p,v){a===void 0&&(a=0),c===void 0&&(c=0),p===void 0&&(p=0),v===void 0&&(v=0),this.type=o.ELLIPSE,this.x=a,this.y=c,this.width=p,this.height=v},contains:function(f,a){return x(this,f,a)},getPoint:function(f,a){return u(this,f,a)},getPoints:function(f,a,c){return h(this,f,a,c)},getRandomPoint:function(f){return n(this,f)},setTo:function(f,a,c,p){return this.x=f,this.y=a,this.width=c,this.height=p,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(f,a){return a===void 0&&(a=f),this.x=f,this.y=a,this},setSize:function(f,a){return a===void 0&&(a=f),this.width=f,this.height=a,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(f){this.x=f+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(f){this.x=f-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(f){this.y=f+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(f){this.y=f-this.height/2}}});l.exports=r},98068:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.x===d.x&&e.y===d.y&&e.width===d.width&&e.height===d.height};l.exports=T},72897:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),x=function(u,h){return h===void 0&&(h=new d),h.x=u.left,h.y=u.top,h.width=u.width,h.height=u.height,h};l.exports=x},95340:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(86998),x=e(91806),u=e(83392),h=e(79967),o=function(n,r,f){f===void 0&&(f=new h);var a=x(r,0,u.PI2);return d(n,a,f)};l.exports=o},54978:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(39507),x=e(86998),u=e(91806),h=e(83392),o=function(n,r,f,a){a===void 0&&(a=[]),!r&&f>0&&(r=d(n)/f);for(var c=0;c<r;c++){var p=u(c/r,0,h.PI2);a.push(x(n,p))}return a};l.exports=o},77951:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return e.x+=d,e.y+=x,e};l.exports=T},36233:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.x+=d.x,e.y+=d.y,e};l.exports=T},72006:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,h){h===void 0&&(h=new d);var o=Math.random()*Math.PI*2,n=Math.sqrt(Math.random());return h.x=u.x+n*Math.cos(o)*u.width/2,h.y=u.y+n*Math.sin(o)*u.height/2,h};l.exports=x},40652:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(95669);d.Area=e(58605),d.Circumference=e(39507),d.CircumferencePoint=e(86998),d.Clone=e(81773),d.Contains=e(72313),d.ContainsPoint=e(34368),d.ContainsRect=e(71431),d.CopyFrom=e(75459),d.Equals=e(98068),d.GetBounds=e(72897),d.GetPoint=e(95340),d.GetPoints=e(54978),d.Offset=e(77951),d.OffsetPoint=e(36233),d.Random=e(72006),l.exports=d},84068:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(52394),x=e(98611),u={Circle:e(6112),Ellipse:e(40652),Intersects:e(7563),Line:e(28482),Mesh:e(14293),Point:e(63472),Polygon:e(44359),Rectangle:e(66658),Triangle:e(87619)};u=x(!1,u,d),l.exports=u},22184:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(53996),x=function(u,h){return d(u.x,u.y,h.x,h.y)<=u.radius+h.radius};l.exports=x},26535:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=d.width/2,u=d.height/2,h=Math.abs(e.x-d.x-x),o=Math.abs(e.y-d.y-u),n=x+e.radius,r=u+e.radius;if(h>n||o>r)return!1;if(h<=x||o<=u)return!0;var f=h-x,a=o-u,c=f*f,p=a*a,v=e.radius*e.radius;return c+p<=v};l.exports=T},71145:(l,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=e(22184),u=function(h,o,n){if(n===void 0&&(n=[]),x(h,o)){var r=h.x,f=h.y,a=h.radius,c=o.x,p=o.y,v=o.radius,m,y,P,E,S;if(f===p)S=(v*v-a*a-c*c+r*r)/(2*(r-c)),m=1,y=-2*p,P=c*c+S*S-2*c*S+p*p-v*v,E=y*y-4*m*P,E===0?n.push(new d(S,-y/(2*m))):E>0&&(n.push(new d(S,(-y+Math.sqrt(E))/(2*m))),n.push(new d(S,(-y-Math.sqrt(E))/(2*m))));else{var w=(r-c)/(f-p),R=(v*v-a*a-c*c+r*r-p*p+f*f)/(2*(f-p));m=w*w+1,y=2*f*w-2*R*w-2*r,P=r*r+f*f+R*R-a*a-2*f*R,E=y*y-4*m*P,E===0?(S=-y/(2*m),n.push(new d(S,R-S*w))):E>0&&(S=(-y+Math.sqrt(E))/(2*m),n.push(new d(S,R-S*w)),S=(-y-Math.sqrt(E))/(2*m),n.push(new d(S,R-S*w)))}}return n};l.exports=u},62508:(l,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(26111),x=e(26535),u=function(h,o,n){if(n===void 0&&(n=[]),x(h,o)){var r=o.getLineA(),f=o.getLineB(),a=o.getLineC(),c=o.getLineD();d(r,h,n),d(f,h,n),d(a,h,n),d(c,h,n)}return n};l.exports=u},26111:(l,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=e(61472),u=function(h,o,n){if(n===void 0&&(n=[]),x(h,o)){var r=h.x1,f=h.y1,a=h.x2,c=h.y2,p=o.x,v=o.y,m=o.radius,y=a-r,P=c-f,E=r-p,S=f-v,w=y*y+P*P,R=2*(y*E+P*S),A=E*E+S*S-m*m,O=R*R-4*w*A,F,b;if(O===0){var D=-R/(2*w);F=r+D*y,b=f+D*P,D>=0&&D<=1&&n.push(new d(F,b))}else if(O>0){var I=(-R-Math.sqrt(O))/(2*w);F=r+I*y,b=f+I*P,I>=0&&I<=1&&n.push(new d(F,b));var B=(-R+Math.sqrt(O))/(2*w);F=r+B*y,b=f+B*P,B>=0&&B<=1&&n.push(new d(F,b))}}return n};l.exports=u},96537:(l,T,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70015),x=function(u,h,o,n){o===void 0&&(o=!1);var r=u.x1,f=u.y1,a=u.x2,c=u.y2,p=h.x1,v=h.y1,m=h.x2,y=h.y2,P=a-r,E=c-f,S=m-p,w=y-v,R=P*w-E*S;if(R===0)return null;var A,O,F;if(o){if(A=(P*(v-f)+E*(r-p))/(S*E-w*P),O=(p+S*A-r)/P,O<0||A<0||A>1)return null;F=O}else{if(A=((p-r)*w-(v-f)*S)/R,O=((f-v)*P-(r-p)*E)/R,A<0||A>1||O<0||O>1)return null;F=A}return n===void 0&&(n=new d),n.set(r+P*F,f+E*F,F)};l.exports=x},17647:(l,T,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(96537),x=e(88829),u=e(70015),h=new x,o=new u,n=function(r,f,a,c){a===void 0&&(a=!1),c===void 0&&(c=new u);var p=!1;c.set(),o.set();for(var v=f[0],m=1;m<f.length;m++){var y=f[m];h.setTo(v.x,v.y,y.x,y.y),v=y,d(r,h,a,o)&&(!p||o.z<c.z)&&(c.copy(o),p=!0)}return p?c:null};l.exports=n},68439:(l,T,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70015),x=e(51729),u=e(17647),h=new d,o=function(n,r,f,a){a===void 0&&(a=new x),Array.isArray(r)||(r=[r]);var c=!1;a.set(),h.set();for(var p=0;p<r.length;p++)u(n,r[p].points,f,h)&&(!c||h.z<a.z)&&(a.set(h.x,h.y,h.z,p),c=!0);return c?a:null};l.exports=o},9569:(l,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=e(25227),u=e(47910),h=function(o,n,r){if(r===void 0&&(r=[]),u(o,n))for(var f=n.getLineA(),a=n.getLineB(),c=n.getLineC(),p=n.getLineD(),v=[new d,new d,new d,new d],m=[x(f,o,v[0]),x(a,o,v[1]),x(c,o,v[2]),x(p,o,v[3])],y=0;y<4;y++)m[y]&&r.push(v[y]);return r};l.exports=h},7449:(l,T,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(51729),x=e(68439),u=e(88829),h=new u;function o(f,a,c,p,v){var m=Math.cos(f),y=Math.sin(f);h.setTo(a,c,a+m,c+y);var P=x(h,p,!0);P&&v.push(new d(P.x,P.y,f,P.w))}function n(f,a){return f.z-a.z}var r=function(f,a,c){Array.isArray(c)||(c=[c]);for(var p=[],v=[],m=0;m<c.length;m++)for(var y=c[m].points,P=0;P<y.length;P++){var E=Math.atan2(y[P].y-a,y[P].x-f);v.indexOf(E)===-1&&(o(E,f,a,c,p),o(E-1e-5,f,a,c,p),o(E+1e-5,f,a,c,p),v.push(E))}return p.sort(n)};l.exports=r},82931:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),x=e(90205),u=function(h,o,n){return n===void 0&&(n=new d),x(h,o)&&(n.x=Math.max(h.x,o.x),n.y=Math.max(h.y,o.y),n.width=Math.min(h.right,o.right)-n.x,n.height=Math.min(h.bottom,o.bottom)-n.y),n};l.exports=u},1946:(l,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(9569),x=e(90205),u=function(h,o,n){if(n===void 0&&(n=[]),x(h,o)){var r=h.getLineA(),f=h.getLineB(),a=h.getLineC(),c=h.getLineD();d(r,o,n),d(f,o,n),d(a,o,n),d(c,o,n)}return n};l.exports=u},34211:(l,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(20370),x=e(9569),u=function(h,o,n){if(n===void 0&&(n=[]),d(h,o)){var r=o.getLineA(),f=o.getLineB(),a=o.getLineC();x(r,h,n),x(f,h,n),x(a,h,n)}return n};l.exports=u},80511:(l,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(26111),x=e(48411),u=function(h,o,n){if(n===void 0&&(n=[]),x(h,o)){var r=h.getLineA(),f=h.getLineB(),a=h.getLineC();d(r,o,n),d(f,o,n),d(a,o,n)}return n};l.exports=u},31343:(l,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=e(86117),u=e(25227),h=function(o,n,r){if(r===void 0&&(r=[]),x(o,n))for(var f=o.getLineA(),a=o.getLineB(),c=o.getLineC(),p=[new d,new d,new d],v=[u(f,n,p[0]),u(a,n,p[1]),u(c,n,p[2])],m=0;m<3;m++)v[m]&&r.push(p[m]);return r};l.exports=h},70534:(l,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23589),x=e(31343),u=function(h,o,n){if(n===void 0&&(n=[]),d(h,o)){var r=o.getLineA(),f=o.getLineB(),a=o.getLineC();x(h,r,n),x(h,f,n),x(h,a,n)}return n};l.exports=u},61472:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(65650),x=e(79967),u=new x,h=function(o,n,r){if(r===void 0&&(r=u),d(n,o.x1,o.y1))return r.x=o.x1,r.y=o.y1,!0;if(d(n,o.x2,o.y2))return r.x=o.x2,r.y=o.y2,!0;var f=o.x2-o.x1,a=o.y2-o.y1,c=n.x-o.x1,p=n.y-o.y1,v=f*f+a*a,m=f,y=a;if(v>0){var P=(c*f+p*a)/v;m*=P,y*=P}r.x=o.x1+m,r.y=o.y1+y;var E=m*m+y*y;return E<=v&&m*f+y*a>=0&&d(n,r.x,r.y)};l.exports=h},25227:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=e.x1,h=e.y1,o=e.x2,n=e.y2,r=d.x1,f=d.y1,a=d.x2,c=d.y2;if(u===o&&h===n||r===a&&f===c)return!1;var p=(c-f)*(o-u)-(a-r)*(n-h);if(p===0)return!1;var v=((a-r)*(h-f)-(c-f)*(u-r))/p,m=((o-u)*(h-f)-(n-h)*(u-r))/p;return v<0||v>1||m<0||m>1?!1:(x&&(x.x=u+v*(o-u),x.y=h+v*(n-h)),!0)};l.exports=T},47910:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=e.x1,u=e.y1,h=e.x2,o=e.y2,n=d.x,r=d.y,f=d.right,a=d.bottom,c=0;if(x>=n&&x<=f&&u>=r&&u<=a||h>=n&&h<=f&&o>=r&&o<=a)return!0;if(x<n&&h>=n){if(c=u+(o-u)*(n-x)/(h-x),c>r&&c<=a)return!0}else if(x>f&&h<=f&&(c=u+(o-u)*(f-x)/(h-x),c>=r&&c<=a))return!0;if(u<r&&o>=r){if(c=x+(h-x)*(r-u)/(o-u),c>=n&&c<=f)return!0}else if(u>a&&o<=a&&(c=x+(h-x)*(a-u)/(o-u),c>=n&&c<=f))return!0;return!1};l.exports=T},34426:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){x===void 0&&(x=1);var u=d.x1,h=d.y1,o=d.x2,n=d.y2,r=e.x,f=e.y,a=(o-u)*(o-u)+(n-h)*(n-h);if(a===0)return!1;var c=((r-u)*(o-u)+(f-h)*(n-h))/a;if(c<0)return Math.sqrt((u-r)*(u-r)+(h-f)*(h-f))<=x;if(c>=0&&c<=1){var p=((h-f)*(o-u)-(u-r)*(n-h))/a;return Math.abs(p)*Math.sqrt(a)<=x}else return Math.sqrt((o-r)*(o-r)+(n-f)*(n-f))<=x};l.exports=T},81414:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(34426),x=function(u,h){if(!d(u,h))return!1;var o=Math.min(h.x1,h.x2),n=Math.max(h.x1,h.x2),r=Math.min(h.y1,h.y2),f=Math.max(h.y1,h.y2);return u.x>=o&&u.x<=n&&u.y>=r&&u.y<=f};l.exports=x},90205:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.width<=0||e.height<=0||d.width<=0||d.height<=0?!1:!(e.right<d.x||e.bottom<d.y||e.x>d.right||e.y>d.bottom)};l.exports=T},20370:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(25227),x=e(94287),u=e(86875),h=e(87279),o=function(n,r){if(r.left>n.right||r.right<n.left||r.top>n.bottom||r.bottom<n.top)return!1;var f=r.getLineA(),a=r.getLineB(),c=r.getLineC();if(x(n,f.x1,f.y1)||x(n,f.x2,f.y2)||x(n,a.x1,a.y1)||x(n,a.x2,a.y2)||x(n,c.x1,c.y1)||x(n,c.x2,c.y2))return!0;var p=n.getLineA(),v=n.getLineB(),m=n.getLineC(),y=n.getLineD();if(d(f,p)||d(f,v)||d(f,m)||d(f,y)||d(a,p)||d(a,v)||d(a,m)||d(a,y)||d(c,p)||d(c,v)||d(c,m)||d(c,y))return!0;var P=h(n),E=u(r,P,!0);return E.length>0};l.exports=o},8786:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,h,o){return o===void 0&&(o=0),!(d>e.right+o||x<e.left-o||u>e.bottom+o||h<e.top-o)};l.exports=T},48411:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61472),x=e(60689),u=function(h,o){return h.left>o.right||h.right<o.left||h.top>o.bottom||h.bottom<o.top?!1:!!(x(h,o.x,o.y)||d(h.getLineA(),o)||d(h.getLineB(),o)||d(h.getLineC(),o))};l.exports=u},86117:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(25227),x=function(u,h){return!!(u.contains(h.x1,h.y1)||u.contains(h.x2,h.y2)||d(u.getLineA(),h)||d(u.getLineB(),h)||d(u.getLineC(),h))};l.exports=x},23589:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(86875),x=e(18680),u=e(25227),h=function(o,n){if(o.left>n.right||o.right<n.left||o.top>n.bottom||o.bottom<n.top)return!1;var r=o.getLineA(),f=o.getLineB(),a=o.getLineC(),c=n.getLineA(),p=n.getLineB(),v=n.getLineC();if(u(r,c)||u(r,p)||u(r,v)||u(f,c)||u(f,p)||u(f,v)||u(a,c)||u(a,p)||u(a,v))return!0;var m=x(o),y=d(n,m,!0);return y.length>0||(m=x(n),y=d(o,m,!0),y.length>0)};l.exports=h},7563:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={CircleToCircle:e(22184),CircleToRectangle:e(26535),GetCircleToCircle:e(71145),GetCircleToRectangle:e(62508),GetLineToCircle:e(26111),GetLineToLine:e(96537),GetLineToPoints:e(17647),GetLineToPolygon:e(68439),GetLineToRectangle:e(9569),GetRaysFromPointToPolygon:e(7449),GetRectangleIntersection:e(82931),GetRectangleToRectangle:e(1946),GetRectangleToTriangle:e(34211),GetTriangleToCircle:e(80511),GetTriangleToLine:e(31343),GetTriangleToTriangle:e(70534),LineToCircle:e(61472),LineToLine:e(25227),LineToRectangle:e(47910),PointToLine:e(34426),PointToLineSegment:e(81414),RectangleToRectangle:e(90205),RectangleToTriangle:e(20370),RectangleToValues:e(8786),TriangleToCircle:e(48411),TriangleToLine:e(86117),TriangleToTriangle:e(23589)}},50599:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.atan2(e.y2-e.y1,e.x2-e.x1)};l.exports=T},58813:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){d===void 0&&(d=1),x===void 0&&(x=[]);var u=Math.round(e.x1),h=Math.round(e.y1),o=Math.round(e.x2),n=Math.round(e.y2),r=Math.abs(o-u),f=Math.abs(n-h),a=u<o?1:-1,c=h<n?1:-1,p=r-f;x.push({x:u,y:h});for(var v=1;!(u===o&&h===n);){var m=p<<1;m>-f&&(p-=f,u+=a),m<r&&(p+=r,h+=c),v%d===0&&x.push({x:u,y:h}),v++}return x};l.exports=T},88513:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=d-(e.x1+e.x2)/2,h=x-(e.y1+e.y2)/2;return e.x1+=u,e.y1+=h,e.x2+=u,e.y2+=h,e};l.exports=T},26718:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88829),x=function(u){return new d(u.x1,u.y1,u.x2,u.y2)};l.exports=x},88930:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d.setTo(e.x1,e.y1,e.x2,e.y2)};l.exports=T},90656:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.x1===d.x1&&e.y1===d.y1&&e.x2===d.x2&&e.y2===d.y2};l.exports=T},30897:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16028),x=function(u,h,o){o===void 0&&(o=h);var n=d(u),r=u.x2-u.x1,f=u.y2-u.y1;return h&&(u.x1=u.x1-r/n*h,u.y1=u.y1-f/n*h),o&&(u.x2=u.x2+r/n*o,u.y2=u.y2+f/n*o),u};l.exports=x},30684:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(92951),x=e(21902),u=e(79967),h=function(o,n,r,f,a){f===void 0&&(f=0),a===void 0&&(a=[]);var c=[],p=o.x1,v=o.y1,m=o.x2-p,y=o.y2-v,P=x(n,a),E,S,w=r-1;for(E=0;E<w;E++)S=P(E/w),c.push(new u(p+m*S,v+y*S));if(S=P(1),c.push(new u(p+m*S,v+y*S)),f>0){var R=c[0],A=[R];for(E=1;E<c.length-1;E++){var O=c[E];d(R,O)>=f&&(A.push(O),R=O)}var F=c[c.length-1];return d(R,F)<f&&A.pop(),A.push(F),A}else return c};l.exports=h},20487:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,h){return h===void 0&&(h=new d),h.x=(u.x1+u.x2)/2,h.y=(u.y1+u.y2)/2,h};l.exports=x},11222:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,h,o){o===void 0&&(o=new d);var n=u.x1,r=u.y1,f=u.x2,a=u.y2,c=(f-n)*(f-n)+(a-r)*(a-r);if(c===0)return o;var p=((h.x-n)*(f-n)+(h.y-r)*(a-r))/c;return o.x=n+p*(f-n),o.y=r+p*(a-r),o};l.exports=x},7377:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),x=e(50599),u=e(79967),h=function(o,n){n===void 0&&(n=new u);var r=x(o)-d.TAU;return n.x=Math.cos(r),n.y=Math.sin(r),n};l.exports=h},66464:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,h,o){return o===void 0&&(o=new d),o.x=u.x1+(u.x2-u.x1)*h,o.y=u.y1+(u.y2-u.y1)*h,o};l.exports=x},8570:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16028),x=e(79967),u=function(h,o,n,r){r===void 0&&(r=[]),!o&&n>0&&(o=d(h)/n);for(var f=h.x1,a=h.y1,c=h.x2,p=h.y2,v=0;v<o;v++){var m=v/o,y=f+(c-f)*m,P=a+(p-a)*m;r.push(new x(y,P))}return r};l.exports=u},65269:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=e.x1,u=e.y1,h=e.x2,o=e.y2,n=(h-x)*(h-x)+(o-u)*(o-u);if(n===0)return!1;var r=((u-d.y)*(h-x)-(x-d.x)*(o-u))/n;return Math.abs(r)*Math.sqrt(n)};l.exports=T},82996:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.abs(e.y1-e.y2)};l.exports=T},16028:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.sqrt((e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1))};l.exports=T},88829:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(66464),u=e(8570),h=e(52394),o=e(74077),n=e(93736),r=new d({initialize:function(a,c,p,v){a===void 0&&(a=0),c===void 0&&(c=0),p===void 0&&(p=0),v===void 0&&(v=0),this.type=h.LINE,this.x1=a,this.y1=c,this.x2=p,this.y2=v},getPoint:function(f,a){return x(this,f,a)},getPoints:function(f,a,c){return u(this,f,a,c)},getRandomPoint:function(f){return o(this,f)},setTo:function(f,a,c,p){return f===void 0&&(f=0),a===void 0&&(a=0),c===void 0&&(c=0),p===void 0&&(p=0),this.x1=f,this.y1=a,this.x2=c,this.y2=p,this},getPointA:function(f){return f===void 0&&(f=new n),f.set(this.x1,this.y1),f},getPointB:function(f){return f===void 0&&(f=new n),f.set(this.x2,this.y2),f},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(f){this.x1<=this.x2?this.x1=f:this.x2=f}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(f){this.x1>this.x2?this.x1=f:this.x2=f}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(f){this.y1<=this.y2?this.y1=f:this.y2=f}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(f){this.y1>this.y2?this.y1=f:this.y2=f}}});l.exports=r},73273:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),x=e(1071),u=e(50599),h=function(o){var n=u(o)-d.TAU;return x(n,-Math.PI,Math.PI)};l.exports=h},96936:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),x=e(50599),u=function(h){return Math.cos(x(h)-d.TAU)};l.exports=u},43581:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),x=e(50599),u=function(h){return Math.sin(x(h)-d.TAU)};l.exports=u},13990:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return e.x1+=d,e.y1+=x,e.x2+=d,e.y2+=x,e};l.exports=T},1298:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return-((e.x2-e.x1)/(e.y2-e.y1))};l.exports=T},74077:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,h){h===void 0&&(h=new d);var o=Math.random();return h.x=u.x1+o*(u.x2-u.x1),h.y=u.y1+o*(u.y2-u.y1),h};l.exports=x},30473:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50599),x=e(73273),u=function(h,o){return 2*x(o)-Math.PI-d(h)};l.exports=u},25968:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(1809),x=function(u,h){var o=(u.x1+u.x2)/2,n=(u.y1+u.y2)/2;return d(u,o,n,h)};l.exports=x},24296:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(1809),x=function(u,h,o){return d(u,h.x,h.y,o)};l.exports=x},1809:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){var h=Math.cos(u),o=Math.sin(u),n=e.x1-d,r=e.y1-x;return e.x1=n*h-r*o+d,e.y1=n*o+r*h+x,n=e.x2-d,r=e.y2-x,e.x2=n*h-r*o+d,e.y2=n*o+r*h+x,e};l.exports=T},88171:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,h){return e.x1=d,e.y1=x,e.x2=d+Math.cos(u)*h,e.y2=x+Math.sin(u)*h,e};l.exports=T},82797:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e.y2-e.y1)/(e.x2-e.x1)};l.exports=T},41067:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.abs(e.x1-e.x2)};l.exports=T},28482:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88829);d.Angle=e(50599),d.BresenhamPoints=e(58813),d.CenterOn=e(88513),d.Clone=e(26718),d.CopyFrom=e(88930),d.Equals=e(90656),d.Extend=e(30897),d.GetEasedPoints=e(30684),d.GetMidPoint=e(20487),d.GetNearestPoint=e(11222),d.GetNormal=e(7377),d.GetPoint=e(66464),d.GetPoints=e(8570),d.GetShortestDistance=e(65269),d.Height=e(82996),d.Length=e(16028),d.NormalAngle=e(73273),d.NormalX=e(96936),d.NormalY=e(43581),d.Offset=e(13990),d.PerpSlope=e(1298),d.Random=e(74077),d.ReflectAngle=e(30473),d.Rotate=e(25968),d.RotateAroundPoint=e(24296),d.RotateAroundXY=e(1809),d.SetToAngle=e(88171),d.Slope=e(82797),d.Width=e(41067),l.exports=d},18693:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(74118),u=e(93736);function h(n,r,f,a){var c=n-f,p=r-a,v=c*c+p*p;return Math.sqrt(v)}var o=new d({initialize:function(r,f,a){this.vertex1=r,this.vertex2=f,this.vertex3=a,this.bounds=new x,this._inCenter=new u},getInCenter:function(n){n===void 0&&(n=!0);var r=this.vertex1,f=this.vertex2,a=this.vertex3,c,p,v,m,y,P;n?(c=r.x,p=r.y,v=f.x,m=f.y,y=a.x,P=a.y):(c=r.vx,p=r.vy,v=f.vx,m=f.vy,y=a.vx,P=a.vy);var E=h(y,P,v,m),S=h(c,p,y,P),w=h(v,m,c,p),R=E+S+w;return this._inCenter.set((c*E+v*S+y*w)/R,(p*E+m*S+P*w)/R)},contains:function(n,r,f){var a=this.vertex1,c=this.vertex2,p=this.vertex3,v=a.vx,m=a.vy,y=c.vx,P=c.vy,E=p.vx,S=p.vy;if(f){var w=f.a,R=f.b,A=f.c,O=f.d,F=f.e,b=f.f;v=a.vx*w+a.vy*A+F,m=a.vx*R+a.vy*O+b,y=c.vx*w+c.vy*A+F,P=c.vx*R+c.vy*O+b,E=p.vx*w+p.vy*A+F,S=p.vx*R+p.vy*O+b}var D=E-v,I=S-m,B=y-v,k=P-m,U=n-v,X=r-m,H=D*D+I*I,N=D*B+I*k,z=D*U+I*X,L=B*B+k*k,G=B*U+k*X,V=H*L-N*N,Y=V===0?0:1/V,W=(L*z-N*G)*Y,$=(H*G-N*z)*Y;return W>=0&&$>=0&&W+$<1},isCounterClockwise:function(n){var r=this.vertex1,f=this.vertex2,a=this.vertex3,c=(f.vx-r.vx)*(a.vy-r.vy)-(f.vy-r.vy)*(a.vx-r.vx);return n<=0?c>=0:c<0},load:function(n,r,f,a,c){return f=this.vertex1.load(n,r,f,a,c),f=this.vertex2.load(n,r,f,a,c),f=this.vertex3.load(n,r,f,a,c),f},transformCoordinatesLocal:function(n,r,f,a){return this.vertex1.transformCoordinatesLocal(n,r,f,a),this.vertex2.transformCoordinatesLocal(n,r,f,a),this.vertex3.transformCoordinatesLocal(n,r,f,a),this},updateBounds:function(){var n=this.vertex1,r=this.vertex2,f=this.vertex3,a=this.bounds;return a.x=Math.min(n.vx,r.vx,f.vx),a.y=Math.min(n.vy,r.vy,f.vy),a.width=Math.max(n.vx,r.vx,f.vx)-a.x,a.height=Math.max(n.vy,r.vy,f.vy)-a.y,this},isInView:function(n,r,f,a,c,p,v,m,y,P,E){this.update(a,c,p,v,m,y,P,E);var S=this.vertex1,w=this.vertex2,R=this.vertex3;if(S.ta<=0&&w.ta<=0&&R.ta<=0||r&&!this.isCounterClockwise(f))return!1;var A=this.bounds;A.x=Math.min(S.tx,w.tx,R.tx),A.y=Math.min(S.ty,w.ty,R.ty),A.width=Math.max(S.tx,w.tx,R.tx)-A.x,A.height=Math.max(S.ty,w.ty,R.ty)-A.y;var O=n.x+n.width,F=n.y+n.height;return A.width<=0||A.height<=0||n.width<=0||n.height<=0?!1:!(A.right<n.x||A.bottom<n.y||A.x>O||A.y>F)},scrollUV:function(n,r){return this.vertex1.scrollUV(n,r),this.vertex2.scrollUV(n,r),this.vertex3.scrollUV(n,r),this},scaleUV:function(n,r){return this.vertex1.scaleUV(n,r),this.vertex2.scaleUV(n,r),this.vertex3.scaleUV(n,r),this},setColor:function(n){return this.vertex1.color=n,this.vertex2.color=n,this.vertex3.color=n,this},update:function(n,r,f,a,c,p,v,m){return this.vertex1.update(r,f,a,c,p,v,m,n),this.vertex2.update(r,f,a,c,p,v,m,n),this.vertex3.update(r,f,a,c,p,v,m,n),this},translate:function(n,r){r===void 0&&(r=0);var f=this.vertex1,a=this.vertex2,c=this.vertex3;return f.x+=n,f.y+=r,a.x+=n,a.y+=r,c.x+=n,c.y+=r,this},x:{get:function(){return this.getInCenter().x},set:function(n){var r=this.getInCenter();this.translate(n-r.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(n){var r=this.getInCenter();this.translate(0,n-r.y)}},alpha:{get:function(){var n=this.vertex1,r=this.vertex2,f=this.vertex3;return(n.alpha+r.alpha+f.alpha)/3},set:function(n){this.vertex1.alpha=n,this.vertex2.alpha=n,this.vertex3.alpha=n}},depth:{get:function(){var n=this.vertex1,r=this.vertex2,f=this.vertex3;return(n.vz+r.vz+f.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});l.exports=o},99425:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(18693),x=e(72632),u=e(16650),h=e(70015),o=e(85769),n=new h,r=new h,f=new u,a=function(c){var p=x(c,"mesh"),v=x(c,"texture",null),m=x(c,"frame"),y=x(c,"width",1),P=x(c,"height",y),E=x(c,"widthSegments",1),S=x(c,"heightSegments",E),w=x(c,"x",0),R=x(c,"y",0),A=x(c,"z",0),O=x(c,"rotateX",0),F=x(c,"rotateY",0),b=x(c,"rotateZ",0),D=x(c,"zIsUp",!0),I=x(c,"isOrtho",p?p.dirtyCache[11]:!1),B=x(c,"colors",[16777215]),k=x(c,"alphas",[1]),U=x(c,"tile",!1),X=x(c,"flipY",!1),H=x(c,"width",null),N={faces:[],verts:[]};n.set(w,R,A),r.set(O,F,b),f.fromRotationXYTranslation(r,n,D);var z;if(!v&&p)v=p.texture,m||(z=p.frame);else if(p&&typeof v=="string")v=p.scene.sys.textures.get(v);else if(!v)return N;z||(z=v.get(m)),!H&&I&&v&&p&&(y=z.width/p.height,P=z.height/p.height);var L=y/2,G=P/2,V=Math.floor(E),Y=Math.floor(S),W=V+1,$=Y+1,K=y/V,j=P/Y,J=[],q=[],_,et,tt=0,rt=1,ft=0,vt=1;z&&(tt=z.u0,rt=z.u1,X?(ft=z.v1,vt=z.v0):(ft=z.v0,vt=z.v1));var ct=rt-tt,st=vt-ft;for(et=0;et<$;et++){var dt=et*j-G;for(_=0;_<W;_++){var ut=_*K-L;q.push(ut,-dt);var Ct=tt+ct*(_/V),Tt=ft+st*(et/Y);J.push(Ct,Tt)}}Array.isArray(B)||(B=[B]),Array.isArray(k)||(k=[k]);var Xt=0,Bt=0;for(et=0;et<Y;et++)for(_=0;_<V;_++){var Ot=(_+W*et)*2,yt=(_+W*(et+1))*2,Gt=(_+1+W*(et+1))*2,Z=(_+1+W*et)*2,Q=B[Bt],nt=k[Xt],it=new o(q[Ot],q[Ot+1],0,J[Ot],J[Ot+1],Q,nt).transformMat4(f),lt=new o(q[yt],q[yt+1],0,J[yt],J[yt+1],Q,nt).transformMat4(f),pt=new o(q[Z],q[Z+1],0,J[Z],J[Z+1],Q,nt).transformMat4(f),mt=new o(q[yt],q[yt+1],0,J[yt],J[yt+1],Q,nt).transformMat4(f),Et=new o(q[Gt],q[Gt+1],0,J[Gt],J[Gt+1],Q,nt).transformMat4(f),wt=new o(q[Z],q[Z+1],0,J[Z],J[Z+1],Q,nt).transformMat4(f);U&&(it.setUVs(tt,vt),lt.setUVs(tt,ft),pt.setUVs(rt,vt),mt.setUVs(tt,ft),Et.setUVs(rt,ft),wt.setUVs(rt,vt)),Bt++,Bt===B.length&&(Bt=0),Xt++,Xt===k.length&&(Xt=0),N.verts.push(it,lt,pt,mt,Et,wt),N.faces.push(new d(it,lt,pt),new d(mt,Et,wt))}return p&&(p.faces=p.faces.concat(N.faces),p.vertices=p.vertices.concat(N.verts)),N};l.exports=a},53267:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(18693),x=e(16650),u=e(70015),h=e(85769),o=new u,n=new u,r=new x,f=function(a,c,p,v,m,y,P,E,S,w){p===void 0&&(p=1),v===void 0&&(v=0),m===void 0&&(m=0),y===void 0&&(y=0),P===void 0&&(P=0),E===void 0&&(E=0),S===void 0&&(S=0),w===void 0&&(w=!0);var R={faces:[],verts:[]},A=a.materials;o.set(v,m,y),n.set(P,E,S),r.fromRotationXYTranslation(n,o,w);for(var O=0;O<a.models.length;O++)for(var F=a.models[O],b=F.vertices,D=F.textureCoords,I=F.faces,B=0;B<I.length;B++){var k=I[B],U=k.vertices[0],X=k.vertices[1],H=k.vertices[2],N=b[U.vertexIndex],z=b[X.vertexIndex],L=b[H.vertexIndex],G=U.textureCoordsIndex,V=X.textureCoordsIndex,Y=H.textureCoordsIndex,W=G===-1?{u:0,v:1}:D[G],$=V===-1?{u:0,v:0}:D[V],K=Y===-1?{u:1,v:1}:D[Y],j=16777215;k.material!==""&&A[k.material]&&(j=A[k.material]);var J=new h(N.x*p,N.y*p,N.z*p,W.u,W.v,j).transformMat4(r),q=new h(z.x*p,z.y*p,z.z*p,$.u,$.v,j).transformMat4(r),_=new h(L.x*p,L.y*p,L.z*p,K.u,K.v,j).transformMat4(r);R.verts.push(J,q,_),R.faces.push(new d(J,q,_))}return c&&(c.faces=c.faces.concat(R.faces),c.vertices=c.vertices.concat(R.verts)),R};l.exports=f},67623:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(18693),x=e(85769),u=function(h,o,n,r,f,a,c,p){if(r===void 0&&(r=!1),a===void 0&&(a=16777215),c===void 0&&(c=1),p===void 0&&(p=!1),h.length!==o.length&&!r){console.warn("GenerateVerts: vertices and uvs count not equal");return}var v={faces:[],vertices:[]},m,y,P,E,S,w,R,A,O,F,b,D=r?3:2,I=Array.isArray(a),B=Array.isArray(c);if(Array.isArray(n)&&n.length>0)for(m=0;m<n.length;m++){var k=n[m],U=n[m]*2,X=n[m]*D;y=h[X],P=h[X+1],E=r?h[X+2]:0,S=o[U],w=o[U+1],p&&(w=1-w),R=I?a[k]:a,A=B?c[k]:c,O=0,F=0,b=0,f&&(O=f[X],F=f[X+1],b=r?f[X+2]:0),v.vertices.push(new x(y,P,E,S,w,R,A,O,F,b))}else{var H=0,N=0;for(m=0;m<h.length;m+=D)y=h[m],P=h[m+1],E=r?h[m+2]:0,S=o[H],w=o[H+1],R=I?a[N]:a,A=B?c[N]:c,O=0,F=0,b=0,f&&(O=f[m],F=f[m+1],b=r?f[m+2]:0),v.vertices.push(new x(y,P,E,S,w,R,A,O,F,b)),H+=2,N++}for(m=0;m<v.vertices.length;m+=3){var z=v.vertices[m],L=v.vertices[m+1],G=v.vertices[m+2];v.faces.push(new d(z,L,G))}return v};l.exports=u},27291:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=!0,e="untitled",d="",x="";function u(y){var P=y.indexOf("#");return P>-1?y.substring(0,P):y}function h(y){return y.models.length===0&&y.models.push({faces:[],name:e,textureCoords:[],vertexNormals:[],vertices:[]}),d="",y.models[y.models.length-1]}function o(y,P){var E=y.length>=2?y[1]:e;P.models.push({faces:[],name:E,textureCoords:[],vertexNormals:[],vertices:[]}),d=""}function n(y){y.length===2&&(d=y[1])}function r(y,P){var E=y.length,S=E>=2?parseFloat(y[1]):0,w=E>=3?parseFloat(y[2]):0,R=E>=4?parseFloat(y[3]):0;h(P).vertices.push({x:S,y:w,z:R})}function f(y,P){var E=y.length,S=E>=2?parseFloat(y[1]):0,w=E>=3?parseFloat(y[2]):0,R=E>=4?parseFloat(y[3]):0;isNaN(S)&&(S=0),isNaN(w)&&(w=0),isNaN(R)&&(R=0),T&&(w=1-w),h(P).textureCoords.push({u:S,v:w,w:R})}function a(y,P){var E=y.length,S=E>=2?parseFloat(y[1]):0,w=E>=3?parseFloat(y[2]):0,R=E>=4?parseFloat(y[3]):0;h(P).vertexNormals.push({x:S,y:w,z:R})}function c(y,P){var E=y.length-1;if(!(E<3)){for(var S={group:d,material:x,vertices:[]},w=0;w<E;w++){var R=y[w+1],A=R.split("/"),O=A.length;if(!(O<1||O>3)){var F=0,b=0,D=0;F=parseInt(A[0],10),O>1&&A[1]!==""&&(b=parseInt(A[1],10)),O>2&&(D=parseInt(A[2],10)),F!==0&&(F<0&&(F=h(P).vertices.length+1+F),b-=1,F-=1,D-=1,S.vertices.push({textureCoordsIndex:b,vertexIndex:F,vertexNormalIndex:D}))}}h(P).faces.push(S)}}function p(y,P){y.length>=2&&P.materialLibraries.push(y[1])}function v(y){y.length>=2&&(x=y[1])}var m=function(y,P){P===void 0&&(P=!0),T=P;var E={materials:{},materialLibraries:[],models:[]};d="",x="";for(var S=y.split(`
`),w=0;w<S.length;w++){var R=u(S[w]),A=R.replace(/\s\s+/g," ").trim().split(" ");switch(A[0].toLowerCase()){case"o":o(A,E);break;case"g":n(A);break;case"v":r(A,E);break;case"vt":f(A,E);break;case"vn":a(A,E);break;case"f":c(A,E);break;case"mtllib":p(A,E);break;case"usemtl":v(A);break}}return E};l.exports=m},76799:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(22946),x=function(u){for(var h={},o=u.split(`
`),n="",r=0;r<o.length;r++){var f=o[r].trim();if(!(f.indexOf("#")===0||f==="")){var a=f.replace(/\s\s+/g," ").trim().split(" ");switch(a[0].toLowerCase()){case"newmtl":{n=a[1];break}case"kd":{var c=Math.floor(a[1]*255),p=a.length>=2?Math.floor(a[2]*255):c,v=a.length>=3?Math.floor(a[3]*255):c;h[n]=d(c,p,v);break}}}}return h};l.exports=x},15313:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){var h,o;if(x===void 0&&u===void 0){var n=e.getInCenter();h=n.x,o=n.y}var r=Math.cos(d),f=Math.sin(d),a=e.vertex1,c=e.vertex2,p=e.vertex3,v=a.x-h,m=a.y-o;a.set(v*r-m*f+h,v*f+m*r+o),v=c.x-h,m=c.y-o,c.set(v*r-m*f+h,v*f+m*r+o),v=p.x-h,m=p.y-o,p.set(v*r-m*f+h,v*f+m*r+o)};l.exports=T},85769:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(75512),u=e(70015),h=new d({Extends:u,initialize:function(n,r,f,a,c,p,v,m,y,P){p===void 0&&(p=16777215),v===void 0&&(v=1),m===void 0&&(m=0),y===void 0&&(y=0),P===void 0&&(P=0),u.call(this,n,r,f),this.vx=0,this.vy=0,this.vz=0,this.nx=m,this.ny=y,this.nz=P,this.u=a,this.v=c,this.color=p,this.alpha=v,this.tx=0,this.ty=0,this.ta=0,this.tu=a,this.tv=c},setUVs:function(o,n){return this.u=o,this.v=n,this.tu=o,this.tv=n,this},scrollUV:function(o,n){return this.tu+=o,this.tv+=n,this},scaleUV:function(o,n){return this.tu=this.u*o,this.tv=this.v*n,this},transformCoordinatesLocal:function(o,n,r,f){var a=this.x,c=this.y,p=this.z,v=o.val,m=a*v[0]+c*v[4]+p*v[8]+v[12],y=a*v[1]+c*v[5]+p*v[9]+v[13],P=a*v[2]+c*v[6]+p*v[10]+v[14],E=a*v[3]+c*v[7]+p*v[11]+v[15];this.vx=m/E*n,this.vy=-(y/E)*r,f<=0?this.vz=P/E:this.vz=-(P/E)},resize:function(o,n,r,f,a,c){return this.x=o,this.y=n,this.vx=this.x*r,this.vy=-this.y*f,this.vz=0,a<.5?this.vx+=r*(.5-a):a>.5&&(this.vx-=r*(a-.5)),c<.5?this.vy+=f*(.5-c):c>.5&&(this.vy-=f*(c-.5)),this},update:function(o,n,r,f,a,c,p,v){var m=this.vx*o+this.vy*r+a,y=this.vx*n+this.vy*f+c;return p&&(m=Math.round(m),y=Math.round(y)),this.tx=m,this.ty=y,this.ta=this.alpha*v,this},load:function(o,n,r,f,a){return o[++r]=this.tx,o[++r]=this.ty,o[++r]=this.tu,o[++r]=this.tv,o[++r]=f,o[++r]=a,n[++r]=x.getTintAppendFloatAlpha(this.color,this.ta),r}});l.exports=h},14293:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={Face:e(18693),GenerateGridVerts:e(99425),GenerateObjVerts:e(53267),GenerateVerts:e(67623),ParseObj:e(27291),ParseObjMaterial:e(76799),RotateFace:e(15313),Vertex:e(85769)};l.exports=d},77601:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.setTo(Math.ceil(e.x),Math.ceil(e.y))};l.exports=T},38933:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u){return new d(u.x,u.y)};l.exports=x},47103:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d.setTo(e.x,e.y)};l.exports=T},13625:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.x===d.x&&e.y===d.y};l.exports=T},12536:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.setTo(Math.floor(e.x),Math.floor(e.y))};l.exports=T},54205:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,h){if(h===void 0&&(h=new d),!Array.isArray(u))throw new Error("GetCentroid points argument must be an array");var o=u.length;if(o<1)throw new Error("GetCentroid points array must not be empty");if(o===1)h.x=u[0].x,h.y=u[0].y;else{for(var n=0;n<o;n++)h.x+=u[n].x,h.y+=u[n].y;h.x/=o,h.y/=o}return h};l.exports=x},50083:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};l.exports=T},82712:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x*e.x+e.y*e.y};l.exports=T},20052:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),x=function(u,h){h===void 0&&(h=new d);for(var o=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,f=Number.POSITIVE_INFINITY,a=0;a<u.length;a++){var c=u[a];c.x>o&&(o=c.x),c.x<n&&(n=c.x),c.y>r&&(r=c.y),c.y<f&&(f=c.y)}return h.x=n,h.y=f,h.width=o-n,h.height=r-f,h};l.exports=x},77154:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,h,o,n){return o===void 0&&(o=0),n===void 0&&(n=new d),n.x=u.x+(h.x-u.x)*o,n.y=u.y+(h.y-u.y)*o,n};l.exports=x},42397:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.setTo(e.y,e.x)};l.exports=T},59464:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,h){return h===void 0&&(h=new d),h.setTo(-u.x,-u.y)};l.exports=x},79967:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(52394),u=new d({initialize:function(o,n){o===void 0&&(o=0),n===void 0&&(n=o),this.type=x.POINT,this.x=o,this.y=n},setTo:function(h,o){return h===void 0&&(h=0),o===void 0&&(o=h),this.x=h,this.y=o,this}});l.exports=u},53581:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=e(82712),u=function(h,o,n){n===void 0&&(n=new d);var r=h.x*o.x+h.y*o.y,f=r/x(o);return f!==0&&(n.x=f*o.x,n.y=f*o.y),n};l.exports=u},50817:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,h,o){o===void 0&&(o=new d);var n=u.x*h.x+u.y*h.y;return n!==0&&(o.x=n*h.x,o.y=n*h.y),o};l.exports=x},40525:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50083),x=function(u,h){if(u.x!==0||u.y!==0){var o=d(u);u.x/=o,u.y/=o}return u.x*=h,u.y*=h,u};l.exports=x},63472:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967);d.Ceil=e(77601),d.Clone=e(38933),d.CopyFrom=e(47103),d.Equals=e(13625),d.Floor=e(12536),d.GetCentroid=e(54205),d.GetMagnitude=e(50083),d.GetMagnitudeSq=e(82712),d.GetRectangleFromPoints=e(20052),d.Interpolate=e(77154),d.Invert=e(42397),d.Negative=e(59464),d.Project=e(53581),d.ProjectUnit=e(50817),d.SetMagnitude=e(40525),l.exports=d},19631:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(8580),x=function(u){return new d(u.points)};l.exports=x},45604:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){for(var u=!1,h=-1,o=e.points.length-1;++h<e.points.length;o=h){var n=e.points[h].x,r=e.points[h].y,f=e.points[o].x,a=e.points[o].y;(r<=x&&x<a||a<=x&&x<r)&&d<(f-n)*(x-r)/(a-r)+n&&(u=!u)}return u};l.exports=T},87289:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(45604),x=function(u,h){return d(u,h.x,h.y)};l.exports=x},11117:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(N,z,L){L=L||2;var G=z&&z.length,V=G?z[0]*L:N.length,Y=e(N,0,V,L,!0),W=[];if(!Y||Y.next===Y.prev)return W;var $,K,j,J,q,_,et;if(G&&(Y=r(N,z,Y,L)),N.length>80*L){$=j=N[0],K=J=N[1];for(var tt=L;tt<V;tt+=L)q=N[tt],_=N[tt+1],q<$&&($=q),_<K&&(K=_),q>j&&(j=q),_>J&&(J=_);et=Math.max(j-$,J-K),et=et!==0?32767/et:0}return x(Y,W,L,$,K,et,0),W}function e(N,z,L,G,V){var Y,W;if(V===H(N,z,L,G)>0)for(Y=z;Y<L;Y+=G)W=k(Y,N[Y],N[Y+1],W);else for(Y=L-G;Y>=z;Y-=G)W=k(Y,N[Y],N[Y+1],W);return W&&R(W,W.next)&&(U(W),W=W.next),W}function d(N,z){if(!N)return N;z||(z=N);var L=N,G;do if(G=!1,!L.steiner&&(R(L,L.next)||w(L.prev,L,L.next)===0)){if(U(L),L=z=L.prev,L===L.next)break;G=!0}else L=L.next;while(G||L!==z);return z}function x(N,z,L,G,V,Y,W){if(N){!W&&Y&&v(N,G,V,Y);for(var $=N,K,j;N.prev!==N.next;){if(K=N.prev,j=N.next,Y?h(N,G,V,Y):u(N)){z.push(K.i/L|0),z.push(N.i/L|0),z.push(j.i/L|0),U(N),N=j.next,$=j.next;continue}if(N=j,N===$){W?W===1?(N=o(d(N),z,L),x(N,z,L,G,V,Y,2)):W===2&&n(N,z,L,G,V,Y):x(d(N),z,L,G,V,Y,1);break}}}}function u(N){var z=N.prev,L=N,G=N.next;if(w(z,L,G)>=0)return!1;for(var V=z.x,Y=L.x,W=G.x,$=z.y,K=L.y,j=G.y,J=V<Y?V<W?V:W:Y<W?Y:W,q=$<K?$<j?$:j:K<j?K:j,_=V>Y?V>W?V:W:Y>W?Y:W,et=$>K?$>j?$:j:K>j?K:j,tt=G.next;tt!==z;){if(tt.x>=J&&tt.x<=_&&tt.y>=q&&tt.y<=et&&E(V,$,Y,K,W,j,tt.x,tt.y)&&w(tt.prev,tt,tt.next)>=0)return!1;tt=tt.next}return!0}function h(N,z,L,G){var V=N.prev,Y=N,W=N.next;if(w(V,Y,W)>=0)return!1;for(var $=V.x,K=Y.x,j=W.x,J=V.y,q=Y.y,_=W.y,et=$<K?$<j?$:j:K<j?K:j,tt=J<q?J<_?J:_:q<_?q:_,rt=$>K?$>j?$:j:K>j?K:j,ft=J>q?J>_?J:_:q>_?q:_,vt=y(et,tt,z,L,G),ct=y(rt,ft,z,L,G),st=N.prevZ,dt=N.nextZ;st&&st.z>=vt&&dt&&dt.z<=ct;){if(st.x>=et&&st.x<=rt&&st.y>=tt&&st.y<=ft&&st!==V&&st!==W&&E($,J,K,q,j,_,st.x,st.y)&&w(st.prev,st,st.next)>=0||(st=st.prevZ,dt.x>=et&&dt.x<=rt&&dt.y>=tt&&dt.y<=ft&&dt!==V&&dt!==W&&E($,J,K,q,j,_,dt.x,dt.y)&&w(dt.prev,dt,dt.next)>=0))return!1;dt=dt.nextZ}for(;st&&st.z>=vt;){if(st.x>=et&&st.x<=rt&&st.y>=tt&&st.y<=ft&&st!==V&&st!==W&&E($,J,K,q,j,_,st.x,st.y)&&w(st.prev,st,st.next)>=0)return!1;st=st.prevZ}for(;dt&&dt.z<=ct;){if(dt.x>=et&&dt.x<=rt&&dt.y>=tt&&dt.y<=ft&&dt!==V&&dt!==W&&E($,J,K,q,j,_,dt.x,dt.y)&&w(dt.prev,dt,dt.next)>=0)return!1;dt=dt.nextZ}return!0}function o(N,z,L){var G=N;do{var V=G.prev,Y=G.next.next;!R(V,Y)&&A(V,G,G.next,Y)&&D(V,Y)&&D(Y,V)&&(z.push(V.i/L|0),z.push(G.i/L|0),z.push(Y.i/L|0),U(G),U(G.next),G=N=Y),G=G.next}while(G!==N);return d(G)}function n(N,z,L,G,V,Y){var W=N;do{for(var $=W.next.next;$!==W.prev;){if(W.i!==$.i&&S(W,$)){var K=B(W,$);W=d(W,W.next),K=d(K,K.next),x(W,z,L,G,V,Y,0),x(K,z,L,G,V,Y,0);return}$=$.next}W=W.next}while(W!==N)}function r(N,z,L,G){var V=[],Y,W,$,K,j;for(Y=0,W=z.length;Y<W;Y++)$=z[Y]*G,K=Y<W-1?z[Y+1]*G:N.length,j=e(N,$,K,G,!1),j===j.next&&(j.steiner=!0),V.push(P(j));for(V.sort(f),Y=0;Y<V.length;Y++)L=a(V[Y],L);return L}function f(N,z){return N.x-z.x}function a(N,z){var L=c(N,z);if(!L)return z;var G=B(L,N);return d(G,G.next),d(L,L.next)}function c(N,z){var L=z,G=N.x,V=N.y,Y=-1/0,W;do{if(V<=L.y&&V>=L.next.y&&L.next.y!==L.y){var $=L.x+(V-L.y)*(L.next.x-L.x)/(L.next.y-L.y);if($<=G&&$>Y&&(Y=$,W=L.x<L.next.x?L:L.next,$===G))return W}L=L.next}while(L!==z);if(!W)return null;var K=W,j=W.x,J=W.y,q=1/0,_;L=W;do G>=L.x&&L.x>=j&&G!==L.x&&E(V<J?G:Y,V,j,J,V<J?Y:G,V,L.x,L.y)&&(_=Math.abs(V-L.y)/(G-L.x),D(L,N)&&(_<q||_===q&&(L.x>W.x||L.x===W.x&&p(W,L)))&&(W=L,q=_)),L=L.next;while(L!==K);return W}function p(N,z){return w(N.prev,N,z.prev)<0&&w(z.next,N,N.next)<0}function v(N,z,L,G){var V=N;do V.z===0&&(V.z=y(V.x,V.y,z,L,G)),V.prevZ=V.prev,V.nextZ=V.next,V=V.next;while(V!==N);V.prevZ.nextZ=null,V.prevZ=null,m(V)}function m(N){var z,L,G,V,Y,W,$,K,j=1;do{for(L=N,N=null,Y=null,W=0;L;){for(W++,G=L,$=0,z=0;z<j&&($++,G=G.nextZ,!!G);z++);for(K=j;$>0||K>0&&G;)$!==0&&(K===0||!G||L.z<=G.z)?(V=L,L=L.nextZ,$--):(V=G,G=G.nextZ,K--),Y?Y.nextZ=V:N=V,V.prevZ=Y,Y=V;L=G}Y.nextZ=null,j*=2}while(W>1);return N}function y(N,z,L,G,V){return N=(N-L)*V|0,z=(z-G)*V|0,N=(N|N<<8)&16711935,N=(N|N<<4)&252645135,N=(N|N<<2)&858993459,N=(N|N<<1)&1431655765,z=(z|z<<8)&16711935,z=(z|z<<4)&252645135,z=(z|z<<2)&858993459,z=(z|z<<1)&1431655765,N|z<<1}function P(N){var z=N,L=N;do(z.x<L.x||z.x===L.x&&z.y<L.y)&&(L=z),z=z.next;while(z!==N);return L}function E(N,z,L,G,V,Y,W,$){return(V-W)*(z-$)>=(N-W)*(Y-$)&&(N-W)*(G-$)>=(L-W)*(z-$)&&(L-W)*(Y-$)>=(V-W)*(G-$)}function S(N,z){return N.next.i!==z.i&&N.prev.i!==z.i&&!b(N,z)&&(D(N,z)&&D(z,N)&&I(N,z)&&(w(N.prev,N,z.prev)||w(N,z.prev,z))||R(N,z)&&w(N.prev,N,N.next)>0&&w(z.prev,z,z.next)>0)}function w(N,z,L){return(z.y-N.y)*(L.x-z.x)-(z.x-N.x)*(L.y-z.y)}function R(N,z){return N.x===z.x&&N.y===z.y}function A(N,z,L,G){var V=F(w(N,z,L)),Y=F(w(N,z,G)),W=F(w(L,G,N)),$=F(w(L,G,z));return!!(V!==Y&&W!==$||V===0&&O(N,L,z)||Y===0&&O(N,G,z)||W===0&&O(L,N,G)||$===0&&O(L,z,G))}function O(N,z,L){return z.x<=Math.max(N.x,L.x)&&z.x>=Math.min(N.x,L.x)&&z.y<=Math.max(N.y,L.y)&&z.y>=Math.min(N.y,L.y)}function F(N){return N>0?1:N<0?-1:0}function b(N,z){var L=N;do{if(L.i!==N.i&&L.next.i!==N.i&&L.i!==z.i&&L.next.i!==z.i&&A(L,L.next,N,z))return!0;L=L.next}while(L!==N);return!1}function D(N,z){return w(N.prev,N,N.next)<0?w(N,z,N.next)>=0&&w(N,N.prev,z)>=0:w(N,z,N.prev)<0||w(N,N.next,z)<0}function I(N,z){var L=N,G=!1,V=(N.x+z.x)/2,Y=(N.y+z.y)/2;do L.y>Y!=L.next.y>Y&&L.next.y!==L.y&&V<(L.next.x-L.x)*(Y-L.y)/(L.next.y-L.y)+L.x&&(G=!G),L=L.next;while(L!==N);return G}function B(N,z){var L=new X(N.i,N.x,N.y),G=new X(z.i,z.x,z.y),V=N.next,Y=z.prev;return N.next=z,z.prev=N,L.next=V,V.prev=L,G.next=L,L.prev=G,Y.next=G,G.prev=Y,G}function k(N,z,L,G){var V=new X(N,z,L);return G?(V.next=G.next,V.prev=G,G.next.prev=V,G.next=V):(V.prev=V,V.next=V),V}function U(N){N.next.prev=N.prev,N.prev.next=N.next,N.prevZ&&(N.prevZ.nextZ=N.nextZ),N.nextZ&&(N.nextZ.prevZ=N.prevZ)}function X(N,z,L){this.i=N,this.x=z,this.y=L,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}T.deviation=function(N,z,L,G){var V=z&&z.length,Y=V?z[0]*L:N.length,W=Math.abs(H(N,0,Y,L));if(V)for(var $=0,K=z.length;$<K;$++){var j=z[$]*L,J=$<K-1?z[$+1]*L:N.length;W-=Math.abs(H(N,j,J,L))}var q=0;for($=0;$<G.length;$+=3){var _=G[$]*L,et=G[$+1]*L,tt=G[$+2]*L;q+=Math.abs((N[_]-N[tt])*(N[et+1]-N[_+1])-(N[_]-N[et])*(N[tt+1]-N[_+1]))}return W===0&&q===0?0:Math.abs((q-W)/W)};function H(N,z,L,G){for(var V=0,Y=z,W=L-G;Y<L;Y+=G)V+=(N[W]-N[Y])*(N[Y+1]+N[W+1]),W=Y;return V}T.flatten=function(N){for(var z=N[0][0].length,L={vertices:[],holes:[],dimensions:z},G=0,V=0;V<N.length;V++){for(var Y=0;Y<N[V].length;Y++)for(var W=0;W<z;W++)L.vertices.push(N[V][Y][W]);V>0&&(G+=N[V-1].length,L.holes.push(G))}return L},l.exports=T},14045:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),x=function(u,h){h===void 0&&(h=new d);for(var o=1/0,n=1/0,r=-o,f=-n,a,c=0;c<u.points.length;c++)a=u.points[c],o=Math.min(o,a.x),n=Math.min(n,a.y),r=Math.max(r,a.x),f=Math.max(f,a.y);return h.x=o,h.y=n,h.width=r-o,h.height=f-n,h};l.exports=x},98286:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){d===void 0&&(d=[]);for(var x=0;x<e.points.length;x++)d.push(e.points[x].x),d.push(e.points[x].y);return d};l.exports=T},89294:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16028),x=e(88829),u=e(5159),h=function(o,n,r,f){f===void 0&&(f=[]);var a=o.points,c=u(o);!n&&r>0&&(n=c/r);for(var p=0;p<n;p++)for(var v=c*(p/n),m=0,y=0;y<a.length;y++){var P=a[y],E=a[(y+1)%a.length],S=new x(P.x,P.y,E.x,E.y),w=d(S);if(v<m||v>m+w){m+=w;continue}var R=S.getPoint((v-m)/w);f.push(R);break}return f};l.exports=h},5159:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16028),x=e(88829),u=function(h){for(var o=h.points,n=0,r=0;r<o.length;r++){var f=o[r],a=o[(r+1)%o.length],c=new x(f.x,f.y,a.x,a.y);n+=d(c)}return n};l.exports=u},8580:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(45604),u=e(89294),h=e(52394),o=new d({initialize:function(r){this.type=h.POLYGON,this.area=0,this.points=[],r&&this.setTo(r)},contains:function(n,r){return x(this,n,r)},setTo:function(n){if(this.area=0,this.points=[],typeof n=="string"&&(n=n.split(" ")),!Array.isArray(n))return this;for(var r,f=Number.MAX_VALUE,a=0;a<n.length;a++)r={x:0,y:0},typeof n[a]=="number"||typeof n[a]=="string"?(r.x=parseFloat(n[a]),r.y=parseFloat(n[a+1]),a++):Array.isArray(n[a])?(r.x=n[a][0],r.y=n[a][1]):(r.x=n[a].x,r.y=n[a].y),this.points.push(r),r.y<f&&(f=r.y);return this.calculateArea(f),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var n=0,r,f,a=0;a<this.points.length-1;a++)r=this.points[a],f=this.points[a+1],n+=(f.x-r.x)*(r.y+f.y);return r=this.points[0],f=this.points[this.points.length-1],n+=(r.x-f.x)*(f.y+r.y),this.area=-n*.5,this.area},getPoints:function(n,r,f){return u(this,n,r,f)}});l.exports=o},32244:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.points.reverse(),e};l.exports=T},95874:l=>{function T(o,n){var r=o.x-n.x,f=o.y-n.y;return r*r+f*f}function e(o,n,r){var f=n.x,a=n.y,c=r.x-f,p=r.y-a;if(c!==0||p!==0){var v=((o.x-f)*c+(o.y-a)*p)/(c*c+p*p);v>1?(f=r.x,a=r.y):v>0&&(f+=c*v,a+=p*v)}return c=o.x-f,p=o.y-a,c*c+p*p}function d(o,n){for(var r=o[0],f=[r],a,c=1,p=o.length;c<p;c++)a=o[c],T(a,r)>n&&(f.push(a),r=a);return r!==a&&f.push(a),f}function x(o,n,r,f,a){for(var c=f,p,v=n+1;v<r;v++){var m=e(o[v],o[n],o[r]);m>c&&(p=v,c=m)}c>f&&(p-n>1&&x(o,n,p,f,a),a.push(o[p]),r-p>1&&x(o,p,r,f,a))}function u(o,n){var r=o.length-1,f=[o[0]];return x(o,0,r,n,f),f.push(o[r]),f}var h=function(o,n,r){n===void 0&&(n=1),r===void 0&&(r=!1);var f=o.points;if(f.length>2){var a=n*n;r||(f=d(f,a)),o.setTo(u(f,a))}return o};l.exports=h},18974:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(d,x){return d[0]=x[0],d[1]=x[1],d},e=function(d){var x,u=[],h=d.points;for(x=0;x<h.length;x++)u.push([h[x].x,h[x].y]);var o=[];for(u.length>0&&o.push(T([0,0],u[0])),x=0;x<u.length-1;x++){var n=u[x],r=u[x+1],f=n[0],a=n[1],c=r[0],p=r[1];o.push([.85*f+.15*c,.85*a+.15*p]),o.push([.15*f+.85*c,.15*a+.85*p])}return u.length>1&&o.push(T([0,0],u[u.length-1])),d.setTo(o)};l.exports=e},23490:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){for(var u=e.points,h=0;h<u.length;h++)u[h].x+=d,u[h].y+=x;return e};l.exports=T},44359:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(8580);d.Clone=e(19631),d.Contains=e(45604),d.ContainsPoint=e(87289),d.Earcut=e(11117),d.GetAABB=e(14045),d.GetNumberArray=e(98286),d.GetPoints=e(89294),d.Perimeter=e(5159),d.Reverse=e(32244),d.Simplify=e(95874),d.Smooth=e(18974),d.Translate=e(23490),l.exports=d},1653:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.width*e.height};l.exports=T},33943:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e};l.exports=T},58662:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),e};l.exports=T},79993:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return e.x=d-e.width/2,e.y=x-e.height/2,e};l.exports=T},81572:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),x=function(u){return new d(u.x,u.y,u.width,u.height)};l.exports=x},94287:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return e.width<=0||e.height<=0?!1:e.x<=d&&e.x+e.width>=d&&e.y<=x&&e.y+e.height>=x};l.exports=T},28687:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(94287),x=function(u,h){return d(u,h.x,h.y)};l.exports=x},73222:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d.width*d.height>e.width*e.height?!1:d.x>e.x&&d.x<e.right&&d.right>e.x&&d.right<e.right&&d.y>e.y&&d.y<e.bottom&&d.bottom>e.y&&d.bottom<e.bottom};l.exports=T},29538:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d.setTo(e.x,e.y,e.width,e.height)};l.exports=T},87279:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d===void 0&&(d=[]),d.push({x:e.x,y:e.y}),d.push({x:e.right,y:e.y}),d.push({x:e.right,y:e.bottom}),d.push({x:e.x,y:e.bottom}),d};l.exports=T},19989:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.x===d.x&&e.y===d.y&&e.width===d.width&&e.height===d.height};l.exports=T},92628:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6700),x=function(u,h){var o=d(u);return o<d(h)?u.setSize(h.height*o,h.height):u.setSize(h.width,h.width/o),u.setPosition(h.centerX-u.width/2,h.centerY-u.height/2)};l.exports=x},85028:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6700),x=function(u,h){var o=d(u);return o>d(h)?u.setSize(h.height*o,h.height):u.setSize(h.width,h.width/o),u.setPosition(h.centerX-u.width/2,h.centerY-u.height/2)};l.exports=x},71356:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e};l.exports=T},21687:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e.width=Math.floor(e.width),e.height=Math.floor(e.height),e};l.exports=T},80222:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),x=e(83392),u=function(h,o){if(o===void 0&&(o=new d),h.length===0)return o;for(var n=Number.MAX_VALUE,r=Number.MAX_VALUE,f=x.MIN_SAFE_INTEGER,a=x.MIN_SAFE_INTEGER,c,p,v,m=0;m<h.length;m++)c=h[m],Array.isArray(c)?(p=c[0],v=c[1]):(p=c.x,v=c.y),n=Math.min(n,p),r=Math.min(r,v),f=Math.max(f,p),a=Math.max(a,v);return o.x=n,o.y=r,o.width=f-n,o.height=a-r,o};l.exports=u},75785:(l,T,e)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),x=function(u,h,o,n,r){return r===void 0&&(r=new d),r.setTo(Math.min(u,o),Math.min(h,n),Math.abs(u-o),Math.abs(h-n))};l.exports=x},6700:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.height===0?NaN:e.width/e.height};l.exports=T},35242:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,h){return h===void 0&&(h=new d),h.x=u.centerX,h.y=u.centerY,h};l.exports=x},47698:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(85876),x=e(79967),u=function(h,o,n){if(n===void 0&&(n=new x),o<=0||o>=1)return n.x=h.x,n.y=h.y,n;var r=d(h)*o;return o>.5?(r-=h.width+h.height,r<=h.width?(n.x=h.right-r,n.y=h.bottom):(n.x=h.x,n.y=h.bottom-(r-h.width))):r<=h.width?(n.x=h.x+r,n.y=h.y):(n.x=h.right,n.y=h.y+(r-h.width)),n};l.exports=u},54932:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(47698),x=e(85876),u=function(h,o,n,r){r===void 0&&(r=[]),!o&&n>0&&(o=x(h)/n);for(var f=0;f<o;f++){var a=f/o;r.push(d(h,a))}return r};l.exports=u},31591:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,h){return h===void 0&&(h=new d),h.x=u.width,h.y=u.height,h};l.exports=x},7782:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79993),x=function(u,h,o){var n=u.centerX,r=u.centerY;return u.setSize(u.width+h*2,u.height+o*2),d(u,n,r)};l.exports=x},66217:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),x=e(90205),u=function(h,o,n){return n===void 0&&(n=new d),x(h,o)?(n.x=Math.max(h.x,o.x),n.y=Math.max(h.y,o.y),n.width=Math.min(h.right,o.right)-n.x,n.height=Math.min(h.bottom,o.bottom)-n.y):n.setEmpty(),n};l.exports=u},40053:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(85876),x=e(79967),u=function(h,o,n,r){if(r===void 0&&(r=[]),!o&&!n)return r;o?n=Math.round(d(h)/o):o=d(h)/n;for(var f=h.x,a=h.y,c=0,p=0;p<n;p++)switch(r.push(new x(f,a)),c){case 0:f+=o,f>=h.right&&(c=1,a+=f-h.right,f=h.right);break;case 1:a+=o,a>=h.bottom&&(c=2,f-=a-h.bottom,a=h.bottom);break;case 2:f-=o,f<=h.left&&(c=3,a-=h.left-f,f=h.left);break;case 3:a-=o,a<=h.top&&(c=0,a=h.top);break}return r};l.exports=u},86673:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){for(var x=e.x,u=e.right,h=e.y,o=e.bottom,n=0;n<d.length;n++)x=Math.min(x,d[n].x),u=Math.max(u,d[n].x),h=Math.min(h,d[n].y),o=Math.max(o,d[n].y);return e.x=x,e.y=h,e.width=u-x,e.height=o-h,e};l.exports=T},14655:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=Math.min(e.x,d.x),u=Math.max(e.right,d.right);e.x=x,e.width=u-x;var h=Math.min(e.y,d.y),o=Math.max(e.bottom,d.bottom);return e.y=h,e.height=o-h,e};l.exports=T},44755:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=Math.min(e.x,d),h=Math.max(e.right,d);e.x=u,e.width=h-u;var o=Math.min(e.y,x),n=Math.max(e.bottom,x);return e.y=o,e.height=n-o,e};l.exports=T},74466:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return e.x+=d,e.y+=x,e};l.exports=T},55946:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.x+=d.x,e.y+=d.y,e};l.exports=T},97474:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.x<d.right&&e.right>d.x&&e.y<d.bottom&&e.bottom>d.y};l.exports=T},85876:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return 2*(e.width+e.height)};l.exports=T},20243:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=e(75606),u=function(h,o,n){n===void 0&&(n=new d),o=x(o);var r=Math.sin(o),f=Math.cos(o),a=f>0?h.width/2:h.width/-2,c=r>0?h.height/2:h.height/-2;return Math.abs(a*r)<Math.abs(c*f)?c=a*r/f:a=c*f/r,n.x=a+h.centerX,n.y=c+h.centerY,n};l.exports=u},30001:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,h){return h===void 0&&(h=new d),h.x=u.x+Math.random()*u.width,h.y=u.y+Math.random()*u.height,h};l.exports=x},97691:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(17489),x=e(73222),u=e(79967),h=function(o,n,r){if(r===void 0&&(r=new u),x(o,n))switch(d(0,3)){case 0:r.x=o.x+Math.random()*(n.right-o.x),r.y=o.y+Math.random()*(n.top-o.y);break;case 1:r.x=n.x+Math.random()*(o.right-n.x),r.y=n.bottom+Math.random()*(o.bottom-n.bottom);break;case 2:r.x=o.x+Math.random()*(n.x-o.x),r.y=n.y+Math.random()*(o.bottom-n.y);break;case 3:r.x=n.right+Math.random()*(o.right-n.right),r.y=o.y+Math.random()*(n.bottom-o.y);break}return r};l.exports=h},74118:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(94287),u=e(47698),h=e(54932),o=e(52394),n=e(88829),r=e(30001),f=new d({initialize:function(c,p,v,m){c===void 0&&(c=0),p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=0),this.type=o.RECTANGLE,this.x=c,this.y=p,this.width=v,this.height=m},contains:function(a,c){return x(this,a,c)},getPoint:function(a,c){return u(this,a,c)},getPoints:function(a,c,p){return h(this,a,c,p)},getRandomPoint:function(a){return r(this,a)},setTo:function(a,c,p,v){return this.x=a,this.y=c,this.width=p,this.height=v,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(a,c){return c===void 0&&(c=a),this.x=a,this.y=c,this},setSize:function(a,c){return c===void 0&&(c=a),this.width=a,this.height=c,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(a){return a===void 0&&(a=new n),a.setTo(this.x,this.y,this.right,this.y),a},getLineB:function(a){return a===void 0&&(a=new n),a.setTo(this.right,this.y,this.right,this.bottom),a},getLineC:function(a){return a===void 0&&(a=new n),a.setTo(this.right,this.bottom,this.x,this.bottom),a},getLineD:function(a){return a===void 0&&(a=new n),a.setTo(this.x,this.bottom,this.x,this.y),a},left:{get:function(){return this.x},set:function(a){a>=this.right?this.width=0:this.width=this.right-a,this.x=a}},right:{get:function(){return this.x+this.width},set:function(a){a<=this.x?this.width=0:this.width=a-this.x}},top:{get:function(){return this.y},set:function(a){a>=this.bottom?this.height=0:this.height=this.bottom-a,this.y=a}},bottom:{get:function(){return this.y+this.height},set:function(a){a<=this.y?this.height=0:this.height=a-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(a){this.x=a-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(a){this.y=a-this.height/2}}});l.exports=f},51828:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.width===d.width&&e.height===d.height};l.exports=T},5691:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return x===void 0&&(x=d),e.width*=d,e.height*=x,e};l.exports=T},58795:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),x=function(u,h,o){o===void 0&&(o=new d);var n=Math.min(u.x,h.x),r=Math.min(u.y,h.y),f=Math.max(u.right,h.right)-n,a=Math.max(u.bottom,h.bottom)-r;return o.setTo(n,r,f,a)};l.exports=x},66658:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118);d.Area=e(1653),d.Ceil=e(33943),d.CeilAll=e(58662),d.CenterOn=e(79993),d.Clone=e(81572),d.Contains=e(94287),d.ContainsPoint=e(28687),d.ContainsRect=e(73222),d.CopyFrom=e(29538),d.Decompose=e(87279),d.Equals=e(19989),d.FitInside=e(92628),d.FitOutside=e(85028),d.Floor=e(71356),d.FloorAll=e(21687),d.FromPoints=e(80222),d.FromXY=e(75785),d.GetAspectRatio=e(6700),d.GetCenter=e(35242),d.GetPoint=e(47698),d.GetPoints=e(54932),d.GetSize=e(31591),d.Inflate=e(7782),d.Intersection=e(66217),d.MarchingAnts=e(40053),d.MergePoints=e(86673),d.MergeRect=e(14655),d.MergeXY=e(44755),d.Offset=e(74466),d.OffsetPoint=e(55946),d.Overlaps=e(97474),d.Perimeter=e(85876),d.PerimeterPoint=e(20243),d.Random=e(30001),d.RandomOutside=e(97691),d.SameDimensions=e(51828),d.Scale=e(5691),d.Union=e(58795),l.exports=d},19108:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d=e.x1,x=e.y1,u=e.x2,h=e.y2,o=e.x3,n=e.y3;return Math.abs(((o-d)*(h-x)-(u-d)*(n-x))/2)};l.exports=T},41199:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66349),x=function(u,h,o){var n=o*(Math.sqrt(3)/2),r=u,f=h,a=u+o/2,c=h+n,p=u-o/2,v=h+n;return new d(r,f,a,c,p,v)};l.exports=x},88730:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(11117),x=e(66349),u=function(h,o,n,r,f){o===void 0&&(o=null),n===void 0&&(n=1),r===void 0&&(r=1),f===void 0&&(f=[]);for(var a=d(h,o),c,p,v,m,y,P,E,S,w,R=0;R<a.length;R+=3)c=a[R],p=a[R+1],v=a[R+2],m=h[c*2]*n,y=h[c*2+1]*r,P=h[p*2]*n,E=h[p*2+1]*r,S=h[v*2]*n,w=h[v*2+1]*r,f.push(new x(m,y,P,E,S,w));return f};l.exports=u},3635:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66349),x=function(u,h,o,n){n===void 0&&(n=o);var r=u,f=h,a=u,c=h-n,p=u+o,v=h;return new d(r,f,a,c,p,v)};l.exports=x},1882:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56595),x=e(9640),u=function(h,o,n,r){r===void 0&&(r=d);var f=r(h),a=o-f.x,c=n-f.y;return x(h,a,c)};l.exports=u},56595:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,h){return h===void 0&&(h=new d),h.x=(u.x1+u.x2+u.x3)/3,h.y=(u.y1+u.y2+u.y3)/3,h};l.exports=x},91835:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736);function x(h,o,n,r){return h*r-o*n}var u=function(h,o){o===void 0&&(o=new d);var n=h.x3,r=h.y3,f=h.x1-n,a=h.y1-r,c=h.x2-n,p=h.y2-r,v=2*x(f,a,c,p),m=x(a,f*f+a*a,p,c*c+p*p),y=x(f,f*f+a*a,c,c*c+p*p);return o.x=n-m/v,o.y=r+y/v,o};l.exports=u},97073:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(26673),x=function(u,h){h===void 0&&(h=new d);var o=u.x1,n=u.y1,r=u.x2,f=u.y2,a=u.x3,c=u.y3,p=r-o,v=f-n,m=a-o,y=c-n,P=p*(o+r)+v*(n+f),E=m*(o+a)+y*(n+c),S=2*(p*(c-f)-v*(a-r)),w,R;if(Math.abs(S)<1e-6){var A=Math.min(o,r,a),O=Math.min(n,f,c);w=(Math.max(o,r,a)-A)*.5,R=(Math.max(n,f,c)-O)*.5,h.x=A+w,h.y=O+R,h.radius=Math.sqrt(w*w+R*R)}else h.x=(y*P-v*E)/S,h.y=(p*E-m*P)/S,w=h.x-o,R=h.y-n,h.radius=Math.sqrt(w*w+R*R);return h};l.exports=x},75974:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66349),x=function(u){return new d(u.x1,u.y1,u.x2,u.y2,u.x3,u.y3)};l.exports=x},60689:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=e.x3-e.x1,h=e.y3-e.y1,o=e.x2-e.x1,n=e.y2-e.y1,r=d-e.x1,f=x-e.y1,a=u*u+h*h,c=u*o+h*n,p=u*r+h*f,v=o*o+n*n,m=o*r+n*f,y=a*v-c*c,P=y===0?0:1/y,E=(v*p-c*m)*P,S=(a*m-c*p)*P;return E>=0&&S>=0&&E+S<1};l.exports=T},86875:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){x===void 0&&(x=!1),u===void 0&&(u=[]);for(var h=e.x3-e.x1,o=e.y3-e.y1,n=e.x2-e.x1,r=e.y2-e.y1,f=h*h+o*o,a=h*n+o*r,c=n*n+r*r,p=f*c-a*a,v=p===0?0:1/p,m,y,P,E,S,w,R=e.x1,A=e.y1,O=0;O<d.length&&(P=d[O].x-R,E=d[O].y-A,S=h*P+o*E,w=n*P+r*E,m=(c*S-a*w)*v,y=(f*w-a*S)*v,!(m>=0&&y>=0&&m+y<1&&(u.push({x:d[O].x,y:d[O].y}),x)));O++);return u};l.exports=T},51532:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(60689),x=function(u,h){return d(u,h.x,h.y)};l.exports=x},42538:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d.setTo(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};l.exports=T},18680:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d===void 0&&(d=[]),d.push({x:e.x1,y:e.y1}),d.push({x:e.x2,y:e.y2}),d.push({x:e.x3,y:e.y3}),d};l.exports=T},29977:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.x1===d.x1&&e.y1===d.y1&&e.x2===d.x2&&e.y2===d.y2&&e.x3===d.x3&&e.y3===d.y3};l.exports=T},56088:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=e(16028),u=function(h,o,n){n===void 0&&(n=new d);var r=h.getLineA(),f=h.getLineB(),a=h.getLineC();if(o<=0||o>=1)return n.x=r.x1,n.y=r.y1,n;var c=x(r),p=x(f),v=x(a),m=c+p+v,y=m*o,P=0;return y<c?(P=y/c,n.x=r.x1+(r.x2-r.x1)*P,n.y=r.y1+(r.y2-r.y1)*P):y>c+p?(y-=c+p,P=y/v,n.x=a.x1+(a.x2-a.x1)*P,n.y=a.y1+(a.y2-a.y1)*P):(y-=c,P=y/p,n.x=f.x1+(f.x2-f.x1)*P,n.y=f.y1+(f.y2-f.y1)*P),n};l.exports=u},24402:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16028),x=e(79967),u=function(h,o,n,r){r===void 0&&(r=[]);var f=h.getLineA(),a=h.getLineB(),c=h.getLineC(),p=d(f),v=d(a),m=d(c),y=p+v+m;!o&&n>0&&(o=y/n);for(var P=0;P<o;P++){var E=y*(P/o),S=0,w=new x;E<p?(S=E/p,w.x=f.x1+(f.x2-f.x1)*S,w.y=f.y1+(f.y2-f.y1)*S):E>p+v?(E-=p+v,S=E/m,w.x=c.x1+(c.x2-c.x1)*S,w.y=c.y1+(c.y2-c.y1)*S):(E-=p,S=E/v,w.x=a.x1+(a.x2-a.x1)*S,w.y=a.y1+(a.y2-a.y1)*S),r.push(w)}return r};l.exports=u},83648:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967);function x(h,o,n,r){var f=h-n,a=o-r,c=f*f+a*a;return Math.sqrt(c)}var u=function(h,o){o===void 0&&(o=new d);var n=h.x1,r=h.y1,f=h.x2,a=h.y2,c=h.x3,p=h.y3,v=x(c,p,f,a),m=x(n,r,c,p),y=x(f,a,n,r),P=v+m+y;return o.x=(n*v+f*m+c*y)/P,o.y=(r*v+a*m+p*y)/P,o};l.exports=u},9640:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return e.x1+=d,e.y1+=x,e.x2+=d,e.y2+=x,e.x3+=d,e.y3+=x,e};l.exports=T},95290:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16028),x=function(u){var h=u.getLineA(),o=u.getLineB(),n=u.getLineC();return d(h)+d(o)+d(n)};l.exports=x},99761:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,h){h===void 0&&(h=new d);var o=u.x2-u.x1,n=u.y2-u.y1,r=u.x3-u.x1,f=u.y3-u.y1,a=Math.random(),c=Math.random();return a+c>=1&&(a=1-a,c=1-c),h.x=u.x1+(o*a+r*c),h.y=u.y1+(n*a+f*c),h};l.exports=x},21934:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(19211),x=e(83648),u=function(h,o){var n=x(h);return d(h,n.x,n.y,o)};l.exports=u},68454:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(19211),x=function(u,h,o){return d(u,h.x,h.y,o)};l.exports=x},19211:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){var h=Math.cos(u),o=Math.sin(u),n=e.x1-d,r=e.y1-x;return e.x1=n*h-r*o+d,e.y1=n*o+r*h+x,n=e.x2-d,r=e.y2-x,e.x2=n*h-r*o+d,e.y2=n*o+r*h+x,n=e.x3-d,r=e.y3-x,e.x3=n*h-r*o+d,e.y3=n*o+r*h+x,e};l.exports=T},66349:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(60689),u=e(56088),h=e(24402),o=e(52394),n=e(88829),r=e(99761),f=new d({initialize:function(c,p,v,m,y,P){c===void 0&&(c=0),p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=0),y===void 0&&(y=0),P===void 0&&(P=0),this.type=o.TRIANGLE,this.x1=c,this.y1=p,this.x2=v,this.y2=m,this.x3=y,this.y3=P},contains:function(a,c){return x(this,a,c)},getPoint:function(a,c){return u(this,a,c)},getPoints:function(a,c,p){return h(this,a,c,p)},getRandomPoint:function(a){return r(this,a)},setTo:function(a,c,p,v,m,y){return a===void 0&&(a=0),c===void 0&&(c=0),p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=0),y===void 0&&(y=0),this.x1=a,this.y1=c,this.x2=p,this.y2=v,this.x3=m,this.y3=y,this},getLineA:function(a){return a===void 0&&(a=new n),a.setTo(this.x1,this.y1,this.x2,this.y2),a},getLineB:function(a){return a===void 0&&(a=new n),a.setTo(this.x2,this.y2,this.x3,this.y3),a},getLineC:function(a){return a===void 0&&(a=new n),a.setTo(this.x3,this.y3,this.x1,this.y1),a},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(a){var c=0;this.x1<=this.x2&&this.x1<=this.x3?c=this.x1-a:this.x2<=this.x1&&this.x2<=this.x3?c=this.x2-a:c=this.x3-a,this.x1-=c,this.x2-=c,this.x3-=c}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(a){var c=0;this.x1>=this.x2&&this.x1>=this.x3?c=this.x1-a:this.x2>=this.x1&&this.x2>=this.x3?c=this.x2-a:c=this.x3-a,this.x1-=c,this.x2-=c,this.x3-=c}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(a){var c=0;this.y1<=this.y2&&this.y1<=this.y3?c=this.y1-a:this.y2<=this.y1&&this.y2<=this.y3?c=this.y2-a:c=this.y3-a,this.y1-=c,this.y2-=c,this.y3-=c}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(a){var c=0;this.y1>=this.y2&&this.y1>=this.y3?c=this.y1-a:this.y2>=this.y1&&this.y2>=this.y3?c=this.y2-a:c=this.y3-a,this.y1-=c,this.y2-=c,this.y3-=c}}});l.exports=f},87619:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66349);d.Area=e(19108),d.BuildEquilateral=e(41199),d.BuildFromPolygon=e(88730),d.BuildRight=e(3635),d.CenterOn=e(1882),d.Centroid=e(56595),d.CircumCenter=e(91835),d.CircumCircle=e(97073),d.Clone=e(75974),d.Contains=e(60689),d.ContainsArray=e(86875),d.ContainsPoint=e(51532),d.CopyFrom=e(42538),d.Decompose=e(18680),d.Equals=e(29977),d.GetPoint=e(56088),d.GetPoints=e(24402),d.InCenter=e(83648),d.Perimeter=e(95290),d.Offset=e(9640),d.Random=e(99761),d.Rotate=e(21934),d.RotateAroundPoint=e(68454),d.RotateAroundXY=e(19211),l.exports=d},27395:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return{gameObject:e,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:d,hitAreaCallback:x,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};l.exports=T},18104:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return function(x,u,h,o){var n=e.getPixelAlpha(u,h,o.texture.key,o.frame.name);return n&&n>=d}};l.exports=T},69898:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72687),u=e(6659),h=e(33963),o=e(97081),n=e(71064),r=e(7905),f=e(40398),a=e(37579),c=e(69360),p=e(64462),v=new d({initialize:function(y,P){this.game=y,this.scaleManager,this.canvas,this.config=P,this.enabled=!0,this.events=new u,this.isOver=!0,this.defaultCursor="",this.keyboard=P.inputKeyboard?new n(this):null,this.mouse=P.inputMouse?new r(this):null,this.touch=P.inputTouch?new a(this):null,this.pointers=[],this.pointersTotal=P.inputActivePointers,P.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var E=0;E<=this.pointersTotal;E++){var S=new f(this,E);S.smoothFactor=P.inputSmoothFactor,this.pointers.push(S)}this.mousePointer=P.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new c,this._tempMatrix2=new c,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],y.events.once(o.BOOT,this.boot,this)},boot:function(){var m=this.game,y=m.events;this.canvas=m.canvas,this.scaleManager=m.scale,this.events.emit(h.MANAGER_BOOT),y.on(o.PRE_RENDER,this.preRender,this),y.once(o.DESTROY,this.destroy,this)},setCanvasOver:function(m){this.isOver=!0,this.events.emit(h.GAME_OVER,m)},setCanvasOut:function(m){this.isOver=!1,this.events.emit(h.GAME_OUT,m)},preRender:function(){var m=this.game.loop.now,y=this.game.loop.delta,P=this.game.scene.getScenes(!0,!0);this.time=m,this.events.emit(h.MANAGER_UPDATE);for(var E=0;E<P.length;E++){var S=P[E];if(S.sys.input&&S.sys.input.updatePoll(m,y)&&this.globalTopOnly)return}},setDefaultCursor:function(m){this.defaultCursor=m,this.canvas.style.cursor!==m&&(this.canvas.style.cursor=m)},setCursor:function(m){m.cursor&&(this.canvas.style.cursor=m.cursor)},resetCursor:function(m){m.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(m){m===void 0&&(m=1);var y=[];this.pointersTotal+m>10&&(m=10-this.pointersTotal);for(var P=0;P<m;P++){var E=this.pointers.length,S=new f(this,E);S.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(S),this.pointersTotal++,y.push(S)}return y},updateInputPlugins:function(m,y){var P=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var E=0;E<P.length;E++){var S=P[E];if(S.sys.input){var w=S.sys.input.update(m,y);if(w&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(m){for(var y=this.pointers,P=[],E=0;E<m.changedTouches.length;E++)for(var S=m.changedTouches[E],w=1;w<this.pointersTotal;w++){var R=y[w];if(!R.active){R.touchstart(S,m),this.activePointer=R,P.push(R);break}}this.updateInputPlugins(x.TOUCH_START,P)},onTouchMove:function(m){for(var y=this.pointers,P=[],E=0;E<m.changedTouches.length;E++)for(var S=m.changedTouches[E],w=1;w<this.pointersTotal;w++){var R=y[w];if(R.active&&R.identifier===S.identifier){var A=document.elementFromPoint(S.pageX,S.pageY),O=A===this.canvas;!this.isOver&&O?this.setCanvasOver(m):this.isOver&&!O&&this.setCanvasOut(m),this.isOver&&(R.touchmove(S,m),this.activePointer=R,P.push(R));break}}this.updateInputPlugins(x.TOUCH_MOVE,P)},onTouchEnd:function(m){for(var y=this.pointers,P=[],E=0;E<m.changedTouches.length;E++)for(var S=m.changedTouches[E],w=1;w<this.pointersTotal;w++){var R=y[w];if(R.active&&R.identifier===S.identifier){R.touchend(S,m),P.push(R);break}}this.updateInputPlugins(x.TOUCH_END,P)},onTouchCancel:function(m){for(var y=this.pointers,P=[],E=0;E<m.changedTouches.length;E++)for(var S=m.changedTouches[E],w=1;w<this.pointersTotal;w++){var R=y[w];if(R.active&&R.identifier===S.identifier){R.touchcancel(S,m),P.push(R);break}}this.updateInputPlugins(x.TOUCH_CANCEL,P)},onMouseDown:function(m){var y=this.mousePointer;y.down(m),y.updateMotion(),this.activePointer=y,this.updateInputPlugins(x.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(m){var y=this.mousePointer;y.move(m),y.updateMotion(),this.activePointer=y,this.updateInputPlugins(x.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(m){var y=this.mousePointer;y.up(m),y.updateMotion(),this.activePointer=y,this.updateInputPlugins(x.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(m){var y=this.mousePointer;y.wheel(m),this.activePointer=y,this.updateInputPlugins(x.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(m){var y=this.mouse.locked;this.mousePointer.locked=y,this.events.emit(h.POINTERLOCK_CHANGE,m,y)},inputCandidate:function(m,y){var P=m.input;if(!P||!P.enabled||!m.willRender(y))return!1;var E=!0,S=m.parentContainer;if(S)do{if(!S.willRender(y)){E=!1;break}S=S.parentContainer}while(S);return E},hitTest:function(m,y,P,E){E===void 0&&(E=this._tempHitTest);var S=this._tempPoint,w=P.scrollX,R=P.scrollY;E.length=0;var A=m.x,O=m.y;P.getWorldPoint(A,O,S),m.worldX=S.x,m.worldY=S.y;for(var F={x:0,y:0},b=this._tempMatrix,D=this._tempMatrix2,I=0;I<y.length;I++){var B=y[I];if(this.inputCandidate(B,P)){var k=S.x+w*B.scrollFactorX-w,U=S.y+R*B.scrollFactorY-R;B.parentContainer?(B.getWorldTransformMatrix(b,D),b.applyInverse(k,U,F)):p(k,U,B.x,B.y,B.rotation,B.scaleX,B.scaleY,F),this.pointWithinHitArea(B,F.x,F.y)&&E.push(B)}}return E},pointWithinHitArea:function(m,y,P){y+=m.displayOriginX,P+=m.displayOriginY;var E=m.input;return E&&E.hitAreaCallback(E.hitArea,y,P,m)?(E.localX=y,E.localY=P,!0):!1},pointWithinInteractiveObject:function(m,y,P){return m.hitArea?(y+=m.gameObject.displayOriginX,P+=m.gameObject.displayOriginY,m.localX=y,m.localY=P,m.hitAreaCallback(m.hitArea,y,P,m)):!1},transformPointer:function(m,y,P,E){var S=m.position,w=m.prevPosition;w.x=S.x,w.y=S.y;var R=this.scaleManager.transformX(y),A=this.scaleManager.transformY(P),O=m.smoothFactor;!E||O===0?(S.x=R,S.y=A):(S.x=R*O+w.x*(1-O),S.y=A*O+w.y*(1-O))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(o.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var m=0;m<this.pointers.length;m++)this.pointers[m].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});l.exports=v},12499:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(26673),x=e(65650),u=e(56694),h=e(72687),o=e(27395),n=e(18104),r=e(53996),f=e(95669),a=e(72313),c=e(33963),p=e(6659),v=e(72632),m=e(52394),y=e(63399),P=e(42911),E=e(91963),S=e(74118),w=e(94287),R=e(7599),A=e(66349),O=e(60689),F=new u({Extends:p,initialize:function(D){p.call(this),this.scene=D,this.systems=D.sys,this.settings=D.sys.settings,this.manager=D.sys.game.input,this.pluginEvents=new p,this.enabled=!0,this.displayList,this.cameras,y.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var I={cancelled:!1};this._eventContainer={stopPropagation:function(){I.cancelled=!0}},this._eventData=I,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,D.sys.events.once(R.BOOT,this.boot,this),D.sys.events.on(R.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(R.DESTROY,this.destroy,this),this.pluginEvents.emit(c.BOOT)},start:function(){var b=this.systems.events;b.on(R.TRANSITION_START,this.transitionIn,this),b.on(R.TRANSITION_OUT,this.transitionOut,this),b.on(R.TRANSITION_COMPLETE,this.transitionComplete,this),b.on(R.PRE_UPDATE,this.preUpdate,this),b.once(R.SHUTDOWN,this.shutdown,this),this.manager.events.on(c.GAME_OUT,this.onGameOut,this),this.manager.events.on(c.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(c.START)},onGameOver:function(b){this.isActive()&&this.emit(c.GAME_OVER,b.timeStamp,b)},onGameOut:function(b){this.isActive()&&this.emit(c.GAME_OUT,b.timeStamp,b)},preUpdate:function(){this.pluginEvents.emit(c.PRE_UPDATE);var b=this._pendingRemoval,D=this._pendingInsertion,I=b.length,B=D.length;if(!(I===0&&B===0)){for(var k=this._list,U=0;U<I;U++){var X=b[U],H=k.indexOf(X);H>-1&&(k.splice(H,1),this.clear(X,!0))}this._pendingRemoval.length=0,this._list=k.concat(D.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.canInput()},updatePoll:function(b,D){if(!this.isActive())return!1;if(this.pluginEvents.emit(c.UPDATE,b,D),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var I,B=this.manager,k=B.pointers,U=B.pointersTotal;for(I=0;I<U;I++)k[I].updateMotion();if(this._list.length===0)return!1;var X=this.pollRate;if(X===-1)return!1;if(X>0)if(this._pollTimer-=D,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var H=!1;for(I=0;I<U;I++){var N=0,z=k[I];this._tempZones=[],this._temp=this.hitTestPointer(z),this.sortGameObjects(this._temp,z),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),N+=this.processOverOutEvents(z),this.getDragState(z)===2&&this.processDragThresholdEvent(z,b),N>0&&(H=!0)}return H},update:function(b,D){if(!this.isActive())return!1;for(var I=D.length,B=!1,k=0;k<I;k++){var U=0,X=D[k];switch(this._tempZones=[],this._temp=this.hitTestPointer(X),this.sortGameObjects(this._temp,X),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),b){case h.MOUSE_DOWN:U+=this.processDragDownEvent(X),U+=this.processDownEvents(X),U+=this.processOverOutEvents(X);break;case h.MOUSE_UP:U+=this.processDragUpEvent(X),U+=this.processUpEvents(X),U+=this.processOverOutEvents(X);break;case h.TOUCH_START:U+=this.processDragDownEvent(X),U+=this.processDownEvents(X),U+=this.processOverEvents(X);break;case h.TOUCH_END:case h.TOUCH_CANCEL:U+=this.processDragUpEvent(X),U+=this.processUpEvents(X),U+=this.processOutEvents(X);break;case h.MOUSE_MOVE:case h.TOUCH_MOVE:U+=this.processDragMoveEvent(X),U+=this.processMoveEvents(X),U+=this.processOverOutEvents(X);break;case h.MOUSE_WHEEL:U+=this.processWheelEvent(X);break}U>0&&(B=!0)}return this._updatedThisFrame=!0,B},clear:function(b,D){D===void 0&&(D=!1),this.disable(b);var I=b.input;I&&(this.removeDebug(b),I.gameObject=void 0,I.target=void 0,I.hitArea=void 0,I.hitAreaCallback=void 0,I.callbackContext=void 0,b.input=null),D||this.queueForRemoval(b);var B=this._draggable.indexOf(b);return B>-1&&this._draggable.splice(B,1),b},disable:function(b){var D=b.input;D&&(D.enabled=!1,D.dragState=0);var I=this._temp,B=this._drag,k=this._over,U=this.manager,X=I.indexOf(b);X>-1&&I.splice(X,1);for(var H=0;H<U.pointersTotal;H++)X=B[H].indexOf(b),X>-1&&B[H].splice(X,1),X=k[H].indexOf(b),X>-1&&(k[H].splice(X,1),U.resetCursor(D));return this},enable:function(b,D,I,B){return B===void 0&&(B=!1),b.input?b.input.enabled=!0:this.setHitArea(b,D,I),b.input&&B&&!b.input.dropZone&&(b.input.dropZone=B),this},hitTestPointer:function(b){for(var D=this.cameras.getCamerasBelowPointer(b),I=0;I<D.length;I++){for(var B=D[I],k=this.manager.hitTest(b,this._list,B),U=0;U<k.length;U++){var X=k[U];X.input.dropZone&&this._tempZones.push(X)}if(k.length>0)return b.camera=B,k}return b.camera=D[0],[]},processDownEvents:function(b){var D=0,I=this._temp,B=this._eventData,k=this._eventContainer;B.cancelled=!1;for(var U=!1,X=0;X<I.length;X++){var H=I[X];if(!(!H.input||!H.input.enabled)){if(D++,H.emit(c.GAMEOBJECT_POINTER_DOWN,b,H.input.localX,H.input.localY,k),B.cancelled||!H.input||!H.input.enabled){U=!0;break}if(this.emit(c.GAMEOBJECT_DOWN,b,H,k),B.cancelled||!H.input){U=!0;break}}}return!U&&this.manager&&(b.downElement===this.manager.game.canvas?this.emit(c.POINTER_DOWN,b,I):this.emit(c.POINTER_DOWN_OUTSIDE,b)),D},getDragState:function(b){return this._dragState[b.id]},setDragState:function(b,D){this._dragState[b.id]=D},processDragThresholdEvent:function(b,D){var I=!1,B=this.dragTimeThreshold,k=this.dragDistanceThreshold;if((k>0&&r(b.x,b.y,b.downX,b.downY)>=k||B>0&&D>=b.downTime+B)&&(I=!0),I)return this.setDragState(b,3),this.processDragStartList(b)},processDragStartList:function(b){if(this.getDragState(b)!==3)return 0;for(var D=this._drag[b.id],I=0;I<D.length;I++){var B=D[I],k=B.input;k.dragState=2,k.dragStartX=B.x,k.dragStartY=B.y,k.dragStartXGlobal=b.worldX,k.dragStartYGlobal=b.worldY,k.dragX=k.dragStartXGlobal-k.dragStartX,k.dragY=k.dragStartYGlobal-k.dragStartY,B.emit(c.GAMEOBJECT_DRAG_START,b,k.dragX,k.dragY),this.emit(c.DRAG_START,b,B)}return this.setDragState(b,4),D.length},processDragDownEvent:function(b){var D=this._temp;if(this._draggable.length===0||D.length===0||!b.primaryDown||this.getDragState(b)!==0)return 0;this.setDragState(b,1);for(var I=[],B=0;B<D.length;B++){var k=D[B];k.input.draggable&&k.input.dragState===0&&I.push(k)}return I.length===0?(this.setDragState(b,0),0):(I.length>1&&(this.sortGameObjects(I,b),this.topOnly&&I.splice(1)),this._drag[b.id]=I,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(b,3),this.processDragStartList(b)):(this.setDragState(b,2),0))},processDragMoveEvent:function(b){if(this.getDragState(b)===2&&this.processDragThresholdEvent(b,this.manager.game.loop.now),this.getDragState(b)!==4)return 0;for(var D=this._tempZones,I=this._drag[b.id],B=0;B<I.length;B++){var k=I[B],U=k.input,X=U.target;if(X){var H=D.indexOf(X);H===0?(k.emit(c.GAMEOBJECT_DRAG_OVER,b,X),this.emit(c.DRAG_OVER,b,k,X)):H>0?(k.emit(c.GAMEOBJECT_DRAG_LEAVE,b,X),this.emit(c.DRAG_LEAVE,b,k,X),U.target=D[0],X=U.target,k.emit(c.GAMEOBJECT_DRAG_ENTER,b,X),this.emit(c.DRAG_ENTER,b,k,X)):(k.emit(c.GAMEOBJECT_DRAG_LEAVE,b,X),this.emit(c.DRAG_LEAVE,b,k,X),D[0]?(U.target=D[0],X=U.target,k.emit(c.GAMEOBJECT_DRAG_ENTER,b,X),this.emit(c.DRAG_ENTER,b,k,X)):U.target=null)}else!X&&D[0]&&(U.target=D[0],X=U.target,k.emit(c.GAMEOBJECT_DRAG_ENTER,b,X),this.emit(c.DRAG_ENTER,b,k,X));var N,z;if(!k.parentContainer)N=b.worldX-U.dragX,z=b.worldY-U.dragY;else{var L=b.worldX-U.dragStartXGlobal,G=b.worldY-U.dragStartYGlobal,V=k.getParentRotation(),Y=L*Math.cos(V)+G*Math.sin(V),W=G*Math.cos(V)-L*Math.sin(V);Y*=1/k.parentContainer.scaleX,W*=1/k.parentContainer.scaleY,N=Y+U.dragStartX,z=W+U.dragStartY}k.emit(c.GAMEOBJECT_DRAG,b,N,z),this.emit(c.DRAG,b,k,N,z)}return I.length},processDragUpEvent:function(b){for(var D=this._drag[b.id],I=0;I<D.length;I++){var B=D[I],k=B.input;if(k&&k.dragState===2){k.dragState=0,k.dragX=k.localX-B.displayOriginX,k.dragY=k.localY-B.displayOriginY;var U=!1,X=k.target;X&&(B.emit(c.GAMEOBJECT_DROP,b,X),this.emit(c.DROP,b,B,X),k.target=null,U=!0),B.input&&B.input.enabled&&(B.emit(c.GAMEOBJECT_DRAG_END,b,k.dragX,k.dragY,U),this.emit(c.DRAG_END,b,B,U))}}return this.setDragState(b,0),D.splice(0),0},processMoveEvents:function(b){var D=0,I=this._temp,B=this._eventData,k=this._eventContainer;B.cancelled=!1;for(var U=!1,X=0;X<I.length;X++){var H=I[X];if(!(!H.input||!H.input.enabled)){if(D++,H.emit(c.GAMEOBJECT_POINTER_MOVE,b,H.input.localX,H.input.localY,k),B.cancelled||!H.input||!H.input.enabled){U=!0;break}if(this.emit(c.GAMEOBJECT_MOVE,b,H,k),B.cancelled||!H.input||!H.input.enabled){U=!0;break}if(this.topOnly)break}}return U||this.emit(c.POINTER_MOVE,b,I),D},processWheelEvent:function(b){var D=0,I=this._temp,B=this._eventData,k=this._eventContainer;B.cancelled=!1;for(var U=!1,X=b.deltaX,H=b.deltaY,N=b.deltaZ,z=0;z<I.length;z++){var L=I[z];if(!(!L.input||!L.input.enabled)){if(D++,L.emit(c.GAMEOBJECT_POINTER_WHEEL,b,X,H,N,k),B.cancelled||!L.input||!L.input.enabled){U=!0;break}if(this.emit(c.GAMEOBJECT_WHEEL,b,L,X,H,N,k),B.cancelled||!L.input||!L.input.enabled){U=!0;break}}}return U||this.emit(c.POINTER_WHEEL,b,I,X,H,N),D},processOverEvents:function(b){var D=this._temp,I=0,B=D.length,k=[];if(B>0){var U=this.manager,X=this._eventData,H=this._eventContainer;X.cancelled=!1;for(var N=!1,z=0;z<B;z++){var L=D[z];if(!(!L.input||!L.input.enabled)){if(k.push(L),U.setCursor(L.input),L.emit(c.GAMEOBJECT_POINTER_OVER,b,L.input.localX,L.input.localY,H),I++,X.cancelled||!L.input||!L.input.enabled){N=!0;break}if(this.emit(c.GAMEOBJECT_OVER,b,L,H),X.cancelled||!L.input||!L.input.enabled){N=!0;break}}}N||this.emit(c.POINTER_OVER,b,k)}return this._over[b.id]=k,I},processOutEvents:function(b){var D=this._over[b.id],I=0,B=D.length;if(B>0){var k=this.manager,U=this._eventData,X=this._eventContainer;U.cancelled=!1;var H=!1;this.sortGameObjects(D,b);for(var N=0;N<B;N++){var z=D[N];if(z=D[N],!(!z.input||!z.input.enabled)){if(k.resetCursor(z.input),z.emit(c.GAMEOBJECT_POINTER_OUT,b,X),I++,U.cancelled||!z.input||!z.input.enabled){H=!0;break}if(this.emit(c.GAMEOBJECT_OUT,b,z,X),U.cancelled||!z.input||!z.input.enabled){H=!0;break}H||this.emit(c.POINTER_OUT,b,D)}}this._over[b.id]=[]}return I},processOverOutEvents:function(b){var D=this._temp,I,B,k=[],U=[],X=[],H=this._over[b.id],N=this._drag[b.id],z=this.manager;for(I=0;I<H.length;I++)B=H[I],D.indexOf(B)===-1&&N.indexOf(B)===-1?k.push(B):X.push(B);for(I=0;I<D.length;I++)B=D[I],H.indexOf(B)===-1&&U.push(B);var L=k.length,G=0,V=this._eventData,Y=this._eventContainer;V.cancelled=!1;var W=!1;if(L>0){for(this.sortGameObjects(k,b),I=0;I<L;I++)if(B=k[I],!(!B.input||!B.input.enabled)){if(z.resetCursor(B.input),B.emit(c.GAMEOBJECT_POINTER_OUT,b,Y),G++,V.cancelled||!B.input||!B.input.enabled){W=!0;break}if(this.emit(c.GAMEOBJECT_OUT,b,B,Y),V.cancelled||!B.input||!B.input.enabled){W=!0;break}}W||this.emit(c.POINTER_OUT,b,k)}if(L=U.length,V.cancelled=!1,W=!1,L>0){for(this.sortGameObjects(U,b),I=0;I<L;I++)if(B=U[I],!(!B.input||!B.input.enabled)){if(z.setCursor(B.input),B.emit(c.GAMEOBJECT_POINTER_OVER,b,B.input.localX,B.input.localY,Y),G++,V.cancelled||!B.input||!B.input.enabled){W=!0;break}if(this.emit(c.GAMEOBJECT_OVER,b,B,Y),V.cancelled||!B.input||!B.input.enabled){W=!0;break}}W||this.emit(c.POINTER_OVER,b,U)}return H=X.concat(U),this._over[b.id]=this.sortGameObjects(H,b),G},processUpEvents:function(b){var D=this._temp,I=this._eventData,B=this._eventContainer;I.cancelled=!1;for(var k=!1,U=0;U<D.length;U++){var X=D[U];if(!(!X.input||!X.input.enabled)){if(X.emit(c.GAMEOBJECT_POINTER_UP,b,X.input.localX,X.input.localY,B),I.cancelled||!X.input||!X.input.enabled){k=!0;break}if(this.emit(c.GAMEOBJECT_UP,b,X,B),I.cancelled||!X.input||!X.input.enabled){k=!0;break}}}return!k&&this.manager&&(b.upElement===this.manager.game.canvas?this.emit(c.POINTER_UP,b,D):this.emit(c.POINTER_UP_OUTSIDE,b)),D.length},queueForInsertion:function(b){return this._pendingInsertion.indexOf(b)===-1&&this._list.indexOf(b)===-1&&this._pendingInsertion.push(b),this},queueForRemoval:function(b){return this._pendingRemoval.push(b),this},setDraggable:function(b,D){D===void 0&&(D=!0),Array.isArray(b)||(b=[b]);for(var I=0;I<b.length;I++){var B=b[I];B.input.draggable=D;var k=this._draggable.indexOf(B);D&&k===-1?this._draggable.push(B):!D&&k>-1&&this._draggable.splice(k,1)}return this},makePixelPerfect:function(b){b===void 0&&(b=1);var D=this.systems.textures;return n(D,b)},setHitArea:function(b,D,I){if(D===void 0)return this.setHitAreaFromTexture(b);Array.isArray(b)||(b=[b]);var B=!1,k=!1,U=!1,X=!1,H=!1,N=!0;if(P(D)){var z=D;D=v(z,"hitArea",null),I=v(z,"hitAreaCallback",null),B=v(z,"draggable",!1),k=v(z,"dropZone",!1),U=v(z,"cursor",!1),X=v(z,"useHandCursor",!1),H=v(z,"pixelPerfect",!1);var L=v(z,"alphaTolerance",1);H&&(D={},I=this.makePixelPerfect(L)),(!D||!I)&&(this.setHitAreaFromTexture(b),N=!1)}else typeof D=="function"&&!I&&(I=D,D={});for(var G=0;G<b.length;G++){var V=b[G];if(H&&V.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var Y=V.input?V.input:o(V,D,I);Y.customHitArea=N,Y.dropZone=k,Y.cursor=X?"pointer":U,V.input=Y,B&&this.setDraggable(V),this.queueForInsertion(V)}return this},setHitAreaCircle:function(b,D,I,B,k){k===void 0&&(k=x);var U=new d(D,I,B);return this.setHitArea(b,U,k)},setHitAreaEllipse:function(b,D,I,B,k,U){U===void 0&&(U=a);var X=new f(D,I,B,k);return this.setHitArea(b,X,U)},setHitAreaFromTexture:function(b,D){D===void 0&&(D=w),Array.isArray(b)||(b=[b]);for(var I=0;I<b.length;I++){var B=b[I],k=B.frame,U=0,X=0;if(B.width?(U=B.width,X=B.height):k&&(U=k.realWidth,X=k.realHeight),B.type==="Container"&&(U===0||X===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}U!==0&&X!==0&&(B.input=o(B,new S(0,0,U,X),D),this.queueForInsertion(B))}return this},setHitAreaRectangle:function(b,D,I,B,k,U){U===void 0&&(U=w);var X=new S(D,I,B,k);return this.setHitArea(b,X,U)},setHitAreaTriangle:function(b,D,I,B,k,U,X,H){H===void 0&&(H=O);var N=new A(D,I,B,k,U,X);return this.setHitArea(b,N,H)},enableDebug:function(b,D){D===void 0&&(D=65280);var I=b.input;if(!I||!I.hitArea)return this;var B=I.hitArea,k=B.type,U=I.hitAreaDebug,X=this.systems.add,H=this.systems.updateList;U&&(H.remove(U),U.destroy(),U=null);var N=0,z=0;switch(k){case m.CIRCLE:U=X.arc(0,0,B.radius),N=B.x-B.radius,z=B.y-B.radius;break;case m.ELLIPSE:U=X.ellipse(0,0,B.width,B.height),N=B.x-B.width/2,z=B.y-B.height/2;break;case m.LINE:U=X.line(0,0,B.x1,B.y1,B.x2,B.y2);break;case m.POLYGON:U=X.polygon(0,0,B.points);break;case m.RECTANGLE:U=X.rectangle(0,0,B.width,B.height),N=B.x,z=B.y;break;case m.TRIANGLE:U=X.triangle(0,0,B.x1,B.y1,B.x2,B.y2,B.x3,B.y3);break}return U&&(U.isFilled=!1,U.strokeColor=D,U.preUpdate=function(){U.setStrokeStyle(1/b.scale,U.strokeColor),U.setDisplayOrigin(b.displayOriginX,b.displayOriginY);var L=b.x,G=b.y,V=b.rotation,Y=b.scaleX,W=b.scaleY;if(b.parentContainer){var $=b.getWorldTransformMatrix();L=$.tx,G=$.ty,V=$.rotation,Y=$.scaleX,W=$.scaleY}U.setRotation(V),U.setScale(Y,W),U.setPosition(L+N*Y,G+z*W),U.setScrollFactor(b.scrollFactorX,b.scrollFactorY),U.setDepth(b.depth)},H.add(U),I.hitAreaDebug=U),this},removeDebug:function(b){var D=b.input;if(D&&D.hitAreaDebug){var I=D.hitAreaDebug;this.systems.updateList.remove(I),I.destroy(),D.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(b){return this.pollRate=b,this._pollTimer=0,this},setGlobalTopOnly:function(b){return this.manager.globalTopOnly=b,this},setTopOnly:function(b){return this.topOnly=b,this},sortGameObjects:function(b,D){if(b.length<2||!D.camera)return b;var I=D.camera.renderList;return b.sort(function(B,k){var U=Math.max(I.indexOf(B),0),X=Math.max(I.indexOf(k),0);return X-U})},sortDropZones:function(b){return b.length<2?b:(this.scene.sys.depthSort(),b.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(b,D){if(!b.parentContainer&&!D.parentContainer)return this.displayList.getIndex(D)-this.displayList.getIndex(b);if(b.parentContainer===D.parentContainer)return D.parentContainer.getIndex(D)-b.parentContainer.getIndex(b);if(b.parentContainer===D)return-1;if(D.parentContainer===b)return 1;for(var I=b.getIndexList(),B=D.getIndexList(),k=Math.min(I.length,B.length),U=0;U<k;U++){var X=I[U],H=B[U];if(X!==H)return H-X}return B.length-I.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(b){return this.manager.addPointer(b)},setDefaultCursor:function(b){return this.manager.setDefaultCursor(b),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(c.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var b=0;b<10;b++)this._drag[b]=[],this._over[b]=[];this.removeAllListeners();var D=this.manager;D.canvas.style.cursor=D.defaultCursor;var I=this.systems.events;I.off(R.TRANSITION_START,this.transitionIn,this),I.off(R.TRANSITION_OUT,this.transitionOut,this),I.off(R.TRANSITION_COMPLETE,this.transitionComplete,this),I.off(R.PRE_UPDATE,this.preUpdate,this),D.events.off(c.GAME_OUT,this.onGameOut,this),D.events.off(c.GAME_OVER,this.onGameOver,this),I.off(R.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var b=this.manager.pointers,D=0;D<b.length;D++)b[D].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(c.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(R.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});E.register("InputPlugin",F,"input"),l.exports=F},63399:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(10850),x={},u={};u.register=function(h,o,n,r,f){x[h]={plugin:o,mapping:n,settingsKey:r,configKey:f}},u.getPlugin=function(h){return x[h]},u.install=function(h){var o=h.scene.sys,n=o.settings.input,r=o.game.config;for(var f in x){var a=x[f].plugin,c=x[f].mapping,p=x[f].settingsKey,v=x[f].configKey;d(n,p,r[v])&&(h[c]=new a(h))}},u.remove=function(h){x.hasOwnProperty(h)&&delete x[h]},l.exports=u},40398:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(90447),x=e(56694),u=e(53996),h=e(88456),o=e(44521),n=e(93736),r=e(36580),f=new x({initialize:function(c,p){this.manager=c,this.id=p,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new n,this.prevPosition=new n,this.midPoint=new n(-1,-1),this.velocity=new n,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=p===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(a){var c=a.getWorldPoint(this.x,this.y);return this.worldX=c.x,this.worldY=c.y,this},positionToCamera:function(a,c){return a.getWorldPoint(this.x,this.y,c)},updateMotion:function(){var a=this.position.x,c=this.position.y,p=this.midPoint.x,v=this.midPoint.y;if(!(a===p&&c===v)){var m=o(this.motionFactor,p,a),y=o(this.motionFactor,v,c);h(m,a,.1)&&(m=a),h(y,c,.1)&&(y=c),this.midPoint.set(m,y);var P=a-m,E=c-y;this.velocity.set(P,E),this.angle=d(m,y,a,c),this.distance=Math.sqrt(P*P+E*E)}},up:function(a){"buttons"in a&&(this.buttons=a.buttons),this.event=a,this.button=a.button,this.upElement=a.target,this.manager.transformPointer(this,a.pageX,a.pageY,!1),a.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=a.timeStamp,this.wasTouch=!1)},down:function(a){"buttons"in a&&(this.buttons=a.buttons),this.event=a,this.button=a.button,this.downElement=a.target,this.manager.transformPointer(this,a.pageX,a.pageY,!1),a.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),r.macOS&&a.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=a.timeStamp),this.wasTouch=!1},move:function(a){"buttons"in a&&(this.buttons=a.buttons),this.event=a,this.manager.transformPointer(this,a.pageX,a.pageY,!0),this.locked&&(this.movementX=a.movementX||a.mozMovementX||a.webkitMovementX||0,this.movementY=a.movementY||a.mozMovementY||a.webkitMovementY||0),this.moveTime=a.timeStamp,this.wasTouch=!1},wheel:function(a){"buttons"in a&&(this.buttons=a.buttons),this.event=a,this.manager.transformPointer(this,a.pageX,a.pageY,!1),this.deltaX=a.deltaX,this.deltaY=a.deltaY,this.deltaZ=a.deltaZ,this.wasTouch=!1},touchstart:function(a,c){a.pointerId&&(this.pointerId=a.pointerId),this.identifier=a.identifier,this.target=a.target,this.active=!0,this.buttons=1,this.event=c,this.downElement=a.target,this.manager.transformPointer(this,a.pageX,a.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=c.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(a,c){this.event=c,this.manager.transformPointer(this,a.pageX,a.pageY,!0),this.moveTime=c.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(a,c){this.buttons=0,this.event=c,this.upElement=a.target,this.manager.transformPointer(this,a.pageX,a.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=c.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(a,c){this.buttons=0,this.event=c,this.upElement=a.target,this.manager.transformPointer(this,a.pageX,a.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=c.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?u(this.downX,this.downY,this.x,this.y):u(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?d(this.downX,this.downY,this.x,this.y):d(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(a,c){a===void 0&&(a=10),c===void 0&&(c=[]);for(var p=this.prevPosition.x,v=this.prevPosition.y,m=this.position.x,y=this.position.y,P=0;P<a;P++){var E=1/a*P;c[P]={x:o(E,p,m),y:o(E,v,y)}}return c},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(a){this.position.x=a}},y:{get:function(){return this.position.y},set:function(a){this.position.y=a}},time:{get:function(){return this.event?this.event.timeStamp:0}}});l.exports=f},72687:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};l.exports=T},14874:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="boot"},54168:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="destroy"},526:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="dragend"},81623:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="dragenter"},94472:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="drag"},9304:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="dragleave"},34265:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="dragover"},50151:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="dragstart"},98134:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="drop"},56773:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="gameobjectdown"},45824:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="dragend"},39578:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="dragenter"},72072:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="drag"},82569:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="dragleave"},70833:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="dragover"},81442:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="dragstart"},32936:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="drop"},99658:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="gameobjectmove"},60515:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="gameobjectout"},55254:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="gameobjectover"},34782:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pointerdown"},41769:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pointermove"},65588:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pointerout"},61640:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pointerover"},49342:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pointerup"},82662:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="wheel"},13058:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="gameobjectup"},52426:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="gameobjectwheel"},78072:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="gameout"},1545:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="gameover"},67137:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="boot"},27678:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="process"},22257:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="update"},90379:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pointerlockchange"},88909:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pointerdown"},36548:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pointerdownoutside"},18483:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pointermove"},22355:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pointerout"},7997:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pointerover"},66318:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pointerup"},94812:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pointerupoutside"},37310:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="wheel"},24196:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="preupdate"},27053:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="shutdown"},29413:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="start"},25165:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="update"},33963:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={BOOT:e(14874),DESTROY:e(54168),DRAG_END:e(526),DRAG_ENTER:e(81623),DRAG:e(94472),DRAG_LEAVE:e(9304),DRAG_OVER:e(34265),DRAG_START:e(50151),DROP:e(98134),GAME_OUT:e(78072),GAME_OVER:e(1545),GAMEOBJECT_DOWN:e(56773),GAMEOBJECT_DRAG_END:e(45824),GAMEOBJECT_DRAG_ENTER:e(39578),GAMEOBJECT_DRAG:e(72072),GAMEOBJECT_DRAG_LEAVE:e(82569),GAMEOBJECT_DRAG_OVER:e(70833),GAMEOBJECT_DRAG_START:e(81442),GAMEOBJECT_DROP:e(32936),GAMEOBJECT_MOVE:e(99658),GAMEOBJECT_OUT:e(60515),GAMEOBJECT_OVER:e(55254),GAMEOBJECT_POINTER_DOWN:e(34782),GAMEOBJECT_POINTER_MOVE:e(41769),GAMEOBJECT_POINTER_OUT:e(65588),GAMEOBJECT_POINTER_OVER:e(61640),GAMEOBJECT_POINTER_UP:e(49342),GAMEOBJECT_POINTER_WHEEL:e(82662),GAMEOBJECT_UP:e(13058),GAMEOBJECT_WHEEL:e(52426),MANAGER_BOOT:e(67137),MANAGER_PROCESS:e(27678),MANAGER_UPDATE:e(22257),POINTER_DOWN:e(88909),POINTER_DOWN_OUTSIDE:e(36548),POINTER_MOVE:e(18483),POINTER_OUT:e(22355),POINTER_OVER:e(7997),POINTER_UP:e(66318),POINTER_UP_OUTSIDE:e(94812),POINTER_WHEEL:e(37310),POINTERLOCK_CHANGE:e(90379),PRE_UPDATE:e(24196),SHUTDOWN:e(27053),START:e(29413),UPDATE:e(25165)}},70848:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(h,o){this.pad=h,this.events=h.events,this.index=o,this.value=0,this.threshold=.1},update:function(u){this.value=u},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});l.exports=x},21274:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(43200),u=new d({initialize:function(o,n){this.pad=o,this.events=o.manager,this.index=n,this.value=0,this.threshold=1,this.pressed=!1},update:function(h){this.value=h;var o=this.pad,n=this.index;h>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(x.BUTTON_DOWN,o,this,h),this.pad.emit(x.GAMEPAD_BUTTON_DOWN,n,h,this)):this.pressed&&(this.pressed=!1,this.events.emit(x.BUTTON_UP,o,this,h),this.pad.emit(x.GAMEPAD_BUTTON_UP,n,h,this))},destroy:function(){this.pad=null,this.events=null}});l.exports=u},75956:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70848),x=e(21274),u=e(56694),h=e(6659),o=e(93736),n=new u({Extends:h,initialize:function(f,a){h.call(this),this.manager=f,this.pad=a,this.id=a.id,this.index=a.index;for(var c=[],p=0;p<a.buttons.length;p++)c.push(new x(this,p));this.buttons=c;var v=[];for(p=0;p<a.axes.length;p++)v.push(new d(this,p));this.axes=v,this.vibration=a.vibrationActuator;var m={value:0,pressed:!1};this._LCLeft=c[14]?c[14]:m,this._LCRight=c[15]?c[15]:m,this._LCTop=c[12]?c[12]:m,this._LCBottom=c[13]?c[13]:m,this._RCLeft=c[2]?c[2]:m,this._RCRight=c[1]?c[1]:m,this._RCTop=c[3]?c[3]:m,this._RCBottom=c[0]?c[0]:m,this._FBLeftTop=c[4]?c[4]:m,this._FBLeftBottom=c[6]?c[6]:m,this._FBRightTop=c[5]?c[5]:m,this._FBRightBottom=c[7]?c[7]:m;var y={value:0};this._HAxisLeft=v[0]?v[0]:y,this._VAxisLeft=v[1]?v[1]:y,this._HAxisRight=v[2]?v[2]:y,this._VAxisRight=v[3]?v[3]:y,this.leftStick=new o,this.rightStick=new o,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(r){return this.axes[r].getValue()},setAxisThreshold:function(r){for(var f=0;f<this.axes.length;f++)this.axes[f].threshold=r},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(r){return this.buttons[r].value},isButtonDown:function(r){return this.buttons[r].pressed},update:function(r){if(!(r.timestamp<this._created)){var f,a=this.buttons,c=r.buttons,p=a.length;for(f=0;f<p;f++)a[f].update(c[f].value);var v=this.axes,m=r.axes;for(p=v.length,f=0;f<p;f++)v[f].update(m[f]);p>=2&&(this.leftStick.set(v[0].getValue(),v[1].getValue()),p>=4&&this.rightStick.set(v[2].getValue(),v[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var r;for(r=0;r<this.buttons.length;r++)this.buttons[r].destroy();for(r=0;r<this.axes.length;r++)this.axes[r].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});l.exports=n},1379:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(6659),u=e(43200),h=e(75956),o=e(10850),n=e(63399),r=e(33963),f=new d({Extends:x,initialize:function(c){x.call(this),this.scene=c.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=c,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,c.pluginEvents.once(r.BOOT,this.boot,this),c.pluginEvents.on(r.START,this.start,this)},boot:function(){var a=this.scene.sys.game,c=this.settings.input,p=a.config;this.enabled=o(c,"gamepad",p.inputGamepad)&&a.device.input.gamepads,this.target=o(c,"gamepad.target",p.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(r.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(r.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var a=this,c=this.target,p=function(v){v.defaultPrevented||!a.isActive()||(a.refreshPads(),a.queue.push(v))};this.onGamepadHandler=p,c.addEventListener("gamepadconnected",p,!1),c.addEventListener("gamepaddisconnected",p,!1),this.sceneInputPlugin.pluginEvents.on(r.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(r.UPDATE,this.update);for(var a=0;a<this.gamepads.length;a++)this.gamepads[a].removeAllListeners()},disconnectAll:function(){for(var a=0;a<this.gamepads.length;a++)this.gamepads[a].pad.connected=!1},refreshPads:function(){var a=navigator.getGamepads();if(!a)this.disconnectAll();else for(var c=this.gamepads,p=0;p<a.length;p++){var v=a[p];if(v){var m=v.id,y=v.index,P=c[y];if(P)P.id!==m?(P.destroy(),c[y]=new h(this,v)):P.update(v);else{var E=new h(this,v);c[y]=E,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=E):this._pad3=E:this._pad2=E:this._pad1=E}}}},getAll:function(){for(var a=[],c=this.gamepads,p=0;p<c.length;p++)c[p]&&a.push(c[p]);return a},getPad:function(a){for(var c=this.gamepads,p=0;p<c.length;p++)if(c[p]&&c[p].index===a)return c[p]},update:function(){if(this.enabled){this.refreshPads();var a=this.queue.length;if(a!==0)for(var c=this.queue.splice(0,a),p=0;p<a;p++){var v=c[p],m=this.getPad(v.gamepad.index);v.type==="gamepadconnected"?this.emit(u.CONNECTED,m,v):v.type==="gamepaddisconnected"&&this.emit(u.DISCONNECTED,m,v)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var a=0;a<this.gamepads.length;a++)this.gamepads[a]&&this.gamepads[a].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});n.register("GamepadPlugin",f,"gamepad","gamepad","inputGamepad"),l.exports=f},33171:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},74982:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},43247:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},4898:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={DUALSHOCK_4:e(74982),SNES_USB:e(33171),XBOX_360:e(43247)}},17344:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="down"},36635:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="up"},85724:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="connected"},55832:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="disconnected"},772:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="down"},33608:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="up"},43200:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={BUTTON_DOWN:e(17344),BUTTON_UP:e(36635),CONNECTED:e(85724),DISCONNECTED:e(55832),GAMEPAD_BUTTON_DOWN:e(772),GAMEPAD_BUTTON_UP:e(33608)}},92636:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={Axis:e(70848),Button:e(21274),Events:e(43200),Gamepad:e(75956),GamepadPlugin:e(1379),Configs:e(4898)}},20873:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72687),x=e(98611),u={CreatePixelPerfectHandler:e(18104),CreateInteractiveObject:e(27395),Events:e(33963),Gamepad:e(92636),InputManager:e(69898),InputPlugin:e(12499),InputPluginCache:e(63399),Keyboard:e(28388),Mouse:e(11343),Pointer:e(40398),Touch:e(77423)};u=x(!1,u,d),l.exports=u},71064:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66458),x=e(56694),u=e(97081),h=e(33963),o=e(11873),n=e(72283),r=new x({initialize:function(a){this.manager=a,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=n,this.onKeyUp=n,a.events.once(h.MANAGER_BOOT,this.boot,this)},boot:function(){var f=this.manager.config;this.enabled=f.inputKeyboard,this.target=f.inputKeyboardEventTarget,this.addCapture(f.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(u.POST_STEP,this.postUpdate,this)},startListeners:function(){var f=this;this.onKeyDown=function(c){if(!(c.defaultPrevented||!f.enabled||!f.manager)){f.queue.push(c),f.manager.events.emit(h.MANAGER_PROCESS);var p=c.altKey||c.ctrlKey||c.shiftKey||c.metaKey;f.preventDefault&&!p&&f.captures.indexOf(c.keyCode)>-1&&c.preventDefault()}},this.onKeyUp=function(c){if(!(c.defaultPrevented||!f.enabled||!f.manager)){f.queue.push(c),f.manager.events.emit(h.MANAGER_PROCESS);var p=c.altKey||c.ctrlKey||c.shiftKey||c.metaKey;f.preventDefault&&!p&&f.captures.indexOf(c.keyCode)>-1&&c.preventDefault()}};var a=this.target;a&&(a.addEventListener("keydown",this.onKeyDown,!1),a.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var f=this.target;f.removeEventListener("keydown",this.onKeyDown,!1),f.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(f){typeof f=="string"&&(f=f.split(",")),Array.isArray(f)||(f=[f]);for(var a=this.captures,c=0;c<f.length;c++){var p=f[c];typeof p=="string"&&(p=o[p.trim().toUpperCase()]),a.indexOf(p)===-1&&a.push(p)}this.preventDefault=a.length>0},removeCapture:function(f){typeof f=="string"&&(f=f.split(",")),Array.isArray(f)||(f=[f]);for(var a=this.captures,c=0;c<f.length;c++){var p=f[c];typeof p=="string"&&(p=o[p.toUpperCase()]),d(a,p)}this.preventDefault=a.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(u.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});l.exports=r},89666:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(6659),u=e(94030),h=e(97081),o=e(10850),n=e(33963),r=e(63399),f=e(50165),a=e(11873),c=e(95625),p=e(48044),v=e(7599),m=e(84314),y=new d({Extends:x,initialize:function(E){x.call(this),this.game=E.systems.game,this.scene=E.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=E,this.manager=E.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,E.pluginEvents.once(n.BOOT,this.boot,this),E.pluginEvents.on(n.START,this.start,this)},boot:function(){var P=this.settings.input;this.enabled=o(P,"keyboard",!0);var E=o(P,"keyboard.capture",null);E&&this.addCaptures(E),this.sceneInputPlugin.pluginEvents.once(n.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(n.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(n.SHUTDOWN,this.shutdown,this),this.game.events.on(h.BLUR,this.resetKeys,this),this.scene.sys.events.on(v.PAUSE,this.resetKeys,this),this.scene.sys.events.on(v.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(P){return this.manager.addCapture(P),this},removeCapture:function(P){return this.manager.removeCapture(P),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:a.UP,down:a.DOWN,left:a.LEFT,right:a.RIGHT,space:a.SPACE,shift:a.SHIFT})},addKeys:function(P,E,S){E===void 0&&(E=!0),S===void 0&&(S=!1);var w={};if(typeof P=="string"){P=P.split(",");for(var R=0;R<P.length;R++){var A=P[R].trim();A&&(w[A]=this.addKey(A,E,S))}}else for(var O in P)w[O]=this.addKey(P[O],E,S);return w},addKey:function(P,E,S){E===void 0&&(E=!0),S===void 0&&(S=!1);var w=this.keys;if(P instanceof f){var R=w.indexOf(P);return R>-1?w[R]=P:w[P.keyCode]=P,E&&this.addCapture(P.keyCode),P.setEmitOnRepeat(S),P}return typeof P=="string"&&(P=a[P.toUpperCase()]),w[P]||(w[P]=new f(this,P),E&&this.addCapture(P),w[P].setEmitOnRepeat(S)),w[P]},removeKey:function(P,E,S){E===void 0&&(E=!1),S===void 0&&(S=!1);var w=this.keys,R;if(P instanceof f){var A=w.indexOf(P);A>-1&&(R=this.keys[A],this.keys[A]=void 0)}else typeof P=="string"&&(P=a[P.toUpperCase()]);return w[P]&&(R=w[P],w[P]=void 0),R&&(R.plugin=null,S&&this.removeCapture(R.keyCode),E&&R.destroy()),this},removeAllKeys:function(P,E){P===void 0&&(P=!1),E===void 0&&(E=!1);for(var S=this.keys,w=0;w<S.length;w++){var R=S[w];R&&(S[w]=void 0,E&&this.removeCapture(R.keyCode),P&&R.destroy())}return this},createCombo:function(P,E){return new c(this,P,E)},checkDown:function(P,E){if(E===void 0&&(E=0),this.enabled&&P.isDown){var S=m(this.time-P.timeDown,E);if(S>P._tick)return P._tick=S,!0}return!1},update:function(){var P=this.manager.queue,E=P.length;if(!(!this.isActive()||E===0))for(var S=this.keys,w=0;w<E;w++){var R=P[w],A=R.keyCode,O=S[A],F=!1;R.cancelled===void 0&&(R.cancelled=0,R.stopImmediatePropagation=function(){R.cancelled=1},R.stopPropagation=function(){R.cancelled=-1}),R.cancelled!==-1&&(A===this.prevCode&&R.timeStamp===this.prevTime&&R.type===this.prevType||(this.prevCode=A,this.prevTime=R.timeStamp,this.prevType=R.type,R.type==="keydown"?(O&&(F=O.isDown,O.onDown(R)),!R.cancelled&&(!O||!F)&&(p[A]&&this.emit(u.KEY_DOWN+p[A],R),R.cancelled||this.emit(u.ANY_KEY_DOWN,R))):(O&&O.onUp(R),R.cancelled||(p[A]&&this.emit(u.KEY_UP+p[A],R),R.cancelled||this.emit(u.ANY_KEY_UP,R))),R.cancelled===1&&(R.cancelled=0)))}},resetKeys:function(){for(var P=this.keys,E=0;E<P.length;E++)P[E]&&P[E].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(n.MANAGER_PROCESS,this.update,this),this.game.events.off(h.BLUR,this.resetKeys),this.scene.sys.events.off(v.PAUSE,this.resetKeys,this),this.scene.sys.events.off(v.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var P=this.keys,E=0;E<P.length;E++)P[E]&&P[E].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});r.register("KeyboardPlugin",y,"keyboard","keyboard","inputKeyboard"),l.exports=y},60258:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d.timeLastMatched=e.timeStamp,d.index++,d.index===d.size?!0:(d.current=d.keyCodes[d.index],!1)};l.exports=T},95625:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(94030),u=e(72632),h=e(2544),o=e(88754),n=new d({initialize:function(f,a,c){if(c===void 0&&(c={}),a.length<2)return!1;this.manager=f,this.enabled=!0,this.keyCodes=[];for(var p=0;p<a.length;p++){var v=a[p];typeof v=="string"?this.keyCodes.push(v.toUpperCase().charCodeAt(0)):typeof v=="number"?this.keyCodes.push(v):v.hasOwnProperty("keyCode")&&this.keyCodes.push(v.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=u(c,"resetOnWrongKey",!0),this.maxKeyDelay=u(c,"maxKeyDelay",0),this.resetOnMatch=u(c,"resetOnMatch",!1),this.deleteOnMatch=u(c,"deleteOnMatch",!1);var m=this,y=function(P){if(!(m.matched||!m.enabled)){var E=h(P,m);E&&(m.manager.emit(x.COMBO_MATCH,m,P),m.resetOnMatch?o(m):m.deleteOnMatch&&m.destroy())}};this.onKeyDown=y,this.manager.on(x.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(x.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});l.exports=n},2544:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(60258),x=function(u,h){if(h.matched)return!0;var o=!1,n=!1;if(u.keyCode===h.current)if(h.index>0&&h.maxKeyDelay>0){var r=h.timeLastMatched+h.maxKeyDelay;u.timeStamp<=r&&(n=!0,o=d(u,h))}else n=!0,o=d(u,h);return!n&&h.resetOnWrongKey&&(h.index=0,h.current=h.keyCodes[0]),o&&(h.timeLastMatched=u.timeStamp,h.matched=!0,h.timeMatched=u.timeStamp),o};l.exports=x},88754:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.current=e.keyCodes[0],e.index=0,e.timeLastMatched=0,e.matched=!1,e.timeMatched=0,e};l.exports=T},5044:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="keydown"},40813:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="keyup"},89319:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="keycombomatch"},43267:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="down"},78595:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="keydown-"},30056:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="keyup-"},81939:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="up"},94030:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={ANY_KEY_DOWN:e(5044),ANY_KEY_UP:e(40813),COMBO_MATCH:e(89319),DOWN:e(43267),KEY_DOWN:e(78595),KEY_UP:e(30056),UP:e(81939)}},28388:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={Events:e(94030),KeyboardManager:e(71064),KeyboardPlugin:e(89666),Key:e(50165),KeyCodes:e(11873),KeyCombo:e(95625),AdvanceKeyCombo:e(60258),ProcessKeyCombo:e(2544),ResetKeyCombo:e(88754),JustDown:e(42460),JustUp:e(53162),DownDuration:e(64964),UpDuration:e(70331)}},64964:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){d===void 0&&(d=50);var x=e.plugin.game.loop.time-e.timeDown;return e.isDown&&x<d};l.exports=T},42460:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e._justDown?(e._justDown=!1,!0):!1};l.exports=T},53162:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e._justUp?(e._justUp=!1,!0):!1};l.exports=T},50165:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(6659),u=e(94030),h=new d({Extends:x,initialize:function(n,r){x.call(this),this.plugin=n,this.keyCode=r,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(o){return this.emitOnRepeat=o,this},onDown:function(o){this.originalEvent=o,this.enabled&&(this.altKey=o.altKey,this.ctrlKey=o.ctrlKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.location=o.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(u.DOWN,this,o):(this.isDown=!0,this.isUp=!1,this.timeDown=o.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(u.DOWN,this,o)))},onUp:function(o){this.originalEvent=o,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=o.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(u.UP,this,o))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});l.exports=h},11873:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};l.exports=T},48044:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(11873),x={};for(var u in d)x[d[u]]=u;l.exports=x},70331:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){d===void 0&&(d=50);var x=e.plugin.game.loop.time-e.timeUp;return e.isUp&&x<d};l.exports=T},7905:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(90185),u=e(33963),h=e(72283),o=new d({initialize:function(r){this.manager=r,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=h,this.onMouseDown=h,this.onMouseUp=h,this.onMouseDownWindow=h,this.onMouseUpWindow=h,this.onMouseOver=h,this.onMouseOut=h,this.onMouseWheel=h,this.pointerLockChange=h,this.isTop=!0,r.events.once(u.MANAGER_BOOT,this.boot,this)},boot:function(){var n=this.manager.config;this.enabled=n.inputMouse,this.target=n.inputMouseEventTarget,this.passive=n.inputMousePassive,this.preventDefaultDown=n.inputMousePreventDefaultDown,this.preventDefaultUp=n.inputMousePreventDefaultUp,this.preventDefaultMove=n.inputMousePreventDefaultMove,this.preventDefaultWheel=n.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,n.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(n){return n.preventDefault(),!1}),this},requestPointerLock:function(){if(x.pointerLock){var n=this.target;n.requestPointerLock=n.requestPointerLock||n.mozRequestPointerLock||n.webkitRequestPointerLock,n.requestPointerLock()}},releasePointerLock:function(){x.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var n=this.target;if(n){var r=this,f=this.manager,a=f.canvas,c=window&&window.focus&&f.game.config.autoFocus;this.onMouseMove=function(v){!v.defaultPrevented&&r.enabled&&f&&f.enabled&&(f.onMouseMove(v),r.preventDefaultMove&&v.preventDefault())},this.onMouseDown=function(v){c&&window.focus(),!v.defaultPrevented&&r.enabled&&f&&f.enabled&&(f.onMouseDown(v),r.preventDefaultDown&&v.target===a&&v.preventDefault())},this.onMouseDownWindow=function(v){!v.defaultPrevented&&r.enabled&&f&&f.enabled&&v.target!==a&&f.onMouseDown(v)},this.onMouseUp=function(v){!v.defaultPrevented&&r.enabled&&f&&f.enabled&&(f.onMouseUp(v),r.preventDefaultUp&&v.target===a&&v.preventDefault())},this.onMouseUpWindow=function(v){!v.defaultPrevented&&r.enabled&&f&&f.enabled&&v.target!==a&&f.onMouseUp(v)},this.onMouseOver=function(v){!v.defaultPrevented&&r.enabled&&f&&f.enabled&&f.setCanvasOver(v)},this.onMouseOut=function(v){!v.defaultPrevented&&r.enabled&&f&&f.enabled&&f.setCanvasOut(v)},this.onMouseWheel=function(v){!v.defaultPrevented&&r.enabled&&f&&f.enabled&&f.onMouseWheel(v),r.preventDefaultWheel&&v.target===a&&v.preventDefault()};var p={passive:!0};if(n.addEventListener("mousemove",this.onMouseMove),n.addEventListener("mousedown",this.onMouseDown),n.addEventListener("mouseup",this.onMouseUp),n.addEventListener("mouseover",this.onMouseOver,p),n.addEventListener("mouseout",this.onMouseOut,p),this.preventDefaultWheel?n.addEventListener("wheel",this.onMouseWheel,{passive:!1}):n.addEventListener("wheel",this.onMouseWheel,p),window&&f.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,p),window.top.addEventListener("mouseup",this.onMouseUpWindow,p)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,p),window.addEventListener("mouseup",this.onMouseUpWindow,p),this.isTop=!1}x.pointerLock&&(this.pointerLockChange=function(v){var m=r.target;r.locked=document.pointerLockElement===m||document.mozPointerLockElement===m||document.webkitPointerLockElement===m,f.onPointerLockChange(v)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var n=this.target;n.removeEventListener("mousemove",this.onMouseMove),n.removeEventListener("mousedown",this.onMouseDown),n.removeEventListener("mouseup",this.onMouseUp),n.removeEventListener("mouseover",this.onMouseOver),n.removeEventListener("mouseout",this.onMouseOut),window&&(n=this.isTop?window.top:window,n.removeEventListener("mousedown",this.onMouseDownWindow),n.removeEventListener("mouseup",this.onMouseUpWindow)),x.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});l.exports=o},11343:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={MouseManager:e(7905)}},37579:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(33963),u=e(72283),h=new d({initialize:function(n){this.manager=n,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=u,this.onTouchStartWindow=u,this.onTouchMove=u,this.onTouchEnd=u,this.onTouchEndWindow=u,this.onTouchCancel=u,this.onTouchCancelWindow=u,this.isTop=!0,n.events.once(x.MANAGER_BOOT,this.boot,this)},boot:function(){var o=this.manager.config;this.enabled=o.inputTouch,this.target=o.inputTouchEventTarget,this.capture=o.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,o.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(o){return o.preventDefault(),!1}),this},startListeners:function(){var o=this.target;if(o){var n=this,r=this.manager,f=r.canvas,a=window&&window.focus&&r.game.config.autoFocus;this.onTouchMove=function(m){!m.defaultPrevented&&n.enabled&&r&&r.enabled&&(r.onTouchMove(m),n.capture&&m.cancelable&&m.preventDefault())},this.onTouchStart=function(m){a&&window.focus(),!m.defaultPrevented&&n.enabled&&r&&r.enabled&&(r.onTouchStart(m),n.capture&&m.cancelable&&m.target===f&&m.preventDefault())},this.onTouchStartWindow=function(m){!m.defaultPrevented&&n.enabled&&r&&r.enabled&&m.target!==f&&r.onTouchStart(m)},this.onTouchEnd=function(m){!m.defaultPrevented&&n.enabled&&r&&r.enabled&&(r.onTouchEnd(m),n.capture&&m.cancelable&&m.target===f&&m.preventDefault())},this.onTouchEndWindow=function(m){!m.defaultPrevented&&n.enabled&&r&&r.enabled&&m.target!==f&&r.onTouchEnd(m)},this.onTouchCancel=function(m){!m.defaultPrevented&&n.enabled&&r&&r.enabled&&(r.onTouchCancel(m),n.capture&&m.preventDefault())},this.onTouchCancelWindow=function(m){!m.defaultPrevented&&n.enabled&&r&&r.enabled&&r.onTouchCancel(m)};var c=this.capture,p={passive:!0},v={passive:!1};if(o.addEventListener("touchstart",this.onTouchStart,c?v:p),o.addEventListener("touchmove",this.onTouchMove,c?v:p),o.addEventListener("touchend",this.onTouchEnd,c?v:p),o.addEventListener("touchcancel",this.onTouchCancel,c?v:p),window&&r.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,v),window.top.addEventListener("touchend",this.onTouchEndWindow,v),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,v)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,v),window.addEventListener("touchend",this.onTouchEndWindow,v),window.addEventListener("touchcancel",this.onTouchCancelWindow,v),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var o=this.target;o.removeEventListener("touchstart",this.onTouchStart),o.removeEventListener("touchmove",this.onTouchMove),o.removeEventListener("touchend",this.onTouchEnd),o.removeEventListener("touchcancel",this.onTouchCancel),window&&(o=this.isTop?window.top:window,o.removeEventListener("touchstart",this.onTouchStartWindow),o.removeEventListener("touchend",this.onTouchEndWindow),o.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});l.exports=h},77423:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={TouchManager:e(37579)}},98035:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(683),h=e(72632),o=e(30750),n=e(43531),r=e(88490),f=e(33868),a=new d({initialize:function(p,v){if(this.loader=p,this.cache=h(v,"cache",!1),this.type=h(v,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=h(v,"key",!1);var m=this.key;if(p.prefix&&p.prefix!==""&&(this.key=p.prefix+m),!this.key)throw new Error("Invalid File key: "+this.key);var y=h(v,"url");y===void 0?y=p.path+m+"."+h(v,"extension",""):typeof y=="string"&&!y.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(y=p.path+y),this.url=y,this.src="",this.xhrSettings=f(h(v,"responseType",void 0)),h(v,"xhrSettings",!1)&&(this.xhrSettings=n(this.xhrSettings,h(v,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?x.FILE_POPULATED:x.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=h(v,"config",{}),this.multiFile,this.linkFile},setLink:function(c){this.linkFile=c,c.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===x.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=x.FILE_LOADING,this.src=o(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=r(this,this.loader.xhr))},onLoad:function(c,p){var v=c.responseURL&&this.loader.localSchemes.some(function(P){return c.responseURL.indexOf(P)===0}),m=v&&p.target.status===0,y=!(p.target&&p.target.status!==200)||m;c.readyState===4&&c.status>=400&&c.status<=599&&(y=!1),this.state=x.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,y)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(c){c.lengthComputable&&(this.bytesLoaded=c.loaded,this.bytesTotal=c.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(u.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=x.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=x.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=x.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(c){if(this.state!==x.FILE_PENDING_DESTROY){c===void 0&&(c=this.data);var p=this.key,v=this.type;this.loader.emit(u.FILE_COMPLETE,p,v,c),this.loader.emit(u.FILE_KEY_COMPLETE+v+"-"+p,p,v,c),this.loader.flagForRemoval(this),this.state=x.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});a.createObjectURL=function(c,p,v){if(typeof URL=="function")c.src=URL.createObjectURL(p);else{var m=new FileReader;m.onload=function(){c.removeAttribute("crossOrigin"),c.src="data:"+(p.type||v)+";base64,"+m.result.split(",")[1]},m.onerror=c.onerror,m.readAsDataURL(p)}},a.revokeObjectURL=function(c){typeof URL=="function"&&URL.revokeObjectURL(c.src)},l.exports=a},76846:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={},e={install:function(d){for(var x in T)d[x]=T[x]},register:function(d,x){T[d]=x},destroy:function(){T={}}};l.exports=e},30750:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.url?e.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?e.url:d+e.url:!1};l.exports=T},67285:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(58403),h=e(6659),o=e(683),n=e(76846),r=e(72632),f=e(10850),a=e(91963),c=e(7599),p=e(33868),v=new d({Extends:h,initialize:function(y){h.call(this);var P=y.sys.game.config,E=y.sys.settings.loader;this.scene=y,this.systems=y.sys,this.cacheManager=y.sys.cache,this.textureManager=y.sys.textures,this.sceneManager=y.sys.game.scene,n.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(r(E,"baseURL",P.loaderBaseURL)),this.setPath(r(E,"path",P.loaderPath)),this.setPrefix(r(E,"prefix",P.loaderPrefix)),this.maxParallelDownloads=r(E,"maxParallelDownloads",P.loaderMaxParallelDownloads),this.xhr=p(r(E,"responseType",P.loaderResponseType),r(E,"async",P.loaderAsync),r(E,"user",P.loaderUser),r(E,"password",P.loaderPassword),r(E,"timeout",P.loaderTimeout),r(E,"withCredentials",P.loaderWithCredentials)),this.crossOrigin=r(E,"crossOrigin",P.loaderCrossOrigin),this.imageLoadType=r(E,"imageLoadType",P.loaderImageLoadType),this.localSchemes=r(E,"localScheme",P.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new u,this.inflight=new u,this.queue=new u,this._deleteQueue=new u,this.totalFailed=0,this.totalComplete=0,this.state=x.LOADER_IDLE,this.multiKeyIndex=0,y.sys.events.once(c.BOOT,this.boot,this),y.sys.events.on(c.START,this.pluginStart,this)},boot:function(){this.systems.events.once(c.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(c.SHUTDOWN,this.shutdown,this)},setBaseURL:function(m){return m===void 0&&(m=""),m!==""&&m.substr(-1)!=="/"&&(m=m.concat("/")),this.baseURL=m,this},setPath:function(m){return m===void 0&&(m=""),m!==""&&m.substr(-1)!=="/"&&(m=m.concat("/")),this.path=m,this},setPrefix:function(m){return m===void 0&&(m=""),this.prefix=m,this},setCORS:function(m){return this.crossOrigin=m,this},addFile:function(m){Array.isArray(m)||(m=[m]);for(var y=0;y<m.length;y++){var P=m[y];this.keyExists(P)||(this.list.set(P),this.emit(o.ADD,P.key,P.type,this,P),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(m){var y=m.hasCacheConflict();return y||this.list.iterate(function(P){if(P.type===m.type&&P.key===m.key)return y=!0,!1}),!y&&this.isLoading()&&(this.inflight.iterate(function(P){if(P.type===m.type&&P.key===m.key)return y=!0,!1}),this.queue.iterate(function(P){if(P.type===m.type&&P.key===m.key)return y=!0,!1})),y},addPack:function(m,y){if(typeof y=="string"){var P=f(m,y);P&&(m={packKey:P})}var E=0,S=this.baseURL,w=this.path,R=this.prefix;for(var A in m)if(Object.prototype.hasOwnProperty.call(m,A)){var O=m[A],F=r(O,"baseURL",S),b=r(O,"path",w),D=r(O,"prefix",R),I=r(O,"files",null),B=r(O,"defaultType","void");if(Array.isArray(I)){this.setBaseURL(F),this.setPath(b),this.setPrefix(D);for(var k=0;k<I.length;k++){var U=I[k],X=U.hasOwnProperty("type")?U.type:B;this[X]&&(this[X](U),E++)}}}return this.setBaseURL(S),this.setPath(w),this.setPrefix(R),E>0},isLoading:function(){return this.state===x.LOADER_LOADING||this.state===x.LOADER_PROCESSING},isReady:function(){return this.state===x.LOADER_IDLE||this.state===x.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(o.START,this),this.list.size===0?this.loadComplete():(this.state=x.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(c.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(o.PROGRESS,this.progress)},update:function(){this.state===x.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(m){if((m.state===x.FILE_POPULATED||m.state===x.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(m),this.list.delete(m),m.crossOrigin||(m.crossOrigin=this.crossOrigin),m.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(m,y){this.inflight&&(this.inflight.delete(m),this.updateProgress(),y?(this.totalComplete++,this.queue.set(m),this.emit(o.FILE_LOAD,m),m.onProcess()):(this.totalFailed++,this._deleteQueue.set(m),this.emit(o.FILE_LOAD_ERROR,m),this.fileProcessComplete(m)))},fileProcessComplete:function(m){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(m.state===x.FILE_ERRORED?m.multiFile&&m.multiFile.onFileFailed(m):m.state===x.FILE_COMPLETE&&(m.multiFile?m.multiFile.isReadyToProcess()&&(m.multiFile.addToCache(),m.multiFile.pendingDestroy()):(m.addToCache(),m.pendingDestroy())),this.queue.delete(m),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(o.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=x.LOADER_COMPLETE,this.systems.events.off(c.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(o.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(m){this._deleteQueue.set(m)},saveJSON:function(m,y){return this.save(JSON.stringify(m),y)},save:function(m,y,P){y===void 0&&(y="file.json"),P===void 0&&(P="application/json");var E=new Blob([m],{type:P}),S=URL.createObjectURL(E),w=document.createElement("a");return w.download=y,w.textContent="Download "+y,w.href=S,w.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var m=this.systems.game.config,y=this.systems.settings.loader;this.setBaseURL(r(y,"baseURL",m.loaderBaseURL)),this.setPath(r(y,"path",m.loaderPath)),this.setPrefix(r(y,"prefix",m.loaderPrefix)),this.state=x.LOADER_IDLE},shutdown:function(){this.reset(),this.state=x.LOADER_SHUTDOWN,this.systems.events.off(c.UPDATE,this.update,this),this.systems.events.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=x.LOADER_DESTROYED,this.systems.events.off(c.UPDATE,this.update,this),this.systems.events.off(c.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});a.register("Loader",v,"load"),l.exports=v},43531:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(98611),x=e(33868),u=function(h,o){var n=h===void 0?x():d({},h);if(o)for(var r in o)o[r]!==void 0&&(n[r]=o[r]);return n};l.exports=u},45176:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(683),h=new d({initialize:function(n,r,f,a){var c=[];a.forEach(function(v){v&&c.push(v)}),this.loader=n,this.type=r,this.key=f,this.multiKeyIndex=n.multiKeyIndex++,this.files=c,this.state=x.FILE_PENDING,this.complete=!1,this.pending=c.length,this.failed=0,this.config={},this.baseURL=n.baseURL,this.path=n.path,this.prefix=n.prefix;for(var p=0;p<c.length;p++)c[p].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(o){return this.files.push(o),o.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(o){var n=this.files.indexOf(o);n!==-1&&this.pending--},onFileFailed:function(o){var n=this.files.indexOf(o);n!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,o.type,o.key))},pendingDestroy:function(){if(this.state!==x.FILE_PENDING_DESTROY){var o=this.key,n=this.type;this.loader.emit(u.FILE_COMPLETE,o,n),this.loader.emit(u.FILE_KEY_COMPLETE+n+"-"+o,o,n),this.loader.flagForRemoval(this);for(var r=0;r<this.files.length;r++)this.files[r].pendingDestroy();this.state=x.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});l.exports=h},88490:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(43531),x=function(u,h){var o=d(h,u.xhrSettings),n=new XMLHttpRequest;if(n.open("GET",u.src,o.async,o.user,o.password),n.responseType=u.xhrSettings.responseType,n.timeout=o.timeout,o.headers)for(var r in o.headers)n.setRequestHeader(r,o.headers[r]);return o.header&&o.headerValue&&n.setRequestHeader(o.header,o.headerValue),o.requestedWith&&n.setRequestHeader("X-Requested-With",o.requestedWith),o.overrideMimeType&&n.overrideMimeType(o.overrideMimeType),o.withCredentials&&(n.withCredentials=!0),n.onload=u.onLoad.bind(u,n),n.onerror=u.onError.bind(u,n),n.onprogress=u.onProgress.bind(u),n.send(),n};l.exports=x},33868:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,h,o){return e===void 0&&(e=""),d===void 0&&(d=!0),x===void 0&&(x=""),u===void 0&&(u=""),h===void 0&&(h=0),o===void 0&&(o=!1),{responseType:e,async:d,user:x,password:u,timeout:h,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:o}};l.exports=T},12117:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};l.exports=T},7398:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="addfile"},52187:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="complete"},36627:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="filecomplete"},81925:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="filecomplete-"},29774:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="loaderror"},20943:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="load"},74693:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="fileprogress"},71176:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="postprocess"},88984:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="progress"},72753:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="start"},683:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={ADD:e(7398),COMPLETE:e(52187),FILE_COMPLETE:e(36627),FILE_KEY_COMPLETE:e(81925),FILE_LOAD_ERROR:e(29774),FILE_LOAD:e(20943),FILE_PROGRESS:e(74693),POST_PROCESS:e(71176),PROGRESS:e(88984),START:e(72753)}},46468:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(76846),u=e(70806),h=e(683),o=new d({Extends:u,initialize:function(r,f,a,c,p){u.call(this,r,f,a,c,p),this.type="animationJSON"},onProcess:function(){this.loader.once(h.POST_PROCESS,this.onLoadComplete,this),u.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});x.register("animation",function(n,r,f,a){if(Array.isArray(n))for(var c=0;c<n.length;c++)this.addFile(new o(this,n[c]));else this.addFile(new o(this,n,r,a,f));return this}),l.exports=o},31648:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(76846),u=e(72632),h=e(42927),o=e(42911),n=e(70806),r=e(45176),f=new d({Extends:r,initialize:function(c,p,v,m,y,P){var E,S;if(o(p)){var w=p;p=u(w,"key"),E=new h(c,{key:p,url:u(w,"textureURL"),extension:u(w,"textureExtension","png"),normalMap:u(w,"normalMap"),xhrSettings:u(w,"textureXhrSettings")}),S=new n(c,{key:p,url:u(w,"atlasURL"),extension:u(w,"atlasExtension","json"),xhrSettings:u(w,"atlasXhrSettings")})}else E=new h(c,p,v,y),S=new n(c,p,m,P);E.linkFile?r.call(this,c,"atlasjson",p,[E,S,E.linkFile]):r.call(this,c,"atlasjson",p,[E,S])},addToCache:function(){if(this.isReadyToProcess()){var a=this.files[0],c=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(a.key,a.data,c.data,p),c.addToCache(),this.complete=!0}}});x.register("aseprite",function(a,c,p,v,m){var y;if(Array.isArray(a))for(var P=0;P<a.length;P++)y=new f(this,a[P]),this.addFile(y.files);else y=new f(this,a,c,p,v,m),this.addFile(y.files);return this}),l.exports=f},73152:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(76846),u=e(72632),h=e(42927),o=e(42911),n=e(70806),r=e(45176),f=new d({Extends:r,initialize:function(c,p,v,m,y,P){var E,S;if(o(p)){var w=p;p=u(w,"key"),E=new h(c,{key:p,url:u(w,"textureURL"),extension:u(w,"textureExtension","png"),normalMap:u(w,"normalMap"),xhrSettings:u(w,"textureXhrSettings")}),S=new n(c,{key:p,url:u(w,"atlasURL"),extension:u(w,"atlasExtension","json"),xhrSettings:u(w,"atlasXhrSettings")})}else E=new h(c,p,v,y),S=new n(c,p,m,P);E.linkFile?r.call(this,c,"atlasjson",p,[E,S,E.linkFile]):r.call(this,c,"atlasjson",p,[E,S])},addToCache:function(){if(this.isReadyToProcess()){var a=this.files[0],c=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(a.key,a.data,c.data,p),this.complete=!0}}});x.register("atlas",function(a,c,p,v,m){var y;if(Array.isArray(a))for(var P=0;P<a.length;P++)y=new f(this,a[P]),this.addFile(y.files);else y=new f(this,a,c,p,v,m),this.addFile(y.files);return this}),l.exports=f},24616:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(76846),u=e(72632),h=e(42927),o=e(42911),n=e(45176),r=e(15297),f=new d({Extends:n,initialize:function(c,p,v,m,y,P){var E,S;if(o(p)){var w=p;p=u(w,"key"),E=new h(c,{key:p,url:u(w,"textureURL"),extension:u(w,"textureExtension","png"),normalMap:u(w,"normalMap"),xhrSettings:u(w,"textureXhrSettings")}),S=new r(c,{key:p,url:u(w,"atlasURL"),extension:u(w,"atlasExtension","xml"),xhrSettings:u(w,"atlasXhrSettings")})}else E=new h(c,p,v,y),S=new r(c,p,m,P);E.linkFile?n.call(this,c,"atlasxml",p,[E,S,E.linkFile]):n.call(this,c,"atlasxml",p,[E,S])},addToCache:function(){if(this.isReadyToProcess()){var a=this.files[0],c=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(a.key,a.data,c.data,p),this.complete=!0}}});x.register("atlasXML",function(a,c,p,v,m){var y;if(Array.isArray(a))for(var P=0;P<a.length;P++)y=new f(this,a[P]),this.addFile(y.files);else y=new f(this,a,c,p,v,m),this.addFile(y.files);return this}),l.exports=f},67448:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),h=e(76846),o=e(72632),n=e(30929),r=e(42911),f=new d({Extends:u,initialize:function(c,p,v,m,y){if(r(p)){var P=p;p=o(P,"key"),m=o(P,"xhrSettings"),y=o(P,"context",y)}var E={type:"audio",cache:c.cacheManager.audio,extension:v.type,responseType:"arraybuffer",key:p,url:v.url,xhrSettings:m,config:{context:y}};u.call(this,c,E)},onProcess:function(){this.state=x.FILE_PROCESSING;var a=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(c){a.data=c,a.onProcessComplete()},function(c){console.error("Error decoding audio: "+a.key+" - ",c?c.message:null),a.onProcessError()}),this.config.context=null}});f.create=function(a,c,p,v,m){var y=a.systems.game,P=y.config.audio,E=y.device.audio;r(c)&&(p=o(c,"url",[]),v=o(c,"config",{}));var S=f.getAudioURL(y,p);return S?E.webAudio&&!P.disableWebAudio?new f(a,c,S,m,y.sound.context):new n(a,c,S,v):(console.warn('No audio URLs for "%s" matched this device',c),null)},f.getAudioURL=function(a,c){Array.isArray(c)||(c=[c]);for(var p=0;p<c.length;p++){var v=o(c[p],"url",c[p]);if(v.indexOf("blob:")===0||v.indexOf("data:")===0)return{url:v,type:""};var m=v.match(/\.([a-zA-Z0-9]+)($|\?)/);if(m=o(c[p],"type",m?m[1]:"").toLowerCase(),a.device.audio[m])return{url:v,type:m}}return null},h.register("audio",function(a,c,p,v){var m=this.systems.game,y=m.config.audio,P=m.device.audio;if(y.noAudio||!P.webAudio&&!P.audioData)return this;var E;if(Array.isArray(a))for(var S=0;S<a.length;S++)E=f.create(this,a[S]),E&&this.addFile(E);else E=f.create(this,a,c,p,v),E&&this.addFile(E);return this}),l.exports=f},66109:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(67448),x=e(56694),u=e(76846),h=e(72632),o=e(42911),n=e(70806),r=e(45176),f=new x({Extends:r,initialize:function(c,p,v,m,y,P,E){if(o(p)){var S=p;p=h(S,"key"),v=h(S,"jsonURL"),m=h(S,"audioURL"),y=h(S,"audioConfig"),P=h(S,"audioXhrSettings"),E=h(S,"jsonXhrSettings")}var w;if(!m)w=new n(c,p,v,E),r.call(this,c,"audiosprite",p,[w]),this.config.resourceLoad=!0,this.config.audioConfig=y,this.config.audioXhrSettings=P;else{var R=d.create(c,p,m,y,P);R&&(w=new n(c,p,v,E),r.call(this,c,"audiosprite",p,[R,w]),this.config.resourceLoad=!1)}},onFileComplete:function(a){var c=this.files.indexOf(a);if(c!==-1&&(this.pending--,this.config.resourceLoad&&a.type==="json"&&a.data.hasOwnProperty("resources"))){var p=a.data.resources,v=h(this.config,"audioConfig"),m=h(this.config,"audioXhrSettings"),y=d.create(this.loader,a.key,p,v,m);y&&(this.addToMultiFile(y),this.loader.addFile(y))}},addToCache:function(){if(this.isReadyToProcess()){var a=this.files[0],c=this.files[1];a.addToCache(),c.addToCache(),this.complete=!0}}});u.register("audioSprite",function(a,c,p,v,m,y){var P=this.systems.game,E=P.config.audio,S=P.device.audio;if(E&&E.noAudio||!S.webAudio&&!S.audioData)return this;var w;if(Array.isArray(a))for(var R=0;R<a.length;R++)w=new f(this,a[R]),w.files&&this.addFile(w.files);else w=new f(this,a,c,p,v,m,y),w.files&&this.addFile(w.files);return this})},40612:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),h=e(76846),o=e(72632),n=e(42911),r=new d({Extends:u,initialize:function(a,c,p,v,m){var y="bin";if(n(c)){var P=c;c=o(P,"key"),p=o(P,"url"),v=o(P,"xhrSettings"),y=o(P,"extension",y),m=o(P,"dataType",m)}var E={type:"binary",cache:a.cacheManager.binary,extension:y,responseType:"arraybuffer",key:c,url:p,xhrSettings:v,config:{dataType:m}};u.call(this,a,E)},onProcess:function(){this.state=x.FILE_PROCESSING;var f=this.config.dataType;this.data=f?new f(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});h.register("binary",function(f,a,c,p){if(Array.isArray(f))for(var v=0;v<f.length;v++)this.addFile(new r(this,f[v]));else this.addFile(new r(this,f,a,p,c));return this}),l.exports=r},54565:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(76846),u=e(72632),h=e(42927),o=e(42911),n=e(45176),r=e(31476),f=e(15297),a=new d({Extends:n,initialize:function(p,v,m,y,P,E){var S,w;if(o(v)){var R=v;v=u(R,"key"),S=new h(p,{key:v,url:u(R,"textureURL"),extension:u(R,"textureExtension","png"),normalMap:u(R,"normalMap"),xhrSettings:u(R,"textureXhrSettings")}),w=new f(p,{key:v,url:u(R,"fontDataURL"),extension:u(R,"fontDataExtension","xml"),xhrSettings:u(R,"fontDataXhrSettings")})}else S=new h(p,v,m,P),w=new f(p,v,y,E);S.linkFile?n.call(this,p,"bitmapfont",v,[S,w,S.linkFile]):n.call(this,p,"bitmapfont",v,[S,w])},addToCache:function(){if(this.isReadyToProcess()){var c=this.files[0],p=this.files[1];c.addToCache();var v=c.cache.get(c.key),m=r(p.data,c.cache.getFrame(c.key),0,0,v);this.loader.cacheManager.bitmapFont.add(c.key,{data:m,texture:c.key,frame:null}),this.complete=!0}}});x.register("bitmapFont",function(c,p,v,m,y){var P;if(Array.isArray(c))for(var E=0;E<c.length;E++)P=new a(this,c[E]),this.addFile(P.files);else P=new a(this,c,p,v,m,y),this.addFile(P.files);return this}),l.exports=a},99898:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),h=e(76846),o=e(72632),n=e(42911),r=new d({Extends:u,initialize:function(a,c,p,v){var m="css";if(n(c)){var y=c;c=o(y,"key"),p=o(y,"url"),v=o(y,"xhrSettings"),m=o(y,"extension",m)}var P={type:"script",cache:!1,extension:m,responseType:"text",key:c,url:p,xhrSettings:v};u.call(this,a,P)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});h.register("css",function(f,a,c){if(Array.isArray(f))for(var p=0;p<f.length;p++)this.addFile(new r(this,f[p]));else this.addFile(new r(this,f,a,c));return this}),l.exports=r},47375:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73152),x=e(40612),u=e(56694),h=e(76846),o=e(72632),n=e(42927),r=e(42911),f=e(70806),a=e(67409),c=e(30657),p=e(80802),v=e(45176),m=e(24904),y=new u({Extends:v,initialize:function(E,S,w,R){if(w.multiAtlasURL){var A=new f(E,{key:S,url:w.multiAtlasURL,xhrSettings:R,config:w});v.call(this,E,"texture",S,[A])}else{var O=w.textureURL.substr(w.textureURL.length-3);w.type||(w.type=O.toLowerCase()==="ktx"?"KTX":"PVR");var F=new x(E,{key:S,url:w.textureURL,extension:O,xhrSettings:R,config:w});if(w.atlasURL){var b=new f(E,{key:S,url:w.atlasURL,xhrSettings:R,config:w});v.call(this,E,"texture",S,[F,b])}else v.call(this,E,"texture",S,[F])}this.config=w},onFileComplete:function(P){var E=this.files.indexOf(P);if(E!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(P.type==="json"&&P.data.hasOwnProperty("textures")){var S=P.data.textures,w=this.config,R=this.loader,A=R.baseURL,O=R.path,F=R.prefix,b=o(w,"multiBaseURL",this.baseURL),D=o(w,"multiPath",this.path),I=o(w,"prefix",this.prefix),B=o(w,"textureXhrSettings");b&&R.setBaseURL(b),D&&R.setPath(D),I&&R.setPrefix(I);for(var k=0;k<S.length;k++){var U=S[k].image,X="CMA"+this.multiKeyIndex+"_"+U,H=new x(R,X,U,B);if(this.addToMultiFile(H),R.addFile(H),S[k].normalMap){var N=new x(R,X,S[k].normalMap,B);N.type="normalMap",H.setLink(N),this.addToMultiFile(N),R.addFile(N)}}R.setBaseURL(A),R.setPath(O),R.setPrefix(F)}}},addToCache:function(){if(this.isReadyToProcess()){var P=this.config;if(P.multiAtlasURL)this.addMultiToCache();else{var E=this.loader.systems.renderer,S=this.loader.textureManager,w,R=this.files[0],A=this.files[1];if(P.type==="PVR"?w=m(R.data):P.type==="KTX"&&(w=a(R.data)),w&&E.supportsCompressedTexture(P.format,w.internalFormat)){w.format=E.getCompressedTextureName(P.format,w.internalFormat);var O=A&&A.data?A.data:null;S.addCompressedTexture(R.key,w,O)}}this.complete=!0}},addMultiToCache:function(){for(var P=this.config,E=this.files[0],S=[],w=[],R=[],A=this.loader.systems.renderer,O=this.loader.textureManager,F,b=1;b<this.files.length;b++){var D=this.files[b];if(D.type!=="normalMap")for(var I=D.key.indexOf("_"),B=D.key.substr(I+1),k=D.data,U=0;U<E.data.textures.length;U++){var X=E.data.textures[U];if(X.image===B){P.type==="PVR"?F=m(k):P.type==="KTX"&&(F=a(k)),F&&A.supportsCompressedTexture(P.format,F.internalFormat)&&(F.format=A.getCompressedTextureName(P.format,F.internalFormat),w.push(F),S.push(X),D.linkFile&&R.push(D.linkFile.data));break}}}R.length===0&&(R=void 0),O.addAtlasJSONArray(this.key,w,S,R),this.complete=!0}});h.register("texture",function(P,E,S){var w=this.systems.renderer,R=function(O,F,b,D){var I={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(r(F)){var B=F;F=o(B,"key"),b=o(B,"url"),D=o(B,"xhrSettings")}var k=!1;for(var U in b)if(w.supportsCompressedTexture(U)){var X=b[U];typeof X=="string"?I.textureURL=X:I=c(X,I),I.format=U.toUpperCase(),k=!0;break}if(!k)console.warn("No supported compressed texture format or IMG fallback",F);else if(I.format==="IMG"){var H,N;I.multiAtlasURL?(N=new p(O,F,I.multiAtlasURL,I.multiPath,I.multiBaseURL,D),H=N.files):I.atlasURL?(N=new d(O,F,I.textureURL,I.atlasURL,D),H=N.files):H=new n(O,F,I.textureURL,D),O.addFile(H)}else{var z=new y(O,F,I,D);O.addFile(z.files)}};if(Array.isArray(P))for(var A=0;A<P.length;A++)R(this,P[A]);else R(this,P,E,S);return this}),l.exports=y},46568:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),h=e(76846),o=e(72632),n=e(42911),r=e(31053),f=new d({Extends:u,initialize:function(c,p,v,m,y){var P="glsl";if(n(p)){var E=p;p=o(E,"key"),v=o(E,"url"),m=o(E,"shaderType","fragment"),y=o(E,"xhrSettings"),P=o(E,"extension",P)}else m===void 0&&(m="fragment");var S={type:"glsl",cache:c.cacheManager.shader,extension:P,responseType:"text",key:p,url:v,config:{shaderType:m},xhrSettings:y};u.call(this,c,S)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var a=this.data.split(`
`),c=this.extractBlock(a,0);if(c)for(;c;){var p=this.getShaderName(c.header),v=this.getShaderType(c.header),m=this.getShaderUniforms(c.header),y=c.shader;if(this.cache.has(p)){var P=this.cache.get(p);v==="fragment"?P.fragmentSrc=y:P.vertexSrc=y,P.uniforms||(P.uniforms=m)}else v==="fragment"?this.cache.add(p,new r(p,y,"",m)):this.cache.add(p,new r(p,"",y,m));c=this.extractBlock(a,c.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new r(this.key,this.data)):this.cache.add(this.key,new r(this.key,"",this.data))},getShaderName:function(a){for(var c=0;c<a.length;c++){var p=a[c].trim();if(p.substring(0,5)==="name:")return p.substring(5).trim()}return this.key},getShaderType:function(a){for(var c=0;c<a.length;c++){var p=a[c].trim();if(p.substring(0,5)==="type:")return p.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(a){for(var c={},p=0;p<a.length;p++){var v=a[p].trim();if(v.substring(0,8)==="uniform."){var m=v.indexOf(":");if(m){var y=v.substring(8,m);try{c[y]=JSON.parse(v.substring(m+1))}catch{console.warn("Invalid uniform JSON: "+y)}}}}return c},extractBlock:function(a,c){for(var p=-1,v=-1,m=-1,y=!1,P=!1,E=[],S=[],w=c;w<a.length;w++){var R=a[w].trim();if(R==="---")if(p===-1)p=w,y=!0;else if(y)v=w,y=!1,P=!0;else{P=!1;break}else y?E.push(R):P&&(S.push(R),m=w)}return!y&&v!==-1?{header:E,shader:S.join(`
`),offset:m}:null}});h.register("glsl",function(a,c,p,v){if(Array.isArray(a))for(var m=0;m<a.length;m++)this.addFile(new f(this,a[m]));else this.addFile(new f(this,a,c,p,v));return this}),l.exports=f},30929:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(683),u=e(98035),h=e(72632),o=e(30750),n=e(42911),r=new d({Extends:u,initialize:function(a,c,p,v){if(n(c)){var m=c;c=h(m,"key"),v=h(m,"config",v)}var y={type:"audio",cache:a.cacheManager.audio,extension:p.type,key:c,url:p.url,config:v};u.call(this,a,y),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var f=0;f<this.data.length;f++){var a=this.data[f];a.oncanplaythrough=null,a.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(f){var a=f.target;a.oncanplaythrough=null,a.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(x.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var f=this.config&&this.config.instances||1;this.filesTotal=f,this.filesLoaded=0,this.percentComplete=0;for(var a=0;a<f;a++){var c=new Audio;c.dataset||(c.dataset={}),c.dataset.name=this.key+("0"+a).slice(-2),c.dataset.used="false",this.locked?c.dataset.locked="true":(c.dataset.locked="false",c.preload="auto",c.oncanplaythrough=this.onProgress.bind(this),c.onerror=this.onError.bind(this)),this.data.push(c)}for(a=0;a<this.data.length;a++)c=this.data[a],c.src=o(this,this.loader.baseURL),this.locked||c.load();this.locked&&setTimeout(this.onLoad.bind(this))}});l.exports=r},77459:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),h=e(76846),o=e(72632),n=e(42911),r=new d({Extends:u,initialize:function(a,c,p,v){var m="html";if(n(c)){var y=c;c=o(y,"key"),p=o(y,"url"),v=o(y,"xhrSettings"),m=o(y,"extension",m)}var P={type:"text",cache:a.cacheManager.html,extension:m,responseType:"text",key:c,url:p,xhrSettings:v};u.call(this,a,P)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});h.register("html",function(f,a,c){if(Array.isArray(f))for(var p=0;p<f.length;p++)this.addFile(new r(this,f[p]));else this.addFile(new r(this,f,a,c));return this}),l.exports=r},9755:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),h=e(76846),o=e(72632),n=e(42911),r=new d({Extends:u,initialize:function(a,c,p,v,m,y){v===void 0&&(v=512),m===void 0&&(m=512);var P="html";if(n(c)){var E=c;c=o(E,"key"),p=o(E,"url"),y=o(E,"xhrSettings"),P=o(E,"extension",P),v=o(E,"width",v),m=o(E,"height",m)}var S={type:"html",cache:a.textureManager,extension:P,responseType:"text",key:c,url:p,xhrSettings:y,config:{width:v,height:m}};u.call(this,a,S)},onProcess:function(){this.state=x.FILE_PROCESSING;var f=this.config.width,a=this.config.height,c=[];c.push('<svg width="'+f+'px" height="'+a+'px" viewBox="0 0 '+f+" "+a+'" xmlns="http://www.w3.org/2000/svg">'),c.push('<foreignObject width="100%" height="100%">'),c.push('<body xmlns="http://www.w3.org/1999/xhtml">'),c.push(this.xhrLoader.responseText),c.push("</body>"),c.push("</foreignObject>"),c.push("</svg>");var p=[c.join(`
`)],v=this;try{var m=new window.Blob(p,{type:"image/svg+xml;charset=utf-8"})}catch{v.state=x.FILE_ERRORED,v.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){u.revokeObjectURL(v.data),v.onProcessComplete()},this.data.onerror=function(){u.revokeObjectURL(v.data),v.onProcessError()},u.createObjectURL(this.data,m,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});h.register("htmlTexture",function(f,a,c,p,v){if(Array.isArray(f))for(var m=0;m<f.length;m++)this.addFile(new r(this,f[m]));else this.addFile(new r(this,f,a,c,p,v));return this}),l.exports=r},42927:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),h=e(76846),o=e(72632),n=e(42911),r=e(30750),f=new d({Extends:u,initialize:function a(c,p,v,m,y){var P="png",E;if(n(p)){var S=p;p=o(S,"key"),v=o(S,"url"),E=o(S,"normalMap"),m=o(S,"xhrSettings"),P=o(S,"extension",P),y=o(S,"frameConfig")}Array.isArray(v)&&(E=v[1],v=v[0]);var w={type:"image",cache:c.textureManager,extension:P,responseType:"blob",key:p,url:v,xhrSettings:m,config:y};if(u.call(this,c,w),E){var R=new a(c,this.key,E,m,y);R.type="normalMap",this.setLink(R),c.addFile(R)}this.useImageElementLoad=c.imageLoadType==="HTMLImageElement",this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var a=this;this.data.onload=function(){u.revokeObjectURL(a.data),a.onProcessComplete()},this.data.onerror=function(){u.revokeObjectURL(a.data),a.onProcessError()},u.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var a=this.state;this.state=x.FILE_PROCESSING,a===x.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){if(this.state=x.FILE_LOADING,this.src=r(this,this.loader.baseURL),this.src.indexOf("data:")===0)console.warn("Local data URIs are not supported: "+this.key);else{this.data=new Image,this.data.crossOrigin=this.crossOrigin;var a=this;this.data.onload=function(){a.state=x.FILE_LOADED,a.loader.nextFile(a,!0)},this.data.onerror=function(){a.loader.nextFile(a,!1)},this.data.src=this.src}},addToCache:function(){var a=this.linkFile;a?a.state>=x.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addImage(this.key,a.data,this.data):this.cache.addImage(this.key,this.data,a.data)):this.cache.addImage(this.key,this.data)}});h.register("image",function(a,c,p){if(Array.isArray(a))for(var v=0;v<a.length;v++)this.addFile(new f(this,a[v]));else this.addFile(new f(this,a,c,p));return this}),l.exports=f},70806:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),h=e(76846),o=e(72632),n=e(10850),r=e(42911),f=new d({Extends:u,initialize:function(c,p,v,m,y){var P="json";if(r(p)){var E=p;p=o(E,"key"),v=o(E,"url"),m=o(E,"xhrSettings"),P=o(E,"extension",P),y=o(E,"dataKey",y)}var S={type:"json",cache:c.cacheManager.json,extension:P,responseType:"text",key:p,url:v,xhrSettings:m,config:y};u.call(this,c,S),r(v)&&(y?this.data=n(v,y):this.data=v,this.state=x.FILE_POPULATED)},onProcess:function(){if(this.state!==x.FILE_POPULATED){this.state=x.FILE_PROCESSING;try{var a=JSON.parse(this.xhrLoader.responseText)}catch(p){throw this.onProcessError(),p}var c=this.config;typeof c=="string"?this.data=n(a,c,a):this.data=a}this.onProcessComplete()}});h.register("json",function(a,c,p,v){if(Array.isArray(a))for(var m=0;m<a.length;m++)this.addFile(new f(this,a[m]));else this.addFile(new f(this,a,c,v,p));return this}),l.exports=f},80802:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(76846),u=e(72632),h=e(42927),o=e(42911),n=e(70806),r=e(45176),f=new d({Extends:r,initialize:function(c,p,v,m,y,P,E){if(o(p)){var S=p;p=u(S,"key"),u(S,"url",!1)?v=u(S,"url"):v=u(S,"atlasURL"),P=u(S,"xhrSettings"),m=u(S,"path"),y=u(S,"baseURL"),E=u(S,"textureXhrSettings")}var w=new n(c,p,v,P);r.call(this,c,"multiatlas",p,[w]),this.config.path=m,this.config.baseURL=y,this.config.textureXhrSettings=E},onFileComplete:function(a){var c=this.files.indexOf(a);if(c!==-1&&(this.pending--,a.type==="json"&&a.data.hasOwnProperty("textures"))){var p=a.data.textures,v=this.config,m=this.loader,y=m.baseURL,P=m.path,E=m.prefix,S=u(v,"baseURL",this.baseURL),w=u(v,"path",this.path),R=u(v,"prefix",this.prefix),A=u(v,"textureXhrSettings");m.setBaseURL(S),m.setPath(w),m.setPrefix(R);for(var O=0;O<p.length;O++){var F=p[O].image,b="MA"+this.multiKeyIndex+"_"+F,D=new h(m,b,F,A);if(this.addToMultiFile(D),m.addFile(D),p[O].normalMap){var I=new h(m,b,p[O].normalMap,A);I.type="normalMap",D.setLink(I),this.addToMultiFile(I),m.addFile(I)}}m.setBaseURL(y),m.setPath(P),m.setPrefix(E)}},addToCache:function(){if(this.isReadyToProcess()){for(var a=this.files[0],c=[],p=[],v=[],m=1;m<this.files.length;m++){var y=this.files[m];if(y.type!=="normalMap")for(var P=y.key.indexOf("_"),E=y.key.substr(P+1),S=y.data,w=0;w<a.data.textures.length;w++){var R=a.data.textures[w];if(R.image===E){p.push(S),c.push(R),y.linkFile&&v.push(y.linkFile.data);break}}}v.length===0&&(v=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,p,c,v),this.complete=!0}}});x.register("multiatlas",function(a,c,p,v,m){var y;if(Array.isArray(a))for(var P=0;P<a.length;P++)y=new f(this,a[P]),this.addFile(y.files);else y=new f(this,a,c,p,v,m),this.addFile(y.files);return this}),l.exports=f},39034:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(76846),u=e(72632),h=e(42911),o=e(45176),n=e(55188),r=new d({Extends:o,initialize:function(a,c,p,v){var m="js",y=[];if(h(c)){var P=c;c=u(P,"key"),p=u(P,"url"),v=u(P,"xhrSettings"),m=u(P,"extension",m)}Array.isArray(p)||(p=[p]);for(var E=0;E<p.length;E++){var S=new n(a,{key:c+"_"+E.toString(),url:p[E],extension:m,xhrSettings:v});S.onProcess=function(){this.onProcessComplete()},y.push(S)}o.call(this,a,"scripts",c,y)},addToCache:function(){if(this.isReadyToProcess()){for(var f=0;f<this.files.length;f++){var a=this.files[f];a.data=document.createElement("script"),a.data.language="javascript",a.data.type="text/javascript",a.data.defer=!1,a.data.text=a.xhrLoader.responseText,document.head.appendChild(a.data)}this.complete=!0}}});x.register("scripts",function(f,a,c){var p;if(Array.isArray(f))for(var v=0;v<f.length;v++)p=new r(this,f[v]),this.addFile(p.files);else p=new r(this,f,a,c),this.addFile(p.files);return this}),l.exports=r},85527:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(76846),u=e(72632),h=e(42911),o=e(45176),n=e(27291),r=e(76799),f=e(86897),a=new d({Extends:o,initialize:function(p,v,m,y,P,E){var S,w,R=p.cacheManager.obj;if(h(v)){var A=v;v=u(A,"key"),S=new f(p,{key:v,type:"obj",cache:R,url:u(A,"url"),extension:u(A,"extension","obj"),xhrSettings:u(A,"xhrSettings"),config:{flipUV:u(A,"flipUV",P)}}),y=u(A,"matURL"),y&&(w=new f(p,{key:v,type:"mat",cache:R,url:y,extension:u(A,"matExtension","mat"),xhrSettings:u(A,"xhrSettings")}))}else S=new f(p,{key:v,url:m,type:"obj",cache:R,extension:"obj",xhrSettings:E,config:{flipUV:P}}),y&&(w=new f(p,{key:v,url:y,type:"mat",cache:R,extension:"mat",xhrSettings:E}));o.call(this,p,"obj",v,[S,w])},addToCache:function(){if(this.isReadyToProcess()){var c=this.files[0],p=this.files[1],v=n(c.data,c.config.flipUV);p&&(v.materials=r(p.data)),c.cache.add(c.key,v),this.complete=!0}}});x.register("obj",function(c,p,v,m,y){var P;if(Array.isArray(c))for(var E=0;E<c.length;E++)P=new a(this,c[E]),this.addFile(P.files);else P=new a(this,c,p,v,m,y),this.addFile(P.files);return this}),l.exports=a},3616:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(76846),h=e(70806),o=new d({Extends:h,initialize:function(r,f,a,c,p){h.call(this,r,f,a,c,p),this.type="packfile"},onProcess:function(){if(this.state!==x.FILE_POPULATED&&(this.state=x.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var n={};n[this.config]=this.data,this.data=n}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});u.register("pack",function(n,r,f,a){if(Array.isArray(n))for(var c=0;c<n.length;c++)this.addFile(new o(this,n[c]));else this.addFile(new o(this,n,r,a,f));return this}),l.exports=o},12217:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),h=e(76846),o=e(72632),n=e(42911),r=new d({Extends:u,initialize:function(a,c,p,v,m,y){var P="js";if(n(c)){var E=c;c=o(E,"key"),p=o(E,"url"),y=o(E,"xhrSettings"),P=o(E,"extension",P),v=o(E,"start"),m=o(E,"mapping")}var S={type:"plugin",cache:!1,extension:P,responseType:"text",key:c,url:p,xhrSettings:y,config:{start:v,mapping:m}};u.call(this,a,S),typeof p=="function"&&(this.data=p,this.state=x.FILE_POPULATED)},onProcess:function(){var f=this.loader.systems.plugins,a=this.config,c=o(a,"start",!1),p=o(a,"mapping",null);if(this.state===x.FILE_POPULATED)f.install(this.key,this.data,c,p);else{this.state=x.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var v=f.install(this.key,window[this.key],c,p);(c||p)&&(this.loader.systems[p]=v,this.loader.scene[p]=v)}this.onProcessComplete()}});h.register("plugin",function(f,a,c,p,v){if(Array.isArray(f))for(var m=0;m<f.length;m++)this.addFile(new r(this,f[m]));else this.addFile(new r(this,f,a,c,p,v));return this}),l.exports=r},4474:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),h=e(76846),o=e(72632),n=e(42911),r=new d({Extends:u,initialize:function(a,c,p,v,m){var y="svg";if(n(c)){var P=c;c=o(P,"key"),p=o(P,"url"),v=o(P,"svgConfig",{}),m=o(P,"xhrSettings"),y=o(P,"extension",y)}var E={type:"svg",cache:a.textureManager,extension:y,responseType:"text",key:c,url:p,xhrSettings:m,config:{width:o(v,"width"),height:o(v,"height"),scale:o(v,"scale")}};u.call(this,a,E)},onProcess:function(){this.state=x.FILE_PROCESSING;var f=this.xhrLoader.responseText,a=[f],c=this.config.width,p=this.config.height,v=this.config.scale;t:if(c&&p||v){var m=null,y=new DOMParser;m=y.parseFromString(f,"text/xml");var P=m.getElementsByTagName("svg")[0],E=P.hasAttribute("viewBox"),S=parseFloat(P.getAttribute("width")),w=parseFloat(P.getAttribute("height"));if(!E&&S&&w)P.setAttribute("viewBox","0  0 "+S+" "+w);else if(E&&!S&&!w){var R=P.getAttribute("viewBox").split(/\s+|,/);S=R[2],w=R[3]}if(v)if(S&&w)c=S*v,p=w*v;else break t;P.setAttribute("width",c.toString()+"px"),P.setAttribute("height",p.toString()+"px"),a=[new XMLSerializer().serializeToString(P)]}try{var A=new window.Blob(a,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var O=this,F=!1;this.data.onload=function(){F||u.revokeObjectURL(O.data),O.onProcessComplete()},this.data.onerror=function(){F?O.onProcessError():(F=!0,u.revokeObjectURL(O.data),O.data.src="data:image/svg+xml,"+encodeURIComponent(a.join("")))},u.createObjectURL(this.data,A,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});h.register("svg",function(f,a,c,p){if(Array.isArray(f))for(var v=0;v<f.length;v++)this.addFile(new r(this,f[v]));else this.addFile(new r(this,f,a,c,p));return this}),l.exports=r},95171:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),h=e(76846),o=e(72632),n=e(42911),r=new d({Extends:u,initialize:function(a,c,p,v){var m="js";if(n(c)){var y=c;c=o(y,"key"),p=o(y,"url"),v=o(y,"xhrSettings"),m=o(y,"extension",m)}var P={type:"text",extension:m,responseType:"text",key:c,url:p,xhrSettings:v};u.call(this,a,P)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var f=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),a=eval;this.loader.sceneManager.add(this.key,a(f)),this.complete=!0}});h.register("sceneFile",function(f,a,c){if(Array.isArray(f))for(var p=0;p<f.length;p++)this.addFile(new r(this,f[p]));else this.addFile(new r(this,f,a,c));return this}),l.exports=r},82458:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),h=e(76846),o=e(72632),n=e(42911),r=new d({Extends:u,initialize:function(a,c,p,v,m,y){var P="js";if(n(c)){var E=c;c=o(E,"key"),p=o(E,"url"),y=o(E,"xhrSettings"),P=o(E,"extension",P),v=o(E,"systemKey"),m=o(E,"sceneKey")}var S={type:"scenePlugin",cache:!1,extension:P,responseType:"text",key:c,url:p,xhrSettings:y,config:{systemKey:v,sceneKey:m}};u.call(this,a,S),typeof p=="function"&&(this.data=p,this.state=x.FILE_POPULATED)},onProcess:function(){var f=this.loader.systems.plugins,a=this.config,c=this.key,p=o(a,"systemKey",c),v=o(a,"sceneKey",c);this.state===x.FILE_POPULATED?f.installScenePlugin(p,this.data,v,this.loader.scene,!0):(this.state=x.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),f.installScenePlugin(p,window[this.key],v,this.loader.scene,!0)),this.onProcessComplete()}});h.register("scenePlugin",function(f,a,c,p,v){if(Array.isArray(f))for(var m=0;m<f.length;m++)this.addFile(new r(this,f[m]));else this.addFile(new r(this,f,a,c,p,v));return this}),l.exports=r},55188:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),h=e(76846),o=e(72632),n=e(42911),r=new d({Extends:u,initialize:function(a,c,p,v,m){var y="js";if(n(c)){var P=c;c=o(P,"key"),p=o(P,"url"),v=o(P,"type","script"),m=o(P,"xhrSettings"),y=o(P,"extension",y)}else v===void 0&&(v="script");var E={type:v,cache:!1,extension:y,responseType:"text",key:c,url:p,xhrSettings:m};u.call(this,a,E)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});h.register("script",function(f,a,c,p){if(Array.isArray(f))for(var v=0;v<f.length;v++)this.addFile(new r(this,f[v]));else this.addFile(new r(this,f,a,c,p));return this}),l.exports=r},33536:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(76846),h=e(42927),o=new d({Extends:h,initialize:function(r,f,a,c,p){h.call(this,r,f,a,p,c),this.type="spritesheet"},addToCache:function(){var n=this.linkFile;n?n.state>=x.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,n.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,n.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});u.register("spritesheet",function(n,r,f,a){if(Array.isArray(n))for(var c=0;c<n.length;c++)this.addFile(new o(this,n[c]));else this.addFile(new o(this,n,r,f,a));return this}),l.exports=o},86897:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),h=e(76846),o=e(72632),n=e(42911),r=new d({Extends:u,initialize:function(a,c,p,v){var m="text",y="txt",P=a.cacheManager.text;if(n(c)){var E=c;c=o(E,"key"),p=o(E,"url"),v=o(E,"xhrSettings"),y=o(E,"extension",y),m=o(E,"type",m),P=o(E,"cache",P)}var S={type:m,cache:P,extension:y,responseType:"text",key:c,url:p,xhrSettings:v};u.call(this,a,S)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});h.register("text",function(f,a,c){if(Array.isArray(f))for(var p=0;p<f.length;p++)this.addFile(new r(this,f[p]));else this.addFile(new r(this,f,a,c));return this}),l.exports=r},58673:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),h=e(76846),o=e(72632),n=e(42911),r=e(93560),f=new d({Extends:u,initialize:function(c,p,v,m){var y="csv";if(n(p)){var P=p;p=o(P,"key"),v=o(P,"url"),m=o(P,"xhrSettings"),y=o(P,"extension",y)}var E={type:"tilemapCSV",cache:c.cacheManager.tilemap,extension:y,responseType:"text",key:p,url:v,xhrSettings:m};u.call(this,c,E),this.tilemapFormat=r.CSV},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var a={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,a)}});h.register("tilemapCSV",function(a,c,p){if(Array.isArray(a))for(var v=0;v<a.length;v++)this.addFile(new f(this,a[v]));else this.addFile(new f(this,a,c,p));return this}),l.exports=f},98896:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(76846),u=e(70806),h=e(93560),o=new d({Extends:u,initialize:function(r,f,a,c){u.call(this,r,f,a,c),this.type="tilemapJSON",this.cache=r.cacheManager.tilemap},addToCache:function(){var n={format:h.WELTMEISTER,data:this.data};this.cache.add(this.key,n)}});x.register("tilemapImpact",function(n,r,f){if(Array.isArray(n))for(var a=0;a<n.length;a++)this.addFile(new o(this,n[a]));else this.addFile(new o(this,n,r,f));return this}),l.exports=o},50563:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(76846),u=e(70806),h=e(93560),o=new d({Extends:u,initialize:function(r,f,a,c){u.call(this,r,f,a,c),this.type="tilemapJSON",this.cache=r.cacheManager.tilemap},addToCache:function(){var n={format:h.TILED_JSON,data:this.data};this.cache.add(this.key,n)}});x.register("tilemapTiledJSON",function(n,r,f){if(Array.isArray(n))for(var a=0;a<n.length;a++)this.addFile(new o(this,n[a]));else this.addFile(new o(this,n,r,f));return this}),l.exports=o},82857:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(76846),u=e(72632),h=e(42927),o=e(42911),n=e(45176),r=e(86897),f=new d({Extends:n,initialize:function(c,p,v,m,y,P){var E,S;if(o(p)){var w=p;p=u(w,"key"),E=new h(c,{key:p,url:u(w,"textureURL"),extension:u(w,"textureExtension","png"),normalMap:u(w,"normalMap"),xhrSettings:u(w,"textureXhrSettings")}),S=new r(c,{key:p,url:u(w,"atlasURL"),extension:u(w,"atlasExtension","txt"),xhrSettings:u(w,"atlasXhrSettings")})}else E=new h(c,p,v,y),S=new r(c,p,m,P);E.linkFile?n.call(this,c,"unityatlas",p,[E,S,E.linkFile]):n.call(this,c,"unityatlas",p,[E,S])},addToCache:function(){if(this.isReadyToProcess()){var a=this.files[0],c=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(a.key,a.data,c.data,p),this.complete=!0}}});x.register("unityAtlas",function(a,c,p,v,m){var y;if(Array.isArray(a))for(var P=0;P<a.length;P++)y=new f(this,a[P]),this.addFile(y.files);else y=new f(this,a,c,p,v,m),this.addFile(y.files);return this}),l.exports=f},22833:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),h=e(76846),o=e(30750),n=e(72632),r=e(42911),f=new d({Extends:u,initialize:function(c,p,v,m){if(m===void 0&&(m=!1),r(p)){var y=p;p=n(y,"key"),v=n(y,"url",[]),m=n(y,"noAudio",!1)}var P=c.systems.game.device.video.getVideoURL(v);P||console.warn("VideoFile: No supported format for "+p);var E={type:"video",cache:c.cacheManager.video,extension:P.type,key:p,url:P.url,config:{noAudio:m}};u.call(this,c,E)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=o(this,this.loader.baseURL),this.state=x.FILE_LOADED,this.loader.nextFile(this,!0)}});h.register("video",function(a,c,p){if(Array.isArray(a))for(var v=0;v<a.length;v++)this.addFile(new f(this,a[v]));else this.addFile(new f(this,a,c,p));return this}),l.exports=f},15297:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),h=e(76846),o=e(72632),n=e(42911),r=e(89200),f=new d({Extends:u,initialize:function(c,p,v,m){var y="xml";if(n(p)){var P=p;p=o(P,"key"),v=o(P,"url"),m=o(P,"xhrSettings"),y=o(P,"extension",y)}var E={type:"xml",cache:c.cacheManager.xml,extension:y,responseType:"text",key:p,url:v,xhrSettings:m};u.call(this,c,E)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=r(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});h.register("xml",function(a,c,p){if(Array.isArray(a))for(var v=0;v<a.length;v++)this.addFile(new f(this,a[v]));else this.addFile(new f(this,a,c,p));return this}),l.exports=f},34034:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={AnimationJSONFile:e(46468),AsepriteFile:e(31648),AtlasJSONFile:e(73152),AtlasXMLFile:e(24616),AudioFile:e(67448),AudioSpriteFile:e(66109),BinaryFile:e(40612),BitmapFontFile:e(54565),CompressedTextureFile:e(47375),CSSFile:e(99898),GLSLFile:e(46568),HTML5AudioFile:e(30929),HTMLFile:e(77459),HTMLTextureFile:e(9755),ImageFile:e(42927),JSONFile:e(70806),MultiAtlasFile:e(80802),MultiScriptFile:e(39034),OBJFile:e(85527),PackFile:e(3616),PluginFile:e(12217),SceneFile:e(95171),ScenePluginFile:e(82458),ScriptFile:e(55188),SpriteSheetFile:e(33536),SVGFile:e(4474),TextFile:e(86897),TilemapCSVFile:e(58673),TilemapImpactFile:e(98896),TilemapJSONFile:e(50563),UnityAtlasFile:e(82857),VideoFile:e(22833),XMLFile:e(15297)}},95695:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12117),x=e(98611),u={Events:e(683),FileTypes:e(34034),File:e(98035),FileTypesManager:e(76846),GetURL:e(30750),LoaderPlugin:e(67285),MergeXHRSettings:e(43531),MultiFile:e(45176),XHRLoader:e(88490),XHRSettings:e(33868)};u=x(!1,u,d),l.exports=u},26042:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var d=0,x=0;x<e.length;x++)d+=+e[x];return d/e.length};l.exports=T},22824:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(8034),x=function(u,h){return d(u)/d(h)/d(u-h)};l.exports=x},17489:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return Math.floor(Math.random()*(d-e+1)+e)};l.exports=T},14976:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,h){var o=(u-d)*.5,n=(h-x)*.5,r=e*e,f=e*r;return(2*x-2*u+o+n)*f+(-3*x+3*u-2*o-n)*r+o*e+x};l.exports=T},89129:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){d===void 0&&(d=0),x===void 0&&(x=10);var u=Math.pow(x,-d);return Math.ceil(e*u)/u};l.exports=T},82897:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return Math.max(d,Math.min(x,e))};l.exports=T},75606:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),x=function(u){return u*d.DEG_TO_RAD};l.exports=x},767:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return Math.abs(e-d)};l.exports=T},9849:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),x=e(56694),u=e(16650),h=e(72283),o=new u,n=new x({initialize:function r(f,a,c,p){f===void 0&&(f=0),a===void 0&&(a=0),c===void 0&&(c=0),p===void 0&&(p=r.DefaultOrder),this._x=f,this._y=a,this._z=c,this._order=p,this.onChangeCallback=h},x:{get:function(){return this._x},set:function(r){this._x=r,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(r){this._y=r,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(r){this._z=r,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(r){this._order=r,this.onChangeCallback(this)}},set:function(r,f,a,c){return c===void 0&&(c=this._order),this._x=r,this._y=f,this._z=a,this._order=c,this.onChangeCallback(this),this},copy:function(r){return this.set(r.x,r.y,r.z,r.order)},setFromQuaternion:function(r,f,a){return f===void 0&&(f=this._order),a===void 0&&(a=!1),o.fromQuat(r),this.setFromRotationMatrix(o,f,a)},setFromRotationMatrix:function(r,f,a){f===void 0&&(f=this._order),a===void 0&&(a=!1);var c=r.val,p=c[0],v=c[4],m=c[8],y=c[1],P=c[5],E=c[9],S=c[2],w=c[6],R=c[10],A=0,O=0,F=0,b=.99999;switch(f){case"XYZ":{O=Math.asin(d(m,-1,1)),Math.abs(m)<b?(A=Math.atan2(-E,R),F=Math.atan2(-v,p)):A=Math.atan2(w,P);break}case"YXZ":{A=Math.asin(-d(E,-1,1)),Math.abs(E)<b?(O=Math.atan2(m,R),F=Math.atan2(y,P)):O=Math.atan2(-S,p);break}case"ZXY":{A=Math.asin(d(w,-1,1)),Math.abs(w)<b?(O=Math.atan2(-S,R),F=Math.atan2(-v,P)):F=Math.atan2(y,p);break}case"ZYX":{O=Math.asin(-d(S,-1,1)),Math.abs(S)<b?(A=Math.atan2(w,R),F=Math.atan2(y,p)):F=Math.atan2(-v,P);break}case"YZX":{F=Math.asin(d(y,-1,1)),Math.abs(y)<b?(A=Math.atan2(-E,P),O=Math.atan2(-S,p)):O=Math.atan2(m,R);break}case"XZY":{F=Math.asin(-d(v,-1,1)),Math.abs(v)<b?(A=Math.atan2(w,P),O=Math.atan2(m,p)):A=Math.atan2(-E,R);break}}return this._x=A,this._y=O,this._z=F,this._order=f,a&&this.onChangeCallback(this),this}});n.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],n.DefaultOrder="XYZ",l.exports=n},8034:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){if(e===0)return 1;for(var d=e;--e;)d*=e;return d};l.exports=T},61616:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return Math.random()*(d-e)+e};l.exports=T},60679:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){d===void 0&&(d=0),x===void 0&&(x=10);var u=Math.pow(x,-d);return Math.floor(e*u)/u};l.exports=T},91806:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),x=function(u,h,o){return u=d(u,0,1),(o-h)*u+h};l.exports=x},79366:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e/d/1e3};l.exports=T},43776:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e==parseFloat(e)?!(e%2):void 0};l.exports=T},58442:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e===parseFloat(e)?!(e%2):void 0};l.exports=T},42798:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return(d-e)*x+e};l.exports=T},61072:l=>{/**
 * @author       Greg McLean <GregDevProjects>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return x===void 0&&(x=0),e.clone().lerp(d,x)};l.exports=T},5341:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(h){this.val=new Float32Array(9),h?this.copy(h):this.identity()},clone:function(){return new x(this)},set:function(u){return this.copy(u)},copy:function(u){var h=this.val,o=u.val;return h[0]=o[0],h[1]=o[1],h[2]=o[2],h[3]=o[3],h[4]=o[4],h[5]=o[5],h[6]=o[6],h[7]=o[7],h[8]=o[8],this},fromMat4:function(u){var h=u.val,o=this.val;return o[0]=h[0],o[1]=h[1],o[2]=h[2],o[3]=h[4],o[4]=h[5],o[5]=h[6],o[6]=h[8],o[7]=h[9],o[8]=h[10],this},fromArray:function(u){var h=this.val;return h[0]=u[0],h[1]=u[1],h[2]=u[2],h[3]=u[3],h[4]=u[4],h[5]=u[5],h[6]=u[6],h[7]=u[7],h[8]=u[8],this},identity:function(){var u=this.val;return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=1,u[5]=0,u[6]=0,u[7]=0,u[8]=1,this},transpose:function(){var u=this.val,h=u[1],o=u[2],n=u[5];return u[1]=u[3],u[2]=u[6],u[3]=h,u[5]=u[7],u[6]=o,u[7]=n,this},invert:function(){var u=this.val,h=u[0],o=u[1],n=u[2],r=u[3],f=u[4],a=u[5],c=u[6],p=u[7],v=u[8],m=v*f-a*p,y=-v*r+a*c,P=p*r-f*c,E=h*m+o*y+n*P;return E?(E=1/E,u[0]=m*E,u[1]=(-v*o+n*p)*E,u[2]=(a*o-n*f)*E,u[3]=y*E,u[4]=(v*h-n*c)*E,u[5]=(-a*h+n*r)*E,u[6]=P*E,u[7]=(-p*h+o*c)*E,u[8]=(f*h-o*r)*E,this):null},adjoint:function(){var u=this.val,h=u[0],o=u[1],n=u[2],r=u[3],f=u[4],a=u[5],c=u[6],p=u[7],v=u[8];return u[0]=f*v-a*p,u[1]=n*p-o*v,u[2]=o*a-n*f,u[3]=a*c-r*v,u[4]=h*v-n*c,u[5]=n*r-h*a,u[6]=r*p-f*c,u[7]=o*c-h*p,u[8]=h*f-o*r,this},determinant:function(){var u=this.val,h=u[0],o=u[1],n=u[2],r=u[3],f=u[4],a=u[5],c=u[6],p=u[7],v=u[8];return h*(v*f-a*p)+o*(-v*r+a*c)+n*(p*r-f*c)},multiply:function(u){var h=this.val,o=h[0],n=h[1],r=h[2],f=h[3],a=h[4],c=h[5],p=h[6],v=h[7],m=h[8],y=u.val,P=y[0],E=y[1],S=y[2],w=y[3],R=y[4],A=y[5],O=y[6],F=y[7],b=y[8];return h[0]=P*o+E*f+S*p,h[1]=P*n+E*a+S*v,h[2]=P*r+E*c+S*m,h[3]=w*o+R*f+A*p,h[4]=w*n+R*a+A*v,h[5]=w*r+R*c+A*m,h[6]=O*o+F*f+b*p,h[7]=O*n+F*a+b*v,h[8]=O*r+F*c+b*m,this},translate:function(u){var h=this.val,o=u.x,n=u.y;return h[6]=o*h[0]+n*h[3]+h[6],h[7]=o*h[1]+n*h[4]+h[7],h[8]=o*h[2]+n*h[5]+h[8],this},rotate:function(u){var h=this.val,o=h[0],n=h[1],r=h[2],f=h[3],a=h[4],c=h[5],p=Math.sin(u),v=Math.cos(u);return h[0]=v*o+p*f,h[1]=v*n+p*a,h[2]=v*r+p*c,h[3]=v*f-p*o,h[4]=v*a-p*n,h[5]=v*c-p*r,this},scale:function(u){var h=this.val,o=u.x,n=u.y;return h[0]=o*h[0],h[1]=o*h[1],h[2]=o*h[2],h[3]=n*h[3],h[4]=n*h[4],h[5]=n*h[5],this},fromQuat:function(u){var h=u.x,o=u.y,n=u.z,r=u.w,f=h+h,a=o+o,c=n+n,p=h*f,v=h*a,m=h*c,y=o*a,P=o*c,E=n*c,S=r*f,w=r*a,R=r*c,A=this.val;return A[0]=1-(y+E),A[3]=v+R,A[6]=m-w,A[1]=v-R,A[4]=1-(p+E),A[7]=P+S,A[2]=m+w,A[5]=P-S,A[8]=1-(p+y),this},normalFromMat4:function(u){var h=u.val,o=this.val,n=h[0],r=h[1],f=h[2],a=h[3],c=h[4],p=h[5],v=h[6],m=h[7],y=h[8],P=h[9],E=h[10],S=h[11],w=h[12],R=h[13],A=h[14],O=h[15],F=n*p-r*c,b=n*v-f*c,D=n*m-a*c,I=r*v-f*p,B=r*m-a*p,k=f*m-a*v,U=y*R-P*w,X=y*A-E*w,H=y*O-S*w,N=P*A-E*R,z=P*O-S*R,L=E*O-S*A,G=F*L-b*z+D*N+I*H-B*X+k*U;return G?(G=1/G,o[0]=(p*L-v*z+m*N)*G,o[1]=(v*H-c*L-m*X)*G,o[2]=(c*z-p*H+m*U)*G,o[3]=(f*z-r*L-a*N)*G,o[4]=(n*L-f*H+a*X)*G,o[5]=(r*H-n*z-a*U)*G,o[6]=(R*k-A*B+O*I)*G,o[7]=(A*D-w*k-O*b)*G,o[8]=(w*B-R*D+O*F)*G,this):null}});l.exports=x},16650:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(70015),u=1e-6,h=new d({initialize:function(p){this.val=new Float32Array(16),p?this.copy(p):this.identity()},clone:function(){return new h(this)},set:function(c){return this.copy(c)},setValues:function(c,p,v,m,y,P,E,S,w,R,A,O,F,b,D,I){var B=this.val;return B[0]=c,B[1]=p,B[2]=v,B[3]=m,B[4]=y,B[5]=P,B[6]=E,B[7]=S,B[8]=w,B[9]=R,B[10]=A,B[11]=O,B[12]=F,B[13]=b,B[14]=D,B[15]=I,this},copy:function(c){var p=c.val;return this.setValues(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15])},fromArray:function(c){return this.setValues(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(c,p,v){var m=o.fromQuat(v),y=m.val,P=p.x,E=p.y,S=p.z;return this.setValues(y[0]*P,y[1]*P,y[2]*P,0,y[4]*E,y[5]*E,y[6]*E,0,y[8]*S,y[9]*S,y[10]*S,0,c.x,c.y,c.z,1)},xyz:function(c,p,v){this.identity();var m=this.val;return m[12]=c,m[13]=p,m[14]=v,this},scaling:function(c,p,v){this.zero();var m=this.val;return m[0]=c,m[5]=p,m[10]=v,m[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var c=this.val,p=c[1],v=c[2],m=c[3],y=c[6],P=c[7],E=c[11];return c[1]=c[4],c[2]=c[8],c[3]=c[12],c[4]=p,c[6]=c[9],c[7]=c[13],c[8]=v,c[9]=y,c[11]=c[14],c[12]=m,c[13]=P,c[14]=E,this},getInverse:function(c){return this.copy(c),this.invert()},invert:function(){var c=this.val,p=c[0],v=c[1],m=c[2],y=c[3],P=c[4],E=c[5],S=c[6],w=c[7],R=c[8],A=c[9],O=c[10],F=c[11],b=c[12],D=c[13],I=c[14],B=c[15],k=p*E-v*P,U=p*S-m*P,X=p*w-y*P,H=v*S-m*E,N=v*w-y*E,z=m*w-y*S,L=R*D-A*b,G=R*I-O*b,V=R*B-F*b,Y=A*I-O*D,W=A*B-F*D,$=O*B-F*I,K=k*$-U*W+X*Y+H*V-N*G+z*L;return K?(K=1/K,this.setValues((E*$-S*W+w*Y)*K,(m*W-v*$-y*Y)*K,(D*z-I*N+B*H)*K,(O*N-A*z-F*H)*K,(S*V-P*$-w*G)*K,(p*$-m*V+y*G)*K,(I*X-b*z-B*U)*K,(R*z-O*X+F*U)*K,(P*W-E*V+w*L)*K,(v*V-p*W-y*L)*K,(b*N-D*X+B*k)*K,(A*X-R*N-F*k)*K,(E*G-P*Y-S*L)*K,(p*Y-v*G+m*L)*K,(D*U-b*H-I*k)*K,(R*H-A*U+O*k)*K)):this},adjoint:function(){var c=this.val,p=c[0],v=c[1],m=c[2],y=c[3],P=c[4],E=c[5],S=c[6],w=c[7],R=c[8],A=c[9],O=c[10],F=c[11],b=c[12],D=c[13],I=c[14],B=c[15];return this.setValues(E*(O*B-F*I)-A*(S*B-w*I)+D*(S*F-w*O),-(v*(O*B-F*I)-A*(m*B-y*I)+D*(m*F-y*O)),v*(S*B-w*I)-E*(m*B-y*I)+D*(m*w-y*S),-(v*(S*F-w*O)-E*(m*F-y*O)+A*(m*w-y*S)),-(P*(O*B-F*I)-R*(S*B-w*I)+b*(S*F-w*O)),p*(O*B-F*I)-R*(m*B-y*I)+b*(m*F-y*O),-(p*(S*B-w*I)-P*(m*B-y*I)+b*(m*w-y*S)),p*(S*F-w*O)-P*(m*F-y*O)+R*(m*w-y*S),P*(A*B-F*D)-R*(E*B-w*D)+b*(E*F-w*A),-(p*(A*B-F*D)-R*(v*B-y*D)+b*(v*F-y*A)),p*(E*B-w*D)-P*(v*B-y*D)+b*(v*w-y*E),-(p*(E*F-w*A)-P*(v*F-y*A)+R*(v*w-y*E)),-(P*(A*I-O*D)-R*(E*I-S*D)+b*(E*O-S*A)),p*(A*I-O*D)-R*(v*I-m*D)+b*(v*O-m*A),-(p*(E*I-S*D)-P*(v*I-m*D)+b*(v*S-m*E)),p*(E*O-S*A)-P*(v*O-m*A)+R*(v*S-m*E))},determinant:function(){var c=this.val,p=c[0],v=c[1],m=c[2],y=c[3],P=c[4],E=c[5],S=c[6],w=c[7],R=c[8],A=c[9],O=c[10],F=c[11],b=c[12],D=c[13],I=c[14],B=c[15],k=p*E-v*P,U=p*S-m*P,X=p*w-y*P,H=v*S-m*E,N=v*w-y*E,z=m*w-y*S,L=R*D-A*b,G=R*I-O*b,V=R*B-F*b,Y=A*I-O*D,W=A*B-F*D,$=O*B-F*I;return k*$-U*W+X*Y+H*V-N*G+z*L},multiply:function(c){var p=this.val,v=p[0],m=p[1],y=p[2],P=p[3],E=p[4],S=p[5],w=p[6],R=p[7],A=p[8],O=p[9],F=p[10],b=p[11],D=p[12],I=p[13],B=p[14],k=p[15],U=c.val,X=U[0],H=U[1],N=U[2],z=U[3];return p[0]=X*v+H*E+N*A+z*D,p[1]=X*m+H*S+N*O+z*I,p[2]=X*y+H*w+N*F+z*B,p[3]=X*P+H*R+N*b+z*k,X=U[4],H=U[5],N=U[6],z=U[7],p[4]=X*v+H*E+N*A+z*D,p[5]=X*m+H*S+N*O+z*I,p[6]=X*y+H*w+N*F+z*B,p[7]=X*P+H*R+N*b+z*k,X=U[8],H=U[9],N=U[10],z=U[11],p[8]=X*v+H*E+N*A+z*D,p[9]=X*m+H*S+N*O+z*I,p[10]=X*y+H*w+N*F+z*B,p[11]=X*P+H*R+N*b+z*k,X=U[12],H=U[13],N=U[14],z=U[15],p[12]=X*v+H*E+N*A+z*D,p[13]=X*m+H*S+N*O+z*I,p[14]=X*y+H*w+N*F+z*B,p[15]=X*P+H*R+N*b+z*k,this},multiplyLocal:function(c){var p=this.val,v=c.val;return this.setValues(p[0]*v[0]+p[1]*v[4]+p[2]*v[8]+p[3]*v[12],p[0]*v[1]+p[1]*v[5]+p[2]*v[9]+p[3]*v[13],p[0]*v[2]+p[1]*v[6]+p[2]*v[10]+p[3]*v[14],p[0]*v[3]+p[1]*v[7]+p[2]*v[11]+p[3]*v[15],p[4]*v[0]+p[5]*v[4]+p[6]*v[8]+p[7]*v[12],p[4]*v[1]+p[5]*v[5]+p[6]*v[9]+p[7]*v[13],p[4]*v[2]+p[5]*v[6]+p[6]*v[10]+p[7]*v[14],p[4]*v[3]+p[5]*v[7]+p[6]*v[11]+p[7]*v[15],p[8]*v[0]+p[9]*v[4]+p[10]*v[8]+p[11]*v[12],p[8]*v[1]+p[9]*v[5]+p[10]*v[9]+p[11]*v[13],p[8]*v[2]+p[9]*v[6]+p[10]*v[10]+p[11]*v[14],p[8]*v[3]+p[9]*v[7]+p[10]*v[11]+p[11]*v[15],p[12]*v[0]+p[13]*v[4]+p[14]*v[8]+p[15]*v[12],p[12]*v[1]+p[13]*v[5]+p[14]*v[9]+p[15]*v[13],p[12]*v[2]+p[13]*v[6]+p[14]*v[10]+p[15]*v[14],p[12]*v[3]+p[13]*v[7]+p[14]*v[11]+p[15]*v[15])},premultiply:function(c){return this.multiplyMatrices(c,this)},multiplyMatrices:function(c,p){var v=c.val,m=p.val,y=v[0],P=v[4],E=v[8],S=v[12],w=v[1],R=v[5],A=v[9],O=v[13],F=v[2],b=v[6],D=v[10],I=v[14],B=v[3],k=v[7],U=v[11],X=v[15],H=m[0],N=m[4],z=m[8],L=m[12],G=m[1],V=m[5],Y=m[9],W=m[13],$=m[2],K=m[6],j=m[10],J=m[14],q=m[3],_=m[7],et=m[11],tt=m[15];return this.setValues(y*H+P*G+E*$+S*q,w*H+R*G+A*$+O*q,F*H+b*G+D*$+I*q,B*H+k*G+U*$+X*q,y*N+P*V+E*K+S*_,w*N+R*V+A*K+O*_,F*N+b*V+D*K+I*_,B*N+k*V+U*K+X*_,y*z+P*Y+E*j+S*et,w*z+R*Y+A*j+O*et,F*z+b*Y+D*j+I*et,B*z+k*Y+U*j+X*et,y*L+P*W+E*J+S*tt,w*L+R*W+A*J+O*tt,F*L+b*W+D*J+I*tt,B*L+k*W+U*J+X*tt)},translate:function(c){return this.translateXYZ(c.x,c.y,c.z)},translateXYZ:function(c,p,v){var m=this.val;return m[12]=m[0]*c+m[4]*p+m[8]*v+m[12],m[13]=m[1]*c+m[5]*p+m[9]*v+m[13],m[14]=m[2]*c+m[6]*p+m[10]*v+m[14],m[15]=m[3]*c+m[7]*p+m[11]*v+m[15],this},scale:function(c){return this.scaleXYZ(c.x,c.y,c.z)},scaleXYZ:function(c,p,v){var m=this.val;return m[0]=m[0]*c,m[1]=m[1]*c,m[2]=m[2]*c,m[3]=m[3]*c,m[4]=m[4]*p,m[5]=m[5]*p,m[6]=m[6]*p,m[7]=m[7]*p,m[8]=m[8]*v,m[9]=m[9]*v,m[10]=m[10]*v,m[11]=m[11]*v,this},makeRotationAxis:function(c,p){var v=Math.cos(p),m=Math.sin(p),y=1-v,P=c.x,E=c.y,S=c.z,w=y*P,R=y*E;return this.setValues(w*P+v,w*E-m*S,w*S+m*E,0,w*E+m*S,R*E+v,R*S-m*P,0,w*S-m*E,R*S+m*P,y*S*S+v,0,0,0,0,1)},rotate:function(c,p){var v=this.val,m=p.x,y=p.y,P=p.z,E=Math.sqrt(m*m+y*y+P*P);if(Math.abs(E)<u)return this;E=1/E,m*=E,y*=E,P*=E;var S=Math.sin(c),w=Math.cos(c),R=1-w,A=v[0],O=v[1],F=v[2],b=v[3],D=v[4],I=v[5],B=v[6],k=v[7],U=v[8],X=v[9],H=v[10],N=v[11],z=v[12],L=v[13],G=v[14],V=v[15],Y=m*m*R+w,W=y*m*R+P*S,$=P*m*R-y*S,K=m*y*R-P*S,j=y*y*R+w,J=P*y*R+m*S,q=m*P*R+y*S,_=y*P*R-m*S,et=P*P*R+w;return this.setValues(A*Y+D*W+U*$,O*Y+I*W+X*$,F*Y+B*W+H*$,b*Y+k*W+N*$,A*K+D*j+U*J,O*K+I*j+X*J,F*K+B*j+H*J,b*K+k*j+N*J,A*q+D*_+U*et,O*q+I*_+X*et,F*q+B*_+H*et,b*q+k*_+N*et,z,L,G,V)},rotateX:function(c){var p=this.val,v=Math.sin(c),m=Math.cos(c),y=p[4],P=p[5],E=p[6],S=p[7],w=p[8],R=p[9],A=p[10],O=p[11];return p[4]=y*m+w*v,p[5]=P*m+R*v,p[6]=E*m+A*v,p[7]=S*m+O*v,p[8]=w*m-y*v,p[9]=R*m-P*v,p[10]=A*m-E*v,p[11]=O*m-S*v,this},rotateY:function(c){var p=this.val,v=Math.sin(c),m=Math.cos(c),y=p[0],P=p[1],E=p[2],S=p[3],w=p[8],R=p[9],A=p[10],O=p[11];return p[0]=y*m-w*v,p[1]=P*m-R*v,p[2]=E*m-A*v,p[3]=S*m-O*v,p[8]=y*v+w*m,p[9]=P*v+R*m,p[10]=E*v+A*m,p[11]=S*v+O*m,this},rotateZ:function(c){var p=this.val,v=Math.sin(c),m=Math.cos(c),y=p[0],P=p[1],E=p[2],S=p[3],w=p[4],R=p[5],A=p[6],O=p[7];return p[0]=y*m+w*v,p[1]=P*m+R*v,p[2]=E*m+A*v,p[3]=S*m+O*v,p[4]=w*m-y*v,p[5]=R*m-P*v,p[6]=A*m-E*v,p[7]=O*m-S*v,this},fromRotationTranslation:function(c,p){var v=c.x,m=c.y,y=c.z,P=c.w,E=v+v,S=m+m,w=y+y,R=v*E,A=v*S,O=v*w,F=m*S,b=m*w,D=y*w,I=P*E,B=P*S,k=P*w;return this.setValues(1-(F+D),A+k,O-B,0,A-k,1-(R+D),b+I,0,O+B,b-I,1-(R+F),0,p.x,p.y,p.z,1)},fromQuat:function(c){var p=c.x,v=c.y,m=c.z,y=c.w,P=p+p,E=v+v,S=m+m,w=p*P,R=p*E,A=p*S,O=v*E,F=v*S,b=m*S,D=y*P,I=y*E,B=y*S;return this.setValues(1-(O+b),R+B,A-I,0,R-B,1-(w+b),F+D,0,A+I,F-D,1-(w+O),0,0,0,0,1)},frustum:function(c,p,v,m,y,P){var E=1/(p-c),S=1/(m-v),w=1/(y-P);return this.setValues(y*2*E,0,0,0,0,y*2*S,0,0,(p+c)*E,(m+v)*S,(P+y)*w,-1,0,0,P*y*2*w,0)},perspective:function(c,p,v,m){var y=1/Math.tan(c/2),P=1/(v-m);return this.setValues(y/p,0,0,0,0,y,0,0,0,0,(m+v)*P,-1,0,0,2*m*v*P,0)},perspectiveLH:function(c,p,v,m){return this.setValues(2*v/c,0,0,0,0,2*v/p,0,0,0,0,-m/(v-m),1,0,0,v*m/(v-m),0)},ortho:function(c,p,v,m,y,P){var E=c-p,S=v-m,w=y-P;return E=E===0?E:1/E,S=S===0?S:1/S,w=w===0?w:1/w,this.setValues(-2*E,0,0,0,0,-2*S,0,0,0,0,2*w,0,(c+p)*E,(m+v)*S,(P+y)*w,1)},lookAtRH:function(c,p,v){var m=this.val;return a.subVectors(c,p),a.getLengthSquared()===0&&(a.z=1),a.normalize(),r.crossVectors(v,a),r.getLengthSquared()===0&&(Math.abs(v.z)===1?a.x+=1e-4:a.z+=1e-4,a.normalize(),r.crossVectors(v,a)),r.normalize(),f.crossVectors(a,r),m[0]=r.x,m[1]=r.y,m[2]=r.z,m[4]=f.x,m[5]=f.y,m[6]=f.z,m[8]=a.x,m[9]=a.y,m[10]=a.z,this},lookAt:function(c,p,v){var m=c.x,y=c.y,P=c.z,E=v.x,S=v.y,w=v.z,R=p.x,A=p.y,O=p.z;if(Math.abs(m-R)<u&&Math.abs(y-A)<u&&Math.abs(P-O)<u)return this.identity();var F=m-R,b=y-A,D=P-O,I=1/Math.sqrt(F*F+b*b+D*D);F*=I,b*=I,D*=I;var B=S*D-w*b,k=w*F-E*D,U=E*b-S*F;I=Math.sqrt(B*B+k*k+U*U),I?(I=1/I,B*=I,k*=I,U*=I):(B=0,k=0,U=0);var X=b*U-D*k,H=D*B-F*U,N=F*k-b*B;return I=Math.sqrt(X*X+H*H+N*N),I?(I=1/I,X*=I,H*=I,N*=I):(X=0,H=0,N=0),this.setValues(B,X,F,0,k,H,b,0,U,N,D,0,-(B*m+k*y+U*P),-(X*m+H*y+N*P),-(F*m+b*y+D*P),1)},yawPitchRoll:function(c,p,v){this.zero(),o.zero(),n.zero();var m=this.val,y=o.val,P=n.val,E=Math.sin(v),S=Math.cos(v);return m[10]=1,m[15]=1,m[0]=S,m[1]=E,m[4]=-E,m[5]=S,E=Math.sin(p),S=Math.cos(p),y[0]=1,y[15]=1,y[5]=S,y[10]=S,y[9]=-E,y[6]=E,E=Math.sin(c),S=Math.cos(c),P[5]=1,P[15]=1,P[0]=S,P[2]=-E,P[8]=E,P[10]=S,this.multiplyLocal(o),this.multiplyLocal(n),this},setWorldMatrix:function(c,p,v,m,y){return this.yawPitchRoll(c.y,c.x,c.z),o.scaling(v.x,v.y,v.z),n.xyz(p.x,p.y,p.z),this.multiplyLocal(o),this.multiplyLocal(n),m&&this.multiplyLocal(m),y&&this.multiplyLocal(y),this},multiplyToMat4:function(c,p){var v=this.val,m=c.val,y=v[0],P=v[1],E=v[2],S=v[3],w=v[4],R=v[5],A=v[6],O=v[7],F=v[8],b=v[9],D=v[10],I=v[11],B=v[12],k=v[13],U=v[14],X=v[15],H=m[0],N=m[1],z=m[2],L=m[3],G=m[4],V=m[5],Y=m[6],W=m[7],$=m[8],K=m[9],j=m[10],J=m[11],q=m[12],_=m[13],et=m[14],tt=m[15];return p.setValues(H*y+N*w+z*F+L*B,N*P+N*R+z*b+L*k,z*E+N*A+z*D+L*U,L*S+N*O+z*I+L*X,G*y+V*w+Y*F+W*B,G*P+V*R+Y*b+W*k,G*E+V*A+Y*D+W*U,G*S+V*O+Y*I+W*X,$*y+K*w+j*F+J*B,$*P+K*R+j*b+J*k,$*E+K*A+j*D+J*U,$*S+K*O+j*I+J*X,q*y+_*w+et*F+tt*B,q*P+_*R+et*b+tt*k,q*E+_*A+et*D+tt*U,q*S+_*O+et*I+tt*X)},fromRotationXYTranslation:function(c,p,v){var m=p.x,y=p.y,P=p.z,E=Math.sin(c.x),S=Math.cos(c.x),w=Math.sin(c.y),R=Math.cos(c.y),A=m,O=y,F=P,b=-E,D=0-b*w,I=0-S*w,B=b*R,k=S*R;return v||(A=R*m+w*P,O=D*m+S*y+B*P,F=I*m+E*y+k*P),this.setValues(R,D,I,0,0,S,E,0,w,B,k,0,A,O,F,1)},getMaxScaleOnAxis:function(){var c=this.val,p=c[0]*c[0]+c[1]*c[1]+c[2]*c[2],v=c[4]*c[4]+c[5]*c[5]+c[6]*c[6],m=c[8]*c[8]+c[9]*c[9]+c[10]*c[10];return Math.sqrt(Math.max(p,v,m))}}),o=new h,n=new h,r=new x,f=new x,a=new x;l.exports=h},69635:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return Math.min(e+d,x)};l.exports=T},37394:l=>{/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d=e.length;if(d===0)return 0;e.sort(function(u,h){return u-h});var x=Math.floor(d/2);return d%2===0?(e[x]+e[x-1])/2:e[x]};l.exports=T},17259:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return Math.max(e-d,x)};l.exports=T},61820:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){x===void 0&&(x=d+1);var h=(e-d)/(x-d);return h>1?u!==void 0?(h=(u-e)/(u-x),h<0&&(h=0)):h=1:h<0&&(h=0),h};l.exports=T},75003:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(5341),u=e(72283),h=e(70015),o=1e-6,n=new Int8Array([1,2,0]),r=new Float32Array([0,0,0]),f=new h(1,0,0),a=new h(0,1,0),c=new h,p=new x,v=new d({initialize:function(y,P,E,S){this.onChangeCallback=u,this.set(y,P,E,S)},x:{get:function(){return this._x},set:function(m){this._x=m,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(m){this._y=m,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(m){this._z=m,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(m){this._w=m,this.onChangeCallback(this)}},copy:function(m){return this.set(m)},set:function(m,y,P,E,S){return S===void 0&&(S=!0),typeof m=="object"?(this._x=m.x||0,this._y=m.y||0,this._z=m.z||0,this._w=m.w||0):(this._x=m||0,this._y=y||0,this._z=P||0,this._w=E||0),S&&this.onChangeCallback(this),this},add:function(m){return this._x+=m.x,this._y+=m.y,this._z+=m.z,this._w+=m.w,this.onChangeCallback(this),this},subtract:function(m){return this._x-=m.x,this._y-=m.y,this._z-=m.z,this._w-=m.w,this.onChangeCallback(this),this},scale:function(m){return this._x*=m,this._y*=m,this._z*=m,this._w*=m,this.onChangeCallback(this),this},length:function(){var m=this.x,y=this.y,P=this.z,E=this.w;return Math.sqrt(m*m+y*y+P*P+E*E)},lengthSq:function(){var m=this.x,y=this.y,P=this.z,E=this.w;return m*m+y*y+P*P+E*E},normalize:function(){var m=this.x,y=this.y,P=this.z,E=this.w,S=m*m+y*y+P*P+E*E;return S>0&&(S=1/Math.sqrt(S),this._x=m*S,this._y=y*S,this._z=P*S,this._w=E*S),this.onChangeCallback(this),this},dot:function(m){return this.x*m.x+this.y*m.y+this.z*m.z+this.w*m.w},lerp:function(m,y){y===void 0&&(y=0);var P=this.x,E=this.y,S=this.z,w=this.w;return this.set(P+y*(m.x-P),E+y*(m.y-E),S+y*(m.z-S),w+y*(m.w-w))},rotationTo:function(m,y){var P=m.x*y.x+m.y*y.y+m.z*y.z;return P<-.999999?(c.copy(f).cross(m).length()<o&&c.copy(a).cross(m),c.normalize(),this.setAxisAngle(c,Math.PI)):P>.999999?this.set(0,0,0,1):(c.copy(m).cross(y),this._x=c.x,this._y=c.y,this._z=c.z,this._w=1+P,this.normalize())},setAxes:function(m,y,P){var E=p.val;return E[0]=y.x,E[3]=y.y,E[6]=y.z,E[1]=P.x,E[4]=P.y,E[7]=P.z,E[2]=-m.x,E[5]=-m.y,E[8]=-m.z,this.fromMat3(p).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(m,y){y=y*.5;var P=Math.sin(y);return this.set(P*m.x,P*m.y,P*m.z,Math.cos(y))},multiply:function(m){var y=this.x,P=this.y,E=this.z,S=this.w,w=m.x,R=m.y,A=m.z,O=m.w;return this.set(y*O+S*w+P*A-E*R,P*O+S*R+E*w-y*A,E*O+S*A+y*R-P*w,S*O-y*w-P*R-E*A)},slerp:function(m,y){var P=this.x,E=this.y,S=this.z,w=this.w,R=m.x,A=m.y,O=m.z,F=m.w,b=P*R+E*A+S*O+w*F;b<0&&(b=-b,R=-R,A=-A,O=-O,F=-F);var D=1-y,I=y;if(1-b>o){var B=Math.acos(b),k=Math.sin(B);D=Math.sin((1-y)*B)/k,I=Math.sin(y*B)/k}return this.set(D*P+I*R,D*E+I*A,D*S+I*O,D*w+I*F)},invert:function(){var m=this.x,y=this.y,P=this.z,E=this.w,S=m*m+y*y+P*P+E*E,w=S?1/S:0;return this.set(-m*w,-y*w,-P*w,E*w)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(m){m*=.5;var y=this.x,P=this.y,E=this.z,S=this.w,w=Math.sin(m),R=Math.cos(m);return this.set(y*R+S*w,P*R+E*w,E*R-P*w,S*R-y*w)},rotateY:function(m){m*=.5;var y=this.x,P=this.y,E=this.z,S=this.w,w=Math.sin(m),R=Math.cos(m);return this.set(y*R-E*w,P*R+S*w,E*R+y*w,S*R-P*w)},rotateZ:function(m){m*=.5;var y=this.x,P=this.y,E=this.z,S=this.w,w=Math.sin(m),R=Math.cos(m);return this.set(y*R+P*w,P*R-y*w,E*R+S*w,S*R-E*w)},calculateW:function(){var m=this.x,y=this.y,P=this.z;return this.w=-Math.sqrt(1-m*m-y*y-P*P),this},setFromEuler:function(m,y){var P=m.x/2,E=m.y/2,S=m.z/2,w=Math.cos(P),R=Math.cos(E),A=Math.cos(S),O=Math.sin(P),F=Math.sin(E),b=Math.sin(S);switch(m.order){case"XYZ":{this.set(O*R*A+w*F*b,w*F*A-O*R*b,w*R*b+O*F*A,w*R*A-O*F*b,y);break}case"YXZ":{this.set(O*R*A+w*F*b,w*F*A-O*R*b,w*R*b-O*F*A,w*R*A+O*F*b,y);break}case"ZXY":{this.set(O*R*A-w*F*b,w*F*A+O*R*b,w*R*b+O*F*A,w*R*A-O*F*b,y);break}case"ZYX":{this.set(O*R*A-w*F*b,w*F*A+O*R*b,w*R*b-O*F*A,w*R*A+O*F*b,y);break}case"YZX":{this.set(O*R*A+w*F*b,w*F*A+O*R*b,w*R*b-O*F*A,w*R*A-O*F*b,y);break}case"XZY":{this.set(O*R*A-w*F*b,w*F*A-O*R*b,w*R*b+O*F*A,w*R*A+O*F*b,y);break}}return this},setFromRotationMatrix:function(m){var y=m.val,P=y[0],E=y[4],S=y[8],w=y[1],R=y[5],A=y[9],O=y[2],F=y[6],b=y[10],D=P+R+b,I;return D>0?(I=.5/Math.sqrt(D+1),this.set((F-A)*I,(S-O)*I,(w-E)*I,.25/I)):P>R&&P>b?(I=2*Math.sqrt(1+P-R-b),this.set(.25*I,(E+w)/I,(S+O)/I,(F-A)/I)):R>b?(I=2*Math.sqrt(1+R-P-b),this.set((E+w)/I,.25*I,(A+F)/I,(S-O)/I)):(I=2*Math.sqrt(1+b-P-R),this.set((S+O)/I,(A+F)/I,.25*I,(w-E)/I)),this},fromMat3:function(m){var y=m.val,P=y[0]+y[4]+y[8],E;if(P>0)E=Math.sqrt(P+1),this.w=.5*E,E=.5/E,this._x=(y[7]-y[5])*E,this._y=(y[2]-y[6])*E,this._z=(y[3]-y[1])*E;else{var S=0;y[4]>y[0]&&(S=1),y[8]>y[S*3+S]&&(S=2);var w=n[S],R=n[w];E=Math.sqrt(y[S*3+S]-y[w*3+w]-y[R*3+R]+1),r[S]=.5*E,E=.5/E,r[w]=(y[w*3+S]+y[S*3+w])*E,r[R]=(y[R*3+S]+y[S*3+R])*E,this._x=r[0],this._y=r[1],this._z=r[2],this._w=(y[R*3+w]-y[w*3+R])*E}return this.onChangeCallback(this),this}});l.exports=v},23701:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),x=function(u){return u*d.RAD_TO_DEG};l.exports=x},16906:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){d===void 0&&(d=1);var x=Math.random()*2*Math.PI;return e.x=Math.cos(x)*d,e.y=Math.sin(x)*d,e};l.exports=T},52417:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){d===void 0&&(d=1);var x=Math.random()*2*Math.PI,u=Math.random()*2-1,h=Math.sqrt(1-u*u)*d;return e.x=Math.cos(x)*h,e.y=Math.sin(x)*h,e.z=u*d,e};l.exports=T},17915:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d===void 0&&(d=1),e.x=(Math.random()*2-1)*d,e.y=(Math.random()*2-1)*d,e.z=(Math.random()*2-1)*d,e.w=(Math.random()*2-1)*d,e};l.exports=T},52257:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=e.x,u=e.y;return e.x=x*Math.cos(d)-u*Math.sin(d),e.y=x*Math.sin(d)+u*Math.cos(d),e};l.exports=T},2386:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){var h=Math.cos(u),o=Math.sin(u),n=e.x-d,r=e.y-x;return e.x=n*h-r*o+d,e.y=n*o+r*h+x,e};l.exports=T},72395:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,h){var o=u+Math.atan2(e.y-x,e.x-d);return e.x=d+h*Math.cos(o),e.y=x+h*Math.sin(o),e};l.exports=T},41061:l=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,h){return e.x=d+h*Math.cos(u),e.y=x+h*Math.sin(u),e};l.exports=T},93709:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70015),x=e(16650),u=e(75003),h=new x,o=new u,n=new d,r=function(f,a,c){return o.setAxisAngle(a,c),h.fromRotationTranslation(o,n.set(0,0,0)),f.transformMat4(h)};l.exports=r},67233:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e>0?Math.ceil(e):Math.floor(e)};l.exports=T},64333:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){d===void 0&&(d=0),x===void 0&&(x=10);var u=Math.pow(x,-d);return Math.round(e*u)/u};l.exports=T},59533:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){d===void 0&&(d=1),x===void 0&&(x=1),u===void 0&&(u=1),u*=Math.PI/e;for(var h=[],o=[],n=0;n<e;n++)x-=d*u,d+=x*u,h[n]=x,o[n]=d;return{sin:o,cos:h,length:e}};l.exports=T},5514:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return e<=d?0:e>=x?1:(e=(e-d)/(x-d),e*e*(3-2*e))};l.exports=T},87736:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return e=Math.max(0,Math.min(1,(e-d)/(x-d))),e*e*e*(e*(e*6-15)+10)};l.exports=T},55805:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),x=function(u,h,o,n){n===void 0&&(n=new d);var r=0,f=0,a=h*o;return u>0&&u<=a&&(u>h-1?(f=Math.floor(u/h),r=u-f*h):r=u),n.set(r,f)};l.exports=x},64462:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),x=function(u,h,o,n,r,f,a,c){c===void 0&&(c=new d);var p=Math.sin(r),v=Math.cos(r),m=v*f,y=p*f,P=-p*a,E=v*a,S=1/(m*E+P*-y);return c.x=E*S*u+-P*S*h+(n*P-o*E)*S,c.y=m*S*h+-y*S*u+(-n*m+o*y)*S,c};l.exports=x},93736:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(88456),u=new d({initialize:function(o,n){this.x=0,this.y=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0):(n===void 0&&(n=o),this.x=o||0,this.y=n||0)},clone:function(){return new u(this.x,this.y)},copy:function(h){return this.x=h.x||0,this.y=h.y||0,this},setFromObject:function(h){return this.x=h.x||0,this.y=h.y||0,this},set:function(h,o){return o===void 0&&(o=h),this.x=h,this.y=o,this},setTo:function(h,o){return this.set(h,o)},setToPolar:function(h,o){return o==null&&(o=1),this.x=Math.cos(h)*o,this.y=Math.sin(h)*o,this},equals:function(h){return this.x===h.x&&this.y===h.y},fuzzyEquals:function(h,o){return x(this.x,h.x,o)&&x(this.y,h.y,o)},angle:function(){var h=Math.atan2(this.y,this.x);return h<0&&(h+=2*Math.PI),h},setAngle:function(h){return this.setToPolar(h,this.length())},add:function(h){return this.x+=h.x,this.y+=h.y,this},subtract:function(h){return this.x-=h.x,this.y-=h.y,this},multiply:function(h){return this.x*=h.x,this.y*=h.y,this},scale:function(h){return isFinite(h)?(this.x*=h,this.y*=h):(this.x=0,this.y=0),this},divide:function(h){return this.x/=h.x,this.y/=h.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(h){var o=h.x-this.x,n=h.y-this.y;return Math.sqrt(o*o+n*n)},distanceSq:function(h){var o=h.x-this.x,n=h.y-this.y;return o*o+n*n},length:function(){var h=this.x,o=this.y;return Math.sqrt(h*h+o*o)},setLength:function(h){return this.normalize().scale(h)},lengthSq:function(){var h=this.x,o=this.y;return h*h+o*o},normalize:function(){var h=this.x,o=this.y,n=h*h+o*o;return n>0&&(n=1/Math.sqrt(n),this.x=h*n,this.y=o*n),this},normalizeRightHand:function(){var h=this.x;return this.x=this.y*-1,this.y=h,this},normalizeLeftHand:function(){var h=this.x;return this.x=this.y,this.y=h*-1,this},dot:function(h){return this.x*h.x+this.y*h.y},cross:function(h){return this.x*h.y-this.y*h.x},lerp:function(h,o){o===void 0&&(o=0);var n=this.x,r=this.y;return this.x=n+o*(h.x-n),this.y=r+o*(h.y-r),this},transformMat3:function(h){var o=this.x,n=this.y,r=h.val;return this.x=r[0]*o+r[3]*n+r[6],this.y=r[1]*o+r[4]*n+r[7],this},transformMat4:function(h){var o=this.x,n=this.y,r=h.val;return this.x=r[0]*o+r[4]*n+r[12],this.y=r[1]*o+r[5]*n+r[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(h){var o=this.length();return o&&o>h&&this.scale(h/o),this},reflect:function(h){return h=h.clone().normalize(),this.subtract(h.scale(2*this.dot(h)))},mirror:function(h){return this.reflect(h).negate()},rotate:function(h){var o=Math.cos(h),n=Math.sin(h);return this.set(o*this.x-n*this.y,n*this.x+o*this.y)},project:function(h){var o=this.dot(h)/h.dot(h);return this.copy(h).scale(o)}});u.ZERO=new u,u.RIGHT=new u(1,0),u.LEFT=new u(-1,0),u.UP=new u(0,-1),u.DOWN=new u(0,1),u.ONE=new u(1,1),l.exports=u},70015:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(h,o,n){this.x=0,this.y=0,this.z=0,typeof h=="object"?(this.x=h.x||0,this.y=h.y||0,this.z=h.z||0):(this.x=h||0,this.y=o||0,this.z=n||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(u){return this.x=Math.min(this.x,u.x),this.y=Math.min(this.y,u.y),this.z=Math.min(this.z,u.z),this},max:function(u){return this.x=Math.max(this.x,u.x),this.y=Math.max(this.y,u.y),this.z=Math.max(this.z,u.z),this},clone:function(){return new x(this.x,this.y,this.z)},addVectors:function(u,h){return this.x=u.x+h.x,this.y=u.y+h.y,this.z=u.z+h.z,this},crossVectors:function(u,h){var o=u.x,n=u.y,r=u.z,f=h.x,a=h.y,c=h.z;return this.x=n*c-r*a,this.y=r*f-o*c,this.z=o*a-n*f,this},equals:function(u){return this.x===u.x&&this.y===u.y&&this.z===u.z},copy:function(u){return this.x=u.x,this.y=u.y,this.z=u.z||0,this},set:function(u,h,o){return typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0):(this.x=u||0,this.y=h||0,this.z=o||0),this},setFromMatrixPosition:function(u){return this.fromArray(u.val,12)},setFromMatrixColumn:function(u,h){return this.fromArray(u.val,h*4)},fromArray:function(u,h){return h===void 0&&(h=0),this.x=u[h],this.y=u[h+1],this.z=u[h+2],this},add:function(u){return this.x+=u.x,this.y+=u.y,this.z+=u.z||0,this},addScalar:function(u){return this.x+=u,this.y+=u,this.z+=u,this},addScale:function(u,h){return this.x+=u.x*h,this.y+=u.y*h,this.z+=u.z*h||0,this},subtract:function(u){return this.x-=u.x,this.y-=u.y,this.z-=u.z||0,this},multiply:function(u){return this.x*=u.x,this.y*=u.y,this.z*=u.z||1,this},scale:function(u){return isFinite(u)?(this.x*=u,this.y*=u,this.z*=u):(this.x=0,this.y=0,this.z=0),this},divide:function(u){return this.x/=u.x,this.y/=u.y,this.z/=u.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(u){var h=u.x-this.x,o=u.y-this.y,n=u.z-this.z||0;return Math.sqrt(h*h+o*o+n*n)},distanceSq:function(u){var h=u.x-this.x,o=u.y-this.y,n=u.z-this.z||0;return h*h+o*o+n*n},length:function(){var u=this.x,h=this.y,o=this.z;return Math.sqrt(u*u+h*h+o*o)},lengthSq:function(){var u=this.x,h=this.y,o=this.z;return u*u+h*h+o*o},normalize:function(){var u=this.x,h=this.y,o=this.z,n=u*u+h*h+o*o;return n>0&&(n=1/Math.sqrt(n),this.x=u*n,this.y=h*n,this.z=o*n),this},dot:function(u){return this.x*u.x+this.y*u.y+this.z*u.z},cross:function(u){var h=this.x,o=this.y,n=this.z,r=u.x,f=u.y,a=u.z;return this.x=o*a-n*f,this.y=n*r-h*a,this.z=h*f-o*r,this},lerp:function(u,h){h===void 0&&(h=0);var o=this.x,n=this.y,r=this.z;return this.x=o+h*(u.x-o),this.y=n+h*(u.y-n),this.z=r+h*(u.z-r),this},applyMatrix3:function(u){var h=this.x,o=this.y,n=this.z,r=u.val;return this.x=r[0]*h+r[3]*o+r[6]*n,this.y=r[1]*h+r[4]*o+r[7]*n,this.z=r[2]*h+r[5]*o+r[8]*n,this},applyMatrix4:function(u){var h=this.x,o=this.y,n=this.z,r=u.val,f=1/(r[3]*h+r[7]*o+r[11]*n+r[15]);return this.x=(r[0]*h+r[4]*o+r[8]*n+r[12])*f,this.y=(r[1]*h+r[5]*o+r[9]*n+r[13])*f,this.z=(r[2]*h+r[6]*o+r[10]*n+r[14])*f,this},transformMat3:function(u){var h=this.x,o=this.y,n=this.z,r=u.val;return this.x=h*r[0]+o*r[3]+n*r[6],this.y=h*r[1]+o*r[4]+n*r[7],this.z=h*r[2]+o*r[5]+n*r[8],this},transformMat4:function(u){var h=this.x,o=this.y,n=this.z,r=u.val;return this.x=r[0]*h+r[4]*o+r[8]*n+r[12],this.y=r[1]*h+r[5]*o+r[9]*n+r[13],this.z=r[2]*h+r[6]*o+r[10]*n+r[14],this},transformCoordinates:function(u){var h=this.x,o=this.y,n=this.z,r=u.val,f=h*r[0]+o*r[4]+n*r[8]+r[12],a=h*r[1]+o*r[5]+n*r[9]+r[13],c=h*r[2]+o*r[6]+n*r[10]+r[14],p=h*r[3]+o*r[7]+n*r[11]+r[15];return this.x=f/p,this.y=a/p,this.z=c/p,this},transformQuat:function(u){var h=this.x,o=this.y,n=this.z,r=u.x,f=u.y,a=u.z,c=u.w,p=c*h+f*n-a*o,v=c*o+a*h-r*n,m=c*n+r*o-f*h,y=-r*h-f*o-a*n;return this.x=p*c+y*-r+v*-a-m*-f,this.y=v*c+y*-f+m*-r-p*-a,this.z=m*c+y*-a+p*-f-v*-r,this},project:function(u){var h=this.x,o=this.y,n=this.z,r=u.val,f=r[0],a=r[1],c=r[2],p=r[3],v=r[4],m=r[5],y=r[6],P=r[7],E=r[8],S=r[9],w=r[10],R=r[11],A=r[12],O=r[13],F=r[14],b=r[15],D=1/(h*p+o*P+n*R+b);return this.x=(h*f+o*v+n*E+A)*D,this.y=(h*a+o*m+n*S+O)*D,this.z=(h*c+o*y+n*w+F)*D,this},projectViewMatrix:function(u,h){return this.applyMatrix4(u).applyMatrix4(h)},unprojectViewMatrix:function(u,h){return this.applyMatrix4(u).applyMatrix4(h)},unproject:function(u,h){var o=u.x,n=u.y,r=u.z,f=u.w,a=this.x-o,c=f-this.y-1-n,p=this.z;return this.x=2*a/r-1,this.y=2*c/f-1,this.z=2*p-1,this.project(h)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});x.ZERO=new x,x.RIGHT=new x(1,0,0),x.LEFT=new x(-1,0,0),x.UP=new x(0,-1,0),x.DOWN=new x(0,1,0),x.FORWARD=new x(0,0,1),x.BACK=new x(0,0,-1),x.ONE=new x(1,1,1),l.exports=x},51729:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(h,o,n,r){this.x=0,this.y=0,this.z=0,this.w=0,typeof h=="object"?(this.x=h.x||0,this.y=h.y||0,this.z=h.z||0,this.w=h.w||0):(this.x=h||0,this.y=o||0,this.z=n||0,this.w=r||0)},clone:function(){return new x(this.x,this.y,this.z,this.w)},copy:function(u){return this.x=u.x,this.y=u.y,this.z=u.z||0,this.w=u.w||0,this},equals:function(u){return this.x===u.x&&this.y===u.y&&this.z===u.z&&this.w===u.w},set:function(u,h,o,n){return typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0,this.w=u.w||0):(this.x=u||0,this.y=h||0,this.z=o||0,this.w=n||0),this},add:function(u){return this.x+=u.x,this.y+=u.y,this.z+=u.z||0,this.w+=u.w||0,this},subtract:function(u){return this.x-=u.x,this.y-=u.y,this.z-=u.z||0,this.w-=u.w||0,this},scale:function(u){return this.x*=u,this.y*=u,this.z*=u,this.w*=u,this},length:function(){var u=this.x,h=this.y,o=this.z,n=this.w;return Math.sqrt(u*u+h*h+o*o+n*n)},lengthSq:function(){var u=this.x,h=this.y,o=this.z,n=this.w;return u*u+h*h+o*o+n*n},normalize:function(){var u=this.x,h=this.y,o=this.z,n=this.w,r=u*u+h*h+o*o+n*n;return r>0&&(r=1/Math.sqrt(r),this.x=u*r,this.y=h*r,this.z=o*r,this.w=n*r),this},dot:function(u){return this.x*u.x+this.y*u.y+this.z*u.z+this.w*u.w},lerp:function(u,h){h===void 0&&(h=0);var o=this.x,n=this.y,r=this.z,f=this.w;return this.x=o+h*(u.x-o),this.y=n+h*(u.y-n),this.z=r+h*(u.z-r),this.w=f+h*(u.w-f),this},multiply:function(u){return this.x*=u.x,this.y*=u.y,this.z*=u.z||1,this.w*=u.w||1,this},divide:function(u){return this.x/=u.x,this.y/=u.y,this.z/=u.z||1,this.w/=u.w||1,this},distance:function(u){var h=u.x-this.x,o=u.y-this.y,n=u.z-this.z||0,r=u.w-this.w||0;return Math.sqrt(h*h+o*o+n*n+r*r)},distanceSq:function(u){var h=u.x-this.x,o=u.y-this.y,n=u.z-this.z||0,r=u.w-this.w||0;return h*h+o*o+n*n+r*r},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(u){var h=this.x,o=this.y,n=this.z,r=this.w,f=u.val;return this.x=f[0]*h+f[4]*o+f[8]*n+f[12]*r,this.y=f[1]*h+f[5]*o+f[9]*n+f[13]*r,this.z=f[2]*h+f[6]*o+f[10]*n+f[14]*r,this.w=f[3]*h+f[7]*o+f[11]*n+f[15]*r,this},transformQuat:function(u){var h=this.x,o=this.y,n=this.z,r=u.x,f=u.y,a=u.z,c=u.w,p=c*h+f*n-a*o,v=c*o+a*h-r*n,m=c*n+r*o-f*h,y=-r*h-f*o-a*n;return this.x=p*c+y*-r+v*-a-m*-f,this.y=v*c+y*-f+m*-r-p*-a,this.z=m*c+y*-a+p*-f-v*-r,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});x.prototype.sub=x.prototype.subtract,x.prototype.mul=x.prototype.multiply,x.prototype.div=x.prototype.divide,x.prototype.dist=x.prototype.distance,x.prototype.distSq=x.prototype.distanceSq,x.prototype.len=x.prototype.length,x.prototype.lenSq=x.prototype.lengthSq,l.exports=x},9557:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return Math.abs(e-d)<=x};l.exports=T},1071:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){if(e>=d&&e<=x)return e;var u=x-d;return d+((e-d)%u+u)%u};l.exports=T},90447:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){return Math.atan2(u-d,x-e)};l.exports=T},94240:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return Math.atan2(d.y-e.y,d.x-e.x)};l.exports=T},84066:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return Math.atan2(d.x-e.x,d.y-e.y)};l.exports=T},9678:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){return Math.atan2(x-e,u-d)};l.exports=T},76861:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),x=function(u){return u>Math.PI&&(u-=d.PI2),Math.abs(((u+d.TAU)%d.PI2-d.PI2)%d.PI2)};l.exports=x},37570:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e=e%(2*Math.PI),e>=0?e:e+2*Math.PI};l.exports=T},87597:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61616),x=function(){return d(-Math.PI,Math.PI)};l.exports=x},74493:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61616),x=function(){return d(-180,180)};l.exports=x},19049:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(37570),x=function(u){return d(u+Math.PI)};l.exports=x},90612:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),x=function(u,h,o){return o===void 0&&(o=.05),u===h||(Math.abs(h-u)<=o||Math.abs(h-u)>=d.PI2-o?u=h:(Math.abs(h-u)>Math.PI&&(h<u?h+=d.PI2:h-=d.PI2),h>u?u+=o:h<u&&(u-=o))),u};l.exports=x},93954:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=d-e;if(x===0)return 0;var u=Math.floor((x- -180)/360);return x-u*360};l.exports=T},35786:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(1071),x=function(u){return d(u,-Math.PI,Math.PI)};l.exports=x},62138:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(1071),x=function(u){return d(u,-180,180)};l.exports=x},22153:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={Between:e(90447),BetweenPoints:e(94240),BetweenPointsY:e(84066),BetweenY:e(9678),CounterClockwise:e(76861),Normalize:e(37570),Random:e(87597),RandomDegrees:e(74493),Reverse:e(19049),RotateTo:e(90612),ShortestBetween:e(93954),Wrap:e(35786),WrapDegrees:e(62138)}},83392:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};l.exports=T},53996:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){var h=e-x,o=d-u;return Math.sqrt(h*h+o*o)};l.exports=T},92951:l=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=e.x-d.x,u=e.y-d.y;return Math.sqrt(x*x+u*u)};l.exports=T},12161:l=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=e.x-d.x,u=e.y-d.y;return x*x+u*u};l.exports=T},38057:l=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){return Math.max(Math.abs(e-x),Math.abs(d-u))};l.exports=T},33297:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,h){return h===void 0&&(h=2),Math.sqrt(Math.pow(x-e,h)+Math.pow(u-d,h))};l.exports=T},90366:l=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){return Math.abs(e-x)+Math.abs(d-u)};l.exports=T},35032:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){var h=e-x,o=d-u;return h*h+o*o};l.exports=T},10130:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={Between:e(53996),BetweenPoints:e(92951),BetweenPointsSquared:e(12161),Chebyshev:e(38057),Power:e(33297),Snake:e(90366),Squared:e(35032)}},35060:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(25265),x=e(57428),u=e(73214),h=e(71778),o=e(36468),n=e(88258),r=e(52910),f=e(67799),a=e(74083),c=e(92284),p=e(28035),v=e(8754);l.exports={Power0:r,Power1:f.Out,Power2:h.Out,Power3:a.Out,Power4:c.Out,Linear:r,Quad:f.Out,Cubic:h.Out,Quart:a.Out,Quint:c.Out,Sine:p.Out,Expo:n.Out,Circ:u.Out,Elastic:o.Out,Back:d.Out,Bounce:x.Out,Stepped:v,"Quad.easeIn":f.In,"Cubic.easeIn":h.In,"Quart.easeIn":a.In,"Quint.easeIn":c.In,"Sine.easeIn":p.In,"Expo.easeIn":n.In,"Circ.easeIn":u.In,"Elastic.easeIn":o.In,"Back.easeIn":d.In,"Bounce.easeIn":x.In,"Quad.easeOut":f.Out,"Cubic.easeOut":h.Out,"Quart.easeOut":a.Out,"Quint.easeOut":c.Out,"Sine.easeOut":p.Out,"Expo.easeOut":n.Out,"Circ.easeOut":u.Out,"Elastic.easeOut":o.Out,"Back.easeOut":d.Out,"Bounce.easeOut":x.Out,"Quad.easeInOut":f.InOut,"Cubic.easeInOut":h.InOut,"Quart.easeInOut":a.InOut,"Quint.easeInOut":c.InOut,"Sine.easeInOut":p.InOut,"Expo.easeInOut":n.InOut,"Circ.easeInOut":u.InOut,"Elastic.easeInOut":o.InOut,"Back.easeInOut":d.InOut,"Bounce.easeInOut":x.InOut}},25860:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d===void 0&&(d=1.70158),e*e*((d+1)*e-d)};l.exports=T},45264:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){d===void 0&&(d=1.70158);var x=d*1.525;return(e*=2)<1?.5*(e*e*((x+1)*e-x)):.5*((e-=2)*e*((x+1)*e+x)+2)};l.exports=T},36699:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d===void 0&&(d=1.70158),--e*e*((d+1)*e+d)+1};l.exports=T},25265:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={In:e(25860),Out:e(36699),InOut:e(45264)}},62191:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e=1-e,e<.36363636363636365?1-7.5625*e*e:e<.7272727272727273?1-(7.5625*(e-=.5454545454545454)*e+.75):e<.9090909090909091?1-(7.5625*(e-=.8181818181818182)*e+.9375):1-(7.5625*(e-=.9545454545454546)*e+.984375)};l.exports=T},24799:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d=!1;return e<.5?(e=1-e*2,d=!0):e=e*2-1,e<.36363636363636365?e=7.5625*e*e:e<.7272727272727273?e=7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?e=7.5625*(e-=.8181818181818182)*e+.9375:e=7.5625*(e-=.9545454545454546)*e+.984375,d?(1-e)*.5:e*.5+.5};l.exports=T},60819:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375};l.exports=T},57428:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={In:e(62191),Out:e(60819),InOut:e(24799)}},86855:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return 1-Math.sqrt(1-e*e)};l.exports=T},7280:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)};l.exports=T},18058:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.sqrt(1- --e*e)};l.exports=T},73214:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={In:e(86855),Out:e(18058),InOut:e(7280)}},91532:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e*e*e};l.exports=T},63180:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)};l.exports=T},16518:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return--e*e*e+1};l.exports=T},71778:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={In:e(91532),Out:e(16518),InOut:e(63180)}},24729:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){if(d===void 0&&(d=.1),x===void 0&&(x=.1),e===0)return 0;if(e===1)return 1;var u=x/4;return d<1?d=1:u=x*Math.asin(1/d)/(2*Math.PI),-(d*Math.pow(2,10*(e-=1))*Math.sin((e-u)*(2*Math.PI)/x))};l.exports=T},50325:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){if(d===void 0&&(d=.1),x===void 0&&(x=.1),e===0)return 0;if(e===1)return 1;var u=x/4;return d<1?d=1:u=x*Math.asin(1/d)/(2*Math.PI),(e*=2)<1?-.5*(d*Math.pow(2,10*(e-=1))*Math.sin((e-u)*(2*Math.PI)/x)):d*Math.pow(2,-10*(e-=1))*Math.sin((e-u)*(2*Math.PI)/x)*.5+1};l.exports=T},84074:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){if(d===void 0&&(d=.1),x===void 0&&(x=.1),e===0)return 0;if(e===1)return 1;var u=x/4;return d<1?d=1:u=x*Math.asin(1/d)/(2*Math.PI),d*Math.pow(2,-10*e)*Math.sin((e-u)*(2*Math.PI)/x)+1};l.exports=T},36468:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={In:e(24729),Out:e(84074),InOut:e(50325)}},95638:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.pow(2,10*(e-1))-.001};l.exports=T},10357:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))};l.exports=T},14894:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return 1-Math.pow(2,-10*e)};l.exports=T},88258:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={In:e(95638),Out:e(14894),InOut:e(10357)}},33063:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={Back:e(25265),Bounce:e(57428),Circular:e(73214),Cubic:e(71778),Elastic:e(36468),Expo:e(88258),Linear:e(52910),Quadratic:e(67799),Quartic:e(74083),Quintic:e(92284),Sine:e(28035),Stepped:e(8754)}},43927:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e};l.exports=T},52910:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports=e(43927)},77471:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e*e};l.exports=T},83863:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)};l.exports=T},44383:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e*(2-e)};l.exports=T},67799:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={In:e(77471),Out:e(44383),InOut:e(83863)}},48311:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e*e*e*e};l.exports=T},55248:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)};l.exports=T},23135:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return 1- --e*e*e*e};l.exports=T},74083:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={In:e(48311),Out:e(23135),InOut:e(55248)}},7313:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e*e*e*e*e};l.exports=T},98759:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)};l.exports=T},26670:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return--e*e*e*e*e+1};l.exports=T},92284:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={In:e(7313),Out:e(26670),InOut:e(98759)}},52929:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e===0?0:e===1?1:1-Math.cos(e*Math.PI/2)};l.exports=T},66333:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e===0?0:e===1?1:.5*(1-Math.cos(Math.PI*e))};l.exports=T},37255:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e===0?0:e===1?1:Math.sin(e*Math.PI/2)};l.exports=T},28035:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={In:e(52929),Out:e(37255),InOut:e(66333)}},52770:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d===void 0&&(d=1),e<=0?0:e>=1?1:((d*e|0)+1)*(1/d)};l.exports=T},8754:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports=e(52770)},17247:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d===void 0&&(d=1e-4),Math.ceil(e-d)};l.exports=T},88456:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return x===void 0&&(x=1e-4),Math.abs(e-d)<x};l.exports=T},61824:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d===void 0&&(d=1e-4),Math.floor(e+d)};l.exports=T},41935:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return x===void 0&&(x=1e-4),e>d-x};l.exports=T},54726:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return x===void 0&&(x=1e-4),e<d+x};l.exports=T},52778:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={Ceil:e(17247),Equal:e(88456),Floor:e(61824),GreaterThan:e(41935),LessThan:e(54726)}},5923:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),x=e(98611),u={Angle:e(22153),Distance:e(10130),Easing:e(33063),Fuzzy:e(52778),Interpolation:e(48528),Pow2:e(73773),Snap:e(23679),RandomDataGenerator:e(81429),Average:e(26042),Bernstein:e(22824),Between:e(17489),CatmullRom:e(14976),CeilTo:e(89129),Clamp:e(82897),DegToRad:e(75606),Difference:e(767),Euler:e(9849),Factorial:e(8034),FloatBetween:e(61616),FloorTo:e(60679),FromPercent:e(91806),GetSpeed:e(79366),IsEven:e(43776),IsEvenStrict:e(58442),Linear:e(42798),LinearXY:e(61072),MaxAdd:e(69635),Median:e(37394),MinSub:e(17259),Percent:e(61820),RadToDeg:e(23701),RandomXY:e(16906),RandomXYZ:e(52417),RandomXYZW:e(17915),Rotate:e(52257),RotateAround:e(2386),RotateAroundDistance:e(72395),RotateTo:e(41061),RoundAwayFromZero:e(67233),RoundTo:e(64333),SinCosTableGenerator:e(59533),SmootherStep:e(87736),SmoothStep:e(5514),ToXY:e(55805),TransformXY:e(64462),Within:e(9557),Wrap:e(1071),Vector2:e(93736),Vector3:e(70015),Vector4:e(51729),Matrix3:e(5341),Matrix4:e(16650),Quaternion:e(75003),RotateVec3:e(93709)};u=x(!1,u,d),l.exports=u},63210:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(22824),x=function(u,h){for(var o=0,n=u.length-1,r=0;r<=n;r++)o+=Math.pow(1-h,n-r)*Math.pow(h,r)*u[r]*d(n,r);return o};l.exports=x},88332:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(14976),x=function(u,h){var o=u.length-1,n=o*h,r=Math.floor(n);return u[0]===u[o]?(h<0&&(r=Math.floor(n=o*(1+h))),d(n-r,u[(r-1+o)%o],u[r],u[(r+1)%o],u[(r+2)%o])):h<0?u[0]-(d(-n,u[0],u[0],u[1],u[1])-u[0]):h>1?u[o]-(d(n-o,u[o],u[o],u[o-1],u[o-1])-u[o]):d(n-r,u[r?r-1:0],u[r],u[o<r+1?o:r+1],u[o<r+2?o:r+2])};l.exports=x},34631:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(h,o){var n=1-h;return n*n*n*o}function e(h,o){var n=1-h;return 3*n*n*h*o}function d(h,o){return 3*(1-h)*h*h*o}function x(h,o){return h*h*h*o}var u=function(h,o,n,r,f){return T(h,o)+e(h,n)+d(h,r)+x(h,f)};l.exports=u},47614:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(42798),x=function(u,h){var o=u.length-1,n=o*h,r=Math.floor(n);return h<0?d(u[0],u[1],n):h>1?d(u[o],u[o-1],o-n):d(u[r],u[r+1>o?o:r+1],n-r)};l.exports=x},16252:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(u,h){var o=1-u;return o*o*h}function e(u,h){return 2*(1-u)*u*h}function d(u,h){return u*u*h}var x=function(u,h,o,n){return T(u,h)+e(u,o)+d(u,n)};l.exports=x},44521:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(5514),x=function(u,h,o){return h+(o-h)*d(u,0,1)};l.exports=x},45507:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(87736),x=function(u,h,o){return h+(o-h)*d(u,0,1)};l.exports=x},48528:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={Bezier:e(63210),CatmullRom:e(88332),CubicBezier:e(34631),Linear:e(47614),QuadraticBezier:e(16252),SmoothStep:e(44521),SmootherStep:e(45507)}},3504:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d=Math.log(e)/.6931471805599453;return 1<<Math.ceil(d)};l.exports=T},28621:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e>0&&(e&e-1)===0&&d>0&&(d&d-1)===0};l.exports=T},2018:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e>0&&(e&e-1)===0};l.exports=T},73773:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={GetNext:e(3504),IsSize:e(28621),IsValue:e(2018)}},81429:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(h){h===void 0&&(h=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],h&&this.init(h)},rnd:function(){var u=2091639*this.s0+this.c*23283064365386963e-26;return this.c=u|0,this.s0=this.s1,this.s1=this.s2,this.s2=u-this.c,this.s2},hash:function(u){var h,o=this.n;u=u.toString();for(var n=0;n<u.length;n++)o+=u.charCodeAt(n),h=.02519603282416938*o,o=h>>>0,h-=o,h*=o,o=h>>>0,h-=o,o+=h*4294967296;return this.n=o,(o>>>0)*23283064365386963e-26},init:function(u){typeof u=="string"?this.state(u):this.sow(u)},sow:function(u){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!u)for(var h=0;h<u.length&&u[h]!=null;h++){var o=u[h];this.s0-=this.hash(o),this.s0+=~~(this.s0<0),this.s1-=this.hash(o),this.s1+=~~(this.s1<0),this.s2-=this.hash(o),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(u,h){return Math.floor(this.realInRange(0,h-u+1)+u)},between:function(u,h){return Math.floor(this.realInRange(0,h-u+1)+u)},realInRange:function(u,h){return this.frac()*(h-u)+u},normal:function(){return 1-2*this.frac()},uuid:function(){var u="",h="";for(h=u="";u++<36;h+=~u%5|u*3&4?(u^15?8^this.frac()*(u^20?16:4):4).toString(16):"-");return h},pick:function(u){return u[this.integerInRange(0,u.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(u){return u[~~(Math.pow(this.frac(),2)*(u.length-1)+.5)]},timestamp:function(u,h){return this.realInRange(u||9466848e5,h||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(u){return typeof u=="string"&&u.match(/^!rnd/)&&(u=u.split(","),this.c=parseFloat(u[1]),this.s0=parseFloat(u[2]),this.s1=parseFloat(u[3]),this.s2=parseFloat(u[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(u){for(var h=u.length-1,o=h;o>0;o--){var n=Math.floor(this.frac()*(o+1)),r=u[n];u[n]=u[o],u[o]=r}return u}});l.exports=x},82127:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){return x===void 0&&(x=0),d===0?e:(e-=x,e=d*Math.ceil(e/d),u?(x+e)/d:x+e)};l.exports=T},84314:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){return x===void 0&&(x=0),d===0?e:(e-=x,e=d*Math.floor(e/d),u?(x+e)/d:x+e)};l.exports=T},88462:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){return x===void 0&&(x=0),d===0?e:(e-=x,e=d*Math.round(e/d),u?(x+e)/d:x+e)};l.exports=T},23679:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={Ceil:e(82127),Floor:e(84314),To:e(88462)}},92491:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e(75205);var d=e(86459),x=e(98611),u={Actions:e(83979),Animations:e(13517),BlendModes:e(95723),Cache:e(45820),Cameras:e(44143),Core:e(80293),Class:e(56694),Create:e(84106),Curves:e(73962),Data:e(1999),Display:e(24816),DOM:e(3590),Events:e(95146),FX:e(96910),Game:e(15213),GameObjects:e(48013),Geom:e(84068),Input:e(20873),Loader:e(95695),Math:e(5923),Physics:e(53954),Plugins:e(45615),Renderer:e(42069),Scale:e(86754),ScaleModes:e(27394),Scene:e(87157),Scenes:e(20436),Structs:e(20010),Textures:e(87499),Tilemaps:e(52678),Time:e(97121),Tweens:e(75193),Utils:e(22178)};u.Sound=e(56751),u=x(!1,u,d),l.exports=u,e.g.Phaser=u},62832:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(7864),u=e(1539),h=new d({Extends:u,Mixins:[x.Acceleration,x.Angular,x.Bounce,x.Debug,x.Drag,x.Enable,x.Friction,x.Gravity,x.Immovable,x.Mass,x.Pushable,x.Size,x.Velocity],initialize:function(n,r,f,a,c){u.call(this,n,r,f,a,c),this.body=null}});l.exports=h},66150:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(75606),u=e(53996),h=e(35032),o=e(99523),n=e(72632),r=e(30657),f=e(2732),a=e(15147),c=e(91963),p=e(7599),v=e(93736),m=e(85233),y=new d({initialize:function(E){this.scene=E,this.systems=E.sys,this.config=this.getConfig(),this.world,this.add,E.sys.events.once(p.BOOT,this.boot,this),E.sys.events.on(p.START,this.start,this)},boot:function(){this.world=new m(this.scene,this.config),this.add=new o(this.world),this.systems.events.once(p.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new m(this.scene,this.config),this.add=new o(this.world));var P=this.systems.events;n(this.config,"customUpdate",!1)||P.on(p.UPDATE,this.world.update,this.world),P.on(p.POST_UPDATE,this.world.postUpdate,this.world),P.once(p.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(p.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(p.UPDATE,this.world.update,this.world)},getConfig:function(){var P=this.systems.game.config.physics,E=this.systems.settings.physics,S=r(n(E,"arcade",{}),n(P,"arcade",{}));return S},overlap:function(P,E,S,w,R){return S===void 0&&(S=null),w===void 0&&(w=null),R===void 0&&(R=S),this.world.collideObjects(P,E,S,w,R,!0)},collide:function(P,E,S,w,R){return S===void 0&&(S=null),w===void 0&&(w=null),R===void 0&&(R=S),this.world.collideObjects(P,E,S,w,R,!1)},collideTiles:function(P,E,S,w,R){return this.world.collideTiles(P,E,S,w,R)},overlapTiles:function(P,E,S,w,R){return this.world.overlapTiles(P,E,S,w,R)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(P,E,S,w,R,A){w===void 0&&(w=60);var O=Math.atan2(S-P.y,E-P.x);return P.body.acceleration.setToPolar(O,w),R!==void 0&&A!==void 0&&P.body.maxVelocity.set(R,A),O},accelerateToObject:function(P,E,S,w,R){return this.accelerateTo(P,E.x,E.y,S,w,R)},closest:function(P,E){E||(E=this.world.bodies.entries);for(var S=Number.MAX_VALUE,w=null,R=P.x,A=P.y,O=E.length,F=0;F<O;F++){var b=E[F],D=b.body||b;if(!(P===b||P===D||P===D.gameObject||P===D.center)){var I=h(R,A,D.center.x,D.center.y);I<S&&(w=b,S=I)}}return w},furthest:function(P,E){E||(E=this.world.bodies.entries);for(var S=-1,w=null,R=P.x,A=P.y,O=E.length,F=0;F<O;F++){var b=E[F],D=b.body||b;if(!(P===b||P===D||P===D.gameObject||P===D.center)){var I=h(R,A,D.center.x,D.center.y);I>S&&(w=b,S=I)}}return w},moveTo:function(P,E,S,w,R){w===void 0&&(w=60),R===void 0&&(R=0);var A=Math.atan2(S-P.y,E-P.x);return R>0&&(w=u(P.x,P.y,E,S)/(R/1e3)),P.body.velocity.setToPolar(A,w),A},moveToObject:function(P,E,S,w){return this.moveTo(P,E.x,E.y,S,w)},velocityFromAngle:function(P,E,S){return E===void 0&&(E=60),S===void 0&&(S=new v),S.setToPolar(x(P),E)},velocityFromRotation:function(P,E,S){return E===void 0&&(E=60),S===void 0&&(S=new v),S.setToPolar(P,E)},overlapRect:function(P,E,S,w,R,A){return a(this.world,P,E,S,w,R,A)},overlapCirc:function(P,E,S,w,R){return f(this.world,P,E,S,w,R)},shutdown:function(){if(this.world){var P=this.systems.events;P.off(p.UPDATE,this.world.update,this.world),P.off(p.POST_UPDATE,this.world.postUpdate,this.world),P.off(p.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(p.START,this.start,this),this.scene=null,this.systems=null}});c.register("ArcadePhysics",y,"arcadePhysics"),l.exports=y},25084:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(7864),u=e(13747),h=new d({Extends:u,Mixins:[x.Acceleration,x.Angular,x.Bounce,x.Debug,x.Drag,x.Enable,x.Friction,x.Gravity,x.Immovable,x.Mass,x.Pushable,x.Size,x.Velocity],initialize:function(n,r,f,a,c){u.call(this,n,r,f,a,c),this.body=null}});l.exports=h},97602:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47401),u=e(27037),h=e(23701),o=e(74118),n=e(94287),r=e(93736),f=new d({initialize:function(c,p){var v=64,m=64,y={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},P=p!==void 0;P&&p.displayWidth&&(v=p.displayWidth,m=p.displayHeight),P||(p=y),this.world=c,this.gameObject=P?p:void 0,this.isBody=!0,this.transform={x:p.x,y:p.y,rotation:p.angle,scaleX:p.scaleX,scaleY:p.scaleY,displayOriginX:p.displayOriginX,displayOriginY:p.displayOriginY},this.debugShowBody=c.defaults.debugShowBody,this.debugShowVelocity=c.defaults.debugShowVelocity,this.debugBodyColor=c.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new r,this.position=new r(p.x-p.scaleX*p.displayOriginX,p.y-p.scaleY*p.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=p.angle,this.preRotation=p.angle,this.width=v,this.height=m,this.sourceWidth=v,this.sourceHeight=m,p.frame&&(this.sourceWidth=p.frame.realWidth,this.sourceHeight=p.frame.realHeight),this.halfWidth=Math.abs(v/2),this.halfHeight=Math.abs(m/2),this.center=new r(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new r,this.newVelocity=new r,this.deltaMax=new r,this.acceleration=new r,this.allowDrag=!0,this.drag=new r,this.allowGravity=!0,this.gravity=new r,this.bounce=new r,this.worldBounce=null,this.customBoundsRectangle=c.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new r(1e4,1e4),this.maxSpeed=-1,this.friction=new r(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=x.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=x.DYNAMIC_BODY,this._sx=p.scaleX,this._sy=p.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new o},updateBounds:function(){var a=this.gameObject,c=this.transform;if(a.parentContainer){var p=a.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);c.x=p.tx,c.y=p.ty,c.rotation=h(p.rotation),c.scaleX=p.scaleX,c.scaleY=p.scaleY,c.displayOriginX=a.displayOriginX,c.displayOriginY=a.displayOriginY}else c.x=a.x,c.y=a.y,c.rotation=a.angle,c.scaleX=a.scaleX,c.scaleY=a.scaleY,c.displayOriginX=a.displayOriginX,c.displayOriginY=a.displayOriginY;var v=!1;if(this.syncBounds){var m=a.getBounds(this._bounds);this.width=m.width,this.height=m.height,v=!0}else{var y=Math.abs(c.scaleX),P=Math.abs(c.scaleY);(this._sx!==y||this._sy!==P)&&(this.width=this.sourceWidth*y,this.height=this.sourceHeight*P,this._sx=y,this._sy=P,v=!0)}v&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var a=this.transform;this.position.x=a.x+a.scaleX*(this.offset.x-a.displayOriginX),this.position.y=a.y+a.scaleY*(this.offset.y-a.displayOriginY),this.updateCenter()},resetFlags:function(a){a===void 0&&(a=!1);var c=this.wasTouching,p=this.touching,v=this.blocked;a?(c.none=!0,c.up=!1,c.down=!1,c.left=!1,c.right=!1):(c.none=p.none,c.up=p.up,c.down=p.down,c.left=p.left,c.right=p.right),p.none=!0,p.up=!1,p.down=!1,p.left=!1,p.right=!1,v.none=!0,v.up=!1,v.down=!1,v.left=!1,v.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(a,c){a&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),a&&this.update(c)},update:function(a){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,a);var c=this.velocity.x,p=this.velocity.y;this.newVelocity.set(c*a,p*a),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(p,c),this.speed=Math.sqrt(c*c+p*p),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(u.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var a=this.position.x-this.prevFrame.x,c=this.position.y-this.prevFrame.y,p=this.gameObject;if(this.moves){var v=this.deltaMax.x,m=this.deltaMax.y;v!==0&&a!==0&&(a<0&&a<-v?a=-v:a>0&&a>v&&(a=v)),m!==0&&c!==0&&(c<0&&c<-m?c=-m:c>0&&c>m&&(c=m)),p&&(p.x+=a,p.y+=c)}a<0?this.facing=x.FACING_LEFT:a>0&&(this.facing=x.FACING_RIGHT),c<0?this.facing=x.FACING_UP:c>0&&(this.facing=x.FACING_DOWN),this.allowRotation&&p&&(p.angle+=this.deltaZ()),this._tx=a,this._ty=c},setBoundsRectangle:function(a){return this.customBoundsRectangle=a||this.world.bounds,this},checkWorldBounds:function(){var a=this.position,c=this.customBoundsRectangle,p=this.world.checkCollision,v=this.worldBounce?-this.worldBounce.x:-this.bounce.x,m=this.worldBounce?-this.worldBounce.y:-this.bounce.y,y=!1;return a.x<c.x&&p.left?(a.x=c.x,this.velocity.x*=v,this.blocked.left=!0,y=!0):this.right>c.right&&p.right&&(a.x=c.right-this.width,this.velocity.x*=v,this.blocked.right=!0,y=!0),a.y<c.y&&p.up?(a.y=c.y,this.velocity.y*=m,this.blocked.up=!0,y=!0):this.bottom>c.bottom&&p.down&&(a.y=c.bottom-this.height,this.velocity.y*=m,this.blocked.down=!0,y=!0),y&&(this.blocked.none=!1,this.updateCenter()),y},setOffset:function(a,c){return c===void 0&&(c=a),this.offset.set(a,c),this},setGameObject:function(a,c){return c===void 0&&(c=!0),this.world.remove(this),this.gameObject&&this.gameObject.body&&(this.gameObject.body=null),this.gameObject=a,a.body&&(a.body=this),this.setSize(),this.world.add(this),this.enable=c,this},setSize:function(a,c,p){p===void 0&&(p=!0);var v=this.gameObject;if(v&&(!a&&v.frame&&(a=v.frame.realWidth),!c&&v.frame&&(c=v.frame.realHeight)),this.sourceWidth=a,this.sourceHeight=c,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),p&&v&&v.getCenter){var m=(v.width-a)/2,y=(v.height-c)/2;this.offset.set(m,y)}return this.isCircle=!1,this.radius=0,this},setCircle:function(a,c,p){return c===void 0&&(c=this.offset.x),p===void 0&&(p=this.offset.y),a>0?(this.isCircle=!0,this.radius=a,this.sourceWidth=a*2,this.sourceHeight=a*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(c,p),this.updateCenter()):this.isCircle=!1,this},reset:function(a,c){this.stop();var p=this.gameObject;p&&(p.setPosition(a,c),this.rotation=p.angle,this.preRotation=p.angle);var v=this.position;p&&p.getTopLeft?p.getTopLeft(v):v.set(a,c),this.prev.copy(v),this.prevFrame.copy(v),p&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(a){return a.x=this.x,a.y=this.y,a.right=this.right,a.bottom=this.bottom,a},hitTest:function(a,c){if(!this.isCircle)return n(this,a,c);if(this.radius>0&&a>=this.left&&a<=this.right&&c>=this.top&&c<=this.bottom){var p=(this.center.x-a)*(this.center.x-a),v=(this.center.y-c)*(this.center.y-c);return p+v<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(a){var c=this.position,p=c.x+this.halfWidth,v=c.y+this.halfHeight;this.debugShowBody&&(a.lineStyle(a.defaultStrokeWidth,this.debugBodyColor),this.isCircle?a.strokeCircle(p,v,this.width/2):(this.checkCollision.up&&a.lineBetween(c.x,c.y,c.x+this.width,c.y),this.checkCollision.right&&a.lineBetween(c.x+this.width,c.y,c.x+this.width,c.y+this.height),this.checkCollision.down&&a.lineBetween(c.x,c.y+this.height,c.x+this.width,c.y+this.height),this.checkCollision.left&&a.lineBetween(c.x,c.y,c.x,c.y+this.height))),this.debugShowVelocity&&(a.lineStyle(a.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),a.lineBetween(p,v,p+this.velocity.x/2,v+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(a,c,p,v){a===void 0&&(a=!0),this.collideWorldBounds=a;var m=c!==void 0,y=p!==void 0;return(m||y)&&(this.worldBounce||(this.worldBounce=new r),m&&(this.worldBounce.x=c),y&&(this.worldBounce.y=p)),v!==void 0&&(this.onWorldBounds=v),this},setVelocity:function(a,c){return this.velocity.set(a,c),a=this.velocity.x,c=this.velocity.y,this.speed=Math.sqrt(a*a+c*c),this},setVelocityX:function(a){return this.setVelocity(a,this.velocity.y)},setVelocityY:function(a){return this.setVelocity(this.velocity.x,a)},setMaxVelocity:function(a,c){return this.maxVelocity.set(a,c),this},setMaxVelocityX:function(a){return this.maxVelocity.x=a,this},setMaxVelocityY:function(a){return this.maxVelocity.y=a,this},setMaxSpeed:function(a){return this.maxSpeed=a,this},setBounce:function(a,c){return this.bounce.set(a,c),this},setBounceX:function(a){return this.bounce.x=a,this},setBounceY:function(a){return this.bounce.y=a,this},setAcceleration:function(a,c){return this.acceleration.set(a,c),this},setAccelerationX:function(a){return this.acceleration.x=a,this},setAccelerationY:function(a){return this.acceleration.y=a,this},setAllowDrag:function(a){return a===void 0&&(a=!0),this.allowDrag=a,this},setAllowGravity:function(a){return a===void 0&&(a=!0),this.allowGravity=a,this},setAllowRotation:function(a){return a===void 0&&(a=!0),this.allowRotation=a,this},setDrag:function(a,c){return this.drag.set(a,c),this},setDamping:function(a){return this.useDamping=a,this},setDragX:function(a){return this.drag.x=a,this},setDragY:function(a){return this.drag.y=a,this},setGravity:function(a,c){return this.gravity.set(a,c),this},setGravityX:function(a){return this.gravity.x=a,this},setGravityY:function(a){return this.gravity.y=a,this},setFriction:function(a,c){return this.friction.set(a,c),this},setFrictionX:function(a){return this.friction.x=a,this},setFrictionY:function(a){return this.friction.y=a,this},setAngularVelocity:function(a){return this.angularVelocity=a,this},setAngularAcceleration:function(a){return this.angularAcceleration=a,this},setAngularDrag:function(a){return this.angularDrag=a,this},setMass:function(a){return this.mass=a,this},setImmovable:function(a){return a===void 0&&(a=!0),this.immovable=a,this},setEnable:function(a){return a===void 0&&(a=!0),this.enable=a,this},processX:function(a,c,p,v){this.x+=a,this.updateCenter(),c!==null&&(this.velocity.x=c);var m=this.blocked;p&&(m.left=!0,m.none=!1),v&&(m.right=!0,m.none=!1)},processY:function(a,c,p,v){this.y+=a,this.updateCenter(),c!==null&&(this.velocity.y=c);var m=this.blocked;p&&(m.up=!0,m.none=!1),v&&(m.down=!0,m.none=!1)},x:{get:function(){return this.position.x},set:function(a){this.position.x=a}},y:{get:function(){return this.position.y},set:function(a){this.position.y=a}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});l.exports=f},3909:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(h,o,n,r,f,a,c){this.world=h,this.name="",this.active=!0,this.overlapOnly=o,this.object1=n,this.object2=r,this.collideCallback=f,this.processCallback=a,this.callbackContext=c},setName:function(u){return this.name=u,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});l.exports=x},99523:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(62832),x=e(25084),u=e(97602),h=e(56694),o=e(47401),n=e(10481),r=e(66634),f=e(46346),a=new h({initialize:function(p){this.world=p,this.scene=p.scene,this.sys=p.scene.sys},collider:function(c,p,v,m,y){return this.world.addCollider(c,p,v,m,y)},overlap:function(c,p,v,m,y){return this.world.addOverlap(c,p,v,m,y)},existing:function(c,p){var v=p?o.STATIC_BODY:o.DYNAMIC_BODY;return this.world.enableBody(c,v),c},staticImage:function(c,p,v,m){var y=new d(this.scene,c,p,v,m);return this.sys.displayList.add(y),this.world.enableBody(y,o.STATIC_BODY),y},image:function(c,p,v,m){var y=new d(this.scene,c,p,v,m);return this.sys.displayList.add(y),this.world.enableBody(y,o.DYNAMIC_BODY),y},staticSprite:function(c,p,v,m){var y=new x(this.scene,c,p,v,m);return this.sys.displayList.add(y),this.sys.updateList.add(y),this.world.enableBody(y,o.STATIC_BODY),y},sprite:function(c,p,v,m){var y=new x(this.scene,c,p,v,m);return this.sys.displayList.add(y),this.sys.updateList.add(y),this.world.enableBody(y,o.DYNAMIC_BODY),y},staticGroup:function(c,p){return this.sys.updateList.add(new f(this.world,this.world.scene,c,p))},group:function(c,p){return this.sys.updateList.add(new n(this.world,this.world.scene,c,p))},body:function(c,p,v,m){var y=new u(this.world);return y.position.set(c,p),v&&m&&y.setSize(v,m),this.world.add(y,o.DYNAMIC_BODY),y},staticBody:function(c,p,v,m){var y=new r(this.world);return y.position.set(c,p),v&&m&&y.setSize(v,m),this.world.add(y,o.STATIC_BODY),y},destroy:function(){this.world=null,this.scene=null,this.sys=null}});l.exports=a},75671:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(47401),x=function(u,h,o,n){var r=0,f=u.deltaAbsX()+h.deltaAbsX()+n;return u._dx===0&&h._dx===0?(u.embedded=!0,h.embedded=!0):u._dx>h._dx?(r=u.right-h.x,r>f&&!o||u.checkCollision.right===!1||h.checkCollision.left===!1?r=0:(u.touching.none=!1,u.touching.right=!0,h.touching.none=!1,h.touching.left=!0,h.physicsType===d.STATIC_BODY&&!o&&(u.blocked.none=!1,u.blocked.right=!0),u.physicsType===d.STATIC_BODY&&!o&&(h.blocked.none=!1,h.blocked.left=!0))):u._dx<h._dx&&(r=u.x-h.width-h.x,-r>f&&!o||u.checkCollision.left===!1||h.checkCollision.right===!1?r=0:(u.touching.none=!1,u.touching.left=!0,h.touching.none=!1,h.touching.right=!0,h.physicsType===d.STATIC_BODY&&!o&&(u.blocked.none=!1,u.blocked.left=!0),u.physicsType===d.STATIC_BODY&&!o&&(h.blocked.none=!1,h.blocked.right=!0))),u.overlapX=r,h.overlapX=r,r};l.exports=x},66185:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(47401),x=function(u,h,o,n){var r=0,f=u.deltaAbsY()+h.deltaAbsY()+n;return u._dy===0&&h._dy===0?(u.embedded=!0,h.embedded=!0):u._dy>h._dy?(r=u.bottom-h.y,r>f&&!o||u.checkCollision.down===!1||h.checkCollision.up===!1?r=0:(u.touching.none=!1,u.touching.down=!0,h.touching.none=!1,h.touching.up=!0,h.physicsType===d.STATIC_BODY&&!o&&(u.blocked.none=!1,u.blocked.down=!0),u.physicsType===d.STATIC_BODY&&!o&&(h.blocked.none=!1,h.blocked.up=!0))):u._dy<h._dy&&(r=u.y-h.bottom,-r>f&&!o||u.checkCollision.up===!1||h.checkCollision.down===!1?r=0:(u.touching.none=!1,u.touching.up=!0,h.touching.none=!1,h.touching.down=!0,h.physicsType===d.STATIC_BODY&&!o&&(u.blocked.none=!1,u.blocked.up=!0),u.physicsType===d.STATIC_BODY&&!o&&(h.blocked.none=!1,h.blocked.down=!0))),u.overlapY=r,h.overlapY=r,r};l.exports=x},10481:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(25084),x=e(56694),u=e(47401),h=e(72632),o=e(59192),n=e(42911),r=new x({Extends:o,initialize:function(a,c,p,v){if(!p&&!v)v={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(n(p))v=p,p=null,v.internalCreateCallback=this.createCallbackHandler,v.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(p)&&n(p[0])){v=p[0];var m=this;p.forEach(function(y){y.internalCreateCallback=m.createCallbackHandler,y.internalRemoveCallback=m.removeCallbackHandler}),p=null}else v={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=a,v.classType=h(v,"classType",d),this.physicsType=u.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:h(v,"collideWorldBounds",!1),setBoundsRectangle:h(v,"customBoundsRectangle",null),setAccelerationX:h(v,"accelerationX",0),setAccelerationY:h(v,"accelerationY",0),setAllowDrag:h(v,"allowDrag",!0),setAllowGravity:h(v,"allowGravity",!0),setAllowRotation:h(v,"allowRotation",!0),setDamping:h(v,"useDamping",!1),setBounceX:h(v,"bounceX",0),setBounceY:h(v,"bounceY",0),setDragX:h(v,"dragX",0),setDragY:h(v,"dragY",0),setEnable:h(v,"enable",!0),setGravityX:h(v,"gravityX",0),setGravityY:h(v,"gravityY",0),setFrictionX:h(v,"frictionX",0),setFrictionY:h(v,"frictionY",0),setMaxSpeed:h(v,"maxSpeed",-1),setMaxVelocityX:h(v,"maxVelocityX",1e4),setMaxVelocityY:h(v,"maxVelocityY",1e4),setVelocityX:h(v,"velocityX",0),setVelocityY:h(v,"velocityY",0),setAngularVelocity:h(v,"angularVelocity",0),setAngularAcceleration:h(v,"angularAcceleration",0),setAngularDrag:h(v,"angularDrag",0),setMass:h(v,"mass",1),setImmovable:h(v,"immovable",!1)},o.call(this,c,p,v),this.type="PhysicsGroup"},createCallbackHandler:function(f){f.body||this.world.enableBody(f,u.DYNAMIC_BODY);var a=f.body;for(var c in this.defaults)a[c](this.defaults[c])},removeCallbackHandler:function(f){f.body&&this.world.disableBody(f)},setVelocity:function(f,a,c){c===void 0&&(c=0);for(var p=this.getChildren(),v=0;v<p.length;v++)p[v].body.velocity.set(f+v*c,a+v*c);return this},setVelocityX:function(f,a){a===void 0&&(a=0);for(var c=this.getChildren(),p=0;p<c.length;p++)c[p].body.velocity.x=f+p*a;return this},setVelocityY:function(f,a){a===void 0&&(a=0);for(var c=this.getChildren(),p=0;p<c.length;p++)c[p].body.velocity.y=f+p*a;return this}});l.exports=r},22916:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T,e,d,x,u,h,o,n,r,f,a,c,p,v,m,y,P,E=function(F,b,D){T=F,e=b;var I=T.velocity.x,B=e.velocity.x;return d=T.pushable,r=T._dx<0,f=T._dx>0,a=T._dx===0,m=Math.abs(T.right-e.x)<=Math.abs(e.right-T.x),o=B-I*T.bounce.x,x=e.pushable,c=e._dx<0,p=e._dx>0,v=e._dx===0,y=!m,n=I-B*e.bounce.x,P=Math.abs(D),S()},S=function(){return f&&m&&e.blocked.right?(T.processX(-P,o,!1,!0),1):r&&y&&e.blocked.left?(T.processX(P,o,!0),1):p&&y&&T.blocked.right?(e.processX(-P,n,!1,!0),2):c&&m&&T.blocked.left?(e.processX(P,n,!0),2):0},w=function(){var F=T.velocity.x,b=e.velocity.x,D=Math.sqrt(b*b*e.mass/T.mass)*(b>0?1:-1),I=Math.sqrt(F*F*T.mass/e.mass)*(F>0?1:-1),B=(D+I)*.5;return D-=B,I-=B,u=B+D*T.bounce.x,h=B+I*e.bounce.x,r&&y?R(0):c&&m?R(1):f&&m?R(2):p&&y?R(3):!1},R=function(F){if(d&&x)P*=.5,F===0||F===3?(T.processX(P,u),e.processX(-P,h)):(T.processX(-P,u),e.processX(P,h));else if(d&&!x)F===0||F===3?T.processX(P,o,!0):T.processX(-P,o,!1,!0);else if(!d&&x)F===0||F===3?e.processX(-P,n,!1,!0):e.processX(P,n,!0);else{var b=P*.5;F===0?v?(T.processX(P,0,!0),e.processX(0,null,!1,!0)):p?(T.processX(b,0,!0),e.processX(-b,0,!1,!0)):(T.processX(b,e.velocity.x,!0),e.processX(-b,null,!1,!0)):F===1?a?(T.processX(0,null,!1,!0),e.processX(P,0,!0)):f?(T.processX(-b,0,!1,!0),e.processX(b,0,!0)):(T.processX(-b,null,!1,!0),e.processX(b,T.velocity.x,!0)):F===2?v?(T.processX(-P,0,!1,!0),e.processX(0,null,!0)):c?(T.processX(-b,0,!1,!0),e.processX(b,0,!0)):(T.processX(-b,e.velocity.x,!1,!0),e.processX(b,null,!0)):F===3&&(a?(T.processX(0,null,!0),e.processX(-P,0,!1,!0)):r?(T.processX(b,0,!0),e.processX(-b,0,!1,!0)):(T.processX(b,e.velocity.y,!0),e.processX(-b,null,!1,!0)))}return!0},A=function(F){F===1?e.velocity.x=0:m?e.processX(P,n,!0):e.processX(-P,n,!1,!0),T.moves&&(e.y+=(T.y-T.prev.y)*T.friction.y,e._dy=e.y-e.prev.y)},O=function(F){F===2?T.velocity.x=0:y?T.processX(P,o,!0):T.processX(-P,o,!1,!0),e.moves&&(T.y+=(e.y-e.prev.y)*e.friction.y,T._dy=T.y-T.prev.y)};l.exports={BlockCheck:S,Check:w,Set:E,Run:R,RunImmovableBody1:A,RunImmovableBody2:O}},67050:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T,e,d,x,u,h,o,n,r,f,a,c,p,v,m,y,P,E=function(F,b,D){T=F,e=b;var I=T.velocity.y,B=e.velocity.y;return d=T.pushable,r=T._dy<0,f=T._dy>0,a=T._dy===0,m=Math.abs(T.bottom-e.y)<=Math.abs(e.bottom-T.y),o=B-I*T.bounce.y,x=e.pushable,c=e._dy<0,p=e._dy>0,v=e._dy===0,y=!m,n=I-B*e.bounce.y,P=Math.abs(D),S()},S=function(){return f&&m&&e.blocked.down?(T.processY(-P,o,!1,!0),1):r&&y&&e.blocked.up?(T.processY(P,o,!0),1):p&&y&&T.blocked.down?(e.processY(-P,n,!1,!0),2):c&&m&&T.blocked.up?(e.processY(P,n,!0),2):0},w=function(){var F=T.velocity.y,b=e.velocity.y,D=Math.sqrt(b*b*e.mass/T.mass)*(b>0?1:-1),I=Math.sqrt(F*F*T.mass/e.mass)*(F>0?1:-1),B=(D+I)*.5;return D-=B,I-=B,u=B+D*T.bounce.y,h=B+I*e.bounce.y,r&&y?R(0):c&&m?R(1):f&&m?R(2):p&&y?R(3):!1},R=function(F){if(d&&x)P*=.5,F===0||F===3?(T.processY(P,u),e.processY(-P,h)):(T.processY(-P,u),e.processY(P,h));else if(d&&!x)F===0||F===3?T.processY(P,o,!0):T.processY(-P,o,!1,!0);else if(!d&&x)F===0||F===3?e.processY(-P,n,!1,!0):e.processY(P,n,!0);else{var b=P*.5;F===0?v?(T.processY(P,0,!0),e.processY(0,null,!1,!0)):p?(T.processY(b,0,!0),e.processY(-b,0,!1,!0)):(T.processY(b,e.velocity.y,!0),e.processY(-b,null,!1,!0)):F===1?a?(T.processY(0,null,!1,!0),e.processY(P,0,!0)):f?(T.processY(-b,0,!1,!0),e.processY(b,0,!0)):(T.processY(-b,null,!1,!0),e.processY(b,T.velocity.y,!0)):F===2?v?(T.processY(-P,0,!1,!0),e.processY(0,null,!0)):c?(T.processY(-b,0,!1,!0),e.processY(b,0,!0)):(T.processY(-b,e.velocity.y,!1,!0),e.processY(b,null,!0)):F===3&&(a?(T.processY(0,null,!0),e.processY(-P,0,!1,!0)):r?(T.processY(b,0,!0),e.processY(-b,0,!1,!0)):(T.processY(b,e.velocity.y,!0),e.processY(-b,null,!1,!0)))}return!0},A=function(F){F===1?e.velocity.y=0:m?e.processY(P,n,!0):e.processY(-P,n,!1,!0),T.moves&&(e.x+=(T.x-T.prev.x)*T.friction.x,e._dx=e.x-e.prev.x)},O=function(F){F===2?T.velocity.y=0:y?T.processY(P,o,!0):T.processY(-P,o,!1,!0),e.moves&&(T.x+=(e.x-e.prev.x)*e.friction.x,T._dx=T.x-T.prev.x)};l.exports={BlockCheck:S,Check:w,Set:E,Run:R,RunImmovableBody1:A,RunImmovableBody2:O}},61777:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(75671),x=e(22916),u=function(h,o,n,r,f){f===void 0&&(f=d(h,o,n,r));var a=h.immovable,c=o.immovable;if(n||f===0||a&&c||h.customSeparateX||o.customSeparateX)return f!==0||h.embedded&&o.embedded;var p=x.Set(h,o,f);return!a&&!c?p>0?!0:x.Check():(a?x.RunImmovableBody1(p):c&&x.RunImmovableBody2(p),!0)};l.exports=u},25299:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66185),x=e(67050),u=function(h,o,n,r,f){f===void 0&&(f=d(h,o,n,r));var a=h.immovable,c=o.immovable;if(n||f===0||a&&c||h.customSeparateY||o.customSeparateY)return f!==0||h.embedded&&o.embedded;var p=x.Set(h,o,f);return!a&&!c?p>0?!0:x.Check():(a?x.RunImmovableBody1(p):c&&x.RunImmovableBody2(p),!0)};l.exports=u},66634:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(65650),x=e(56694),u=e(47401),h=e(94287),o=e(93736),n=new x({initialize:function(f,a){var c=64,p=64,v={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},m=a!==void 0;m&&a.displayWidth&&(c=a.displayWidth,p=a.displayHeight),m||(a=v),this.world=f,this.gameObject=m?a:void 0,this.isBody=!0,this.debugShowBody=f.defaults.debugShowStaticBody,this.debugBodyColor=f.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new o,this.position=new o(a.x-c*a.originX,a.y-p*a.originY),this.width=c,this.height=p,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new o(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=o.ZERO,this.allowGravity=!1,this.gravity=o.ZERO,this.bounce=o.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=u.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(r,f){return r&&r!==this.gameObject&&(this.gameObject.body=null,r.body=this,this.gameObject=r),f&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var r=this.gameObject;return r.getTopLeft(this.position),this.width=r.displayWidth,this.height=r.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(r,f){return f===void 0&&(f=r),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(r,f),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(r,f,a){a===void 0&&(a=!0);var c=this.gameObject;if(!r&&c.frame&&(r=c.frame.realWidth),!f&&c.frame&&(f=c.frame.realHeight),this.world.staticTree.remove(this),this.width=r,this.height=f,this.halfWidth=Math.floor(r/2),this.halfHeight=Math.floor(f/2),a&&c.getCenter){var p=c.displayWidth/2,v=c.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(p-this.halfWidth,v-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(r,f,a){return f===void 0&&(f=this.offset.x),a===void 0&&(a=this.offset.y),r>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=r,this.width=r*2,this.height=r*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(f,a),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(r,f){var a=this.gameObject;r===void 0&&(r=a.x),f===void 0&&(f=a.y),this.world.staticTree.remove(this),a.setPosition(r,f),a.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(r){return r.x=this.x,r.y=this.y,r.right=this.right,r.bottom=this.bottom,r},hitTest:function(r,f){return this.isCircle?d(this,r,f):h(this,r,f)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(r){var f=this.position,a=f.x+this.halfWidth,c=f.y+this.halfHeight;this.debugShowBody&&(r.lineStyle(r.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?r.strokeCircle(a,c,this.width/2):r.strokeRect(f.x,f.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(r){return r<=0&&(r=.1),this.mass=r,this},x:{get:function(){return this.position.x},set:function(r){this.world.staticTree.remove(this),this.position.x=r,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(r){this.world.staticTree.remove(this),this.position.y=r,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});l.exports=n},46346:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(25084),x=e(56694),u=e(47401),h=e(72632),o=e(59192),n=e(42911),r=new x({Extends:o,initialize:function(a,c,p,v){!p&&!v?v={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:d}:n(p)?(v=p,p=null,v.internalCreateCallback=this.createCallbackHandler,v.internalRemoveCallback=this.removeCallbackHandler,v.createMultipleCallback=this.createMultipleCallbackHandler,v.classType=h(v,"classType",d)):Array.isArray(p)&&n(p[0])?(v=p,p=null,v.forEach(function(m){m.internalCreateCallback=this.createCallbackHandler,m.internalRemoveCallback=this.removeCallbackHandler,m.createMultipleCallback=this.createMultipleCallbackHandler,m.classType=h(m,"classType",d)})):v={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=a,this.physicsType=u.STATIC_BODY,o.call(this,c,p,v),this.type="StaticPhysicsGroup"},createCallbackHandler:function(f){f.body||this.world.enableBody(f,u.STATIC_BODY)},removeCallbackHandler:function(f){f.body&&this.world.disableBody(f)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var f=this.children.entries,a=0;a<f.length;a++)f[a].body.reset();return this}});l.exports=r},85233:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(94240),x=e(97602),u=e(82897),h=e(56694),o=e(3909),n=e(47401),r=e(53996),f=e(92951),a=e(6659),c=e(27037),p=e(88456),v=e(41935),m=e(54726),y=e(75671),P=e(66185),E=e(44662),S=e(10850),w=e(83392),R=e(74623),A=e(25163),O=e(74118),F=e(68687),b=e(27354),D=e(61777),I=e(25299),B=e(58403),k=e(66634),U=e(28808),X=e(69360),H=e(93736),N=e(1071),z=new h({Extends:a,initialize:function(G,V){a.call(this),this.scene=G,this.bodies=new B,this.staticBodies=new B,this.pendingDestroy=new B,this.colliders=new R,this.gravity=new H(S(V,"gravity.x",0),S(V,"gravity.y",0)),this.bounds=new O(S(V,"x",0),S(V,"y",0),S(V,"width",G.sys.scale.width),S(V,"height",G.sys.scale.height)),this.checkCollision={up:S(V,"checkCollision.up",!0),down:S(V,"checkCollision.down",!0),left:S(V,"checkCollision.left",!0),right:S(V,"checkCollision.right",!0)},this.fps=S(V,"fps",60),this.fixedStep=S(V,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=S(V,"timeScale",1),this.OVERLAP_BIAS=S(V,"overlapBias",4),this.TILE_BIAS=S(V,"tileBias",16),this.forceX=S(V,"forceX",!1),this.isPaused=S(V,"isPaused",!1),this._total=0,this.drawDebug=S(V,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:S(V,"debugShowBody",!0),debugShowStaticBody:S(V,"debugShowStaticBody",!0),debugShowVelocity:S(V,"debugShowVelocity",!0),bodyDebugColor:S(V,"debugBodyColor",16711935),staticBodyDebugColor:S(V,"debugStaticBodyColor",255),velocityDebugColor:S(V,"debugVelocityColor",65280)},this.maxEntries=S(V,"maxEntries",16),this.useTree=S(V,"useTree",!0),this.tree=new F(this.maxEntries),this.staticTree=new F(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new X,this._tempMatrix2=new X,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(L,G){G===void 0&&(G=n.DYNAMIC_BODY),Array.isArray(L)||(L=[L]);for(var V=0;V<L.length;V++){var Y=L[V];if(Y.isParent)for(var W=Y.getChildren(),$=0;$<W.length;$++){var K=W[$];K.isParent?this.enable(K,G):this.enableBody(K,G)}else this.enableBody(Y,G)}},enableBody:function(L,G){return G===void 0&&(G=n.DYNAMIC_BODY),L.hasTransformComponent&&(L.body||(G===n.DYNAMIC_BODY?L.body=new x(this,L):G===n.STATIC_BODY&&(L.body=new k(this,L))),this.add(L.body)),L},add:function(L){return L.physicsType===n.DYNAMIC_BODY?this.bodies.set(L):L.physicsType===n.STATIC_BODY&&(this.staticBodies.set(L),this.staticTree.insert(L)),L.enable=!0,L},disable:function(L){Array.isArray(L)||(L=[L]);for(var G=0;G<L.length;G++){var V=L[G];if(V.isParent)for(var Y=V.getChildren(),W=0;W<Y.length;W++){var $=Y[W];$.isParent?this.disable($):this.disableBody($.body)}else this.disableBody(V.body)}},disableBody:function(L){this.remove(L),L.enable=!1},remove:function(L){L.physicsType===n.DYNAMIC_BODY?(this.tree.remove(L),this.bodies.delete(L)):L.physicsType===n.STATIC_BODY&&(this.staticBodies.delete(L),this.staticTree.remove(L))},createDebugGraphic:function(){var L=this.scene.sys.add.graphics({x:0,y:0});return L.setDepth(Number.MAX_VALUE),this.debugGraphic=L,this.drawDebug=!0,L},setBounds:function(L,G,V,Y,W,$,K,j){return this.bounds.setTo(L,G,V,Y),W!==void 0&&this.setBoundsCollision(W,$,K,j),this},setBoundsCollision:function(L,G,V,Y){return L===void 0&&(L=!0),G===void 0&&(G=!0),V===void 0&&(V=!0),Y===void 0&&(Y=!0),this.checkCollision.left=L,this.checkCollision.right=G,this.checkCollision.up=V,this.checkCollision.down=Y,this},pause:function(){return this.isPaused=!0,this.emit(c.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(c.RESUME),this},addCollider:function(L,G,V,Y,W){V===void 0&&(V=null),Y===void 0&&(Y=null),W===void 0&&(W=V);var $=new o(this,!1,L,G,V,Y,W);return this.colliders.add($),$},addOverlap:function(L,G,V,Y,W){V===void 0&&(V=null),Y===void 0&&(Y=null),W===void 0&&(W=V);var $=new o(this,!0,L,G,V,Y,W);return this.colliders.add($),$},removeCollider:function(L){return this.colliders.remove(L),this},setFPS:function(L){return this.fps=L,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(L,G){if(!(this.isPaused||this.bodies.size===0)){var V,Y=this._frameTime,W=this._frameTimeMS*this.timeScale;this._elapsed+=G;var $,K=this.bodies.entries,j=this._elapsed>=W;for(this.fixedStep||(Y=G*.001,j=!0,this._elapsed=0),V=0;V<K.length;V++)$=K[V],$.enable&&$.preUpdate(j,Y);if(j){this._elapsed-=W,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(K));var J=this.colliders.update();for(V=0;V<J.length;V++){var q=J[V];q.active&&q.update()}this.emit(c.WORLD_STEP,Y)}for(;this._elapsed>=W;)this._elapsed-=W,this.step(Y)}},step:function(L){var G,V,Y=this.bodies.entries,W=Y.length;for(G=0;G<W;G++)V=Y[G],V.enable&&V.update(L);this.useTree&&(this.tree.clear(),this.tree.load(Y));var $=this.colliders.update();for(G=0;G<$.length;G++){var K=$[G];K.active&&K.update()}this.emit(c.WORLD_STEP,L),this.stepsLastFrame++},postUpdate:function(){var L,G,V=this.bodies.entries,Y=V.length,W=this.bodies,$=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,L=0;L<Y;L++)G=V[L],G.enable&&G.postUpdate();if(this.drawDebug){var K=this.debugGraphic;for(K.clear(),L=0;L<Y;L++)G=V[L],G.willDrawDebug()&&G.drawDebug(K);for(V=$.entries,Y=V.length,L=0;L<Y;L++)G=V[L],G.willDrawDebug()&&G.drawDebug(K)}var j=this.pendingDestroy;if(j.size>0){var J=this.tree,q=this.staticTree;for(V=j.entries,Y=V.length,L=0;L<Y;L++)G=V[L],G.physicsType===n.DYNAMIC_BODY?(J.remove(G),W.delete(G)):G.physicsType===n.STATIC_BODY&&(q.remove(G),$.delete(G)),G.world=void 0,G.gameObject=void 0;j.clear()}},updateMotion:function(L,G){L.allowRotation&&this.computeAngularVelocity(L,G),this.computeVelocity(L,G)},computeAngularVelocity:function(L,G){var V=L.angularVelocity,Y=L.angularAcceleration,W=L.angularDrag,$=L.maxAngular;Y?V+=Y*G:L.allowDrag&&W&&(W*=G,v(V-W,0,.1)?V-=W:m(V+W,0,.1)?V+=W:V=0),V=u(V,-$,$);var K=V-L.angularVelocity;L.angularVelocity+=K,L.rotation+=L.angularVelocity*G},computeVelocity:function(L,G){var V=L.velocity.x,Y=L.acceleration.x,W=L.drag.x,$=L.maxVelocity.x,K=L.velocity.y,j=L.acceleration.y,J=L.drag.y,q=L.maxVelocity.y,_=L.speed,et=L.maxSpeed,tt=L.allowDrag,rt=L.useDamping;L.allowGravity&&(V+=(this.gravity.x+L.gravity.x)*G,K+=(this.gravity.y+L.gravity.y)*G),Y?V+=Y*G:tt&&W&&(rt?(W=Math.pow(W,G),V*=W,_=Math.sqrt(V*V+K*K),p(_,0,.001)&&(V=0)):(W*=G,v(V-W,0,.01)?V-=W:m(V+W,0,.01)?V+=W:V=0)),j?K+=j*G:tt&&J&&(rt?(J=Math.pow(J,G),K*=J,_=Math.sqrt(V*V+K*K),p(_,0,.001)&&(K=0)):(J*=G,v(K-J,0,.01)?K-=J:m(K+J,0,.01)?K+=J:K=0)),V=u(V,-$,$),K=u(K,-q,q),L.velocity.set(V,K),et>-1&&L.velocity.length()>et&&(L.velocity.normalize().scale(et),_=et),L.speed=_},separate:function(L,G,V,Y,W){var $,K,j=!1,J=!0;if(!L.enable||!G.enable||L.checkCollision.none||G.checkCollision.none||!this.intersects(L,G)||V&&V.call(Y,L.gameObject,G.gameObject)===!1)return j;if(L.isCircle||G.isCircle){var q=this.separateCircle(L,G,W);q.result?(j=!0,J=!1):($=q.x,K=q.y,J=!0)}if(J){var _=!1,et=!1,tt=this.OVERLAP_BIAS;W?(_=D(L,G,W,tt,$),et=I(L,G,W,tt,K)):this.forceX||Math.abs(this.gravity.y+L.gravity.y)<Math.abs(this.gravity.x+L.gravity.x)?(_=D(L,G,W,tt,$),this.intersects(L,G)&&(et=I(L,G,W,tt,K))):(et=I(L,G,W,tt,K),this.intersects(L,G)&&(_=D(L,G,W,tt,$))),j=_||et}return j&&(W?(L.onOverlap||G.onOverlap)&&this.emit(c.OVERLAP,L.gameObject,G.gameObject,L,G):(L.onCollide||G.onCollide)&&this.emit(c.COLLIDE,L.gameObject,G.gameObject,L,G)),j},separateCircle:function(L,G,V){y(L,G,!1,0),P(L,G,!1,0);var Y=L.isCircle,W=G.isCircle,$=L.center,K=G.center,j=L.immovable,J=G.immovable,q=L.velocity,_=G.velocity,et=0,tt=!0;if(Y!==W){tt=!1;var rt=$.x,ft=$.y,vt=L.halfWidth,ct=G.position.x,st=G.position.y,dt=G.right,ut=G.bottom;W&&(rt=K.x,ft=K.y,vt=G.halfWidth,ct=L.position.x,st=L.position.y,dt=L.right,ut=L.bottom),ft<st?rt<ct?et=r(rt,ft,ct,st)-vt:rt>dt&&(et=r(rt,ft,dt,st)-vt):ft>ut&&(rt<ct?et=r(rt,ft,ct,ut)-vt:rt>dt&&(et=r(rt,ft,dt,ut)-vt)),et*=-1}else et=L.halfWidth+G.halfWidth-f($,K);L.overlapR=et,G.overlapR=et;var Ct=d($,K),Tt=(et+w.EPSILON)*Math.cos(Ct),Xt=(et+w.EPSILON)*Math.sin(Ct),Bt={overlap:et,result:!1,x:Tt,y:Xt};if(V&&(!tt||tt&&et!==0))return Bt.result=!0,Bt;if(!tt&&et===0||j&&J||L.customSeparateX||G.customSeparateX)return Bt.x=void 0,Bt.y=void 0,Bt;var Ot=!L.pushable&&!G.pushable;if(tt){var yt=$.x-K.x,Gt=$.y-K.y,Z=Math.sqrt(Math.pow(yt,2)+Math.pow(Gt,2)),Q=(K.x-$.x)/Z||0,nt=(K.y-$.y)/Z||0,it=2*(q.x*Q+q.y*nt-_.x*Q-_.y*nt)/(L.mass+G.mass);(j||J)&&(it*=2),j||(q.x=q.x-it/L.mass*Q,q.y=q.y-it/L.mass*nt,q.multiply(L.bounce)),J||(_.x=_.x+it/G.mass*Q,_.y=_.y+it/G.mass*nt,_.multiply(G.bounce)),!j&&!J&&(Tt*=.5,Xt*=.5),j||(L.x-=Tt,L.y-=Xt,L.updateCenter()),J||(G.x+=Tt,G.y+=Xt,G.updateCenter()),Bt.result=!0}else!j||L.pushable||Ot?(L.x-=Tt,L.y-=Xt,L.updateCenter()):(!J||G.pushable||Ot)&&(G.x+=Tt,G.y+=Xt,G.updateCenter()),Bt.x=void 0,Bt.y=void 0;return Bt},intersects:function(L,G){return L===G?!1:!L.isCircle&&!G.isCircle?!(L.right<=G.left||L.bottom<=G.top||L.left>=G.right||L.top>=G.bottom):L.isCircle?G.isCircle?f(L.center,G.center)<=L.halfWidth+G.halfWidth:this.circleBodyIntersects(L,G):this.circleBodyIntersects(G,L)},circleBodyIntersects:function(L,G){var V=u(L.center.x,G.left,G.right),Y=u(L.center.y,G.top,G.bottom),W=(L.center.x-V)*(L.center.x-V),$=(L.center.y-Y)*(L.center.y-Y);return W+$<=L.halfWidth*L.halfWidth},overlap:function(L,G,V,Y,W){return V===void 0&&(V=null),Y===void 0&&(Y=null),W===void 0&&(W=V),this.collideObjects(L,G,V,Y,W,!0)},collide:function(L,G,V,Y,W){return V===void 0&&(V=null),Y===void 0&&(Y=null),W===void 0&&(W=V),this.collideObjects(L,G,V,Y,W,!1)},collideObjects:function(L,G,V,Y,W,$){var K,j;L.isParent&&(L.physicsType===void 0||G===void 0||L===G)&&(L=L.children.entries),G&&G.isParent&&G.physicsType===void 0&&(G=G.children.entries);var J=Array.isArray(L),q=Array.isArray(G);if(this._total=0,!J&&!q)this.collideHandler(L,G,V,Y,W,$);else if(!J&&q)for(K=0;K<G.length;K++)this.collideHandler(L,G[K],V,Y,W,$);else if(J&&!q)if(G)for(K=0;K<L.length;K++)this.collideHandler(L[K],G,V,Y,W,$);else for(K=0;K<L.length;K++){var _=L[K];for(j=K+1;j<L.length;j++)K!==j&&this.collideHandler(_,L[j],V,Y,W,$)}else for(K=0;K<L.length;K++)for(j=0;j<G.length;j++)this.collideHandler(L[K],G[j],V,Y,W,$);return this._total>0},collideHandler:function(L,G,V,Y,W,$){if(G===void 0&&L.isParent)return this.collideGroupVsGroup(L,L,V,Y,W,$);if(!L||!G)return!1;if(L.body||L.isBody){if(G.body||G.isBody)return this.collideSpriteVsSprite(L,G,V,Y,W,$);if(G.isParent)return this.collideSpriteVsGroup(L,G,V,Y,W,$);if(G.isTilemap)return this.collideSpriteVsTilemapLayer(L,G,V,Y,W,$)}else if(L.isParent){if(G.body||G.isBody)return this.collideSpriteVsGroup(G,L,V,Y,W,$);if(G.isParent)return this.collideGroupVsGroup(L,G,V,Y,W,$);if(G.isTilemap)return this.collideGroupVsTilemapLayer(L,G,V,Y,W,$)}else if(L.isTilemap){if(G.body||G.isBody)return this.collideSpriteVsTilemapLayer(G,L,V,Y,W,$);if(G.isParent)return this.collideGroupVsTilemapLayer(G,L,V,Y,W,$)}},collideSpriteVsSprite:function(L,G,V,Y,W,$){var K=L.isBody?L:L.body,j=G.isBody?G:G.body;return!K||!j?!1:(this.separate(K,j,Y,W,$)&&(V&&V.call(W,L,G),this._total++),!0)},collideSpriteVsGroup:function(L,G,V,Y,W,$){var K=L.isBody?L:L.body;if(!(G.length===0||!K||!K.enable||K.checkCollision.none)){var j,J,q;if(this.useTree||G.physicsType===n.STATIC_BODY){var _=this.treeMinMax;_.minX=K.left,_.minY=K.top,_.maxX=K.right,_.maxY=K.bottom;var et=G.physicsType===n.DYNAMIC_BODY?this.tree.search(_):this.staticTree.search(_);for(J=et.length,j=0;j<J;j++)q=et[j],!(K===q||!q.enable||q.checkCollision.none||!G.contains(q.gameObject))&&this.separate(K,q,Y,W,$)&&(V&&V.call(W,K.gameObject,q.gameObject),this._total++)}else{var tt=G.getChildren(),rt=G.children.entries.indexOf(L);for(J=tt.length,j=0;j<J;j++)q=tt[j].body,!(!q||j===rt||!q.enable)&&this.separate(K,q,Y,W,$)&&(V&&V.call(W,K.gameObject,q.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(L,G,V,Y,W,$){var K=L.getChildren();if(K.length===0)return!1;for(var j=!1,J=0;J<K.length;J++)(K[J].body||K[J].isBody)&&this.collideSpriteVsTilemapLayer(K[J],G,V,Y,W,$)&&(j=!0);return j},collideTiles:function(L,G,V,Y,W){return G.length===0||L.body&&!L.body.enable||L.isBody&&!L.enable?!1:this.collideSpriteVsTilesHandler(L,G,V,Y,W,!1,!1)},overlapTiles:function(L,G,V,Y,W){return G.length===0||L.body&&!L.body.enable||L.isBody&&!L.enable?!1:this.collideSpriteVsTilesHandler(L,G,V,Y,W,!0,!1)},collideSpriteVsTilemapLayer:function(L,G,V,Y,W,$){var K=L.isBody?L:L.body;if(!K.enable||K.checkCollision.none)return!1;var j=K.x,J=K.y,q=K.width,_=K.height,et=G.layer;if(et.tileWidth>et.baseTileWidth){var tt=(et.tileWidth-et.baseTileWidth)*G.scaleX;j-=tt,q+=tt}if(et.tileHeight>et.baseTileHeight){var rt=(et.tileHeight-et.baseTileHeight)*G.scaleY;_+=rt}var ft=$?null:this.tileFilterOptions,vt=E(j,J,q,_,ft,G.scene.cameras.main,G.layer);return vt.length===0?!1:this.collideSpriteVsTilesHandler(L,vt,V,Y,W,$,!0)},collideSpriteVsTilesHandler:function(L,G,V,Y,W,$,K){for(var j=L.isBody?L:L.body,J,q={left:0,right:0,top:0,bottom:0},_,et=!1,tt=0;tt<G.length;tt++){J=G[tt],_=J.tilemapLayer;var rt=_.tileToWorldXY(J.x,J.y);q.left=rt.x,q.top=rt.y,J.baseHeight!==J.height&&(q.top-=(J.height-J.baseHeight)*_.scaleY),q.right=q.left+J.width*_.scaleX,q.bottom=q.top+J.height*_.scaleY,U(q,j)&&(!Y||Y.call(W,L,J))&&A(J,L)&&($||b(tt,j,J,q,_,this.TILE_BIAS,K))&&(this._total++,et=!0,V&&V.call(W,L,J),$&&j.onOverlap?this.emit(c.TILE_OVERLAP,L,J,j):j.onCollide&&this.emit(c.TILE_COLLIDE,L,J,j))}return et},collideGroupVsGroup:function(L,G,V,Y,W,$){if(!(L.length===0||G.length===0))for(var K=L.getChildren(),j=0;j<K.length;j++)this.collideSpriteVsGroup(K[j],G,V,Y,W,$)},wrap:function(L,G){L.body?this.wrapObject(L,G):L.getChildren?this.wrapArray(L.getChildren(),G):Array.isArray(L)?this.wrapArray(L,G):this.wrapObject(L,G)},wrapArray:function(L,G){for(var V=0;V<L.length;V++)this.wrapObject(L[V],G)},wrapObject:function(L,G){G===void 0&&(G=0),L.x=N(L.x,this.bounds.left-G,this.bounds.right+G),L.y=N(L.y,this.bounds.top-G,this.bounds.bottom+G)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});l.exports=z},5321:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setAcceleration:function(e,d){return this.body.acceleration.set(e,d),this},setAccelerationX:function(e){return this.body.acceleration.x=e,this},setAccelerationY:function(e){return this.body.acceleration.y=e,this}};l.exports=T},29257:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setAngularVelocity:function(e){return this.body.angularVelocity=e,this},setAngularAcceleration:function(e){return this.body.angularAcceleration=e,this},setAngularDrag:function(e){return this.body.angularDrag=e,this}};l.exports=T},62122:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setBounce:function(e,d){return this.body.bounce.set(e,d),this},setBounceX:function(e){return this.body.bounce.x=e,this},setBounceY:function(e){return this.body.bounce.y=e,this},setCollideWorldBounds:function(e,d,x,u){return this.body.setCollideWorldBounds(e,d,x,u),this}};l.exports=T},99803:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setDebug:function(e,d,x){return this.debugShowBody=e,this.debugShowVelocity=d,this.debugBodyColor=x,this},setDebugBodyColor:function(e){return this.body.debugBodyColor=e,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(e){this.body.debugShowBody=e}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(e){this.body.debugShowVelocity=e}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(e){this.body.debugBodyColor=e}}};l.exports=T},87145:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setDrag:function(e,d){return this.body.drag.set(e,d),this},setDragX:function(e){return this.body.drag.x=e,this},setDragY:function(e){return this.body.drag.y=e,this},setDamping:function(e){return this.body.useDamping=e,this}};l.exports=T},96174:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={enableBody:function(e,d,x,u,h){return e&&this.body.reset(d,x),u&&(this.body.gameObject.active=!0),h&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(e,d){return e===void 0&&(e=!1),d===void 0&&(d=!1),this.body.stop(),this.body.enable=!1,e&&(this.body.gameObject.active=!1),d&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};l.exports=T},51702:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setFriction:function(e,d){return this.body.friction.set(e,d),this},setFrictionX:function(e){return this.body.friction.x=e,this},setFrictionY:function(e){return this.body.friction.y=e,this}};l.exports=T},25578:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setGravity:function(e,d){return this.body.gravity.set(e,d),this},setGravityX:function(e){return this.body.gravity.x=e,this},setGravityY:function(e){return this.body.gravity.y=e,this}};l.exports=T},72029:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setImmovable:function(e){return e===void 0&&(e=!0),this.body.immovable=e,this}};l.exports=T},34566:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setMass:function(e){return this.body.mass=e,this}};l.exports=T},2732:(l,T,e)=>{var d=e(15147),x=e(26673),u=e(22184),h=e(26535),o=function(n,r,f,a,c,p){var v=d(n,r-a,f-a,2*a,2*a,c,p);if(v.length===0)return v;for(var m=new x(r,f,a),y=new x,P=[],E=0;E<v.length;E++){var S=v[E];S.isCircle?(y.setTo(S.center.x,S.center.y,S.halfWidth),u(m,y)&&P.push(S)):h(m,S)&&P.push(S)}return P};l.exports=o},15147:l=>{var T=function(e,d,x,u,h,o,n){o===void 0&&(o=!0),n===void 0&&(n=!1);var r=[],f=[],a=e.treeMinMax;if(a.minX=d,a.minY=x,a.maxX=d+u,a.maxY=x+h,n&&(f=e.staticTree.search(a)),o&&e.useTree)r=e.tree.search(a);else if(o){var c=e.bodies,p={position:{x:d,y:x},left:d,top:x,right:d+u,bottom:x+h,isCircle:!1},v=e.intersects;c.iterate(function(m){v(m,p)&&r.push(m)})}return f.concat(r)};l.exports=T},57527:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setPushable:function(e){return e===void 0&&(e=!0),this.body.pushable=e,this}};l.exports=T},77687:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setOffset:function(e,d){return this.body.setOffset(e,d),this},setSize:function(e,d,x){return this.body.setSize(e,d,x),this},setBodySize:function(e,d,x){return this.body.setSize(e,d,x),this},setCircle:function(e,d,x){return this.body.setCircle(e,d,x),this}};l.exports=T},66536:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setVelocity:function(e,d){return this.body.setVelocity(e,d),this},setVelocityX:function(e){return this.body.setVelocityX(e),this},setVelocityY:function(e){return this.body.setVelocityY(e),this},setMaxVelocity:function(e,d){return this.body.maxVelocity.set(e,d),this}};l.exports=T},7864:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={Acceleration:e(5321),Angular:e(29257),Bounce:e(62122),Debug:e(99803),Drag:e(87145),Enable:e(96174),Friction:e(51702),Gravity:e(25578),Immovable:e(72029),Mass:e(34566),OverlapCirc:e(2732),OverlapRect:e(15147),Pushable:e(57527),Size:e(77687),Velocity:e(66536)}},47401:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};l.exports=T},22346:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="collide"},95092:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="overlap"},15775:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pause"},74142:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="resume"},22825:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="tilecollide"},10851:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="tileoverlap"},7543:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="worldbounds"},1487:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="worldstep"},27037:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={COLLIDE:e(22346),OVERLAP:e(95092),PAUSE:e(15775),RESUME:e(74142),TILE_COLLIDE:e(22825),TILE_OVERLAP:e(10851),WORLD_BOUNDS:e(7543),WORLD_STEP:e(1487)}},39977:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(47401),x=e(98611),u={ArcadePhysics:e(66150),Body:e(97602),Collider:e(3909),Components:e(7864),Events:e(27037),Factory:e(99523),GetOverlapX:e(75671),GetOverlapY:e(66185),SeparateX:e(61777),SeparateY:e(25299),Group:e(10481),Image:e(62832),Sprite:e(25084),StaticBody:e(66634),StaticGroup:e(46346),Tilemap:e(8413),World:e(85233)};u=x(!1,u,d),l.exports=u},25163:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.collisionCallback?!e.collisionCallback.call(e.collisionCallbackContext,d,e):e.layer.callbacks[e.index]?!e.layer.callbacks[e.index].callback.call(e.layer.callbacks[e.index].callbackContext,d,e):!0};l.exports=T},98209:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){d<0?(e.blocked.none=!1,e.blocked.left=!0):d>0&&(e.blocked.none=!1,e.blocked.right=!0),e.position.x-=d,e.updateCenter(),e.bounce.x===0?e.velocity.x=0:e.velocity.x=-e.velocity.x*e.bounce.x};l.exports=T},72792:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){d<0?(e.blocked.none=!1,e.blocked.up=!0):d>0&&(e.blocked.none=!1,e.blocked.down=!0),e.position.y-=d,e.updateCenter(),e.bounce.y===0?e.velocity.y=0:e.velocity.y=-e.velocity.y*e.bounce.y};l.exports=T},27354:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(14405),x=e(52926),u=e(28808),h=function(o,n,r,f,a,c,p){var v=f.left,m=f.top,y=f.right,P=f.bottom,E=r.faceLeft||r.faceRight,S=r.faceTop||r.faceBottom;if(p||(E=!0,S=!0),!E&&!S)return!1;var w=0,R=0,A=0,O=1;if(n.deltaAbsX()>n.deltaAbsY()?A=-1:n.deltaAbsX()<n.deltaAbsY()&&(O=-1),n.deltaX()!==0&&n.deltaY()!==0&&E&&S&&(A=Math.min(Math.abs(n.position.x-y),Math.abs(n.right-v)),O=Math.min(Math.abs(n.position.y-P),Math.abs(n.bottom-m))),A<O){if(E&&(w=d(n,r,v,y,c,p),w!==0&&!u(f,n)))return!0;S&&(R=x(n,r,m,P,c,p))}else{if(S&&(R=x(n,r,m,P,c,p),R!==0&&!u(f,n)))return!0;E&&(w=d(n,r,v,y,c,p))}return w!==0||R!==0};l.exports=h},14405:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(98209),x=function(u,h,o,n,r,f){var a=0,c=h.faceLeft,p=h.faceRight,v=h.collideLeft,m=h.collideRight;return f||(c=!0,p=!0,v=!0,m=!0),u.deltaX()<0&&m&&u.checkCollision.left?p&&u.x<n&&(a=u.x-n,a<-r&&(a=0)):u.deltaX()>0&&v&&u.checkCollision.right&&c&&u.right>o&&(a=u.right-o,a>r&&(a=0)),a!==0&&(u.customSeparateX?u.overlapX=a:d(u,a)),a};l.exports=x},52926:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72792),x=function(u,h,o,n,r,f){var a=0,c=h.faceTop,p=h.faceBottom,v=h.collideUp,m=h.collideDown;return f||(c=!0,p=!0,v=!0,m=!0),u.deltaY()<0&&m&&u.checkCollision.up?p&&u.y<n&&(a=u.y-n,a<-r&&(a=0)):u.deltaY()>0&&v&&u.checkCollision.down&&c&&u.bottom>o&&(a=u.bottom-o,a>r&&(a=0)),a!==0&&(u.customSeparateY?u.overlapY=a:d(u,a)),a};l.exports=x},28808:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return!(d.right<=e.left||d.bottom<=e.top||d.position.x>=e.right||d.position.y>=e.bottom)};l.exports=T},8413:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={ProcessTileCallbacks:e(25163),ProcessTileSeparationX:e(98209),ProcessTileSeparationY:e(72792),SeparateTile:e(27354),TileCheckX:e(14405),TileCheckY:e(52926),TileIntersectsBody:e(28808)};l.exports=d},53954:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={Arcade:e(39977),Matter:e(45949)}},63568:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(93736),u=new d({initialize:function(){this.boundsCenter=new x,this.centerDiff=new x},parseBody:function(h){if(h=h.hasOwnProperty("body")?h.body:h,!h.hasOwnProperty("bounds")||!h.hasOwnProperty("centerOfMass"))return!1;var o=this.boundsCenter,n=this.centerDiff,r=h.bounds.max.x-h.bounds.min.x,f=h.bounds.max.y-h.bounds.min.y,a=r*h.centerOfMass.x,c=f*h.centerOfMass.y;return o.set(r/2,f/2),n.set(a-o.x,c-o.y),!0},getTopLeft:function(h,o,n){if(o===void 0&&(o=0),n===void 0&&(n=0),this.parseBody(h)){var r=this.boundsCenter,f=this.centerDiff;return new x(o+r.x+f.x,n+r.y+f.y)}return!1},getTopCenter:function(h,o,n){if(o===void 0&&(o=0),n===void 0&&(n=0),this.parseBody(h)){var r=this.boundsCenter,f=this.centerDiff;return new x(o+f.x,n+r.y+f.y)}return!1},getTopRight:function(h,o,n){if(o===void 0&&(o=0),n===void 0&&(n=0),this.parseBody(h)){var r=this.boundsCenter,f=this.centerDiff;return new x(o-(r.x-f.x),n+r.y+f.y)}return!1},getLeftCenter:function(h,o,n){if(o===void 0&&(o=0),n===void 0&&(n=0),this.parseBody(h)){var r=this.boundsCenter,f=this.centerDiff;return new x(o+r.x+f.x,n+f.y)}return!1},getCenter:function(h,o,n){if(o===void 0&&(o=0),n===void 0&&(n=0),this.parseBody(h)){var r=this.centerDiff;return new x(o+r.x,n+r.y)}return!1},getRightCenter:function(h,o,n){if(o===void 0&&(o=0),n===void 0&&(n=0),this.parseBody(h)){var r=this.boundsCenter,f=this.centerDiff;return new x(o-(r.x-f.x),n+f.y)}return!1},getBottomLeft:function(h,o,n){if(o===void 0&&(o=0),n===void 0&&(n=0),this.parseBody(h)){var r=this.boundsCenter,f=this.centerDiff;return new x(o+r.x+f.x,n-(r.y-f.y))}return!1},getBottomCenter:function(h,o,n){if(o===void 0&&(o=0),n===void 0&&(n=0),this.parseBody(h)){var r=this.boundsCenter,f=this.centerDiff;return new x(o+f.x,n-(r.y-f.y))}return!1},getBottomRight:function(h,o,n){if(o===void 0&&(o=0),n===void 0&&(n=0),this.parseBody(h)){var r=this.boundsCenter,f=this.centerDiff;return new x(o-(r.x-f.x),n-(r.y-f.y))}return!1}});l.exports=u},18171:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16929);d.Body=e(84125),d.Composite=e(11299),d.World=e(72005),d.Collision=e(63454),d.Detector=e(13657),d.Pairs=e(91327),d.Pair=e(70584),d.Query=e(13390),d.Resolver=e(44272),d.Constraint=e(52838),d.Common=e(68758),d.Engine=e(45775),d.Events=e(39073),d.Sleeping=e(22806),d.Plugin=e(84474),d.Bodies=e(68516),d.Composites=e(56643),d.Axes=e(50658),d.Bounds=e(84091),d.Svg=e(92765),d.Vector=e(10438),d.Vertices=e(39745),d.World.add=d.Composite.add,d.World.remove=d.Composite.remove,d.World.addComposite=d.Composite.addComposite,d.World.addBody=d.Composite.addBody,d.World.addConstraint=d.Composite.addConstraint,d.World.clear=d.Composite.clear,l.exports=d},72653:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68516),x=e(56694),u=e(56643),h=e(52838),o=e(92765),n=e(3860),r=e(7030),f=e(73658),a=e(84720),c=e(10998),p=e(72829),v=e(88596),m=e(39745),y=new x({initialize:function(E){this.world=E,this.scene=E.scene,this.sys=E.scene.sys},rectangle:function(P,E,S,w,R){var A=d.rectangle(P,E,S,w,R);return this.world.add(A),A},trapezoid:function(P,E,S,w,R,A){var O=d.trapezoid(P,E,S,w,R,A);return this.world.add(O),O},circle:function(P,E,S,w,R){var A=d.circle(P,E,S,w,R);return this.world.add(A),A},polygon:function(P,E,S,w,R){var A=d.polygon(P,E,S,w,R);return this.world.add(A),A},fromVertices:function(P,E,S,w,R,A,O){typeof S=="string"&&(S=m.fromPath(S));var F=d.fromVertices(P,E,S,w,R,A,O);return this.world.add(F),F},fromPhysicsEditor:function(P,E,S,w,R){R===void 0&&(R=!0);var A=c.parseBody(P,E,S,w);return R&&!this.world.has(A)&&this.world.add(A),A},fromSVG:function(P,E,S,w,R,A){w===void 0&&(w=1),R===void 0&&(R={}),A===void 0&&(A=!0);for(var O=S.getElementsByTagName("path"),F=[],b=0;b<O.length;b++){var D=o.pathToVertices(O[b],30);w!==1&&m.scale(D,w,w),F.push(D)}var I=d.fromVertices(P,E,F,R);return A&&this.world.add(I),I},fromJSON:function(P,E,S,w,R){w===void 0&&(w={}),R===void 0&&(R=!0);var A=p.parseBody(P,E,S,w);return A&&R&&this.world.add(A),A},imageStack:function(P,E,S,w,R,A,O,F,b){O===void 0&&(O=0),F===void 0&&(F=0),b===void 0&&(b={});var D=this.world,I=this.sys.displayList;b.addToWorld=!1;var B=u.stack(S,w,R,A,O,F,function(k,U){var X=new r(D,k,U,P,E,b);return I.add(X),X.body});return D.add(B),B},stack:function(P,E,S,w,R,A,O){var F=u.stack(P,E,S,w,R,A,O);return this.world.add(F),F},pyramid:function(P,E,S,w,R,A,O){var F=u.pyramid(P,E,S,w,R,A,O);return this.world.add(F),F},chain:function(P,E,S,w,R,A){return u.chain(P,E,S,w,R,A)},mesh:function(P,E,S,w,R){return u.mesh(P,E,S,w,R)},newtonsCradle:function(P,E,S,w,R){var A=u.newtonsCradle(P,E,S,w,R);return this.world.add(A),A},car:function(P,E,S,w,R){var A=u.car(P,E,S,w,R);return this.world.add(A),A},softBody:function(P,E,S,w,R,A,O,F,b,D){var I=u.softBody(P,E,S,w,R,A,O,F,b,D);return this.world.add(I),I},joint:function(P,E,S,w,R){return this.constraint(P,E,S,w,R)},spring:function(P,E,S,w,R){return this.constraint(P,E,S,w,R)},constraint:function(P,E,S,w,R){w===void 0&&(w=1),R===void 0&&(R={}),R.bodyA=P.type==="body"?P:P.body,R.bodyB=E.type==="body"?E:E.body,isNaN(S)||(R.length=S),R.stiffness=w;var A=h.create(R);return this.world.add(A),A},worldConstraint:function(P,E,S,w){S===void 0&&(S=1),w===void 0&&(w={}),w.bodyB=P.type==="body"?P:P.body,isNaN(E)||(w.length=E),w.stiffness=S;var R=h.create(w);return this.world.add(R),R},mouseSpring:function(P){return this.pointerConstraint(P)},pointerConstraint:function(P){P===void 0&&(P={}),P.hasOwnProperty("render")||(P.render={visible:!1});var E=new v(this.scene,this.world,P);return this.world.add(E.constraint),E},image:function(P,E,S,w,R){var A=new r(this.world,P,E,S,w,R);return this.sys.displayList.add(A),A},tileBody:function(P,E){return new a(this.world,P,E)},sprite:function(P,E,S,w,R){var A=new f(this.world,P,E,S,w,R);return this.sys.displayList.add(A),this.sys.updateList.add(A),A},gameObject:function(P,E,S){return n(this.world,P,E,S)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});l.exports=y},3860:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74527),x=e(72632),u=e(93736);function h(n){return!!n.get&&typeof n.get=="function"||!!n.set&&typeof n.set=="function"}var o=function(n,r,f,a){f===void 0&&(f={}),a===void 0&&(a=!0);var c=r.x,p=r.y;r.body={temp:!0,position:{x:c,y:p}};var v=[d.Bounce,d.Collision,d.Force,d.Friction,d.Gravity,d.Mass,d.Sensor,d.SetBody,d.Sleep,d.Static,d.Transform,d.Velocity];if(v.forEach(function(y){for(var P in y)h(y[P])?Object.defineProperty(r,P,{get:y[P].get,set:y[P].set}):Object.defineProperty(r,P,{value:y[P]})}),r.world=n,r._tempVec2=new u(c,p),f.hasOwnProperty("type")&&f.type==="body")r.setExistingBody(f,a);else{var m=x(f,"shape",null);m||(m="rectangle"),f.addToWorld=a,r.setBody(m,f)}return r};l.exports=o},7030:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(74527),u=e(89980),h=e(72632),o=e(1539),n=e(58210),r=e(93736),f=new d({Extends:o,Mixins:[x.Bounce,x.Collision,x.Force,x.Friction,x.Gravity,x.Mass,x.Sensor,x.SetBody,x.Sleep,x.Static,x.Transform,x.Velocity,n],initialize:function(c,p,v,m,y,P){u.call(this,c.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(m,y),this.setSizeToFrame(),this.setOrigin(),this.world=c,this._tempVec2=new r(p,v);var E=h(P,"shape",null);E?this.setBody(E,P):this.setRectangle(this.width,this.height,P),this.setPosition(p,v),this.initPipeline(),this.initPostPipeline(!0)}});l.exports=f},50583:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84093),x=e(50658),u=e(68516),h=e(84125),o=e(63568),n=e(84091),r=e(56694),f=e(63454),a=e(68758),c=e(11299),p=e(56643),v=e(52838),m=e(13657),y=e(53996),P=e(72653),E=e(72632),S=e(10850),w=e(1675),R=e(80391),A=e(16929),O=e(44097),F=e(30657),b=e(70584),D=e(91327),I=e(84474),B=e(91963),k=e(13390),U=e(44272),X=e(7599),H=e(92765),N=e(10438),z=e(39745),L=e(31468);a.setDecomp(e(81084));var G=new r({initialize:function(Y){this.scene=Y,this.systems=Y.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=h,this.composite=c,this.collision=f,this.detector=m,this.pair=b,this.pairs=D,this.query=k,this.resolver=U,this.constraint=v,this.bodies=u,this.composites=p,this.axes=x,this.bounds=n,this.svg=H,this.vector=N,this.vertices=z,this.verts=z,this._tempVec2=N.create(),S(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),S(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),S(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),U._restingThresh=S(this.config,"restingThresh",4),U._restingThreshTangent=S(this.config,"restingThreshTangent",6),U._positionDampen=S(this.config,"positionDampen",.9),U._positionWarming=S(this.config,"positionWarming",.8),U._frictionNormalMultiplier=S(this.config,"frictionNormalMultiplier",5),Y.sys.events.once(X.BOOT,this.boot,this),Y.sys.events.on(X.START,this.start,this)},boot:function(){this.world=new L(this.scene,this.config),this.add=new P(this.world),this.bodyBounds=new o,this.systems.events.once(X.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new L(this.scene,this.config),this.add=new P(this.world));var V=this.systems.events;V.on(X.UPDATE,this.world.update,this.world),V.on(X.POST_UPDATE,this.world.postUpdate,this.world),V.once(X.SHUTDOWN,this.shutdown,this)},getConfig:function(){var V=this.systems.game.config.physics,Y=this.systems.settings.physics,W=F(E(Y,"matter",{}),E(V,"matter",{}));return W},enableAttractorPlugin:function(){return I.register(w),I.use(A,w),this},enableWrapPlugin:function(){return I.register(O),I.use(A,O),this},enableCollisionEventsPlugin:function(){return I.register(R),I.use(A,R),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(V,Y){this.world.step(V,Y)},containsPoint:function(V,Y,W){V=this.getMatterBodies(V);var $=N.create(Y,W),K=k.point(V,$);return K.length>0},intersectPoint:function(V,Y,W){W=this.getMatterBodies(W);var $=N.create(V,Y),K=[],j=k.point(W,$);return j.forEach(function(J){K.indexOf(J)===-1&&K.push(J)}),K},intersectRect:function(V,Y,W,$,K,j){K===void 0&&(K=!1),j=this.getMatterBodies(j);var J={min:{x:V,y:Y},max:{x:V+W,y:Y+$}},q=[],_=k.region(j,J,K);return _.forEach(function(et){q.indexOf(et)===-1&&q.push(et)}),q},intersectRay:function(V,Y,W,$,K,j){K===void 0&&(K=1),j=this.getMatterBodies(j);for(var J=[],q=k.ray(j,N.create(V,Y),N.create(W,$),K),_=0;_<q.length;_++)J.push(q[_].body);return J},intersectBody:function(V,Y){Y=this.getMatterBodies(Y);for(var W=[],$=k.collides(V,Y),K=0;K<$.length;K++){var j=$[K];j.bodyA===V?W.push(j.bodyB):W.push(j.bodyA)}return W},overlap:function(V,Y,W,$,K){W===void 0&&(W=null),$===void 0&&($=null),K===void 0&&(K=W),Array.isArray(V)||(V=[V]),V=this.getMatterBodies(V),Y=this.getMatterBodies(Y);for(var j=!1,J=0;J<V.length;J++)for(var q=V[J],_=k.collides(q,Y),et=0;et<_.length;et++){var tt=_[et],rt=tt.bodyA.id===q.id?tt.bodyB:tt.bodyA;if(!$||$.call(K,q,rt,tt)){if(j=!0,W)W.call(K,q,rt,tt);else if(!$)return!0}}return j},setCollisionCategory:function(V,Y){return V=this.getMatterBodies(V),V.forEach(function(W){W.collisionFilter.category=Y}),this},setCollisionGroup:function(V,Y){return V=this.getMatterBodies(V),V.forEach(function(W){W.collisionFilter.group=Y}),this},setCollidesWith:function(V,Y){V=this.getMatterBodies(V);var W=0;if(!Array.isArray(Y))W=Y;else for(var $=0;$<Y.length;$++)W|=Y[$];return V.forEach(function(K){K.collisionFilter.mask=W}),this},getMatterBodies:function(V){if(!V)return this.world.getAllBodies();Array.isArray(V)||(V=[V]);for(var Y=[],W=0;W<V.length;W++){var $=V[W].hasOwnProperty("body")?V[W].body:V[W];Y.push($)}return Y},setVelocity:function(V,Y,W){V=this.getMatterBodies(V);var $=this._tempVec2;return $.x=Y,$.y=W,V.forEach(function(K){h.setVelocity(K,$)}),this},setVelocityX:function(V,Y){V=this.getMatterBodies(V);var W=this._tempVec2;return W.x=Y,V.forEach(function($){W.y=$.velocity.y,h.setVelocity($,W)}),this},setVelocityY:function(V,Y){V=this.getMatterBodies(V);var W=this._tempVec2;return W.y=Y,V.forEach(function($){W.x=$.velocity.x,h.setVelocity($,W)}),this},setAngularVelocity:function(V,Y){return V=this.getMatterBodies(V),V.forEach(function(W){h.setAngularVelocity(W,Y)}),this},applyForce:function(V,Y){V=this.getMatterBodies(V);var W=this._tempVec2;return V.forEach(function($){W.x=$.position.x,W.y=$.position.y,h.applyForce($,W,Y)}),this},applyForceFromPosition:function(V,Y,W,$){V=this.getMatterBodies(V);var K=this._tempVec2;return V.forEach(function(j){$===void 0&&($=j.angle),K.x=W*Math.cos($),K.y=W*Math.sin($),h.applyForce(j,Y,K)}),this},applyForceFromAngle:function(V,Y,W){V=this.getMatterBodies(V);var $=this._tempVec2;return V.forEach(function(K){W===void 0&&(W=K.angle),$.x=Y*Math.cos(W),$.y=Y*Math.sin(W),h.applyForce(K,{x:K.position.x,y:K.position.y},$)}),this},getConstraintLength:function(V){var Y=V.pointA.x,W=V.pointA.y,$=V.pointB.x,K=V.pointB.y;return V.bodyA&&(Y+=V.bodyA.position.x,W+=V.bodyA.position.y),V.bodyB&&($+=V.bodyB.position.x,K+=V.bodyB.position.y),y(Y,W,$,K)},alignBody:function(V,Y,W,$){V=V.hasOwnProperty("body")?V.body:V;var K;switch($){case d.TOP_LEFT:case d.LEFT_TOP:K=this.bodyBounds.getTopLeft(V,Y,W);break;case d.TOP_CENTER:K=this.bodyBounds.getTopCenter(V,Y,W);break;case d.TOP_RIGHT:case d.RIGHT_TOP:K=this.bodyBounds.getTopRight(V,Y,W);break;case d.LEFT_CENTER:K=this.bodyBounds.getLeftCenter(V,Y,W);break;case d.CENTER:K=this.bodyBounds.getCenter(V,Y,W);break;case d.RIGHT_CENTER:K=this.bodyBounds.getRightCenter(V,Y,W);break;case d.LEFT_BOTTOM:case d.BOTTOM_LEFT:K=this.bodyBounds.getBottomLeft(V,Y,W);break;case d.BOTTOM_CENTER:K=this.bodyBounds.getBottomCenter(V,Y,W);break;case d.BOTTOM_RIGHT:case d.RIGHT_BOTTOM:K=this.bodyBounds.getBottomRight(V,Y,W);break}return K&&h.setPosition(V,K),this},shutdown:function(){var V=this.systems.events;this.world&&(V.off(X.UPDATE,this.world.update,this.world),V.off(X.POST_UPDATE,this.world.postUpdate,this.world)),V.off(X.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(X.START,this.start,this),this.scene=null,this.systems=null}});B.register("MatterPhysics",G,"matterPhysics"),l.exports=G},73658:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16569),x=e(56694),u=e(74527),h=e(89980),o=e(72632),n=e(58210),r=e(13747),f=e(93736),a=new x({Extends:r,Mixins:[u.Bounce,u.Collision,u.Force,u.Friction,u.Gravity,u.Mass,u.Sensor,u.SetBody,u.Sleep,u.Static,u.Transform,u.Velocity,n],initialize:function(p,v,m,y,P,E){h.call(this,p.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new d(this),this.setTexture(y,P),this.setSizeToFrame(),this.setOrigin(),this.world=p,this._tempVec2=new f(v,m);var S=o(E,"shape",null);S?this.setBody(S,E):this.setRectangle(this.width,this.height,E),this.setPosition(v,m),this.initPipeline(),this.initPostPipeline(!0)}});l.exports=a},84720:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68516),x=e(84125),u=e(56694),h=e(74527),o=e(28699),n=e(6659),r=e(72632),f=e(19256),a=e(39745),c=new u({Extends:n,Mixins:[h.Bounce,h.Collision,h.Friction,h.Gravity,h.Mass,h.Sensor,h.Sleep,h.Static],initialize:function(v,m,y){n.call(this),this.tile=m,this.world=v,m.physics.matterBody&&m.physics.matterBody.destroy(),m.physics.matterBody=this;var P=r(y,"body",null),E=r(y,"addToWorld",!0);if(P)this.setBody(P,E);else{var S=m.getCollisionGroup(),w=r(S,"objects",[]);w.length>0?this.setFromTileCollision(y):this.setFromTileRectangle(y)}if(m.flipX||m.flipY){var R={x:m.getCenterX(),y:m.getCenterY()},A=m.flipX?-1:1,O=m.flipY?-1:1;x.scale(P,A,O,R)}},setFromTileRectangle:function(p){p===void 0&&(p={}),f(p,"isStatic")||(p.isStatic=!0),f(p,"addToWorld")||(p.addToWorld=!0);var v=this.tile.getBounds(),m=v.x+v.width/2,y=v.y+v.height/2,P=d.rectangle(m,y,v.width,v.height,p);return this.setBody(P,p.addToWorld),this},setFromTileCollision:function(p){p===void 0&&(p={}),f(p,"isStatic")||(p.isStatic=!0),f(p,"addToWorld")||(p.addToWorld=!0);for(var v=this.tile.tilemapLayer.scaleX,m=this.tile.tilemapLayer.scaleY,y=this.tile.getLeft(),P=this.tile.getTop(),E=this.tile.getCollisionGroup(),S=r(E,"objects",[]),w=[],R=0;R<S.length;R++){var A=S[R],O=y+A.x*v,F=P+A.y*m,b=A.width*v,D=A.height*m,I=null;if(A.rectangle)I=d.rectangle(O+b/2,F+D/2,b,D,p);else if(A.ellipse)I=d.circle(O+b/2,F+D/2,b/2,p);else if(A.polygon||A.polyline){var B=A.polygon?A.polygon:A.polyline,k=B.map(function(N){return{x:N.x*v,y:N.y*m}}),U=a.create(k),X=a.centre(U);O+=X.x,F+=X.y,I=d.fromVertices(O,F,U,p)}I&&w.push(I)}if(w.length===1)this.setBody(w[0],p.addToWorld);else if(w.length>1){var H=o(p);H.parts=w,this.setBody(x.create(H),H.addToWorld)}return this},setBody:function(p,v){return v===void 0&&(v=!0),this.body&&this.removeBody(),this.body=p,this.body.gameObject=this,v&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});l.exports=c},10998:(l,T,e)=>{/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68516),x=e(84125),u=e(68758),h=e(72632),o=e(39745),n={parseBody:function(r,f,a,c){c===void 0&&(c={});for(var p=h(a,"fixtures",[]),v=[],m=0;m<p.length;m++)for(var y=this.parseFixture(p[m]),P=0;P<y.length;P++)v.push(y[P]);var E=u.clone(a,!0);u.extend(E,c,!0),delete E.fixtures,delete E.type;var S=x.create(E);return x.setParts(S,v),x.setPosition(S,{x:r,y:f}),S},parseFixture:function(r){var f=u.extend({},!1,r);delete f.circle,delete f.vertices;var a;if(r.circle){var c=h(r.circle,"x"),p=h(r.circle,"y"),v=h(r.circle,"radius");a=[d.circle(c,p,v,f)]}else r.vertices&&(a=this.parseVertices(r.vertices,f));return a},parseVertices:function(r,f){f===void 0&&(f={});for(var a=[],c=0;c<r.length;c++)o.clockwiseSort(r[c]),a.push(x.create(u.extend({position:o.centre(r[c]),vertices:r[c]},f)));return d.flagCoincidentParts(a)}};l.exports=n},72829:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68516),x=e(84125),u={parseBody:function(h,o,n,r){r===void 0&&(r={});var f,a=n.vertices;if(a.length===1)r.vertices=a[0],f=x.create(r),d.flagCoincidentParts(f.parts);else{for(var c=[],p=0;p<a.length;p++){var v=x.create({vertices:a[p]});c.push(v)}d.flagCoincidentParts(c),r.parts=c,f=x.create(r)}return f.label=n.label,x.setPosition(f,{x:h,y:o}),f}};l.exports=u},88596:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84091),x=e(56694),u=e(11299),h=e(52838),o=e(13657),n=e(35416),r=e(33963),f=e(30657),a=e(22806),c=e(93736),p=e(39745),v=new x({initialize:function(y,P,E){E===void 0&&(E={});var S={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=y,this.world=P,this.camera=null,this.pointer=null,this.active=!0,this.position=new c,this.body=null,this.part=null,this.constraint=h.create(f(E,S)),this.world.on(n.BEFORE_UPDATE,this.update,this),y.sys.input.on(r.POINTER_DOWN,this.onDown,this),y.sys.input.on(r.POINTER_UP,this.onUp,this)},onDown:function(m){this.pointer||(this.pointer=m,this.camera=m.camera)},onUp:function(m){m===this.pointer&&(this.pointer=null)},getBody:function(m){var y=this.position,P=this.constraint;this.camera.getWorldPoint(m.x,m.y,y);for(var E=u.allBodies(this.world.localWorld),S=0;S<E.length;S++){var w=E[S];if(!w.ignorePointer&&d.contains(w.bounds,y)&&o.canCollide(w.collisionFilter,P.collisionFilter)&&this.hitTestBody(w,y))return this.world.emit(n.DRAG_START,w,this.part,this),!0}return!1},hitTestBody:function(m,y){for(var P=this.constraint,E=m.parts.length,S=E>1?1:0,w=S;w<E;w++){var R=m.parts[w];if(p.contains(R.vertices,y))return P.pointA=y,P.pointB={x:y.x-m.position.x,y:y.y-m.position.y},P.bodyB=m,P.angleB=m.angle,a.set(m,!1),this.part=R,this.body=m,!0}return!1},update:function(){var m=this.pointer,y=this.body;if(!this.active||!m){y&&this.stopDrag();return}if(!m.isDown&&y){this.stopDrag();return}else if(m.isDown){if(!y&&!this.getBody(m))return;y=this.body;var P=this.position,E=this.constraint;this.camera.getWorldPoint(m.x,m.y,P),E.pointA.x=P.x,E.pointA.y=P.y,a.set(y,!1),this.world.emit(n.DRAG,y,this)}},stopDrag:function(){var m=this.body,y=this.constraint;y.bodyB=null,y.pointB=null,this.pointer=null,this.body=null,this.part=null,m&&this.world.emit(n.DRAG_END,m,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(n.BEFORE_UPDATE,this.update),this.scene.sys.input.off(r.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(r.POINTER_UP,this.onUp,this)}});l.exports=v},31468:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68516),x=e(84125),u=e(56694),h=e(68758),o=e(11299),n=e(45775),r=e(6659),f=e(35416),a=e(72632),c=e(10850),p=e(84125),v=e(39073),m=e(84720),y=e(72005),P=e(10438),E=new u({Extends:r,initialize:function(w,R){r.call(this),this.scene=w,this.engine=n.create(R),this.localWorld=this.engine.world;var A=c(R,"gravity",null);A?this.setGravity(A.x,A.y,A.scale):A===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=c(R,"enabled",!0),this.getDelta=c(R,"getDelta",this.update60Hz);var O=a(R,"runner",{}),F=a(O,"fps",!1),b=a(O,"fps",60),D=a(O,"delta",1e3/b),I=a(O,"deltaMin",1e3/b),B=a(O,"deltaMax",1e3/(b*.5));F||(b=1e3/D),this.runner={fps:b,deltaSampleSize:a(O,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:a(O,"isFixed",!1),delta:D,deltaMin:I,deltaMax:B},this.autoUpdate=c(R,"autoUpdate",!0);var k=c(R,"debug",!1);if(this.drawDebug=typeof k=="object"?!0:k,this.debugGraphic,this.debugConfig={showAxes:a(k,"showAxes",!1),showAngleIndicator:a(k,"showAngleIndicator",!1),angleColor:a(k,"angleColor",15208787),showBroadphase:a(k,"showBroadphase",!1),broadphaseColor:a(k,"broadphaseColor",16757760),showBounds:a(k,"showBounds",!1),boundsColor:a(k,"boundsColor",16777215),showVelocity:a(k,"showVelocity",!1),velocityColor:a(k,"velocityColor",44783),showCollisions:a(k,"showCollisions",!1),collisionColor:a(k,"collisionColor",16094476),showSeparations:a(k,"showSeparations",!1),separationColor:a(k,"separationColor",16753920),showBody:a(k,"showBody",!0),showStaticBody:a(k,"showStaticBody",!0),showInternalEdges:a(k,"showInternalEdges",!1),renderFill:a(k,"renderFill",!1),renderLine:a(k,"renderLine",!0),fillColor:a(k,"fillColor",1075465),fillOpacity:a(k,"fillOpacity",1),lineColor:a(k,"lineColor",2678297),lineOpacity:a(k,"lineOpacity",1),lineThickness:a(k,"lineThickness",1),staticFillColor:a(k,"staticFillColor",857979),staticLineColor:a(k,"staticLineColor",1255396),showSleeping:a(k,"showSleeping",!1),staticBodySleepOpacity:a(k,"staticBodySleepOpacity",.7),sleepFillColor:a(k,"sleepFillColor",4605510),sleepLineColor:a(k,"sleepLineColor",10066585),showSensors:a(k,"showSensors",!0),sensorFillColor:a(k,"sensorFillColor",857979),sensorLineColor:a(k,"sensorLineColor",1255396),showPositions:a(k,"showPositions",!0),positionSize:a(k,"positionSize",4),positionColor:a(k,"positionColor",14697178),showJoint:a(k,"showJoint",!0),jointColor:a(k,"jointColor",14737474),jointLineOpacity:a(k,"jointLineOpacity",1),jointLineThickness:a(k,"jointLineThickness",2),pinSize:a(k,"pinSize",4),pinColor:a(k,"pinColor",4382944),springColor:a(k,"springColor",14697184),anchorColor:a(k,"anchorColor",15724527),anchorSize:a(k,"anchorSize",4),showConvexHulls:a(k,"showConvexHulls",!1),hullColor:a(k,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),a(R,"setBounds",!1)){var U=R.setBounds;if(typeof U=="boolean")this.setBounds();else{var X=a(U,"x",0),H=a(U,"y",0),N=a(U,"width",w.sys.scale.width),z=a(U,"height",w.sys.scale.height),L=a(U,"thickness",64),G=a(U,"left",!0),V=a(U,"right",!0),Y=a(U,"top",!0),W=a(U,"bottom",!0);this.setBounds(X,H,N,z,L,G,V,Y,W)}}},setCompositeRenderStyle:function(S){var w=S.bodies,R=S.constraints,A=S.composites,O,F,b;for(O=0;O<w.length;O++)F=w[O],b=F.render,this.setBodyRenderStyle(F,b.lineColor,b.lineOpacity,b.lineThickness,b.fillColor,b.fillOpacity);for(O=0;O<R.length;O++)F=R[O],b=F.render,this.setConstraintRenderStyle(F,b.lineColor,b.lineOpacity,b.lineThickness,b.pinSize,b.anchorColor,b.anchorSize);for(O=0;O<A.length;O++)F=A[O],this.setCompositeRenderStyle(F);return this},setBodyRenderStyle:function(S,w,R,A,O,F){var b=S.render,D=this.debugConfig;return b?(w==null&&(w=S.isStatic?D.staticLineColor:D.lineColor),R==null&&(R=D.lineOpacity),A==null&&(A=D.lineThickness),O==null&&(O=S.isStatic?D.staticFillColor:D.fillColor),F==null&&(F=D.fillOpacity),w!==!1&&(b.lineColor=w),R!==!1&&(b.lineOpacity=R),A!==!1&&(b.lineThickness=A),O!==!1&&(b.fillColor=O),F!==!1&&(b.fillOpacity=F),this):this},setConstraintRenderStyle:function(S,w,R,A,O,F,b){var D=S.render,I=this.debugConfig;if(!D)return this;if(w==null){var B=D.type;B==="line"?w=I.jointColor:B==="pin"?w=I.pinColor:B==="spring"&&(w=I.springColor)}return R==null&&(R=I.jointLineOpacity),A==null&&(A=I.jointLineThickness),O==null&&(O=I.pinSize),F==null&&(F=I.anchorColor),b==null&&(b=I.anchorSize),w!==!1&&(D.lineColor=w),R!==!1&&(D.lineOpacity=R),A!==!1&&(D.lineThickness=A),O!==!1&&(D.pinSize=O),F!==!1&&(D.anchorColor=F),b!==!1&&(D.anchorSize=b),this},setEventsProxy:function(){var S=this,w=this.engine,R=this.localWorld;this.drawDebug&&(v.on(R,"compositeModified",function(A){S.setCompositeRenderStyle(A)}),v.on(R,"beforeAdd",function(A){for(var O=[].concat(A.object),F=0;F<O.length;F++){var b=O[F],D=b.render;b.type==="body"?S.setBodyRenderStyle(b,D.lineColor,D.lineOpacity,D.lineThickness,D.fillColor,D.fillOpacity):b.type==="composite"?S.setCompositeRenderStyle(b):b.type==="constraint"&&S.setConstraintRenderStyle(b,D.lineColor,D.lineOpacity,D.lineThickness,D.pinSize,D.anchorColor,D.anchorSize)}})),v.on(R,"beforeAdd",function(A){S.emit(f.BEFORE_ADD,A)}),v.on(R,"afterAdd",function(A){S.emit(f.AFTER_ADD,A)}),v.on(R,"beforeRemove",function(A){S.emit(f.BEFORE_REMOVE,A)}),v.on(R,"afterRemove",function(A){S.emit(f.AFTER_REMOVE,A)}),v.on(w,"beforeUpdate",function(A){S.emit(f.BEFORE_UPDATE,A)}),v.on(w,"afterUpdate",function(A){S.emit(f.AFTER_UPDATE,A)}),v.on(w,"collisionStart",function(A){var O=A.pairs,F,b;O.length>0&&(F=O[0].bodyA,b=O[0].bodyB),S.emit(f.COLLISION_START,A,F,b)}),v.on(w,"collisionActive",function(A){var O=A.pairs,F,b;O.length>0&&(F=O[0].bodyA,b=O[0].bodyB),S.emit(f.COLLISION_ACTIVE,A,F,b)}),v.on(w,"collisionEnd",function(A){var O=A.pairs,F,b;O.length>0&&(F=O[0].bodyA,b=O[0].bodyB),S.emit(f.COLLISION_END,A,F,b)})},setBounds:function(S,w,R,A,O,F,b,D,I){return S===void 0&&(S=0),w===void 0&&(w=0),R===void 0&&(R=this.scene.sys.scale.width),A===void 0&&(A=this.scene.sys.scale.height),O===void 0&&(O=64),F===void 0&&(F=!0),b===void 0&&(b=!0),D===void 0&&(D=!0),I===void 0&&(I=!0),this.updateWall(F,"left",S-O,w-O,O,A+O*2),this.updateWall(b,"right",S+R,w-O,O,A+O*2),this.updateWall(D,"top",S,w-O,R,O),this.updateWall(I,"bottom",S,w+A,R,O),this},updateWall:function(S,w,R,A,O,F){var b=this.walls[w];S?(b&&y.remove(this.localWorld,b),R+=O/2,A+=F/2,this.walls[w]=this.create(R,A,O,F,{isStatic:!0,friction:0,frictionStatic:0})):(b&&y.remove(this.localWorld,b),this.walls[w]=null)},createDebugGraphic:function(){var S=this.scene.sys.add.graphics({x:0,y:0});return S.setDepth(Number.MAX_VALUE),this.debugGraphic=S,this.drawDebug=!0,S},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(S,w,R){return S===void 0&&(S=0),w===void 0&&(w=1),R===void 0&&(R=.001),this.localWorld.gravity.x=S,this.localWorld.gravity.y=w,this.localWorld.gravity.scale=R,this},create:function(S,w,R,A,O){var F=d.rectangle(S,w,R,A,O);return y.add(this.localWorld,F),F},add:function(S){return y.add(this.localWorld,S),this},remove:function(S,w){Array.isArray(S)||(S=[S]);for(var R=0;R<S.length;R++){var A=S[R],O=A.body?A.body:A;o.remove(this.localWorld,O,w)}return this},removeConstraint:function(S,w){return o.remove(this.localWorld,S,w),this},convertTilemapLayer:function(S,w){var R=S.layer,A=S.getTilesWithin(0,0,R.width,R.height,{isColliding:!0});return this.convertTiles(A,w),this},convertTiles:function(S,w){if(S.length===0)return this;for(var R=0;R<S.length;R++)new m(this,S[R],w);return this},nextGroup:function(S){return p.nextGroup(S)},nextCategory:function(){return p.nextCategory()},pause:function(){return this.enabled=!1,this.emit(f.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(f.RESUME),this},update:function(S,w){if(!(!this.enabled||!this.autoUpdate)){var R=this.engine,A=this.runner,O=R.timing;A.isFixed?w=this.getDelta(S,w):(w=S-A.timePrev||A.delta,A.timePrev=S,A.deltaHistory.push(w),A.deltaHistory=A.deltaHistory.slice(-A.deltaSampleSize),w=Math.min.apply(null,A.deltaHistory),w=w<A.deltaMin?A.deltaMin:w,w=w>A.deltaMax?A.deltaMax:w,A.delta=w),A.timeScalePrev=O.timeScale,A.frameCounter+=1,S-A.counterTimestamp>=1e3&&(A.fps=A.frameCounter*((S-A.counterTimestamp)/1e3),A.counterTimestamp=S,A.frameCounter=0),n.update(R,w)}},step:function(S){n.update(this.engine,S)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(S){var w=S.hasOwnProperty("body")?S.body:S;return o.get(this.localWorld,w.id,w.type)!==null},getAllBodies:function(){return o.allBodies(this.localWorld)},getAllConstraints:function(){return o.allConstraints(this.localWorld)},getAllComposites:function(){return o.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var S=this.debugConfig,w=this.engine,R=this.debugGraphic,A=o.allBodies(this.localWorld);this.debugGraphic.clear(),S.showBroadphase&&w.broadphase.controller&&this.renderGrid(w.broadphase,R,S.broadphaseColor,.5),S.showBounds&&this.renderBodyBounds(A,R,S.boundsColor,.5),(S.showBody||S.showStaticBody)&&this.renderBodies(A),S.showJoint&&this.renderJoints(),(S.showAxes||S.showAngleIndicator)&&this.renderBodyAxes(A,R,S.showAxes,S.angleColor,.5),S.showVelocity&&this.renderBodyVelocity(A,R,S.velocityColor,1,2),S.showSeparations&&this.renderSeparations(w.pairs.list,R,S.separationColor),S.showCollisions&&this.renderCollisions(w.pairs.list,R,S.collisionColor)}},renderGrid:function(S,w,R,A){w.lineStyle(1,R,A);for(var O=h.keys(S.buckets),F=0;F<O.length;F++){var b=O[F];if(!(S.buckets[b].length<2)){var D=b.split(/C|R/);w.strokeRect(parseInt(D[1],10)*S.bucketWidth,parseInt(D[2],10)*S.bucketHeight,S.bucketWidth,S.bucketHeight)}}return this},renderSeparations:function(S,w,R){w.lineStyle(1,R,1);for(var A=0;A<S.length;A++){var O=S[A];if(O.isActive){var F=O.collision,b=F.bodyA,D=F.bodyB,I=b.position,B=D.position,k=F.penetration,U=!b.isStatic&&!D.isStatic?4:1;D.isStatic&&(U=0),w.lineBetween(B.x,B.y,B.x-k.x*U,B.y-k.y*U),U=!b.isStatic&&!D.isStatic?4:1,b.isStatic&&(U=0),w.lineBetween(I.x,I.y,I.x-k.x*U,I.y-k.y*U)}}return this},renderCollisions:function(S,w,R){w.lineStyle(1,R,.5),w.fillStyle(R,1);var A,O;for(A=0;A<S.length;A++)if(O=S[A],!!O.isActive)for(var F=0;F<O.activeContacts.length;F++){var b=O.activeContacts[F],D=b.vertex;w.fillRect(D.x-2,D.y-2,5,5)}for(A=0;A<S.length;A++)if(O=S[A],!!O.isActive){var I=O.collision,B=O.activeContacts;if(B.length>0){var k=B[0].vertex.x,U=B[0].vertex.y;B.length===2&&(k=(B[0].vertex.x+B[1].vertex.x)/2,U=(B[0].vertex.y+B[1].vertex.y)/2),I.bodyB===I.supports[0].body||I.bodyA.isStatic?w.lineBetween(k-I.normal.x*8,U-I.normal.y*8,k,U):w.lineBetween(k+I.normal.x*8,U+I.normal.y*8,k,U)}}return this},renderBodyBounds:function(S,w,R,A){w.lineStyle(1,R,A);for(var O=0;O<S.length;O++){var F=S[O];if(F.render.visible){var b=F.bounds;if(b)w.strokeRect(b.min.x,b.min.y,b.max.x-b.min.x,b.max.y-b.min.y);else for(var D=F.parts,I=D.length>1?1:0;I<D.length;I++){var B=D[I];w.strokeRect(B.bounds.min.x,B.bounds.min.y,B.bounds.max.x-B.bounds.min.x,B.bounds.max.y-B.bounds.min.y)}}}return this},renderBodyAxes:function(S,w,R,A,O){w.lineStyle(1,A,O);for(var F=0;F<S.length;F++){var b=S[F],D=b.parts;if(b.render.visible){var I,B,k;if(R)for(B=D.length>1?1:0;B<D.length;B++)for(I=D[B],k=0;k<I.axes.length;k++){var U=I.axes[k];w.lineBetween(I.position.x,I.position.y,I.position.x+U.x*20,I.position.y+U.y*20)}else for(B=D.length>1?1:0;B<D.length;B++)for(I=D[B],k=0;k<I.axes.length;k++)w.lineBetween(I.position.x,I.position.y,(I.vertices[0].x+I.vertices[I.vertices.length-1].x)/2,(I.vertices[0].y+I.vertices[I.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(S,w,R,A,O){w.lineStyle(O,R,A);for(var F=0;F<S.length;F++){var b=S[F];b.render.visible&&w.lineBetween(b.position.x,b.position.y,b.position.x+(b.position.x-b.positionPrev.x)*2,b.position.y+(b.position.y-b.positionPrev.y)*2)}return this},renderBodies:function(S){for(var w=this.debugGraphic,R=this.debugConfig,A=R.showBody,O=R.showStaticBody,F=R.showSleeping,b=R.showInternalEdges,D=R.showConvexHulls,I=R.renderFill,B=R.renderLine,k=R.staticBodySleepOpacity,U=R.sleepFillColor,X=R.sleepLineColor,H=R.hullColor,N=0;N<S.length;N++){var z=S[N];if(z.render.visible&&!(!O&&z.isStatic||!A&&!z.isStatic)){var L=z.render.lineColor,G=z.render.lineOpacity,V=z.render.lineThickness,Y=z.render.fillColor,W=z.render.fillOpacity;F&&z.isSleeping&&(z.isStatic?(G*=k,W*=k):(L=X,Y=U)),I||(Y=null),B||(L=null),this.renderBody(z,w,b,L,G,V,Y,W);var $=z.parts.length;D&&$>1&&this.renderConvexHull(z,w,H,V)}}},renderBody:function(S,w,R,A,O,F,b,D){A===void 0&&(A=null),O===void 0&&(O=null),F===void 0&&(F=1),b===void 0&&(b=null),D===void 0&&(D=null);for(var I=this.debugConfig,B=I.sensorFillColor,k=I.sensorLineColor,U=S.parts,X=U.length,H=X>1?1:0;H<X;H++){var N=U[H],z=N.render,L=z.opacity;if(!(!z.visible||L===0||N.isSensor&&!I.showSensors)){var G=N.circleRadius;if(w.beginPath(),N.isSensor?(b!==null&&w.fillStyle(B,D*L),A!==null&&w.lineStyle(F,k,O*L)):(b!==null&&w.fillStyle(b,D*L),A!==null&&w.lineStyle(F,A,O*L)),G)w.arc(N.position.x,N.position.y,G,0,2*Math.PI);else{var V=N.vertices,Y=V.length;w.moveTo(V[0].x,V[0].y);for(var W=1;W<Y;W++){var $=V[W];if(!V[W-1].isInternal||R?w.lineTo($.x,$.y):w.moveTo($.x,$.y),W<Y&&$.isInternal&&!R){var K=(W+1)%Y;w.moveTo(V[K].x,V[K].y)}}w.closePath()}b!==null&&w.fillPath(),A!==null&&w.strokePath()}}if(I.showPositions&&!S.isStatic){var j=S.position.x,J=S.position.y,q=Math.ceil(I.positionSize/2);w.fillStyle(I.positionColor,1),w.fillRect(j-q,J-q,I.positionSize,I.positionSize)}return this},renderConvexHull:function(S,w,R,A){A===void 0&&(A=1);var O=S.parts,F=O.length;if(F>1){var b=S.vertices;w.lineStyle(A,R),w.beginPath(),w.moveTo(b[0].x,b[0].y);for(var D=1;D<b.length;D++)w.lineTo(b[D].x,b[D].y);w.lineTo(b[0].x,b[0].y),w.strokePath()}return this},renderJoints:function(){for(var S=this.debugGraphic,w=o.allConstraints(this.localWorld),R=0;R<w.length;R++){var A=w[R].render,O=A.lineColor,F=A.lineOpacity,b=A.lineThickness,D=A.pinSize,I=A.anchorColor,B=A.anchorSize;this.renderConstraint(w[R],S,O,F,b,D,I,B)}},renderConstraint:function(S,w,R,A,O,F,b,D){var I=S.render;if(!I.visible||!S.pointA||!S.pointB)return this;w.lineStyle(O,R,A);var B=S.bodyA,k=S.bodyB,U,X;if(B?U=P.add(B.position,S.pointA):U=S.pointA,I.type==="pin")w.strokeCircle(U.x,U.y,F);else{if(k?X=P.add(k.position,S.pointB):X=S.pointB,w.beginPath(),w.moveTo(U.x,U.y),I.type==="spring")for(var H=P.sub(X,U),N=P.perp(P.normalise(H)),z=Math.ceil(h.clamp(S.length/5,12,20)),L,G=1;G<z;G+=1)L=G%2===0?1:-1,w.lineTo(U.x+H.x*(G/z)+N.x*L*4,U.y+H.y*(G/z)+N.y*L*4);w.lineTo(X.x,X.y)}return w.strokePath(),I.anchors&&D>0&&(w.fillStyle(b),w.fillCircle(U.x,U.y,D),w.fillCircle(X.x,X.y,D)),this},resetCollisionIDs:function(){return x._nextCollidingGroupId=1,x._nextNonCollidingGroupId=-1,x._nextCategory=1,this},shutdown:function(){v.off(this.engine),this.removeAllListeners(),y.clear(this.localWorld,!1),n.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});l.exports=E},95349:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setBounce:function(e){return this.body.restitution=e,this}};l.exports=T},70679:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setCollisionCategory:function(e){return this.body.collisionFilter.category=e,this},setCollisionGroup:function(e){return this.body.collisionFilter.group=e,this},setCollidesWith:function(e){var d=0;if(!Array.isArray(e))d=e;else for(var x=0;x<e.length;x++)d|=e[x];return this.body.collisionFilter.mask=d,this},setOnCollide:function(e){return this.body.onCollideCallback=e,this},setOnCollideEnd:function(e){return this.body.onCollideEndCallback=e,this},setOnCollideActive:function(e){return this.body.onCollideActiveCallback=e,this},setOnCollideWith:function(e,d){Array.isArray(e)||(e=[e]);for(var x=0;x<e.length;x++){var u=e[x].hasOwnProperty("body")?e[x].body:e[x];this.body.setOnCollideWith(u,d)}return this}};l.exports=T},77178:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84125),x={applyForce:function(u){return this._tempVec2.set(this.body.position.x,this.body.position.y),d.applyForce(this.body,this._tempVec2,u),this},applyForceFrom:function(u,h){return d.applyForce(this.body,u,h),this},thrust:function(u){var h=this.body.angle;return this._tempVec2.set(u*Math.cos(h),u*Math.sin(h)),d.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(u){var h=this.body.angle-Math.PI/2;return this._tempVec2.set(u*Math.cos(h),u*Math.sin(h)),d.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(u){var h=this.body.angle+Math.PI/2;return this._tempVec2.set(u*Math.cos(h),u*Math.sin(h)),d.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(u){var h=this.body.angle-Math.PI;return this._tempVec2.set(u*Math.cos(h),u*Math.sin(h)),d.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};l.exports=x},74015:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setFriction:function(e,d,x){return this.body.friction=e,d!==void 0&&(this.body.frictionAir=d),x!==void 0&&(this.body.frictionStatic=x),this},setFrictionAir:function(e){return this.body.frictionAir=e,this},setFrictionStatic:function(e){return this.body.frictionStatic=e,this}};l.exports=T},11535:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setIgnoreGravity:function(e){return this.body.ignoreGravity=e,this}};l.exports=T},74497:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84125),x=e(93736),u={setMass:function(h){return d.setMass(this.body,h),this},setDensity:function(h){return d.setDensity(this.body,h),this},centerOfMass:{get:function(){return new x(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};l.exports=u},75529:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setSensor:function(e){return this.body.isSensor=e,this},isSensor:function(){return this.body.isSensor}};l.exports=T},64024:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68516),x=e(84125),u=e(88456),h=e(72632),o=e(10998),n=e(72829),r=e(39745),f={setRectangle:function(a,c,p){return this.setBody({type:"rectangle",width:a,height:c},p)},setCircle:function(a,c){return this.setBody({type:"circle",radius:a},c)},setPolygon:function(a,c,p){return this.setBody({type:"polygon",sides:c,radius:a},p)},setTrapezoid:function(a,c,p,v){return this.setBody({type:"trapezoid",width:a,height:c,slope:p},v)},setExistingBody:function(a,c){c===void 0&&(c=!0),this.body&&this.world.remove(this.body,!0),this.body=a;for(var p=0;p<a.parts.length;p++)a.parts[p].gameObject=this;var v=this;if(a.destroy=function(){v.world.remove(v.body,!0),v.body.gameObject=null},c&&(this.world.has(a)&&this.world.remove(a,!0),this.world.add(a)),this._originComponent){var m=a.render.sprite.xOffset,y=a.render.sprite.yOffset,P=a.centerOfMass.x,E=a.centerOfMass.y;if(u(P,.5)&&u(E,.5))this.setOrigin(m+.5,y+.5);else{var S=a.centerOffset.x,w=a.centerOffset.y;this.setOrigin(m+S/this.displayWidth,y+w/this.displayHeight)}}return this},setBody:function(a,c){if(!a)return this;var p;typeof a=="string"&&(a={type:a});var v=h(a,"type","rectangle"),m=h(a,"x",this._tempVec2.x),y=h(a,"y",this._tempVec2.y),P=h(a,"width",this.width),E=h(a,"height",this.height);switch(v){case"rectangle":p=d.rectangle(m,y,P,E,c);break;case"circle":var S=h(a,"radius",Math.max(P,E)/2),w=h(a,"maxSides",25);p=d.circle(m,y,S,c,w);break;case"trapezoid":var R=h(a,"slope",.5);p=d.trapezoid(m,y,P,E,R,c);break;case"polygon":var A=h(a,"sides",5),O=h(a,"radius",Math.max(P,E)/2);p=d.polygon(m,y,A,O,c);break;case"fromVertices":case"fromVerts":var F=h(a,"verts",null);if(F)if(typeof F=="string"&&(F=r.fromPath(F)),this.body&&!this.body.hasOwnProperty("temp"))x.setVertices(this.body,F),p=this.body;else{var b=h(a,"flagInternal",!1),D=h(a,"removeCollinear",.01),I=h(a,"minimumArea",10);p=d.fromVertices(m,y,F,c,b,D,I)}break;case"fromPhysicsEditor":p=o.parseBody(m,y,a,c);break;case"fromPhysicsTracer":p=n.parseBody(m,y,a,c);break}return p&&this.setExistingBody(p,a.addToWorld),this}};l.exports=f},25106:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(35416),x=e(22806),u=e(39073),h={setToSleep:function(){return x.set(this.body,!0),this},setAwake:function(){return x.set(this.body,!1),this},setSleepThreshold:function(o){return o===void 0&&(o=60),this.body.sleepThreshold=o,this},setSleepEvents:function(o,n){return this.setSleepStartEvent(o),this.setSleepEndEvent(n),this},setSleepStartEvent:function(o){if(o){var n=this.world;u.on(this.body,"sleepStart",function(r){n.emit(d.SLEEP_START,r,this)})}else u.off(this.body,"sleepStart");return this},setSleepEndEvent:function(o){if(o){var n=this.world;u.on(this.body,"sleepEnd",function(r){n.emit(d.SLEEP_END,r,this)})}else u.off(this.body,"sleepEnd");return this}};l.exports=h},82884:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84125),x={setStatic:function(u){return d.setStatic(this.body,u),this},isStatic:function(){return this.body.isStatic}};l.exports=x},4753:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84125),x=e(83392),u=e(35786),h=e(62138),o=4,n={x:{get:function(){return this.body.position.x},set:function(r){this._tempVec2.set(r,this.y),d.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(r){this._tempVec2.set(this.x,r),d.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(r){var f=1/this._scaleX,a=1/this._scaleY;this._scaleX=r,this._scaleX===0?this.renderFlags&=~o:this.renderFlags|=o,d.scale(this.body,f,a),d.scale(this.body,r,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(r){var f=1/this._scaleX,a=1/this._scaleY;this._scaleY=r,this._scaleY===0?this.renderFlags&=~o:this.renderFlags|=o,d.scale(this.body,f,a),d.scale(this.body,this._scaleX,r)}},angle:{get:function(){return h(this.body.angle*x.RAD_TO_DEG)},set:function(r){this.rotation=h(r)*x.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(r){this._rotation=u(r),d.setAngle(this.body,this._rotation)}},setPosition:function(r,f){return r===void 0&&(r=0),f===void 0&&(f=r),this._tempVec2.set(r,f),d.setPosition(this.body,this._tempVec2),this},setRotation:function(r){return r===void 0&&(r=0),this._rotation=u(r),d.setAngle(this.body,r),this},setFixedRotation:function(){return d.setInertia(this.body,1/0),this},setAngle:function(r){return r===void 0&&(r=0),this.angle=r,d.setAngle(this.body,this.rotation),this},setScale:function(r,f,a){r===void 0&&(r=1),f===void 0&&(f=r);var c=1/this._scaleX,p=1/this._scaleY;return this._scaleX=r,this._scaleY=f,d.scale(this.body,c,p,a),d.scale(this.body,r,f,a),this}};l.exports=n},37268:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84125),x={setVelocityX:function(u){return this._tempVec2.set(u,this.body.velocity.y),d.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(u){return this._tempVec2.set(this.body.velocity.x,u),d.setVelocity(this.body,this._tempVec2),this},setVelocity:function(u,h){return this._tempVec2.set(u,h),d.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return d.getVelocity(this.body)},setAngularVelocity:function(u){return d.setAngularVelocity(this.body,u),this},getAngularVelocity:function(){return d.getAngularVelocity(this.body)},setAngularSpeed:function(u){return d.setAngularSpeed(this.body,u),this},getAngularSpeed:function(){return d.getAngularSpeed(this.body)}};l.exports=x},74527:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={Bounce:e(95349),Collision:e(70679),Force:e(77178),Friction:e(74015),Gravity:e(11535),Mass:e(74497),Sensor:e(75529),SetBody:e(64024),Sleep:e(25106),Static:e(82884),Transform:e(4753),Velocity:e(37268)}},63201:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="afteradd"},30474:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="afterremove"},44822:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="afterupdate"},88820:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="beforeadd"},94849:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="beforeremove"},6391:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="beforeupdate"},96738:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="collisionactive"},7916:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="collisionend"},59529:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="collisionstart"},10219:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="dragend"},183:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="drag"},39143:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="dragstart"},16483:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pause"},35806:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="resume"},22106:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="sleepend"},5803:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="sleepstart"},35416:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={AFTER_ADD:e(63201),AFTER_REMOVE:e(30474),AFTER_UPDATE:e(44822),BEFORE_ADD:e(88820),BEFORE_REMOVE:e(94849),BEFORE_UPDATE:e(6391),COLLISION_ACTIVE:e(96738),COLLISION_END:e(7916),COLLISION_START:e(59529),DRAG_END:e(10219),DRAG:e(183),DRAG_START:e(39143),PAUSE:e(16483),RESUME:e(35806),SLEEP_END:e(22106),SLEEP_START:e(5803)}},45949:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={BodyBounds:e(63568),Components:e(74527),Events:e(35416),Factory:e(72653),MatterGameObject:e(3860),Image:e(7030),Matter:e(18171),MatterPhysics:e(50583),PolyDecomp:e(81084),Sprite:e(73658),TileBody:e(84720),PhysicsEditorParser:e(10998),PhysicsJSONParser:e(72829),PointerConstraint:e(88596),World:e(31468)}},84125:(l,T,e)=>{var d={};l.exports=d;var x=e(39745),u=e(10438),h=e(22806),o=e(68758),n=e(84091),r=e(50658);(function(){d._timeCorrection=!0,d._inertiaScale=4,d._nextCollidingGroupId=1,d._nextNonCollidingGroupId=-1,d._nextCategory=1,d._baseDelta=16.666666666666668,d.create=function(a){var c={id:o.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!a.hasOwnProperty("position")&&a.hasOwnProperty("vertices")?a.position=x.centre(a.vertices):a.hasOwnProperty("vertices")||(c.vertices=x.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var p=o.extend(c,a);return f(p,a),p.setOnCollideWith=function(v,m){return m?this.onCollideWith[v.id]=m:delete this.onCollideWith[v.id],this},p},d.nextGroup=function(a){return a?d._nextNonCollidingGroupId--:d._nextCollidingGroupId++},d.nextCategory=function(){return d._nextCategory=d._nextCategory<<1,d._nextCategory};var f=function(a,c){if(c=c||{},d.set(a,{bounds:a.bounds||n.create(a.vertices),positionPrev:a.positionPrev||u.clone(a.position),anglePrev:a.anglePrev||a.angle,vertices:a.vertices,parts:a.parts||[a],isStatic:a.isStatic,isSleeping:a.isSleeping,parent:a.parent||a}),x.rotate(a.vertices,a.angle,a.position),r.rotate(a.axes,a.angle),n.update(a.bounds,a.vertices,a.velocity),d.set(a,{axes:c.axes||a.axes,area:c.area||a.area,mass:c.mass||a.mass,inertia:c.inertia||a.inertia}),a.parts.length===1){var p=a.bounds,v=a.centerOfMass,m=a.centerOffset,y=p.max.x-p.min.x,P=p.max.y-p.min.y;v.x=-(p.min.x-a.position.x)/y,v.y=-(p.min.y-a.position.y)/P,m.x=y*v.x,m.y=P*v.y}};d.set=function(a,c,p){var v;typeof c=="string"&&(v=c,c={},c[v]=p);for(v in c)if(Object.prototype.hasOwnProperty.call(c,v))switch(p=c[v],v){case"isStatic":d.setStatic(a,p);break;case"isSleeping":h.set(a,p);break;case"mass":d.setMass(a,p);break;case"density":d.setDensity(a,p);break;case"inertia":d.setInertia(a,p);break;case"vertices":d.setVertices(a,p);break;case"position":d.setPosition(a,p);break;case"angle":d.setAngle(a,p);break;case"velocity":d.setVelocity(a,p);break;case"angularVelocity":d.setAngularVelocity(a,p);break;case"speed":d.setSpeed(a,p);break;case"angularSpeed":d.setAngularSpeed(a,p);break;case"parts":d.setParts(a,p);break;case"centre":d.setCentre(a,p);break;default:a[v]=p}},d.setStatic=function(a,c){for(var p=0;p<a.parts.length;p++){var v=a.parts[p];c?(v.isStatic||(v._original={restitution:v.restitution,friction:v.friction,mass:v.mass,inertia:v.inertia,density:v.density,inverseMass:v.inverseMass,inverseInertia:v.inverseInertia}),v.restitution=0,v.friction=1,v.mass=v.inertia=v.density=1/0,v.inverseMass=v.inverseInertia=0,v.positionPrev.x=v.position.x,v.positionPrev.y=v.position.y,v.anglePrev=v.angle,v.angularVelocity=0,v.speed=0,v.angularSpeed=0,v.motion=0):v._original&&(v.restitution=v._original.restitution,v.friction=v._original.friction,v.mass=v._original.mass,v.inertia=v._original.inertia,v.density=v._original.density,v.inverseMass=v._original.inverseMass,v.inverseInertia=v._original.inverseInertia,v._original=null),v.isStatic=c}},d.setMass=function(a,c){var p=a.inertia/(a.mass/6);a.inertia=p*(c/6),a.inverseInertia=1/a.inertia,a.mass=c,a.inverseMass=1/a.mass,a.density=a.mass/a.area},d.setDensity=function(a,c){d.setMass(a,c*a.area),a.density=c},d.setInertia=function(a,c){a.inertia=c,a.inverseInertia=1/a.inertia},d.setVertices=function(a,c){c[0].body===a?a.vertices=c:a.vertices=x.create(c,a),a.axes=r.fromVertices(a.vertices),a.area=x.area(a.vertices),d.setMass(a,a.density*a.area);var p=x.centre(a.vertices);x.translate(a.vertices,p,-1),d.setInertia(a,d._inertiaScale*x.inertia(a.vertices,a.mass)),x.translate(a.vertices,a.position),n.update(a.bounds,a.vertices,a.velocity)},d.setParts=function(a,c,p){var v;for(c=c.slice(0),a.parts.length=0,a.parts.push(a),a.parent=a,v=0;v<c.length;v++){var m=c[v];m!==a&&(m.parent=a,a.parts.push(m))}if(a.parts.length!==1){if(p=typeof p<"u"?p:!0,p){var y=[];for(v=0;v<c.length;v++)y=y.concat(c[v].vertices);x.clockwiseSort(y);var P=x.hull(y),E=x.centre(P);d.setVertices(a,P),x.translate(a.vertices,E)}var S=d._totalProperties(a),w=S.centre.x,R=S.centre.y,A=a.bounds,O=a.centerOfMass,F=a.centerOffset;n.update(A,a.vertices,a.velocity),O.x=-(A.min.x-w)/(A.max.x-A.min.x),O.y=-(A.min.y-R)/(A.max.y-A.min.y),F.x=w,F.y=R,a.area=S.area,a.parent=a,a.position.x=w,a.position.y=R,a.positionPrev.x=w,a.positionPrev.y=R,d.setMass(a,S.mass),d.setInertia(a,S.inertia),d.setPosition(a,S.centre)}},d.setCentre=function(a,c,p){p?(a.positionPrev.x+=c.x,a.positionPrev.y+=c.y,a.position.x+=c.x,a.position.y+=c.y):(a.positionPrev.x=c.x-(a.position.x-a.positionPrev.x),a.positionPrev.y=c.y-(a.position.y-a.positionPrev.y),a.position.x=c.x,a.position.y=c.y)},d.setPosition=function(a,c,p){var v=u.sub(c,a.position);p?(a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.velocity.x=v.x,a.velocity.y=v.y,a.speed=u.magnitude(v)):(a.positionPrev.x+=v.x,a.positionPrev.y+=v.y);for(var m=0;m<a.parts.length;m++){var y=a.parts[m];y.position.x+=v.x,y.position.y+=v.y,x.translate(y.vertices,v),n.update(y.bounds,y.vertices,a.velocity)}},d.setAngle=function(a,c,p){var v=c-a.angle;p?(a.anglePrev=a.angle,a.angularVelocity=v,a.angularSpeed=Math.abs(v)):a.anglePrev+=v;for(var m=0;m<a.parts.length;m++){var y=a.parts[m];y.angle+=v,x.rotate(y.vertices,v,a.position),r.rotate(y.axes,v),n.update(y.bounds,y.vertices,a.velocity),m>0&&u.rotateAbout(y.position,v,a.position,y.position)}},d.setVelocity=function(a,c){var p=a.deltaTime/d._baseDelta;a.positionPrev.x=a.position.x-c.x*p,a.positionPrev.y=a.position.y-c.y*p,a.velocity.x=(a.position.x-a.positionPrev.x)/p,a.velocity.y=(a.position.y-a.positionPrev.y)/p,a.speed=u.magnitude(a.velocity)},d.getVelocity=function(a){var c=d._baseDelta/a.deltaTime;return{x:(a.position.x-a.positionPrev.x)*c,y:(a.position.y-a.positionPrev.y)*c}},d.getSpeed=function(a){return u.magnitude(d.getVelocity(a))},d.setSpeed=function(a,c){d.setVelocity(a,u.mult(u.normalise(d.getVelocity(a)),c))},d.setAngularVelocity=function(a,c){var p=a.deltaTime/d._baseDelta;a.anglePrev=a.angle-c*p,a.angularVelocity=(a.angle-a.anglePrev)/p,a.angularSpeed=Math.abs(a.angularVelocity)},d.getAngularVelocity=function(a){return(a.angle-a.anglePrev)*d._baseDelta/a.deltaTime},d.getAngularSpeed=function(a){return Math.abs(d.getAngularVelocity(a))},d.setAngularSpeed=function(a,c){d.setAngularVelocity(a,o.sign(d.getAngularVelocity(a))*c)},d.translate=function(a,c,p){d.setPosition(a,u.add(a.position,c),p)},d.rotate=function(a,c,p,v){if(!p)d.setAngle(a,a.angle+c,v);else{var m=Math.cos(c),y=Math.sin(c),P=a.position.x-p.x,E=a.position.y-p.y;d.setPosition(a,{x:p.x+(P*m-E*y),y:p.y+(P*y+E*m)},v),d.setAngle(a,a.angle+c,v)}},d.scale=function(a,c,p,v){var m=0,y=0;v=v||a.position;for(var P=0;P<a.parts.length;P++){var E=a.parts[P];E.scale.x=c,E.scale.y=p,x.scale(E.vertices,c,p,v),E.axes=r.fromVertices(E.vertices),E.area=x.area(E.vertices),d.setMass(E,a.density*E.area),x.translate(E.vertices,{x:-E.position.x,y:-E.position.y}),d.setInertia(E,d._inertiaScale*x.inertia(E.vertices,E.mass)),x.translate(E.vertices,{x:E.position.x,y:E.position.y}),P>0&&(m+=E.area,y+=E.inertia),E.position.x=v.x+(E.position.x-v.x)*c,E.position.y=v.y+(E.position.y-v.y)*p,n.update(E.bounds,E.vertices,a.velocity)}a.parts.length>1&&(a.area=m,a.isStatic||(d.setMass(a,a.density*m),d.setInertia(a,y))),a.circleRadius&&(c===p?a.circleRadius*=c:a.circleRadius=null)},d.update=function(a,c){c=(typeof c<"u"?c:16.666666666666668)*a.timeScale;var p=c*c,v=d._timeCorrection?c/(a.deltaTime||c):1,m=1-a.frictionAir*(c/o._baseDelta),y=(a.position.x-a.positionPrev.x)*v,P=(a.position.y-a.positionPrev.y)*v;a.velocity.x=y*m+a.force.x/a.mass*p,a.velocity.y=P*m+a.force.y/a.mass*p,a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.position.x+=a.velocity.x,a.position.y+=a.velocity.y,a.deltaTime=c,a.angularVelocity=(a.angle-a.anglePrev)*m*v+a.torque/a.inertia*p,a.anglePrev=a.angle,a.angle+=a.angularVelocity,a.speed=u.magnitude(a.velocity),a.angularSpeed=Math.abs(a.angularVelocity);for(var E=0;E<a.parts.length;E++){var S=a.parts[E];x.translate(S.vertices,a.velocity),E>0&&(S.position.x+=a.velocity.x,S.position.y+=a.velocity.y),a.angularVelocity!==0&&(x.rotate(S.vertices,a.angularVelocity,a.position),r.rotate(S.axes,a.angularVelocity),E>0&&u.rotateAbout(S.position,a.angularVelocity,a.position,S.position)),n.update(S.bounds,S.vertices,a.velocity)}},d.updateVelocities=function(a){var c=d._baseDelta/a.deltaTime,p=a.velocity;p.x=(a.position.x-a.positionPrev.x)*c,p.y=(a.position.y-a.positionPrev.y)*c,a.speed=Math.sqrt(p.x*p.x+p.y*p.y),a.angularVelocity=(a.angle-a.anglePrev)*c,a.angularSpeed=Math.abs(a.angularVelocity)},d.applyForce=function(a,c,p){var v={x:c.x-a.position.x,y:c.y-a.position.y};a.force.x+=p.x,a.force.y+=p.y,a.torque+=v.x*p.y-v.y*p.x},d._totalProperties=function(a){for(var c={mass:0,area:0,inertia:0,centre:{x:0,y:0}},p=a.parts.length===1?0:1;p<a.parts.length;p++){var v=a.parts[p],m=v.mass!==1/0?v.mass:1;c.mass+=m,c.area+=v.area,c.inertia+=v.inertia,c.centre=u.add(c.centre,u.mult(v.position,m))}return c.centre=u.div(c.centre,c.mass),c}})()},11299:(l,T,e)=>{var d={};l.exports=d;var x=e(39073),u=e(68758),h=e(84091),o=e(84125);(function(){d.create=function(n){return u.extend({id:u.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},n)},d.setModified=function(n,r,f,a){if(x.trigger(n,"compositeModified",n),n.isModified=r,r&&n.cache&&(n.cache.allBodies=null,n.cache.allConstraints=null,n.cache.allComposites=null),f&&n.parent&&d.setModified(n.parent,r,f,a),a)for(var c=0;c<n.composites.length;c++){var p=n.composites[c];d.setModified(p,r,f,a)}},d.add=function(n,r){var f=[].concat(r);x.trigger(n,"beforeAdd",{object:r});for(var a=0;a<f.length;a++){var c=f[a];switch(c.type){case"body":if(c.parent!==c){u.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}d.addBody(n,c);break;case"constraint":d.addConstraint(n,c);break;case"composite":d.addComposite(n,c);break;case"mouseConstraint":d.addConstraint(n,c.constraint);break}}return x.trigger(n,"afterAdd",{object:r}),n},d.remove=function(n,r,f){var a=[].concat(r);x.trigger(n,"beforeRemove",{object:r});for(var c=0;c<a.length;c++){var p=a[c];switch(p.type){case"body":d.removeBody(n,p,f);break;case"constraint":d.removeConstraint(n,p,f);break;case"composite":d.removeComposite(n,p,f);break;case"mouseConstraint":d.removeConstraint(n,p.constraint);break}}return x.trigger(n,"afterRemove",{object:r}),n},d.addComposite=function(n,r){return n.composites.push(r),r.parent=n,d.setModified(n,!0,!0,!1),n},d.removeComposite=function(n,r,f){var a=u.indexOf(n.composites,r);if(a!==-1&&d.removeCompositeAt(n,a),f)for(var c=0;c<n.composites.length;c++)d.removeComposite(n.composites[c],r,!0);return n},d.removeCompositeAt=function(n,r){return n.composites.splice(r,1),d.setModified(n,!0,!0,!1),n},d.addBody=function(n,r){return n.bodies.push(r),d.setModified(n,!0,!0,!1),n},d.removeBody=function(n,r,f){var a=u.indexOf(n.bodies,r);if(a!==-1&&d.removeBodyAt(n,a),f)for(var c=0;c<n.composites.length;c++)d.removeBody(n.composites[c],r,!0);return n},d.removeBodyAt=function(n,r){return n.bodies.splice(r,1),d.setModified(n,!0,!0,!1),n},d.addConstraint=function(n,r){return n.constraints.push(r),d.setModified(n,!0,!0,!1),n},d.removeConstraint=function(n,r,f){var a=u.indexOf(n.constraints,r);if(a!==-1&&d.removeConstraintAt(n,a),f)for(var c=0;c<n.composites.length;c++)d.removeConstraint(n.composites[c],r,!0);return n},d.removeConstraintAt=function(n,r){return n.constraints.splice(r,1),d.setModified(n,!0,!0,!1),n},d.clear=function(n,r,f){if(f)for(var a=0;a<n.composites.length;a++)d.clear(n.composites[a],r,!0);return r?n.bodies=n.bodies.filter(function(c){return c.isStatic}):n.bodies.length=0,n.constraints.length=0,n.composites.length=0,d.setModified(n,!0,!0,!1),n},d.allBodies=function(n){if(n.cache&&n.cache.allBodies)return n.cache.allBodies;for(var r=[].concat(n.bodies),f=0;f<n.composites.length;f++)r=r.concat(d.allBodies(n.composites[f]));return n.cache&&(n.cache.allBodies=r),r},d.allConstraints=function(n){if(n.cache&&n.cache.allConstraints)return n.cache.allConstraints;for(var r=[].concat(n.constraints),f=0;f<n.composites.length;f++)r=r.concat(d.allConstraints(n.composites[f]));return n.cache&&(n.cache.allConstraints=r),r},d.allComposites=function(n){if(n.cache&&n.cache.allComposites)return n.cache.allComposites;for(var r=[].concat(n.composites),f=0;f<n.composites.length;f++)r=r.concat(d.allComposites(n.composites[f]));return n.cache&&(n.cache.allComposites=r),r},d.get=function(n,r,f){var a,c;switch(f){case"body":a=d.allBodies(n);break;case"constraint":a=d.allConstraints(n);break;case"composite":a=d.allComposites(n).concat(n);break}return a?(c=a.filter(function(p){return p.id.toString()===r.toString()}),c.length===0?null:c[0]):null},d.move=function(n,r,f){return d.remove(n,r),d.add(f,r),n},d.rebase=function(n){for(var r=d.allBodies(n).concat(d.allConstraints(n)).concat(d.allComposites(n)),f=0;f<r.length;f++)r[f].id=u.nextId();return n},d.translate=function(n,r,f){for(var a=f?d.allBodies(n):n.bodies,c=0;c<a.length;c++)o.translate(a[c],r);return n},d.rotate=function(n,r,f,a){for(var c=Math.cos(r),p=Math.sin(r),v=a?d.allBodies(n):n.bodies,m=0;m<v.length;m++){var y=v[m],P=y.position.x-f.x,E=y.position.y-f.y;o.setPosition(y,{x:f.x+(P*c-E*p),y:f.y+(P*p+E*c)}),o.rotate(y,r)}return n},d.scale=function(n,r,f,a,c){for(var p=c?d.allBodies(n):n.bodies,v=0;v<p.length;v++){var m=p[v],y=m.position.x-a.x,P=m.position.y-a.y;o.setPosition(m,{x:a.x+y*r,y:a.y+P*f}),o.scale(m,r,f)}return n},d.bounds=function(n){for(var r=d.allBodies(n),f=[],a=0;a<r.length;a+=1){var c=r[a];f.push(c.bounds.min,c.bounds.max)}return h.create(f)}})()},72005:(l,T,e)=>{var d={};l.exports=d;var x=e(11299);(function(){d.create=x.create,d.add=x.add,d.remove=x.remove,d.clear=x.clear,d.addComposite=x.addComposite,d.addBody=x.addBody,d.addConstraint=x.addConstraint})()},63454:(l,T,e)=>{var d={};l.exports=d;var x=e(39745),u=e(70584);(function(){var h=[],o={overlap:0,axis:null},n={overlap:0,axis:null};d.create=function(r,f){return{pair:null,collided:!1,bodyA:r,bodyB:f,parentA:r.parent,parentB:f.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},d.collides=function(r,f,a){if(d._overlapAxes(o,r.vertices,f.vertices,r.axes),o.overlap<=0||(d._overlapAxes(n,f.vertices,r.vertices,f.axes),n.overlap<=0))return null;var c=a&&a.table[u.id(r,f)],p;c?p=c.collision:(p=d.create(r,f),p.collided=!0,p.bodyA=r.id<f.id?r:f,p.bodyB=r.id<f.id?f:r,p.parentA=p.bodyA.parent,p.parentB=p.bodyB.parent),r=p.bodyA,f=p.bodyB;var v;o.overlap<n.overlap?v=o:v=n;var m=p.normal,y=p.supports,P=v.axis,E=P.x,S=P.y;E*(f.position.x-r.position.x)+S*(f.position.y-r.position.y)<0?(m.x=E,m.y=S):(m.x=-E,m.y=-S),p.tangent.x=-m.y,p.tangent.y=m.x,p.depth=v.overlap,p.penetration.x=m.x*p.depth,p.penetration.y=m.y*p.depth;var w=d._findSupports(r,f,m,1),R=0;if(x.contains(r.vertices,w[0])&&(y[R++]=w[0]),x.contains(r.vertices,w[1])&&(y[R++]=w[1]),R<2){var A=d._findSupports(f,r,m,-1);x.contains(f.vertices,A[0])&&(y[R++]=A[0]),R<2&&x.contains(f.vertices,A[1])&&(y[R++]=A[1])}return R===0&&(y[R++]=w[0]),y.length=R,p},d._overlapAxes=function(r,f,a,c){var p=f.length,v=a.length,m=f[0].x,y=f[0].y,P=a[0].x,E=a[0].y,S=c.length,w=Number.MAX_VALUE,R=0,A,O,F,b,D,I;for(D=0;D<S;D++){var B=c[D],k=B.x,U=B.y,X=m*k+y*U,H=P*k+E*U,N=X,z=H;for(I=1;I<p;I+=1)b=f[I].x*k+f[I].y*U,b>N?N=b:b<X&&(X=b);for(I=1;I<v;I+=1)b=a[I].x*k+a[I].y*U,b>z?z=b:b<H&&(H=b);if(O=N-H,F=z-X,A=O<F?O:F,A<w&&(w=A,R=D,A<=0))break}r.axis=c[R],r.overlap=w},d._projectToAxis=function(r,f,a){for(var c=f[0].x*a.x+f[0].y*a.y,p=c,v=1;v<f.length;v+=1){var m=f[v].x*a.x+f[v].y*a.y;m>p?p=m:m<c&&(c=m)}r.min=c,r.max=p},d._findSupports=function(r,f,a,c){var p=f.vertices,v=p.length,m=r.position.x,y=r.position.y,P=a.x*c,E=a.y*c,S=Number.MAX_VALUE,w,R,A,O,F;for(F=0;F<v;F+=1)R=p[F],O=P*(m-R.x)+E*(y-R.y),O<S&&(S=O,w=R);return A=p[(v+w.index-1)%v],S=P*(m-A.x)+E*(y-A.y),R=p[(w.index+1)%v],P*(m-R.x)+E*(y-R.y)<S?(h[0]=w,h[1]=R,h):(h[0]=w,h[1]=A,h)}})()},17319:l=>{var T={};l.exports=T,function(){T.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},13657:(l,T,e)=>{var d={};l.exports=d;var x=e(68758),u=e(63454);(function(){d.create=function(h){var o={bodies:[],pairs:null};return x.extend(o,h)},d.setBodies=function(h,o){h.bodies=o.slice(0)},d.clear=function(h){h.bodies=[]},d.collisions=function(h){var o=[],n=h.pairs,r=h.bodies,f=r.length,a=d.canCollide,c=u.collides,p,v;for(r.sort(d._compareBoundsX),p=0;p<f;p++){var m=r[p],y=m.bounds,P=m.bounds.max.x,E=m.bounds.max.y,S=m.bounds.min.y,w=m.isStatic||m.isSleeping,R=m.parts.length,A=R===1;for(v=p+1;v<f;v++){var O=r[v],F=O.bounds;if(F.min.x>P)break;if(!(E<F.min.y||S>F.max.y)&&!(w&&(O.isStatic||O.isSleeping))&&a(m.collisionFilter,O.collisionFilter)){var b=O.parts.length;if(A&&b===1){var D=c(m,O,n);D&&o.push(D)}else for(var I=R>1?1:0,B=b>1?1:0,k=I;k<R;k++)for(var U=m.parts[k],y=U.bounds,X=B;X<b;X++){var H=O.parts[X],F=H.bounds;if(!(y.min.x>F.max.x||y.max.x<F.min.x||y.max.y<F.min.y||y.min.y>F.max.y)){var D=c(U,H,n);D&&o.push(D)}}}}}return o},d.canCollide=function(h,o){return h.group===o.group&&h.group!==0?h.group>0:(h.mask&o.category)!==0&&(o.mask&h.category)!==0},d._compareBoundsX=function(h,o){return h.bounds.min.x-o.bounds.min.x}})()},70584:(l,T,e)=>{var d={};l.exports=d;var x=e(17319);(function(){d.create=function(u,h){var o=u.bodyA,n=u.bodyB,r={id:d.id(o,n),bodyA:o,bodyB:n,collision:u,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:o.isSensor||n.isSensor,timeCreated:h,timeUpdated:h,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return d.update(r,u,h),r},d.update=function(u,h,o){var n=u.contacts,r=h.supports,f=u.activeContacts,a=h.parentA,c=h.parentB,p=a.vertices.length;u.isActive=!0,u.timeUpdated=o,u.collision=h,u.separation=h.depth,u.inverseMass=a.inverseMass+c.inverseMass,u.friction=a.friction<c.friction?a.friction:c.friction,u.frictionStatic=a.frictionStatic>c.frictionStatic?a.frictionStatic:c.frictionStatic,u.restitution=a.restitution>c.restitution?a.restitution:c.restitution,u.slop=a.slop>c.slop?a.slop:c.slop,h.pair=u,f.length=0;for(var v=0;v<r.length;v++){var m=r[v],y=m.body===a?m.index:p+m.index,P=n[y];P?f.push(P):f.push(n[y]=x.create(m))}},d.setActive=function(u,h,o){h?(u.isActive=!0,u.timeUpdated=o):(u.isActive=!1,u.activeContacts.length=0)},d.id=function(u,h){return u.id<h.id?"A"+u.id+"B"+h.id:"A"+h.id+"B"+u.id}})()},91327:(l,T,e)=>{var d={};l.exports=d;var x=e(70584),u=e(68758);(function(){d.create=function(h){return u.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},h)},d.update=function(h,o,n){var r=h.list,f=r.length,a=h.table,c=o.length,p=h.collisionStart,v=h.collisionEnd,m=h.collisionActive,y,P,E,S;for(p.length=0,v.length=0,m.length=0,S=0;S<f;S++)r[S].confirmedActive=!1;for(S=0;S<c;S++)y=o[S],E=y.pair,E?(E.isActive?m.push(E):p.push(E),x.update(E,y,n),E.confirmedActive=!0):(E=x.create(y,n),a[E.id]=E,p.push(E),r.push(E));var w=[];for(f=r.length,S=0;S<f;S++)E=r[S],E.confirmedActive||(x.setActive(E,!1,n),v.push(E),!E.collision.bodyA.isSleeping&&!E.collision.bodyB.isSleeping&&w.push(S));for(S=0;S<w.length;S++)P=w[S]-S,E=r[P],r.splice(P,1),delete a[E.id]},d.clear=function(h){return h.table={},h.list.length=0,h.collisionStart.length=0,h.collisionActive.length=0,h.collisionEnd.length=0,h}})()},13390:(l,T,e)=>{var d={};l.exports=d;var x=e(10438),u=e(63454),h=e(84091),o=e(68516),n=e(39745);(function(){d.collides=function(r,f){for(var a=[],c=f.length,p=r.bounds,v=u.collides,m=h.overlaps,y=0;y<c;y++){var P=f[y],E=P.parts.length,S=E===1?0:1;if(r!==P&&m(P.bounds,p))for(var w=S;w<E;w++){var R=P.parts[w];if(m(R.bounds,p)){var A=v(R,r);if(A){a.push(A);break}}}}return a},d.ray=function(r,f,a,c){c=c||1e-100;for(var p=x.angle(f,a),v=x.magnitude(x.sub(f,a)),m=(a.x+f.x)*.5,y=(a.y+f.y)*.5,P=o.rectangle(m,y,v,c,{angle:p}),E=d.collides(P,r),S=0;S<E.length;S+=1){var w=E[S];w.body=w.bodyB=w.bodyA}return E},d.region=function(r,f,a){for(var c=[],p=0;p<r.length;p++){var v=r[p],m=h.overlaps(v.bounds,f);(m&&!a||!m&&a)&&c.push(v)}return c},d.point=function(r,f){for(var a=[],c=0;c<r.length;c++){var p=r[c];if(h.contains(p.bounds,f))for(var v=p.parts.length===1?0:1;v<p.parts.length;v++){var m=p.parts[v];if(h.contains(m.bounds,f)&&n.contains(m.vertices,f)){a.push(p);break}}}return a}})()},44272:(l,T,e)=>{var d={};l.exports=d;var x=e(39745),u=e(68758),h=e(84091);(function(){d._restingThresh=2,d._restingThreshTangent=Math.sqrt(6),d._positionDampen=.9,d._positionWarming=.8,d._frictionNormalMultiplier=5,d._frictionMaxStatic=Number.MAX_VALUE,d.preSolvePosition=function(o){var n,r,f,a=o.length;for(n=0;n<a;n++)r=o[n],r.isActive&&(f=r.activeContacts.length,r.collision.parentA.totalContacts+=f,r.collision.parentB.totalContacts+=f)},d.solvePosition=function(o,n,r){var f,a,c,p,v,m,y,P,E=d._positionDampen*(r||1),S=u.clamp(n/u._baseDelta,0,1),w=o.length;for(f=0;f<w;f++)a=o[f],!(!a.isActive||a.isSensor)&&(c=a.collision,p=c.parentA,v=c.parentB,m=c.normal,a.separation=m.x*(v.positionImpulse.x+c.penetration.x-p.positionImpulse.x)+m.y*(v.positionImpulse.y+c.penetration.y-p.positionImpulse.y));for(f=0;f<w;f++)a=o[f],!(!a.isActive||a.isSensor)&&(c=a.collision,p=c.parentA,v=c.parentB,m=c.normal,P=a.separation-a.slop*S,(p.isStatic||v.isStatic)&&(P*=2),p.isStatic||p.isSleeping||(y=E/p.totalContacts,p.positionImpulse.x+=m.x*P*y,p.positionImpulse.y+=m.y*P*y),v.isStatic||v.isSleeping||(y=E/v.totalContacts,v.positionImpulse.x-=m.x*P*y,v.positionImpulse.y-=m.y*P*y))},d.postSolvePosition=function(o){for(var n=d._positionWarming,r=o.length,f=x.translate,a=h.update,c=0;c<r;c++){var p=o[c],v=p.positionImpulse,m=v.x,y=v.y,P=p.velocity;if(p.totalContacts=0,m!==0||y!==0){for(var E=0;E<p.parts.length;E++){var S=p.parts[E];f(S.vertices,v),a(S.bounds,S.vertices,P),S.position.x+=m,S.position.y+=y}p.positionPrev.x+=m,p.positionPrev.y+=y,m*P.x+y*P.y<0?(v.x=0,v.y=0):(v.x*=n,v.y*=n)}}},d.preSolveVelocity=function(o){var n=o.length,r,f;for(r=0;r<n;r++){var a=o[r];if(!(!a.isActive||a.isSensor)){var c=a.activeContacts,p=c.length,v=a.collision,m=v.parentA,y=v.parentB,P=v.normal,E=v.tangent;for(f=0;f<p;f++){var S=c[f],w=S.vertex,R=S.normalImpulse,A=S.tangentImpulse;if(R!==0||A!==0){var O=P.x*R+E.x*A,F=P.y*R+E.y*A;m.isStatic||m.isSleeping||(m.positionPrev.x+=O*m.inverseMass,m.positionPrev.y+=F*m.inverseMass,m.anglePrev+=m.inverseInertia*((w.x-m.position.x)*F-(w.y-m.position.y)*O)),y.isStatic||y.isSleeping||(y.positionPrev.x-=O*y.inverseMass,y.positionPrev.y-=F*y.inverseMass,y.anglePrev-=y.inverseInertia*((w.x-y.position.x)*F-(w.y-y.position.y)*O))}}}}},d.solveVelocity=function(o,n){var r=n/u._baseDelta,f=r*r,a=f*r,c=-d._restingThresh*r,p=d._restingThreshTangent,v=d._frictionNormalMultiplier*r,m=d._frictionMaxStatic,y=o.length,P,E,S,w;for(S=0;S<y;S++){var R=o[S];if(!(!R.isActive||R.isSensor)){var A=R.collision,O=A.parentA,F=A.parentB,b=O.velocity,D=F.velocity,I=A.normal.x,B=A.normal.y,k=A.tangent.x,U=A.tangent.y,X=R.activeContacts,H=X.length,N=1/H,z=O.inverseMass+F.inverseMass,L=R.friction*R.frictionStatic*v;for(b.x=O.position.x-O.positionPrev.x,b.y=O.position.y-O.positionPrev.y,D.x=F.position.x-F.positionPrev.x,D.y=F.position.y-F.positionPrev.y,O.angularVelocity=O.angle-O.anglePrev,F.angularVelocity=F.angle-F.anglePrev,w=0;w<H;w++){var G=X[w],V=G.vertex,Y=V.x-O.position.x,W=V.y-O.position.y,$=V.x-F.position.x,K=V.y-F.position.y,j=b.x-W*O.angularVelocity,J=b.y+Y*O.angularVelocity,q=D.x-K*F.angularVelocity,_=D.y+$*F.angularVelocity,et=j-q,tt=J-_,rt=I*et+B*tt,ft=k*et+U*tt,vt=R.separation+rt,ct=Math.min(vt,1);ct=vt<0?0:ct;var st=ct*L;ft<-st||ft>st?(E=ft>0?ft:-ft,P=R.friction*(ft>0?1:-1)*a,P<-E?P=-E:P>E&&(P=E)):(P=ft,E=m);var dt=Y*B-W*I,ut=$*B-K*I,Ct=N/(z+O.inverseInertia*dt*dt+F.inverseInertia*ut*ut),Tt=(1+R.restitution)*rt*Ct;if(P*=Ct,rt<c)G.normalImpulse=0;else{var Xt=G.normalImpulse;G.normalImpulse+=Tt,G.normalImpulse>0&&(G.normalImpulse=0),Tt=G.normalImpulse-Xt}if(ft<-p||ft>p)G.tangentImpulse=0;else{var Bt=G.tangentImpulse;G.tangentImpulse+=P,G.tangentImpulse<-E&&(G.tangentImpulse=-E),G.tangentImpulse>E&&(G.tangentImpulse=E),P=G.tangentImpulse-Bt}var Ot=I*Tt+k*P,yt=B*Tt+U*P;O.isStatic||O.isSleeping||(O.positionPrev.x+=Ot*O.inverseMass,O.positionPrev.y+=yt*O.inverseMass,O.anglePrev+=(Y*yt-W*Ot)*O.inverseInertia),F.isStatic||F.isSleeping||(F.positionPrev.x-=Ot*F.inverseMass,F.positionPrev.y-=yt*F.inverseMass,F.anglePrev-=($*yt-K*Ot)*F.inverseInertia)}}}}})()},52838:(l,T,e)=>{var d={};l.exports=d;var x=e(39745),u=e(10438),h=e(22806),o=e(84091),n=e(50658),r=e(68758);(function(){d._warming=.4,d._torqueDampen=1,d._minLength=1e-6,d.create=function(f){var a=f;a.bodyA&&!a.pointA&&(a.pointA={x:0,y:0}),a.bodyB&&!a.pointB&&(a.pointB={x:0,y:0});var c=a.bodyA?u.add(a.bodyA.position,a.pointA):a.pointA,p=a.bodyB?u.add(a.bodyB.position,a.pointB):a.pointB,v=u.magnitude(u.sub(c,p));a.length=typeof a.length<"u"?a.length:v,a.id=a.id||r.nextId(),a.label=a.label||"Constraint",a.type="constraint",a.stiffness=a.stiffness||(a.length>0?1:.7),a.damping=a.damping||0,a.angularStiffness=a.angularStiffness||0,a.angleA=a.bodyA?a.bodyA.angle:a.angleA,a.angleB=a.bodyB?a.bodyB.angle:a.angleB,a.plugin={};var m={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return a.length===0&&a.stiffness>.1?(m.type="pin",m.anchors=!1):a.stiffness<.9&&(m.type="spring"),a.render=r.extend(m,a.render),a},d.preSolveAll=function(f){for(var a=0;a<f.length;a+=1){var c=f[a],p=c.constraintImpulse;c.isStatic||p.x===0&&p.y===0&&p.angle===0||(c.position.x+=p.x,c.position.y+=p.y,c.angle+=p.angle)}},d.solveAll=function(f,a){for(var c=r.clamp(a/r._baseDelta,0,1),p=0;p<f.length;p+=1){var v=f[p],m=!v.bodyA||v.bodyA&&v.bodyA.isStatic,y=!v.bodyB||v.bodyB&&v.bodyB.isStatic;(m||y)&&d.solve(f[p],c)}for(p=0;p<f.length;p+=1)v=f[p],m=!v.bodyA||v.bodyA&&v.bodyA.isStatic,y=!v.bodyB||v.bodyB&&v.bodyB.isStatic,!m&&!y&&d.solve(f[p],c)},d.solve=function(f,a){var c=f.bodyA,p=f.bodyB,v=f.pointA,m=f.pointB;if(!(!c&&!p)){c&&!c.isStatic&&(u.rotate(v,c.angle-f.angleA,v),f.angleA=c.angle),p&&!p.isStatic&&(u.rotate(m,p.angle-f.angleB,m),f.angleB=p.angle);var y=v,P=m;if(c&&(y=u.add(c.position,v)),p&&(P=u.add(p.position,m)),!(!y||!P)){var E=u.sub(y,P),S=u.magnitude(E);S<d._minLength&&(S=d._minLength);var w=(S-f.length)/S,R=f.stiffness>=1||f.length===0,A=R?f.stiffness*a:f.stiffness*a*a,O=f.damping*a,F=u.mult(E,w*A),b=(c?c.inverseMass:0)+(p?p.inverseMass:0),D=(c?c.inverseInertia:0)+(p?p.inverseInertia:0),I=b+D,B,k,U,X,H;if(O>0){var N=u.create();U=u.div(E,S),H=u.sub(p&&u.sub(p.position,p.positionPrev)||N,c&&u.sub(c.position,c.positionPrev)||N),X=u.dot(U,H)}c&&!c.isStatic&&(k=c.inverseMass/b,c.constraintImpulse.x-=F.x*k,c.constraintImpulse.y-=F.y*k,c.position.x-=F.x*k,c.position.y-=F.y*k,O>0&&(c.positionPrev.x-=O*U.x*X*k,c.positionPrev.y-=O*U.y*X*k),B=u.cross(v,F)/I*d._torqueDampen*c.inverseInertia*(1-f.angularStiffness),c.constraintImpulse.angle-=B,c.angle-=B),p&&!p.isStatic&&(k=p.inverseMass/b,p.constraintImpulse.x+=F.x*k,p.constraintImpulse.y+=F.y*k,p.position.x+=F.x*k,p.position.y+=F.y*k,O>0&&(p.positionPrev.x+=O*U.x*X*k,p.positionPrev.y+=O*U.y*X*k),B=u.cross(m,F)/I*d._torqueDampen*p.inverseInertia*(1-f.angularStiffness),p.constraintImpulse.angle+=B,p.angle+=B)}}},d.postSolveAll=function(f){for(var a=0;a<f.length;a++){var c=f[a],p=c.constraintImpulse;if(!(c.isStatic||p.x===0&&p.y===0&&p.angle===0)){h.set(c,!1);for(var v=0;v<c.parts.length;v++){var m=c.parts[v];x.translate(m.vertices,p),v>0&&(m.position.x+=p.x,m.position.y+=p.y),p.angle!==0&&(x.rotate(m.vertices,p.angle,c.position),n.rotate(m.axes,p.angle),v>0&&u.rotateAbout(m.position,p.angle,c.position,m.position)),o.update(m.bounds,m.vertices,c.velocity)}p.angle*=d._warming,p.x*=d._warming,p.y*=d._warming}}},d.pointAWorld=function(f){return{x:(f.bodyA?f.bodyA.position.x:0)+(f.pointA?f.pointA.x:0),y:(f.bodyA?f.bodyA.position.y:0)+(f.pointA?f.pointA.y:0)}},d.pointBWorld=function(f){return{x:(f.bodyB?f.bodyB.position.x:0)+(f.pointB?f.pointB.x:0),y:(f.bodyB?f.bodyB.position.y:0)+(f.pointB?f.pointB.y:0)}},d.currentLength=function(f){var a=(f.bodyA?f.bodyA.position.x:0)+(f.pointA?f.pointA.x:0),c=(f.bodyA?f.bodyA.position.y:0)+(f.pointA?f.pointA.y:0),p=(f.bodyB?f.bodyB.position.x:0)+(f.pointB?f.pointB.x:0),v=(f.bodyB?f.bodyB.position.y:0)+(f.pointB?f.pointB.y:0),m=a-p,y=c-v;return Math.sqrt(m*m+y*y)}})()},68758:(l,T,e)=>{var d={};l.exports=d,function(){d._baseDelta=16.666666666666668,d._nextId=0,d._seed=0,d._nowStartTime=+new Date,d._warnedOnce={},d._decomp=null,d.extend=function(u,h){var o,n;typeof h=="boolean"?(o=2,n=h):(o=1,n=!0);for(var r=o;r<arguments.length;r++){var f=arguments[r];if(f)for(var a in f)n&&f[a]&&f[a].constructor===Object&&(!u[a]||u[a].constructor===Object)?(u[a]=u[a]||{},d.extend(u[a],n,f[a])):u[a]=f[a]}return u},d.clone=function(u,h){return d.extend({},h,u)},d.keys=function(u){if(Object.keys)return Object.keys(u);var h=[];for(var o in u)h.push(o);return h},d.values=function(u){var h=[];if(Object.keys){for(var o=Object.keys(u),n=0;n<o.length;n++)h.push(u[o[n]]);return h}for(var r in u)h.push(u[r]);return h},d.get=function(u,h,o,n){h=h.split(".").slice(o,n);for(var r=0;r<h.length;r+=1)u=u[h[r]];return u},d.set=function(u,h,o,n,r){var f=h.split(".").slice(n,r);return d.get(u,h,0,-1)[f[f.length-1]]=o,o},d.shuffle=function(u){for(var h=u.length-1;h>0;h--){var o=Math.floor(d.random()*(h+1)),n=u[h];u[h]=u[o],u[o]=n}return u},d.choose=function(u){return u[Math.floor(d.random()*u.length)]},d.isElement=function(u){return typeof HTMLElement<"u"?u instanceof HTMLElement:!!(u&&u.nodeType&&u.nodeName)},d.isArray=function(u){return Object.prototype.toString.call(u)==="[object Array]"},d.isFunction=function(u){return typeof u=="function"},d.isPlainObject=function(u){return typeof u=="object"&&u.constructor===Object},d.isString=function(u){return toString.call(u)==="[object String]"},d.clamp=function(u,h,o){return u<h?h:u>o?o:u},d.sign=function(u){return u<0?-1:1},d.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-d._nowStartTime},d.random=function(u,h){return u=typeof u<"u"?u:0,h=typeof h<"u"?h:1,u+x()*(h-u)};var x=function(){return d._seed=(d._seed*9301+49297)%233280,d._seed/233280};d.colorToNumber=function(u){return u=u.replace("#",""),u.length==3&&(u=u.charAt(0)+u.charAt(0)+u.charAt(1)+u.charAt(1)+u.charAt(2)+u.charAt(2)),parseInt(u,16)},d.logLevel=1,d.log=function(){console&&d.logLevel>0&&d.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.info=function(){console&&d.logLevel>0&&d.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.warn=function(){console&&d.logLevel>0&&d.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.warnOnce=function(){var u=Array.prototype.slice.call(arguments).join(" ");d._warnedOnce[u]||(d.warn(u),d._warnedOnce[u]=!0)},d.deprecated=function(u,h,o){u[h]=d.chain(function(){d.warnOnce("🔅 deprecated 🔅",o)},u[h])},d.nextId=function(){return d._nextId++},d.indexOf=function(u,h){if(u.indexOf)return u.indexOf(h);for(var o=0;o<u.length;o++)if(u[o]===h)return o;return-1},d.map=function(u,h){if(u.map)return u.map(h);for(var o=[],n=0;n<u.length;n+=1)o.push(h(u[n]));return o},d.topologicalSort=function(u){var h=[],o=[],n=[];for(var r in u)!o[r]&&!n[r]&&d._topologicalSort(r,o,n,u,h);return h},d._topologicalSort=function(u,h,o,n,r){var f=n[u]||[];o[u]=!0;for(var a=0;a<f.length;a+=1){var c=f[a];o[c]||h[c]||d._topologicalSort(c,h,o,n,r)}o[u]=!1,h[u]=!0,r.push(u)},d.chain=function(){for(var u=[],h=0;h<arguments.length;h+=1){var o=arguments[h];o._chained?u.push.apply(u,o._chained):u.push(o)}var n=function(){for(var r,f=new Array(arguments.length),a=0,c=arguments.length;a<c;a++)f[a]=arguments[a];for(a=0;a<u.length;a+=1){var p=u[a].apply(r,f);typeof p<"u"&&(r=p)}return r};return n._chained=u,n},d.chainPathBefore=function(u,h,o){return d.set(u,h,d.chain(o,d.get(u,h)))},d.chainPathAfter=function(u,h,o){return d.set(u,h,d.chain(d.get(u,h),o))},d.setDecomp=function(u){d._decomp=u},d.getDecomp=function(){var u=d._decomp;try{!u&&typeof window<"u"&&(u=window.decomp),!u&&typeof e.g<"u"&&(u=e.g.decomp)}catch{u=null}return u}}()},45775:(l,T,e)=>{var d={};l.exports=d;var x=e(22806),u=e(44272),h=e(13657),o=e(91327),n=e(39073),r=e(11299),f=e(52838),a=e(68758),c=e(84125);(function(){d.create=function(p){p=p||{};var v={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},m=a.extend(v,p);return m.world=p.world||r.create({label:"World"}),m.pairs=p.pairs||o.create(),m.detector=p.detector||h.create(),m.grid={buckets:[]},m.world.gravity=m.gravity,m.broadphase=m.grid,m.metrics={},m},d.update=function(p,v){var m=a.now(),y=p.world,P=p.detector,E=p.pairs,S=p.timing,w=S.timestamp,R;v=typeof v<"u"?v:a._baseDelta,v*=S.timeScale,S.timestamp+=v,S.lastDelta=v;var A={timestamp:S.timestamp,delta:v};n.trigger(p,"beforeUpdate",A);var O=r.allBodies(y),F=r.allConstraints(y);for(y.isModified&&(h.setBodies(P,O),r.setModified(y,!1,!1,!0)),p.enableSleeping&&x.update(O,v),d._bodiesApplyGravity(O,p.gravity),v>0&&d._bodiesUpdate(O,v),n.trigger(p,"beforeSolve",A),f.preSolveAll(O),R=0;R<p.constraintIterations;R++)f.solveAll(F,v);f.postSolveAll(O),P.pairs=p.pairs;var b=h.collisions(P);o.update(E,b,w),p.enableSleeping&&x.afterCollisions(E.list),E.collisionStart.length>0&&n.trigger(p,"collisionStart",{pairs:E.collisionStart,timestamp:S.timestamp,delta:v});var D=a.clamp(20/p.positionIterations,0,1);for(u.preSolvePosition(E.list),R=0;R<p.positionIterations;R++)u.solvePosition(E.list,v,D);for(u.postSolvePosition(O),f.preSolveAll(O),R=0;R<p.constraintIterations;R++)f.solveAll(F,v);for(f.postSolveAll(O),u.preSolveVelocity(E.list),R=0;R<p.velocityIterations;R++)u.solveVelocity(E.list,v);return d._bodiesUpdateVelocities(O),E.collisionActive.length>0&&n.trigger(p,"collisionActive",{pairs:E.collisionActive,timestamp:S.timestamp,delta:v}),E.collisionEnd.length>0&&n.trigger(p,"collisionEnd",{pairs:E.collisionEnd,timestamp:S.timestamp,delta:v}),d._bodiesClearForces(O),n.trigger(p,"afterUpdate",A),p.timing.lastElapsed=a.now()-m,p},d.merge=function(p,v){if(a.extend(p,v),v.world){p.world=v.world,d.clear(p);for(var m=r.allBodies(p.world),y=0;y<m.length;y++){var P=m[y];x.set(P,!1),P.id=a.nextId()}}},d.clear=function(p){o.clear(p.pairs),h.clear(p.detector)},d._bodiesClearForces=function(p){for(var v=p.length,m=0;m<v;m++){var y=p[m];y.force.x=0,y.force.y=0,y.torque=0}},d._bodiesApplyGravity=function(p,v){var m=typeof v.scale<"u"?v.scale:.001,y=p.length;if(!(v.x===0&&v.y===0||m===0))for(var P=0;P<y;P++){var E=p[P];E.isStatic||E.isSleeping||(E.force.y+=E.mass*v.y*m,E.force.x+=E.mass*v.x*m)}},d._bodiesUpdate=function(p,v){for(var m=p.length,y=0;y<m;y++){var P=p[y];P.isStatic||P.isSleeping||c.update(P,v)}},d._bodiesUpdateVelocities=function(p){for(var v=p.length,m=0;m<v;m++)c.updateVelocities(p[m])}})()},39073:(l,T,e)=>{var d={};l.exports=d;var x=e(68758);(function(){d.on=function(u,h,o){for(var n=h.split(" "),r,f=0;f<n.length;f++)r=n[f],u.events=u.events||{},u.events[r]=u.events[r]||[],u.events[r].push(o);return o},d.off=function(u,h,o){if(!h){u.events={};return}typeof h=="function"&&(o=h,h=x.keys(u.events).join(" "));for(var n=h.split(" "),r=0;r<n.length;r++){var f=u.events[n[r]],a=[];if(o&&f)for(var c=0;c<f.length;c++)f[c]!==o&&a.push(f[c]);u.events[n[r]]=a}},d.trigger=function(u,h,o){var n,r,f,a,c=u.events;if(c&&x.keys(c).length>0){o||(o={}),n=h.split(" ");for(var p=0;p<n.length;p++)if(r=n[p],f=c[r],f){a=x.clone(o,!1),a.name=r,a.source=u;for(var v=0;v<f.length;v++)f[v].apply(u,[a])}}}})()},16929:(l,T,e)=>{var d={};l.exports=d;var x=e(84474),u=e(68758);(function(){d.name="matter-js",d.version="0.19.0",d.uses=[],d.used=[],d.use=function(){x.use(d,Array.prototype.slice.call(arguments))},d.before=function(h,o){return h=h.replace(/^Matter./,""),u.chainPathBefore(d,h,o)},d.after=function(h,o){return h=h.replace(/^Matter./,""),u.chainPathAfter(d,h,o)}})()},84474:(l,T,e)=>{var d={};l.exports=d;var x=e(68758);(function(){d._registry={},d.register=function(u){if(d.isPlugin(u)||x.warn("Plugin.register:",d.toString(u),"does not implement all required fields."),u.name in d._registry){var h=d._registry[u.name],o=d.versionParse(u.version).number,n=d.versionParse(h.version).number;o>n?(x.warn("Plugin.register:",d.toString(h),"was upgraded to",d.toString(u)),d._registry[u.name]=u):o<n?x.warn("Plugin.register:",d.toString(h),"can not be downgraded to",d.toString(u)):u!==h&&x.warn("Plugin.register:",d.toString(u),"is already registered to different plugin object")}else d._registry[u.name]=u;return u},d.resolve=function(u){return d._registry[d.dependencyParse(u).name]},d.toString=function(u){return typeof u=="string"?u:(u.name||"anonymous")+"@"+(u.version||u.range||"0.0.0")},d.isPlugin=function(u){return u&&u.name&&u.version&&u.install},d.isUsed=function(u,h){return u.used.indexOf(h)>-1},d.isFor=function(u,h){var o=u.for&&d.dependencyParse(u.for);return!u.for||h.name===o.name&&d.versionSatisfies(h.version,o.range)},d.use=function(u,h){if(u.uses=(u.uses||[]).concat(h||[]),u.uses.length===0){x.warn("Plugin.use:",d.toString(u),"does not specify any dependencies to install.");return}for(var o=d.dependencies(u),n=x.topologicalSort(o),r=[],f=0;f<n.length;f+=1)if(n[f]!==u.name){var a=d.resolve(n[f]);if(!a){r.push("❌ "+n[f]);continue}d.isUsed(u,a.name)||(d.isFor(a,u)||(x.warn("Plugin.use:",d.toString(a),"is for",a.for,"but installed on",d.toString(u)+"."),a._warned=!0),a.install?a.install(u):(x.warn("Plugin.use:",d.toString(a),"does not specify an install function."),a._warned=!0),a._warned?(r.push("🔶 "+d.toString(a)),delete a._warned):r.push("✅ "+d.toString(a)),u.used.push(a.name))}r.length>0&&!a.silent&&x.info(r.join("  "))},d.dependencies=function(u,h){var o=d.dependencyParse(u),n=o.name;if(h=h||{},!(n in h)){u=d.resolve(u)||u,h[n]=x.map(u.uses||[],function(f){d.isPlugin(f)&&d.register(f);var a=d.dependencyParse(f),c=d.resolve(f);return c&&!d.versionSatisfies(c.version,a.range)?(x.warn("Plugin.dependencies:",d.toString(c),"does not satisfy",d.toString(a),"used by",d.toString(o)+"."),c._warned=!0,u._warned=!0):c||(x.warn("Plugin.dependencies:",d.toString(f),"used by",d.toString(o),"could not be resolved."),u._warned=!0),a.name});for(var r=0;r<h[n].length;r+=1)d.dependencies(h[n][r],h);return h}},d.dependencyParse=function(u){if(x.isString(u)){var h=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return h.test(u)||x.warn("Plugin.dependencyParse:",u,"is not a valid dependency string."),{name:u.split("@")[0],range:u.split("@")[1]||"*"}}return{name:u.name,range:u.range||u.version}},d.versionParse=function(u){var h=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;h.test(u)||x.warn("Plugin.versionParse:",u,"is not a valid version or range.");var o=h.exec(u),n=Number(o[4]),r=Number(o[5]),f=Number(o[6]);return{isRange:!!(o[1]||o[2]),version:o[3],range:u,operator:o[1]||o[2]||"",major:n,minor:r,patch:f,parts:[n,r,f],prerelease:o[7],number:n*1e8+r*1e4+f}},d.versionSatisfies=function(u,h){h=h||"*";var o=d.versionParse(h),n=d.versionParse(u);if(o.isRange){if(o.operator==="*"||u==="*")return!0;if(o.operator===">")return n.number>o.number;if(o.operator===">=")return n.number>=o.number;if(o.operator==="~")return n.major===o.major&&n.minor===o.minor&&n.patch>=o.patch;if(o.operator==="^")return o.major>0?n.major===o.major&&n.number>=o.number:o.minor>0?n.minor===o.minor&&n.patch>=o.patch:n.patch===o.patch}return u===h||u==="*"}})()},22806:(l,T,e)=>{var d={};l.exports=d;var x=e(84125),u=e(39073),h=e(68758);(function(){d._motionWakeThreshold=.18,d._motionSleepThreshold=.08,d._minBias=.9,d.update=function(o,n){for(var r=n/h._baseDelta,f=d._motionSleepThreshold,a=0;a<o.length;a++){var c=o[a],p=x.getSpeed(c),v=x.getAngularSpeed(c),m=p*p+v*v;if(c.force.x!==0||c.force.y!==0){d.set(c,!1);continue}var y=Math.min(c.motion,m),P=Math.max(c.motion,m);c.motion=d._minBias*y+(1-d._minBias)*P,c.sleepThreshold>0&&c.motion<f?(c.sleepCounter+=1,c.sleepCounter>=c.sleepThreshold/r&&d.set(c,!0)):c.sleepCounter>0&&(c.sleepCounter-=1)}},d.afterCollisions=function(o){for(var n=d._motionSleepThreshold,r=0;r<o.length;r++){var f=o[r];if(f.isActive){var a=f.collision,c=a.bodyA.parent,p=a.bodyB.parent;if(!(c.isSleeping&&p.isSleeping||c.isStatic||p.isStatic)&&(c.isSleeping||p.isSleeping)){var v=c.isSleeping&&!c.isStatic?c:p,m=v===c?p:c;!v.isStatic&&m.motion>n&&d.set(v,!1)}}}},d.set=function(o,n){var r=o.isSleeping;n?(o.isSleeping=!0,o.sleepCounter=o.sleepThreshold,o.positionImpulse.x=0,o.positionImpulse.y=0,o.positionPrev.x=o.position.x,o.positionPrev.y=o.position.y,o.anglePrev=o.angle,o.speed=0,o.angularSpeed=0,o.motion=0,r||u.trigger(o,"sleepStart")):(o.isSleeping=!1,o.sleepCounter=0,r&&u.trigger(o,"sleepEnd"))}})()},68516:(l,T,e)=>{var d={};l.exports=d;var x=e(39745),u=e(68758),h=e(84125),o=e(84091),n=e(10438);(function(){d.rectangle=function(r,f,a,c,p){p=p||{};var v={label:"Rectangle Body",position:{x:r,y:f},vertices:x.fromPath("L 0 0 L "+a+" 0 L "+a+" "+c+" L 0 "+c)};if(p.chamfer){var m=p.chamfer;v.vertices=x.chamfer(v.vertices,m.radius,m.quality,m.qualityMin,m.qualityMax),delete p.chamfer}return h.create(u.extend({},v,p))},d.trapezoid=function(r,f,a,c,p,v){v=v||{},p*=.5;var m=(1-p*2)*a,y=a*p,P=y+m,E=P+y,S;p<.5?S="L 0 0 L "+y+" "+-c+" L "+P+" "+-c+" L "+E+" 0":S="L 0 0 L "+P+" "+-c+" L "+E+" 0";var w={label:"Trapezoid Body",position:{x:r,y:f},vertices:x.fromPath(S)};if(v.chamfer){var R=v.chamfer;w.vertices=x.chamfer(w.vertices,R.radius,R.quality,R.qualityMin,R.qualityMax),delete v.chamfer}return h.create(u.extend({},w,v))},d.circle=function(r,f,a,c,p){c=c||{};var v={label:"Circle Body",circleRadius:a};p=p||25;var m=Math.ceil(Math.max(10,Math.min(p,a)));return m%2===1&&(m+=1),d.polygon(r,f,m,a,u.extend({},v,c))},d.polygon=function(r,f,a,c,p){if(p=p||{},a<3)return d.circle(r,f,c,p);for(var v=2*Math.PI/a,m="",y=v*.5,P=0;P<a;P+=1){var E=y+P*v,S=Math.cos(E)*c,w=Math.sin(E)*c;m+="L "+S.toFixed(3)+" "+w.toFixed(3)+" "}var R={label:"Polygon Body",position:{x:r,y:f},vertices:x.fromPath(m)};if(p.chamfer){var A=p.chamfer;R.vertices=x.chamfer(R.vertices,A.radius,A.quality,A.qualityMin,A.qualityMax),delete p.chamfer}return h.create(u.extend({},R,p))},d.fromVertices=function(r,f,a,c,p,v,m,y){var P=u.getDecomp(),E,S,w,R,A,O,F,b,D,I,B;for(E=!!(P&&P.quickDecomp),c=c||{},w=[],p=typeof p<"u"?p:!1,v=typeof v<"u"?v:.01,m=typeof m<"u"?m:10,y=typeof y<"u"?y:.01,u.isArray(a[0])||(a=[a]),I=0;I<a.length;I+=1)if(O=a[I],R=x.isConvex(O),A=!R,A&&!E&&u.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),R||!E)R?O=x.clockwiseSort(O):O=x.hull(O),w.push({position:{x:r,y:f},vertices:O});else{var k=O.map(function($){return[$.x,$.y]});P.makeCCW(k),v!==!1&&P.removeCollinearPoints(k,v),y!==!1&&P.removeDuplicatePoints&&P.removeDuplicatePoints(k,y);var U=P.quickDecomp(k);for(F=0;F<U.length;F++){var X=U[F],H=X.map(function($){return{x:$[0],y:$[1]}});m>0&&x.area(H)<m||w.push({position:x.centre(H),vertices:H})}}for(F=0;F<w.length;F++)w[F]=h.create(u.extend(w[F],c));if(p){var N=5;for(F=0;F<w.length;F++){var z=w[F];for(b=F+1;b<w.length;b++){var L=w[b];if(o.overlaps(z.bounds,L.bounds)){var G=z.vertices,V=L.vertices;for(D=0;D<z.vertices.length;D++)for(B=0;B<L.vertices.length;B++){var Y=n.magnitudeSquared(n.sub(G[(D+1)%G.length],V[B])),W=n.magnitudeSquared(n.sub(G[D],V[(B+1)%V.length]));Y<N&&W<N&&(G[D].isInternal=!0,V[B].isInternal=!0)}}}}}return w.length>1?(S=h.create(u.extend({parts:w.slice(0)},c)),h.setPosition(S,{x:r,y:f}),S):w[0]},d.flagCoincidentParts=function(r,f){f===void 0&&(f=5);for(var a=0;a<r.length;a++)for(var c=r[a],p=a+1;p<r.length;p++){var v=r[p];if(o.overlaps(c.bounds,v.bounds))for(var m=c.vertices,y=v.vertices,P=0;P<c.vertices.length;P++)for(var E=0;E<v.vertices.length;E++){var S=n.magnitudeSquared(n.sub(m[(P+1)%m.length],y[E])),w=n.magnitudeSquared(n.sub(m[P],y[(E+1)%y.length]));S<f&&w<f&&(m[P].isInternal=!0,y[E].isInternal=!0)}}return r}})()},56643:(l,T,e)=>{var d={};l.exports=d;var x=e(11299),u=e(52838),h=e(68758),o=e(84125),n=e(68516);(function(){d.stack=function(r,f,a,c,p,v,m){for(var y=x.create({label:"Stack"}),P=r,E=f,S,w=0,R=0;R<c;R++){for(var A=0,O=0;O<a;O++){var F=m(P,E,O,R,S,w);if(F){var b=F.bounds.max.y-F.bounds.min.y,D=F.bounds.max.x-F.bounds.min.x;b>A&&(A=b),o.translate(F,{x:D*.5,y:b*.5}),P=F.bounds.max.x+p,x.addBody(y,F),S=F,w+=1}else P+=p}E+=A+v,P=r}return y},d.chain=function(r,f,a,c,p,v){for(var m=r.bodies,y=1;y<m.length;y++){var P=m[y-1],E=m[y],S=P.bounds.max.y-P.bounds.min.y,w=P.bounds.max.x-P.bounds.min.x,R=E.bounds.max.y-E.bounds.min.y,A=E.bounds.max.x-E.bounds.min.x,O={bodyA:P,pointA:{x:w*f,y:S*a},bodyB:E,pointB:{x:A*c,y:R*p}},F=h.extend(O,v);x.addConstraint(r,u.create(F))}return r.label+=" Chain",r},d.mesh=function(r,f,a,c,p){var v=r.bodies,m,y,P,E,S;for(m=0;m<a;m++){for(y=1;y<f;y++)P=v[y-1+m*f],E=v[y+m*f],x.addConstraint(r,u.create(h.extend({bodyA:P,bodyB:E},p)));if(m>0)for(y=0;y<f;y++)P=v[y+(m-1)*f],E=v[y+m*f],x.addConstraint(r,u.create(h.extend({bodyA:P,bodyB:E},p))),c&&y>0&&(S=v[y-1+(m-1)*f],x.addConstraint(r,u.create(h.extend({bodyA:S,bodyB:E},p)))),c&&y<f-1&&(S=v[y+1+(m-1)*f],x.addConstraint(r,u.create(h.extend({bodyA:S,bodyB:E},p))))}return r.label+=" Mesh",r},d.pyramid=function(r,f,a,c,p,v,m){return d.stack(r,f,a,c,p,v,function(y,P,E,S,w,R){var A=Math.min(c,Math.ceil(a/2)),O=w?w.bounds.max.x-w.bounds.min.x:0;if(!(S>A)){S=A-S;var F=S,b=a-1-S;if(!(E<F||E>b)){R===1&&o.translate(w,{x:(E+(a%2===1?1:-1))*O,y:0});var D=w?E*O:0;return m(r+D+E*p,P,E,S,w,R)}}})},d.newtonsCradle=function(r,f,a,c,p){for(var v=x.create({label:"Newtons Cradle"}),m=0;m<a;m++){var y=1.9,P=n.circle(r+m*(c*y),f+p,c,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),E=u.create({pointA:{x:r+m*(c*y),y:f},bodyB:P});x.addBody(v,P),x.addConstraint(v,E)}return v},d.car=function(r,f,a,c,p){var v=o.nextGroup(!0),m=20,y=-a*.5+m,P=a*.5-m,E=0,S=x.create({label:"Car"}),w=n.rectangle(r,f,a,c,{collisionFilter:{group:v},chamfer:{radius:c*.5},density:2e-4}),R=n.circle(r+y,f+E,p,{collisionFilter:{group:v},friction:.8}),A=n.circle(r+P,f+E,p,{collisionFilter:{group:v},friction:.8}),O=u.create({bodyB:w,pointB:{x:y,y:E},bodyA:R,stiffness:1,length:0}),F=u.create({bodyB:w,pointB:{x:P,y:E},bodyA:A,stiffness:1,length:0});return x.addBody(S,w),x.addBody(S,R),x.addBody(S,A),x.addConstraint(S,O),x.addConstraint(S,F),S},d.softBody=function(r,f,a,c,p,v,m,y,P,E){P=h.extend({inertia:1/0},P),E=h.extend({stiffness:.2,render:{type:"line",anchors:!1}},E);var S=d.stack(r,f,a,c,p,v,function(w,R){return n.circle(w,R,y,P)});return d.mesh(S,a,c,m,E),S.label="Soft Body",S}})()},50658:(l,T,e)=>{var d={};l.exports=d;var x=e(10438),u=e(68758);(function(){d.fromVertices=function(h){for(var o={},n=0;n<h.length;n++){var r=(n+1)%h.length,f=x.normalise({x:h[r].y-h[n].y,y:h[n].x-h[r].x}),a=f.y===0?1/0:f.x/f.y;a=a.toFixed(3).toString(),o[a]=f}return u.values(o)},d.rotate=function(h,o){if(o!==0)for(var n=Math.cos(o),r=Math.sin(o),f=0;f<h.length;f++){var a=h[f],c;c=a.x*n-a.y*r,a.y=a.x*r+a.y*n,a.x=c}}})()},84091:l=>{var T={};l.exports=T,function(){T.create=function(e){var d={min:{x:0,y:0},max:{x:0,y:0}};return e&&T.update(d,e),d},T.update=function(e,d,x){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var u=0;u<d.length;u++){var h=d[u];h.x>e.max.x&&(e.max.x=h.x),h.x<e.min.x&&(e.min.x=h.x),h.y>e.max.y&&(e.max.y=h.y),h.y<e.min.y&&(e.min.y=h.y)}x&&(x.x>0?e.max.x+=x.x:e.min.x+=x.x,x.y>0?e.max.y+=x.y:e.min.y+=x.y)},T.contains=function(e,d){return d.x>=e.min.x&&d.x<=e.max.x&&d.y>=e.min.y&&d.y<=e.max.y},T.overlaps=function(e,d){return e.min.x<=d.max.x&&e.max.x>=d.min.x&&e.max.y>=d.min.y&&e.min.y<=d.max.y},T.translate=function(e,d){e.min.x+=d.x,e.max.x+=d.x,e.min.y+=d.y,e.max.y+=d.y},T.shift=function(e,d){var x=e.max.x-e.min.x,u=e.max.y-e.min.y;e.min.x=d.x,e.max.x=d.x+x,e.min.y=d.y,e.max.y=d.y+u}}()},92765:(l,T,e)=>{var d={};l.exports=d,e(84091);var x=e(68758);(function(){d.pathToVertices=function(u,h){typeof window<"u"&&!("SVGPathSeg"in window)&&x.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var o,n,r,f,a,c,p,v,m,y,P=[],E,S,w=0,R=0,A=0;h=h||15;var O=function(b,D,I){var B=I%2===1&&I>1;if(!m||b!=m.x||D!=m.y){m&&B?(E=m.x,S=m.y):(E=0,S=0);var k={x:E+b,y:S+D};(B||!m)&&(m=k),P.push(k),R=E+b,A=S+D}},F=function(b){var D=b.pathSegTypeAsLetter.toUpperCase();if(D!=="Z"){switch(D){case"M":case"L":case"T":case"C":case"S":case"Q":R=b.x,A=b.y;break;case"H":R=b.x;break;case"V":A=b.y;break}O(R,A,b.pathSegType)}};for(d._svgPathToAbsolute(u),r=u.getTotalLength(),c=[],o=0;o<u.pathSegList.numberOfItems;o+=1)c.push(u.pathSegList.getItem(o));for(p=c.concat();w<r;){if(y=u.getPathSegAtLength(w),a=c[y],a!=v){for(;p.length&&p[0]!=a;)F(p.shift());v=a}switch(a.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":f=u.getPointAtLength(w),O(f.x,f.y,0);break}w+=h}for(o=0,n=p.length;o<n;++o)F(p[o]);return P},d._svgPathToAbsolute=function(u){for(var h,o,n,r,f,a,c=u.pathSegList,p=0,v=0,m=c.numberOfItems,y=0;y<m;++y){var P=c.getItem(y),E=P.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(E))"x"in P&&(p=P.x),"y"in P&&(v=P.y);else switch("x1"in P&&(n=p+P.x1),"x2"in P&&(f=p+P.x2),"y1"in P&&(r=v+P.y1),"y2"in P&&(a=v+P.y2),"x"in P&&(p+=P.x),"y"in P&&(v+=P.y),E){case"m":c.replaceItem(u.createSVGPathSegMovetoAbs(p,v),y);break;case"l":c.replaceItem(u.createSVGPathSegLinetoAbs(p,v),y);break;case"h":c.replaceItem(u.createSVGPathSegLinetoHorizontalAbs(p),y);break;case"v":c.replaceItem(u.createSVGPathSegLinetoVerticalAbs(v),y);break;case"c":c.replaceItem(u.createSVGPathSegCurvetoCubicAbs(p,v,n,r,f,a),y);break;case"s":c.replaceItem(u.createSVGPathSegCurvetoCubicSmoothAbs(p,v,f,a),y);break;case"q":c.replaceItem(u.createSVGPathSegCurvetoQuadraticAbs(p,v,n,r),y);break;case"t":c.replaceItem(u.createSVGPathSegCurvetoQuadraticSmoothAbs(p,v),y);break;case"a":c.replaceItem(u.createSVGPathSegArcAbs(p,v,P.r1,P.r2,P.angle,P.largeArcFlag,P.sweepFlag),y);break;case"z":case"Z":p=h,v=o;break}(E=="M"||E=="m")&&(h=p,o=v)}}})()},10438:l=>{var T={};l.exports=T,function(){T.create=function(e,d){return{x:e||0,y:d||0}},T.clone=function(e){return{x:e.x,y:e.y}},T.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},T.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},T.rotate=function(e,d,x){var u=Math.cos(d),h=Math.sin(d);x||(x={});var o=e.x*u-e.y*h;return x.y=e.x*h+e.y*u,x.x=o,x},T.rotateAbout=function(e,d,x,u){var h=Math.cos(d),o=Math.sin(d);u||(u={});var n=x.x+((e.x-x.x)*h-(e.y-x.y)*o);return u.y=x.y+((e.x-x.x)*o+(e.y-x.y)*h),u.x=n,u},T.normalise=function(e){var d=T.magnitude(e);return d===0?{x:0,y:0}:{x:e.x/d,y:e.y/d}},T.dot=function(e,d){return e.x*d.x+e.y*d.y},T.cross=function(e,d){return e.x*d.y-e.y*d.x},T.cross3=function(e,d,x){return(d.x-e.x)*(x.y-e.y)-(d.y-e.y)*(x.x-e.x)},T.add=function(e,d,x){return x||(x={}),x.x=e.x+d.x,x.y=e.y+d.y,x},T.sub=function(e,d,x){return x||(x={}),x.x=e.x-d.x,x.y=e.y-d.y,x},T.mult=function(e,d){return{x:e.x*d,y:e.y*d}},T.div=function(e,d){return{x:e.x/d,y:e.y/d}},T.perp=function(e,d){return d=d===!0?-1:1,{x:d*-e.y,y:d*e.x}},T.neg=function(e){return{x:-e.x,y:-e.y}},T.angle=function(e,d){return Math.atan2(d.y-e.y,d.x-e.x)},T._temp=[T.create(),T.create(),T.create(),T.create(),T.create(),T.create()]}()},39745:(l,T,e)=>{var d={};l.exports=d;var x=e(10438),u=e(68758);(function(){d.create=function(h,o){for(var n=[],r=0;r<h.length;r++){var f=h[r],a={x:f.x,y:f.y,index:r,body:o,isInternal:!1};n.push(a)}return n},d.fromPath=function(h,o){var n=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,r=[];return h.replace(n,function(f,a,c){r.push({x:parseFloat(a),y:parseFloat(c)})}),d.create(r,o)},d.centre=function(h){for(var o=d.area(h,!0),n={x:0,y:0},r,f,a,c=0;c<h.length;c++)a=(c+1)%h.length,r=x.cross(h[c],h[a]),f=x.mult(x.add(h[c],h[a]),r),n=x.add(n,f);return x.div(n,6*o)},d.mean=function(h){for(var o={x:0,y:0},n=0;n<h.length;n++)o.x+=h[n].x,o.y+=h[n].y;return x.div(o,h.length)},d.area=function(h,o){for(var n=0,r=h.length-1,f=0;f<h.length;f++)n+=(h[r].x-h[f].x)*(h[r].y+h[f].y),r=f;return o?n/2:Math.abs(n)/2},d.inertia=function(h,o){for(var n=0,r=0,f=h,a,c,p=0;p<f.length;p++)c=(p+1)%f.length,a=Math.abs(x.cross(f[c],f[p])),n+=a*(x.dot(f[c],f[c])+x.dot(f[c],f[p])+x.dot(f[p],f[p])),r+=a;return o/6*(n/r)},d.translate=function(h,o,n){n=typeof n<"u"?n:1;var r=h.length,f=o.x*n,a=o.y*n,c;for(c=0;c<r;c++)h[c].x+=f,h[c].y+=a;return h},d.rotate=function(h,o,n){if(o!==0){var r=Math.cos(o),f=Math.sin(o),a=n.x,c=n.y,p=h.length,v,m,y,P;for(P=0;P<p;P++)v=h[P],m=v.x-a,y=v.y-c,v.x=a+(m*r-y*f),v.y=c+(m*f+y*r);return h}},d.contains=function(h,o){for(var n=o.x,r=o.y,f=h.length,a=h[f-1],c,p=0;p<f;p++){if(c=h[p],(n-a.x)*(c.y-a.y)+(r-a.y)*(a.x-c.x)>0)return!1;a=c}return!0},d.scale=function(h,o,n,r){if(o===1&&n===1)return h;r=r||d.centre(h);for(var f,a,c=0;c<h.length;c++)f=h[c],a=x.sub(f,r),h[c].x=r.x+a.x*o,h[c].y=r.y+a.y*n;return h},d.chamfer=function(h,o,n,r,f){typeof o=="number"?o=[o]:o=o||[8],n=typeof n<"u"?n:-1,r=r||2,f=f||14;for(var a=[],c=0;c<h.length;c++){var p=h[c-1>=0?c-1:h.length-1],v=h[c],m=h[(c+1)%h.length],y=o[c<o.length?c:o.length-1];if(y===0){a.push(v);continue}var P=x.normalise({x:v.y-p.y,y:p.x-v.x}),E=x.normalise({x:m.y-v.y,y:v.x-m.x}),S=Math.sqrt(2*Math.pow(y,2)),w=x.mult(u.clone(P),y),R=x.normalise(x.mult(x.add(P,E),.5)),A=x.sub(v,x.mult(R,S)),O=n;n===-1&&(O=Math.pow(y,.32)*1.75),O=u.clamp(O,r,f),O%2===1&&(O+=1);for(var F=Math.acos(x.dot(P,E)),b=F/O,D=0;D<O;D++)a.push(x.add(x.rotate(w,b*D),A))}return a},d.clockwiseSort=function(h){var o=d.mean(h);return h.sort(function(n,r){return x.angle(o,n)-x.angle(o,r)}),h},d.isConvex=function(h){var o=0,n=h.length,r,f,a,c;if(n<3)return null;for(r=0;r<n;r++)if(f=(r+1)%n,a=(r+2)%n,c=(h[f].x-h[r].x)*(h[a].y-h[f].y),c-=(h[f].y-h[r].y)*(h[a].x-h[f].x),c<0?o|=1:c>0&&(o|=2),o===3)return!1;return o!==0?!0:null},d.hull=function(h){var o=[],n=[],r,f;for(h=h.slice(0),h.sort(function(a,c){var p=a.x-c.x;return p!==0?p:a.y-c.y}),f=0;f<h.length;f+=1){for(r=h[f];n.length>=2&&x.cross3(n[n.length-2],n[n.length-1],r)<=0;)n.pop();n.push(r)}for(f=h.length-1;f>=0;f-=1){for(r=h[f];o.length>=2&&x.cross3(o[o.length-2],o[o.length-1],r)<=0;)o.pop();o.push(r)}return o.pop(),n.pop(),o.concat(n)}})()},1675:(l,T,e)=>{var d=e(18171),x={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.19.0",silent:!0,install:function(u){u.after("Body.create",function(){x.Body.init(this)}),u.before("Engine.update",function(h){x.Engine.update(h)})},Body:{init:function(u){u.plugin.attractors=u.plugin.attractors||[]}},Engine:{update:function(u){for(var h=d.Composite.allBodies(u.world),o=0;o<h.length;o++){var n=h[o],r=n.plugin.attractors;if(r&&r.length>0)for(var f=0;f<h.length;f++){var a=h[f];if(o!==f)for(var c=0;c<r.length;c++){var p=r[c],v=p;d.Common.isFunction(p)&&(v=p(n,a)),v&&d.Body.applyForce(a,a.position,v)}}}}},Attractors:{gravityConstant:.001,gravity:function(u,h){var o=d.Vector.sub(h.position,u.position),n=d.Vector.magnitudeSquared(o)||1e-4,r=d.Vector.normalise(o),f=-x.Attractors.gravityConstant*(u.mass*h.mass/n),a=d.Vector.mult(r,f);d.Body.applyForce(u,u.position,d.Vector.neg(a)),d.Body.applyForce(h,h.position,a)}}};l.exports=x},80391:l=>{/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@photonstorm.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.19.0",silent:!0,install:function(e){e.after("Engine.create",function(){e.Events.on(this,"collisionStart",function(d){d.pairs.map(function(x){var u=x.bodyA,h=x.bodyB;u.gameObject&&u.gameObject.emit("collide",u,h,x),h.gameObject&&h.gameObject.emit("collide",h,u,x),e.Events.trigger(u,"onCollide",{pair:x}),e.Events.trigger(h,"onCollide",{pair:x}),u.onCollideCallback&&u.onCollideCallback(x),h.onCollideCallback&&h.onCollideCallback(x),u.onCollideWith[h.id]&&u.onCollideWith[h.id](h,x),h.onCollideWith[u.id]&&h.onCollideWith[u.id](u,x)})}),e.Events.on(this,"collisionActive",function(d){d.pairs.map(function(x){var u=x.bodyA,h=x.bodyB;u.gameObject&&u.gameObject.emit("collideActive",u,h,x),h.gameObject&&h.gameObject.emit("collideActive",h,u,x),e.Events.trigger(u,"onCollideActive",{pair:x}),e.Events.trigger(h,"onCollideActive",{pair:x}),u.onCollideActiveCallback&&u.onCollideActiveCallback(x),h.onCollideActiveCallback&&h.onCollideActiveCallback(x)})}),e.Events.on(this,"collisionEnd",function(d){d.pairs.map(function(x){var u=x.bodyA,h=x.bodyB;u.gameObject&&u.gameObject.emit("collideEnd",u,h,x),h.gameObject&&h.gameObject.emit("collideEnd",h,u,x),e.Events.trigger(u,"onCollideEnd",{pair:x}),e.Events.trigger(h,"onCollideEnd",{pair:x}),u.onCollideEndCallback&&u.onCollideEndCallback(x),h.onCollideEndCallback&&h.onCollideEndCallback(x)})})})}};l.exports=T},44097:(l,T,e)=>{var d=e(18171),x={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.19.0",silent:!0,install:function(u){u.after("Engine.update",function(){x.Engine.update(this)})},Engine:{update:function(u){for(var h=u.world,o=d.Composite.allBodies(h),n=d.Composite.allComposites(h),r=0;r<o.length;r+=1){var f=o[r];f.plugin.wrap&&x.Body.wrap(f,f.plugin.wrap)}for(r=0;r<n.length;r+=1){var a=n[r];a.plugin.wrap&&x.Composite.wrap(a,a.plugin.wrap)}}},Bounds:{wrap:function(u,h){var o=null,n=null;if(typeof h.min.x<"u"&&typeof h.max.x<"u"&&(u.min.x>h.max.x?o=h.min.x-u.max.x:u.max.x<h.min.x&&(o=h.max.x-u.min.x)),typeof h.min.y<"u"&&typeof h.max.y<"u"&&(u.min.y>h.max.y?n=h.min.y-u.max.y:u.max.y<h.min.y&&(n=h.max.y-u.min.y)),o!==null||n!==null)return{x:o||0,y:n||0}}},Body:{wrap:function(u,h){var o=x.Bounds.wrap(u.bounds,h);return o&&d.Body.translate(u,o),o}},Composite:{bounds:function(u){for(var h=d.Composite.allBodies(u),o=[],n=0;n<h.length;n+=1){var r=h[n];o.push(r.bounds.min,r.bounds.max)}return d.Bounds.create(o)},wrap:function(u,h){var o=x.Bounds.wrap(x.Composite.bounds(u),h);return o&&d.Composite.translate(u,o),o}}};l.exports=x},81084:l=>{/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={decomp:F,quickDecomp:B,isSimple:D,removeCollinearPoints:k,removeDuplicatePoints:U,makeCCW:m};function T(N,z,L){L=L||0;var G=[0,0],V,Y,W,$,K,j,J;return V=N[1][1]-N[0][1],Y=N[0][0]-N[1][0],W=V*N[0][0]+Y*N[0][1],$=z[1][1]-z[0][1],K=z[0][0]-z[1][0],j=$*z[0][0]+K*z[0][1],J=V*K-$*Y,X(J,0,L)||(G[0]=(K*W-Y*j)/J,G[1]=(V*j-$*W)/J),G}function e(N,z,L,G){var V=z[0]-N[0],Y=z[1]-N[1],W=G[0]-L[0],$=G[1]-L[1];if(W*Y-$*V===0)return!1;var K=(V*(L[1]-N[1])+Y*(N[0]-L[0]))/(W*Y-$*V),j=(W*(N[1]-L[1])+$*(L[0]-N[0]))/($*V-W*Y);return K>=0&&K<=1&&j>=0&&j<=1}function d(N,z,L){return(z[0]-N[0])*(L[1]-N[1])-(L[0]-N[0])*(z[1]-N[1])}function x(N,z,L){return d(N,z,L)>0}function u(N,z,L){return d(N,z,L)>=0}function h(N,z,L){return d(N,z,L)<0}function o(N,z,L){return d(N,z,L)<=0}var n=[],r=[];function f(N,z,L,G){if(G){var V=n,Y=r;V[0]=z[0]-N[0],V[1]=z[1]-N[1],Y[0]=L[0]-z[0],Y[1]=L[1]-z[1];var W=V[0]*Y[0]+V[1]*Y[1],$=Math.sqrt(V[0]*V[0]+V[1]*V[1]),K=Math.sqrt(Y[0]*Y[0]+Y[1]*Y[1]),j=Math.acos(W/($*K));return j<G}else return d(N,z,L)===0}function a(N,z){var L=z[0]-N[0],G=z[1]-N[1];return L*L+G*G}function c(N,z){var L=N.length;return N[z<0?z%L+L:z%L]}function p(N){N.length=0}function v(N,z,L,G){for(var V=L;V<G;V++)N.push(z[V])}function m(N){for(var z=0,L=N,G=1;G<N.length;++G)(L[G][1]<L[z][1]||L[G][1]===L[z][1]&&L[G][0]>L[z][0])&&(z=G);return x(c(N,z-1),c(N,z),c(N,z+1))?!1:(y(N),!0)}function y(N){for(var z=[],L=N.length,G=0;G!==L;G++)z.push(N.pop());for(var G=0;G!==L;G++)N[G]=z[G]}function P(N,z){return h(c(N,z-1),c(N,z),c(N,z+1))}var E=[],S=[];function w(N,z,L){var G,V,Y=E,W=S;if(u(c(N,z+1),c(N,z),c(N,L))&&o(c(N,z-1),c(N,z),c(N,L)))return!1;V=a(c(N,z),c(N,L));for(var $=0;$!==N.length;++$)if(!(($+1)%N.length===z||$===z)&&u(c(N,z),c(N,L),c(N,$+1))&&o(c(N,z),c(N,L),c(N,$))&&(Y[0]=c(N,z),Y[1]=c(N,L),W[0]=c(N,$),W[1]=c(N,$+1),G=T(Y,W),a(c(N,z),G)<V))return!1;return!0}function R(N,z,L){for(var G=0;G!==N.length;++G)if(!(G===z||G===L||(G+1)%N.length===z||(G+1)%N.length===L)&&e(c(N,z),c(N,L),c(N,G),c(N,G+1)))return!1;return!0}function A(N,z,L,G){var V=G||[];if(p(V),z<L)for(var Y=z;Y<=L;Y++)V.push(N[Y]);else{for(var Y=0;Y<=L;Y++)V.push(N[Y]);for(var Y=z;Y<N.length;Y++)V.push(N[Y])}return V}function O(N){for(var z=[],L=[],G=[],V=[],Y=Number.MAX_VALUE,W=0;W<N.length;++W)if(P(N,W)){for(var $=0;$<N.length;++$)if(w(N,W,$)){L=O(A(N,W,$,V)),G=O(A(N,$,W,V));for(var K=0;K<G.length;K++)L.push(G[K]);L.length<Y&&(z=L,Y=L.length,z.push([c(N,W),c(N,$)]))}}return z}function F(N){var z=O(N);return z.length>0?b(N,z):[N]}function b(N,z){if(z.length===0)return[N];if(z instanceof Array&&z.length&&z[0]instanceof Array&&z[0].length===2&&z[0][0]instanceof Array){for(var L=[N],G=0;G<z.length;G++)for(var V=z[G],Y=0;Y<L.length;Y++){var W=L[Y],$=b(W,V);if($){L.splice(Y,1),L.push($[0],$[1]);break}}return L}else{var V=z,G=N.indexOf(V[0]),Y=N.indexOf(V[1]);return G!==-1&&Y!==-1?[A(N,G,Y),A(N,Y,G)]:!1}}function D(N){var z=N,L;for(L=0;L<z.length-1;L++)for(var G=0;G<L-1;G++)if(e(z[L],z[L+1],z[G],z[G+1]))return!1;for(L=1;L<z.length-2;L++)if(e(z[0],z[z.length-1],z[L],z[L+1]))return!1;return!0}function I(N,z,L,G,V){V=V||0;var Y=z[1]-N[1],W=N[0]-z[0],$=Y*N[0]+W*N[1],K=G[1]-L[1],j=L[0]-G[0],J=K*L[0]+j*L[1],q=Y*j-K*W;return X(q,0,V)?[0,0]:[(j*$-W*J)/q,(Y*J-K*$)/q]}function B(N,z,L,G,V,Y,W){Y=Y||100,W=W||0,V=V||25,z=typeof z<"u"?z:[],L=L||[],G=G||[];var $=[0,0],K=[0,0],j=[0,0],J=0,q=0,_=0,et=0,tt=0,rt=0,ft=0,vt=[],ct=[],st=N,dt=N;if(dt.length<3)return z;if(W++,W>Y)return console.warn("quickDecomp: max level ("+Y+") reached."),z;for(var ut=0;ut<N.length;++ut)if(P(st,ut)){L.push(st[ut]),J=q=Number.MAX_VALUE;for(var Ct=0;Ct<N.length;++Ct)x(c(st,ut-1),c(st,ut),c(st,Ct))&&o(c(st,ut-1),c(st,ut),c(st,Ct-1))&&(j=I(c(st,ut-1),c(st,ut),c(st,Ct),c(st,Ct-1)),h(c(st,ut+1),c(st,ut),j)&&(_=a(st[ut],j),_<q&&(q=_,K=j,rt=Ct))),x(c(st,ut+1),c(st,ut),c(st,Ct+1))&&o(c(st,ut+1),c(st,ut),c(st,Ct))&&(j=I(c(st,ut+1),c(st,ut),c(st,Ct),c(st,Ct+1)),x(c(st,ut-1),c(st,ut),j)&&(_=a(st[ut],j),_<J&&(J=_,$=j,tt=Ct)));if(rt===(tt+1)%N.length)j[0]=(K[0]+$[0])/2,j[1]=(K[1]+$[1])/2,G.push(j),ut<tt?(v(vt,st,ut,tt+1),vt.push(j),ct.push(j),rt!==0&&v(ct,st,rt,st.length),v(ct,st,0,ut+1)):(ut!==0&&v(vt,st,ut,st.length),v(vt,st,0,tt+1),vt.push(j),ct.push(j),v(ct,st,rt,ut+1));else{if(rt>tt&&(tt+=N.length),et=Number.MAX_VALUE,tt<rt)return z;for(var Ct=rt;Ct<=tt;++Ct)u(c(st,ut-1),c(st,ut),c(st,Ct))&&o(c(st,ut+1),c(st,ut),c(st,Ct))&&(_=a(c(st,ut),c(st,Ct)),_<et&&R(st,ut,Ct)&&(et=_,ft=Ct%N.length));ut<ft?(v(vt,st,ut,ft+1),ft!==0&&v(ct,st,ft,dt.length),v(ct,st,0,ut+1)):(ut!==0&&v(vt,st,ut,dt.length),v(vt,st,0,ft+1),v(ct,st,ft,ut+1))}return vt.length<ct.length?(B(vt,z,L,G,V,Y,W),B(ct,z,L,G,V,Y,W)):(B(ct,z,L,G,V,Y,W),B(vt,z,L,G,V,Y,W)),z}return z.push(N),z}function k(N,z){for(var L=0,G=N.length-1;N.length>3&&G>=0;--G)f(c(N,G-1),c(N,G),c(N,G+1),z)&&(N.splice(G%N.length,1),L++);return L}function U(N,z){for(var L=N.length-1;L>=1;--L)for(var G=N[L],V=L-1;V>=0;--V)if(H(G,N[V],z)){N.splice(L,1);continue}}function X(N,z,L){return L=L||0,Math.abs(N-z)<=L}function H(N,z,L){return X(N[0],z[0],L)&&X(N[1],z[1],L)}},88257:(l,T,e)=>{/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2013-2023 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var d=e(56694),x=new d({initialize:function(h){this.pluginManager=h,this.game=h.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});l.exports=x},18360:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};l.exports=T},91963:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={},e={},d={};d.register=function(x,u,h,o){o===void 0&&(o=!1),T[x]={plugin:u,mapping:h,custom:o}},d.registerCustom=function(x,u,h,o){e[x]={plugin:u,mapping:h,data:o}},d.hasCore=function(x){return T.hasOwnProperty(x)},d.hasCustom=function(x){return e.hasOwnProperty(x)},d.getCore=function(x){return T[x]},d.getCustom=function(x){return e[x]},d.getCustomClass=function(x){return e.hasOwnProperty(x)?e[x].plugin:null},d.remove=function(x){T.hasOwnProperty(x)&&delete T[x]},d.removeCustom=function(x){e.hasOwnProperty(x)&&delete e[x]},d.destroyCorePlugins=function(){for(var x in T)T.hasOwnProperty(x)&&delete T[x]},d.destroyCustomPlugins=function(){for(var x in e)e.hasOwnProperty(x)&&delete e[x]},l.exports=d},49274:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(97081),u=e(6659),h=e(76846),o=e(99325),n=e(61286),r=e(72632),f=e(91963),a=e(66458),c=new d({Extends:u,initialize:function(v){u.call(this),this.game=v,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],v.isBooted?this.boot():v.events.once(x.BOOT,this.boot,this)},boot:function(){var p,v,m,y,P,E,S,w=this.game.config,R=w.installGlobalPlugins;for(R=R.concat(this._pendingGlobal),p=0;p<R.length;p++)v=R[p],m=r(v,"key",null),y=r(v,"plugin",null),P=r(v,"start",!1),E=r(v,"mapping",null),S=r(v,"data",null),m&&(y?this.install(m,y,P,E,S):console.warn("Missing `plugin` for key: "+m));for(R=w.installScenePlugins,R=R.concat(this._pendingScene),p=0;p<R.length;p++)v=R[p],m=r(v,"key",null),y=r(v,"plugin",null),E=r(v,"mapping",null),m&&(y?this.installScenePlugin(m,y,E):console.warn("Missing `plugin` for key: "+m));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(x.DESTROY,this.destroy,this)},addToScene:function(p,v,m){var y,P,E,S=this.game,w=p.scene,R=p.settings.map,A=p.settings.isBooted;for(y=0;y<v.length;y++)P=v[y],S[P]?(p[P]=S[P],R.hasOwnProperty(P)&&(w[R[P]]=p[P])):P==="game"&&R.hasOwnProperty(P)&&(w[R[P]]=S);for(var O=0;O<m.length;O++)for(E=m[O],y=0;y<E.length;y++)if(P=E[y],!!f.hasCore(P)){var F=f.getCore(P),b=F.mapping,D=new F.plugin(w,this,b);p[b]=D,F.custom?w[b]=D:R.hasOwnProperty(b)&&(w[R[b]]=D),A&&D.boot()}for(E=this.plugins,y=0;y<E.length;y++){var I=E[y];I.mapping&&(w[I.mapping]=I.plugin)}},getDefaultScenePlugins:function(){var p=this.game.config.defaultPlugins;return p=p.concat(this.scenePlugins),p},installScenePlugin:function(p,v,m,y,P){if(P===void 0&&(P=!1),typeof v!="function"){console.warn("Invalid Scene Plugin: "+p);return}if(f.hasCore(p)||f.register(p,v,m,!0),this.scenePlugins.indexOf(p)===-1)this.scenePlugins.push(p);else if(!P&&f.hasCore(p)){console.warn("Scene Plugin key in use: "+p);return}if(y){var E=new v(y,this,p);y.sys[p]=E,m&&m!==""&&(y[m]=E),E.boot()}},install:function(p,v,m,y,P){if(m===void 0&&(m=!1),y===void 0&&(y=null),P===void 0&&(P=null),typeof v!="function")return console.warn("Invalid Plugin: "+p),null;if(f.hasCustom(p))return console.warn("Plugin key in use: "+p),null;if(y!==null&&(m=!0),!this.game.isBooted)this._pendingGlobal.push({key:p,plugin:v,start:m,mapping:y,data:P});else if(f.registerCustom(p,v,y,P),m)return this.start(p);return null},getIndex:function(p){for(var v=this.plugins,m=0;m<v.length;m++){var y=v[m];if(y.key===p)return m}return-1},getEntry:function(p){var v=this.getIndex(p);if(v!==-1)return this.plugins[v]},isActive:function(p){var v=this.getEntry(p);return v&&v.active},start:function(p,v){v===void 0&&(v=p);var m=this.getEntry(v);return m&&!m.active?(m.active=!0,m.plugin.start()):m||(m=this.createEntry(p,v)),m?m.plugin:null},createEntry:function(p,v){var m=f.getCustom(p);if(m){var y=new m.plugin(this);m={key:v,plugin:y,active:!0,mapping:m.mapping,data:m.data},this.plugins.push(m),y.init(m.data),y.start()}return m},stop:function(p){var v=this.getEntry(p);return v&&v.active&&(v.active=!1,v.plugin.stop()),this},get:function(p,v){v===void 0&&(v=!0);var m=this.getEntry(p);if(m)return m.plugin;var y=this.getClass(p);return y&&v?(m=this.createEntry(p,p),m?m.plugin:null):y||null},getClass:function(p){return f.getCustomClass(p)},removeGlobalPlugin:function(p){var v=this.getEntry(p);v&&a(this.plugins,v),f.removeCustom(p)},removeScenePlugin:function(p){a(this.scenePlugins,p),f.remove(p)},registerGameObject:function(p,v,m){return v&&n.register(p,v),m&&o.register(p,m),this},removeGameObject:function(p,v,m){return v===void 0&&(v=!0),m===void 0&&(m=!0),v&&n.remove(p),m&&o.remove(p),this},registerFileType:function(p,v,m){h.register(p,v),m&&m.sys.load&&(m.sys.load[p]=v)},destroy:function(){for(var p=0;p<this.plugins.length;p++)this.plugins[p].plugin.destroy();f.destroyCustomPlugins(),this.game.noReturn&&f.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});l.exports=c},39283:(l,T,e)=>{/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2013-2023 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var d=e(88257),x=e(56694),u=e(7599),h=new x({Extends:d,initialize:function(n,r,f){d.call(this,r),this.scene=n,this.systems=n.sys,this.pluginKey=f,n.sys.events.once(u.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});l.exports=h},45615:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={BasePlugin:e(88257),DefaultPlugins:e(18360),PluginCache:e(91963),PluginManager:e(49274),ScenePlugin:e(39283)}},75205:()=>{!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(l){const T=performance.now(),e=this.getVideoPlaybackQuality(),d=this.mozPresentedFrames||this.mozPaintedFrames||e.totalVideoFrames-e.droppedVideoFrames,x=(u,h)=>{const o=this.getVideoPlaybackQuality(),n=this.mozPresentedFrames||this.mozPaintedFrames||o.totalVideoFrames-o.droppedVideoFrames;if(n>d){const r=this.mozFrameDelay||o.totalFrameDelay-e.totalFrameDelay||0,f=h-u;l(h,{presentationTime:h+r*1e3,expectedDisplayTime:h+f,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+f/1e3,presentedFrames:n,processingDuration:r}),delete this._rvfcpolyfillmap[T]}else this._rvfcpolyfillmap[T]=requestAnimationFrame(r=>x(h,r))};return this._rvfcpolyfillmap[T]=requestAnimationFrame(u=>x(T,u)),T},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(l){cancelAnimationFrame(this._rvfcpolyfillmap[l]),delete this._rvfcpolyfillmap[l]})},95723:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},27394:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={DEFAULT:0,LINEAR:0,NEAREST:1};l.exports=T},91135:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(89787),x=e(61840),u=e(56694),h=e(86459),o=e(6659),n=e(81044),r=e(32834),f=e(40444),a=e(38203),c=e(69360),p=new u({Extends:o,initialize:function(m){o.call(this);var y=m.config;this.config={clearBeforeRender:y.clearBeforeRender,backgroundColor:y.backgroundColor,antialias:y.antialias,roundPixels:y.roundPixels},this.game=m,this.type=h.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=m.canvas;var P={alpha:m.config.transparent,desynchronized:m.config.desynchronized,willReadFrequently:!1};this.gameContext=y.context?y.context:this.gameCanvas.getContext("2d",P),this.currentContext=this.gameContext,this.antialias=m.config.antialias,this.blendModes=r(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new c,this._tempMatrix2=new c,this._tempMatrix3=new c,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(a.READY,this.boot,this)},boot:function(){var v=this.game,m=v.scale.baseSize;this.width=m.width,this.height=m.height,this.isBooted=!0,v.scale.on(f.RESIZE,this.onResize,this),this.resize(m.width,m.height)},onResize:function(v,m){(m.width!==this.width||m.height!==this.height)&&this.resize(m.width,m.height)},resize:function(v,m){this.width=v,this.height=m,this.emit(n.RESIZE,v,m)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(v){return this.currentContext.globalCompositeOperation=v,this},setContext:function(v){return this.currentContext=v||this.gameContext,this},setAlpha:function(v){return this.currentContext.globalAlpha=v,this},preRender:function(){var v=this.gameContext,m=this.config,y=this.width,P=this.height;v.globalAlpha=1,v.globalCompositeOperation="source-over",v.setTransform(1,0,0,1,0,0),m.clearBeforeRender&&(v.clearRect(0,0,y,P),m.transparent||(v.fillStyle=m.backgroundColor.rgba,v.fillRect(0,0,y,P))),v.save(),this.drawCount=0,this.emit(n.PRE_RENDER)},render:function(v,m,y){var P=m.length;this.emit(n.RENDER,v,y);var E=y.x,S=y.y,w=y.width,R=y.height,A=y.renderToTexture?y.context:v.sys.context;A.save(),this.game.scene.customViewports&&(A.beginPath(),A.rect(E,S,w,R),A.clip()),y.emit(d.PRE_RENDER,y),this.currentContext=A;var O=y.mask;O&&O.preRenderCanvas(this,null,y._maskCamera),y.transparent||(A.fillStyle=y.backgroundColor.rgba,A.fillRect(E,S,w,R)),A.globalAlpha=y.alpha,A.globalCompositeOperation="source-over",this.drawCount+=P,y.renderToTexture&&y.emit(d.PRE_RENDER,y),y.matrix.copyToContext(A);for(var F=0;F<P;F++){var b=m[F];b.mask&&b.mask.preRenderCanvas(this,b,y),b.renderCanvas(this,b,y),b.mask&&b.mask.postRenderCanvas(this,b,y)}A.setTransform(1,0,0,1,0,0),A.globalCompositeOperation="source-over",A.globalAlpha=1,y.flashEffect.postRenderCanvas(A),y.fadeEffect.postRenderCanvas(A),y.dirty=!1,O&&O.postRenderCanvas(this),A.restore(),y.renderToTexture&&(y.emit(d.POST_RENDER,y),y.renderToGame&&v.sys.context.drawImage(y.canvas,E,S)),y.emit(d.POST_RENDER,y)},postRender:function(){var v=this.gameContext;v.restore(),this.emit(n.POST_RENDER);var m=this.snapshotState;m.callback&&(x(this.gameCanvas,m),m.callback=null)},snapshotCanvas:function(v,m,y,P,E,S,w,R,A){y===void 0&&(y=!1),this.snapshotArea(P,E,S,w,m,R,A);var O=this.snapshotState;return O.getPixel=y,x(v,O),O.callback=null,this},snapshot:function(v,m,y){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,v,m,y)},snapshotArea:function(v,m,y,P,E,S,w){var R=this.snapshotState;return R.callback=E,R.type=S,R.encoder=w,R.getPixel=!1,R.x=v,R.y=m,R.width=Math.min(y,this.gameCanvas.width),R.height=Math.min(P,this.gameCanvas.height),this},snapshotPixel:function(v,m,y){return this.snapshotArea(v,m,1,1,y),this.snapshotState.getPixel=!0,this},batchSprite:function(v,m,y,P){var E=y.alpha*v.alpha;if(E!==0){var S=this.currentContext,w=this._tempMatrix1,R=this._tempMatrix2,A=m.canvasData,O=A.x,F=A.y,b=m.cutWidth,D=m.cutHeight,I=m.customPivot,B=m.source.resolution,k=v.displayOriginX,U=v.displayOriginY,X=-k+m.x,H=-U+m.y;if(v.isCropped){var N=v._crop;(N.flipX!==v.flipX||N.flipY!==v.flipY)&&m.updateCropUVs(N,v.flipX,v.flipY),b=N.cw,D=N.ch,O=N.cx,F=N.cy,X=-k+N.x,H=-U+N.y,v.flipX&&(X>=0?X=-(X+b):X<0&&(X=Math.abs(X)-b)),v.flipY&&(H>=0?H=-(H+D):H<0&&(H=Math.abs(H)-D))}var z=1,L=1;v.flipX&&(I||(X+=-m.realWidth+k*2),z=-1),v.flipY&&(I||(H+=-m.realHeight+U*2),L=-1);var G=v.x,V=v.y;y.roundPixels&&(G=Math.floor(G),V=Math.floor(V)),R.applyITRS(G,V,v.rotation,v.scaleX*z,v.scaleY*L),w.copyFrom(y.matrix),P?(w.multiplyWithOffset(P,-y.scrollX*v.scrollFactorX,-y.scrollY*v.scrollFactorY),R.e=G,R.f=V):(R.e-=y.scrollX*v.scrollFactorX,R.f-=y.scrollY*v.scrollFactorY),w.multiply(R),y.roundPixels&&(w.e=Math.round(w.e),w.f=Math.round(w.f)),S.save(),w.setToContext(S),S.globalCompositeOperation=this.blendModes[v.blendMode],S.globalAlpha=E,S.imageSmoothingEnabled=!m.source.scaleMode,v.mask&&v.mask.preRenderCanvas(this,v,y),b>0&&D>0&&S.drawImage(m.source.image,O,F,b,D,X,H,b/B,D/B),v.mask&&v.mask.postRenderCanvas(this,v,y),S.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});l.exports=p},6046:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={CanvasRenderer:e(91135),GetBlendModes:e(32834),SetTransform:e(49584)}},32834:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(95723),x=e(98581),u=function(){var h=[],o=x.supportNewBlendModes,n="source-over";return h[d.NORMAL]=n,h[d.ADD]="lighter",h[d.MULTIPLY]=o?"multiply":n,h[d.SCREEN]=o?"screen":n,h[d.OVERLAY]=o?"overlay":n,h[d.DARKEN]=o?"darken":n,h[d.LIGHTEN]=o?"lighten":n,h[d.COLOR_DODGE]=o?"color-dodge":n,h[d.COLOR_BURN]=o?"color-burn":n,h[d.HARD_LIGHT]=o?"hard-light":n,h[d.SOFT_LIGHT]=o?"soft-light":n,h[d.DIFFERENCE]=o?"difference":n,h[d.EXCLUSION]=o?"exclusion":n,h[d.HUE]=o?"hue":n,h[d.SATURATION]=o?"saturation":n,h[d.COLOR]=o?"color":n,h[d.LUMINOSITY]=o?"luminosity":n,h[d.ERASE]="destination-out",h[d.SOURCE_IN]="source-in",h[d.SOURCE_OUT]="source-out",h[d.SOURCE_ATOP]="source-atop",h[d.DESTINATION_OVER]="destination-over",h[d.DESTINATION_IN]="destination-in",h[d.DESTINATION_OUT]="destination-out",h[d.DESTINATION_ATOP]="destination-atop",h[d.LIGHTER]="lighter",h[d.COPY]="copy",h[d.XOR]="xor",h};l.exports=u},49584:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=function(u,h,o,n,r){var f=n.alpha*o.alpha;if(f<=0)return!1;var a=d(o,n,r).calc;return h.globalCompositeOperation=u.blendModes[o.blendMode],h.globalAlpha=f,h.save(),a.setToContext(h),h.imageSmoothingEnabled=o.frame?!o.frame.source.scaleMode:u.antialias,!0};l.exports=x},70936:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="postrender"},99298:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="prerender"},7743:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="render"},99519:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="resize"},81044:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={POST_RENDER:e(70936),PRE_RENDER:e(99298),RENDER:e(7743),RESIZE:e(99519)}},42069:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={Canvas:e(6046),Events:e(81044),Snapshot:e(95528),WebGL:e(55478)}},61840:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61068),x=e(27119),u=e(72632),h=function(o,n){var r=u(n,"callback"),f=u(n,"type","image/png"),a=u(n,"encoder",.92),c=Math.abs(Math.round(u(n,"x",0))),p=Math.abs(Math.round(u(n,"y",0))),v=Math.floor(u(n,"width",o.width)),m=Math.floor(u(n,"height",o.height)),y=u(n,"getPixel",!1);if(y){var P=o.getContext("2d",{willReadFrequently:!1}),E=P.getImageData(c,p,1,1),S=E.data;r.call(null,new x(S[0],S[1],S[2],S[3]))}else if(c!==0||p!==0||v!==o.width||m!==o.height){var w=d.createWebGL(this,v,m),R=w.getContext("2d",{willReadFrequently:!0});v>0&&m>0&&R.drawImage(o,c,p,v,m,0,0,v,m);var A=new Image;A.onerror=function(){r.call(null),d.remove(w)},A.onload=function(){r.call(null,A),d.remove(w)},A.src=w.toDataURL(f,a)}else{var O=new Image;O.onerror=function(){r.call(null)},O.onload=function(){r.call(null,O)},O.src=o.toDataURL(f,a)}};l.exports=h},1217:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61068),x=e(27119),u=e(72632),h=function(o,n){var r=o,f=u(n,"callback"),a=u(n,"type","image/png"),c=u(n,"encoder",.92),p=Math.abs(Math.round(u(n,"x",0))),v=Math.abs(Math.round(u(n,"y",0))),m=u(n,"getPixel",!1),y=u(n,"isFramebuffer",!1),P=y?u(n,"bufferWidth",1):r.drawingBufferWidth,E=y?u(n,"bufferHeight",1):r.drawingBufferHeight;if(m){var S=new Uint8Array(4),w=y?v:E-v;r.readPixels(p,w,1,1,r.RGBA,r.UNSIGNED_BYTE,S),f.call(null,new x(S[0],S[1],S[2],S[3]))}else{var R=Math.floor(u(n,"width",P)),A=Math.floor(u(n,"height",E)),O=R*A*4,F=new Uint8Array(O);r.readPixels(p,E-v-A,R,A,r.RGBA,r.UNSIGNED_BYTE,F);for(var b=d.createWebGL(this,R,A),D=b.getContext("2d",{willReadFrequently:!0}),I=D.getImageData(0,0,R,A),B=I.data,k=0;k<A;k++)for(var U=0;U<R;U++){var X=((A-k-1)*R+U)*4,H=y?O-(k*R+(R-U))*4:(k*R+U)*4;B[H+0]=F[X+0],B[H+1]=F[X+1],B[H+2]=F[X+2],B[H+3]=F[X+3]}D.putImageData(I,0,0);var N=new Image;N.onerror=function(){f.call(null),d.remove(b)},N.onload=function(){f.call(null,N),d.remove(b)},N.src=b.toDataURL(a,c)}};l.exports=h},95528:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={Canvas:e(61840),WebGL:e(1217)}},35217:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(65641),u=e(33885),h=e(77290),o=e(72632),n=e(37410),r=e(82127),f=e(5583),a=e(58136),c=e(47406),p=e(81828),v=e(66901),m=e(71264),y=e(77310),P=e(10919),E=e(21213),S=e(51212),w=e(60848),R=new d({initialize:function(O){this.game=O.game,this.renderer=O,this.classes=new u([[x.UTILITY_PIPELINE,w],[x.MULTI_PIPELINE,y],[x.BITMAPMASK_PIPELINE,f],[x.SINGLE_PIPELINE,S],[x.ROPE_PIPELINE,E],[x.LIGHT_PIPELINE,v],[x.POINTLIGHT_PIPELINE,P],[x.MOBILE_PIPELINE,m],[x.FX_PIPELINE,p]]),this.postPipelineClasses=new u([[String(c.BARREL),a.Barrel],[String(c.BLOOM),a.Bloom],[String(c.BLUR),a.Blur],[String(c.BOKEH),a.Bokeh],[String(c.CIRCLE),a.Circle],[String(c.COLOR_MATRIX),a.ColorMatrix],[String(c.DISPLACEMENT),a.Displacement],[String(c.GLOW),a.Glow],[String(c.GRADIENT),a.Gradient],[String(c.PIXELATE),a.Pixelate],[String(c.SHADOW),a.Shadow],[String(c.SHINE),a.Shine],[String(c.VIGNETTE),a.Vignette],[String(c.WIPE),a.Wipe]]),this.pipelines=new u,this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(A,O,F){var b=this.renderer,D=this.renderTargets;this.frameInc=Math.floor(o(A,"frameInc",32));for(var I=b.width,B=b.height,k=Math.min(I,B),U=Math.ceil(k/this.frameInc),X=1;X<U;X++){var H=X*this.frameInc;D.push(new n(b,H,H)),D.push(new n(b,H,H)),D.push(new n(b,H,H)),this.maxDimension=H}D.push(new n(b,I,B,1,0,!0,!0)),D.push(new n(b,I,B,1,0,!0,!0)),D.push(new n(b,I,B,1,0,!0,!0));var N,z,L=this,G=this.game;if(this.classes.each(function(Y,W){N=L.add(Y,new W({game:G})),Y===x.UTILITY_PIPELINE&&(L.UTILITY_PIPELINE=N,L.fullFrame1=N.fullFrame1,L.fullFrame2=N.fullFrame2,L.halfFrame1=N.halfFrame1,L.halfFrame2=N.halfFrame2)}),this.MULTI_PIPELINE=this.get(x.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(x.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(x.MOBILE_PIPELINE),this.FX_PIPELINE=this.get(x.FX_PIPELINE),A)for(z in A){var V=A[z];N=new V(G),N.name=z,N.isPostFX?this.postPipelineClasses.set(z,V):this.has(z)||(this.classes.set(z,V),this.add(z,N))}this.default=this.get(O),F&&!h.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(A){var O=this.get(A);return O&&(this.default=O),O},add:function(A,O){if(O.isPostFX){console.warn(A+" is a Post Pipeline. Use `addPostPipeline` instead");return}var F=this.pipelines,b=this.renderer;return F.has(A)?console.warn("Pipeline exists: "+A):(O.name=A,O.manager=this,F.set(A,O)),O.hasBooted||O.boot(),b.width!==0&&b.height!==0&&!O.isPreFX&&O.resize(b.width,b.height),O},addPostPipeline:function(A,O){this.postPipelineClasses.has(A)||this.postPipelineClasses.set(A,O)},flush:function(){this.current&&this.current.flush()},has:function(A){var O=this.pipelines;return typeof A=="string"?O.has(A):!!O.contains(A)},get:function(A){var O=this.pipelines;if(typeof A=="string")return O.get(A);if(O.contains(A))return A},getPostPipeline:function(A,O,F){var b=this.postPipelineClasses,D,I="",B=typeof A;if(B==="string"||B==="number"?(D=b.get(A),I=A):B==="function"?(b.contains(A)&&(D=A),I=A.name):B==="object"&&(D=b.get(A.name),I=A.name),D){var k=new D(this.game,F);return k.name=I,O&&(k.gameObject=O),k}},remove:function(A,O,F){O===void 0&&(O=!0),F===void 0&&(F=!0),this.pipelines.delete(A),O&&this.classes.delete(A),F&&this.postPipelineClasses.delete(A)},set:function(A,O,F){if(!A.isPostFX)return this.isCurrent(A,F)||(this.flush(),this.current&&this.current.unbind(),this.current=A,A.bind(F)),A.updateProjectionMatrix(),A.onBind(O),A},preBatch:function(A){if(A.hasPostPipeline){this.flush();for(var O=A.postPipelines,F=O.length-1;F>=0;F--){var b=O[F];b.active&&b.preBatch(A)}}},postBatch:function(A){if(A.hasPostPipeline){this.flush();for(var O=A.postPipelines,F=0;F<O.length;F++){var b=O[F];b.active&&b.postBatch(A)}}},preBatchCamera:function(A){if(A.hasPostPipeline){this.flush();for(var O=A.postPipelines,F=O.length-1;F>=0;F--){var b=O[F];b.active&&b.preBatch(A)}}},postBatchCamera:function(A){if(A.hasPostPipeline){this.flush();for(var O=A.postPipelines,F=0;F<O.length;F++){var b=O[F];b.active&&b.postBatch(A)}}},isCurrent:function(A,O){var F=this.renderer,b=this.current;return b&&!O&&(O=b.currentShader),!(b!==A||O.program!==F.currentProgram)},copyFrame:function(A,O,F,b,D){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(A,O,F,b,D),this},copyToGame:function(A){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(A),this},drawFrame:function(A,O,F,b){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(A,O,F,b),this},blendFrames:function(A,O,F,b,D){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(A,O,F,b,D),this},blendFramesAdditive:function(A,O,F,b,D){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(A,O,F,b,D),this},clearFrame:function(A,O){return this.UTILITY_PIPELINE.clearFrame(A,O),this},blitFrame:function(A,O,F,b,D,I){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(A,O,F,b,D,I),this},copyFrameRect:function(A,O,F,b,D,I,B,k){return this.UTILITY_PIPELINE.copyFrameRect(A,O,F,b,D,I,B,k),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(A){return this.UTILITY_PIPELINE.bind(A)},setFX:function(){return this.set(this.FX_PIPELINE)},rebind:function(A){A===void 0&&this.previous&&(A=this.previous);var O=this.renderer,F=O.gl;F.disable(F.DEPTH_TEST),F.disable(F.CULL_FACE),O.hasActiveStencilMask()?F.clear(F.DEPTH_BUFFER_BIT):(F.disable(F.STENCIL_TEST),F.clear(F.DEPTH_BUFFER_BIT|F.STENCIL_BUFFER_BIT)),F.viewport(0,0,O.width,O.height),O.currentProgram=null,O.setBlendMode(0,!0);var b=O.vaoExtension;b&&b.bindVertexArrayOES(null);var D=this.pipelines.entries;for(var I in D)D[I].glReset=!0;A&&(this.current=A,A.rebind())},clear:function(){var A=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,A.currentProgram=null,A.setBlendMode(0,!0);var O=A.vaoExtension;O&&O.bindVertexArrayOES(null)},getRenderTarget:function(A){var O=this.renderTargets,F=3;if(A>this.maxDimension)return this.targetIndex=O.length-F,O[this.targetIndex];var b=(r(A,this.frameInc,0,!0)-1)*F;return this.targetIndex=b,O[b]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});l.exports=R},37410:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(81044),u=new d({initialize:function(o,n,r,f,a,c,p,v,m){f===void 0&&(f=1),a===void 0&&(a=0),c===void 0&&(c=!0),p===void 0&&(p=!1),v===void 0&&(v=!0),m===void 0&&(m=!0),this.renderer=o,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=f,this.minFilter=a,this.autoClear=c,this.autoResize=!0,this.hasDepthBuffer=v,this.forceClamp=m,this.resize(n,r),p?this.setAutoResize(!0):this.autoResize=!1},setAutoResize:function(h){return h&&!this.autoResize?(this.renderer.on(x.RESIZE,this.resize,this),this.autoResize=!0):!h&&this.autoResize&&(this.renderer.off(x.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(h,o){var n=h*this.scale,r=o*this.scale;if(this.autoResize&&(n!==this.width||r!==this.height)){var f=this.renderer;f.deleteFramebuffer(this.framebuffer),f.deleteTexture(this.texture),h*=this.scale,o*=this.scale,h=Math.round(h),o=Math.round(o),h<=0&&(h=1),o<=0&&(o=1),this.texture=f.createTextureFromSource(null,h,o,this.minFilter,this.forceClamp),this.framebuffer=f.createFramebuffer(h,o,this.texture,this.hasDepthBuffer),this.width=h,this.height=o}return this},bind:function(h,o,n){h===void 0&&(h=!1);var r=this.renderer;if(h&&r.flush(),o&&n&&this.resize(o,n),r.pushFramebuffer(this.framebuffer,!1,!1),h&&this.adjustViewport(),this.autoClear){var f=this.renderer.gl;f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT)}r.clearStencilMask()},adjustViewport:function(){var h=this.renderer.gl;h.viewport(0,0,this.width,this.height),h.disable(h.SCISSOR_TEST)},clear:function(){var h=this.renderer,o=h.gl;h.pushFramebuffer(this.framebuffer),o.disable(o.SCISSOR_TEST),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),h.popFramebuffer(),h.resetScissor()},unbind:function(h){h===void 0&&(h=!1);var o=this.renderer;return h&&o.flush(),o.popFramebuffer()},destroy:function(){var h=this.renderer;h.deleteFramebuffer(this.framebuffer),h.deleteTexture(this.texture),h.off(x.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});l.exports=u},75512:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={getTintFromFloats:function(T,e,d,x){var u=(T*255|0)&255,h=(e*255|0)&255,o=(d*255|0)&255,n=(x*255|0)&255;return(n<<24|u<<16|h<<8|o)>>>0},getTintAppendFloatAlpha:function(T,e){var d=(e*255|0)&255;return(d<<24|T)>>>0},getTintAppendFloatAlphaAndSwap:function(T,e){var d=(T>>16|0)&255,x=(T>>8|0)&255,u=(T|0)&255,h=(e*255|0)&255;return(h<<24|u<<16|x<<8|d)>>>0},getFloatsFromUintRGB:function(T){var e=(T>>16|0)&255,d=(T>>8|0)&255,x=(T|0)&255;return[e/255,d/255,x/255]},checkShaderMax:function(T,e){var d=Math.min(16,T.getParameter(T.MAX_TEXTURE_IMAGE_UNITS));return!e||e===-1?d:Math.min(d,e)},parseFragmentShaderMaxTextures:function(T,e){if(!T)return"";for(var d="",x=0;x<e;x++)x>0&&(d+=`
	else `),x<e-1&&(d+="if (outTexId < "+x+".5)"),d+=`
	{`,d+=`
		texture = texture2D(uMainSampler[`+x+"], outTexCoord);",d+=`
	}`;return T=T.replace(/%count%/gi,e.toString()),T.replace(/%forloop%/gi,d)},setGlowQuality:function(T,e,d,x){return d===void 0&&(d=e.config.glowFXQuality),x===void 0&&(x=e.config.glowFXDistance),T=T.replace(/__SIZE__/gi,(1/d/x).toFixed(7)),T=T.replace(/__DIST__/gi,x.toFixed(0)+".0"),T}}},44775:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(28699),u=e(6659),h=e(18970),o=e(72632),n=e(16650),r=e(81044),f=e(37410),a=e(75512),c=e(71305),p=new d({Extends:u,initialize:function(m){u.call(this);var y=m.game,P=y.renderer,E=P.gl;this.name=o(m,"name","WebGLPipeline"),this.game=y,this.renderer=P,this.manager,this.gl=E,this.view=y.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=o(m,"topology",E.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=o(m,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=m,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[]},boot:function(){var v,m=this.gl,y=this.config,P=this.renderer;this.isPostFX||(this.projectionMatrix=new n().identity());var E=this.renderTargets,S=o(y,"renderTarget",!1);typeof S=="boolean"&&S&&(S=1);var w=P.width,R=P.height;if(typeof S=="number")for(v=0;v<S;v++)E.push(new f(P,w,R,1,0,!0));else if(Array.isArray(S))for(v=0;v<S.length;v++){var A=o(S[v],"scale",1),O=o(S[v],"minFilter",0),F=o(S[v],"autoClear",1),b=o(S[v],"width",null),D=o(S[v],"height",b);b?E.push(new f(P,b,D,1,O,F)):E.push(new f(P,w,R,A,O,F))}E.length&&(this.currentRenderTarget=E[0]),this.setShadersFromConfig(y);var I=this.shaders,B=0;for(v=0;v<I.length;v++)I[v].vertexSize>B&&(B=I[v].vertexSize);var k=o(y,"batchSize",P.config.batchSize);this.vertexCapacity=k*6;var U=new ArrayBuffer(this.vertexCapacity*B);this.vertexData=U,this.bytes=new Uint8Array(U),this.vertexViewF32=new Float32Array(U),this.vertexViewU32=new Uint32Array(U);var X=o(y,"vertices",null);for(X?(this.vertexViewF32.set(X),this.vertexBuffer=P.createVertexBuffer(U,m.STATIC_DRAW)):this.vertexBuffer=P.createVertexBuffer(U.byteLength,m.DYNAMIC_DRAW),this.setVertexBuffer(),v=I.length-1;v>=0;v--)I[v].rebind();this.hasBooted=!0,P.on(r.RESIZE,this.resize,this),P.on(r.PRE_RENDER,this.onPreRender,this),P.on(r.RENDER,this.onRender,this),P.on(r.POST_RENDER,this.onPostRender,this),this.emit(h.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(v,m,y){var P=this.renderer;if(v!==this.currentShader||P.currentProgram!==this.currentShader.program){this.flush();var E=this.setVertexBuffer(y);E&&!m&&(m=!0),v.bind(m,!1),this.currentShader=v}return this},getShaderByName:function(v){for(var m=this.shaders,y=0;y<m.length;y++)if(m[y].name===v)return m[y]},setShadersFromConfig:function(v){var m,y=this.shaders,P=this.renderer;for(m=0;m<y.length;m++)y[m].destroy();var E="vertShader",S="fragShader",w="attributes",R=o(v,E,null),A=a.parseFragmentShaderMaxTextures(o(v,S,null),P.maxTextures),O=o(v,w,null),F=o(v,"shaders",[]),b=F.length;if(b===0)R&&A&&(this.shaders=[new c(this,"default",R,A,x(O))]);else{var D=[];for(m=0;m<b;m++){var I=F[m],B,k,U,X;if(typeof I=="string"?(B="default",k=R,U=a.parseFragmentShaderMaxTextures(I,P.maxTextures),X=O):(B=o(I,"name","default"),k=o(I,E,R),U=a.parseFragmentShaderMaxTextures(o(I,S,A),P.maxTextures),X=o(I,w,O)),B==="default"){var H=U.split(`
`),N=H[0].trim();N.indexOf("#define SHADER_NAME")>-1&&(B=N.substring(20))}k&&U&&D.push(new c(this,B,k,U,x(X)))}this.shaders=D}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(v){return this.currentBatch={start:this.vertexCount,count:0,texture:[v],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=v,this.batch.push(this.currentBatch),0},addTextureToBatch:function(v){var m=this.currentBatch;m&&(m.texture.push(v),m.unit++,m.maxUnit++)},pushBatch:function(v){if(!this.currentBatch||this.forceZero&&v!==this.currentTexture)return this.createBatch(v);if(v===this.currentTexture)return this.currentUnit;var m=this.currentBatch,y=m.texture.indexOf(v);return y===-1?m.texture.length===this.renderer.maxTextures?this.createBatch(v):(m.unit++,m.maxUnit++,m.texture.push(v),this.currentUnit=m.unit,this.currentTexture=v,m.unit):(this.currentUnit=y,this.currentTexture=v,y)},setGameObject:function(v,m){return m===void 0&&(m=v.frame),this.pushBatch(m.source.glTexture)},shouldFlush:function(v){return v===void 0&&(v=0),this.vertexCount+v>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(v,m){(v!==this.width||m!==this.height)&&this.flush(),this.width=v,this.height=m;for(var y=this.renderTargets,P=0;P<y.length;P++)y[P].resize(v,m);return this.setProjectionMatrix(v,m),this.emit(h.RESIZE,v,m,this),this.onResize(v,m),this},setProjectionMatrix:function(v,m){var y=this.projectionMatrix;if(!y)return this;this.projectionWidth=v,this.projectionHeight=m,y.ortho(0,v,m,0,-1e3,1e3);for(var P=this.shaders,E="uProjectionMatrix",S=0;S<P.length;S++){var w=P[S];w.hasUniform(E)&&(w.resetUniform(E),w.setMatrix4fv(E,!1,y.val,w))}return this},flipProjectionMatrix:function(v){v===void 0&&(v=!0);var m=this.projectionMatrix;if(!m)return this;var y=this.projectionWidth,P=this.projectionHeight;v?m.ortho(0,y,0,P,-1e3,1e3):m.ortho(0,y,P,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,m.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var v=this.renderer.projectionWidth,m=this.renderer.projectionHeight;(this.projectionWidth!==v||this.projectionHeight!==m)&&this.setProjectionMatrix(v,m)}},bind:function(v){if(v===void 0&&(v=this.currentShader),this.glReset)return this.rebind(v);var m=!1,y=this.gl;return y.getParameter(y.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(y.bindBuffer(y.ARRAY_BUFFER,this.vertexBuffer),this.activeBuffer=this.vertexBuffer,m=!0),v.bind(m),this.currentShader=v,this.activeTextures.length=0,this.emit(h.BIND,this,v),this.onActive(v),this},rebind:function(v){this.activeBuffer=null,this.setVertexBuffer();for(var m=this.shaders,y=m.length-1;y>=0;y--){var P=m[y].rebind();(!v||P===v)&&(this.currentShader=P)}return this.activeTextures.length=0,this.emit(h.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(v){if(v===void 0&&(v=this.vertexBuffer),v!==this.activeBuffer){var m=this.gl;return this.gl.bindBuffer(m.ARRAY_BUFFER,v),this.activeBuffer=v,!0}return!1},preBatch:function(v){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(v),this},postBatch:function(v){return this.onDraw(this.currentRenderTarget),this.onPostBatch(v),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(v){if(v===void 0&&(v=!1),this.vertexCount>0){this.emit(h.BEFORE_FLUSH,this,v),this.onBeforeFlush(v);var m=this.gl,y=this.vertexCount,P=this.currentShader.vertexSize,E=this.topology;if(this.active){this.setVertexBuffer(),y===this.vertexCapacity?m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.DYNAMIC_DRAW):m.bufferSubData(m.ARRAY_BUFFER,0,this.bytes.subarray(0,y*P));var S,w,R,A=this.batch,O=this.activeTextures;if(this.forceZero)for(O[0]||m.activeTexture(m.TEXTURE0),S=0;S<A.length;S++)w=A[S],R=w.texture[0],O[0]!==R&&(m.bindTexture(m.TEXTURE_2D,R),O[0]=R),m.drawArrays(E,w.start,w.count);else for(S=0;S<A.length;S++){w=A[S];for(var F=0;F<=w.maxUnit;F++)R=w.texture[F],O[F]!==R&&(m.activeTexture(m.TEXTURE0+F),m.bindTexture(m.TEXTURE_2D,R),O[F]=R);m.drawArrays(E,w.start,w.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(h.AFTER_FLUSH,this,v),this.onAfterFlush(v)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(v,m,y,P,E,S,w){var R=this.vertexViewF32,A=this.vertexViewU32,O=this.vertexCount*this.currentShader.vertexComponentCount-1;R[++O]=v,R[++O]=m,R[++O]=y,R[++O]=P,R[++O]=E,R[++O]=S,A[++O]=w,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(v,m,y,P,E,S,w,R,A,O,F,b,D,I,B,k,U,X,H,N){N===void 0&&(N=this.currentUnit);var z=!1;this.shouldFlush(6)&&(this.flush(),z=!0),this.currentBatch||(N=this.setTexture2D(H));var L=this.vertexViewF32,G=this.vertexViewU32,V=this.vertexCount*this.currentShader.vertexComponentCount-1;return L[++V]=m,L[++V]=y,L[++V]=O,L[++V]=F,L[++V]=N,L[++V]=X,G[++V]=I,L[++V]=P,L[++V]=E,L[++V]=O,L[++V]=D,L[++V]=N,L[++V]=X,G[++V]=k,L[++V]=S,L[++V]=w,L[++V]=b,L[++V]=D,L[++V]=N,L[++V]=X,G[++V]=U,L[++V]=m,L[++V]=y,L[++V]=O,L[++V]=F,L[++V]=N,L[++V]=X,G[++V]=I,L[++V]=S,L[++V]=w,L[++V]=b,L[++V]=D,L[++V]=N,L[++V]=X,G[++V]=U,L[++V]=R,L[++V]=A,L[++V]=b,L[++V]=F,L[++V]=N,L[++V]=X,G[++V]=B,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(v),z},batchTri:function(v,m,y,P,E,S,w,R,A,O,F,b,D,I,B,k,U){U===void 0&&(U=this.currentUnit);var X=!1;this.shouldFlush(3)&&(this.flush(),X=!0),this.currentBatch||(U=this.setTexture2D(k));var H=this.vertexViewF32,N=this.vertexViewU32,z=this.vertexCount*this.currentShader.vertexComponentCount-1;return H[++z]=m,H[++z]=y,H[++z]=R,H[++z]=A,H[++z]=U,H[++z]=B,N[++z]=b,H[++z]=P,H[++z]=E,H[++z]=R,H[++z]=F,H[++z]=U,H[++z]=B,N[++z]=D,H[++z]=S,H[++z]=w,H[++z]=O,H[++z]=F,H[++z]=U,H[++z]=B,N[++z]=I,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(v),X},drawFillRect:function(v,m,y,P,E,S,w,R){w===void 0&&(w=this.renderer.whiteTexture),R===void 0&&(R=!0),v=Math.floor(v),m=Math.floor(m);var A=Math.floor(v+y),O=Math.floor(m+P),F=this.setTexture2D(w),b=a.getTintAppendFloatAlphaAndSwap(E,S),D=0,I=0,B=1,k=1;R&&(I=1,k=0),this.batchQuad(null,v,m,v,O,A,O,A,m,D,I,B,k,b,b,b,b,0,w,F)},setTexture2D:function(v){return v===void 0&&(v=this.renderer.whiteTexture),this.pushBatch(v)},bindTexture:function(v,m){m===void 0&&(m=0);var y=this.gl;return y.activeTexture(y.TEXTURE0+m),y.bindTexture(y.TEXTURE_2D,v),this},bindRenderTarget:function(v,m){return this.bindTexture(v.texture,m)},setTime:function(v,m){return this.set1f(v,this.game.loop.getDuration(),m),this},setBoolean:function(v,m,y){return y===void 0&&(y=this.currentShader),y.setBoolean(v,m),this},set1f:function(v,m,y){return y===void 0&&(y=this.currentShader),y.set1f(v,m),this},set2f:function(v,m,y,P){return P===void 0&&(P=this.currentShader),P.set2f(v,m,y),this},set3f:function(v,m,y,P,E){return E===void 0&&(E=this.currentShader),E.set3f(v,m,y,P),this},set4f:function(v,m,y,P,E,S){return S===void 0&&(S=this.currentShader),S.set4f(v,m,y,P,E),this},set1fv:function(v,m,y){return y===void 0&&(y=this.currentShader),y.set1fv(v,m),this},set2fv:function(v,m,y){return y===void 0&&(y=this.currentShader),y.set2fv(v,m),this},set3fv:function(v,m,y){return y===void 0&&(y=this.currentShader),y.set3fv(v,m),this},set4fv:function(v,m,y){return y===void 0&&(y=this.currentShader),y.set4fv(v,m),this},set1iv:function(v,m,y){return y===void 0&&(y=this.currentShader),y.set1iv(v,m),this},set2iv:function(v,m,y){return y===void 0&&(y=this.currentShader),y.set2iv(v,m),this},set3iv:function(v,m,y){return y===void 0&&(y=this.currentShader),y.set3iv(v,m),this},set4iv:function(v,m,y){return y===void 0&&(y=this.currentShader),y.set4iv(v,m),this},set1i:function(v,m,y){return y===void 0&&(y=this.currentShader),y.set1i(v,m),this},set2i:function(v,m,y,P){return P===void 0&&(P=this.currentShader),P.set2i(v,m,y),this},set3i:function(v,m,y,P,E){return E===void 0&&(E=this.currentShader),E.set3i(v,m,y,P),this},set4i:function(v,m,y,P,E,S){return S===void 0&&(S=this.currentShader),S.set4i(v,m,y,P,E),this},setMatrix2fv:function(v,m,y,P){return P===void 0&&(P=this.currentShader),P.setMatrix2fv(v,m,y),this},setMatrix3fv:function(v,m,y,P){return P===void 0&&(P=this.currentShader),P.setMatrix3fv(v,m,y),this},setMatrix4fv:function(v,m,y,P){return P===void 0&&(P=this.currentShader),P.setMatrix4fv(v,m,y),this},destroy:function(){this.emit(h.DESTROY,this);var v,m=this.shaders;for(v=0;v<m.length;v++)m[v].destroy();var y=this.renderTargets;for(v=0;v<y.length;v++)y[v].destroy();this.gl.deleteBuffer(this.vertexBuffer);var P=this.renderer;return P.off(r.RESIZE,this.resize,this),P.off(r.PRE_RENDER,this.onPreRender,this),P.off(r.RENDER,this.onRender,this),P.off(r.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});l.exports=p},11857:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66458),x=e(89787),u=e(56694),h=e(86459),o=e(6659),n=e(81044),r=e(28621),f=e(16650),a=e(72283),c=e(35217),p=e(37410),v=e(40444),m=e(38203),y=e(75512),P=e(1217),E=new u({Extends:o,initialize:function(w){o.call(this);var R=w.config,A={alpha:R.transparent,desynchronized:R.desynchronized,depth:!0,antialias:R.antialiasGL,premultipliedAlpha:R.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:R.failIfMajorPerformanceCaveat,powerPreference:R.powerPreference,preserveDrawingBuffer:R.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:R.clearBeforeRender,antialias:R.antialias,backgroundColor:R.backgroundColor,contextCreation:A,roundPixels:R.roundPixels,maxTextures:R.maxTextures,maxTextureSize:R.maxTextureSize,batchSize:R.batchSize,maxLights:R.maxLights,mipmapFilter:R.mipmapFilter},this.game=w,this.type=h.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=w.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=a,this.contextRestoredHandler=a,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(S){var w,R=this.game,A=this.canvas,O=S.backgroundColor;if(R.config.context?w=R.config.context:w=A.getContext("webgl",S.contextCreation)||A.getContext("experimental-webgl",S.contextCreation),!w||w.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=w;var F=this;this.contextLostHandler=function(X){F.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),X.preventDefault()},A.addEventListener("webglcontextlost",this.contextLostHandler,!1),R.context=w;for(var b=0;b<=27;b++)this.blendModes.push({func:[w.ONE,w.ONE_MINUS_SRC_ALPHA],equation:w.FUNC_ADD});this.blendModes[1].func=[w.ONE,w.DST_ALPHA],this.blendModes[2].func=[w.DST_COLOR,w.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[w.ONE,w.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[w.ZERO,w.ONE_MINUS_SRC_ALPHA],equation:w.FUNC_REVERSE_SUBTRACT},this.glFormats=[w.BYTE,w.SHORT,w.UNSIGNED_BYTE,w.UNSIGNED_SHORT,w.FLOAT],this.glFuncMap={mat2:{func:w.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:w.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:w.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:w.uniform1f,length:1},"1fv":{func:w.uniform1fv,length:1},"1i":{func:w.uniform1i,length:1},"1iv":{func:w.uniform1iv,length:1},"2f":{func:w.uniform2f,length:2},"2fv":{func:w.uniform2fv,length:1},"2i":{func:w.uniform2i,length:2},"2iv":{func:w.uniform2iv,length:1},"3f":{func:w.uniform3f,length:3},"3fv":{func:w.uniform3fv,length:1},"3i":{func:w.uniform3i,length:3},"3iv":{func:w.uniform3iv,length:1},"4f":{func:w.uniform4f,length:4},"4fv":{func:w.uniform4fv,length:1},"4i":{func:w.uniform4i,length:4},"4iv":{func:w.uniform4iv,length:1}};var D=w.getSupportedExtensions();(!S.maxTextures||S.maxTextures===-1)&&(S.maxTextures=w.getParameter(w.MAX_TEXTURE_IMAGE_UNITS)),S.maxTextureSize||(S.maxTextureSize=w.getParameter(w.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),this.supportedExtensions=D;var I="ANGLE_instanced_arrays";this.instancedArraysExtension=D.indexOf(I)>-1?w.getExtension(I):null;var B="OES_vertex_array_object";this.vaoExtension=D.indexOf(B)>-1?w.getExtension(B):null,w.disable(w.DEPTH_TEST),w.disable(w.CULL_FACE),w.enable(w.BLEND),w.clearColor(O.redGL,O.greenGL,O.blueGL,O.alphaGL),S.mipmapFilter!==""&&(this.mipmapFilter=w[S.mipmapFilter]),this.maxTextures=y.checkShaderMax(w,S.maxTextures),this.textureIndexes=[];for(var k=0;k<this.maxTextures;k++){var U=w.createTexture();w.activeTexture(w.TEXTURE0+k),w.bindTexture(w.TEXTURE_2D,U),w.texImage2D(w.TEXTURE_2D,0,w.RGBA,1,1,0,w.RGBA,w.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(k)}return this.pipelines=new c(this),this.setBlendMode(h.BlendModes.NORMAL),this.projectionMatrix=new f().identity(),R.textures.once(m.READY,this.boot,this),this},boot:function(){var S=this.game,w=this.pipelines,R=S.scale.baseSize,A=R.width,O=R.height;this.width=A,this.height=O,this.isBooted=!0,this.renderTarget=new p(this,A,O,1,0,!0,!0),this.maskTarget=new p(this,A,O,1,0,!0,!0),this.maskSource=new p(this,A,O,1,0,!0,!0);var F=S.config;w.boot(F.pipeline,F.defaultPipeline,F.autoMobilePipeline),this.blankTexture=S.textures.getFrame("__DEFAULT").glTexture,this.whiteTexture=S.textures.getFrame("__WHITE").glTexture;var b=this.gl;b.bindFramebuffer(b.FRAMEBUFFER,null),b.enable(b.SCISSOR_TEST),S.scale.on(v.RESIZE,this.onResize,this),this.resize(A,O)},captureFrame:function(S,w){},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(S,w,R){},stopCapture:function(){},onCapture:function(S){},onResize:function(S,w){(w.width!==this.width||w.height!==this.height)&&this.resize(w.width,w.height)},beginCapture:function(S,w){S===void 0&&(S=this.width),w===void 0&&(w=this.height),this.renderTarget.bind(!0,S,w),this.setProjectionMatrix(S,w)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(S,w){var R=this.gl;return this.width=S,this.height=w,this.setProjectionMatrix(S,w),R.viewport(0,0,S,w),this.drawingBufferHeight=R.drawingBufferHeight,R.scissor(0,R.drawingBufferHeight-w,S,w),this.defaultScissor[2]=S,this.defaultScissor[3]=w,this.emit(n.RESIZE,S,w),this},getCompressedTextures:function(){var S="WEBGL_compressed_texture_",w="WEBKIT_"+S,R=function(O,F){var b=O.getExtension(S+F)||O.getExtension(w+F);if(b){var D={};for(var I in b)D[b[I]]=I;return D}},A=this.gl;return{ETC:R(A,"etc"),ETC1:R(A,"etc1"),ATC:R(A,"atc"),ASTC:R(A,"astc"),BPTC:R(A,"bptc"),RGTC:R(A,"rgtc"),PVRTC:R(A,"pvrtc"),S3TC:R(A,"s3tc"),S3TCSRGB:R(A,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(S,w){var R=this.compression[S.toUpperCase()];if(w in R)return R[w]},supportsCompressedTexture:function(S,w){var R=this.compression[S.toUpperCase()];return R?w?w in R:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(S,w){return(S!==this.projectionWidth||w!==this.projectionHeight)&&(this.projectionWidth=S,this.projectionHeight=w,this.projectionMatrix.ortho(0,S,w,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(S){return this.supportedExtensions?this.supportedExtensions.indexOf(S):!1},getExtension:function(S){return this.hasExtension(S)?(S in this.extensions||(this.extensions[S]=this.gl.getExtension(S)),this.extensions[S]):null},flush:function(){this.pipelines.flush()},pushScissor:function(S,w,R,A,O){O===void 0&&(O=this.drawingBufferHeight);var F=this.scissorStack,b=[S,w,R,A];return F.push(b),this.setScissor(S,w,R,A,O),this.currentScissor=b,b},setScissor:function(S,w,R,A,O){O===void 0&&(O=this.drawingBufferHeight);var F=this.gl,b=this.currentScissor,D=R>0&&A>0;if(b&&D){var I=b[0],B=b[1],k=b[2],U=b[3];D=I!==S||B!==w||k!==R||U!==A}D&&(this.flush(),F.scissor(S,O-w-A,R,A))},resetScissor:function(){var S=this.gl;S.enable(S.SCISSOR_TEST);var w=this.currentScissor;if(w){var R=w[0],A=w[1],O=w[2],F=w[3];O>0&&F>0&&S.scissor(R,this.drawingBufferHeight-A-F,O,F)}},popScissor:function(){var S=this.scissorStack;S.pop();var w=S[S.length-1];w&&this.setScissor(w[0],w[1],w[2],w[3]),this.currentScissor=w},hasActiveStencilMask:function(){var S=this.currentMask.mask,w=this.currentCameraMask.mask;return S&&S.isStencil||w&&w.isStencil},resetViewport:function(){var S=this.gl;S.viewport(0,0,this.width,this.height),this.drawingBufferHeight=S.drawingBufferHeight},setBlendMode:function(S,w){w===void 0&&(w=!1);var R=this.gl,A=this.blendModes[S];return w||S!==h.BlendModes.SKIP_CHECK&&this.currentBlendMode!==S?(this.flush(),R.enable(R.BLEND),R.blendEquation(A.equation),A.func.length>2?R.blendFuncSeparate(A.func[0],A.func[1],A.func[2],A.func[3]):R.blendFunc(A.func[0],A.func[1]),this.currentBlendMode=S,!0):!1},addBlendMode:function(S,w){var R=this.blendModes.push({func:S,equation:w});return R-1},updateBlendMode:function(S,w,R){return this.blendModes[S]&&(this.blendModes[S].func=w,R&&(this.blendModes[S].equation=R)),this},removeBlendMode:function(S){return S>17&&this.blendModes[S]&&this.blendModes.splice(S,1),this},pushFramebuffer:function(S,w,R,A,O){return S===this.currentFramebuffer?this:(this.fboStack.push(S),this.setFramebuffer(S,w,R,A,O))},setFramebuffer:function(S,w,R,A,O){if(w===void 0&&(w=!1),R===void 0&&(R=!0),A===void 0&&(A=null),O===void 0&&(O=!1),S===this.currentFramebuffer)return this;var F=this.gl,b=this.width,D=this.height;return S&&S.renderTexture&&R?(b=S.renderTexture.width,D=S.renderTexture.height):this.flush(),F.bindFramebuffer(F.FRAMEBUFFER,S),R&&F.viewport(0,0,b,D),A&&F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_2D,A,0),O&&(F.clearColor(0,0,0,0),F.clear(F.COLOR_BUFFER_BIT)),w&&(S?(this.drawingBufferHeight=D,this.pushScissor(0,0,b,D)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=S,this},popFramebuffer:function(S,w){S===void 0&&(S=!1),w===void 0&&(w=!0);var R=this.fboStack;R.pop();var A=R[R.length-1];return A||(A=null),this.setFramebuffer(A,S,w),A},restoreFramebuffer:function(S,w){S===void 0&&(S=!1),w===void 0&&(w=!0);var R=this.fboStack,A=R[R.length-1];A||(A=null),this.currentFramebuffer=null,this.setFramebuffer(A,S,w)},setProgram:function(S){return S!==this.currentProgram?(this.flush(),this.gl.useProgram(S),this.currentProgram=S,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(S,w,R,A,O){O===void 0&&(O=!1);var F=this.gl,b=F.NEAREST,D=F.NEAREST,I=F.CLAMP_TO_EDGE,B=null;w=S?S.width:w,R=S?S.height:R;var k=r(w,R);return k&&!O&&(I=F.REPEAT),A===h.ScaleModes.LINEAR&&this.config.antialias&&(b=k&&this.mipmapFilter?this.mipmapFilter:F.LINEAR,D=F.LINEAR),S&&S.compressed&&(b=F.LINEAR,D=F.LINEAR),!S&&typeof w=="number"&&typeof R=="number"?B=this.createTexture2D(0,b,D,I,I,F.RGBA,null,w,R):B=this.createTexture2D(0,b,D,I,I,F.RGBA,S),B},createTexture2D:function(S,w,R,A,O,F,b,D,I,B,k,U){B=B??!0,k===void 0&&(k=!1),U===void 0&&(U=!1);var X=this.gl,H=X.createTexture();X.activeTexture(X.TEXTURE0);var N=X.getParameter(X.TEXTURE_BINDING_2D);X.bindTexture(X.TEXTURE_2D,H),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MIN_FILTER,w),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MAG_FILTER,R),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_S,O),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_T,A),X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B),U&&X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,!0);var z=!1;if(b==null)X.texImage2D(X.TEXTURE_2D,S,F,D,I,0,F,X.UNSIGNED_BYTE,null),z=r(D,I);else if(b.compressed){D=b.width,I=b.height,z=b.generateMipmap;for(var L=0;L<b.mipmaps.length;L++)X.compressedTexImage2D(X.TEXTURE_2D,L,b.internalFormat,b.mipmaps[L].width,b.mipmaps[L].height,0,b.mipmaps[L].data)}else k||(D=b.width,I=b.height),X.texImage2D(X.TEXTURE_2D,S,F,F,X.UNSIGNED_BYTE,b),z=r(D,I);return z&&X.generateMipmap(X.TEXTURE_2D),N&&X.bindTexture(X.TEXTURE_2D,N),H.isAlphaPremultiplied=B,H.isRenderTexture=!1,H.width=D,H.height=I,H},createFramebuffer:function(S,w,R,A){A===void 0&&(A=!0);var O=this.gl,F=O.createFramebuffer(),b=0;if(this.setFramebuffer(F),R.isRenderTexture=!0,R.isAlphaPremultiplied=!1,O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,R,0),b=O.checkFramebufferStatus(O.FRAMEBUFFER),b!==O.FRAMEBUFFER_COMPLETE){var D={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+(D[b]||b))}if(F.renderTexture=R,A){var I=O.createRenderbuffer();O.bindRenderbuffer(O.RENDERBUFFER,I),O.renderbufferStorage(O.RENDERBUFFER,O.DEPTH_STENCIL,S,w),O.framebufferRenderbuffer(O.FRAMEBUFFER,O.DEPTH_STENCIL_ATTACHMENT,O.RENDERBUFFER,I)}return this.setFramebuffer(null),F},beginBitmapMask:function(S,w){var R=this.gl;R&&(this.flush(),this.maskTarget.bind(),this.currentCameraMask.mask!==S&&(this.currentMask.mask=S,this.currentMask.camera=w))},drawBitmapMask:function(S,w,R){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),S.renderWebGL(this,S,w),this.maskSource.unbind(!0),this.maskTarget.unbind();var A=this.gl,O=this.getCurrentStencilMask();O?(A.enable(A.STENCIL_TEST),O.mask.applyStencil(this,O.camera,!0)):this.currentMask.mask=null,this.pipelines.set(R),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,this.maskTarget.texture),A.activeTexture(A.TEXTURE1),A.bindTexture(A.TEXTURE_2D,this.maskSource.texture)},createProgram:function(S,w){var R=this.gl,A=R.createProgram(),O=R.createShader(R.VERTEX_SHADER),F=R.createShader(R.FRAGMENT_SHADER);R.shaderSource(O,S),R.shaderSource(F,w),R.compileShader(O),R.compileShader(F);var b=`Shader failed:
`;if(!R.getShaderParameter(O,R.COMPILE_STATUS))throw new Error("Vertex "+b+R.getShaderInfoLog(O));if(!R.getShaderParameter(F,R.COMPILE_STATUS))throw new Error("Fragment "+b+R.getShaderInfoLog(F));if(R.attachShader(A,O),R.attachShader(A,F),R.linkProgram(A),!R.getProgramParameter(A,R.LINK_STATUS))throw new Error("Link "+b+R.getProgramInfoLog(A));return R.useProgram(A),A},createVertexBuffer:function(S,w){var R=this.gl,A=R.createBuffer();return R.bindBuffer(R.ARRAY_BUFFER,A),R.bufferData(R.ARRAY_BUFFER,S,w),R.bindBuffer(R.ARRAY_BUFFER,null),A},createIndexBuffer:function(S,w){var R=this.gl,A=R.createBuffer();return R.bindBuffer(R.ELEMENT_ARRAY_BUFFER,A),R.bufferData(R.ELEMENT_ARRAY_BUFFER,S,w),R.bindBuffer(R.ELEMENT_ARRAY_BUFFER,null),A},deleteTexture:function(S){return S&&this.gl.deleteTexture(S),this},deleteFramebuffer:function(S){if(S){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,S);var R=w.getParameter(w.RENDERBUFFER_BINDING);R&&w.deleteRenderbuffer(R),w.bindFramebuffer(w.FRAMEBUFFER,null),w.deleteFramebuffer(S),d(this.fboStack,S),this.currentFramebuffer===S&&(this.currentFramebuffer=null)}return this},deleteProgram:function(S){return S&&this.gl.deleteProgram(S),this},deleteBuffer:function(S){return this.gl.deleteBuffer(S),this},preRenderCamera:function(S){var w=S.x,R=S.y,A=S.width,O=S.height,F=S.backgroundColor;if(S.emit(x.PRE_RENDER,S),this.pipelines.preBatchCamera(S),this.pushScissor(w,R,A,O),S.mask&&(this.currentCameraMask.mask=S.mask,this.currentCameraMask.camera=S._maskCamera,S.mask.preRenderWebGL(this,S,S._maskCamera)),F.alphaGL>0){var b=this.pipelines.setMulti();b.drawFillRect(w,R,A,O,y.getTintFromFloats(F.blueGL,F.greenGL,F.redGL,1),F.alphaGL)}},getCurrentStencilMask:function(){var S=null,w=this.maskStack,R=this.currentCameraMask;return w.length>0?S=w[w.length-1]:R.mask&&R.mask.isStencil&&(S=R),S},postRenderCamera:function(S){var w=S.flashEffect,R=S.fadeEffect;if(w.isRunning||R.isRunning||R.isComplete){var A=this.pipelines.setMulti();w.postRenderWebGL(A,y.getTintFromFloats),R.postRenderWebGL(A,y.getTintFromFloats)}S.dirty=!1,this.popScissor(),S.mask&&(this.currentCameraMask.mask=null,S.mask.postRenderWebGL(this,S._maskCamera)),this.pipelines.postBatchCamera(S),S.emit(x.POST_RENDER,S)},preRender:function(){if(!this.contextLost){var S=this.gl;if(S.bindFramebuffer(S.FRAMEBUFFER,null),this.config.clearBeforeRender){var w=this.config.backgroundColor;S.clearColor(w.redGL,w.greenGL,w.blueGL,w.alphaGL),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT|S.STENCIL_BUFFER_BIT)}S.enable(S.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&S.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(n.PRE_RENDER)}},render:function(S,w,R){if(!this.contextLost){var A=w.length;if(this.emit(n.RENDER,S,R),this.preRenderCamera(R),A===0){this.setBlendMode(h.BlendModes.NORMAL),this.postRenderCamera(R);return}this.currentType="";for(var O=this.currentMask,F=0;F<A;F++){this.finalType=F===A-1;var b=w[F],D=b.mask;O=this.currentMask,O.mask&&O.mask!==D&&O.mask.postRenderWebGL(this,O.camera),D&&O.mask!==D&&D.preRenderWebGL(this,b,R),b.blendMode!==this.currentBlendMode&&this.setBlendMode(b.blendMode);var I=b.type;I!==this.currentType&&(this.newType=!0,this.currentType=I),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=w[F+1].type===this.currentType,b.renderWebGL(this,b,R),this.newType=!1}O=this.currentMask,O.mask&&O.mask.postRenderWebGL(this,O.camera),this.setBlendMode(h.BlendModes.NORMAL),this.postRenderCamera(R)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(n.POST_RENDER);var S=this.snapshotState;S.callback&&(P(this.gl,S),S.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var S=this.gl,w=this.getCurrentStencilMask();if(w){var R=w.mask;S.enable(S.STENCIL_TEST),R.invertAlpha?S.stencilFunc(S.NOTEQUAL,R.level,255):S.stencilFunc(S.EQUAL,R.level,255)}},snapshot:function(S,w,R){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,S,w,R)},snapshotArea:function(S,w,R,A,O,F,b){var D=this.snapshotState;return D.callback=O,D.type=F,D.encoder=b,D.getPixel=!1,D.x=S,D.y=w,D.width=R,D.height=A,this},snapshotPixel:function(S,w,R){return this.snapshotArea(S,w,1,1,R),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(S,w,R,A,O,F,b,D,I,B,k){O===void 0&&(O=!1),F===void 0&&(F=0),b===void 0&&(b=0),D===void 0&&(D=w),I===void 0&&(I=R),B==="pixel"&&(O=!0,B="image/png");var U=this.currentFramebuffer;this.snapshotArea(F,b,D,I,A,B,k);var X=this.snapshotState;return X.getPixel=O,X.isFramebuffer=!0,X.bufferWidth=w,X.bufferHeight=R,X.width=Math.min(X.width,w),X.height=Math.min(X.height,R),this.setFramebuffer(S),P(this.gl,X),this.setFramebuffer(U),X.callback=null,X.isFramebuffer=!1,this},canvasToTexture:function(S,w,R,A){return R===void 0&&(R=!1),A===void 0&&(A=!1),w?this.updateCanvasTexture(S,w,A):this.createCanvasTexture(S,R,A)},createCanvasTexture:function(S,w,R){w===void 0&&(w=!1),R===void 0&&(R=!1);var A=this.gl,O=A.NEAREST,F=A.NEAREST,b=S.width,D=S.height,I=A.CLAMP_TO_EDGE,B=r(b,D);return!w&&B&&(I=A.REPEAT),this.config.antialias&&(O=B&&this.mipmapFilter?this.mipmapFilter:A.LINEAR,F=A.LINEAR),this.createTexture2D(0,O,F,I,I,A.RGBA,S,b,D,!0,!1,R)},updateCanvasTexture:function(S,w,R){R===void 0&&(R=!1);var A=this.gl,O=S.width,F=S.height;if(O>0&&F>0){A.activeTexture(A.TEXTURE0);var b=A.getParameter(A.TEXTURE_BINDING_2D);A.bindTexture(A.TEXTURE_2D,w),R&&A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,!0),A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,S),w.width=O,w.height=F,b&&A.bindTexture(A.TEXTURE_2D,b)}return w},createVideoTexture:function(S,w,R){w===void 0&&(w=!1),R===void 0&&(R=!1);var A=this.gl,O=A.NEAREST,F=A.NEAREST,b=S.videoWidth,D=S.videoHeight,I=A.CLAMP_TO_EDGE,B=r(b,D);return!w&&B&&(I=A.REPEAT),this.config.antialias&&(O=B&&this.mipmapFilter?this.mipmapFilter:A.LINEAR,F=A.LINEAR),this.createTexture2D(0,O,F,I,I,A.RGBA,S,b,D,!0,!0,R)},updateVideoTexture:function(S,w,R){R===void 0&&(R=!1);var A=this.gl,O=S.videoWidth,F=S.videoHeight;if(O>0&&F>0){A.activeTexture(A.TEXTURE0);var b=A.getParameter(A.TEXTURE_BINDING_2D);A.bindTexture(A.TEXTURE_2D,w),A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,R),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,S),w.width=O,w.height=F,b&&A.bindTexture(A.TEXTURE_2D,b)}return w},setTextureFilter:function(S,w){var R=this.gl,A=[R.LINEAR,R.NEAREST][w];R.activeTexture(R.TEXTURE0);var O=R.getParameter(R.TEXTURE_BINDING_2D);return R.bindTexture(R.TEXTURE_2D,S),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,A),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,A),O&&R.bindTexture(R.TEXTURE_2D,O),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});l.exports=E},71305:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72632),u=e(71402),h=new d({initialize:function(n,r,f,a,c){this.pipeline=n,this.name=r,this.renderer=n.renderer,this.gl=this.renderer.gl,this.fragSrc=a,this.vertSrc=f,this.program=this.renderer.createProgram(f,a),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(c),this.createUniforms()},createAttributes:function(o){var n=0,r=0,f=[];this.vertexComponentCount=0;for(var a=0;a<o.length;a++){var c=o[a],p=c.name,v=x(c,"size",1),m=x(c,"type",u.FLOAT),y=m.enum,P=m.size,E=!!c.normalized;f.push({name:p,size:v,type:y,normalized:E,offset:r,enabled:!1,location:-1}),P===4?n+=v:n++,r+=v*P}this.vertexSize=r,this.vertexComponentCount=n,this.attributes=f},bind:function(o,n){return o===void 0&&(o=!1),n===void 0&&(n=!1),n&&this.pipeline.flush(),this.renderer.setProgram(this.program),o&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(o){o===void 0&&(o=!1);for(var n=this.gl,r=this.vertexSize,f=this.attributes,a=this.program,c=0;c<f.length;c++){var p=f[c],v=p.size,m=p.type,y=p.offset,P=p.enabled,E=p.location,S=!!p.normalized;if(o){var w=n.getAttribLocation(a,p.name);w>=0?(n.enableVertexAttribArray(w),n.vertexAttribPointer(w,v,m,S,r,y),p.enabled=!0,p.location=w):w!==-1&&n.disableVertexAttribArray(w)}else P?n.vertexAttribPointer(E,v,m,S,r,y):!P&&E>-1&&(n.disableVertexAttribArray(E),p.location=-1)}return this},createUniforms:function(){var o=this.gl,n=this.program,r=this.uniforms,f,a,c,p=o.getProgramParameter(n,o.ACTIVE_UNIFORMS);for(f=0;f<p;f++){var v=o.getActiveUniform(n,f);if(v){a=v.name,c=o.getUniformLocation(n,a),c!==null&&(r[a]={name:a,location:c,value1:null,value2:null,value3:null,value4:null});var m=a.indexOf("[");m>0&&(a=a.substr(0,m),r.hasOwnProperty(a)||(c=o.getUniformLocation(n,a),c!==null&&(r[a]={name:a,location:c,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(o){return this.uniforms.hasOwnProperty(o)},resetUniform:function(o){var n=this.uniforms[o];return n&&(n.value1=null,n.value2=null,n.value3=null,n.value4=null),this},setUniform1:function(o,n,r,f){var a=this.uniforms[n];return a?((f||a.value1!==r)&&(a.value1=r,this.renderer.setProgram(this.program),o.call(this.gl,a.location,r),this.pipeline.currentShader=this),this):this},setUniform2:function(o,n,r,f,a){var c=this.uniforms[n];return c?((a||c.value1!==r||c.value2!==f)&&(c.value1=r,c.value2=f,this.renderer.setProgram(this.program),o.call(this.gl,c.location,r,f),this.pipeline.currentShader=this),this):this},setUniform3:function(o,n,r,f,a,c){var p=this.uniforms[n];return p?((c||p.value1!==r||p.value2!==f||p.value3!==a)&&(p.value1=r,p.value2=f,p.value3=a,this.renderer.setProgram(this.program),o.call(this.gl,p.location,r,f,a),this.pipeline.currentShader=this),this):this},setUniform4:function(o,n,r,f,a,c,p){var v=this.uniforms[n];return v?((p||v.value1!==r||v.value2!==f||v.value3!==a||v.value4!==c)&&(v.value1=r,v.value2=f,v.value3=a,v.value4=c,this.renderer.setProgram(this.program),o.call(this.gl,v.location,r,f,a,c),this.pipeline.currentShader=this),this):this},setBoolean:function(o,n){return this.setUniform1(this.gl.uniform1i,o,Number(n))},set1f:function(o,n){return this.setUniform1(this.gl.uniform1f,o,n)},set2f:function(o,n,r){return this.setUniform2(this.gl.uniform2f,o,n,r)},set3f:function(o,n,r,f){return this.setUniform3(this.gl.uniform3f,o,n,r,f)},set4f:function(o,n,r,f,a){return this.setUniform4(this.gl.uniform4f,o,n,r,f,a)},set1fv:function(o,n){return this.setUniform1(this.gl.uniform1fv,o,n,!0)},set2fv:function(o,n){return this.setUniform1(this.gl.uniform2fv,o,n,!0)},set3fv:function(o,n){return this.setUniform1(this.gl.uniform3fv,o,n,!0)},set4fv:function(o,n){return this.setUniform1(this.gl.uniform4fv,o,n,!0)},set1iv:function(o,n){return this.setUniform1(this.gl.uniform1iv,o,n,!0)},set2iv:function(o,n){return this.setUniform1(this.gl.uniform2iv,o,n,!0)},set3iv:function(o,n){return this.setUniform1(this.gl.uniform3iv,o,n,!0)},set4iv:function(o,n){return this.setUniform1(this.gl.uniform4iv,o,n,!0)},set1i:function(o,n){return this.setUniform1(this.gl.uniform1i,o,n)},set2i:function(o,n,r){return this.setUniform2(this.gl.uniform2i,o,n,r)},set3i:function(o,n,r,f){return this.setUniform3(this.gl.uniform3i,o,n,r,f)},set4i:function(o,n,r,f,a){return this.setUniform4(this.gl.uniform4i,o,n,r,f,a)},setMatrix2fv:function(o,n,r){return this.setUniform2(this.gl.uniformMatrix2fv,o,n,r,!0)},setMatrix3fv:function(o,n,r){return this.setUniform2(this.gl.uniformMatrix3fv,o,n,r,!0)},setMatrix4fv:function(o,n,r){return this.setUniform2(this.gl.uniformMatrix4fv,o,n,r,!0)},createProgram:function(o,n){o===void 0&&(o=this.vertSrc),n===void 0&&(n=this.fragSrc);var r=this.gl;return this.program&&r.deleteProgram(this.program),this.vertSrc=o,this.fragSrc=n,this.program=this.renderer.createProgram(o,n),this.createUniforms(),this.rebind()},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});l.exports=h},71402:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};l.exports=T},55478:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(71402),x=e(98611),u={PipelineManager:e(35217),Pipelines:e(62253),RenderTarget:e(37410),Utils:e(75512),WebGLPipeline:e(44775),WebGLRenderer:e(11857),WebGLShader:e(71305)};u=x(!1,u,d),l.exports=u},5583:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72632),u=e(91679),h=e(89053),o=e(71402),n=e(44775),r=new d({Extends:n,initialize:function(a){a.fragShader=x(a,"fragShader",u),a.vertShader=x(a,"vertShader",h),a.batchSize=x(a,"batchSize",1),a.vertices=x(a,"vertices",[-1,1,-1,-7,7,1]),a.attributes=x(a,"attributes",[{name:"inPosition",size:2,type:o.FLOAT}]),n.call(this,a)},boot:function(){n.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(f,a){n.prototype.resize.call(this,f,a),this.set2f("uResolution",f,a)},beginMask:function(f,a,c){this.renderer.beginBitmapMask(f,c)},endMask:function(f,a,c){var p=this.gl,v=this.renderer,m=f.bitmapMask;m&&p&&(v.drawBitmapMask(m,a,this),c&&this.set2f("uResolution",c.width,c.height),this.set1i("uInvertMaskAlpha",f.invertAlpha),p.drawArrays(this.topology,0,3),c&&this.set2f("uResolution",this.width,this.height),p.bindTexture(p.TEXTURE_2D,null))}});l.exports=r},81828:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(58136),u=e(47406),h=e(72632),o=e(87228),n=e(92462),r=e(75512),f=new d({Extends:o,initialize:function(c){c.shaders=[r.setGlowQuality(n.FXGlowFrag,c.game),n.FXShadowFrag,n.FXPixelateFrag,n.FXVignetteFrag,n.FXShineFrag,n.FXBlurLowFrag,n.FXBlurMedFrag,n.FXBlurHighFrag,n.FXGradientFrag,n.FXBloomFrag,n.ColorMatrixFrag,n.FXCircleFrag,n.FXBarrelFrag,n.FXDisplacementFrag,n.FXWipeFrag,n.FXBokehFrag],o.call(this,c);var p=this.game;this.glow=new x.Glow(p),this.shadow=new x.Shadow(p),this.pixelate=new x.Pixelate(p),this.vignette=new x.Vignette(p),this.shine=new x.Shine(p),this.gradient=new x.Gradient(p),this.circle=new x.Circle(p),this.barrel=new x.Barrel(p),this.wipe=new x.Wipe(p),this.bokeh=new x.Bokeh(p);var v=[];v[u.GLOW]=this.onGlow,v[u.SHADOW]=this.onShadow,v[u.PIXELATE]=this.onPixelate,v[u.VIGNETTE]=this.onVignette,v[u.SHINE]=this.onShine,v[u.BLUR]=this.onBlur,v[u.GRADIENT]=this.onGradient,v[u.BLOOM]=this.onBloom,v[u.COLOR_MATRIX]=this.onColorMatrix,v[u.CIRCLE]=this.onCircle,v[u.BARREL]=this.onBarrel,v[u.DISPLACEMENT]=this.onDisplacement,v[u.WIPE]=this.onWipe,v[u.BOKEH]=this.onBokeh,this.fxHandlers=v,this.source,this.target,this.swap},onDraw:function(a,c,p){this.source=a,this.target=c,this.swap=p;var v=a.width,m=a.height,y=this.tempSprite,P=this.fxHandlers;if(y&&y.preFX)for(var E=y.preFX.list,S=0;S<E.length;S++){var w=E[S];w.active&&P[w.type].call(this,w,v,m)}this.drawToGame(this.source)},runDraw:function(){var a=this.source,c=this.target;this.copy(a,c),this.source=c,this.target=a},onGlow:function(a,c,p){var v=this.shaders[u.GLOW];this.setShader(v),this.glow.onPreRender(a,v,c,p),this.runDraw()},onShadow:function(a){var c=this.shaders[u.SHADOW];this.setShader(c),this.shadow.onPreRender(a,c),this.runDraw()},onPixelate:function(a,c,p){var v=this.shaders[u.PIXELATE];this.setShader(v),this.pixelate.onPreRender(a,v,c,p),this.runDraw()},onVignette:function(a){var c=this.shaders[u.VIGNETTE];this.setShader(c),this.vignette.onPreRender(a,c),this.runDraw()},onShine:function(a,c,p){var v=this.shaders[u.SHINE];this.setShader(v),this.shine.onPreRender(a,v,c,p),this.runDraw()},onBlur:function(a,c,p){var v=h(a,"quality"),m=this.shaders[u.BLUR+v];this.setShader(m),this.set1i("uMainSampler",0),this.set2f("resolution",c,p),this.set1f("strength",h(a,"strength")),this.set3fv("color",h(a,"glcolor"));for(var y=h(a,"x"),P=h(a,"y"),E=h(a,"steps"),S=0;S<E;S++)this.set2f("offset",y,0),this.runDraw(),this.set2f("offset",0,P),this.runDraw()},onGradient:function(a){var c=this.shaders[u.GRADIENT];this.setShader(c),this.gradient.onPreRender(a,c),this.runDraw()},onBloom:function(a,c,p){var v=this.shaders[u.BLOOM];this.copySprite(this.source,this.swap),this.setShader(v),this.set1i("uMainSampler",0),this.set1f("strength",h(a,"blurStrength")),this.set3fv("color",h(a,"glcolor"));for(var m=2/c*h(a,"offsetX"),y=2/p*h(a,"offsetY"),P=h(a,"steps"),E=0;E<P;E++)this.set2f("offset",m,0),this.runDraw(),this.set2f("offset",0,y),this.runDraw();this.blendFrames(this.swap,this.source,this.target,h(a,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(a){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",a.getData()),this.set1f("uAlpha",a.alpha),this.runDraw()},onCircle:function(a,c,p){var v=this.shaders[u.CIRCLE];this.setShader(v),this.circle.onPreRender(a,v,c,p),this.runDraw()},onBarrel:function(a){var c=this.shaders[u.BARREL];this.setShader(c),this.barrel.onPreRender(a,c),this.runDraw()},onDisplacement:function(a){this.setShader(this.shaders[u.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",a.x,a.y),this.bindTexture(a.glTexture,1),this.runDraw()},onWipe:function(a){var c=this.shaders[u.WIPE];this.setShader(c),this.wipe.onPreRender(a,c),this.runDraw()},onBokeh:function(a,c,p){var v=this.shaders[u.BOKEH];this.setShader(v),this.bokeh.onPreRender(a,v,c,p),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,o.prototype.destroy.call(this),this}});l.exports=f},66901:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72632),u=e(65045),h=e(77310),o=e(69360),n=e(93736),r=e(44775),f=new d({Extends:h,initialize:function(c){var p=x(c,"fragShader",u);c.fragShader=p.replace("%LIGHT_COUNT%",c.game.renderer.config.maxLights),h.call(this,c),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new n,this._tempMatrix=new o,this._tempMatrix2=new o},boot:function(){r.prototype.boot.call(this);var a=this.gl,c=a.createTexture();a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,c),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:c}},onRender:function(a,c){var p=a.sys.lights;if(this.lightsActive=!1,!(!p||!p.active)){var v=p.getLights(c),m=v.length;this.lightsActive=!0;var y,P=this.renderer,E=P.height,S=c.matrix,w=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",c.x,c.y,c.rotation,c.zoom),this.set3f("uAmbientLightColor",p.ambientColor.r,p.ambientColor.g,p.ambientColor.b),this.set1i("uLightCount",m),y=0;y<m;y++){var R=v[y].light,A=R.color,O="uLights["+y+"].";S.transformPoint(R.x,R.y,w),this.set2f(O+"position",w.x-c.scrollX*R.scrollFactorX*c.zoom,E-(w.y-c.scrollY*R.scrollFactorY*c.zoom)),this.set3f(O+"color",A.r,A.g,A.b),this.set1f(O+"intensity",R.intensity),this.set1f(O+"radius",R.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(a){if(a!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var c=this.inverseRotationMatrix;if(a){var p=-a,v=Math.cos(p),m=Math.sin(p);c[1]=m,c[3]=-m,c[0]=c[4]=v}else c[0]=c[4]=1,c[1]=c[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,c),this.currentNormalMapRotation=a}},setTexture2D:function(a,c){var p=this.renderer;a===void 0&&(a=p.whiteTexture);var v=this.getNormalMap(c);this.isNewNormalMap(a,v)&&(this.flush(),this.createBatch(a),this.addTextureToBatch(v),this.currentNormalMap=v);var m=0;if(c&&c.parentContainer){var y=c.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);m=y.rotationNormalized}else c&&(m=c.rotation);return this.setNormalMapRotation(m),0},setGameObject:function(a,c){c===void 0&&(c=a.frame);var p=c.glTexture,v=this.getNormalMap(a);if(this.isNewNormalMap(p,v)&&(this.flush(),this.createBatch(p),this.addTextureToBatch(v),this.currentNormalMap=v),a.parentContainer){var m=a.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(m.rotationNormalized)}else this.setNormalMapRotation(a.rotation);return 0},isNewNormalMap:function(a,c){return this.currentTexture!==a||this.currentNormalMap!==c},getNormalMap:function(a){var c;return a?a.displayTexture?c=a.displayTexture.dataSource[a.displayFrame.sourceIndex]:a.texture?c=a.texture.dataSource[a.frame.sourceIndex]:a.tileset&&(Array.isArray(a.tileset)?c=a.tileset[0].image.dataSource[0]:c=a.tileset.image.dataSource[0]):c=this.defaultNormalMap,c||(c=this.defaultNormalMap),c.glTexture},batchSprite:function(a,c,p){this.lightsActive&&h.prototype.batchSprite.call(this,a,c,p)},batchTexture:function(a,c,p,v,m,y,P,E,S,w,R,A,O,F,b,D,I,B,k,U,X,H,N,z,L,G,V,Y,W,$,K,j){this.lightsActive&&h.prototype.batchTexture.call(this,a,c,p,v,m,y,P,E,S,w,R,A,O,F,b,D,I,B,k,U,X,H,N,z,L,G,V,Y,W,$,K,j)},batchTextureFrame:function(a,c,p,v,m,y,P){this.lightsActive&&h.prototype.batchTextureFrame.call(this,a,c,p,v,m,y,P)}});l.exports=f},71264:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72632),u=e(77310),h=e(85060),o=e(18166),n=e(71402),r=e(44775),f=new d({Extends:u,initialize:function(c){c.fragShader=x(c,"fragShader",h),c.vertShader=x(c,"vertShader",o),c.attributes=x(c,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:n.UNSIGNED_BYTE,normalized:!0}]),c.forceZero=!0,u.call(this,c)},boot:function(){r.prototype.boot.call(this),this.set1i("uMainSampler",0)}});l.exports=f},77310:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(11117),u=e(72632),h=e(53787),o=e(15968),n=e(69360),r=e(75512),f=e(71402),a=e(44775),c=new d({Extends:a,initialize:function(v){var m=v.game.renderer,y=u(v,"fragShader",h);v.fragShader=r.parseFragmentShaderMaxTextures(y,m.maxTextures),v.vertShader=u(v,"vertShader",o),v.attributes=u(v,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:f.UNSIGNED_BYTE,normalized:!0}]),a.call(this,v),this._tempMatrix1=new n,this._tempMatrix2=new n,this._tempMatrix3=new n,this.calcMatrix=new n,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){a.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(p,v,m){this.manager.set(this,p);var y=this._tempMatrix1,P=this._tempMatrix2,E=this._tempMatrix3,S=p.frame,w=S.glTexture,R=S.u0,A=S.v0,O=S.u1,F=S.v1,b=S.x,D=S.y,I=S.cutWidth,B=S.cutHeight,k=S.customPivot,U=p.displayOriginX,X=p.displayOriginY,H=-U+b,N=-X+D;if(p.isCropped){var z=p._crop;(z.flipX!==p.flipX||z.flipY!==p.flipY)&&S.updateCropUVs(z,p.flipX,p.flipY),R=z.u0,A=z.v0,O=z.u1,F=z.v1,I=z.width,B=z.height,b=z.x,D=z.y,H=-U+b,N=-X+D}var L=1,G=1;p.flipX&&(k||(H+=-S.realWidth+U*2),L=-1),(p.flipY||S.source.isGLTexture&&!w.flipY)&&(k||(N+=-S.realHeight+X*2),G=-1);var V=p.x,Y=p.y;P.applyITRS(V,Y,p.rotation,p.scaleX*L,p.scaleY*G),y.copyFrom(v.matrix),m?(y.multiplyWithOffset(m,-v.scrollX*p.scrollFactorX,-v.scrollY*p.scrollFactorY),P.e=V,P.f=Y):(P.e-=v.scrollX*p.scrollFactorX,P.f-=v.scrollY*p.scrollFactorY),y.multiply(P,E);var W=E.setQuad(H,N,H+I,N+B,v.roundPixels),$=r.getTintAppendFloatAlpha,K=v.alpha,j=$(p.tintTopLeft,K*p._alphaTL),J=$(p.tintTopRight,K*p._alphaTR),q=$(p.tintBottomLeft,K*p._alphaBL),_=$(p.tintBottomRight,K*p._alphaBR);this.shouldFlush(6)&&this.flush();var et=this.setGameObject(p,S);this.manager.preBatch(p),this.batchQuad(p,W[0],W[1],W[2],W[3],W[4],W[5],W[6],W[7],R,A,O,F,j,J,q,_,p.tintFill,w,et),this.manager.postBatch(p)},batchTexture:function(p,v,m,y,P,E,S,w,R,A,O,F,b,D,I,B,k,U,X,H,N,z,L,G,V,Y,W,$,K,j,J,q){this.manager.set(this,p);var _=this._tempMatrix1,et=this._tempMatrix2,tt=this._tempMatrix3,rt=U/m+W,ft=X/y+$,vt=(U+H)/m+W,ct=(X+N)/y+$,st=S,dt=w,ut=-B,Ct=-k;if(p.isCropped){var Tt=p._crop,Xt=Tt.width,Bt=Tt.height;st=Xt,dt=Bt,S=Xt,w=Bt,U=Tt.x,X=Tt.y;var Ot=U,yt=X;F&&(Ot=H-Tt.x-Xt),b&&(yt=N-Tt.y-Bt),rt=Ot/m+W,ft=yt/y+$,vt=(Ot+Xt)/m+W,ct=(yt+Bt)/y+$,ut=-B+U,Ct=-k+X}b=b^(!J&&v.isRenderTexture?1:0),F&&(st*=-1,ut+=S),b&&(dt*=-1,Ct+=w),et.applyITRS(P,E,O,R,A),_.copyFrom(K.matrix),j?(_.multiplyWithOffset(j,-K.scrollX*D,-K.scrollY*I),et.e=P,et.f=E):(et.e-=K.scrollX*D,et.f-=K.scrollY*I),_.multiply(et,tt);var Gt=tt.setQuad(ut,Ct,ut+st,Ct+dt,K.roundPixels);q===void 0&&(q=this.setTexture2D(v)),p&&this.manager.preBatch(p),this.batchQuad(p,Gt[0],Gt[1],Gt[2],Gt[3],Gt[4],Gt[5],Gt[6],Gt[7],rt,ft,vt,ct,z,L,G,V,Y,v,q),p&&this.manager.postBatch(p)},batchTextureFrame:function(p,v,m,y,P,E,S){this.manager.set(this);var w=this._tempMatrix1.copyFrom(E),R=this._tempMatrix2;S?w.multiply(S,R):R=w;var A=R.setQuad(v,m,v+p.width,m+p.height,!1),O=this.setTexture2D(p.source.glTexture);y=r.getTintAppendFloatAlpha(y,P),this.batchQuad(null,A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7],p.u0,p.v0,p.u1,p.v1,y,y,y,y,0,p.glTexture,O)},batchFillRect:function(p,v,m,y,P,E){this.renderer.pipelines.set(this);var S=this.calcMatrix;E&&E.multiply(P,S);var w=S.setQuad(p,v,p+m,v+y,!1),R=this.fillTint;this.batchQuad(null,w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7],0,0,1,1,R.TL,R.TR,R.BL,R.BR,2)},batchFillTriangle:function(p,v,m,y,P,E,S,w){this.renderer.pipelines.set(this);var R=this.calcMatrix;w&&w.multiply(S,R);var A=R.getX(p,v),O=R.getY(p,v),F=R.getX(m,y),b=R.getY(m,y),D=R.getX(P,E),I=R.getY(P,E),B=this.fillTint;this.batchTri(null,A,O,F,b,D,I,0,0,1,1,B.TL,B.TR,B.BL,2)},batchStrokeTriangle:function(p,v,m,y,P,E,S,w,R){var A=this.tempTriangle;A[0].x=p,A[0].y=v,A[0].width=S,A[1].x=m,A[1].y=y,A[1].width=S,A[2].x=P,A[2].y=E,A[2].width=S,A[3].x=p,A[3].y=v,A[3].width=S,this.batchStrokePath(A,S,!1,w,R)},batchFillPath:function(p,v,m){this.renderer.pipelines.set(this);var y=this.calcMatrix;m&&m.multiply(v,y);for(var P=p.length,E=this.polygonCache,S,w,R=this.fillTint.TL,A=this.fillTint.TR,O=this.fillTint.BL,F=0;F<P;++F)w=p[F],E.push(w.x,w.y);S=x(E),P=S.length;for(var b=0;b<P;b+=3){var D=S[b+0]*2,I=S[b+1]*2,B=S[b+2]*2,k=E[D+0],U=E[D+1],X=E[I+0],H=E[I+1],N=E[B+0],z=E[B+1],L=y.getX(k,U),G=y.getY(k,U),V=y.getX(X,H),Y=y.getY(X,H),W=y.getX(N,z),$=y.getY(N,z);this.batchTri(null,L,G,V,Y,W,$,0,0,1,1,R,A,O,2)}E.length=0},batchStrokePath:function(p,v,m,y,P){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var E=p.length-1,S=0;S<E;S++){var w=p[S],R=p[S+1];this.batchLine(w.x,w.y,R.x,R.y,w.width/2,R.width/2,v,S,!m&&S===E-1,y,P)}},batchLine:function(p,v,m,y,P,E,S,w,R,A,O){this.renderer.pipelines.set(this);var F=this.calcMatrix;O&&O.multiply(A,F);var b=m-p,D=y-v,I=Math.sqrt(b*b+D*D);if(I!==0){var B=P*(y-v)/I,k=P*(p-m)/I,U=E*(y-v)/I,X=E*(p-m)/I,H=m-U,N=y-X,z=p-B,L=v-k,G=m+U,V=y+X,Y=p+B,W=v+k,$=F.getX(H,N),K=F.getY(H,N),j=F.getX(z,L),J=F.getY(z,L),q=F.getX(G,V),_=F.getY(G,V),et=F.getX(Y,W),tt=F.getY(Y,W),rt=this.strokeTint,ft=rt.TL,vt=rt.TR,ct=rt.BL,st=rt.BR;if(this.batchQuad(null,et,tt,j,J,$,K,q,_,0,0,1,1,ft,vt,ct,st,2),!(S<=2)){var dt=this.prevQuad,ut=this.firstQuad;w>0&&dt[4]?this.batchQuad(null,et,tt,j,J,dt[0],dt[1],dt[2],dt[3],0,0,1,1,ft,vt,ct,st,2):(ut[0]=et,ut[1]=tt,ut[2]=j,ut[3]=J,ut[4]=1),R&&ut[4]?this.batchQuad(null,$,K,q,_,ut[0],ut[1],ut[2],ut[3],0,0,1,1,ft,vt,ct,st,2):(dt[0]=$,dt[1]=K,dt[2]=q,dt[3]=_,dt[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,a.prototype.destroy.call(this),this}});l.exports=c},10919:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72632),u=e(83327),h=e(54677),o=e(44775),n=new d({Extends:o,initialize:function(f){f.vertShader=x(f,"vertShader",h),f.fragShader=x(f,"fragShader",u),f.attributes=x(f,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),o.call(this,f)},onRender:function(r,f){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",f.zoom)},batchPointLight:function(r,f,a,c,p,v,m,y,P,E,S,w){var R=r.color,A=r.intensity,O=r.radius,F=r.attenuation,b=R.r*A,D=R.g*A,I=R.b*A,B=f.alpha*r.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(a,c,S,w,O,F,b,D,I,B),this.batchLightVert(p,v,S,w,O,F,b,D,I,B),this.batchLightVert(m,y,S,w,O,F,b,D,I,B),this.batchLightVert(a,c,S,w,O,F,b,D,I,B),this.batchLightVert(m,y,S,w,O,F,b,D,I,B),this.batchLightVert(P,E,S,w,O,F,b,D,I,B),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(r,f,a,c,p,v,m,y,P,E){var S=this.vertexViewF32,w=this.vertexCount*this.currentShader.vertexComponentCount-1;S[++w]=r,S[++w]=f,S[++w]=a,S[++w]=c,S[++w]=p,S[++w]=v,S[++w]=m,S[++w]=y,S[++w]=P,S[++w]=E,this.vertexCount++}});l.exports=n},80486:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(65246),u=e(72632),h=e(12569),o=e(99365),n=e(44775),r=new d({Extends:n,initialize:function(a){a.renderTarget=u(a,"renderTarget",1),a.fragShader=u(a,"fragShader",h),a.vertShader=u(a,"vertShader",o),a.attributes=u(a,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),a.batchSize=1,a.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],n.call(this,a),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new x,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){n.prototype.boot.call(this);var f=this.manager.UTILITY_PIPELINE;this.fullFrame1=f.fullFrame1,this.fullFrame2=f.fullFrame2,this.halfFrame1=f.halfFrame1,this.halfFrame2=f.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(f){this.bindAndDraw(f)},getController:function(f){return f!==void 0?f:this.controller?this.controller:this},copySprite:function(f,a,c){c===void 0&&(c=!1);var p=this.gl;p.activeTexture(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,f.texture);var v=p.getParameter(p.FRAMEBUFFER_BINDING);p.bindFramebuffer(p.FRAMEBUFFER,a.framebuffer),p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,a.texture,0),p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT),p.bufferData(p.ARRAY_BUFFER,this.vertexData,p.STATIC_DRAW),p.drawArrays(p.TRIANGLES,0,6),c&&(p.bindTexture(p.TEXTURE_2D,null),p.bindFramebuffer(p.FRAMEBUFFER,v))},copyFrame:function(f,a,c,p,v){this.manager.copyFrame(f,a,c,p,v)},copyToGame:function(f){this.manager.copyToGame(f)},drawFrame:function(f,a,c){this.manager.drawFrame(f,a,c,this.colorMatrix)},blendFrames:function(f,a,c,p,v){this.manager.blendFrames(f,a,c,p,v)},blendFramesAdditive:function(f,a,c,p,v){this.manager.blendFramesAdditive(f,a,c,p,v)},clearFrame:function(f,a){this.manager.clearFrame(f,a)},blitFrame:function(f,a,c,p,v,m){this.manager.blitFrame(f,a,c,p,v,m)},copyFrameRect:function(f,a,c,p,v,m,y,P){this.manager.copyFrameRect(f,a,c,p,v,m,y,P)},bindAndDraw:function(f,a,c,p,v){c===void 0&&(c=!0),p===void 0&&(p=!0);var m=this.gl,y=this.renderer;this.bind(v),this.set1i("uMainSampler",0),a?(m.viewport(0,0,a.width,a.height),m.bindFramebuffer(m.FRAMEBUFFER,a.framebuffer),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,a.texture,0),c&&(p?m.clearColor(0,0,0,0):m.clearColor(0,0,0,1),m.clear(m.COLOR_BUFFER_BIT))):(y.popFramebuffer(!1,!1),y.currentFramebuffer||m.viewport(0,0,y.width,y.height)),y.restoreStencilMask(),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,f.texture),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),a&&(m.bindTexture(m.TEXTURE_2D,null),m.bindFramebuffer(m.FRAMEBUFFER,y.currentFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,n.prototype.destroy.call(this),this}});l.exports=r},87228:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(95723),x=e(79993),u=e(56694),h=e(37486),o=e(72632),n=e(77310),r=e(12569),f=e(74118),a=e(37410),c=e(85060),p=e(18166),v=e(44775),m=new u({Extends:n,initialize:function(P){var E=o(P,"fragShader",r),S=o(P,"vertShader",p),w=o(P,"drawShader",r),R=[{name:"DrawSprite",fragShader:c,vertShader:p},{name:"CopySprite",fragShader:E,vertShader:S},{name:"DrawGame",fragShader:w,vertShader:p},{name:"ColorMatrix",fragShader:h}],A=o(P,"shaders",[]);P.shaders=R.concat(A),P.vertShader||(P.vertShader=S),P.batchSize=1,n.call(this,P),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new f,this.targetBounds=new f,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){v.prototype.boot.call(this);var y=this.shaders,P=this.renderer;this.drawSpriteShader=y[0],this.copyShader=y[1],this.gameShader=y[2],this.colorMatrixShader=y[3],this.fsTarget=new a(P,P.width,P.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var E=new ArrayBuffer(168);this.quadVertexData=E,this.quadVertexViewF32=new Float32Array(E),this.quadVertexBuffer=P.createVertexBuffer(E,this.gl.STATIC_DRAW),this.onResize(P.width,P.height),this.currentShader=this.copyShader},onResize:function(y,P){var E=this.quadVertexViewF32;E[1]=P,E[22]=P,E[14]=y,E[28]=y,E[35]=y,E[36]=P},batchQuad:function(y,P,E,S,w,R,A,O,F,b,D,I,B,k,U,X,H,N,z){var L=Math.min(P,S,R,O),G=Math.min(E,w,A,F),V=Math.max(P,S,R,O),Y=Math.max(E,w,A,F),W=V-L,$=Y-G,K=this.spriteBounds.setTo(L,G,W,$),j=y?y.preFX.padding:0,J=W+j*2,q=$+j*2,_=Math.abs(Math.max(J,q)),et=this.manager.getRenderTarget(_),tt=this.targetBounds.setTo(0,0,et.width,et.height);x(tt,K.centerX,K.centerY),this.tempSprite=y;var rt=this.gl,ft=this.renderer;ft.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.flipProjectionMatrix(!0),y&&(this.onDrawSprite(y,et),y.preFX.onFX(this));var vt=this.fsTarget;return this.flush(),rt.viewport(0,0,ft.width,ft.height),rt.bindFramebuffer(rt.FRAMEBUFFER,vt.framebuffer),rt.framebufferTexture2D(rt.FRAMEBUFFER,rt.COLOR_ATTACHMENT0,rt.TEXTURE_2D,vt.texture,0),rt.clearColor(0,0,0,0),rt.clear(rt.COLOR_BUFFER_BIT),this.setTexture2D(z),this.batchVert(P,E,b,D,0,N,k),this.batchVert(S,w,b,B,0,N,X),this.batchVert(R,A,I,B,0,N,H),this.batchVert(P,E,b,D,0,N,k),this.batchVert(R,A,I,B,0,N,H),this.batchVert(O,F,I,D,0,N,U),this.flush(),this.flipProjectionMatrix(!1),rt.activeTexture(rt.TEXTURE0),rt.bindTexture(rt.TEXTURE_2D,et.texture),rt.copyTexSubImage2D(rt.TEXTURE_2D,0,0,0,tt.x,tt.y,tt.width,tt.height),rt.bindFramebuffer(rt.FRAMEBUFFER,null),rt.bindTexture(rt.TEXTURE_2D,null),this.onBatch(y),this.currentShader=this.copyShader,this.onDraw(et,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(y,P,E,S,w,R,A){E===void 0&&(E=!0),S===void 0&&(S=!0),w===void 0&&(w=!1),A===void 0&&(A=this.copyShader);var O=this.gl,F=this.tempSprite;R&&(A=this.colorMatrixShader),this.currentShader=A;var b=this.setVertexBuffer(this.quadVertexBuffer);if(A.bind(b,!1),this.set1i("uMainSampler",0),F.preFX.onFXCopy(this),this.onCopySprite(y,P,F),R&&(this.set1fv("uColorMatrix",R.getData()),this.set1f("uAlpha",R.alpha)),O.activeTexture(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,y.texture),y.height>P.height)O.viewport(0,0,y.width,y.height),this.setTargetUVs(y,P);else{var D=P.height-y.height;O.viewport(0,D,y.width,y.height),this.resetUVs()}if(O.bindFramebuffer(O.FRAMEBUFFER,P.framebuffer),O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,P.texture,0),E&&(O.clearColor(0,0,0,+!S),O.clear(O.COLOR_BUFFER_BIT)),w){var I=this.renderer.currentBlendMode;this.renderer.setBlendMode(d.ERASE)}O.bufferData(O.ARRAY_BUFFER,this.quadVertexData,O.STATIC_DRAW),O.drawArrays(O.TRIANGLES,0,6),w&&this.renderer.setBlendMode(I),O.bindFramebuffer(O.FRAMEBUFFER,null)},copy:function(y,P){var E=this.gl;this.set1i("uMainSampler",0),E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,y.texture),E.viewport(0,0,y.width,y.height),this.setUVs(0,0,0,1,1,1,1,0),E.bindFramebuffer(E.FRAMEBUFFER,P.framebuffer),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,P.texture,0),E.clearColor(0,0,0,0),E.clear(E.COLOR_BUFFER_BIT),E.bufferData(E.ARRAY_BUFFER,this.quadVertexData,E.STATIC_DRAW),E.drawArrays(E.TRIANGLES,0,6),E.bindFramebuffer(E.FRAMEBUFFER,null)},blendFrames:function(y,P,E,S,w){this.manager.blendFrames(y,P,E,S,w)},blendFramesAdditive:function(y,P,E,S,w){this.manager.blendFramesAdditive(y,P,E,S,w)},drawToGame:function(y){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(y)},copyToGame:function(y){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(y)},bindAndDraw:function(y){var P=this.gl,E=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(y.texture);var S=this._tempMatrix1.loadIdentity(),w=this.targetBounds.x,R=this.targetBounds.y,A=w+y.width,O=R+y.height,F=S.getX(w,R),b=S.getX(w,O),D=S.getX(A,O),I=S.getX(A,R),B=S.getY(w,R),k=S.getY(w,O),U=S.getY(A,O),X=S.getY(A,R),H=16777215;this.batchVert(F,B,0,0,0,0,H),this.batchVert(b,k,0,1,0,0,H),this.batchVert(D,U,1,1,0,0,H),this.batchVert(F,B,0,0,0,0,H),this.batchVert(D,U,1,1,0,0,H),this.batchVert(I,X,1,0,0,0,H),E.restoreFramebuffer(!1,!0),E.currentFramebuffer||P.viewport(0,0,E.width,E.height),E.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(y){this.drawToGame(y)},setUVs:function(y,P,E,S,w,R,A,O){var F=this.quadVertexViewF32;F[2]=y,F[3]=P,F[9]=E,F[10]=S,F[16]=w,F[17]=R,F[23]=y,F[24]=P,F[30]=w,F[31]=R,F[37]=A,F[38]=O},setTargetUVs:function(y,P){var E=P.height/y.height;E>.5?E=.5-(E-.5):E=.5+(.5-E),this.setUVs(0,E,0,1+E,1,1+E,1,E)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.gl.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,n.prototype.destroy.call(this),this}});l.exports=m},21213:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72632),u=e(77310),h=new d({Extends:u,initialize:function(n){n.topology=5,n.batchSize=x(n,"batchSize",256),u.call(this,n)}});l.exports=h},51212:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72632),u=e(77310),h=e(85060),o=e(18166),n=e(44775),r=new d({Extends:u,initialize:function(a){a.fragShader=x(a,"fragShader",h),a.vertShader=x(a,"vertShader",o),a.forceZero=!0,u.call(this,a)},boot:function(){n.prototype.boot.call(this),this.set1i("uMainSampler",0)}});l.exports=r},60848:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(2529),x=e(95723),u=e(56694),h=e(65246),o=e(37486),n=e(79060),r=e(72632),f=e(98921),a=e(99365),c=e(44775),p=new u({Extends:c,initialize:function(m){m.renderTarget=r(m,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),m.vertShader=r(m,"vertShader",a),m.shaders=r(m,"shaders",[{name:"Copy",fragShader:n},{name:"AddBlend",fragShader:d},{name:"LinearBlend",fragShader:f},{name:"ColorMatrix",fragShader:o}]),m.attributes=r(m,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),m.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],m.batchSize=1,c.call(this,m),this.colorMatrix=new h,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){c.prototype.boot.call(this);var v=this.shaders,m=this.renderTargets;this.copyShader=v[0],this.addShader=v[1],this.linearShader=v[2],this.colorMatrixShader=v[3],this.fullFrame1=m[0],this.fullFrame2=m[1],this.halfFrame1=m[2],this.halfFrame2=m[3]},copyFrame:function(v,m,y,P,E){y===void 0&&(y=1),P===void 0&&(P=!0),E===void 0&&(E=!0);var S=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",y),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,v.texture),m?(S.viewport(0,0,m.width,m.height),S.bindFramebuffer(S.FRAMEBUFFER,m.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,m.texture,0)):S.viewport(0,0,v.width,v.height),P&&(E?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT)),S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null)},blitFrame:function(v,m,y,P,E,S,w){y===void 0&&(y=1),P===void 0&&(P=!0),E===void 0&&(E=!0),S===void 0&&(S=!1),w===void 0&&(w=!1);var R=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",y),R.activeTexture(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,v.texture),v.height>m.height)R.viewport(0,0,v.width,v.height),this.setTargetUVs(v,m);else{var A=m.height-v.height;R.viewport(0,A,v.width,v.height)}if(R.bindFramebuffer(R.FRAMEBUFFER,m.framebuffer),R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,m.texture,0),P&&(E?R.clearColor(0,0,0,0):R.clearColor(0,0,0,1),R.clear(R.COLOR_BUFFER_BIT)),S){var O=this.renderer.currentBlendMode;this.renderer.setBlendMode(x.ERASE)}w&&this.flipY(),R.bufferData(R.ARRAY_BUFFER,this.vertexData,R.STATIC_DRAW),R.drawArrays(R.TRIANGLES,0,6),S&&this.renderer.setBlendMode(O),R.bindFramebuffer(R.FRAMEBUFFER,null),R.bindTexture(R.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(v,m,y,P,E,S,w,R){w===void 0&&(w=!0),R===void 0&&(R=!0);var A=this.gl;A.bindFramebuffer(A.FRAMEBUFFER,v.framebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,v.texture,0),w&&(R?A.clearColor(0,0,0,0):A.clearColor(0,0,0,1),A.clear(A.COLOR_BUFFER_BIT)),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,m.texture),A.copyTexSubImage2D(A.TEXTURE_2D,0,0,0,y,P,E,S),A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindTexture(A.TEXTURE_2D,null)},copyToGame:function(v){var m=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,v.texture),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6)},drawFrame:function(v,m,y,P){y===void 0&&(y=!0),P===void 0&&(P=this.colorMatrix);var E=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",P.getData()),this.set1f("uAlpha",P.alpha),E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,v.texture),m?(E.viewport(0,0,m.width,m.height),E.bindFramebuffer(E.FRAMEBUFFER,m.framebuffer),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,m.texture,0)):E.viewport(0,0,v.width,v.height),y?E.clearColor(0,0,0,0):E.clearColor(0,0,0,1),E.clear(E.COLOR_BUFFER_BIT),E.bufferData(E.ARRAY_BUFFER,this.vertexData,E.STATIC_DRAW),E.drawArrays(E.TRIANGLES,0,6),E.bindFramebuffer(E.FRAMEBUFFER,null),E.bindTexture(E.TEXTURE_2D,null)},blendFrames:function(v,m,y,P,E,S){P===void 0&&(P=1),E===void 0&&(E=!0),S===void 0&&(S=this.linearShader);var w=this.gl;this.setShader(S),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",P),w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,v.texture),w.activeTexture(w.TEXTURE1),w.bindTexture(w.TEXTURE_2D,m.texture),y?(w.bindFramebuffer(w.FRAMEBUFFER,y.framebuffer),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,y.texture,0),w.viewport(0,0,y.width,y.height)):w.viewport(0,0,v.width,v.height),E?w.clearColor(0,0,0,0):w.clearColor(0,0,0,1),w.clear(w.COLOR_BUFFER_BIT),w.bufferData(w.ARRAY_BUFFER,this.vertexData,w.STATIC_DRAW),w.drawArrays(w.TRIANGLES,0,6),w.bindFramebuffer(w.FRAMEBUFFER,null),w.bindTexture(w.TEXTURE_2D,null)},blendFramesAdditive:function(v,m,y,P,E){this.blendFrames(v,m,y,P,E,this.addShader)},clearFrame:function(v,m){m===void 0&&(m=!0);var y=this.gl;y.viewport(0,0,v.width,v.height),y.bindFramebuffer(y.FRAMEBUFFER,v.framebuffer),m?y.clearColor(0,0,0,0):y.clearColor(0,0,0,1),y.clear(y.COLOR_BUFFER_BIT);var P=this.renderer.currentFramebuffer;y.bindFramebuffer(y.FRAMEBUFFER,P)},setUVs:function(v,m,y,P,E,S,w,R){var A=this.vertexViewF32;A[2]=v,A[3]=m,A[6]=y,A[7]=P,A[10]=E,A[11]=S,A[14]=v,A[15]=m,A[18]=E,A[19]=S,A[22]=w,A[23]=R},setTargetUVs:function(v,m){var y=m.height/v.height;y>.5?y=.5-(y-.5):y=.5+(.5-y),this.setUVs(0,y,0,1+y,1,1+y,1,y)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});l.exports=p},65641:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};l.exports=T},68726:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pipelineafterflush"},67186:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pipelinebeforeflush"},22709:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pipelinebind"},74469:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pipelineboot"},93953:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pipelinedestroy"},51687:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pipelinerebind"},25034:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pipelineresize"},18970:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={AFTER_FLUSH:e(68726),BEFORE_FLUSH:e(67186),BIND:e(22709),BOOT:e(74469),DESTROY:e(93953),REBIND:e(51687),RESIZE:e(25034)}},32469:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(87751),u=e(80486),h=new d({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.amount=1},onPreRender:function(o,n){o=this.getController(o),this.set1f("amount",o.amount,n)}});l.exports=h},2134:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(88222),u=e(80486),h=new d({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(o){o=this.getController(o),this.set1f("strength",o.blurStrength),this.set3fv("color",o.glcolor)},onDraw:function(o){var n=this.getController(),r=this.fullFrame1,f=this.fullFrame2;this.copyFrame(o,f);for(var a=2/o.width*n.offsetX,c=2/o.height*n.offsetY,p=0;p<n.steps;p++)this.set2f("offset",a,0),this.copySprite(o,r),this.set2f("offset",0,c),this.copySprite(r,o);this.blendFrames(f,o,r,n.strength),this.copyToGame(r)}});l.exports=h},63377:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(35491),u=e(75568),h=e(44481),o=e(80486),n=new d({Extends:o,initialize:function(f){o.call(this,{game:f,shaders:[{name:"Gaussian5",fragShader:x},{name:"Gaussian9",fragShader:u},{name:"Gaussian13",fragShader:h}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(r){var f=this.getController(),a=this.gl,c=this.fullFrame1,p=a.getParameter(a.FRAMEBUFFER_BINDING);this.bind(this.activeShader),a.activeTexture(a.TEXTURE0),a.viewport(0,0,r.width,r.height),this.set1i("uMainSampler",0),this.set2f("resolution",r.width,r.height),this.set1f("strength",f.strength),this.set3fv("color",f.glcolor);for(var v=0;v<f.steps;v++)this.set2f("offset",f.x,0),this.copySprite(r,c),this.set2f("offset",0,f.y),this.copySprite(c,r);a.bindFramebuffer(a.FRAMEBUFFER,p),a.bindTexture(a.TEXTURE_2D,null),this.copyToGame(r)}});l.exports=n},49745:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(69960),u=e(80486),h=new d({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(o,n,r,f){o=this.getController(o),this.set1f("radius",o.radius,n),this.set1f("amount",o.amount,n),this.set1f("contrast",o.contrast,n),this.set1f("strength",o.strength,n),this.set2f("blur",o.blurX,o.blurY,n),this.setBoolean("isTiltShift",o.isTiltShift,n),r&&f&&this.set2f("resolution",r,f,n)},onDraw:function(o){this.set2f("resolution",o.width,o.height),this.bindAndDraw(o)}});l.exports=h},4323:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(33754),u=e(80486),h=new d({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(o,n,r,f){o=this.getController(o),this.set1f("scale",o.scale,n),this.set1f("feather",o.feather,n),this.set1f("thickness",o.thickness,n),this.set3fv("color",o.glcolor,n),this.set4fv("backgroundColor",o.glcolor2,n),r&&f&&this.set2f("resolution",r,f,n)},onDraw:function(o){this.set2f("resolution",o.width,o.height),this.bindAndDraw(o)}});l.exports=h},92066:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(80486),u=new d({Extends:x,initialize:function(o){x.call(this,{game:o})},onDraw:function(h){var o=this.fullFrame1;this.controller?this.manager.drawFrame(h,o,!0,this.controller):this.drawFrame(h,o),this.copyToGame(o)}});l.exports=u},89581:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(35668),u=e(80486),h=new d({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(o){var n=this.game.textures.getFrame(o);n&&(this.glTexture=n.glTexture)},onDraw:function(o){var n=this.getController(),r=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",n.x,n.y),this.bindTexture(n.glTexture,1),this.copySprite(o,r),this.copyToGame(r)}});l.exports=h},55084:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72632),u=e(69675),h=e(80486),o=e(75512),n=new d({Extends:h,initialize:function(f,a){var c=x(a,"quality",.1),p=x(a,"distance",10);h.call(this,{game:f,fragShader:o.setGlowQuality(u,f,c,p)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(r,f,a,c){r=this.getController(r),this.set1f("outerStrength",r.outerStrength,f),this.set1f("innerStrength",r.innerStrength,f),this.set4fv("glowColor",r.glcolor,f),this.setBoolean("knockout",r.knockout,f),a&&c&&this.set2f("resolution",a,c,f)},onDraw:function(r){this.set2f("resolution",r.width,r.height),this.bindAndDraw(r)}});l.exports=n},41653:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(90993),u=e(80486),h=new d({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(o,n){o=this.getController(o),this.set1f("alpha",o.alpha,n),this.set1i("size",o.size,n),this.set3fv("color1",o.glcolor1,n),this.set3fv("color2",o.glcolor2,n),this.set2f("positionFrom",o.fromX,o.fromY,n),this.set2f("positionTo",o.toX,o.toY,n)}});l.exports=h},73416:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(37945),u=e(80486),h=new d({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.amount=1},onPreRender:function(o,n,r,f){o=this.getController(o),this.set1f("amount",o.amount,n),r&&f&&this.set2f("resolution",r,f,n)},onDraw:function(o){this.set2f("resolution",o.width,o.height),this.bindAndDraw(o)}});l.exports=h},58049:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(85718),u=e(80486),h=new d({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(o,n){o=this.getController(o);var r=o.samples;this.set1i("samples",r,n),this.set1f("intensity",o.intensity,n),this.set1f("decay",o.decay,n),this.set1f("power",o.power/r,n),this.set2f("lightPosition",o.x,o.y,n),this.set4fv("color",o.glcolor,n)}});l.exports=h},18026:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(13740),u=e(80486),h=new d({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(o,n,r,f){o=this.getController(o),this.setTime("time",n),this.set1f("speed",o.speed,n),this.set1f("lineWidth",o.lineWidth,n),this.set1f("gradient",o.gradient,n),this.setBoolean("reveal",o.reveal,n),r&&f&&this.set2f("resolution",r,f,n)},onDraw:function(o){this.set2f("resolution",o.width,o.height),this.bindAndDraw(o)}});l.exports=h},72381:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(80617),u=e(80486),h=new d({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(o,n){o=this.getController(o),this.set1f("radius",o.radius,n),this.set1f("strength",o.strength,n),this.set2f("position",o.x,o.y,n)}});l.exports=h},80542:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(62879),u=e(80486),h=new d({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(o,n){o=this.getController(o);var r=o.progress,f=o.wipeWidth,a=o.direction,c=o.axis;this.set4f("config",r,f,a,c,n),this.setBoolean("reveal",o.reveal,n)}});l.exports=h},58136:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={Barrel:e(32469),Bloom:e(2134),Blur:e(63377),Bokeh:e(49745),Circle:e(4323),ColorMatrix:e(92066),Displacement:e(89581),Glow:e(55084),Gradient:e(41653),Pixelate:e(73416),Shadow:e(58049),Shine:e(18026),Vignette:e(72381),Wipe:e(80542)};l.exports=d},62253:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(65641),x=e(98611),u={FX:e(58136),BitmapMaskPipeline:e(5583),Events:e(18970),FXPipeline:e(81828),LightPipeline:e(66901),MobilePipeline:e(71264),MultiPipeline:e(77310),PointLightPipeline:e(10919),PostFXPipeline:e(80486),PreFXPipeline:e(87228),RopePipeline:e(21213),SinglePipeline:e(51212),UtilityPipeline:e(60848)};u=x(!1,u,d),l.exports=u},2529:l=>{l.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)},91679:l=>{l.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)},89053:l=>{l.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)},37486:l=>{l.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)},79060:l=>{l.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)},87751:l=>{l.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)},88222:l=>{l.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)},44481:l=>{l.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},35491:l=>{l.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},75568:l=>{l.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},69960:l=>{l.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)},33754:l=>{l.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)},35668:l=>{l.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)},69675:l=>{l.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)},90993:l=>{l.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)},37945:l=>{l.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)},85718:l=>{l.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)},13740:l=>{l.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)},80617:l=>{l.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)},62879:l=>{l.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)},65045:l=>{l.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)},98921:l=>{l.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)},25005:l=>{l.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)},94914:l=>{l.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)},11263:l=>{l.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},51852:l=>{l.exports=["#define SHADER_NAME PHASER_MOBILE_VS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},53787:l=>{l.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},15968:l=>{l.exports=["#define SHADER_NAME PHASER_MULTI_VS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},83327:l=>{l.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)},54677:l=>{l.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)},12569:l=>{l.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)},99365:l=>{l.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)},85060:l=>{l.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},18166:l=>{l.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},92462:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={AddBlendFrag:e(2529),BitmapMaskFrag:e(91679),BitmapMaskVert:e(89053),ColorMatrixFrag:e(37486),CopyFrag:e(79060),FXBarrelFrag:e(87751),FXBloomFrag:e(88222),FXBlurHighFrag:e(44481),FXBlurLowFrag:e(35491),FXBlurMedFrag:e(75568),FXBokehFrag:e(69960),FXCircleFrag:e(33754),FXDisplacementFrag:e(35668),FXGlowFrag:e(69675),FXGradientFrag:e(90993),FXPixelateFrag:e(37945),FXShadowFrag:e(85718),FXShineFrag:e(13740),FXVignetteFrag:e(80617),FXWipeFrag:e(62879),LightFrag:e(65045),LinearBlendFrag:e(98921),MeshFrag:e(25005),MeshVert:e(94914),MobileFrag:e(11263),MobileVert:e(51852),MultiFrag:e(53787),MultiVert:e(15968),PointLightFrag:e(83327),PointLightVert:e(54677),PostFXFrag:e(12569),QuadVert:e(99365),SingleFrag:e(85060),SingleVert:e(18166)}},756:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(55301),x=e(56694),u=e(6659),h=e(40444),o=e(97081),n=e(74181),r=e(2893),f=e(9229),a=e(72283),c=e(74118),p=e(90881),v=e(84314),m=e(93736),y=e(47751),P=new x({Extends:u,initialize:function(S){u.call(this),this.game=S,this.canvas,this.canvasBounds=new c,this.parent=null,this.parentIsWindow=!1,this.parentSize=new p,this.gameSize=new p,this.baseSize=new p,this.displaySize=new p,this.scaleMode=d.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new m(1,1),this.autoRound=!1,this.autoCenter=d.CENTER.NO_CENTER,this.orientation=d.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:a,windowResize:a,fullScreenChange:a,fullScreenError:a}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(o.BOOT,this.boot,this)},boot:function(){var E=this.game;this.canvas=E.canvas,this.fullscreen=E.device.fullscreen,this.scaleMode!==d.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===d.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),E.events.on(o.PRE_STEP,this.step,this),E.events.once(o.READY,this.refresh,this),E.events.once(o.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(E){this.getParent(E),this.getParentBounds();var S=E.width,w=E.height,R=E.scaleMode,A=E.zoom,O=E.autoRound;if(typeof S=="string"){var F=this.parentSize.width;F===0&&(F=window.innerWidth);var b=parseInt(S,10)/100;S=Math.floor(F*b)}if(typeof w=="string"){var D=this.parentSize.height;D===0&&(D=window.innerHeight);var I=parseInt(w,10)/100;w=Math.floor(D*I)}this.scaleMode=R,this.autoRound=O,this.autoCenter=E.autoCenter,this.resizeInterval=E.resizeInterval,O&&(S=Math.floor(S),w=Math.floor(w)),this.gameSize.setSize(S,w),A===d.ZOOM.MAX_ZOOM&&(A=this.getMaxZoom()),this.zoom=A,A!==1&&(this._resetZoom=!0),this.baseSize.setSize(S,w),O&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),E.minWidth>0&&this.displaySize.setMin(E.minWidth*A,E.minHeight*A),E.maxWidth>0&&this.displaySize.setMax(E.maxWidth*A,E.maxHeight*A),this.displaySize.setSize(S,w),this.orientation=f(S,w)},getParent:function(E){var S=E.parent;if(S!==null){if(this.parent=r(S),this.parentIsWindow=this.parent===document.body,E.expandParent&&E.scaleMode!==d.SCALE_MODE.NONE){var w=this.parent.getBoundingClientRect();(this.parentIsWindow||w.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",w=this.parent.getBoundingClientRect(),!this.parentIsWindow&&w.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}E.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=r(E.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var E=this.parentSize,S=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(S.height=n(!0));var w=S.width,R=S.height;if(E.width!==w||E.height!==R)return E.setSize(w,R),!0;if(this.canvas){var A=this.canvasBounds,O=this.canvas.getBoundingClientRect();if(O.x!==A.x||O.y!==A.y)return!0}return!1},lockOrientation:function(E){var S=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return S?S.call(screen,E):!1},setParentSize:function(E,S){return this.parentSize.setSize(E,S),this.refresh()},setGameSize:function(E,S){var w=this.autoRound;w&&(E=Math.floor(E),S=Math.floor(S));var R=this.width,A=this.height;return this.gameSize.resize(E,S),this.baseSize.resize(E,S),w&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(E/S),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(R,A)},resize:function(E,S){var w=this.zoom,R=this.autoRound;R&&(E=Math.floor(E),S=Math.floor(S));var A=this.width,O=this.height;this.gameSize.resize(E,S),this.baseSize.resize(E,S),R&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(E*w,S*w),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var F=this.canvas.style,b=E*w,D=S*w;return R&&(b=Math.floor(b),D=Math.floor(D)),(b!==E||D!==S)&&(F.width=b+"px",F.height=D+"px"),this.refresh(A,O)},setZoom:function(E){return this.zoom=E,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(E,S){E===void 0&&(E=this.width),S===void 0&&(S=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var w=this.game.domContainer;if(w){this.baseSize.setCSS(w);var R=this.canvas.style,A=w.style;A.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",A.marginLeft=R.marginLeft,A.marginTop=R.marginTop}return this.emit(h.RESIZE,this.gameSize,this.baseSize,this.displaySize,E,S),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var E=f(this.width,this.height);E!==this.orientation&&(this.orientation=E,this.emit(h.ORIENTATION_CHANGE,E))}},updateScale:function(){var E=this.canvas.style,S=this.gameSize.width,w=this.gameSize.height,R,A,O=this.zoom,F=this.autoRound;this.scaleMode===d.SCALE_MODE.NONE?(this.displaySize.setSize(S*O,w*O),R=this.displaySize.width,A=this.displaySize.height,F&&(R=Math.floor(R),A=Math.floor(A)),this._resetZoom&&(E.width=R+"px",E.height=A+"px",this._resetZoom=!1)):this.scaleMode===d.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),R=this.displaySize.width,A=this.displaySize.height,F&&(R=Math.floor(R),A=Math.floor(A)),this.canvas.width=R,this.canvas.height=A):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),R=this.displaySize.width,A=this.displaySize.height,F&&(R=Math.floor(R),A=Math.floor(A)),E.width=R+"px",E.height=A+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var E=v(this.parentSize.width,this.gameSize.width,0,!0),S=v(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(E,S),1)},updateCenter:function(){var E=this.autoCenter;if(E!==d.CENTER.NO_CENTER){var S=this.canvas,w=S.style,R=S.getBoundingClientRect(),A=R.width,O=R.height,F=Math.floor((this.parentSize.width-A)/2),b=Math.floor((this.parentSize.height-O)/2);E===d.CENTER.CENTER_HORIZONTALLY?b=0:E===d.CENTER.CENTER_VERTICALLY&&(F=0),w.marginLeft=F+"px",w.marginTop=b+"px"}},updateBounds:function(){var E=this.canvasBounds,S=this.canvas.getBoundingClientRect();E.x=S.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),E.y=S.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),E.width=S.width,E.height=S.height},transformX:function(E){return(E-this.canvasBounds.left)*this.displayScale.x},transformY:function(E){return(E-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(E){E===void 0&&(E={navigationUI:"hide"});var S=this.fullscreen;if(!S.available){this.emit(h.FULLSCREEN_UNSUPPORTED);return}if(!S.active){var w=this.getFullscreenTarget();S.keyboard?w[S.request](Element.ALLOW_KEYBOARD_INPUT):w[S.request](E)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(h.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(E){this.removeFullscreenTarget(),this.emit(h.FULLSCREEN_FAILED,E)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var E=document.createElement("div");E.style.margin="0",E.style.padding="0",E.style.width="100%",E.style.height="100%",this.fullscreenTarget=E,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var S=this.canvas.parentNode;S.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var E=this.fullscreenTarget;if(E&&E.parentNode){var S=E.parentNode;S.insertBefore(this.canvas,E),S.removeChild(E)}}},stopFullscreen:function(){var E=this.fullscreen;if(!E.available)return this.emit(h.FULLSCREEN_UNSUPPORTED),!1;E.active&&document[E.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(h.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(E){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(E)},startListeners:function(){var E=this,S=this.domlisteners;if(S.orientationChange=function(){E.updateBounds(),E._checkOrientation=!0,E.dirty=!0},S.windowResize=function(){E.updateBounds(),E.dirty=!0},window.addEventListener("orientationchange",S.orientationChange,!1),window.addEventListener("resize",S.windowResize,!1),this.fullscreen.available){S.fullScreenChange=function(R){return E.onFullScreenChange(R)},S.fullScreenError=function(R){return E.onFullScreenError(R)};var w=["webkit","moz",""];w.forEach(function(R){document.addEventListener(R+"fullscreenchange",S.fullScreenChange,!1),document.addEventListener(R+"fullscreenerror",S.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",S.fullScreenChange,!1),document.addEventListener("MSFullscreenError",S.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(E,S){E instanceof y||(S=E,E=void 0),S===void 0&&(S=new c);var w=this.baseSize,R=this.parentSize,A=this.canvasBounds,O=this.displayScale,F=A.x>=0?0:-(A.x*O.x),b=A.y>=0?0:-(A.y*O.y),D;R.width>=A.width?D=w.width:D=w.width-(A.width-R.width)*O.x;var I;return R.height>=A.height?I=w.height:I=w.height-(A.height-R.height)*O.y,S.setTo(F,b,D,I),E&&(S.width/=E.zoomX,S.height/=E.zoomY,S.centerX=E.centerX+E.scrollX,S.centerY=E.centerY+E.scrollY),S},step:function(E,S){this.parent&&(this._lastCheck+=S,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var E=this.domlisteners;window.removeEventListener("orientationchange",E.orientationChange,!1),window.removeEventListener("resize",E.windowResize,!1);var S=["webkit","moz",""];S.forEach(function(w){document.removeEventListener(w+"fullscreenchange",E.fullScreenChange,!1),document.removeEventListener(w+"fullscreenerror",E.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",E.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",E.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===d.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===d.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});l.exports=P},35098:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},53539:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},12637:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},10217:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},55301:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={CENTER:e(35098),ORIENTATION:e(53539),SCALE_MODE:e(12637),ZOOM:e(10217)};l.exports=d},82085:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="enterfullscreen"},11826:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="fullscreenfailed"},56691:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="fullscreenunsupported"},34739:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="leavefullscreen"},26681:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="orientationchange"},11428:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="resize"},40444:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={ENTER_FULLSCREEN:e(82085),FULLSCREEN_FAILED:e(11826),FULLSCREEN_UNSUPPORTED:e(56691),LEAVE_FULLSCREEN:e(34739),ORIENTATION_CHANGE:e(26681),RESIZE:e(11428)}},86754:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(98611),x=e(55301),u={Center:e(35098),Events:e(40444),Orientation:e(53539),ScaleManager:e(756),ScaleModes:e(12637),Zoom:e(10217)};u=d(!1,u,x.CENTER),u=d(!1,u,x.ORIENTATION),u=d(!1,u,x.SCALE_MODE),u=d(!1,u,x.ZOOM),l.exports=u},47736:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72632),x=e(40587),u=function(h){var o=h.game.config.defaultPhysicsSystem,n=d(h.settings,"physics",!1);if(!(!o&&!n)){var r=[];if(o&&r.push(x(o+"Physics")),n)for(var f in n)f=x(f.concat("Physics")),r.indexOf(f)===-1&&r.push(f);return r}};l.exports=u},91088:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72632),x=function(u){var h=u.plugins.getDefaultScenePlugins(),o=d(u.settings,"plugins",!1);return Array.isArray(o)?o:h||[]};l.exports=x},90415:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};l.exports=T},87157:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(63946),u=new d({initialize:function(o){this.sys=new x(this,o),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});l.exports=u},13553:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(92980),u=e(7599),h=e(97081),o=e(10850),n=e(683),r=e(72283),f=e(87157),a=e(63946),c=new d({initialize:function(v,m){if(this.game=v,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,m){Array.isArray(m)||(m=[m]);for(var y=0;y<m.length;y++)this._pending.push({key:"default",scene:m[y],autoStart:y===0,data:{}})}v.events.once(h.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new f);var p,v,m,y;for(p=0;p<this._pending.length;p++){v=this._pending[p],m=v.key,y=v.scene;var P;y instanceof f?P=this.createSceneFromInstance(m,y):typeof y=="object"?P=this.createSceneFromObject(m,y):typeof y=="function"&&(P=this.createSceneFromFunction(m,y)),m=P.sys.settings.key,this.keys[m]=P,this.scenes.push(P),this._data[m]&&(P.sys.settings.data=this._data[m].data,this._data[m].autoStart&&(v.autoStart=!0)),(v.autoStart||P.sys.settings.active)&&this._start.push(m)}for(this._pending.length=0,this._data={},this.isBooted=!0,p=0;p<this._start.length;p++)v=this._start[p],this.start(v);this._start.length=0}},processQueue:function(){var p=this._pending.length,v=this._queue.length;if(!(p===0&&v===0)){var m,y;if(p){for(m=0;m<p;m++)y=this._pending[m],this.add(y.key,y.scene,y.autoStart,y.data);for(m=0;m<this._start.length;m++)y=this._start[m],this.start(y);this._start.length=0,this._pending.length=0}for(m=0;m<this._queue.length;m++)y=this._queue[m],this[y.op](y.keyA,y.keyB);this._queue.length=0}},add:function(p,v,m,y){if(m===void 0&&(m=!1),y===void 0&&(y={}),this.isProcessing||!this.isBooted)return this._pending.push({key:p,scene:v,autoStart:m,data:y}),this.isBooted||(this._data[p]={data:y}),null;p=this.getKey(p,v);var P;return v instanceof f?P=this.createSceneFromInstance(p,v):typeof v=="object"?(v.key=p,P=this.createSceneFromObject(p,v)):typeof v=="function"&&(P=this.createSceneFromFunction(p,v)),P.sys.settings.data=y,p=P.sys.settings.key,this.keys[p]=P,this.scenes.push(P),(m||P.sys.settings.active)&&(this._pending.length?this._start.push(p):this.start(p)),P},remove:function(p){if(this.isProcessing)this._queue.push({op:"remove",keyA:p,keyB:null});else{var v=this.getScene(p);if(!v||v.sys.isTransitioning())return this;var m=this.scenes.indexOf(v),y=v.sys.settings.key;m>-1&&(delete this.keys[y],this.scenes.splice(m,1),this._start.indexOf(y)>-1&&(m=this._start.indexOf(y),this._start.splice(m,1)),v.sys.destroy())}return this},bootScene:function(p){var v=p.sys,m=v.settings;v.sceneUpdate=r,p.init&&(p.init.call(p,m.data),m.status=x.INIT,m.isTransition&&v.events.emit(u.TRANSITION_INIT,m.transitionFrom,m.transitionDuration));var y;v.load&&(y=v.load,y.reset()),y&&p.preload?(p.preload.call(p),m.status=x.LOADING,y.once(n.COMPLETE,this.loadComplete,this),y.start()):this.create(p)},loadComplete:function(p){this.game.sound&&this.game.sound.onBlurPausedSounds&&this.game.sound.unlock(),this.create(p.scene)},payloadComplete:function(p){this.bootScene(p.scene)},update:function(p,v){this.processQueue(),this.isProcessing=!0;for(var m=this.scenes.length-1;m>=0;m--){var y=this.scenes[m].sys;y.settings.status>x.START&&y.settings.status<=x.RUNNING&&y.step(p,v),y.scenePlugin._target&&y.scenePlugin.step(p,v)}},render:function(p){for(var v=0;v<this.scenes.length;v++){var m=this.scenes[v].sys;m.settings.visible&&m.settings.status>=x.LOADING&&m.settings.status<x.SLEEPING&&m.render(p)}this.isProcessing=!1},create:function(p){var v=p.sys,m=v.settings;p.create&&(m.status=x.CREATING,p.create.call(p,m.data),m.status===x.DESTROYED)||(m.isTransition&&v.events.emit(u.TRANSITION_START,m.transitionFrom,m.transitionDuration),p.update&&(v.sceneUpdate=p.update),m.status=x.RUNNING,v.events.emit(u.CREATE,p))},createSceneFromFunction:function(p,v){var m=new v;if(m instanceof f){var y=m.sys.settings.key;if(y!==""&&(p=y),this.keys.hasOwnProperty(p))throw new Error("Cannot add a Scene with duplicate key: "+p);return this.createSceneFromInstance(p,m)}else return m.sys=new a(m),m.sys.settings.key=p,m.sys.init(this.game),m},createSceneFromInstance:function(p,v){var m=v.sys.settings.key;return m===""&&(v.sys.settings.key=p),v.sys.init(this.game),v},createSceneFromObject:function(p,v){var m=new f(v),y=m.sys.settings.key;y!==""?p=y:m.sys.settings.key=p,m.sys.init(this.game);for(var P=["init","preload","create","update","render"],E=0;E<P.length;E++){var S=o(v,P[E],null);S&&(m[P[E]]=S)}if(v.hasOwnProperty("extend")){for(var w in v.extend)if(v.extend.hasOwnProperty(w)){var R=v.extend[w];w==="data"&&m.hasOwnProperty("data")&&typeof R=="object"?m.data.merge(R):w!=="sys"&&(m[w]=R)}}return m},getKey:function(p,v){if(p||(p="default"),typeof v=="function")return p;if(v instanceof f?p=v.sys.settings.key:typeof v=="object"&&v.hasOwnProperty("key")&&(p=v.key),this.keys.hasOwnProperty(p))throw new Error("Cannot add a Scene with duplicate key: "+p);return p},getScenes:function(p,v){p===void 0&&(p=!0),v===void 0&&(v=!1);for(var m=[],y=this.scenes,P=0;P<y.length;P++){var E=y[P];E&&(!p||p&&E.sys.isActive())&&m.push(E)}return v?m.reverse():m},getScene:function(p){if(typeof p=="string"){if(this.keys[p])return this.keys[p]}else for(var v=0;v<this.scenes.length;v++)if(p===this.scenes[v])return p;return null},isActive:function(p){var v=this.getScene(p);return v?v.sys.isActive():null},isPaused:function(p){var v=this.getScene(p);return v?v.sys.isPaused():null},isVisible:function(p){var v=this.getScene(p);return v?v.sys.isVisible():null},isSleeping:function(p){var v=this.getScene(p);return v?v.sys.isSleeping():null},pause:function(p,v){var m=this.getScene(p);return m&&m.sys.pause(v),this},resume:function(p,v){var m=this.getScene(p);return m&&m.sys.resume(v),this},sleep:function(p,v){var m=this.getScene(p);return m&&!m.sys.isTransitioning()&&m.sys.sleep(v),this},wake:function(p,v){var m=this.getScene(p);return m&&m.sys.wake(v),this},run:function(p,v){var m=this.getScene(p);if(!m){for(var y=0;y<this._pending.length;y++)if(this._pending[y].key===p){this.queueOp("start",p,v);break}return this}m.sys.isSleeping()?m.sys.wake(v):m.sys.isPaused()?m.sys.resume(v):this.start(p,v)},start:function(p,v){if(!this.isBooted)return this._data[p]={autoStart:!0,data:v},this;var m=this.getScene(p);if(!m)return console.warn("Scene not found for key: "+p),this;var y=m.sys,P=y.settings.status;if(P>=x.START&&P<=x.CREATING)return this;if(P>=x.RUNNING&&P<=x.SLEEPING)y.shutdown(),y.sceneUpdate=r,y.start(v);else{y.sceneUpdate=r,y.start(v);var E;if(y.load&&(E=y.load),E&&y.settings.hasOwnProperty("pack")&&(E.reset(),E.addPack({payload:y.settings.pack})))return y.settings.status=x.LOADING,E.once(n.COMPLETE,this.payloadComplete,this),E.start(),this}return this.bootScene(m),this},stop:function(p,v){var m=this.getScene(p);if(m&&!m.sys.isTransitioning()&&m.sys.settings.status!==x.SHUTDOWN){var y=m.sys.load;y&&(y.off(n.COMPLETE,this.loadComplete,this),y.off(n.COMPLETE,this.payloadComplete,this)),m.sys.shutdown(v)}return this},switch:function(p,v){var m=this.getScene(p),y=this.getScene(v);return m&&y&&m!==y&&(this.sleep(p),this.isSleeping(v)?this.wake(v):this.start(v)),this},getAt:function(p){return this.scenes[p]},getIndex:function(p){var v=this.getScene(p);return this.scenes.indexOf(v)},bringToTop:function(p){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:p,keyB:null});else{var v=this.getIndex(p);if(v!==-1&&v<this.scenes.length){var m=this.getScene(p);this.scenes.splice(v,1),this.scenes.push(m)}}return this},sendToBack:function(p){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:p,keyB:null});else{var v=this.getIndex(p);if(v!==-1&&v>0){var m=this.getScene(p);this.scenes.splice(v,1),this.scenes.unshift(m)}}return this},moveDown:function(p){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:p,keyB:null});else{var v=this.getIndex(p);if(v>0){var m=v-1,y=this.getScene(p),P=this.getAt(m);this.scenes[v]=P,this.scenes[m]=y}}return this},moveUp:function(p){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:p,keyB:null});else{var v=this.getIndex(p);if(v<this.scenes.length-1){var m=v+1,y=this.getScene(p),P=this.getAt(m);this.scenes[v]=P,this.scenes[m]=y}}return this},moveAbove:function(p,v){if(p===v)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:p,keyB:v});else{var m=this.getIndex(p),y=this.getIndex(v);if(m!==-1&&y!==-1&&y<m){var P=this.getAt(y);this.scenes.splice(y,1),this.scenes.splice(m+(y>m),0,P)}}return this},moveBelow:function(p,v){if(p===v)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:p,keyB:v});else{var m=this.getIndex(p),y=this.getIndex(v);if(m!==-1&&y!==-1&&y>m){var P=this.getAt(y);this.scenes.splice(y,1),m===0?this.scenes.unshift(P):this.scenes.splice(m-(y<m),0,P)}}return this},queueOp:function(p,v,m){return this._queue.push({op:p,keyA:v,keyB:m}),this},swapPosition:function(p,v){if(p===v)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:p,keyB:v});else{var m=this.getIndex(p),y=this.getIndex(v);if(m!==y&&m!==-1&&y!==-1){var P=this.getAt(m);this.scenes[m]=this.scenes[y],this.scenes[y]=P}}return this},dump:function(){for(var p=[],v=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],m=0;m<this.scenes.length;m++){var y=this.scenes[m].sys,P=y.settings.visible&&(y.settings.status===x.RUNNING||y.settings.status===x.PAUSED)?"[*] ":"[-] ";P+=y.settings.key+" ("+v[y.settings.status]+")",p.push(P)}console.log(p.join(`
`))},destroy:function(){for(var p=0;p<this.scenes.length;p++){var v=this.scenes[p].sys;v.destroy()}this.systemScene.sys.destroy(),this.update=r,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});l.exports=c},64051:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),x=e(56694),u=e(7599),h=e(72632),o=e(91963),n=new x({initialize:function(f){this.scene=f,this.systems=f.sys,this.settings=f.sys.settings,this.key=f.sys.settings.key,this.manager=f.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,f.sys.events.once(u.BOOT,this.boot,this),f.sys.events.on(u.START,this.pluginStart,this)},boot:function(){this.systems.events.once(u.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(u.SHUTDOWN,this.shutdown,this)},start:function(r,f){return r===void 0&&(r=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",r,f),this},restart:function(r){var f=this.key;return this.manager.queueOp("stop",f),this.manager.queueOp("start",f,r),this},transition:function(r){r===void 0&&(r={});var f=h(r,"target",!1),a=this.manager.getScene(f);if(!f||!this.checkValidTransition(a))return!1;var c=h(r,"duration",1e3);this._elapsed=0,this._target=a,this._duration=c,this._willSleep=h(r,"sleep",!1),this._willRemove=h(r,"remove",!1);var p=h(r,"onUpdate",null);p&&(this._onUpdate=p,this._onUpdateScope=h(r,"onUpdateScope",this.scene));var v=h(r,"allowInput",!1);this.settings.transitionAllowInput=v;var m=a.sys.settings;m.isTransition=!0,m.transitionFrom=this.scene,m.transitionDuration=c,m.transitionAllowInput=v,h(r,"moveAbove",!1)?this.manager.moveAbove(this.key,f):h(r,"moveBelow",!1)&&this.manager.moveBelow(this.key,f),a.sys.isSleeping()?a.sys.wake(h(r,"data")):this.manager.start(f,h(r,"data"));var y=h(r,"onStart",null),P=h(r,"onStartScope",this.scene);return y&&y.call(P,this.scene,a,c),this.systems.events.emit(u.TRANSITION_OUT,a,c),!0},checkValidTransition:function(r){return!(!r||r.sys.isActive()||r.sys.isTransitioning()||r===this.scene||this.systems.isTransitioning())},step:function(r,f){this._elapsed+=f,this.transitionProgress=d(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var r=this._target.sys,f=this._target.sys.settings;r.events.emit(u.TRANSITION_COMPLETE,this.scene),f.isTransition=!1,f.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(r,f,a,c){return this.manager.add(r,f,a,c)},launch:function(r,f){return r&&r!==this.key&&this.manager.queueOp("start",r,f),this},run:function(r,f){return r&&r!==this.key&&this.manager.queueOp("run",r,f),this},pause:function(r,f){return r===void 0&&(r=this.key),this.manager.queueOp("pause",r,f),this},resume:function(r,f){return r===void 0&&(r=this.key),this.manager.queueOp("resume",r,f),this},sleep:function(r,f){return r===void 0&&(r=this.key),this.manager.queueOp("sleep",r,f),this},wake:function(r,f){return r===void 0&&(r=this.key),this.manager.queueOp("wake",r,f),this},switch:function(r){return r!==this.key&&this.manager.queueOp("switch",this.key,r),this},stop:function(r,f){return r===void 0&&(r=this.key),this.manager.queueOp("stop",r,f),this},setActive:function(r,f,a){f===void 0&&(f=this.key);var c=this.manager.getScene(f);return c&&c.sys.setActive(r,a),this},setVisible:function(r,f){f===void 0&&(f=this.key);var a=this.manager.getScene(f);return a&&a.sys.setVisible(r),this},isSleeping:function(r){return r===void 0&&(r=this.key),this.manager.isSleeping(r)},isActive:function(r){return r===void 0&&(r=this.key),this.manager.isActive(r)},isPaused:function(r){return r===void 0&&(r=this.key),this.manager.isPaused(r)},isVisible:function(r){return r===void 0&&(r=this.key),this.manager.isVisible(r)},swapPosition:function(r,f){return f===void 0&&(f=this.key),r!==f&&this.manager.swapPosition(r,f),this},moveAbove:function(r,f){return f===void 0&&(f=this.key),r!==f&&this.manager.moveAbove(r,f),this},moveBelow:function(r,f){return f===void 0&&(f=this.key),r!==f&&this.manager.moveBelow(r,f),this},remove:function(r){return r===void 0&&(r=this.key),this.manager.remove(r),this},moveUp:function(r){return r===void 0&&(r=this.key),this.manager.moveUp(r),this},moveDown:function(r){return r===void 0&&(r=this.key),this.manager.moveDown(r),this},bringToTop:function(r){return r===void 0&&(r=this.key),this.manager.bringToTop(r),this},sendToBack:function(r){return r===void 0&&(r=this.key),this.manager.sendToBack(r),this},get:function(r){return this.manager.getScene(r)},getStatus:function(r){var f=this.manager.getScene(r);if(f)return f.sys.getStatus()},getIndex:function(r){return r===void 0&&(r=this.key),this.manager.getIndex(r)},shutdown:function(){var r=this.systems.events;r.off(u.SHUTDOWN,this.shutdown,this),r.off(u.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});o.register("ScenePlugin",n,"scenePlugin"),l.exports=n},36765:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(92980),x=e(10850),u=e(30657),h=e(90415),o={create:function(n){return typeof n=="string"?n={key:n}:n===void 0&&(n={}),{status:d.PENDING,key:x(n,"key",""),active:x(n,"active",!1),visible:x(n,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:x(n,"pack",!1),cameras:x(n,"cameras",null),map:x(n,"map",u(h,x(n,"mapAdd",{}))),physics:x(n,"physics",{}),loader:x(n,"loader",{}),plugins:x(n,"plugins",!1),input:x(n,"input",{})}}};l.exports=o},63946:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(92980),u=e(18360),h=e(7599),o=e(47736),n=e(91088),r=e(72283),f=e(36765),a=new d({initialize:function(p,v){this.scene=p,this.game,this.renderer,this.config=v,this.settings=f.create(v),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=r},init:function(c){this.settings.status=x.INIT,this.sceneUpdate=r,this.game=c,this.renderer=c.renderer,this.canvas=c.canvas,this.context=c.context;var p=c.plugins;this.plugins=p,p.addToScene(this,u.Global,[u.CoreScene,n(this),o(this)]),this.events.emit(h.BOOT,this),this.settings.isBooted=!0},step:function(c,p){var v=this.events;v.emit(h.PRE_UPDATE,c,p),v.emit(h.UPDATE,c,p),this.sceneUpdate.call(this.scene,c,p),v.emit(h.POST_UPDATE,c,p)},render:function(c){var p=this.displayList;p.depthSort(),this.events.emit(h.PRE_RENDER,c),this.cameras.render(c,p),this.events.emit(h.RENDER,c)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(c){var p=this.settings,v=this.getStatus();return v!==x.CREATING&&v!==x.RUNNING?console.warn("Cannot pause non-running Scene",p.key):this.settings.active&&(p.status=x.PAUSED,p.active=!1,this.events.emit(h.PAUSE,this,c)),this},resume:function(c){var p=this.events,v=this.settings;return this.settings.active||(v.status=x.RUNNING,v.active=!0,p.emit(h.RESUME,this,c)),this},sleep:function(c){var p=this.settings,v=this.getStatus();return v!==x.CREATING&&v!==x.RUNNING?console.warn("Cannot sleep non-running Scene",p.key):(p.status=x.SLEEPING,p.active=!1,p.visible=!1,this.events.emit(h.SLEEP,this,c)),this},wake:function(c){var p=this.events,v=this.settings;return v.status=x.RUNNING,v.active=!0,v.visible=!0,p.emit(h.WAKE,this,c),v.isTransition&&p.emit(h.TRANSITION_WAKE,v.transitionFrom,v.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var c=this.settings.status;return c>x.PENDING&&c<=x.RUNNING},isSleeping:function(){return this.settings.status===x.SLEEPING},isActive:function(){return this.settings.status===x.RUNNING},isPaused:function(){return this.settings.status===x.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(c){return this.settings.visible=c,this},setActive:function(c,p){return c?this.resume(p):this.pause(p)},start:function(c){var p=this.events,v=this.settings;c&&(v.data=c),v.status=x.START,v.active=!0,v.visible=!0,p.emit(h.START,this),p.emit(h.READY,this,c)},shutdown:function(c){var p=this.events,v=this.settings;p.off(h.TRANSITION_INIT),p.off(h.TRANSITION_START),p.off(h.TRANSITION_COMPLETE),p.off(h.TRANSITION_OUT),v.status=x.SHUTDOWN,v.active=!1,v.visible=!1,p.emit(h.SHUTDOWN,this,c)},destroy:function(){var c=this.events,p=this.settings;p.status=x.DESTROYED,p.active=!1,p.visible=!1,c.emit(h.DESTROY,this),c.removeAllListeners();for(var v=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],m=0;m<v.length;m++)this[v[m]]=null}});l.exports=a},92980:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};l.exports=T},31803:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="addedtoscene"},94817:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="boot"},28977:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="create"},91959:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="destroy"},363:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pause"},15643:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="postupdate"},17058:l=>{/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="prerender"},77125:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="preupdate"},76018:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="ready"},28620:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="removedfromscene"},41538:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="render"},34268:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="resume"},2342:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="shutdown"},96541:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="sleep"},74244:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="start"},17046:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="transitioncomplete"},13637:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="transitioninit"},14733:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="transitionout"},33899:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="transitionstart"},52418:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="transitionwake"},31735:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="update"},8470:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="wake"},7599:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={ADDED_TO_SCENE:e(31803),BOOT:e(94817),CREATE:e(28977),DESTROY:e(91959),PAUSE:e(363),POST_UPDATE:e(15643),PRE_RENDER:e(17058),PRE_UPDATE:e(77125),READY:e(76018),REMOVED_FROM_SCENE:e(28620),RENDER:e(41538),RESUME:e(34268),SHUTDOWN:e(2342),SLEEP:e(96541),START:e(74244),TRANSITION_COMPLETE:e(17046),TRANSITION_INIT:e(13637),TRANSITION_OUT:e(14733),TRANSITION_START:e(33899),TRANSITION_WAKE:e(52418),UPDATE:e(31735),WAKE:e(8470)}},20436:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(92980),x=e(98611),u={Events:e(7599),GetPhysicsPlugins:e(47736),GetScenePlugins:e(91088),SceneManager:e(13553),ScenePlugin:e(64051),Settings:e(36765),Systems:e(63946)};u=x(!1,u,d),l.exports=u},25798:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(6659),u=e(76038),h=e(98611),o=e(72283),n=new d({Extends:x,initialize:function(f,a,c){x.call(this),this.manager=f,this.key=a,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=h(this.config,c),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(r){return!r||!r.name||typeof r.name!="string"?!1:this.markers[r.name]?(console.error("addMarker "+r.name+" already exists in Sound"),!1):(r=h(!0,{name:"",start:0,duration:this.totalDuration-(r.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},r),this.markers[r.name]=r,!0)},updateMarker:function(r){return!r||!r.name||typeof r.name!="string"?!1:this.markers[r.name]?(this.markers[r.name]=h(!0,this.markers[r.name],r),!0):(console.warn("Audio Marker: "+r.name+" missing in Sound: "+this.key),!1)},removeMarker:function(r){var f=this.markers[r];return f?(this.markers[r]=null,f):null},play:function(r,f){if(r===void 0&&(r=""),typeof r=="object"&&(f=r,r=""),typeof r!="string")return!1;if(!r)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[r])return console.warn("Marker: "+r+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[r],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=h(this.currentConfig,f),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:o,calculateRate:function(){var r=1.0005777895065548,f=this.currentConfig.detune+this.manager.detune,a=Math.pow(r,f);this.totalRate=this.currentConfig.rate*this.manager.rate*a},destroy:function(){this.pendingRemove||(this.emit(u.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});l.exports=n},12486:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(32742),u=e(6659),h=e(76038),o=e(97081),n=e(71608),r=e(51463),f=e(72283),a=e(93736),c=new d({Extends:u,initialize:function(v){u.call(this),this.game=v,this.jsonCache=v.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new a,v.events.on(o.BLUR,this.onGameBlur,this),v.events.on(o.FOCUS,this.onGameFocus,this),v.events.on(o.PRE_STEP,this.update,this),v.events.once(o.DESTROY,this.destroy,this)},add:f,addAudioSprite:function(p,v){v===void 0&&(v={});var m=this.add(p,v);m.spritemap=this.jsonCache.get(p).spritemap;for(var y in m.spritemap)if(m.spritemap.hasOwnProperty(y)){var P=x(v),E=m.spritemap[y];P.loop=E.hasOwnProperty("loop")?E.loop:!1,m.addMarker({name:y,start:E.start,duration:E.end-E.start,config:P})}return m},get:function(p){return r(this.sounds,"key",p)},getAll:function(p){return p?n(this.sounds,"key",p):n(this.sounds)},getAllPlaying:function(){return n(this.sounds,"isPlaying",!0)},play:function(p,v){var m=this.add(p);return m.once(h.COMPLETE,m.destroy,m),v?v.name?(m.addMarker(v),m.play(v.name)):m.play(v):m.play()},playAudioSprite:function(p,v,m){var y=this.addAudioSprite(p);return y.once(h.COMPLETE,y.destroy,y),y.play(v,m)},remove:function(p){var v=this.sounds.indexOf(p);return v!==-1?(p.destroy(),this.sounds.splice(v,1),!0):!1},removeAll:function(){this.sounds.forEach(function(p){p.destroy()}),this.sounds.length=0},removeByKey:function(p){for(var v=0,m=this.sounds.length-1;m>=0;m--){var y=this.sounds[m];y.key===p&&(y.destroy(),this.sounds.splice(m,1),v++)}return v},pauseAll:function(){this.forEachActiveSound(function(p){p.pause()}),this.emit(h.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(p){p.resume()}),this.emit(h.RESUME_ALL,this)},setListenerPosition:f,stopAll:function(){this.forEachActiveSound(function(p){p.stop()}),this.emit(h.STOP_ALL,this)},stopByKey:function(p){var v=0;return this.getAll(p).forEach(function(m){m.stop()&&v++}),v},unlock:f,onBlur:f,onFocus:f,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(p,v){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(h.UNLOCKED,this));for(var m=this.sounds.length-1;m>=0;m--)this.sounds[m].pendingRemove&&this.sounds.splice(m,1);this.sounds.forEach(function(y){y.update(p,v)})},destroy:function(){this.game.events.off(o.BLUR,this.onGameBlur,this),this.game.events.off(o.FOCUS,this.onGameFocus,this),this.game.events.off(o.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(p,v){var m=this;this.sounds.forEach(function(y,P){y&&!y.pendingRemove&&p.call(v||m,y,P,m.sounds)})},setRate:function(p){return this.rate=p,this},rate:{get:function(){return this._rate},set:function(p){this._rate=p,this.forEachActiveSound(function(v){v.calculateRate()}),this.emit(h.GLOBAL_RATE,this,p)}},setDetune:function(p){return this.detune=p,this},detune:{get:function(){return this._detune},set:function(p){this._detune=p,this.forEachActiveSound(function(v){v.calculateRate()}),this.emit(h.GLOBAL_DETUNE,this,p)}}});l.exports=c},84191:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(27622),x=e(17546),u=e(55491),h={create:function(o){var n=o.config.audio,r=o.device.audio;return n.noAudio||!r.webAudio&&!r.audioData?new x(o):r.webAudio&&!n.disableWebAudio?new u(o):new d(o)}};l.exports=h},77578:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="complete"},19679:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="decodedall"},56951:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="decoded"},16436:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="destroy"},55154:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="detune"},57818:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="detune"},57890:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="mute"},83022:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="rate"},99170:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="volume"},64289:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="looped"},67214:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="loop"},53128:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="mute"},73078:l=>{/**
 * @author       pi-kei
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pan"},76763:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pauseall"},88426:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pause"},13765:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="play"},80291:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="rate"},11124:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="resumeall"},55382:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="resume"},71157:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="seek"},31776:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="stopall"},39450:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="stop"},21939:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="unlocked"},33019:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="volume"},76038:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={COMPLETE:e(77578),DECODED:e(56951),DECODED_ALL:e(19679),DESTROY:e(16436),DETUNE:e(55154),GLOBAL_DETUNE:e(57818),GLOBAL_MUTE:e(57890),GLOBAL_RATE:e(83022),GLOBAL_VOLUME:e(99170),LOOP:e(67214),LOOPED:e(64289),MUTE:e(53128),PAN:e(73078),PAUSE_ALL:e(76763),PAUSE:e(88426),PLAY:e(13765),RATE:e(80291),RESUME_ALL:e(11124),RESUME:e(55382),SEEK:e(71157),STOP_ALL:e(31776),STOP:e(39450),UNLOCKED:e(21939),VOLUME:e(33019)}},34350:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(25798),x=e(56694),u=e(76038),h=e(82897),o=new x({Extends:d,initialize:function(r,f,a){if(a===void 0&&(a={}),this.tags=r.game.cache.audio.get(f),!this.tags)throw new Error('No cached audio asset with key "'+f);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,d.call(this,r,f,a)},play:function(n,r){return this.manager.isLocked(this,"play",[n,r])||!d.prototype.play.call(this,n,r)||!this.pickAndPlayAudioTag()?!1:(this.emit(u.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!d.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(u.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!d.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(u.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!d.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(u.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var n=this.currentConfig.seek,r=this.currentConfig.delay,f=(this.currentMarker?this.currentMarker.start:0)+n;return this.previousTime=f,this.audio.currentTime=f,this.applyConfig(),r===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+r*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var n=0;n<this.tags.length;n++){var r=this.tags[n];if(r.dataset.used==="false")return r.dataset.used="true",this.audio=r,!0}if(!this.manager.override)return!1;var f=[];this.manager.forEachActiveSound(function(c){c.key===this.key&&c.audio&&f.push(c)},this),f.sort(function(c,p){return c.loop===p.loop?p.seek/p.duration-c.seek/c.duration:c.loop?1:-1});var a=f[0];return this.audio=a.audio,a.reset(),a.audio=null,a.startTime=0,a.previousTime=0,!0},playCatchPromise:function(){var n=this.audio.play();n&&n.catch(function(r){console.warn(r)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){d.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(n){if(this.isPlaying){if(this.startTime>0){this.startTime<n-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,n-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var r=this.currentMarker?this.currentMarker.start:0,f=r+this.duration,a=this.audio.currentTime;if(this.currentConfig.loop)a>=f-this.manager.loopEndOffset?(this.audio.currentTime=r+Math.max(0,a-f),a=this.audio.currentTime):a<r&&(this.audio.currentTime+=r,a=this.audio.currentTime),a<this.previousTime&&this.emit(u.LOOPED,this);else if(a>=f){this.reset(),this.stopAndReleaseAudioTag(),this.emit(u.COMPLETE,this);return}this.previousTime=a}},destroy:function(){d.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=h(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){d.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(n){this.currentConfig.mute=n,!this.manager.isLocked(this,"mute",n)&&(this.updateMute(),this.emit(u.MUTE,this,n))}},setMute:function(n){return this.mute=n,this},volume:{get:function(){return this.currentConfig.volume},set:function(n){this.currentConfig.volume=n,!this.manager.isLocked(this,"volume",n)&&(this.updateVolume(),this.emit(u.VOLUME,this,n))}},setVolume:function(n){return this.volume=n,this},rate:{get:function(){return this.currentConfig.rate},set:function(n){this.currentConfig.rate=n,!this.manager.isLocked(this,u.RATE,n)&&(this.calculateRate(),this.emit(u.RATE,this,n))}},setRate:function(n){return this.rate=n,this},detune:{get:function(){return this.currentConfig.detune},set:function(n){this.currentConfig.detune=n,!this.manager.isLocked(this,u.DETUNE,n)&&(this.calculateRate(),this.emit(u.DETUNE,this,n))}},setDetune:function(n){return this.detune=n,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(n){this.manager.isLocked(this,"seek",n)||this.startTime>0||(this.isPlaying||this.isPaused)&&(n=Math.min(Math.max(0,n),this.duration),this.isPlaying?(this.previousTime=n,this.audio.currentTime=n):this.isPaused&&(this.currentConfig.seek=n),this.emit(u.SEEK,this,n))}},setSeek:function(n){return this.seek=n,this},loop:{get:function(){return this.currentConfig.loop},set:function(n){this.currentConfig.loop=n,!this.manager.isLocked(this,"loop",n)&&(this.audio&&(this.audio.loop=n),this.emit(u.LOOP,this,n))}},setLoop:function(n){return this.loop=n,this},pan:{get:function(){return this.currentConfig.pan},set:function(n){this.currentConfig.pan=n,this.emit(u.PAN,this,n)}},setPan:function(n){return this.pan=n,this}});l.exports=o},27622:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12486),x=e(56694),u=e(76038),h=e(34350),o=new x({Extends:d,initialize:function(r){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,d.call(this,r)},add:function(n,r){var f=new h(this,n,r);return this.sounds.push(f),f},unlock:function(){this.locked=!1;var n=this;if(this.game.cache.audio.entries.each(function(c,p){for(var v=0;v<p.length;v++)if(p[v].dataset.locked==="true")return n.locked=!0,!1;return!0}),!!this.locked){var r=!1,f=function(){r=!0},a=function(){if(r){r=!1;return}document.body.removeEventListener("touchmove",f),document.body.removeEventListener("touchend",a);var c=[];if(n.game.cache.audio.entries.each(function(v,m){for(var y=0;y<m.length;y++){var P=m[y];P.dataset.locked==="true"&&c.push(P)}return!0}),c.length!==0){var p=c[c.length-1];p.oncanplaythrough=function(){p.oncanplaythrough=null,c.forEach(function(v){v.dataset.locked="false"}),n.unlocked=!0},c.forEach(function(v){v.load()})}};this.once(u.UNLOCKED,function(){for(this.forEachActiveSound(function(p){p.currentMarker===null&&p.duration===0&&(p.duration=p.tags[0].duration),p.totalDuration=p.tags[0].duration});this.lockedActionsQueue.length;){var c=this.lockedActionsQueue.shift();c.sound[c.prop].apply?c.sound[c.prop].apply(c.sound,c.value||[]):c.sound[c.prop]=c.value}},this),document.body.addEventListener("touchmove",f,!1),document.body.addEventListener("touchend",a,!1)}},onBlur:function(){this.forEachActiveSound(function(n){n.isPlaying&&(this.onBlurPausedSounds.push(n),n.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(n){n.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){d.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(n,r,f){return n.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:n,prop:r,value:f}),!0):!1},setMute:function(n){return this.mute=n,this},mute:{get:function(){return this._mute},set:function(n){this._mute=n,this.forEachActiveSound(function(r){r.updateMute()}),this.emit(u.GLOBAL_MUTE,this,n)}},setVolume:function(n){return this.volume=n,this},volume:{get:function(){return this._volume},set:function(n){this._volume=n,this.forEachActiveSound(function(r){r.updateVolume()}),this.emit(u.GLOBAL_VOLUME,this,n)}}});l.exports=o},56751:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={SoundManagerCreator:e(84191),Events:e(76038),BaseSound:e(25798),BaseSoundManager:e(12486),WebAudioSound:e(96008),WebAudioSoundManager:e(55491),HTML5AudioSound:e(34350),HTML5AudioSoundManager:e(27622),NoAudioSound:e(38662),NoAudioSoundManager:e(17546)}},38662:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(25798),x=e(56694),u=e(6659),h=e(98611),o=e(72283),n=function(){return!1},r=function(){return null},f=function(){return this},a=new x({Extends:u,initialize:function(p,v,m){m===void 0&&(m={}),u.call(this),this.manager=p,this.key=v,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=h({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},m),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:n,updateMarker:n,removeMarker:r,play:n,pause:n,resume:n,stop:n,setMute:f,setVolume:f,setRate:f,setDetune:f,setSeek:f,setLoop:f,setPan:f,applyConfig:r,resetConfig:r,update:o,calculateRate:r,destroy:function(){d.prototype.destroy.call(this)}});l.exports=a},17546:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12486),x=e(56694),u=e(6659),h=e(38662),o=e(72283),n=new x({Extends:u,initialize:function(f){u.call(this),this.game=f,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(r,f){var a=new h(this,r,f);return this.sounds.push(a),a},addAudioSprite:function(r,f){var a=this.add(r,f);return a.spritemap={},a},get:function(r){return d.prototype.get.call(this,r)},getAll:function(r){return d.prototype.getAll.call(this,r)},play:function(r,f){return!1},playAudioSprite:function(r,f,a){return!1},remove:function(r){return d.prototype.remove.call(this,r)},removeAll:function(){return d.prototype.removeAll.call(this)},removeByKey:function(r){return d.prototype.removeByKey.call(this,r)},stopByKey:function(r){return d.prototype.stopByKey.call(this,r)},onBlur:o,onFocus:o,onGameBlur:o,onGameFocus:o,pauseAll:o,resumeAll:o,stopAll:o,update:o,setRate:o,setDetune:o,setMute:o,setVolume:o,unlock:o,forEachActiveSound:function(r,f){d.prototype.forEachActiveSound.call(this,r,f)},destroy:function(){d.prototype.destroy.call(this)}});l.exports=n},96008:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(25798),x=e(56694),u=e(76038),h=e(72632),o=new x({Extends:d,initialize:function(r,f,a){if(a===void 0&&(a={}),this.audioBuffer=r.game.cache.audio.get(f),!this.audioBuffer)throw new Error('Audio key "'+f+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=r.context.createGain(),this.volumeNode=r.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),r.context.createPanner&&(this.spatialNode=r.context.createPanner(),this.volumeNode.connect(this.spatialNode)),r.context.createStereoPanner?(this.pannerNode=r.context.createStereoPanner(),r.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(r.destination)):r.context.createPanner?this.spatialNode.connect(r.destination):this.volumeNode.connect(r.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,d.call(this,r,f,a)},play:function(n,r){return d.prototype.play.call(this,n,r)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(u.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!d.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(u.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!d.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(u.RESUME,this),!0)},stop:function(){return d.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(u.STOP,this),!0):!1},createAndStartBufferSource:function(){var n=this.currentConfig.seek,r=this.currentConfig.delay,f=this.manager.context.currentTime+r,a=(this.currentMarker?this.currentMarker.start:0)+n,c=this.duration-n;this.playTime=f-n,this.startTime=f,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,f),Math.max(0,a),Math.max(0,c)),this.resetConfig()},createAndStartLoopBufferSource:function(){var n=this.getLoopTime(),r=this.currentMarker?this.currentMarker.start:0,f=this.duration;this.loopTime=n,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,n),Math.max(0,r),Math.max(0,f))},createBufferSource:function(){var n=this,r=this.manager.context.createBufferSource();return r.buffer=this.audioBuffer,r.connect(this.muteNode),r.onended=function(f){f.target===n.source&&(n.currentConfig.loop?n.hasLooped=!0:n.hasEnded=!0)},r},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var n=this.currentConfig.source;if(n&&this.manager.context.createPanner){var r=this.spatialNode;r.panningModel=h(n,"panningModel","equalpower"),r.distanceModel=h(n,"distanceModel","inverse"),r.orientationX.value=h(n,"orientationX",0),r.orientationY.value=h(n,"orientationY",0),r.orientationZ.value=h(n,"orientationZ",-1),r.refDistance=h(n,"refDistance",1),r.maxDistance=h(n,"maxDistance",1e4),r.rolloffFactor=h(n,"rolloffFactor",1),r.coneInnerAngle=h(n,"coneInnerAngle",360),r.coneOuterAngle=h(n,"coneOuterAngle",0),r.coneOuterGain=h(n,"coneOuterGain",0),this.spatialSource=h(n,"follow",null),this.spatialSource||(r.positionX.value=h(n,"x",0),r.positionY.value=h(n,"y",0),r.positionZ.value=h(n,"z",0))}d.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(n){this.spatialNode&&(this.spatialNode.positionX.value=n)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(n){this.spatialNode&&(this.spatialNode.positionY.value=n)}},update:function(){if(this.isPlaying&&this.spatialSource){var n=h(this.spatialSource,"x",null),r=h(this.spatialSource,"y",null);n&&n!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=n),r&&r!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=r)}this.hasEnded?(this.hasEnded=!1,d.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(u.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(u.LOOPED,this))},destroy:function(){this.pendingRemove||(d.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){d.prototype.calculateRate.call(this);var n=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,n),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,n)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var n=0,r=0;r<this.rateUpdates.length;r++){var f=0;r<this.rateUpdates.length-1?f=this.rateUpdates[r+1].time:f=this.manager.context.currentTime-this.playTime,n+=(f-this.rateUpdates[r].time)*this.rateUpdates[r].rate}return n},getLoopTime:function(){for(var n=0,r=0;r<this.rateUpdates.length-1;r++)n+=(this.rateUpdates[r+1].time-this.rateUpdates[r].time)*this.rateUpdates[r].rate;var f=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+f.time+(this.duration-n)/f.rate},rate:{get:function(){return this.currentConfig.rate},set:function(n){this.currentConfig.rate=n,this.calculateRate(),this.emit(u.RATE,this,n)}},setRate:function(n){return this.rate=n,this},detune:{get:function(){return this.currentConfig.detune},set:function(n){this.currentConfig.detune=n,this.calculateRate(),this.emit(u.DETUNE,this,n)}},setDetune:function(n){return this.detune=n,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(n){this.currentConfig.mute=n,this.muteNode.gain.setValueAtTime(n?0:1,0),this.emit(u.MUTE,this,n)}},setMute:function(n){return this.mute=n,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(n){this.currentConfig.volume=n,this.volumeNode.gain.setValueAtTime(n,0),this.emit(u.VOLUME,this,n)}},setVolume:function(n){return this.volume=n,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(n){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(n=Math.min(Math.max(0,n),this.duration),this.currentConfig.seek=n,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(u.SEEK,this,n))}},setSeek:function(n){return this.seek=n,this},loop:{get:function(){return this.currentConfig.loop},set:function(n){this.currentConfig.loop=n,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),n&&this.createAndStartLoopBufferSource()),this.emit(u.LOOP,this,n)}},setLoop:function(n){return this.loop=n,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(n){this.currentConfig.pan=n,this.pannerNode&&this.pannerNode.pan.setValueAtTime(n,this.manager.context.currentTime),this.emit(u.PAN,this,n)}},setPan:function(n){return this.pan=n,this}});l.exports=o},55491:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82329),x=e(12486),u=e(56694),h=e(76038),o=e(97081),n=e(96008),r=e(72632),f=new u({Extends:x,initialize:function(c){this.context=this.createAudioContext(c),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),x.call(this,c),this.locked&&c.isBooted?this.unlock():c.events.once(o.BOOT,this.unlock,this)},createAudioContext:function(a){var c=a.config.audio;if(c.context)return c.context.resume(),c.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(a){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=a,this.masterMuteNode=a.createGain(),this.masterVolumeNode=a.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(a.destination),this.destination=this.masterMuteNode,this},add:function(a,c){var p=new n(this,a,c);return this.sounds.push(p),p},decodeAudio:function(a,c){var p;Array.isArray(a)?p=a:p=[{key:a,data:c}];for(var v=this.game.cache.audio,m=p.length,y=0;y<p.length;y++){var P=p[y],E=P.key,S=P.data;typeof S=="string"&&(S=d(S));var w=(function(A,O){v.add(A,O),this.emit(h.DECODED,A),m--,m===0&&this.emit(h.DECODED_ALL)}).bind(this,E),R=(function(A,O){console.error("Error decoding audio: "+A+" - ",O?O.message:""),m--,m===0&&this.emit(h.DECODED_ALL)}).bind(this,E);this.context.decodeAudioData(S,w,R)}},setListenerPosition:function(a,c){return a===void 0&&(a=this.game.scale.width/2),c===void 0&&(c=this.game.scale.height/2),this.listenerPosition.set(a,c),this},unlock:function(){var a=this,c=document.body,p=function v(){if(a.context&&c){var m=c.removeEventListener;a.context.resume().then(function(){m("touchstart",v),m("touchend",v),m("click",v),m("keydown",v),a.unlocked=!0},function(){m("touchstart",v),m("touchend",v),m("click",v),m("keydown",v)})}};c&&(c.addEventListener("touchstart",p,!1),c.addEventListener("touchend",p,!1),c.addEventListener("click",p,!1),c.addEventListener("keydown",p,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var a=this.context;a&&!this.locked&&(a.state==="suspended"||a.state==="interrupted")&&a.resume()},update:function(a,c){var p=this.context.listener;if(p&&p.positionX!==void 0){var v=r(this.listenerPosition,"x",null),m=r(this.listenerPosition,"y",null);v&&v!==this._spatialx&&(this._spatialx=p.positionX.value=v),m&&m!==this._spatialy&&(this._spatialy=p.positionY.value=m)}x.prototype.update.call(this,a,c),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var a=this;this.context.close().then(function(){a.context=null})}x.prototype.destroy.call(this)},setMute:function(a){return this.mute=a,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(a){this.masterMuteNode.gain.setValueAtTime(a?0:1,0),this.emit(h.GLOBAL_MUTE,this,a)}},setVolume:function(a){return this.volume=a,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(a){this.masterVolumeNode.gain.setValueAtTime(a,0),this.emit(h.GLOBAL_VOLUME,this,a)}}});l.exports=f},71207:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(59959),x=e(56694),u=e(72283),h=e(17922),o=new x({initialize:function(r){this.parent=r,this.list=[],this.position=0,this.addCallback=u,this.removeCallback=u,this._sortKey=""},add:function(n,r){return r?d.Add(this.list,n):d.Add(this.list,n,0,this.addCallback,this)},addAt:function(n,r,f){return f?d.AddAt(this.list,n,r):d.AddAt(this.list,n,r,0,this.addCallback,this)},getAt:function(n){return this.list[n]},getIndex:function(n){return this.list.indexOf(n)},sort:function(n,r){return n?(r===void 0&&(r=function(f,a){return f[n]-a[n]}),h(this.list,r),this):this},getByName:function(n){return d.GetFirst(this.list,"name",n)},getRandom:function(n,r){return d.GetRandom(this.list,n,r)},getFirst:function(n,r,f,a){return d.GetFirst(this.list,n,r,f,a)},getAll:function(n,r,f,a){return d.GetAll(this.list,n,r,f,a)},count:function(n,r){return d.CountAllMatching(this.list,n,r)},swap:function(n,r){d.Swap(this.list,n,r)},moveTo:function(n,r){return d.MoveTo(this.list,n,r)},moveAbove:function(n,r){return d.MoveAbove(this.list,n,r)},moveBelow:function(n,r){return d.MoveBelow(this.list,n,r)},remove:function(n,r){return r?d.Remove(this.list,n):d.Remove(this.list,n,this.removeCallback,this)},removeAt:function(n,r){return r?d.RemoveAt(this.list,n):d.RemoveAt(this.list,n,this.removeCallback,this)},removeBetween:function(n,r,f){return f?d.RemoveBetween(this.list,n,r):d.RemoveBetween(this.list,n,r,this.removeCallback,this)},removeAll:function(n){for(var r=this.list.length;r--;)this.remove(this.list[r],n);return this},bringToTop:function(n){return d.BringToTop(this.list,n)},sendToBack:function(n){return d.SendToBack(this.list,n)},moveUp:function(n){return d.MoveUp(this.list,n),n},moveDown:function(n){return d.MoveDown(this.list,n),n},reverse:function(){return this.list.reverse(),this},shuffle:function(){return d.Shuffle(this.list),this},replace:function(n,r){return d.Replace(this.list,n,r)},exists:function(n){return this.list.indexOf(n)>-1},setAll:function(n,r,f,a){return d.SetAll(this.list,n,r,f,a),this},each:function(n,r){for(var f=[null],a=2;a<arguments.length;a++)f.push(arguments[a]);for(a=0;a<this.list.length;a++)f[0]=this.list[a],n.apply(r,f)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});l.exports=o},33885:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(h){if(this.entries={},this.size=0,Array.isArray(h))for(var o=0;o<h.length;o++)this.set(h[o][0],h[o][1])},set:function(u,h){return this.has(u)||this.size++,this.entries[u]=h,this},get:function(u){if(this.has(u))return this.entries[u]},getArray:function(){var u=[],h=this.entries;for(var o in h)u.push(h[o]);return u},has:function(u){return this.entries.hasOwnProperty(u)},delete:function(u){return this.has(u)&&(delete this.entries[u],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(u){delete this.entries[u]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var u=[],h=this.entries;for(var o in h)u.push(h[o]);return u},dump:function(){var u=this.entries;console.group("Map");for(var h in u)console.log(h,u[h]);console.groupEnd()},each:function(u){var h=this.entries;for(var o in h)if(u(o,h[o])===!1)break;return this},contains:function(u){var h=this.entries;for(var o in h)if(h[o]===u)return!0;return!1},merge:function(u,h){h===void 0&&(h=!1);var o=this.entries,n=u.entries;for(var r in n)o.hasOwnProperty(r)&&h?o[r]=n[r]:this.set(r,n[r]);return this}});l.exports=x},74623:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(6659),u=e(36716),h=new d({Extends:x,initialize:function(){x.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(o){return this._active.indexOf(o)>-1},isPending:function(o){return this._toProcess>0&&this._pending.indexOf(o)>-1},isDestroying:function(o){return this._destroy.indexOf(o)>-1},add:function(o){return this.checkQueue&&this.isActive()&&!this.isDestroying()||this.isPending()||(this._pending.push(o),this._toProcess++),o},remove:function(o){if(this.isPending(o)){var n=this._pending,r=n.indexOf(o);r!==-1&&n.splice(r,1)}else this.isActive(o)&&(this._destroy.push(o),this._toProcess++);return o},removeAll:function(){for(var o=this._active,n=this._destroy,r=o.length;r--;)n.push(o[r]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var o=this._destroy,n=this._active,r,f;for(r=0;r<o.length;r++){f=o[r];var a=n.indexOf(f);a!==-1&&(n.splice(a,1),this.emit(u.PROCESS_QUEUE_REMOVE,f))}for(o.length=0,o=this._pending,r=0;r<o.length;r++)f=o[r],(!this.checkQueue||this.checkQueue&&n.indexOf(f)===-1)&&(n.push(f),this.emit(u.PROCESS_QUEUE_ADD,f));return o.length=0,this._toProcess=0,n},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});l.exports=h},68687:(l,T,e)=>{/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(53466);function x(S){if(!(this instanceof x))return new x(S);this._maxEntries=Math.max(4,S||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}x.prototype={all:function(){return this._all(this.data,[])},search:function(S){var w=this.data,R=[],A=this.toBBox;if(!y(S,w))return R;for(var O=[],F,b,D,I;w;){for(F=0,b=w.children.length;F<b;F++)D=w.children[F],I=w.leaf?A(D):D,y(S,I)&&(w.leaf?R.push(D):m(S,I)?this._all(D,R):O.push(D));w=O.pop()}return R},collides:function(S){var w=this.data,R=this.toBBox;if(!y(S,w))return!1;for(var A=[],O,F,b,D;w;){for(O=0,F=w.children.length;O<F;O++)if(b=w.children[O],D=w.leaf?R(b):b,y(S,D)){if(w.leaf||m(S,D))return!0;A.push(b)}w=A.pop()}return!1},load:function(S){if(!(S&&S.length))return this;if(S.length<this._minEntries){for(var w=0,R=S.length;w<R;w++)this.insert(S[w]);return this}var A=this._build(S.slice(),0,S.length-1,0);if(!this.data.children.length)this.data=A;else if(this.data.height===A.height)this._splitRoot(this.data,A);else{if(this.data.height<A.height){var O=this.data;this.data=A,A=O}this._insert(A,this.data.height-A.height-1,!0)}return this},insert:function(S){return S&&this._insert(S,this.data.height-1),this},clear:function(){return this.data=P([]),this},remove:function(S,w){if(!S)return this;for(var R=this.data,A=this.toBBox(S),O=[],F=[],b,D,I,B;R||O.length;){if(R||(R=O.pop(),D=O[O.length-1],b=F.pop(),B=!0),R.leaf&&(I=u(S,R.children,w),I!==-1))return R.children.splice(I,1),O.push(R),this._condense(O),this;!B&&!R.leaf&&m(R,A)?(O.push(R),F.push(b),b=0,D=R,R=R.children[0]):D?(b++,R=D.children[b],B=!1):R=null}return this},toBBox:function(S){return S},compareMinX:r,compareMinY:f,toJSON:function(){return this.data},fromJSON:function(S){return this.data=S,this},_all:function(S,w){for(var R=[];S;)S.leaf?w.push.apply(w,S.children):R.push.apply(R,S.children),S=R.pop();return w},_build:function(S,w,R,A){var O=R-w+1,F=this._maxEntries,b;if(O<=F)return b=P(S.slice(w,R+1)),h(b,this.toBBox),b;A||(A=Math.ceil(Math.log(O)/Math.log(F)),F=Math.ceil(O/Math.pow(F,A-1))),b=P([]),b.leaf=!1,b.height=A;var D=Math.ceil(O/F),I=D*Math.ceil(Math.sqrt(F)),B,k,U,X;for(E(S,w,R,I,this.compareMinX),B=w;B<=R;B+=I)for(U=Math.min(B+I-1,R),E(S,B,U,D,this.compareMinY),k=B;k<=U;k+=D)X=Math.min(k+D-1,U),b.children.push(this._build(S,k,X,A-1));return h(b,this.toBBox),b},_chooseSubtree:function(S,w,R,A){for(var O,F,b,D,I,B,k,U;A.push(w),!(w.leaf||A.length-1===R);){for(k=U=1/0,O=0,F=w.children.length;O<F;O++)b=w.children[O],I=a(b),B=p(S,b)-I,B<U?(U=B,k=I<k?I:k,D=b):B===U&&I<k&&(k=I,D=b);w=D||w.children[0]}return w},_insert:function(S,w,R){var A=this.toBBox,O=R?S:A(S),F=[],b=this._chooseSubtree(O,this.data,w,F);for(b.children.push(S),n(b,O);w>=0&&F[w].children.length>this._maxEntries;)this._split(F,w),w--;this._adjustParentBBoxes(O,F,w)},_split:function(S,w){var R=S[w],A=R.children.length,O=this._minEntries;this._chooseSplitAxis(R,O,A);var F=this._chooseSplitIndex(R,O,A),b=P(R.children.splice(F,R.children.length-F));b.height=R.height,b.leaf=R.leaf,h(R,this.toBBox),h(b,this.toBBox),w?S[w-1].children.push(b):this._splitRoot(R,b)},_splitRoot:function(S,w){this.data=P([S,w]),this.data.height=S.height+1,this.data.leaf=!1,h(this.data,this.toBBox)},_chooseSplitIndex:function(S,w,R){var A,O,F,b,D,I,B,k;for(I=B=1/0,A=w;A<=R-w;A++)O=o(S,0,A,this.toBBox),F=o(S,A,R,this.toBBox),b=v(O,F),D=a(O)+a(F),b<I?(I=b,k=A,B=D<B?D:B):b===I&&D<B&&(B=D,k=A);return k},_chooseSplitAxis:function(S,w,R){var A=S.leaf?this.compareMinX:r,O=S.leaf?this.compareMinY:f,F=this._allDistMargin(S,w,R,A),b=this._allDistMargin(S,w,R,O);F<b&&S.children.sort(A)},_allDistMargin:function(S,w,R,A){S.children.sort(A);var O=this.toBBox,F=o(S,0,w,O),b=o(S,R-w,R,O),D=c(F)+c(b),I,B;for(I=w;I<R-w;I++)B=S.children[I],n(F,S.leaf?O(B):B),D+=c(F);for(I=R-w-1;I>=w;I--)B=S.children[I],n(b,S.leaf?O(B):B),D+=c(b);return D},_adjustParentBBoxes:function(S,w,R){for(var A=R;A>=0;A--)n(w[A],S)},_condense:function(S){for(var w=S.length-1,R;w>=0;w--)S[w].children.length===0?w>0?(R=S[w-1].children,R.splice(R.indexOf(S[w]),1)):this.clear():h(S[w],this.toBBox)},compareMinX:function(S,w){return S.left-w.left},compareMinY:function(S,w){return S.top-w.top},toBBox:function(S){return{minX:S.left,minY:S.top,maxX:S.right,maxY:S.bottom}}};function u(S,w,R){if(!R)return w.indexOf(S);for(var A=0;A<w.length;A++)if(R(S,w[A]))return A;return-1}function h(S,w){o(S,0,S.children.length,w,S)}function o(S,w,R,A,O){O||(O=P(null)),O.minX=1/0,O.minY=1/0,O.maxX=-1/0,O.maxY=-1/0;for(var F=w,b;F<R;F++)b=S.children[F],n(O,S.leaf?A(b):b);return O}function n(S,w){return S.minX=Math.min(S.minX,w.minX),S.minY=Math.min(S.minY,w.minY),S.maxX=Math.max(S.maxX,w.maxX),S.maxY=Math.max(S.maxY,w.maxY),S}function r(S,w){return S.minX-w.minX}function f(S,w){return S.minY-w.minY}function a(S){return(S.maxX-S.minX)*(S.maxY-S.minY)}function c(S){return S.maxX-S.minX+(S.maxY-S.minY)}function p(S,w){return(Math.max(w.maxX,S.maxX)-Math.min(w.minX,S.minX))*(Math.max(w.maxY,S.maxY)-Math.min(w.minY,S.minY))}function v(S,w){var R=Math.max(S.minX,w.minX),A=Math.max(S.minY,w.minY),O=Math.min(S.maxX,w.maxX),F=Math.min(S.maxY,w.maxY);return Math.max(0,O-R)*Math.max(0,F-A)}function m(S,w){return S.minX<=w.minX&&S.minY<=w.minY&&w.maxX<=S.maxX&&w.maxY<=S.maxY}function y(S,w){return w.minX<=S.maxX&&w.minY<=S.maxY&&w.maxX>=S.minX&&w.maxY>=S.minY}function P(S){return{children:S,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function E(S,w,R,A,O){for(var F=[w,R],b;F.length;)R=F.pop(),w=F.pop(),!(R-w<=A)&&(b=w+Math.ceil((R-w)/A/2)*A,d(S,b,w,R,O),F.push(w,b,b,R))}l.exports=x},58403:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(h){if(this.entries=[],Array.isArray(h))for(var o=0;o<h.length;o++)this.set(h[o])},set:function(u){return this.entries.indexOf(u)===-1&&this.entries.push(u),this},get:function(u,h){for(var o=0;o<this.entries.length;o++){var n=this.entries[o];if(n[u]===h)return n}},getArray:function(){return this.entries.slice(0)},delete:function(u){var h=this.entries.indexOf(u);return h>-1&&this.entries.splice(h,1),this},dump:function(){console.group("Set");for(var u=0;u<this.entries.length;u++){var h=this.entries[u];console.log(h)}console.groupEnd()},each:function(u,h){var o,n=this.entries.slice(),r=n.length;if(h)for(o=0;o<r&&u.call(h,n[o],o)!==!1;o++);else for(o=0;o<r&&u(n[o],o)!==!1;o++);return this},iterate:function(u,h){var o,n=this.entries.length;if(h)for(o=0;o<n&&u.call(h,this.entries[o],o)!==!1;o++);else for(o=0;o<n&&u(this.entries[o],o)!==!1;o++);return this},iterateLocal:function(u){var h,o=[];for(h=1;h<arguments.length;h++)o.push(arguments[h]);var n=this.entries.length;for(h=0;h<n;h++){var r=this.entries[h];r[u].apply(r,o)}return this},clear:function(){return this.entries.length=0,this},contains:function(u){return this.entries.indexOf(u)>-1},union:function(u){var h=new x;return u.entries.forEach(function(o){h.set(o)}),this.entries.forEach(function(o){h.set(o)}),h},intersect:function(u){var h=new x;return this.entries.forEach(function(o){u.contains(o)&&h.set(o)}),h},difference:function(u){var h=new x;return this.entries.forEach(function(o){u.contains(o)||h.set(o)}),h},size:{get:function(){return this.entries.length},set:function(u){return u<this.entries.length?this.entries.length=u:this.entries.length}}});l.exports=x},90881:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),x=e(56694),u=e(84314),h=e(93736),o=new x({initialize:function(r,f,a,c){r===void 0&&(r=0),f===void 0&&(f=r),a===void 0&&(a=0),c===void 0&&(c=null),this._width=r,this._height=f,this._parent=c,this.aspectMode=a,this.aspectRatio=f===0?1:r/f,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new h},setAspectMode:function(n){return n===void 0&&(n=0),this.aspectMode=n,this.setSize(this._width,this._height)},setSnap:function(n,r){return n===void 0&&(n=0),r===void 0&&(r=n),this.snapTo.set(n,r),this.setSize(this._width,this._height)},setParent:function(n){return this._parent=n,this.setSize(this._width,this._height)},setMin:function(n,r){return n===void 0&&(n=0),r===void 0&&(r=n),this.minWidth=d(n,0,this.maxWidth),this.minHeight=d(r,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(n,r){return n===void 0&&(n=Number.MAX_VALUE),r===void 0&&(r=n),this.maxWidth=d(n,this.minWidth,Number.MAX_VALUE),this.maxHeight=d(r,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(n,r){switch(n===void 0&&(n=0),r===void 0&&(r=n),this.aspectMode){case o.NONE:this._width=this.getNewWidth(u(n,this.snapTo.x)),this._height=this.getNewHeight(u(r,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case o.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(u(n,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case o.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(u(r,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case o.FIT:this.constrain(n,r,!0);break;case o.ENVELOP:this.constrain(n,r,!1);break}return this},setAspectRatio:function(n){return this.aspectRatio=n,this.setSize(this._width,this._height)},resize:function(n,r){return this._width=this.getNewWidth(u(n,this.snapTo.x)),this._height=this.getNewHeight(u(r,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(n,r){return r===void 0&&(r=!0),n=d(n,this.minWidth,this.maxWidth),r&&this._parent&&n>this._parent.width&&(n=Math.max(this.minWidth,this._parent.width)),n},getNewHeight:function(n,r){return r===void 0&&(r=!0),n=d(n,this.minHeight,this.maxHeight),r&&this._parent&&n>this._parent.height&&(n=Math.max(this.minHeight,this._parent.height)),n},constrain:function(n,r,f){n===void 0&&(n=0),r===void 0&&(r=n),f===void 0&&(f=!0),n=this.getNewWidth(n),r=this.getNewHeight(r);var a=this.snapTo,c=r===0?1:n/r;return f&&this.aspectRatio>c||!f&&this.aspectRatio<c?(n=u(n,a.x),r=n/this.aspectRatio,a.y>0&&(r=u(r,a.y),n=r*this.aspectRatio)):(f&&this.aspectRatio<c||!f&&this.aspectRatio>c)&&(r=u(r,a.y),n=r*this.aspectRatio,a.x>0&&(n=u(n,a.x),r=n*(1/this.aspectRatio))),this._width=n,this._height=r,this},fitTo:function(n,r){return this.constrain(n,r,!0)},envelop:function(n,r){return this.constrain(n,r,!1)},setWidth:function(n){return this.setSize(n,this._height)},setHeight:function(n){return this.setSize(this._width,n)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(n){n&&n.style&&(n.style.width=this._width+"px",n.style.height=this._height+"px")},copy:function(n){return n.setAspectMode(this.aspectMode),n.aspectRatio=this.aspectRatio,n.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(n){this.setSize(n,this._height)}},height:{get:function(){return this._height},set:function(n){this.setSize(this._width,n)}}});o.NONE=0,o.WIDTH_CONTROLS_HEIGHT=1,o.HEIGHT_CONTROLS_WIDTH=2,o.FIT=3,o.ENVELOP=4,l.exports=o},94160:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="add"},95393:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="remove"},36716:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={PROCESS_QUEUE_ADD:e(94160),PROCESS_QUEUE_REMOVE:e(95393)}},20010:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={Events:e(36716),List:e(71207),Map:e(33885),ProcessQueue:e(74623),RTree:e(68687),Set:e(58403),Size:e(90881)}},17487:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(82897),u=e(27119),h=e(86459),o=e(28621),n=e(31673),r=new d({Extends:n,initialize:function(a,c,p,v,m){n.call(this,a,c,p,v,m),this.add("__BASE",0,0,0,v,m),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=v,this.height=m,this.imageData=this.context.getImageData(0,0,v,m),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===h.WEBGL&&this.refresh(),this},draw:function(f,a,c,p){return p===void 0&&(p=!0),this.context.drawImage(c,f,a),p&&this.update(),this},drawFrame:function(f,a,c,p,v){c===void 0&&(c=0),p===void 0&&(p=0),v===void 0&&(v=!0);var m=this.manager.getFrame(f,a);if(m){var y=m.canvasData,P=m.cutWidth,E=m.cutHeight,S=m.source.resolution;this.context.drawImage(m.source.image,y.x,y.y,P,E,c,p,P/S,E/S),v&&this.update()}return this},setPixel:function(f,a,c,p,v,m){m===void 0&&(m=255),f=Math.abs(Math.floor(f)),a=Math.abs(Math.floor(a));var y=this.getIndex(f,a);if(y>-1){var P=this.context.getImageData(f,a,1,1);P.data[0]=c,P.data[1]=p,P.data[2]=v,P.data[3]=m,this.context.putImageData(P,f,a)}return this},putData:function(f,a,c,p,v,m,y){return p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=f.width),y===void 0&&(y=f.height),this.context.putImageData(f,a,c,p,v,m,y),this},getData:function(f,a,c,p){f=x(Math.floor(f),0,this.width-1),a=x(Math.floor(a),0,this.height-1),c=x(c,1,this.width-f),p=x(p,1,this.height-a);var v=this.context.getImageData(f,a,c,p);return v},getPixel:function(f,a,c){c||(c=new u);var p=this.getIndex(f,a);if(p>-1){var v=this.data,m=v[p+0],y=v[p+1],P=v[p+2],E=v[p+3];c.setTo(m,y,P,E)}return c},getPixels:function(f,a,c,p){f===void 0&&(f=0),a===void 0&&(a=0),c===void 0&&(c=this.width),p===void 0&&(p=c),f=Math.abs(Math.round(f)),a=Math.abs(Math.round(a));for(var v=x(f,0,this.width),m=x(f+c,0,this.width),y=x(a,0,this.height),P=x(a+p,0,this.height),E=new u,S=[],w=y;w<P;w++){for(var R=[],A=v;A<m;A++)E=this.getPixel(A,w,E),R.push({x:A,y:w,color:E.color,alpha:E.alphaGL});S.push(R)}return S},getIndex:function(f,a){return f=Math.abs(Math.round(f)),a=Math.abs(Math.round(a)),f<this.width&&a<this.height?(f+a*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(f,a,c,p,v){return f===void 0&&(f=0),a===void 0&&(a=0),c===void 0&&(c=this.width),p===void 0&&(p=this.height),v===void 0&&(v=!0),this.context.clearRect(f,a,c,p),v&&this.update(),this},setSize:function(f,a){return a===void 0&&(a=f),(f!==this.width||a!==this.height)&&(this.canvas.width=f,this.canvas.height=a,this._source.width=f,this._source.height=a,this._source.isPowerOf2=o(f,a),this.frames.__BASE.setSize(f,a,0,0),this.width=f,this.height=a,this.refresh()),this},destroy:function(){n.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});l.exports=r},845:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(95723),x=e(51052),u=e(61068),h=e(56694),o=e(86459),n=e(82047),r=e(72632),f=e(65641),a=e(37410),c=e(31673),p=e(75512),v=new h({Extends:c,initialize:function(y,P,E,S){E===void 0&&(E=256),S===void 0&&(S=256),this.type="DynamicTexture";var w=y.game.renderer,R=w&&w.type===o.CANVAS,A=R?u.create2D(this,E,S):[this];c.call(this,y,P,A,E,S),this.add("__BASE",0,0,0,E,S),this.renderer=w,this.isDrawing=!1,this.canvas=R?A:null,this.context=R?A.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new x(0,0,E,S).setScene(y.game.scene.systemScene,!1),this.renderTarget=R?null:new a(w,E,S,1,0,!1,!0,!0,!1),this.pipeline=R?null:w.pipelines.get(f.SINGLE_PIPELINE),this.setSize(E,S)},setSize:function(m,y){y===void 0&&(y=m);var P=this.get(),E=P.source;if(m!==this.width||y!==this.height){this.canvas&&(this.canvas.width=m,this.canvas.height=y);var S=this.renderTarget;S&&(S.resize(m,y),P.glTexture=S.texture,E.isRenderTexture=!0,E.isGLTexture=!0,E.glTexture=S.texture,E.glTexture.flipY=!0),this.camera.setSize(m,y),E.width=m,E.height=y,P.setSize(m,y),this.width=m,this.height=y}else{var w=this.getSourceImage();P.cutX+m>w.width&&(m=w.width-P.cutX),P.cutY+y>w.height&&(y=w.height-P.cutY),P.setSize(m,y,P.cutX,P.cutY)}return this},setIsSpriteTexture:function(m){return this.isSpriteTexture=m,this},fill:function(m,y,P,E,S,w){var R=this.camera,A=this.renderer;y===void 0&&(y=1),P===void 0&&(P=0),E===void 0&&(E=0),S===void 0&&(S=this.width),w===void 0&&(w=this.height);var O=m>>16&255,F=m>>8&255,b=m&255,D=this.renderTarget;if(R.preRender(),D){D.bind(!0);var I=this.pipeline.manager.set(this.pipeline),B=A.width/D.width,k=A.height/D.height;I.drawFillRect(P*B,E*k,S*B,w*k,p.getTintFromFloats(b/255,F/255,O/255,1),y),D.unbind(!0)}else{var U=this.context;A.setContext(U),U.globalCompositeOperation="source-over",U.fillStyle="rgba("+O+","+F+","+b+","+y+")",U.fillRect(P,E,S,w),A.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var m=this.context,y=this.renderTarget;y?y.clear():m&&(m.save(),m.setTransform(1,0,0,1,0,0),m.clearRect(0,0,this.width,this.height),m.restore()),this.dirty=!1}return this},stamp:function(m,y,P,E,S){P===void 0&&(P=0),E===void 0&&(E=0);var w=r(S,"alpha",1),R=r(S,"tint",16777215),A=r(S,"angle",0),O=r(S,"rotation",0),F=r(S,"scale",1),b=r(S,"scaleX",F),D=r(S,"scaleY",F),I=r(S,"originX",.5),B=r(S,"originY",.5),k=r(S,"blendMode",0),U=r(S,"erase",!1),X=r(S,"skipBatch",!1),H=this.manager.resetStamp(w,R);return H.setAngle(0),A!==0?H.setAngle(A):O!==0&&H.setRotation(O),H.setScale(b,D),H.setTexture(m,y),H.setOrigin(I,B),H.setBlendMode(k),U&&(this._eraseMode=!0),X?this.batchGameObject(H,P,E):this.draw(H,P,E),U&&(this._eraseMode=!1),this},erase:function(m,y,P){return this._eraseMode=!0,this.draw(m,y,P),this._eraseMode=!1,this},draw:function(m,y,P,E,S){return this.beginDraw(),this.batchDraw(m,y,P,E,S),this.endDraw(),this},drawFrame:function(m,y,P,E,S,w){return this.beginDraw(),this.batchDrawFrame(m,y,P,E,S,w),this.endDraw(),this},repeat:function(m,y,P,E,S,w,R,A,O){if(P===void 0&&(P=0),E===void 0&&(E=0),S===void 0&&(S=this.width),w===void 0&&(w=this.height),R===void 0&&(R=1),A===void 0&&(A=16777215),O===void 0&&(O=!1),m instanceof n?y=m:y=this.manager.getFrame(m,y),!y)return this;var F=this.manager.resetStamp(R,A);F.setFrame(y),F.setOrigin(0);var b=y.width,D=y.height;S=Math.floor(S),w=Math.floor(w);var I=Math.ceil(S/b),B=Math.ceil(w/D),k=I*b-S,U=B*D-w;k>0&&(k=b-k),U>0&&(U=D-U),P<0&&(I+=Math.ceil(Math.abs(P)/b)),E<0&&(B+=Math.ceil(Math.abs(E)/D));var X=P,H=E,N=!1,z=this.manager.stampCrop.setTo(0,0,b,D);O||this.beginDraw();for(var L=0;L<B;L++){if(H+D<0){H+=D;continue}for(var G=0;G<I;G++){if(N=!1,X+b<0){X+=b;continue}else X<0&&(N=!0,z.width=b+X,z.x=b-z.width);H<0&&(N=!0,z.height=D+H,z.y=D-z.height),k>0&&G===I-1&&(N=!0,z.width=k),U>0&&L===B-1&&(N=!0,z.height=U),N&&F.setCrop(z),this.batchGameObject(F,X,H),F.isCropped=!1,z.setTo(0,0,b,D),X+=b}X=P,H+=D}return O||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var m=this.camera,y=this.renderer,P=this.renderTarget;m.preRender(),P?y.beginCapture(P.width,P.height):y.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(m,y,P,E,S){return Array.isArray(m)||(m=[m]),this.batchList(m,y,P,E,S),this},batchDrawFrame:function(m,y,P,E,S,w){P===void 0&&(P=0),E===void 0&&(E=0),S===void 0&&(S=1),w===void 0&&(w=16777215);var R=this.manager.getFrame(m,y);return R&&(this.renderTarget?this.pipeline.batchTextureFrame(R,P,E,w,S,this.camera.matrix,null):this.batchTextureFrame(R,P,E,S,w)),this},endDraw:function(m){if(m===void 0&&(m=this._eraseMode),this.isDrawing){var y=this.renderer,P=this.renderTarget;if(P){var E=y.endCapture(),S=y.pipelines.setUtility();S.blitFrame(E,P,1,!1,!1,m,this.isSpriteTexture),y.resetScissor(),y.resetViewport()}else y.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(m,y,P,E,S){var w=m.length;if(w!==0)for(var R=0;R<w;R++){var A=m[R];!A||A===this||(A.renderWebGL||A.renderCanvas?this.batchGameObject(A,y,P):A.isParent||A.list?this.batchGroup(A.getChildren(),y,P):typeof A=="string"?this.batchTextureFrameKey(A,null,y,P,E,S):A instanceof n?this.batchTextureFrame(A,y,P,E,S):Array.isArray(A)&&this.batchList(A,y,P,E,S))}},batchGroup:function(m,y,P){y===void 0&&(y=0),P===void 0&&(P=0);for(var E=0;E<m.length;E++){var S=m[E];S.willRender(this.camera)&&this.batchGameObject(S,S.x+y,S.y+P)}},batchGameObject:function(m,y,P){y===void 0&&(y=m.x),P===void 0&&(P=m.y);var E=m.x,S=m.y,w=this.camera,R=this.renderer,A=this._eraseMode,O=m.mask;if(m.setPosition(y,P),this.canvas){if(A){var F=m.blendMode;m.blendMode=d.ERASE}O&&O.preRenderCanvas(R,m,w),m.renderCanvas(R,m,w,null),O&&O.postRenderCanvas(R,m,w),A&&(m.blendMode=F)}else R&&(O&&O.preRenderWebGL(R,m,w),A||R.setBlendMode(m.blendMode),m.renderWebGL(R,m,w),O&&O.postRenderWebGL(R,w,this.renderTarget));m.setPosition(E,S)},batchTextureFrameKey:function(m,y,P,E,S,w){var R=this.manager.getFrame(m,y);R&&this.batchTextureFrame(R,P,E,S,w)},batchTextureFrame:function(m,y,P,E,S){y===void 0&&(y=0),P===void 0&&(P=0),E===void 0&&(E=1),S===void 0&&(S=16777215);var w=this.camera.matrix,R=this.renderTarget;if(R)this.pipeline.batchTextureFrame(m,y,P,S,E,w,null);else{var A=this.context,O=m.canvasData,F=m.source.image;A.save(),A.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",A.globalAlpha=E,w.setToContext(A),O.width>0&&O.height>0&&A.drawImage(F,O.x,O.y,O.width,O.height,y,P,O.width,O.height),A.restore()}},snapshotArea:function(m,y,P,E,S,w,R){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,S,!1,m,y,P,E,w,R):this.renderer.snapshotCanvas(this.canvas,S,!1,m,y,P,E,w,R),this},snapshot:function(m,y,P){return this.snapshotArea(0,0,this.width,this.height,m,y,P)},snapshotPixel:function(m,y,P){return this.snapshotArea(m,y,1,1,P,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(m,y,P,E){var S=this.manager.resetStamp();S.setTexture(this),S.setOrigin(0),S.renderWebGL(m,S,P,E)},renderCanvas:function(){},preDestroy:function(){u.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.stamp.destroy(),this.canvas=null,this.context=null,this.renderer=null,this.scene=null}});l.exports=v},82047:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(82897),u=e(98611),h=new d({initialize:function(n,r,f,a,c,p,v){this.texture=n,this.name=r,this.source=n.source[f],this.sourceIndex=f,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(p,v,a,c)},setSize:function(o,n,r,f){r===void 0&&(r=0),f===void 0&&(f=0),this.cutX=r,this.cutY=f,this.cutWidth=o,this.cutHeight=n,this.width=o,this.height=n,this.halfWidth=Math.floor(o*.5),this.halfHeight=Math.floor(n*.5),this.centerX=Math.floor(o/2),this.centerY=Math.floor(n/2);var a=this.data,c=a.cut;c.x=r,c.y=f,c.w=o,c.h=n,c.r=r+o,c.b=f+n,a.sourceSize.w=o,a.sourceSize.h=n,a.spriteSourceSize.w=o,a.spriteSourceSize.h=n,a.radius=.5*Math.sqrt(o*o+n*n);var p=a.drawImage;return p.x=r,p.y=f,p.width=o,p.height=n,this.updateUVs()},setTrim:function(o,n,r,f,a,c){var p=this.data,v=p.spriteSourceSize;return p.trim=!0,p.sourceSize.w=o,p.sourceSize.h=n,v.x=r,v.y=f,v.w=a,v.h=c,v.r=r+a,v.b=f+c,this.x=r,this.y=f,this.width=a,this.height=c,this.halfWidth=a*.5,this.halfHeight=c*.5,this.centerX=Math.floor(a/2),this.centerY=Math.floor(c/2),this.updateUVs()},setCropUVs:function(o,n,r,f,a,c,p){var v=this.cutX,m=this.cutY,y=this.cutWidth,P=this.cutHeight,E=this.realWidth,S=this.realHeight;n=x(n,0,E),r=x(r,0,S),f=x(f,0,E-n),a=x(a,0,S-r);var w=v+n,R=m+r,A=f,O=a,F=this.data;if(F.trim){var b=F.spriteSourceSize;f=x(f,0,y-n),a=x(a,0,P-r);var D=n+f,I=r+a,B=!(b.r<n||b.b<r||b.x>D||b.y>I);if(B){var k=Math.max(b.x,n),U=Math.max(b.y,r),X=Math.min(b.r,D)-k,H=Math.min(b.b,I)-U;A=X,O=H,c?w=v+(y-(k-b.x)-X):w=v+(k-b.x),p?R=m+(P-(U-b.y)-H):R=m+(U-b.y),n=k,r=U,f=X,a=H}else w=0,R=0,A=0,O=0}else c&&(w=v+(y-n-f)),p&&(R=m+(P-r-a));var N=this.source.width,z=this.source.height;return o.u0=Math.max(0,w/N),o.v0=Math.max(0,R/z),o.u1=Math.min(1,(w+A)/N),o.v1=Math.min(1,(R+O)/z),o.x=n,o.y=r,o.cx=w,o.cy=R,o.cw=A,o.ch=O,o.width=f,o.height=a,o.flipX=c,o.flipY=p,o},updateCropUVs:function(o,n,r){return this.setCropUVs(o,o.x,o.y,o.width,o.height,n,r)},setUVs:function(o,n,r,f,a,c){var p=this.data.drawImage;return p.width=o,p.height=n,this.u0=r,this.v0=f,this.u1=a,this.v1=c,this},updateUVs:function(){var o=this.cutX,n=this.cutY,r=this.cutWidth,f=this.cutHeight,a=this.data.drawImage;a.width=r,a.height=f;var c=this.source.width,p=this.source.height;return this.u0=o/c,this.v0=n/p,this.u1=(o+r)/c,this.v1=(n+f)/p,this},updateUVsInverted:function(){var o=this.source.width,n=this.source.height;return this.u0=(this.cutX+this.cutHeight)/o,this.v0=this.cutY/n,this.u1=this.cutX/o,this.v1=(this.cutY+this.cutWidth)/n,this},clone:function(){var o=new h(this.texture,this.name,this.sourceIndex);return o.cutX=this.cutX,o.cutY=this.cutY,o.cutWidth=this.cutWidth,o.cutHeight=this.cutHeight,o.x=this.x,o.y=this.y,o.width=this.width,o.height=this.height,o.halfWidth=this.halfWidth,o.halfHeight=this.halfHeight,o.centerX=this.centerX,o.centerY=this.centerY,o.rotated=this.rotated,o.data=u(!0,o.data,this.data),o.updateUVs(),o},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});l.exports=h},31673:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(82047),u=e(32547),h='Texture "%s" has no frame "%s"',o=new d({initialize:function(r,f,a,c,p){Array.isArray(a)||(a=[a]),this.manager=r,this.key=f,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var v=0;v<a.length;v++)this.source.push(new u(this,a[v],c,p))},add:function(n,r,f,a,c,p){if(this.has(n))return null;var v=new x(this,n,r,f,a,c,p);return this.frames[n]=v,this.firstFrame==="__BASE"&&(this.firstFrame=n),this.frameTotal++,v},remove:function(n){if(this.has(n)){var r=this.get(n);return r.destroy(),delete this.frames[n],!0}return!1},has:function(n){return this.frames.hasOwnProperty(n)},get:function(n){n||(n=this.firstFrame);var r=this.frames[n];return r||(console.warn(h,this.key,n),r=this.frames[this.firstFrame]),r},getTextureSourceIndex:function(n){for(var r=0;r<this.source.length;r++)if(this.source[r]===n)return r;return-1},getFramesFromTextureSource:function(n,r){r===void 0&&(r=!1);var f=[];for(var a in this.frames)if(!(a==="__BASE"&&!r)){var c=this.frames[a];c.sourceIndex===n&&f.push(c)}return f},getFrameNames:function(n){n===void 0&&(n=!1);var r=Object.keys(this.frames);if(!n){var f=r.indexOf("__BASE");f!==-1&&r.splice(f,1)}return r},getSourceImage:function(n){(n==null||this.frameTotal===1)&&(n="__BASE");var r=this.frames[n];return r?r.source.image:(console.warn(h,this.key,n),this.frames.__BASE.source.image)},getDataSourceImage:function(n){(n==null||this.frameTotal===1)&&(n="__BASE");var r=this.frames[n],f;return r?f=r.sourceIndex:(console.warn(h,this.key,n),f=this.frames.__BASE.sourceIndex),this.dataSource[f].image},setDataSource:function(n){Array.isArray(n)||(n=[n]);for(var r=0;r<n.length;r++){var f=this.source[r];this.dataSource.push(new u(this,n[r],f.width,f.height))}},setFilter:function(n){var r;for(r=0;r<this.source.length;r++)this.source[r].setFilter(n);for(r=0;r<this.dataSource.length;r++)this.dataSource[r].setFilter(n)},destroy:function(){var n,r=this.source,f=this.dataSource;for(n=0;n<r.length;n++)r[n]&&r[n].destroy();for(n=0;n<f.length;n++)f[n]&&f[n].destroy();for(var a in this.frames){var c=this.frames[a];c&&c.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});l.exports=o},6237:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61068),x=e(17487),u=e(56694),h=e(27119),o=e(86459),n=e(845),r=e(6659),f=e(38203),a=e(82047),c=e(97081),p=e(52780),v=e(10850),m=e(1539),y=e(42911),P=e(69150),E=e(74118),S=e(31673),w=new u({Extends:r,initialize:function(A){r.call(this),this.game=A,this.name="TextureManager",this.list={},this._tempCanvas=d.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new E,this.silentWarnings=!1,A.events.once(c.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(f.LOAD,this.updatePending,this),this.on(f.ERROR,this.updatePending,this);var R=this.game.config;this.addBase64("__DEFAULT",R.defaultImage),this.addBase64("__MISSING",R.missingImage),this.addBase64("__WHITE",R.whiteImage),this.game.events.once(c.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(f.LOAD),this.off(f.ERROR),this.emit(f.READY),this.stamp=new m(this.game.scene.systemScene).setOrigin(0))},checkKey:function(R){return this.exists(R)?(this.silentWarnings||console.error("Texture key already in use: "+R),!1):!0},remove:function(R){if(typeof R=="string")if(this.exists(R))R=this.get(R);else return this.silentWarnings||console.warn("No texture found matching key: "+R),this;return this.list.hasOwnProperty(R.key)&&(R.destroy(),this.emit(f.REMOVE,R.key),this.emit(f.REMOVE_KEY+R.key)),this},removeKey:function(R){return this.list.hasOwnProperty(R)&&delete this.list[R],this},addBase64:function(R,A){if(this.checkKey(R)){var O=this,F=new Image;F.onerror=function(){O.emit(f.ERROR,R)},F.onload=function(){var b=O.create(R,F);P.Image(b,0),O.emit(f.ADD,R,b),O.emit(f.ADD_KEY+R,b),O.emit(f.LOAD,R,b)},F.src=A}return this},getBase64:function(R,A,O,F){O===void 0&&(O="image/png"),F===void 0&&(F=.92);var b="",D=this.getFrame(R,A);if(D&&(D.source.isRenderTexture||D.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(D){var I=D.canvasData,B=d.create2D(this,I.width,I.height),k=B.getContext("2d",{willReadFrequently:!0});I.width>0&&I.height>0&&k.drawImage(D.source.image,I.x,I.y,I.width,I.height,0,0,I.width,I.height),b=B.toDataURL(O,F),d.remove(B)}return b},addImage:function(R,A,O){var F=null;return this.checkKey(R)&&(F=this.create(R,A),P.Image(F,0),O&&F.setDataSource(O),this.emit(f.ADD,R,F),this.emit(f.ADD_KEY+R,F)),F},addGLTexture:function(R,A,O,F){var b=null;return this.checkKey(R)&&(O===void 0&&(O=A.width),F===void 0&&(F=A.height),b=this.create(R,A,O,F),b.add("__BASE",0,0,0,O,F),this.emit(f.ADD,R,b),this.emit(f.ADD_KEY+R,b)),b},addCompressedTexture:function(R,A,O){var F=null;if(this.checkKey(R)){if(F=this.create(R,A),F.add("__BASE",0,0,0,A.width,A.height),O)if(Array.isArray(O))for(var b=0;b<O.length;b++)P.JSONHash(F,b,O[b]);else P.JSONHash(F,0,O);this.emit(f.ADD,R,F),this.emit(f.ADD_KEY+R,F)}return F},addRenderTexture:function(R,A){var O=null;return this.checkKey(R)&&(O=this.create(R,A),O.add("__BASE",0,0,0,A.width,A.height),this.emit(f.ADD,R,O),this.emit(f.ADD_KEY+R,O)),O},generate:function(R,A){if(this.checkKey(R)){var O=d.create(this,1,1);return A.canvas=O,p(A),this.addCanvas(R,O)}else return null},createCanvas:function(R,A,O){if(A===void 0&&(A=256),O===void 0&&(O=256),this.checkKey(R)){var F=d.create(this,A,O,o.CANVAS,!0);return this.addCanvas(R,F)}return null},addCanvas:function(R,A,O){O===void 0&&(O=!1);var F=null;return O?F=new x(this,R,A,A.width,A.height):this.checkKey(R)&&(F=new x(this,R,A,A.width,A.height),this.list[R]=F,this.emit(f.ADD,R,F),this.emit(f.ADD_KEY+R,F)),F},addDynamicTexture:function(R,A,O){var F=null;return typeof R=="string"&&!this.exists(R)?F=new n(this,R,A,O):(F=R,R=F.key),this.checkKey(R)?(this.list[R]=F,this.emit(f.ADD,R,F),this.emit(f.ADD_KEY+R,F)):F=null,F},addAtlas:function(R,A,O,F){return Array.isArray(O.textures)||Array.isArray(O.frames)?this.addAtlasJSONArray(R,A,O,F):this.addAtlasJSONHash(R,A,O,F)},addAtlasJSONArray:function(R,A,O,F){var b=null;if(A instanceof S?(R=b.key,b=A):this.checkKey(R)&&(b=this.create(R,A)),b){if(Array.isArray(O))for(var D=O.length===1,I=0;I<b.source.length;I++){var B=D?O[0]:O[I];P.JSONArray(b,I,B)}else P.JSONArray(b,0,O);F&&b.setDataSource(F),this.emit(f.ADD,R,b),this.emit(f.ADD_KEY+R,b)}return b},addAtlasJSONHash:function(R,A,O,F){var b=null;if(A instanceof S?(R=b.key,b=A):this.checkKey(R)&&(b=this.create(R,A)),b){if(Array.isArray(O))for(var D=0;D<O.length;D++)P.JSONHash(b,D,O[D]);else P.JSONHash(b,0,O);F&&b.setDataSource(F),this.emit(f.ADD,R,b),this.emit(f.ADD_KEY+R,b)}return b},addAtlasXML:function(R,A,O,F){var b=null;return A instanceof S?(R=b.key,b=A):this.checkKey(R)&&(b=this.create(R,A)),b&&(P.AtlasXML(b,0,O),F&&b.setDataSource(F),this.emit(f.ADD,R,b),this.emit(f.ADD_KEY+R,b)),b},addUnityAtlas:function(R,A,O,F){var b=null;return A instanceof S?(R=b.key,b=A):this.checkKey(R)&&(b=this.create(R,A)),b&&(P.UnityYAML(b,0,O),F&&b.setDataSource(F),this.emit(f.ADD,R,b),this.emit(f.ADD_KEY+R,b)),b},addSpriteSheet:function(R,A,O,F){var b=null;if(A instanceof S?(R=b.key,b=A):this.checkKey(R)&&(b=this.create(R,A)),b){var D=b.source[0].width,I=b.source[0].height;P.SpriteSheet(b,0,0,0,D,I,O),F&&b.setDataSource(F),this.emit(f.ADD,R,b),this.emit(f.ADD_KEY+R,b)}return b},addSpriteSheetFromAtlas:function(R,A){if(!this.checkKey(R))return null;var O=v(A,"atlas",null),F=v(A,"frame",null);if(!(!O||!F)){var b=this.get(O),D=b.get(F);if(D){var I=this.create(R,D.source.image);return D.trimmed?P.SpriteSheetFromAtlas(I,D,A):P.SpriteSheet(I,0,D.cutX,D.cutY,D.cutWidth,D.cutHeight,A),this.emit(f.ADD,R,I),this.emit(f.ADD_KEY+R,I),I}}},create:function(R,A,O,F){var b=null;return this.checkKey(R)&&(b=new S(this,R,A,O,F),this.list[R]=b),b},exists:function(R){return this.list.hasOwnProperty(R)},get:function(R){return R===void 0&&(R="__DEFAULT"),this.list[R]?this.list[R]:R instanceof S?R:R instanceof a?R.texture:this.list.__MISSING},cloneFrame:function(R,A){if(this.list[R])return this.list[R].get(A).clone()},getFrame:function(R,A){if(this.list[R])return this.list[R].get(A)},parseFrame:function(R){if(R){if(typeof R=="string")return this.getFrame(R);if(Array.isArray(R)&&R.length===2)return this.getFrame(R[0],R[1]);if(y(R))return this.getFrame(R.key,R.frame);if(R instanceof S)return R.get();if(R instanceof a)return R}else return},getTextureKeys:function(){var R=[];for(var A in this.list)A!=="__DEFAULT"&&A!=="__MISSING"&&A!=="__WHITE"&&R.push(A);return R},getPixel:function(R,A,O,F){var b=this.getFrame(O,F);if(b){R-=b.x,A-=b.y;var D=b.data.cut;if(R+=D.x,A+=D.y,R>=D.x&&R<D.r&&A>=D.y&&A<D.b){var I=this._tempContext;I.clearRect(0,0,1,1),I.drawImage(b.source.image,R,A,1,1,0,0,1,1);var B=I.getImageData(0,0,1,1);return new h(B.data[0],B.data[1],B.data[2],B.data[3])}}return null},getPixelAlpha:function(R,A,O,F){var b=this.getFrame(O,F);if(b){R-=b.x,A-=b.y;var D=b.data.cut;if(R+=D.x,A+=D.y,R>=D.x&&R<D.r&&A>=D.y&&A<D.b){var I=this._tempContext;I.clearRect(0,0,1,1),I.drawImage(b.source.image,R,A,1,1,0,0,1,1);var B=I.getImageData(0,0,1,1);return B.data[3]}}return null},setTexture:function(R,A,O){return this.list[A]&&(R.texture=this.list[A],R.frame=R.texture.get(O)),R},renameTexture:function(R,A){var O=this.get(R);return O&&R!==A?(O.key=A,this.list[A]=O,delete this.list[R],!0):!1},each:function(R,A){for(var O=[null],F=1;F<arguments.length;F++)O.push(arguments[F]);for(var b in this.list)O[0]=this.list[b],R.apply(A,O)},resetStamp:function(R,A){R===void 0&&(R=1),A===void 0&&(A=16777215);var O=this.stamp;return O.setCrop(),O.setPosition(0),O.setAngle(0),O.setScale(1),O.setAlpha(R),O.setTint(A),O},destroy:function(){for(var R in this.list)this.list[R].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,d.remove(this._tempCanvas)}});l.exports=w},32547:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61068),x=e(56694),u=e(28621),h=e(27394),o=new x({initialize:function(r,f,a,c,p){p===void 0&&(p=!1);var v=r.manager.game;this.renderer=v.renderer,this.texture=r,this.source=f,this.image=f.compressed?null:f,this.compressionAlgorithm=f.compressed?f.format:null,this.resolution=1,this.width=a||f.naturalWidth||f.videoWidth||f.width||0,this.height=c||f.naturalHeight||f.videoHeight||f.height||0,this.scaleMode=h.DEFAULT,this.isCanvas=f instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&f instanceof HTMLVideoElement,this.isRenderTexture=f.type==="RenderTexture"||f.type==="DynamicTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&f instanceof WebGLTexture,this.isPowerOf2=u(this.width,this.height),this.glTexture=null,this.flipY=p,this.init(v)},init:function(n){var r=this.renderer;if(r){var f=this.source;if(r.gl){var a=this.image,c=this.flipY,p=this.width,v=this.height,m=this.scaleMode;this.isCanvas?this.glTexture=r.createCanvasTexture(a,!1,c):this.isVideo?this.glTexture=r.createVideoTexture(a,!1,c):this.isRenderTexture?this.glTexture=r.createTextureFromSource(null,p,v,m):this.isGLTexture?this.glTexture=f:this.compressionAlgorithm?this.glTexture=r.createTextureFromSource(f):this.glTexture=r.createTextureFromSource(a,p,v,m)}else this.isRenderTexture&&(this.image=f.canvas)}n.config.antialias||this.setFilter(1)},setFilter:function(n){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,n),this.scaleMode=n},setFlipY:function(n){return n===void 0&&(n=!0),this.flipY=n,this},update:function(){var n=this.renderer,r=this.image,f=this.flipY,a=n.gl;a&&this.isCanvas?this.glTexture=n.updateCanvasTexture(r,this.glTexture,f):a&&this.isVideo&&(this.glTexture=n.updateVideoTexture(r,this.glTexture,f))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&d.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});l.exports=o},65154:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={LINEAR:0,NEAREST:1};l.exports=T},49644:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="addtexture"},29569:l=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="addtexture-"},60079:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="onerror"},72665:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="onload"},93006:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="ready"},69018:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="removetexture"},85549:l=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="removetexture-"},38203:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={ADD:e(49644),ADD_KEY:e(29569),ERROR:e(60079),LOAD:e(72665),READY:e(93006),REMOVE:e(69018),REMOVE_KEY:e(85549)}},87499:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(98611),x=e(65154),u={CanvasTexture:e(17487),DynamicTexture:e(845),Events:e(38203),FilterMode:x,Frame:e(82047),Parsers:e(69150),Texture:e(31673),TextureManager:e(6237),TextureSource:e(32547)};u=d(!1,u,x),l.exports=u},35082:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){if(!x.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var u=e.source[d];e.add("__BASE",d,0,0,u.width,u.height);for(var h=x.getElementsByTagName("SubTexture"),o,n=0;n<h.length;n++){var r=h[n].attributes,f=r.name.value,a=parseInt(r.x.value,10),c=parseInt(r.y.value,10),p=parseInt(r.width.value,10),v=parseInt(r.height.value,10);if(o=e.add(f,d,a,c,p,v),r.frameX){var m=Math.abs(parseInt(r.frameX.value,10)),y=Math.abs(parseInt(r.frameY.value,10)),P=parseInt(r.frameWidth.value,10),E=parseInt(r.frameHeight.value,10);o.setTrim(p,v,m,y,P,E)}}return e};l.exports=T},83332:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=e.source[d];return e.add("__BASE",d,0,0,x.width,x.height),e};l.exports=T},21560:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=e.source[d];return e.add("__BASE",d,0,0,x.width,x.height),e};l.exports=T},64423:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(32742),x=function(u,h,o){if(!o.frames&&!o.textures){console.warn("Invalid Texture Atlas JSON Array");return}var n=u.source[h];u.add("__BASE",h,0,0,n.width,n.height);for(var r=Array.isArray(o.textures)?o.textures[h].frames:o.frames,f,a=0;a<r.length;a++){var c=r[a];if(f=u.add(c.filename,h,c.frame.x,c.frame.y,c.frame.w,c.frame.h),!f){console.warn("Invalid atlas json, frame already exists: "+c.filename);continue}c.trimmed&&f.setTrim(c.sourceSize.w,c.sourceSize.h,c.spriteSourceSize.x,c.spriteSourceSize.y,c.spriteSourceSize.w,c.spriteSourceSize.h),c.rotated&&(f.rotated=!0,f.updateUVsInverted());var p=c.anchor||c.pivot;p&&(f.customPivot=!0,f.pivotX=p.x,f.pivotY=p.y),f.customData=d(c)}for(var v in o)v!=="frames"&&(Array.isArray(o[v])?u.customData[v]=o[v].slice(0):u.customData[v]=o[v]);return u};l.exports=x},17264:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(32742),x=function(u,h,o){if(!o.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var n=u.source[h];u.add("__BASE",h,0,0,n.width,n.height);var r=o.frames,f;for(var a in r)if(r.hasOwnProperty(a)){var c=r[a];if(f=u.add(a,h,c.frame.x,c.frame.y,c.frame.w,c.frame.h),!f){console.warn("Invalid atlas json, frame already exists: "+a);continue}c.trimmed&&f.setTrim(c.sourceSize.w,c.sourceSize.h,c.spriteSourceSize.x,c.spriteSourceSize.y,c.spriteSourceSize.w,c.spriteSourceSize.h),c.rotated&&(f.rotated=!0,f.updateUVsInverted());var p=c.anchor||c.pivot;p&&(f.customPivot=!0,f.pivotX=p.x,f.pivotY=p.y),f.customData=d(c)}for(var v in o)v!=="frames"&&(Array.isArray(o[v])?u.customData[v]=o[v].slice(0):u.customData[v]=o[v]);return u};l.exports=x},67409:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d=[171,75,84,88,32,49,49,187,13,10,26,10],x,u=new Uint8Array(e,0,12);for(x=0;x<u.length;x++)if(u[x]!==d[x]){console.warn("KTXParser - Invalid file format");return}var h=Uint32Array.BYTES_PER_ELEMENT,o=new DataView(e,12,13*h),n=o.getUint32(0,!0)===67305985,r=o.getUint32(1*h,n);if(r!==0){console.warn("KTXParser - Only compressed formats supported");return}var f=o.getUint32(4*h,n),a=o.getUint32(6*h,n),c=o.getUint32(7*h,n),p=Math.max(1,o.getUint32(11*h,n)),v=o.getUint32(12*h,n),m=new Array(p),y=12+13*4+v,P=a,E=c;for(x=0;x<p;x++){var S=new Int32Array(e,y,1)[0];y+=4,m[x]={data:new Uint8Array(e,y,S),width:P,height:E},P=Math.max(1,P>>1),E=Math.max(1,E>>1),y+=S}return{mipmaps:m,width:a,height:c,internalFormat:f,compressed:!0,generateMipmap:!1}};l.exports=T},24904:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(R,A,O,F,b,D,I){return I===void 0&&(I=16),Math.floor((R+O)/b)*Math.floor((A+F)/D)*I}function e(R,A){return R=Math.max(R,16),A=Math.max(A,8),R*A/4}function d(R,A){return R=Math.max(R,8),A=Math.max(A,8),R*A/2}function x(R,A){return T(R,A,3,3,4,4,8)}function u(R,A){return T(R,A,3,3,4,4)}function h(R,A){return T(R,A,4,3,5,4)}function o(R,A){return T(R,A,4,4,5,5)}function n(R,A){return T(R,A,5,4,6,5)}function r(R,A){return T(R,A,5,5,6,6)}function f(R,A){return T(R,A,7,4,8,5)}function a(R,A){return T(R,A,7,5,8,6)}function c(R,A){return T(R,A,7,7,8,8)}function p(R,A){return T(R,A,9,4,10,5)}function v(R,A){return T(R,A,9,5,10,6)}function m(R,A){return T(R,A,9,7,10,8)}function y(R,A){return T(R,A,9,9,10,10)}function P(R,A){return T(R,A,11,9,12,10)}function E(R,A){return T(R,A,11,11,12,12)}var S={0:{sizeFunc:e,glFormat:35841},1:{sizeFunc:e,glFormat:35843},2:{sizeFunc:d,glFormat:35840},3:{sizeFunc:d,glFormat:35842},6:{sizeFunc:x,glFormat:36196},7:{sizeFunc:x,glFormat:33776},8:{sizeFunc:u,glFormat:33777},9:{sizeFunc:u,glFormat:33778},11:{sizeFunc:u,glFormat:33779},22:{sizeFunc:x,glFormat:37492},23:{sizeFunc:u,glFormat:37496},24:{sizeFunc:x,glFormat:37494},25:{sizeFunc:x,glFormat:37488},26:{sizeFunc:u,glFormat:37490},27:{sizeFunc:u,glFormat:37808},28:{sizeFunc:h,glFormat:37809},29:{sizeFunc:o,glFormat:37810},30:{sizeFunc:n,glFormat:37811},31:{sizeFunc:r,glFormat:37812},32:{sizeFunc:f,glFormat:37813},33:{sizeFunc:a,glFormat:37814},34:{sizeFunc:c,glFormat:37815},35:{sizeFunc:p,glFormat:37816},36:{sizeFunc:v,glFormat:37817},37:{sizeFunc:m,glFormat:37818},38:{sizeFunc:y,glFormat:37819},39:{sizeFunc:P,glFormat:37820},40:{sizeFunc:E,glFormat:37821}},w=function(R){for(var A=new Uint32Array(R,0,13),O=A[2],F=S[O].glFormat,b=S[O].sizeFunc,D=A[11],I=A[7],B=A[6],k=52+A[12],U=new Uint8Array(R,k),X=new Array(D),H=0,N=I,z=B,L=0;L<D;L++){var G=b(N,z);X[L]={data:new Uint8Array(U.buffer,U.byteOffset+H,G),width:N,height:z},N=Math.max(1,N>>1),z=Math.max(1,z>>1),H+=G}return{mipmaps:X,width:I,height:B,internalFormat:F,compressed:!0,generateMipmap:!1}};l.exports=w},6143:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72632),x=function(u,h,o,n,r,f,a){var c=d(a,"frameWidth",null),p=d(a,"frameHeight",c);if(c===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var v=u.source[h];u.add("__BASE",h,0,0,v.width,v.height);var m=d(a,"startFrame",0),y=d(a,"endFrame",-1),P=d(a,"margin",0),E=d(a,"spacing",0),S=Math.floor((r-P+E)/(c+E)),w=Math.floor((f-P+E)/(p+E)),R=S*w;R===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",u.key),(m>R||m<-R)&&(m=0),m<0&&(m=R+m),(y===-1||y>R||y<m)&&(y=R);for(var A=P,O=P,F=0,b=0,D=0,I=0;I<R;I++){F=0,b=0;var B=A+c,k=O+p;B>r&&(F=B-r),k>f&&(b=k-f),I>=m&&I<=y&&(u.add(D,h,o+A,n+O,c-F,p-b),D++),A+=c+E,A+c>r&&(A=P,O+=p+E)}return u};l.exports=x},20030:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72632),x=function(u,h,o){var n=d(o,"frameWidth",null),r=d(o,"frameHeight",n);if(!n)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var f=u.source[0];u.add("__BASE",0,0,0,f.width,f.height),d(o,"startFrame",0),d(o,"endFrame",-1);for(var a=d(o,"margin",0),c=d(o,"spacing",0),p=h.cutX,v=h.cutY,m=h.cutWidth,y=h.cutHeight,P=h.realWidth,E=h.realHeight,S=Math.floor((P-a+c)/(n+c)),w=Math.floor((E-a+c)/(r+c)),R=h.x,A=n-R,O=n-(P-m-R),F=h.y,b=r-F,D=r-(E-y-F),I,B=a,k=a,U=0,X=0,H=0;H<w;H++){for(var N=H===0,z=H===w-1,L=0;L<S;L++){var G=L===0,V=L===S-1;if(I=u.add(U,X,p+B,v+k,n,r),G||N||V||z){var Y=G?R:0,W=N?F:0,$=0,K=0;G&&($+=n-A),V&&($+=n-O),N&&(K+=r-b),z&&(K+=r-D);var j=n-$,J=r-K;I.cutWidth=j,I.cutHeight=J,I.setTrim(n,r,Y,W,j,J)}B+=c,G?B+=A:V?B+=O:B+=n,U++}B=a,k+=c,N?k+=b:z?k+=D:k+=r}return u};l.exports=x},89187:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=0,e=function(x,u,h,o){var n=T-o.y-o.height;x.add(h,u,o.x,n,o.width,o.height)},d=function(x,u,h){var o=x.source[u];x.add("__BASE",u,0,0,o.width,o.height),T=o.height;for(var n=h.split(`
`),r=/^[ ]*(- )*(\w+)+[: ]+(.*)/,f="",a="",c={x:0,y:0,width:0,height:0},p=0;p<n.length;p++){var v=n[p].match(r);if(v){var m=v[1]==="- ",y=v[2],P=v[3];if(m&&(a!==f&&(e(x,u,a,c),f=a),c={x:0,y:0,width:0,height:0}),y==="name"){a=P;continue}switch(y){case"x":case"y":case"width":case"height":c[y]=parseInt(P,10);break}}}return a!==f&&e(x,u,a,c),x};l.exports=d},69150:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={AtlasXML:e(35082),Canvas:e(83332),Image:e(21560),JSONArray:e(64423),JSONHash:e(17264),KTXParser:e(67409),PVRParser:e(24904),SpriteSheet:e(6143),SpriteSheetFromAtlas:e(20030),UnityYAML:e(89187)}},93560:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},97042:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(h,o,n,r,f,a,c){(n===void 0||n<=0)&&(n=32),(r===void 0||r<=0)&&(r=32),f===void 0&&(f=0),a===void 0&&(a=0),this.name=h,this.firstgid=o|0,this.imageWidth=n|0,this.imageHeight=r|0,this.imageMargin=f|0,this.imageSpacing=a|0,this.properties=c||{},this.images=[],this.total=0},containsImageIndex:function(u){return u>=this.firstgid&&u<this.firstgid+this.total},addImage:function(u,h){return this.images.push({gid:u,image:h}),this.total++,this}});l.exports=x},46422:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(h){if(this.gids=[],h!==void 0)for(var o=0;o<h.length;++o)for(var n=h[o],r=0;r<n.total;++r)this.gids[n.firstgid+r]=n;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(u){this.gids=u?this._gids:void 0}},getTypeIncludingTile:function(u){if(u.type!==void 0&&u.type!=="")return u.type;if(!(!this.gids||u.gid===void 0)){var h=this.gids[u.gid];if(h){var o=h.getTileData(u.gid);if(o)return o.type}}},setTextureAndFrame:function(u,h,o,n){if(h===null&&this.gids&&n.gid!==void 0){var r=this.gids[n.gid];r&&(h===null&&r.image!==void 0&&(h=r.image.key),o===null&&(o=n.gid-r.firstgid),u.scene.textures.getFrame(h,o)||(h=null,o=null))}u.setTexture(h,o)},setPropertiesFromTiledObject:function(u,h){if(this.gids!==void 0&&h.gid!==void 0){var o=this.gids[h.gid];o!==void 0&&this.setFromJSON(u,o.getTileProperties(h.gid))}this.setFromJSON(u,h.properties)},setFromJSON:function(u,h){if(h){if(Array.isArray(h)){h.forEach(function(n){u.setData(n.name,n.value)});return}for(var o in h)u[o]!==void 0?u[o]=h[o]:u.setData(o,h[o])}}});l.exports=x},15043:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93560),x=e(16586),u=e(90715),h=e(89797),o=function(n,r,f,a,c,p,v,m){f===void 0&&(f=32),a===void 0&&(a=32),c===void 0&&(c=10),p===void 0&&(p=10),m===void 0&&(m=!1);var y=null;if(Array.isArray(v)){var P=r!==void 0?r:"map";y=u(P,d.ARRAY_2D,v,f,a,m)}else if(r!==void 0){var E=n.cache.tilemap.get(r);E?y=u(r,E.format,E.data,f,a,m):console.warn("No map data found for key "+r)}return y===null&&(y=new x({tileWidth:f,tileHeight:a,width:c,height:p})),new h(n,y)};l.exports=o},29633:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(64937),u=e(12920),h=e(28699),o=e(66658),n=new d({Mixins:[x.Alpha,x.Flip,x.Visible],initialize:function(f,a,c,p,v,m,y,P){this.layer=f,this.index=a,this.x=c,this.y=p,this.width=v,this.height=m,this.right,this.bottom,this.baseWidth=y!==void 0?y:v,this.baseHeight=P!==void 0?P:m,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(r,f){return!(r<this.pixelX||f<this.pixelY||r>this.right||f>this.bottom)},copy:function(r){return this.index=r.index,this.alpha=r.alpha,this.properties=h(r.properties),this.visible=r.visible,this.setFlip(r.flipX,r.flipY),this.tint=r.tint,this.rotation=r.rotation,this.collideUp=r.collideUp,this.collideDown=r.collideDown,this.collideLeft=r.collideLeft,this.collideRight=r.collideRight,this.collisionCallback=r.collisionCallback,this.collisionCallbackContext=r.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(r){var f=this.tilemapLayer;if(f){var a=f.tileToWorldXY(this.x,this.y,void 0,r);return a.x}return this.x*this.baseWidth},getRight:function(r){var f=this.tilemapLayer;return f?this.getLeft(r)+this.width*f.scaleX:this.getLeft(r)+this.width},getTop:function(r){var f=this.tilemapLayer;if(f){var a=f.tileToWorldXY(this.x,this.y,void 0,r);return a.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(r){var f=this.tilemapLayer;return f?this.getTop(r)+this.height*f.scaleY:this.getTop(r)+this.height},getBounds:function(r,f){return f===void 0&&(f=new o),f.x=this.getLeft(r),f.y=this.getTop(r),f.width=this.getRight(r)-f.x,f.height=this.getBottom(r)-f.y,f},getCenterX:function(r){return(this.getLeft(r)+this.getRight(r))/2},getCenterY:function(r){return(this.getTop(r)+this.getBottom(r))/2},intersects:function(r,f,a,c){return!(a<=this.pixelX||c<=this.pixelY||r>=this.right||f>=this.bottom)},isInteresting:function(r,f){return r&&f?this.canCollide||this.hasInterestingFace:r?this.collides:f?this.hasInterestingFace:!1},resetCollision:function(r){if(r===void 0&&(r=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,r){var f=this.tilemapLayer;f&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(r,f,a,c,p){if(f===void 0&&(f=r),a===void 0&&(a=r),c===void 0&&(c=r),p===void 0&&(p=!0),this.collideLeft=r,this.collideRight=f,this.collideUp=a,this.collideDown=c,this.faceLeft=r,this.faceRight=f,this.faceTop=a,this.faceBottom=c,p){var v=this.tilemapLayer;v&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(r,f){return r===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=r,this.collisionCallbackContext=f),this},setSize:function(r,f,a,c){return r!==void 0&&(this.width=r),f!==void 0&&(this.height=f),a!==void 0&&(this.baseWidth=a),c!==void 0&&(this.baseHeight=c),this.updatePixelXY(),this},updatePixelXY:function(){var r=this.layer.orientation;if(r===u.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(r===u.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(r===u.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(r===u.HEXAGONAL){var f=this.layer.staggerAxis,a=this.layer.staggerIndex,c=this.layer.hexSideLength,p,v;f==="y"?(v=(this.baseHeight-c)/2+c,a==="odd"?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*v):f==="x"&&(p=(this.baseWidth-c)/2+c,this.pixelX=this.x*p,a==="odd"?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var r=this.layer.tilemapLayer;if(r){var f=r.gidMap[this.index];if(f)return f}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var r=this.tilemapLayer;return r?r.tilemap:null}}});l.exports=n},89797:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(14556),x=e(56694),u=e(75606),h=e(93560),o=e(72632),n=e(94990),r=e(46422),f=e(12920),a=e(52257),c=e(72677),p=e(13747),v=e(29633),m=e(5047),y=e(87177),P=e(47975),E=new x({initialize:function(w,R){this.scene=w,this.tileWidth=R.tileWidth,this.tileHeight=R.tileHeight,this.width=R.width,this.height=R.height,this.orientation=R.orientation,this.renderOrder=R.renderOrder,this.format=R.format,this.version=R.version,this.properties=R.properties,this.widthInPixels=R.widthInPixels,this.heightInPixels=R.heightInPixels,this.imageCollections=R.imageCollections,this.images=R.images,this.layers=R.layers,this.tiles=R.tiles,this.tilesets=R.tilesets,this.objects=R.objects,this.currentLayerIndex=0,this.hexSideLength=R.hexSideLength;var A=this.orientation;this._convert={WorldToTileXY:m.GetWorldToTileXYFunction(A),WorldToTileX:m.GetWorldToTileXFunction(A),WorldToTileY:m.GetWorldToTileYFunction(A),TileToWorldXY:m.GetTileToWorldXYFunction(A),TileToWorldX:m.GetTileToWorldXFunction(A),TileToWorldY:m.GetTileToWorldYFunction(A),GetTileCorners:m.GetTileCornersFunction(A)}},setRenderOrder:function(S){var w=["right-down","left-down","right-up","left-up"];return typeof S=="number"&&(S=w[S]),w.indexOf(S)>-1&&(this.renderOrder=S),this},addTilesetImage:function(S,w,R,A,O,F,b,D){if(S===void 0)return null;if(w==null&&(w=S),!this.scene.sys.textures.exists(w))return console.warn("Invalid Tileset Image: "+w),null;var I=this.scene.sys.textures.get(w),B=this.getTilesetIndex(S);if(B===null&&this.format===h.TILED_JSON)return console.warn("No data found for Tileset: "+S),null;var k=this.tilesets[B];return k?(k.setTileSize(R,A),k.setSpacing(O,F),k.setImage(I),k):(R===void 0&&(R=this.tileWidth),A===void 0&&(A=this.tileHeight),O===void 0&&(O=0),F===void 0&&(F=0),b===void 0&&(b=0),D===void 0&&(D={x:0,y:0}),k=new P(S,b,R,A,O,F,void 0,void 0,D),k.setImage(I),this.tilesets.push(k),this.tiles=d(this),k)},copy:function(S,w,R,A,O,F,b,D){return D=this.getLayer(D),D!==null?(m.Copy(S,w,R,A,O,F,b,D),this):null},createBlankLayer:function(S,w,R,A,O,F,b,D){R===void 0&&(R=0),A===void 0&&(A=0),O===void 0&&(O=this.width),F===void 0&&(F=this.height),b===void 0&&(b=this.tileWidth),D===void 0&&(D=this.tileHeight);var I=this.getLayerIndex(S);if(I!==null)return console.warn("Invalid Tilemap Layer ID: "+S),null;for(var B=new n({name:S,tileWidth:b,tileHeight:D,width:O,height:F,orientation:this.orientation}),k,U=0;U<F;U++){k=[];for(var X=0;X<O;X++)k.push(new v(B,-1,X,U,b,D,this.tileWidth,this.tileHeight));B.data.push(k)}this.layers.push(B),this.currentLayerIndex=this.layers.length-1;var H=new y(this.scene,this,this.currentLayerIndex,w,R,A);return H.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(H),H},createLayer:function(S,w,R,A){var O=this.getLayerIndex(S);if(O===null)return console.warn("Invalid Tilemap Layer ID: "+S),typeof S=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var F=this.layers[O];if(F.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+S),null;this.currentLayerIndex=O,R===void 0&&(R=F.x),A===void 0&&(A=F.y);var b=new y(this.scene,this,O,w,R,A);return b.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(b),b},createFromObjects:function(S,w,R){R===void 0&&(R=!0);var A=[],O=this.getObjectLayer(S);if(!O)return console.warn("createFromObjects: Invalid objectLayerName given: "+S),A;var F=new r(R?this.tilesets:void 0);Array.isArray(w)||(w=[w]);for(var b=O.objects,D=0;D<w.length;D++){var I=w[D],B=o(I,"id",null),k=o(I,"gid",null),U=o(I,"name",null),X=o(I,"type",null);F.enabled=!o(I,"ignoreTileset",null);for(var H,N=[],z=0;z<b.length;z++)H=b[z],(B===null&&k===null&&U===null&&X===null||B!==null&&H.id===B||k!==null&&H.gid===k||U!==null&&H.name===U||X!==null&&F.getTypeIncludingTile(H)===X)&&N.push(H);for(var L=o(I,"classType",p),G=o(I,"scene",this.scene),V=o(I,"container",null),Y=o(I,"key",null),W=o(I,"frame",null),$=0;$<N.length;$++){H=N[$];var K=new L(G);if(K.setName(H.name),K.setPosition(H.x,H.y),F.setTextureAndFrame(K,Y,W,H),H.width&&(K.displayWidth=H.width),H.height&&(K.displayHeight=H.height),this.orientation===f.ISOMETRIC){var j=this.tileWidth/this.tileHeight,J={x:K.x-K.y,y:(K.x+K.y)/j};K.x=J.x,K.y=J.y}var q={x:K.originX*H.width,y:(K.originY-(H.gid?1:0))*H.height};if(H.rotation){var _=u(H.rotation);a(q,_),K.rotation=_}K.x+=q.x,K.y+=q.y,(H.flippedHorizontal!==void 0||H.flippedVertical!==void 0)&&K.setFlip(H.flippedHorizontal,H.flippedVertical),H.visible||(K.visible=!1),F.setPropertiesFromTiledObject(K,H),V?V.add(K):G.add.existing(K),A.push(K)}}return A},createFromTiles:function(S,w,R,A,O,F){return F=this.getLayer(F),F===null?null:m.CreateFromTiles(S,w,R,A,O,F)},fill:function(S,w,R,A,O,F,b){return F===void 0&&(F=!0),b=this.getLayer(b),b===null?null:(m.Fill(S,w,R,A,O,F,b),this)},filterObjects:function(S,w,R){if(typeof S=="string"){var A=S;if(S=this.getObjectLayer(S),!S)return console.warn("No object layer found with the name: "+A),null}return S.objects.filter(w,R)},filterTiles:function(S,w,R,A,O,F,b,D){return D=this.getLayer(D),D===null?null:m.FilterTiles(S,w,R,A,O,F,b,D)},findByIndex:function(S,w,R,A){return A=this.getLayer(A),A===null?null:m.FindByIndex(S,w,R,A)},findObject:function(S,w,R){if(typeof S=="string"){var A=S;if(S=this.getObjectLayer(S),!S)return console.warn("No object layer found with the name: "+A),null}return S.objects.find(w,R)||null},findTile:function(S,w,R,A,O,F,b,D){return D=this.getLayer(D),D===null?null:m.FindTile(S,w,R,A,O,F,b,D)},forEachTile:function(S,w,R,A,O,F,b,D){return D=this.getLayer(D),D===null?null:(m.ForEachTile(S,w,R,A,O,F,b,D),this)},getImageIndex:function(S){return this.getIndex(this.images,S)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(S){return S.name})},getIndex:function(S,w){for(var R=0;R<S.length;R++)if(S[R].name===w)return R;return null},getLayer:function(S){var w=this.getLayerIndex(S);return w!==null?this.layers[w]:null},getObjectLayer:function(S){var w=this.getIndex(this.objects,S);return w!==null?this.objects[w]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(S){return S.name})},getLayerIndex:function(S){return S===void 0?this.currentLayerIndex:typeof S=="string"?this.getLayerIndexByName(S):typeof S=="number"&&S<this.layers.length?S:S instanceof y&&S.tilemap===this?S.layerIndex:null},getLayerIndexByName:function(S){return this.getIndex(this.layers,S)},getTileAt:function(S,w,R,A){return A=this.getLayer(A),A===null?null:m.GetTileAt(S,w,R,A)},getTileAtWorldXY:function(S,w,R,A,O){return O=this.getLayer(O),O===null?null:m.GetTileAtWorldXY(S,w,R,A,O)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(S){return S.name})},getTilesWithin:function(S,w,R,A,O,F){return F=this.getLayer(F),F===null?null:m.GetTilesWithin(S,w,R,A,O,F)},getTilesWithinShape:function(S,w,R,A){return A=this.getLayer(A),A===null?null:m.GetTilesWithinShape(S,w,R,A)},getTilesWithinWorldXY:function(S,w,R,A,O,F,b){return b=this.getLayer(b),b===null?null:m.GetTilesWithinWorldXY(S,w,R,A,O,F,b)},getTileset:function(S){var w=this.getIndex(this.tilesets,S);return w!==null?this.tilesets[w]:null},getTilesetIndex:function(S){return this.getIndex(this.tilesets,S)},hasTileAt:function(S,w,R){return R=this.getLayer(R),R===null?null:m.HasTileAt(S,w,R)},hasTileAtWorldXY:function(S,w,R,A){return A=this.getLayer(A),A===null?null:m.HasTileAtWorldXY(S,w,R,A)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(S){this.setLayer(S)}},putTileAt:function(S,w,R,A,O){return A===void 0&&(A=!0),O=this.getLayer(O),O===null?null:m.PutTileAt(S,w,R,A,O)},putTileAtWorldXY:function(S,w,R,A,O,F){return A===void 0&&(A=!0),F=this.getLayer(F),F===null?null:m.PutTileAtWorldXY(S,w,R,A,O,F)},putTilesAt:function(S,w,R,A,O){return A===void 0&&(A=!0),O=this.getLayer(O),O===null?null:(m.PutTilesAt(S,w,R,A,O),this)},randomize:function(S,w,R,A,O,F){return F=this.getLayer(F),F===null?null:(m.Randomize(S,w,R,A,O,F),this)},calculateFacesAt:function(S,w,R){return R=this.getLayer(R),R===null?null:(m.CalculateFacesAt(S,w,R),this)},calculateFacesWithin:function(S,w,R,A,O){return O=this.getLayer(O),O===null?null:(m.CalculateFacesWithin(S,w,R,A,O),this)},removeLayer:function(S){var w=this.getLayerIndex(S);if(w!==null){c(this.layers,w);for(var R=w;R<this.layers.length;R++)this.layers[R].tilemapLayer&&this.layers[R].tilemapLayer.layerIndex--;return this.currentLayerIndex===w&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(S){var w=this.getLayerIndex(S);return w!==null?(S=this.layers[w],S.tilemapLayer.destroy(),c(this.layers,w),this.currentLayerIndex===w&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var S=this.layers,w=0;w<S.length;w++)S[w].tilemapLayer&&S[w].tilemapLayer.destroy(!1);return S.length=0,this.currentLayerIndex=0,this},removeTile:function(S,w,R){w===void 0&&(w=-1),R===void 0&&(R=!0);var A=[];Array.isArray(S)||(S=[S]);for(var O=0;O<S.length;O++){var F=S[O];A.push(this.removeTileAt(F.x,F.y,!0,R,F.tilemapLayer)),w>-1&&this.putTileAt(w,F.x,F.y,R,F.tilemapLayer)}return A},removeTileAt:function(S,w,R,A,O){return R===void 0&&(R=!0),A===void 0&&(A=!0),O=this.getLayer(O),O===null?null:m.RemoveTileAt(S,w,R,A,O)},removeTileAtWorldXY:function(S,w,R,A,O,F){return R===void 0&&(R=!0),A===void 0&&(A=!0),F=this.getLayer(F),F===null?null:m.RemoveTileAtWorldXY(S,w,R,A,O,F)},renderDebug:function(S,w,R){return R=this.getLayer(R),R===null?null:(this.orientation===f.ORTHOGONAL&&m.RenderDebug(S,w,R),this)},renderDebugFull:function(S,w){for(var R=this.layers,A=0;A<R.length;A++)m.RenderDebug(S,w,R[A]);return this},replaceByIndex:function(S,w,R,A,O,F,b){return b=this.getLayer(b),b===null?null:(m.ReplaceByIndex(S,w,R,A,O,F,b),this)},setCollision:function(S,w,R,A,O){return w===void 0&&(w=!0),R===void 0&&(R=!0),O===void 0&&(O=!0),A=this.getLayer(A),A===null?null:(m.SetCollision(S,w,R,A,O),this)},setCollisionBetween:function(S,w,R,A,O){return R===void 0&&(R=!0),A===void 0&&(A=!0),O=this.getLayer(O),O===null?null:(m.SetCollisionBetween(S,w,R,A,O),this)},setCollisionByProperty:function(S,w,R,A){return w===void 0&&(w=!0),R===void 0&&(R=!0),A=this.getLayer(A),A===null?null:(m.SetCollisionByProperty(S,w,R,A),this)},setCollisionByExclusion:function(S,w,R,A){return w===void 0&&(w=!0),R===void 0&&(R=!0),A=this.getLayer(A),A===null?null:(m.SetCollisionByExclusion(S,w,R,A),this)},setCollisionFromCollisionGroup:function(S,w,R){return S===void 0&&(S=!0),w===void 0&&(w=!0),R=this.getLayer(R),R===null?null:(m.SetCollisionFromCollisionGroup(S,w,R),this)},setTileIndexCallback:function(S,w,R,A){return A=this.getLayer(A),A===null?null:(m.SetTileIndexCallback(S,w,R,A),this)},setTileLocationCallback:function(S,w,R,A,O,F,b){return b=this.getLayer(b),b===null?null:(m.SetTileLocationCallback(S,w,R,A,O,F,b),this)},setLayer:function(S){var w=this.getLayerIndex(S);return w!==null&&(this.currentLayerIndex=w),this},setBaseTileSize:function(S,w){this.tileWidth=S,this.tileHeight=w,this.widthInPixels=this.width*S,this.heightInPixels=this.height*w;for(var R=0;R<this.layers.length;R++){this.layers[R].baseTileWidth=S,this.layers[R].baseTileHeight=w;for(var A=this.layers[R].data,O=this.layers[R].width,F=this.layers[R].height,b=0;b<F;b++)for(var D=0;D<O;D++){var I=A[b][D];I!==null&&I.setSize(void 0,void 0,S,w)}}return this},setLayerTileSize:function(S,w,R){if(R=this.getLayer(R),R===null)return this;R.tileWidth=S,R.tileHeight=w;for(var A=R.data,O=R.width,F=R.height,b=0;b<F;b++)for(var D=0;D<O;D++){var I=A[b][D];I!==null&&I.setSize(S,w)}return this},shuffle:function(S,w,R,A,O){return O=this.getLayer(O),O===null?null:(m.Shuffle(S,w,R,A,O),this)},swapByIndex:function(S,w,R,A,O,F,b){return b=this.getLayer(b),b===null?null:(m.SwapByIndex(S,w,R,A,O,F,b),this)},tileToWorldX:function(S,w,R){return R=this.getLayer(R),R===null?null:this._convert.TileToWorldX(S,w,R)},tileToWorldY:function(S,w,R){return R=this.getLayer(R),R===null?null:this._convert.TileToWorldY(S,w,R)},tileToWorldXY:function(S,w,R,A,O){return O=this.getLayer(O),O===null?null:this._convert.TileToWorldXY(S,w,R,A,O)},getTileCorners:function(S,w,R,A){return A=this.getLayer(A),A===null?null:this._convert.GetTileCorners(S,w,R,A)},weightedRandomize:function(S,w,R,A,O,F){return F=this.getLayer(F),F===null?null:(m.WeightedRandomize(w,R,A,O,S,F),this)},worldToTileX:function(S,w,R,A){return A=this.getLayer(A),A===null?null:this._convert.WorldToTileX(S,w,R,A)},worldToTileY:function(S,w,R,A){return A=this.getLayer(A),A===null?null:this._convert.WorldToTileY(S,w,R,A)},worldToTileXY:function(S,w,R,A,O,F){return F=this.getLayer(F),F===null?null:this._convert.WorldToTileXY(S,w,R,A,O,F)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});l.exports=E},4843:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(99325),x=e(15043);d.register("tilemap",function(u){var h=u!==void 0?u:{};return x(this.scene,h.key,h.tileWidth,h.tileHeight,h.width,h.height,h.data,h.insertNull)})},37940:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(15043);d.register("tilemap",function(u,h,o,n,r,f,a){return u===null&&(u=void 0),h===null&&(h=void 0),o===null&&(o=void 0),n===null&&(n=void 0),r===null&&(r=void 0),x(this.scene,u,h,o,n,r,f,a)})},87177:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(64937),u=e(89980),h=e(5047),o=e(96193),n=e(93736),r=new d({Extends:u,Mixins:[x.Alpha,x.BlendMode,x.ComputedSize,x.Depth,x.Flip,x.GetBounds,x.Mask,x.Origin,x.Pipeline,x.PostPipeline,x.Transform,x.Visible,x.ScrollFactor,o],initialize:function(a,c,p,v,m,y){u.call(this,a,"TilemapLayer"),this.isTilemap=!0,this.tilemap=c,this.layerIndex=p,this.layer=c.layers[p],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=h.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new n,this.setTilesets(v),this.setAlpha(this.layer.alpha),this.setPosition(m,y),this.setOrigin(0,0),this.setSize(c.tileWidth*this.layer.width,c.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(f){var a=[],c=[],p=this.tilemap;Array.isArray(f)||(f=[f]);for(var v=0;v<f.length;v++){var m=f[v];if(typeof m=="string"&&(m=p.getTileset(m)),m){c.push(m);for(var y=m.firstgid,P=0;P<m.total;P++)a[y+P]=m}}this.gidMap=a,this.tileset=c},setRenderOrder:function(f){var a=["right-down","left-down","right-up","left-up"];return typeof f=="string"&&(f=a.indexOf(f)),f>=0&&f<4&&(this._renderOrder=f),this},calculateFacesAt:function(f,a){return h.CalculateFacesAt(f,a,this.layer),this},calculateFacesWithin:function(f,a,c,p){return h.CalculateFacesWithin(f,a,c,p,this.layer),this},createFromTiles:function(f,a,c,p,v){return h.CreateFromTiles(f,a,c,p,v,this.layer)},cull:function(f){return this.cullCallback(this.layer,f,this.culledTiles,this._renderOrder)},copy:function(f,a,c,p,v,m,y){return h.Copy(f,a,c,p,v,m,y,this.layer),this},fill:function(f,a,c,p,v,m){return h.Fill(f,a,c,p,v,m,this.layer),this},filterTiles:function(f,a,c,p,v,m,y){return h.FilterTiles(f,a,c,p,v,m,y,this.layer)},findByIndex:function(f,a,c){return h.FindByIndex(f,a,c,this.layer)},findTile:function(f,a,c,p,v,m,y){return h.FindTile(f,a,c,p,v,m,y,this.layer)},forEachTile:function(f,a,c,p,v,m,y){return h.ForEachTile(f,a,c,p,v,m,y,this.layer),this},setTint:function(f,a,c,p,v,m){f===void 0&&(f=16777215);var y=function(P){P.tint=f};return this.forEachTile(y,this,a,c,p,v,m)},getTileAt:function(f,a,c){return h.GetTileAt(f,a,c,this.layer)},getTileAtWorldXY:function(f,a,c,p){return h.GetTileAtWorldXY(f,a,c,p,this.layer)},getIsoTileAtWorldXY:function(f,a,c,p,v){c===void 0&&(c=!0);var m=this.tempVec;return h.IsometricWorldToTileXY(f,a,!0,m,v,this.layer,c),this.getTileAt(m.x,m.y,p)},getTilesWithin:function(f,a,c,p,v){return h.GetTilesWithin(f,a,c,p,v,this.layer)},getTilesWithinShape:function(f,a,c){return h.GetTilesWithinShape(f,a,c,this.layer)},getTilesWithinWorldXY:function(f,a,c,p,v,m){return h.GetTilesWithinWorldXY(f,a,c,p,v,m,this.layer)},hasTileAt:function(f,a){return h.HasTileAt(f,a,this.layer)},hasTileAtWorldXY:function(f,a,c){return h.HasTileAtWorldXY(f,a,c,this.layer)},putTileAt:function(f,a,c,p){return h.PutTileAt(f,a,c,p,this.layer)},putTileAtWorldXY:function(f,a,c,p,v){return h.PutTileAtWorldXY(f,a,c,p,v,this.layer)},putTilesAt:function(f,a,c,p){return h.PutTilesAt(f,a,c,p,this.layer),this},randomize:function(f,a,c,p,v){return h.Randomize(f,a,c,p,v,this.layer),this},removeTileAt:function(f,a,c,p){return h.RemoveTileAt(f,a,c,p,this.layer)},removeTileAtWorldXY:function(f,a,c,p,v){return h.RemoveTileAtWorldXY(f,a,c,p,v,this.layer)},renderDebug:function(f,a){return h.RenderDebug(f,a,this.layer),this},replaceByIndex:function(f,a,c,p,v,m){return h.ReplaceByIndex(f,a,c,p,v,m,this.layer),this},setSkipCull:function(f){return f===void 0&&(f=!0),this.skipCull=f,this},setCullPadding:function(f,a){return f===void 0&&(f=1),a===void 0&&(a=1),this.cullPaddingX=f,this.cullPaddingY=a,this},setCollision:function(f,a,c,p){return h.SetCollision(f,a,c,this.layer,p),this},setCollisionBetween:function(f,a,c,p){return h.SetCollisionBetween(f,a,c,p,this.layer),this},setCollisionByProperty:function(f,a,c){return h.SetCollisionByProperty(f,a,c,this.layer),this},setCollisionByExclusion:function(f,a,c){return h.SetCollisionByExclusion(f,a,c,this.layer),this},setCollisionFromCollisionGroup:function(f,a){return h.SetCollisionFromCollisionGroup(f,a,this.layer),this},setTileIndexCallback:function(f,a,c){return h.SetTileIndexCallback(f,a,c,this.layer),this},setTileLocationCallback:function(f,a,c,p,v,m){return h.SetTileLocationCallback(f,a,c,p,v,m,this.layer),this},shuffle:function(f,a,c,p){return h.Shuffle(f,a,c,p,this.layer),this},swapByIndex:function(f,a,c,p,v,m){return h.SwapByIndex(f,a,c,p,v,m,this.layer),this},tileToWorldX:function(f,a){return this.tilemap.tileToWorldX(f,a,this)},tileToWorldY:function(f,a){return this.tilemap.tileToWorldY(f,a,this)},tileToWorldXY:function(f,a,c,p){return this.tilemap.tileToWorldXY(f,a,c,p,this)},getTileCorners:function(f,a,c){return this.tilemap.getTileCorners(f,a,c,this)},weightedRandomize:function(f,a,c,p,v){return h.WeightedRandomize(a,c,p,v,f,this.layer),this},worldToTileX:function(f,a,c){return this.tilemap.worldToTileX(f,a,c,this)},worldToTileY:function(f,a,c){return this.tilemap.worldToTileY(f,a,c,this)},worldToTileXY:function(f,a,c,p,v){return this.tilemap.worldToTileXY(f,a,c,p,v,this)},destroy:function(f){f===void 0&&(f=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),f&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],u.prototype.destroy.call(this))}});l.exports=r},17394:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(69360),x=new d,u=new d,h=new d,o=function(n,r,f,a){var c=r.cull(f),p=c.length,v=f.alpha*r.alpha;if(!(p===0||v<=0)){var m=x,y=u,P=h;y.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY),m.copyFrom(f.matrix);var E=n.currentContext,S=r.gidMap;E.save(),a?(m.multiplyWithOffset(a,-f.scrollX*r.scrollFactorX,-f.scrollY*r.scrollFactorY),y.e=r.x,y.f=r.y,m.multiply(y,P),P.copyToContext(E)):(y.e-=f.scrollX*r.scrollFactorX,y.f-=f.scrollY*r.scrollFactorY,y.copyToContext(E)),(!n.antialias||r.scaleX>1||r.scaleY>1)&&(E.imageSmoothingEnabled=!1);for(var w=0;w<p;w++){var R=c[w],A=S[R.index];if(A){var O=A.image.getSourceImage(),F=A.getTileTextureCoordinates(R.index),b=A.tileWidth,D=A.tileHeight;if(!(F===null||b===0||D===0)){var I=b*.5,B=D*.5;F.x+=A.tileOffset.x,F.y+=A.tileOffset.y,E.save(),E.translate(R.pixelX+I,R.pixelY+B),R.rotation!==0&&E.rotate(R.rotation),(R.flipX||R.flipY)&&E.scale(R.flipX?-1:1,R.flipY?-1:1),E.globalAlpha=v*R.alpha,E.drawImage(O,F.x,F.y,b,D,-I,-B,b,D),E.restore()}}}E.restore()}};l.exports=o},96193:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(51395),u=e(17394),l.exports={renderWebGL:x,renderCanvas:u}},51395:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(75512),x=function(u,h,o){var n=h.cull(o),r=n.length,f=o.alpha*h.alpha;if(!(r===0||f<=0)){var a=h.gidMap,c=u.pipelines.set(h.pipeline,h),p=d.getTintAppendFloatAlpha,v=h.scrollFactorX,m=h.scrollFactorY,y=h.x,P=h.y,E=h.scaleX,S=h.scaleY;u.pipelines.preBatch(h);for(var w=0;w<r;w++){var R=n[w],A=a[R.index];if(A){var O=A.getTileTextureCoordinates(R.index);if(O!==null){var F=A.glTexture,b=c.setTexture2D(F,h),D=A.tileWidth,I=A.tileHeight,B=O.x,k=O.y,U=A.tileWidth*.5,X=A.tileHeight*.5,H=A.tileOffset.x,N=A.tileOffset.y,z=p(R.tint,f*R.alpha);c.batchTexture(h,F,F.width,F.height,y+R.pixelX*E+(U*E-H),P+R.pixelY*S+(X*S-N),R.width,R.height,E,S,R.rotation,R.flipX,R.flipY,v,m,U,X,B,k,D,I,z,z,z,z,!1,0,0,o,null,!0,b)}}}u.pipelines.postBatch(h)}};l.exports=x},47975:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(93736),u=new d({initialize:function(o,n,r,f,a,c,p,v,m){(r===void 0||r<=0)&&(r=32),(f===void 0||f<=0)&&(f=32),a===void 0&&(a=0),c===void 0&&(c=0),p===void 0&&(p={}),v===void 0&&(v={}),this.name=o,this.firstgid=n,this.tileWidth=r,this.tileHeight=f,this.tileMargin=a,this.tileSpacing=c,this.tileProperties=p,this.tileData=v,this.tileOffset=new x,m!==void 0&&this.tileOffset.set(m.x,m.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(h){return this.containsTileIndex(h)?this.tileProperties[h-this.firstgid]:null},getTileData:function(h){return this.containsTileIndex(h)?this.tileData[h-this.firstgid]:null},getTileCollisionGroup:function(h){var o=this.getTileData(h);return o&&o.objectgroup?o.objectgroup:null},containsTileIndex:function(h){return h>=this.firstgid&&h<this.firstgid+this.total},getTileTextureCoordinates:function(h){return this.containsTileIndex(h)?this.texCoordinates[h-this.firstgid]:null},setImage:function(h){return this.image=h,this.glTexture=h.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(h,o){return h!==void 0&&(this.tileWidth=h),o!==void 0&&(this.tileHeight=o),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(h,o){return h!==void 0&&(this.tileMargin=h),o!==void 0&&(this.tileSpacing=o),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(h,o){var n=(o-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),r=(h-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(n%1!==0||r%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),n=Math.floor(n),r=Math.floor(r),this.rows=n,this.columns=r,this.total=n*r,this.texCoordinates.length=0;for(var f=this.tileMargin,a=this.tileMargin,c=0;c<this.rows;c++){for(var p=0;p<this.columns;p++)this.texCoordinates.push({x:f,y:a}),f+=this.tileWidth+this.tileSpacing;f=this.tileMargin,a+=this.tileHeight+this.tileSpacing}return this}});l.exports=u},92839:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15494),x=function(u,h,o){var n=d(u,h,!0,o),r=d(u,h-1,!0,o),f=d(u,h+1,!0,o),a=d(u-1,h,!0,o),c=d(u+1,h,!0,o),p=n&&n.collides;return p&&(n.faceTop=!0,n.faceBottom=!0,n.faceLeft=!0,n.faceRight=!0),r&&r.collides&&(p&&(n.faceTop=!1),r.faceBottom=!p),f&&f.collides&&(p&&(n.faceBottom=!1),f.faceTop=!p),a&&a.collides&&(p&&(n.faceLeft=!1),a.faceRight=!p),c&&c.collides&&(p&&(n.faceRight=!1),c.faceLeft=!p),n&&!n.collides&&n.resetFaces(),n};l.exports=x},60386:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15494),x=e(50811),u=function(h,o,n,r,f){for(var a=null,c=null,p=null,v=null,m=x(h,o,n,r,null,f),y=0;y<m.length;y++){var P=m[y];P&&(P.collides?(a=d(P.x,P.y-1,!0,f),c=d(P.x,P.y+1,!0,f),p=d(P.x-1,P.y,!0,f),v=d(P.x+1,P.y,!0,f),P.faceTop=!(a&&a.collides),P.faceBottom=!(c&&c.collides),P.faceLeft=!(p&&p.collides),P.faceRight=!(v&&v.collides)):P.resetFaces())}};l.exports=u},13125:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),x=new d,u=function(h,o,n,r){var f=n.tilemapLayer,a=f.cullPaddingX,c=f.cullPaddingY,p=f.tilemap.tileToWorldXY(h,o,x,r,f);return p.x>r.worldView.x+f.scaleX*n.tileWidth*(-a-.5)&&p.x<r.worldView.right+f.scaleX*n.tileWidth*(a-.5)&&p.y>r.worldView.y+f.scaleY*n.tileHeight*(-c-1)&&p.y<r.worldView.bottom+f.scaleY*n.tileHeight*(c-.5)};l.exports=u},17347:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(60386),x=e(50811),u=e(62839),h=e(29633),o=function(n,r,f,a,c,p,v,m){v===void 0&&(v=!0);var y=x(n,r,f,a,null,m),P=[];y.forEach(function(F){var b=new h(F.layer,F.index,F.x,F.y,F.width,F.height,F.baseWidth,F.baseHeight);b.copy(F),P.push(b)});for(var E=c-n,S=p-r,w=0;w<P.length;w++){var R=P[w],A=R.x+E,O=R.y+S;u(A,O,m)&&m.data[O][A]&&(R.x=A,R.y=O,R.updatePixelXY(),m.data[O][A]=R)}v&&d(c-1,p-1,f+2,a+2,m),y.length=0,P.length=0};l.exports=o},93604:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),x=e(51202),u=function(h,o,n,r,f,a){n||(n={}),Array.isArray(h)||(h=[h]);var c=a.tilemapLayer;r||(r=c.scene),f||(f=r.cameras.main);var p=d(0,0,a.width,a.height,null,a),v=[],m;for(m=0;m<p.length;m++){var y=p[m];if(h.indexOf(y.index)!==-1){var P=c.tileToWorldXY(y.x,y.y,void 0,f,a);n.x=P.x,n.y=P.y,v.push(r.make.sprite(n))}}if(typeof o=="number")for(m=0;m<h.length;m++)x(h[m],o,0,0,a.width,a.height,a);else if(Array.isArray(o))for(m=0;m<h.length;m++)x(h[m],o[m],0,0,a.width,a.height,a);return v};l.exports=u},71586:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),x=e(82127),u=e(84314),h=new d,o=function(n,r){var f=n.tilemapLayer.tilemap,a=n.tilemapLayer,c=Math.floor(f.tileWidth*a.scaleX),p=Math.floor(f.tileHeight*a.scaleY),v=u(r.worldView.x-a.x,c,0,!0)-a.cullPaddingX,m=x(r.worldView.right-a.x,c,0,!0)+a.cullPaddingX,y=u(r.worldView.y-a.y,p,0,!0)-a.cullPaddingY,P=x(r.worldView.bottom-a.y,p,0,!0)+a.cullPaddingY;return h.setTo(v,y,m-v,P-y)};l.exports=o},381:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(71586),x=e(6987),u=function(h,o,n,r){n===void 0&&(n=[]),r===void 0&&(r=0),n.length=0;var f=h.tilemapLayer,a=d(h,o);return(f.skipCull||f.scrollFactorX!==1||f.scrollFactorY!==1)&&(a.left=0,a.right=h.width,a.top=0,a.bottom=h.height),x(h,a,r,n),n};l.exports=u},97734:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),x=e(60386),u=e(68234),h=function(o,n,r,f,a,c,p){for(var v=p.collideIndexes.indexOf(o)!==-1,m=d(n,r,f,a,null,p),y=0;y<m.length;y++)m[y].index=o,u(m[y],v);c&&x(n-1,r-1,f+2,a+2,p)};l.exports=h},63555:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),x=function(u,h,o,n,r,f,a,c){var p=d(o,n,r,f,a,c);return p.filter(u,h)};l.exports=x},37982:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){d===void 0&&(d=0),x===void 0&&(x=!1);var h=0,o,n,r;if(x){for(n=u.height-1;n>=0;n--)for(o=u.width-1;o>=0;o--)if(r=u.data[n][o],r&&r.index===e){if(h===d)return r;h+=1}}else for(n=0;n<u.height;n++)for(o=0;o<u.width;o++)if(r=u.data[n][o],r&&r.index===e){if(h===d)return r;h+=1}return null};l.exports=T},48297:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),x=function(u,h,o,n,r,f,a,c){var p=d(o,n,r,f,a,c);return p.find(u,h)||null};l.exports=x},80916:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),x=function(u,h,o,n,r,f,a,c){var p=d(o,n,r,f,a,c);p.forEach(u,h)};l.exports=x},31493:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12920),x=e(381),u=e(37524),h=e(20887),o=e(72283),n=e(19242),r=function(f){return f===d.ORTHOGONAL?x:f===d.HEXAGONAL?u:f===d.STAGGERED?n:f===d.ISOMETRIC?h:o};l.exports=r},15494:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(62839),x=function(u,h,o,n){if(o===void 0&&(o=!1),d(u,h,n)){var r=n.data[h][u]||null;return r?r.index===-1?o?r:null:r:null}else return null};l.exports=x},24640:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15494),x=e(93736),u=new x,h=function(o,n,r,f,a){return a.tilemapLayer.worldToTileXY(o,n,!0,u,f),d(u.x,u.y,r,a)};l.exports=h},48495:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),x=function(u,h,o,n){var r=n.baseTileWidth,f=n.baseTileHeight,a=n.tilemapLayer,c=0,p=0;a&&(o||(o=a.scene.cameras.main),c=a.x+o.scrollX*(1-a.scrollFactorX),p=a.y+o.scrollY*(1-a.scrollFactorY),r*=a.scaleX,f*=a.scaleY);var v=c+u*r,m=p+h*f;return[new d(v,m),new d(v+r,m),new d(v+r,m+f),new d(v,m+f)]};l.exports=x},7160:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12920),x=e(63634),u=e(72283),h=e(48495),o=function(n){return n===d.ORTHOGONAL?h:n===d.ISOMETRIC?u:n===d.HEXAGONAL?x:(n===d.STAGGERED,u)};l.exports=o},16884:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12920),x=e(72283),u=e(44150),h=function(o){return o===d.ORTHOGONAL?u:x};l.exports=h},68182:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12920),x=e(21715),u=e(21808),h=e(72283),o=e(33388),n=e(46836),r=function(f){return f===d.ORTHOGONAL?n:f===d.ISOMETRIC?u:f===d.HEXAGONAL?x:f===d.STAGGERED?o:h};l.exports=r},3752:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12920),x=e(72283),u=e(84132),h=e(42477),o=function(n){return n===d.ORTHOGONAL?h:n===d.STAGGERED?u:x};l.exports=o},50811:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72632),x=function(u,h,o,n,r,f){u===void 0&&(u=0),h===void 0&&(h=0),o===void 0&&(o=f.width),n===void 0&&(n=f.height),r||(r={});var a=d(r,"isNotEmpty",!1),c=d(r,"isColliding",!1),p=d(r,"hasInterestingFace",!1);u<0&&(o+=u,u=0),h<0&&(n+=h,h=0),u+o>f.width&&(o=Math.max(f.width-u,0)),h+n>f.height&&(n=Math.max(f.height-h,0));for(var v=[],m=h;m<h+n;m++)for(var y=u;y<u+o;y++){var P=f.data[m][y];if(P!==null){if(a&&P.index===-1||c&&!P.collides||p&&!P.hasInterestingFace)continue;v.push(P)}}return v};l.exports=x},31674:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84068),x=e(50811),u=e(7563),h=e(72283),o=e(93736),n=function(p,v){return u.RectangleToTriangle(v,p)},r=new o,f=new o,a=new o,c=function(p,v,m,y){if(p===void 0)return[];var P=h;p instanceof d.Circle?P=u.CircleToRectangle:p instanceof d.Rectangle?P=u.RectangleToRectangle:p instanceof d.Triangle?P=n:p instanceof d.Line&&(P=u.LineToRectangle),y.tilemapLayer.worldToTileXY(p.left,p.top,!0,f,m);var E=f.x,S=f.y;y.tilemapLayer.worldToTileXY(p.right,p.bottom,!1,a,m);var w=Math.ceil(a.x),R=Math.ceil(a.y),A=Math.max(w-E,1),O=Math.max(R-S,1),F=x(E,S,A,O,v,y),b=y.tileWidth,D=y.tileHeight;y.tilemapLayer&&(b*=y.tilemapLayer.scaleX,D*=y.tilemapLayer.scaleY);for(var I=[],B=new d.Rectangle(0,0,b,D),k=0;k<F.length;k++){var U=F[k];y.tilemapLayer.tileToWorldXY(U.x,U.y,r,m),B.x=r.x,B.y=r.y,P(p,B)&&I.push(U)}return I};l.exports=c},44662:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),x=e(93736),u=new x,h=new x,o=function(n,r,f,a,c,p,v){var m=v.tilemapLayer.tilemap._convert.WorldToTileXY;m(n,r,!0,u,p,v);var y=u.x,P=u.y;m(n+f,r+a,!1,h,p,v);var E=Math.ceil(h.x),S=Math.ceil(h.y);return d(y,P,E-y,S-P,c,v)};l.exports=o},29296:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12920),x=e(10618),u=e(806),h=function(o){return o===d.ORTHOGONAL?u:x};l.exports=h},32688:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12920),x=e(11516),u=e(18750),h=e(72283),o=e(90562),n=e(45676),r=function(f){return f===d.ORTHOGONAL?n:f===d.ISOMETRIC?u:f===d.HEXAGONAL?x:f===d.STAGGERED?o:h};l.exports=r},74326:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12920),x=e(10618),u=e(3689),h=e(70520),o=function(n){return n===d.ORTHOGONAL?h:n===d.STAGGERED?u:x};l.exports=o},46598:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(62839),x=function(u,h,o){if(d(u,h,o)){var n=o.data[h][u];return n!==null&&n.index>-1}else return!1};l.exports=x},28654:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(46598),x=e(93736),u=new x,h=function(o,n,r,f){f.tilemapLayer.worldToTileXY(o,n,!0,u,r);var a=u.x,c=u.y;return d(a,c,f)};l.exports=h},6358:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82127),x=e(84314),u=function(h,o){var n=h.tilemapLayer.tilemap,r=h.tilemapLayer,f=Math.floor(n.tileWidth*r.scaleX),a=Math.floor(n.tileHeight*r.scaleY),c=h.hexSideLength,p,v,m,y;if(this.staggerAxis==="y"){var P=(a-c)/2+c;p=x(o.worldView.x-r.x,f,0,!0)-r.cullPaddingX,v=d(o.worldView.right-r.x,f,0,!0)+r.cullPaddingX,m=x(o.worldView.y-r.y,P,0,!0)-r.cullPaddingY,y=d(o.worldView.bottom-r.y,P,0,!0)+r.cullPaddingY}else{var E=(f-c)/2+c;p=x(o.worldView.x-r.x,E,0,!0)-r.cullPaddingX,v=d(o.worldView.right-r.x,E,0,!0)+r.cullPaddingX,m=x(o.worldView.y-r.y,a,0,!0)-r.cullPaddingY,y=d(o.worldView.bottom-r.y,a,0,!0)+r.cullPaddingY}return{left:p,right:v,top:m,bottom:y}};l.exports=u},37524:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6358),x=e(6987),u=function(h,o,n,r){n===void 0&&(n=[]),r===void 0&&(r=0),n.length=0;var f=h.tilemapLayer,a=d(h,o);return f.skipCull&&f.scrollFactorX===1&&f.scrollFactorY===1&&(a.left=0,a.right=h.width,a.top=0,a.bottom=h.height),x(h,a,r,n),n};l.exports=u},63634:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(21715),x=e(93736),u=new x,h=function(o,n,r,f){var a=f.baseTileWidth,c=f.baseTileHeight,p=f.tilemapLayer;p&&(a*=p.scaleX,c*=p.scaleY);var v=d(o,n,u,r,f),m=[],y=.5773502691896257,P,E;this.staggerAxis==="y"?(P=y*a,E=c/2):(P=a/2,E=y*c);for(var S=0;S<6;S++){var w=2*Math.PI*(.5-S)/6;m.push(new x(v.x+P*Math.cos(w),v.y+E*Math.sin(w)))}return m};l.exports=h},21715:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),x=function(u,h,o,n,r){o||(o=new d);var f=r.baseTileWidth,a=r.baseTileHeight,c=r.tilemapLayer,p=0,v=0;c&&(n||(n=c.scene.cameras.main),p=c.x+n.scrollX*(1-c.scrollFactorX),v=c.y+n.scrollY*(1-c.scrollFactorY),f*=c.scaleX,a*=c.scaleY);var m=f/2,y=a/2,P,E;return this.staggerAxis==="y"?(P=p+f*u+f,E=v+1.5*h*y+y,h%2===0&&(this.staggerIndex==="odd"?P-=m:P+=m)):this.staggerAxis==="x"&&this.staggerIndex==="odd"&&(P=p+1.5*u*m+m,E=v+a*u+a,u%2===0&&(this.staggerIndex==="odd"?E-=y:E+=y)),o.set(P,E)};l.exports=x},11516:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),x=function(u,h,o,n,r,f){n||(n=new d);var a=f.baseTileWidth,c=f.baseTileHeight,p=f.tilemapLayer;p&&(r||(r=p.scene.cameras.main),u=u-(p.x+r.scrollX*(1-p.scrollFactorX)),h=h-(p.y+r.scrollY*(1-p.scrollFactorY)),a*=p.scaleX,c*=p.scaleY);var v=.5773502691896257,m=-.3333333333333333,y=0,P=.6666666666666666,E=a/2,S=c/2,w,R,A,O,F;f.staggerAxis==="y"?(w=(u-E)/(v*a),R=(h-S)/S,A=v*w+m*R,O=y*w+P*R):(w=(u-E)/E,R=(h-S)/(v*c),A=m*w+v*R,O=P*w+y*R),F=-A-O;var b=Math.round(A),D=Math.round(O),I=Math.round(F),B=Math.abs(b-A),k=Math.abs(D-O),U=Math.abs(I-F);B>k&&B>U?b=-D-I:k>U&&(D=-b-I);var X,H=D;return f.staggerIndex==="odd"?X=H%2===0?D/2+b:D/2+b-.5:X=H%2===0?D/2+b:D/2+b+.5,n.set(X,H)};l.exports=x},62839:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return e>=0&&e<x.width&&d>=0&&d<x.height};l.exports=T},20887:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(13125),x=function(u,h,o,n){o===void 0&&(o=[]),n===void 0&&(n=0),o.length=0;var r=u.tilemapLayer,f=u.data,a=u.width,c=u.height,p=r.skipCull,v=0,m=a,y=0,P=c,E,S,w;if(n===0){for(S=y;S<P;S++)for(E=v;E<m;E++)if(p||d(E,S,u,h)){if(w=f[S][E],!w||w.index===-1||!w.visible||w.alpha===0)continue;o.push(w)}}else if(n===1){for(S=y;S<P;S++)for(E=m;E>=v;E--)if(p||d(E,S,u,h)){if(w=f[S][E],!w||w.index===-1||!w.visible||w.alpha===0)continue;o.push(w)}}else if(n===2){for(S=P;S>=y;S--)for(E=v;E<m;E++)if(p||d(E,S,u,h)){if(w=f[S][E],!w||w.index===-1||!w.visible||w.alpha===0)continue;o.push(w)}}else if(n===3){for(S=P;S>=y;S--)for(E=m;E>=v;E--)if(p||d(E,S,u,h)){if(w=f[S][E],!w||w.index===-1||!w.visible||w.alpha===0)continue;o.push(w)}}return r.tilesDrawn=o.length,r.tilesTotal=a*c,o};l.exports=x},21808:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),x=function(u,h,o,n,r){o||(o=new d);var f=r.baseTileWidth,a=r.baseTileHeight,c=r.tilemapLayer,p=0,v=0;c&&(n||(n=c.scene.cameras.main),p=c.x+n.scrollX*(1-c.scrollFactorX),f*=c.scaleX,v=c.y+n.scrollY*(1-c.scrollFactorY),a*=c.scaleY);var m=p+(u-h)*(f/2),y=v+(u+h)*(a/2);return o.set(m,y)};l.exports=x},18750:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),x=function(u,h,o,n,r,f,a){n||(n=new d);var c=f.baseTileWidth,p=f.baseTileHeight,v=f.tilemapLayer;v&&(r||(r=v.scene.cameras.main),h=h-(v.y+r.scrollY*(1-v.scrollFactorY)),p*=v.scaleY,u=u-(v.x+r.scrollX*(1-v.scrollFactorX)),c*=v.scaleX);var m=c/2,y=p/2;u=u-m,a||(h=h-p);var P=.5*(u/m+h/y),E=.5*(-u/m+h/y);return o&&(P=Math.floor(P),E=Math.floor(E)),n.set(P,E)};l.exports=x},29003:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(29633),x=e(62839),u=e(92839),h=e(68234),o=function(n,r,f,a,c){if(a===void 0&&(a=!0),!x(r,f,c))return null;var p,v=c.data[f][r],m=v&&v.collides;n instanceof d?(c.data[f][r]===null&&(c.data[f][r]=new d(c,n.index,r,f,c.tileWidth,c.tileHeight)),c.data[f][r].copy(n)):(p=n,c.data[f][r]===null?c.data[f][r]=new d(c,p,r,f,c.tileWidth,c.tileHeight):c.data[f][r].index=p);var y=c.data[f][r],P=c.collideIndexes.indexOf(y.index)!==-1;if(p=n instanceof d?n.index:n,p===-1)y.width=c.tileWidth,y.height=c.tileHeight;else{var E=c.tilemapLayer.tilemap.tiles,S=E[p][2],w=c.tilemapLayer.tileset[S];y.width=w.tileWidth,y.height=w.tileHeight}return h(y,P),a&&m!==y.collides&&u(r,f,c),y};l.exports=o},48565:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(29003),x=e(93736),u=new x,h=function(o,n,r,f,a,c){return c.tilemapLayer.worldToTileXY(n,r,!0,u,a,c),d(o,u.x,u.y,f,c)};l.exports=h},56547:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(60386),x=e(29003),u=function(h,o,n,r,f){if(r===void 0&&(r=!0),!Array.isArray(h))return null;Array.isArray(h[0])||(h=[h]);for(var a=h.length,c=h[0].length,p=0;p<a;p++)for(var v=0;v<c;v++){var m=h[p][v];x(m,o+v,n+p,!1,f)}r&&d(o-1,n-1,c+2,a+2,f)};l.exports=u},91180:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),x=e(72861),u=function(h,o,n,r,f,a){var c,p=d(h,o,n,r,{},a);if(!f)for(f=[],c=0;c<p.length;c++)f.indexOf(p[c].index)===-1&&f.push(p[c].index);for(c=0;c<p.length;c++)p[c].index=x(f)};l.exports=u},929:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(29633),x=e(62839),u=e(92839),h=function(o,n,r,f,a){if(r===void 0&&(r=!0),f===void 0&&(f=!0),!x(o,n,a))return null;var c=a.data[n][o];if(c)a.data[n][o]=r?null:new d(a,-1,o,n,a.tileWidth,a.tileHeight);else return null;return f&&c&&c.collides&&u(o,n,a),c};l.exports=h},17384:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(929),x=e(93736),u=new x,h=function(o,n,r,f,a,c){return c.tilemapLayer.worldToTileXY(o,n,!0,u,a,c),d(u.x,u.y,r,f,c)};l.exports=h},93763:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),x=e(95509),u=new x(105,210,231,150),h=new x(243,134,48,200),o=new x(40,39,37,150),n=function(r,f,a){f===void 0&&(f={});var c=f.tileColor!==void 0?f.tileColor:u,p=f.collidingTileColor!==void 0?f.collidingTileColor:h,v=f.faceColor!==void 0?f.faceColor:o,m=d(0,0,a.width,a.height,null,a);r.translateCanvas(a.tilemapLayer.x,a.tilemapLayer.y),r.scaleCanvas(a.tilemapLayer.scaleX,a.tilemapLayer.scaleY);for(var y=0;y<m.length;y++){var P=m[y],E=P.width,S=P.height,w=P.pixelX,R=P.pixelY,A=P.collides?p:c;A!==null&&(r.fillStyle(A.color,A.alpha/255),r.fillRect(w,R,E,S)),w+=1,R+=1,E-=2,S-=2,v!==null&&(r.lineStyle(1,v.color,v.alpha/255),P.faceTop&&r.lineBetween(w,R,w+E,R),P.faceRight&&r.lineBetween(w+E,R,w+E,R+S),P.faceBottom&&r.lineBetween(w,R+S,w+E,R+S),P.faceLeft&&r.lineBetween(w,R,w,R+S))}};l.exports=n},51202:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),x=function(u,h,o,n,r,f,a){for(var c=d(o,n,r,f,null,a),p=0;p<c.length;p++)c[p]&&c[p].index===u&&(c[p].index=h)};l.exports=x},6987:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){var h=e.data,o=e.width,n=e.height,r=e.tilemapLayer,f=Math.max(0,d.left),a=Math.min(o,d.right),c=Math.max(0,d.top),p=Math.min(n,d.bottom),v,m,y;if(x===0)for(m=c;m<p;m++)for(v=f;h[m]&&v<a;v++)y=h[m][v],!(!y||y.index===-1||!y.visible||y.alpha===0)&&u.push(y);else if(x===1)for(m=c;m<p;m++)for(v=a;h[m]&&v>=f;v--)y=h[m][v],!(!y||y.index===-1||!y.visible||y.alpha===0)&&u.push(y);else if(x===2)for(m=p;m>=c;m--)for(v=f;h[m]&&v<a;v++)y=h[m][v],!(!y||y.index===-1||!y.visible||y.alpha===0)&&u.push(y);else if(x===3)for(m=p;m>=c;m--)for(v=a;h[m]&&v>=f;v--)y=h[m][v],!(!y||y.index===-1||!y.visible||y.alpha===0)&&u.push(y);return r.tilesDrawn=u.length,r.tilesTotal=o*n,u};l.exports=T},51710:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68234),x=e(60386),u=e(91181),h=function(o,n,r,f,a){n===void 0&&(n=!0),r===void 0&&(r=!0),a===void 0&&(a=!0),Array.isArray(o)||(o=[o]);for(var c=0;c<o.length;c++)u(o[c],n,f);if(a)for(var p=0;p<f.height;p++)for(var v=0;v<f.width;v++){var m=f.data[p][v];m&&o.indexOf(m.index)!==-1&&d(m,n)}r&&x(0,0,f.width,f.height,f)};l.exports=h},15216:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68234),x=e(60386),u=e(91181),h=function(o,n,r,f,a,c){if(r===void 0&&(r=!0),f===void 0&&(f=!0),c===void 0&&(c=!0),!(o>n)){for(var p=o;p<=n;p++)u(p,r,a);if(c)for(var v=0;v<a.height;v++)for(var m=0;m<a.width;m++){var y=a.data[v][m];y&&y.index>=o&&y.index<=n&&d(y,r)}f&&x(0,0,a.width,a.height,a)}};l.exports=h},33158:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68234),x=e(60386),u=e(91181),h=function(o,n,r,f){n===void 0&&(n=!0),r===void 0&&(r=!0),Array.isArray(o)||(o=[o]);for(var a=0;a<f.height;a++)for(var c=0;c<f.width;c++){var p=f.data[a][c];p&&o.indexOf(p.index)===-1&&(d(p,n),u(p.index,n,f))}r&&x(0,0,f.width,f.height,f)};l.exports=h},4180:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68234),x=e(60386),u=e(19256),h=function(o,n,r,f){n===void 0&&(n=!0),r===void 0&&(r=!0);for(var a=0;a<f.height;a++)for(var c=0;c<f.width;c++){var p=f.data[a][c];if(p){for(var v in o)if(u(p.properties,v)){var m=o[v];Array.isArray(m)||(m=[m]);for(var y=0;y<m.length;y++)p.properties[v]===m[y]&&d(p,n)}}}r&&x(0,0,f.width,f.height,f)};l.exports=h},18625:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68234),x=e(60386),u=function(h,o,n){h===void 0&&(h=!0),o===void 0&&(o=!0);for(var r=0;r<n.height;r++)for(var f=0;f<n.width;f++){var a=n.data[r][f];if(a){var c=a.getCollisionGroup();c&&c.objects&&c.objects.length>0&&d(a,h)}}o&&x(0,0,n.width,n.height,n)};l.exports=u},91181:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=x.collideIndexes.indexOf(e);d&&u===-1?x.collideIndexes.push(e):!d&&u!==-1&&x.collideIndexes.splice(u,1)};l.exports=T},68234:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){d?e.setCollision(!0,!0,!0,!0,!1):e.resetCollision(!1)};l.exports=T},11628:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){if(typeof e=="number")u.callbacks[e]=d!==null?{callback:d,callbackContext:x}:void 0;else for(var h=0,o=e.length;h<o;h++)u.callbacks[e[h]]=d!==null?{callback:d,callbackContext:x}:void 0};l.exports=T},72732:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),x=function(u,h,o,n,r,f,a){for(var c=d(u,h,o,n,null,a),p=0;p<c.length;p++)c[p].setCollisionCallback(r,f)};l.exports=x},34397:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),x=e(18592),u=function(h,o,n,r,f){var a=d(h,o,n,r,null,f),c=a.map(function(v){return v.index});x(c);for(var p=0;p<a.length;p++)a[p].index=c[p]};l.exports=u},53945:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82127),x=e(84314),u=function(h,o){var n=h.tilemapLayer.tilemap,r=h.tilemapLayer,f=Math.floor(n.tileWidth*r.scaleX),a=Math.floor(n.tileHeight*r.scaleY),c=x(o.worldView.x-r.x,f,0,!0)-r.cullPaddingX,p=d(o.worldView.right-r.x,f,0,!0)+r.cullPaddingX,v=x(o.worldView.y-r.y,a/2,0,!0)-r.cullPaddingY,m=d(o.worldView.bottom-r.y,a/2,0,!0)+r.cullPaddingY;return{left:c,right:p,top:v,bottom:m}};l.exports=u},19242:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(53945),x=e(6987),u=function(h,o,n,r){n===void 0&&(n=[]),r===void 0&&(r=0),n.length=0;var f=h.tilemapLayer,a=d(h,o);return f.skipCull&&f.scrollFactorX===1&&f.scrollFactorY===1&&(a.left=0,a.right=h.width,a.top=0,a.bottom=h.height),x(h,a,r,n),n};l.exports=u},33388:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),x=function(u,h,o,n,r){o||(o=new d);var f=r.baseTileWidth,a=r.baseTileHeight,c=r.tilemapLayer,p=0,v=0;c&&(n||(n=c.scene.cameras.main),p=c.x+n.scrollX*(1-c.scrollFactorX),f*=c.scaleX,v=c.y+n.scrollY*(1-c.scrollFactorY),a*=c.scaleY);var m=p+u*f+h%2*(f/2),y=v+h*(a/2);return o.set(m,y)};l.exports=x},84132:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=x.baseTileHeight,h=x.tilemapLayer,o=0;return h&&(d===void 0&&(d=h.scene.cameras.main),o=h.y+d.scrollY*(1-h.scrollFactorY),u*=h.scaleY),o+e*(u/2)+u};l.exports=T},90562:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),x=function(u,h,o,n,r,f){n||(n=new d);var a=f.baseTileWidth,c=f.baseTileHeight,p=f.tilemapLayer;p&&(r||(r=p.scene.cameras.main),h=h-(p.y+r.scrollY*(1-p.scrollFactorY)),c*=p.scaleY,u=u-(p.x+r.scrollX*(1-p.scrollFactorX)),a*=p.scaleX);var v=o?Math.floor(h/(c/2)):h/(c/2),m=o?Math.floor((u+v%2*.5*a)/a):(u+v%2*.5*a)/a;return n.set(m,v)};l.exports=x},3689:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){var h=u.baseTileHeight,o=u.tilemapLayer;return o&&(x||(x=o.scene.cameras.main),e=e-(o.y+x.scrollY*(1-o.scrollFactorY)),h*=o.scaleY),d?Math.floor(e/(h/2)):e/(h/2)};l.exports=T},55217:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),x=function(u,h,o,n,r,f,a){for(var c=d(o,n,r,f,null,a),p=0;p<c.length;p++)c[p]&&(c[p].index===u?c[p].index=h:c[p].index===h&&(c[p].index=u))};l.exports=x},44150:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=x.baseTileWidth,h=x.tilemapLayer,o=0;return h&&(d||(d=h.scene.cameras.main),o=h.x+d.scrollX*(1-h.scrollFactorX),u*=h.scaleX),o+e*u};l.exports=T},46836:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(44150),x=e(42477),u=e(93736),h=function(o,n,r,f,a){return r||(r=new u(0,0)),r.x=d(o,f,a),r.y=x(n,f,a),r};l.exports=h},42477:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=x.baseTileHeight,h=x.tilemapLayer,o=0;return h&&(d||(d=h.scene.cameras.main),o=h.y+d.scrollY*(1-h.scrollFactorY),u*=h.scaleY),o+e*u};l.exports=T},39677:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),x=function(u,h,o,n,r,f){if(r){var a,c=d(u,h,o,n,null,f),p=0;for(a=0;a<r.length;a++)p+=r[a].weight;if(!(p<=0))for(a=0;a<c.length;a++){for(var v=Math.random()*p,m=0,y=-1,P=0;P<r.length;P++)if(m+=r[P].weight,v<=m){var E=r[P].index;y=Array.isArray(E)?E[Math.floor(Math.random()*E.length)]:E;break}c[a].index=y}}};l.exports=x},806:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(45676),x=e(93736),u=new x,h=function(o,n,r,f){return d(o,0,n,u,r,f),u.x};l.exports=h},45676:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),x=function(u,h,o,n,r,f){o===void 0&&(o=!0),n||(n=new d);var a=f.baseTileWidth,c=f.baseTileHeight,p=f.tilemapLayer;p&&(r||(r=p.scene.cameras.main),u=u-(p.x+r.scrollX*(1-p.scrollFactorX)),h=h-(p.y+r.scrollY*(1-p.scrollFactorY)),a*=p.scaleX,c*=p.scaleY);var v=u/a,m=h/c;return o&&(v=Math.floor(v),m=Math.floor(m)),n.set(v,m)};l.exports=x},70520:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(45676),x=e(93736),u=new x,h=function(o,n,r,f){return d(0,o,n,u,r,f),u.y};l.exports=h},5047:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={CalculateFacesAt:e(92839),CalculateFacesWithin:e(60386),CheckIsoBounds:e(13125),Copy:e(17347),CreateFromTiles:e(93604),CullBounds:e(71586),CullTiles:e(381),Fill:e(97734),FilterTiles:e(63555),FindByIndex:e(37982),FindTile:e(48297),ForEachTile:e(80916),GetCullTilesFunction:e(31493),GetTileAt:e(15494),GetTileAtWorldXY:e(24640),GetTileCorners:e(48495),GetTileCornersFunction:e(7160),GetTilesWithin:e(50811),GetTilesWithinShape:e(31674),GetTilesWithinWorldXY:e(44662),GetTileToWorldXFunction:e(16884),GetTileToWorldXYFunction:e(68182),GetTileToWorldYFunction:e(3752),GetWorldToTileXFunction:e(29296),GetWorldToTileXYFunction:e(32688),GetWorldToTileYFunction:e(74326),HasTileAt:e(46598),HasTileAtWorldXY:e(28654),HexagonalCullBounds:e(6358),HexagonalCullTiles:e(37524),HexagonalGetTileCorners:e(63634),HexagonalTileToWorldXY:e(21715),HexagonalWorldToTileXY:e(11516),IsInLayerBounds:e(62839),IsometricCullTiles:e(20887),IsometricTileToWorldXY:e(21808),IsometricWorldToTileXY:e(18750),PutTileAt:e(29003),PutTileAtWorldXY:e(48565),PutTilesAt:e(56547),Randomize:e(91180),RemoveTileAt:e(929),RemoveTileAtWorldXY:e(17384),RenderDebug:e(93763),ReplaceByIndex:e(51202),RunCull:e(6987),SetCollision:e(51710),SetCollisionBetween:e(15216),SetCollisionByExclusion:e(33158),SetCollisionByProperty:e(4180),SetCollisionFromCollisionGroup:e(18625),SetLayerCollisionIndex:e(91181),SetTileCollision:e(68234),SetTileIndexCallback:e(11628),SetTileLocationCallback:e(72732),Shuffle:e(34397),StaggeredCullBounds:e(53945),StaggeredCullTiles:e(19242),StaggeredTileToWorldXY:e(33388),StaggeredTileToWorldY:e(84132),StaggeredWorldToTileXY:e(90562),StaggeredWorldToTileY:e(3689),SwapByIndex:e(55217),TileToWorldX:e(44150),TileToWorldXY:e(46836),TileToWorldY:e(42477),WeightedRandomize:e(39677),WorldToTileX:e(806),WorldToTileXY:e(45676),WorldToTileY:e(70520)}},12920:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},84758:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={ORIENTATION:e(12920)};l.exports=d},52678:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(98611),x=e(84758),u={Components:e(5047),Parsers:e(34124),Formats:e(93560),ImageCollection:e(97042),ParseToTilemap:e(15043),Tile:e(29633),Tilemap:e(89797),TilemapCreator:e(4843),TilemapFactory:e(37940),Tileset:e(47975),TilemapLayer:e(87177),Orientation:e(12920),LayerData:e(94990),MapData:e(16586),ObjectLayer:e(15256)};u=d(!1,u,x.ORIENTATION),l.exports=u},94990:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12920),u=e(72632),h=new d({initialize:function(n){n===void 0&&(n={}),this.name=u(n,"name","layer"),this.x=u(n,"x",0),this.y=u(n,"y",0),this.width=u(n,"width",0),this.height=u(n,"height",0),this.tileWidth=u(n,"tileWidth",0),this.tileHeight=u(n,"tileHeight",0),this.baseTileWidth=u(n,"baseTileWidth",this.tileWidth),this.baseTileHeight=u(n,"baseTileHeight",this.tileHeight),this.orientation=u(n,"orientation",x.ORTHOGONAL),this.widthInPixels=u(n,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=u(n,"heightInPixels",this.height*this.baseTileHeight),this.alpha=u(n,"alpha",1),this.visible=u(n,"visible",!0),this.properties=u(n,"properties",[]),this.indexes=u(n,"indexes",[]),this.collideIndexes=u(n,"collideIndexes",[]),this.callbacks=u(n,"callbacks",[]),this.bodies=u(n,"bodies",[]),this.data=u(n,"data",[]),this.tilemapLayer=u(n,"tilemapLayer",null),this.hexSideLength=u(n,"hexSideLength",0),this.staggerAxis=u(n,"staggerAxis","y"),this.staggerIndex=u(n,"staggerIndex","odd")}});l.exports=h},16586:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12920),u=e(72632),h=new d({initialize:function(n){n===void 0&&(n={}),this.name=u(n,"name","map"),this.width=u(n,"width",0),this.height=u(n,"height",0),this.infinite=u(n,"infinite",!1),this.tileWidth=u(n,"tileWidth",0),this.tileHeight=u(n,"tileHeight",0),this.widthInPixels=u(n,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=u(n,"heightInPixels",this.height*this.tileHeight),this.format=u(n,"format",null),this.orientation=u(n,"orientation",x.ORTHOGONAL),this.renderOrder=u(n,"renderOrder","right-down"),this.version=u(n,"version","1"),this.properties=u(n,"properties",{}),this.layers=u(n,"layers",[]),this.images=u(n,"images",[]),this.objects=u(n,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=u(n,"collision",{}),this.tilesets=u(n,"tilesets",[]),this.imageCollections=u(n,"imageCollections",[]),this.tiles=u(n,"tiles",[]),this.hexSideLength=u(n,"hexSideLength",0),this.staggerAxis=u(n,"staggerAxis","y"),this.staggerIndex=u(n,"staggerIndex","odd")}});l.exports=h},15256:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72632),u=new d({initialize:function(o){o===void 0&&(o={}),this.name=x(o,"name","object layer"),this.opacity=x(o,"opacity",1),this.properties=x(o,"properties",{}),this.propertyTypes=x(o,"propertytypes",{}),this.type=x(o,"type","objectgroup"),this.visible=x(o,"visible",!0),this.objects=x(o,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});l.exports=u},21394:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12920),x=function(u){return u=u.toLowerCase(),u==="isometric"?d.ISOMETRIC:u==="staggered"?d.STAGGERED:u==="hexagonal"?d.HEXAGONAL:d.ORTHOGONAL};l.exports=x},90715:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93560),x=e(84346),u=e(96097),h=e(2378),o=e(44909),n=function(r,f,a,c,p,v){var m;switch(f){case d.ARRAY_2D:m=x(r,a,c,p,v);break;case d.CSV:m=u(r,a,c,p,v);break;case d.TILED_JSON:m=h(r,a,v);break;case d.WELTMEISTER:m=o(r,a,v);break;default:console.warn("Unrecognized tilemap data format: "+f),m=null}return m};l.exports=n},84346:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93560),x=e(94990),u=e(16586),h=e(29633),o=function(n,r,f,a,c){for(var p=new x({tileWidth:f,tileHeight:a}),v=new u({name:n,tileWidth:f,tileHeight:a,format:d.ARRAY_2D,layers:[p]}),m=[],y=r.length,P=0,E=0;E<r.length;E++){m[E]=[];for(var S=r[E],w=0;w<S.length;w++){var R=parseInt(S[w],10);isNaN(R)||R===-1?m[E][w]=c?null:new h(p,-1,w,E,f,a):m[E][w]=new h(p,R,w,E,f,a)}P===0&&(P=S.length)}return v.width=p.width=P,v.height=p.height=y,v.widthInPixels=p.widthInPixels=P*f,v.heightInPixels=p.heightInPixels=y*a,p.data=m,v};l.exports=o},96097:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93560),x=e(84346),u=function(h,o,n,r,f){var a=o.trim().split(`
`).map(function(p){return p.split(",")}),c=x(h,a,n,r,f);return c.format=d.CSV,c};l.exports=u},30951:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(94990),x=e(29633),u=function(h,o){for(var n=[],r=0;r<h.layer.length;r++){for(var f=h.layer[r],a=new d({name:f.name,width:f.width,height:f.height,tileWidth:f.tilesize,tileHeight:f.tilesize,visible:f.visible===1}),c=[],p=[],v=0;v<f.data.length;v++){for(var m=0;m<f.data[v].length;m++){var y=f.data[v][m]-1,P;y>-1?P=new x(a,y,m,v,f.tilesize,f.tilesize):P=o?null:new x(a,-1,m,v,f.tilesize,f.tilesize),c.push(P)}p.push(c),c=[]}a.data=p,n.push(a)}return n};l.exports=u},47488:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(47975),x=function(u){for(var h=[],o=[],n=0;n<u.layer.length;n++){var r=u.layer[n],f=r.tilesetName;f!==""&&o.indexOf(f)===-1&&(o.push(f),h.push(new d(f,0,r.tilesize,r.tilesize,0,0)))}return h};l.exports=x},44909:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93560),x=e(16586),u=e(30951),h=e(47488),o=function(n,r,f){if(r.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+n),null;for(var a=0,c=0,p=0;p<r.layer.length;p++)r.layer[p].width>a&&(a=r.layer[p].width),r.layer[p].height>c&&(c=r.layer[p].height);var v=new x({width:a,height:c,name:n,tileWidth:r.layer[0].tilesize,tileHeight:r.layer[0].tilesize,format:d.WELTMEISTER});return v.layers=u(r,f),v.tilesets=h(r),v};l.exports=o},24507:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={ParseTileLayers:e(30951),ParseTilesets:e(47488),ParseWeltmeister:e(44909)}},34124:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={FromOrientationString:e(21394),Parse:e(90715),Parse2DArray:e(84346),ParseCSV:e(96097),Impact:e(24507),Tiled:e(50044)}},48646:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(98611),x=function(u){for(var h,o,n,r,f,a=0;a<u.layers.length;a++){h=u.layers[a],r=null;for(var c=0;c<h.data.length;c++){f=h.data[c];for(var p=0;p<f.length;p++)o=f[p],!(o===null||o.index<0)&&(n=u.tiles[o.index][2],r=u.tilesets[n],o.width=r.tileWidth,o.height=r.tileHeight,r.tileProperties&&r.tileProperties[o.index-r.firstgid]&&(o.properties=d(o.properties,r.tileProperties[o.index-r.firstgid])))}}};l.exports=x},43908:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var d=window.atob(e),x=d.length,u=new Array(x/4),h=0;h<x;h+=4)u[h/4]=(d.charCodeAt(h)|d.charCodeAt(h+1)<<8|d.charCodeAt(h+2)<<16|d.charCodeAt(h+3)<<24)>>>0;return u};l.exports=T},14556:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(47975),x=function(u){var h,o,n=[];for(h=0;h<u.imageCollections.length;h++)for(var r=u.imageCollections[h],f=r.images,a=0;a<f.length;a++){var c=f[a];o=new d(c.image,c.gid,r.imageWidth,r.imageHeight,0,0),o.updateTileData(r.imageWidth,r.imageHeight),u.tilesets.push(o)}for(h=0;h<u.tilesets.length;h++){o=u.tilesets[h];for(var p=o.tileMargin,v=o.tileMargin,m=0,y=0,P=0,E=o.firstgid;E<o.firstgid+o.total&&(n[E]=[p,v,h],p+=o.tileWidth+o.tileSpacing,m++,!(m===o.total||(y++,y===o.columns&&(p=o.tileMargin,v+=o.tileHeight+o.tileSpacing,y=0,P++,P===o.rows))));E++);}return n};l.exports=x},92044:(l,T,e)=>{/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72632),x=function(u,h,o){if(!h)return{i:0,layers:u.layers,name:"",opacity:1,visible:!0,x:0,y:0};var n=h.x+d(h,"startx",0)*u.tilewidth+d(h,"offsetx",0),r=h.y+d(h,"starty",0)*u.tileheight+d(h,"offsety",0);return{i:0,layers:h.layers,name:o.name+h.name+"/",opacity:o.opacity*h.opacity,visible:o.visible&&h.visible,x:o.x+n,y:o.y+r}};l.exports=x},8847:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=2147483648,e=1073741824,d=536870912,x=function(u){var h=!!(u&T),o=!!(u&e),n=!!(u&d);u=u&~(T|e|d);var r=0,f=!1;return h&&o&&n?(r=Math.PI/2,f=!0):h&&o&&!n?(r=Math.PI,f=!1):h&&!o&&n?(r=Math.PI/2,f=!1):h&&!o&&!n?(r=0,f=!0):!h&&o&&n?(r=3*Math.PI/2,f=!1):!h&&o&&!n?(r=Math.PI,f=!0):!h&&!o&&n?(r=3*Math.PI/2,f=!0):!h&&!o&&!n&&(r=0,f=!1),{gid:u,flippedHorizontal:h,flippedVertical:o,flippedAntiDiagonal:n,rotation:r,flipped:f}};l.exports=x},78339:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72632),x=e(92044),u=function(h){for(var o=[],n=[],r=x(h);r.i<r.layers.length||n.length>0;){if(r.i>=r.layers.length){if(n.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}r=n.pop();continue}var f=r.layers[r.i];if(r.i++,f.type!=="imagelayer"){if(f.type==="group"){var a=x(h,f,r);n.push(r),r=a}continue}var c=d(f,"offsetx",0)+d(f,"startx",0),p=d(f,"offsety",0)+d(f,"starty",0);o.push({name:r.name+f.name,image:f.image,x:r.x+c+f.x,y:r.y+p+f.y,alpha:r.opacity*f.opacity,visible:r.visible&&f.visible,properties:d(f,"properties",{})})}return o};l.exports=u},2378:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(48646),x=e(14556),u=e(12920),h=e(28699),o=e(93560),n=e(21394),r=e(16586),f=e(78339),a=e(61136),c=e(95925),p=e(93392),v=function(m,y,P){var E=h(y),S=new r({width:E.width,height:E.height,name:m,tileWidth:E.tilewidth,tileHeight:E.tileheight,orientation:n(E.orientation),format:o.TILED_JSON,version:E.version,properties:E.properties,renderOrder:E.renderorder,infinite:E.infinite});S.orientation===u.HEXAGONAL&&(S.hexSideLength=E.hexsidelength,S.staggerAxis=E.staggeraxis,S.staggerIndex=E.staggerindex),S.layers=c(E,P),S.images=f(E);var w=p(E);return S.tilesets=w.tilesets,S.imageCollections=w.imageCollections,S.objects=a(E),S.tiles=x(S),d(S),S};l.exports=v},4281:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(28820),x=e(8847),u=function(n){return{x:n.x,y:n.y}},h=["id","name","type","rotation","properties","visible","x","y","width","height"],o=function(n,r,f){r===void 0&&(r=0),f===void 0&&(f=0);var a=d(n,h);if(a.x+=r,a.y+=f,n.gid){var c=x(n.gid);a.gid=c.gid,a.flippedHorizontal=c.flippedHorizontal,a.flippedVertical=c.flippedVertical,a.flippedAntiDiagonal=c.flippedAntiDiagonal}else n.polyline?a.polyline=n.polyline.map(u):n.polygon?a.polygon=n.polygon.map(u):n.ellipse?a.ellipse=n.ellipse:n.text?a.text=n.text:n.point?a.point=!0:a.rectangle=!0;return a};l.exports=o},61136:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72632),x=e(4281),u=e(15256),h=e(92044),o=function(n){for(var r=[],f=[],a=h(n);a.i<a.layers.length||f.length>0;){if(a.i>=a.layers.length){if(f.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}a=f.pop();continue}var c=a.layers[a.i];if(a.i++,c.opacity*=a.opacity,c.visible=a.visible&&c.visible,c.type!=="objectgroup"){if(c.type==="group"){var p=h(n,c,a);f.push(a),a=p}continue}c.name=a.name+c.name;for(var v=a.x+d(c,"startx",0)+d(c,"offsetx",0),m=a.y+d(c,"starty",0)+d(c,"offsety",0),y=[],P=0;P<c.objects.length;P++){var E=x(c.objects[P],v,m);y.push(E)}var S=new u(c);S.objects=y,r.push(S)}return r};l.exports=o},95925:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(43908),x=e(12920),u=e(92044),h=e(21394),o=e(72632),n=e(94990),r=e(8847),f=e(29633),a=function(c,p){for(var v=o(c,"infinite",!1),m=[],y=[],P=u(c);P.i<P.layers.length||y.length>0;){if(P.i>=P.layers.length){if(y.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}P=y.pop();continue}var E=P.layers[P.i];if(P.i++,E.type!=="tilelayer"){if(E.type==="group"){var S=u(c,E,P);y.push(P),P=S}continue}if(E.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+E.name+"'");continue}else if(E.encoding&&E.encoding==="base64"){if(E.chunks)for(var w=0;w<E.chunks.length;w++)E.chunks[w].data=d(E.chunks[w].data);E.data&&(E.data=d(E.data)),delete E.encoding}var R,A,O,F,b=[],D=0;if(v){var I=o(E,"startx",0)+E.x,B=o(E,"starty",0)+E.y;R=new n({name:P.name+E.name,x:P.x+o(E,"offsetx",0)+I*c.tilewidth,y:P.y+o(E,"offsety",0)+B*c.tileheight,width:E.width,height:E.height,tileWidth:c.tilewidth,tileHeight:c.tileheight,alpha:P.opacity*E.opacity,visible:P.visible&&E.visible,properties:o(E,"properties",[]),orientation:h(c.orientation)}),R.orientation===x.HEXAGONAL&&(R.hexSideLength=c.hexsidelength,R.staggerAxis=c.staggeraxis,R.staggerIndex=c.staggerindex);for(var k=0;k<E.height;k++){b[k]=[null];for(var U=0;U<E.width;U++)b[k][U]=null}for(k=0,K=E.chunks.length;k<K;k++)for(var X=E.chunks[k],H=X.x-I,N=X.y-B,z=0,L=0,G=X.data.length;L<G;L++){var V=D+H,Y=z+N;A=r(X.data[L]),A.gid>0?(O=new f(R,A.gid,V,Y,c.tilewidth,c.tileheight),O.rotation=A.rotation,O.flipX=A.flipped,b[Y][V]=O):(F=p?null:new f(R,-1,V,Y,c.tilewidth,c.tileheight),b[Y][V]=F),D++,D===X.width&&(z++,D=0)}}else{R=new n({name:P.name+E.name,x:P.x+o(E,"offsetx",0)+E.x,y:P.y+o(E,"offsety",0)+E.y,width:E.width,height:E.height,tileWidth:c.tilewidth,tileHeight:c.tileheight,alpha:P.opacity*E.opacity,visible:P.visible&&E.visible,properties:o(E,"properties",[]),orientation:h(c.orientation)}),R.orientation===x.HEXAGONAL&&(R.hexSideLength=c.hexsidelength,R.staggerAxis=c.staggeraxis,R.staggerIndex=c.staggerindex);for(var W=[],$=0,K=E.data.length;$<K;$++)A=r(E.data[$]),A.gid>0?(O=new f(R,A.gid,D,b.length,c.tilewidth,c.tileheight),O.rotation=A.rotation,O.flipX=A.flipped,W.push(O)):(F=p?null:new f(R,-1,D,b.length,c.tilewidth,c.tileheight),W.push(F)),D++,D===E.width&&(b.push(W),D=0,W=[])}R.data=b,m.push(R)}return m};l.exports=a},93392:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(47975),x=e(97042),u=e(4281),h=e(39642),o=function(n){for(var r=[],f=[],a=null,c,p=0;p<n.tilesets.length;p++){var v=n.tilesets[p];if(v.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(v.image){var m=new d(v.name,v.firstgid,v.tilewidth,v.tileheight,v.margin,v.spacing,void 0,void 0,v.tileoffset);if(n.version>1){var y=void 0,P=void 0;if(Array.isArray(v.tiles)){y=y||{},P=P||{};for(var E=0;E<v.tiles.length;E++){var S=v.tiles[E];if(S.properties){var w={};S.properties.forEach(function(k){w[k.name]=k.value}),P[S.id]=w}if(S.objectgroup&&((y[S.id]||(y[S.id]={})).objectgroup=S.objectgroup,S.objectgroup.objects)){var R=S.objectgroup.objects.map(function(k){return u(k)});y[S.id].objectgroup.objects=R}S.animation&&((y[S.id]||(y[S.id]={})).animation=S.animation),S.type&&((y[S.id]||(y[S.id]={})).type=S.type)}}Array.isArray(v.wangsets)&&(y=y||{},P=P||{},h(v.wangsets,y)),y&&(m.tileData=y,m.tileProperties=P)}else if(v.tileproperties&&(m.tileProperties=v.tileproperties),v.tiles){m.tileData=v.tiles;for(c in m.tileData){var A=m.tileData[c].objectgroup;if(A&&A.objects){var O=A.objects.map(function(k){return u(k)});m.tileData[c].objectgroup.objects=O}}}m.updateTileData(v.imagewidth,v.imageheight),r.push(m)}else{var F=new x(v.name,v.firstgid,v.tilewidth,v.tileheight,v.margin,v.spacing,v.properties),b=0;for(E=0;E<v.tiles.length;E++){S=v.tiles[E];var D=S.image,I=parseInt(S.id,10),B=v.firstgid+I;F.addImage(B,D),b=Math.max(I,b)}F.maxId=b,f.push(F)}a&&(a.lastgid=v.firstgid-1),a=v}return{tilesets:r,imageCollections:f}};l.exports=o},39642:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){for(var x=0;x<e.length;x++){var u=e[x],h=x;if(u.name&&u.name!==""&&(h=u.name),Array.isArray(u.wangtiles)&&u.wangtiles.length>0){var o={},n={},r,f,a;if(Array.isArray(u.edgecolors))for(r=0;r<u.edgecolors.length;r++)a=1+r,f=u.edgecolors[r],f.name!==""&&(o[a]=f.name);if(Array.isArray(u.cornercolors))for(r=0;r<u.cornercolors.length;r++)a=1+r,f=u.cornercolors[r],f.name!==""&&(n[a]=f.name);if(Array.isArray(u.colors))for(r=0;r<u.colors.length;r++)f=u.colors[r],a=1+r,f.name!==""&&(o[a]=n[a]=f.name);for(var c=[o,n,o,n,o,n,o,n],p=0;p<u.wangtiles.length;p++){var v=u.wangtiles[p],m=d[v.tileid]||(d[v.tileid]={});m=m.wangid||(m.wangid={});for(var y=[],P=0;P<Math.min(c.length,v.wangid.length);P++){if(f=v.wangid[P],f===0){y.push(void 0);continue}var E=c[P][f];if(E!==void 0){y.push(E);continue}y.push(f)}m[h]=y}}}};l.exports=T},50044:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={AssignTileProperties:e(48646),Base64Decode:e(43908),BuildTilesetIndex:e(14556),CreateGroupLayer:e(92044),ParseGID:e(8847),ParseImageLayers:e(78339),ParseJSONTiled:e(2378),ParseObject:e(4281),ParseObjectLayers:e(61136),ParseTileLayers:e(95925),ParseTilesets:e(93392)}},73779:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(91963),u=e(7599),h=e(57911),o=e(66458),n=new d({initialize:function(f){this.scene=f,this.systems=f.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],f.sys.events.once(u.BOOT,this.boot,this),f.sys.events.on(u.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(u.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var r=this.systems.events;r.on(u.PRE_UPDATE,this.preUpdate,this),r.on(u.UPDATE,this.update,this),r.once(u.SHUTDOWN,this.shutdown,this)},addEvent:function(r){var f;return r instanceof h?(f=r,this.removeEvent(f),f.elapsed=f.startAt,f.hasDispatched=!1,f.repeatCount=f.repeat===-1||f.loop?999999999999:f.repeat):f=new h(r),this._pendingInsertion.push(f),f},delayedCall:function(r,f,a,c){return this.addEvent({delay:r,callback:f,args:a,callbackScope:c})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(r){Array.isArray(r)||(r=[r]);for(var f=0;f<r.length;f++){var a=r[f];o(this._pendingRemoval,a),o(this._pendingInsertion,a),o(this._active,a)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var r=this._pendingRemoval.length,f=this._pendingInsertion.length;if(!(r===0&&f===0)){var a,c;for(a=0;a<r;a++){c=this._pendingRemoval[a];var p=this._active.indexOf(c);p>-1&&this._active.splice(p,1),c.destroy()}for(a=0;a<f;a++)c=this._pendingInsertion[a],this._active.push(c);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(r,f){if(this.now=r,!this.paused){f*=this.timeScale;for(var a=0;a<this._active.length;a++){var c=this._active[a];if(!c.paused&&(c.elapsed+=f*c.timeScale,c.elapsed>=c.delay)){var p=c.elapsed-c.delay;if(c.elapsed=c.delay,!c.hasDispatched&&c.callback&&(c.hasDispatched=!0,c.callback.apply(c.callbackScope,c.args)),c.repeatCount>0){if(c.repeatCount--,p>=c.delay)for(;p>=c.delay&&c.repeatCount>0;)c.callback&&c.callback.apply(c.callbackScope,c.args),p-=c.delay,c.repeatCount--;c.elapsed=p,c.hasDispatched=!1}else c.hasDispatched&&this._pendingRemoval.push(c)}}}},shutdown:function(){var r;for(r=0;r<this._pendingInsertion.length;r++)this._pendingInsertion[r].destroy();for(r=0;r<this._active.length;r++)this._active[r].destroy();for(r=0;r<this._pendingRemoval.length;r++)this._pendingRemoval[r].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var f=this.systems.events;f.off(u.PRE_UPDATE,this.preUpdate,this),f.off(u.UPDATE,this.update,this),f.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});x.register("Clock",n,"time"),l.exports=n},20517:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(6659),u=e(61286),h=e(72632),o=e(7599),n=new d({Extends:x,initialize:function(f,a){x.call(this),this.scene=f,this.systems=f.sys,this.elapsed=0,this.paused=!0,this.complete=!1,this.totalComplete=0,this.events=[];var c=this.systems.events;c.on(o.PRE_UPDATE,this.preUpdate,this),c.on(o.UPDATE,this.update,this),c.once(o.SHUTDOWN,this.destroy,this),a&&this.add(a)},preUpdate:function(r,f){this.paused||(this.elapsed+=f)},update:function(){if(!this.paused){var r,f=this.events,a=!1,c=this.systems,p;for(r=0;r<f.length;r++){var v=f[r];if(!v.complete&&v.time<=this.elapsed){if(v.complete=!0,this.totalComplete++,v.once&&(a=!0),v.set&&v.target)for(var m in v.set)v.target[m]=v.set[m];v.tween&&c.tweens.add(v.tween),v.sound&&(typeof v.sound=="string"?c.sound.play(v.sound):c.sound.play(v.sound.key,v.sound.config)),p=v.target?v.target:this,v.event&&this.emit(v.event,p),v.run&&v.run.call(p),v.stop&&this.stop()}}if(a)for(r=0;r<f.length;r++)f[r].complete&&f[r].once&&(f.splice(r,1),r--);this.totalComplete>=f.length&&(this.complete=!0)}},play:function(r){return r===void 0&&(r=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,r&&this.reset(),this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(){this.elapsed=0;for(var r=0;r<this.events.length;r++)this.events[r].complete=!1;return this.play(!1)},add:function(r){Array.isArray(r)||(r=[r]);var f=this.events,a=0;f.length>0&&(a=f[f.length-1].time);for(var c=0;c<r.length;c++){var p=r[c],v=h(p,"at",0),m=h(p,"in",null);m!==null&&(v=this.elapsed+m);var y=h(p,"from",null);y!==null&&(v=a+y),f.push({complete:!1,time:v,run:h(p,"run",null),event:h(p,"event",null),target:h(p,"target",null),set:h(p,"set",null),tween:h(p,"tween",null),sound:h(p,"sound",null),once:h(p,"once",!1),stop:h(p,"stop",!1)}),a=v}return this.complete=!1,this},clear:function(){return this.events=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){var r=Math.min(this.totalComplete,this.events.length);return r/this.events.length},destroy:function(){var r=this.systems.events;r.off(o.PRE_UPDATE,this.preUpdate,this),r.off(o.UPDATE,this.update,this),r.off(o.SHUTDOWN,this.destroy,this),this.scene=null,this.systems=null,this.events=[]}});u.register("timeline",function(r){return new n(this.scene,r)}),l.exports=n},57911:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72632),u=new d({initialize:function(o){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(o)},reset:function(h){if(this.delay=x(h,"delay",0),this.repeat=x(h,"repeat",0),this.loop=x(h,"loop",!1),this.callback=x(h,"callback",void 0),this.callbackScope=x(h,"callbackScope",this),this.args=x(h,"args",[]),this.timeScale=x(h,"timeScale",1),this.startAt=x(h,"startAt",0),this.paused=x(h,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay===0&&(this.repeat>0||this.loop))throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var h=this.delay+this.delay*this.repeat,o=this.elapsed+this.delay*(this.repeat-this.repeatCount);return o/h}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(h){h===void 0&&(h=!1),this.elapsed=this.delay,this.hasDispatched=!h,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});l.exports=u},97121:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={Clock:e(73779),Timeline:e(20517),TimerEvent:e(57911)}},64532:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66458),x=e(56694),u=e(5454),h=e(68710),o=e(91963),n=e(7599),r=e(91944),f=e(39366),a=e(68061),c=e(45641),p=e(56034),v=new x({initialize:function(y){this.scene=y,this.events=y.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(n.UPDATE,this.update,this),this.events.once(n.SHUTDOWN,this.shutdown,this)},create:function(m){Array.isArray(m)||(m=[m]);for(var y=[],P=0;P<m.length;P++){var E=m[P];E instanceof f||E instanceof c?y.push(E):Array.isArray(E.tweens)?y.push(p(this,E)):y.push(a(this,E))}return y.length===1?y[0]:y},add:function(m){var y=m,P=this.tweens;return y instanceof f||y instanceof c||(Array.isArray(y.tweens)?y=p(this,y):y=a(this,y)),P.push(y.reset()),y},addMultiple:function(m){for(var y,P=[],E=this.tweens,S=0;S<m.length;S++)y=m[S],y instanceof f||y instanceof c||(Array.isArray(y.tweens)?y=p(this,y):y=a(this,y)),E.push(y.reset()),P.push(y);return P},chain:function(m){var y=p(this,m);return this.tweens.push(y.init()),y},getChainedTweens:function(m){return m.getChainedTweens()},has:function(m){return this.tweens.indexOf(m)>-1},existing:function(m){return this.has(m)||this.tweens.push(m.reset()),this},addCounter:function(m){var y=h(this,m);return this.tweens.push(y.reset()),y},stagger:function(m,y){return r(m,y)},setLagSmooth:function(m,y){return m===void 0&&(m=1/1e-8),y===void 0&&(y=0),this.maxLag=m,this.lagSkip=Math.min(y,this.maxLag),this},setFps:function(m){return m===void 0&&(m=240),this.gap=1e3/m,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(m){var y=Date.now()-this.prevTime;y>this.maxLag&&(this.startTime+=y-this.lagSkip),this.prevTime+=y;var P=this.prevTime-this.startTime,E=P-this.nextTime,S=P-this.time*1e3;return E>0||m?(P/=1e3,this.time=P,this.nextTime+=E+(E>=this.gap?4:this.gap-E)):S=0,S},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(m){m===void 0&&(m=!1);var y=this.getDelta(m);if(!(y<=0)){this.processing=!0;var P,E,S=[],w=this.tweens;for(P=0;P<w.length;P++)E=w[P],E.update(y)&&S.push(E);var R=S.length;if(R&&w.length>0){for(P=0;P<R;P++){E=S[P];var A=w.indexOf(E);A>-1&&(E.isPendingRemove()||E.isDestroyed())&&(w.splice(A,1),E.destroy())}S.length=0}this.processing=!1}},remove:function(m){return this.processing?m.setPendingRemoveState():(d(this.tweens,m),m.setRemovedState()),this},reset:function(m){return this.existing(m),m.seek(),m.setActiveState(),this},makeActive:function(m){return this.existing(m),m.setActiveState(),this},each:function(m,y){var P,E=[null];for(P=1;P<arguments.length;P++)E.push(arguments[P]);return this.tweens.forEach(function(S){E[0]=S,m.apply(y,E)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(m){var y=[],P=this.tweens;Array.isArray(m)?m=u(m):m=[m];for(var E=m.length,S=0;S<P.length;S++)for(var w=P[S],R=0;R<E;R++)!w.isDestroyed()&&w.hasTarget(m[R])&&y.push(w);return y},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(m){return this.timeScale=m,this},isTweening:function(m){for(var y=this.tweens,P,E=0;E<y.length;E++)if(P=y[E],P.isPlaying()&&P.hasTarget(m))return!0;return!1},killAll:function(){for(var m=this.processing?this.getTweens():this.tweens,y=0;y<m.length;y++)m[y].destroy();return this.processing||(m.length=0),this},killTweensOf:function(m){for(var y=this.getTweensOf(m),P=0;P<y.length;P++)y[P].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(n.UPDATE,this.update,this),this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.events=null}});o.register("TweenManager",v,"tweens"),l.exports=v},63130:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return e&&e.hasOwnProperty(d)?e[d]:x};l.exports=T},21902:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(35060),x=e(40587),u=function(h,o){var n=d.Power0;if(typeof h=="string")if(d.hasOwnProperty(h))n=d[h];else{var r="";if(h.indexOf(".")){r=h.substring(h.indexOf(".")+1);var f=r.toLowerCase();f==="in"?r="easeIn":f==="out"?r="easeOut":f==="inout"&&(r="easeInOut")}h=x(h.substring(0,h.indexOf(".")+1)+r),d.hasOwnProperty(h)&&(n=d[h])}else typeof h=="function"&&(n=h);if(!o)return n;var a=o.slice(0);return a.unshift(0),function(c){return a[0]=c,n.apply(this,a)}};l.exports=u},4840:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(63210),x=e(88332),u=e(47614),h={bezier:d,catmull:x,catmullrom:x,linear:u},o=function(n){if(n===null)return null;var r=h.linear;return typeof n=="string"?h.hasOwnProperty(n)&&(r=h[n]):typeof n=="function"&&(r=n),r};l.exports=o},28348:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u;if(e.hasOwnProperty(d)){var h=typeof e[d];h==="function"?u=function(o,n,r,f,a,c){return e[d](o,n,r,f,a,c)}:u=function(){return e[d]}}else typeof x=="function"?u=x:u=function(){return x};return u};l.exports=T},92407:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(53709),x=function(u){var h,o=[];if(u.hasOwnProperty("props"))for(h in u.props)h.substring(0,1)!=="_"&&o.push({key:h,value:u.props[h]});else for(h in u)d.indexOf(h)===-1&&h.substring(0,1)!=="_"&&o.push({key:h,value:u[h]});return o};l.exports=x},65868:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(10850),x=function(u){var h=d(u,"targets",null);return h===null||(typeof h=="function"&&(h=h.call()),Array.isArray(h)||(h=[h])),h};l.exports=x},9744:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(17489),x=e(61616);function u(f){return!!f.getActive&&typeof f.getActive=="function"}function h(f){return!!f.getStart&&typeof f.getStart=="function"}function o(f){return!!f.getEnd&&typeof f.getEnd=="function"}function n(f){return h(f)||o(f)||u(f)}var r=function(f,a){var c,p=function(X,H,N){return N},v=function(X,H,N){return N},m=null,y=typeof a;if(y==="number")p=function(){return a};else if(Array.isArray(a))v=function(){return a[0]},p=function(){return a[a.length-1]};else if(y==="string"){var P=a.toLowerCase(),E=P.substring(0,6)==="random",S=P.substring(0,3)==="int";if(E||S){var w=P.indexOf("("),R=P.indexOf(")"),A=P.indexOf(",");if(w&&R&&A){var O=parseFloat(P.substring(w+1,A)),F=parseFloat(P.substring(A+1,R));E?p=function(){return x(O,F)}:p=function(){return d(O,F)}}else throw new Error("invalid random() format")}else{P=P[0];var b=parseFloat(a.substr(2));switch(P){case"+":p=function(X,H,N){return N+b};break;case"-":p=function(X,H,N){return N-b};break;case"*":p=function(X,H,N){return N*b};break;case"/":p=function(X,H,N){return N/b};break;default:p=function(){return parseFloat(a)}}}}else if(y==="function")p=a;else if(y==="object")if(n(a))u(a)&&(m=a.getActive),o(a)&&(p=a.getEnd),h(a)&&(v=a.getStart);else if(a.hasOwnProperty("value"))c=r(f,a.value);else{var D=a.hasOwnProperty("to"),I=a.hasOwnProperty("from"),B=a.hasOwnProperty("start");if(D&&(I||B)){if(c=r(f,a.to),B){var k=r(f,a.start);c.getActive=k.getEnd}if(I){var U=r(f,a.from);c.getStart=U.getEnd}}}return c||(c={getActive:m,getEnd:p,getStart:v}),c};l.exports=r},68710:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(502),x=e(99730),u=e(20494),h=e(63130),o=e(21902),n=e(28348),r=e(10850),f=e(9744),a=e(72066),c=e(39366),p=function(v,m,y){if(m instanceof c)return m.parent=v,m;y===void 0?y=x:y=a(x,y);var P=r(m,"from",0),E=r(m,"to",1),S=[{value:P}],w=r(m,"delay",y.delay),R=r(m,"easeParams",y.easeParams),A=r(m,"ease",y.ease),O=f("value",E),F=new c(v,S),b=F.add(0,"value",O.getEnd,O.getStart,O.getActive,o(r(m,"ease",A),r(m,"easeParams",R)),n(m,"delay",w),r(m,"duration",y.duration),h(m,"yoyo",y.yoyo),r(m,"hold",y.hold),r(m,"repeat",y.repeat),r(m,"repeatDelay",y.repeatDelay),!1,!1);b.start=P,b.current=P,F.completeDelay=u(m,"completeDelay",0),F.loop=Math.round(u(m,"loop",0)),F.loopDelay=Math.round(u(m,"loopDelay",0)),F.paused=h(m,"paused",!1),F.persist=h(m,"persist",!1),F.callbackScope=r(m,"callbackScope",F);for(var D=d.TYPES,I=0;I<D.length;I++){var B=D[I],k=r(m,B,!1);if(k){var U=r(m,B+"Params",[]);F.setCallback(B,k,U)}}return F};l.exports=p},91944:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(21902),x=e(10850),u=e(83392),h=function(o,n){n===void 0&&(n={});var r,f=x(n,"start",0),a=x(n,"ease",null),c=x(n,"grid",null),p=x(n,"from",0),v=p==="first",m=p==="center",y=p==="last",P=typeof p=="number",E=Array.isArray(o),S=parseFloat(E?o[0]:o),w=E?parseFloat(o[1]):0,R=Math.max(S,w);if(E&&(f+=S),c){var A=c[0],O=c[1],F=0,b=0,D=0,I=0,B=[];y?(F=A-1,b=O-1):P?(F=p%A,b=Math.floor(p/A)):m&&(F=(A-1)/2,b=(O-1)/2);for(var k=u.MIN_SAFE_INTEGER,U=0;U<O;U++){B[U]=[];for(var X=0;X<A;X++){D=F-X,I=b-U;var H=Math.sqrt(D*D+I*I);H>k&&(k=H),B[U][X]=H}}}var N=a?d(a):null;return c?r=function(z,L,G,V){var Y=0,W=V%A,$=Math.floor(V/A);W>=0&&W<A&&$>=0&&$<O&&(Y=B[$][W]);var K;if(E){var j=w-S;N?K=Y/k*j*N(Y/k):K=Y/k*j}else N?K=Y*S*N(Y/k):K=Y*S;return K+f}:r=function(z,L,G,V,Y){Y--;var W;v?W=V:m?W=Math.abs(Y/2-V):y?W=Y-V:P&&(W=Math.abs(p-V));var $;if(E){var K;m?K=(w-S)/Y*(W*2):K=(w-S)/Y*W,N?$=K*N(W/Y):$=K}else N?$=Y*R*N(W/Y):$=W*S;return $+f},r};l.exports=h},68061:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(502),x=e(99730),u=e(20494),h=e(63130),o=e(21902),n=e(4840),r=e(28348),f=e(92407),a=e(65868),c=e(10850),p=e(9744),v=e(72066),m=e(39366),y=function(P,E,S){if(E instanceof m)return E.parent=P,E;S===void 0?S=x:S=v(x,S);var w=a(E);!w&&S.targets&&(w=S.targets);for(var R=f(E),A=c(E,"delay",S.delay),O=c(E,"duration",S.duration),F=c(E,"easeParams",S.easeParams),b=c(E,"ease",S.ease),D=c(E,"hold",S.hold),I=c(E,"repeat",S.repeat),B=c(E,"repeatDelay",S.repeatDelay),k=h(E,"yoyo",S.yoyo),U=h(E,"flipX",S.flipX),X=h(E,"flipY",S.flipY),H=c(E,"interpolation",S.interpolation),N=function(q,_,et,tt){if(et==="texture"){var rt=tt,ft=void 0;Array.isArray(tt)?(rt=tt[0],ft=tt[1]):tt.hasOwnProperty("value")?(rt=tt.value,Array.isArray(tt.value)?(rt=tt.value[0],ft=tt.value[1]):typeof tt.value=="string"&&(rt=tt.value)):typeof tt=="string"&&(rt=tt),q.addFrame(_,rt,ft,r(tt,"delay",A),c(tt,"duration",O),c(tt,"hold",D),c(tt,"repeat",I),c(tt,"repeatDelay",B),h(tt,"flipX",U),h(tt,"flipY",X))}else{var vt=p(et,tt),ct=n(c(tt,"interpolation",H));q.add(_,et,vt.getEnd,vt.getStart,vt.getActive,o(c(tt,"ease",b),c(tt,"easeParams",F)),r(tt,"delay",A),c(tt,"duration",O),h(tt,"yoyo",k),c(tt,"hold",D),c(tt,"repeat",I),c(tt,"repeatDelay",B),h(tt,"flipX",U),h(tt,"flipY",X),ct,ct?tt:null)}},z=new m(P,w),L=0;L<R.length;L++)for(var G=R[L].key,V=R[L].value,Y=0;Y<w.length;Y++)G==="scale"&&!w[Y].hasOwnProperty("scale")?(N(z,Y,"scaleX",V),N(z,Y,"scaleY",V)):N(z,Y,G,V);z.completeDelay=u(E,"completeDelay",0),z.loop=Math.round(u(E,"loop",0)),z.loopDelay=Math.round(u(E,"loopDelay",0)),z.paused=h(E,"paused",!1),z.persist=h(E,"persist",!1),z.callbackScope=c(E,"callbackScope",z);for(var W=d.TYPES,$=0;$<W.length;$++){var K=W[$],j=c(E,K,!1);if(j){var J=c(E,K+"Params",[]);z.setCallback(K,j,J)}}return z};l.exports=y},56034:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(502),x=e(20494),u=e(63130),h=e(65868),o=e(10850),n=e(68061),r=e(45641),f=function(a,c){if(c instanceof r)return c.parent=a,c;var p=new r(a);p.startDelay=o(c,"delay",0),p.completeDelay=x(c,"completeDelay",0),p.loop=Math.round(x(c,"loop",o(c,"repeat",0))),p.loopDelay=Math.round(x(c,"loopDelay",o(c,"repeatDelay",0))),p.paused=u(c,"paused",!1),p.persist=u(c,"persist",!0),p.callbackScope=o(c,"callbackScope",p);var v,m=d.TYPES;for(v=0;v<m.length;v++){var y=m[v],P=o(c,y,!1);if(P){var E=o(c,y+"Params",[]);p.setCallback(y,P,E)}}var S=o(c,"tweens",null);if(Array.isArray(S)){var w=[],R=h(c),A=void 0;for(R&&(A={targets:R}),v=0;v<S.length;v++)w.push(n(p,S[v],A));p.add(w)}return p};l.exports=f},79619:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={GetBoolean:e(63130),GetEaseFunction:e(21902),GetInterpolationFunction:e(4840),GetNewValue:e(28348),GetProps:e(92407),GetTargets:e(65868),GetValueOp:e(9744),NumberTweenBuilder:e(68710),StaggerBuilder:e(91944),TweenBuilder:e(68061)}},5570:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="active"},6383:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="complete"},72582:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="loop"},90281:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="pause"},80803:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="repeat"},13640:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="resume"},10472:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="start"},5379:l=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="stop"},43449:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="update"},61541:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports="yoyo"},54272:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={TWEEN_ACTIVE:e(5570),TWEEN_COMPLETE:e(6383),TWEEN_LOOP:e(72582),TWEEN_PAUSE:e(90281),TWEEN_RESUME:e(13640),TWEEN_REPEAT:e(80803),TWEEN_START:e(10472),TWEEN_STOP:e(5379),TWEEN_UPDATE:e(43449),TWEEN_YOYO:e(61541)}},75193:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={States:e(55303),Builders:e(79619),Events:e(54272),TweenManager:e(64532),Tween:e(39366),TweenData:e(15718),TweenFrameData:e(96490),BaseTween:e(502),TweenChain:e(45641)};l.exports=d},502:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(6659),u=e(54272),h=e(55303),o=new d({Extends:x,initialize:function(r){x.call(this),this.parent=r,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=h.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(n){return this.timeScale=n,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(u.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(u.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(u.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(u.TWEEN_COMPLETE,"onComplete")},complete:function(n){return n===void 0&&(n=0),n?(this.setCompleteDelayState(),this.countdown=n):this.onCompleteHandler(),this},completeAfterLoop:function(n){return n===void 0&&(n=0),this.loopCounter>n&&(this.loopCounter=n),this},remove:function(){return this.parent.remove(this),this},stop:function(){return!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(u.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(n){this.countdown-=n,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(u.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(n){return this.countdown-=n,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(u.TWEEN_START,"onStart"),n=0),n},updateCompleteDelay:function(n){this.countdown-=n,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(n,r,f){return f===void 0&&(f=[]),this.callbacks.hasOwnProperty(n)&&(this.callbacks[n]={func:r,params:f}),this},setPendingState:function(){this.state=h.PENDING},setActiveState:function(){this.state=h.ACTIVE},setLoopDelayState:function(){this.state=h.LOOP_DELAY},setCompleteDelayState:function(){this.state=h.COMPLETE_DELAY},setStartDelayState:function(){this.state=h.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=h.PENDING_REMOVE},setRemovedState:function(){this.state=h.REMOVED},setFinishedState:function(){this.state=h.FINISHED},setDestroyedState:function(){this.state=h.DESTROYED},isPending:function(){return this.state===h.PENDING},isActive:function(){return this.state===h.ACTIVE},isLoopDelayed:function(){return this.state===h.LOOP_DELAY},isCompleteDelayed:function(){return this.state===h.COMPLETE_DELAY},isStartDelayed:function(){return this.state===h.START_DELAY},isPendingRemove:function(){return this.state===h.PENDING_REMOVE},isRemoved:function(){return this.state===h.REMOVED},isFinished:function(){return this.state===h.FINISHED},isDestroyed:function(){return this.state===h.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(n){n.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});o.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],l.exports=o},65521:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(54272),u=e(55303),h=new d({initialize:function(n,r,f,a,c,p,v,m,y,P){this.tween=n,this.targetIndex=r,this.duration=a,this.totalDuration=0,this.delay=0,this.getDelay=f,this.yoyo=c,this.hold=p,this.repeat=v,this.repeatDelay=m,this.repeatCounter=0,this.flipX=y,this.flipY=P,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(o){o===void 0&&(o=this.current),this.tween.targets[this.targetIndex][this.key]=o},setCreatedState:function(){this.state=u.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=u.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=u.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=u.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=u.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=u.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=u.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=u.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===u.CREATED},isDelayed:function(){return this.state===u.DELAY},isPendingRender:function(){return this.state===u.PENDING_RENDER},isPlayingForward:function(){return this.state===u.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===u.PLAYING_BACKWARD},isHolding:function(){return this.state===u.HOLD_DELAY},isRepeating:function(){return this.state===u.REPEAT_DELAY},isComplete:function(){return this.state===u.COMPLETE},setStateFromEnd:function(o){this.yoyo?this.onRepeat(o,!0,!0):this.repeatCounter>0?this.onRepeat(o,!0,!1):this.setCompleteState()},setStateFromStart:function(o){this.repeatCounter>0?this.onRepeat(o,!1):this.setCompleteState()},reset:function(){var o=this.tween,n=o.totalTargets,r=this.targetIndex,f=o.targets[r],a=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(f,a,0,r,n,o),this.repeatCounter=this.repeat===-1?u.MAX:this.repeat,this.setPendingRenderState();var c=this.duration+this.hold;this.yoyo&&(c+=this.duration);var p=c+this.repeatDelay;this.totalDuration=this.delay+c,this.repeat===-1?(this.totalDuration+=p*u.MAX,o.isInfinite=!0):this.repeat>0&&(this.totalDuration+=p*this.repeat),this.totalDuration>o.duration&&(o.duration=this.totalDuration),this.delay<o.startDelay&&(o.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(o,n,r){var f=this.tween,a=f.totalTargets,c=this.targetIndex,p=f.targets[c],v=this.key,m=v!=="texture";if(this.elapsed=o,this.progress=o/this.duration,this.flipX&&p.toggleFlipX(),this.flipY&&p.toggleFlipY(),m&&(n||r)&&(this.start=this.getStartValue(p,v,this.start,c,a,f)),r){this.setPlayingBackwardState(),this.dispatchEvent(x.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,m&&(this.end=this.getEndValue(p,v,this.start,c,a,f)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-o,m&&(this.current=this.start,p[v]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(x.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});l.exports=h},99730:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};l.exports=T},53709:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]},39366:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(502),x=e(56694),u=e(54272),h=e(99325),o=e(61286),n=e(83392),r=e(55303),f=e(15718),a=e(96490),c=new x({Extends:d,initialize:function(v,m){d.call(this,v),this.targets=m,this.totalTargets=m.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0},add:function(p,v,m,y,P,E,S,w,R,A,O,F,b,D,I,B){var k=new f(this,p,v,m,y,P,E,S,w,R,A,O,F,b,D,I,B);return this.totalData=this.data.push(k),k},addFrame:function(p,v,m,y,P,E,S,w,R,A){var O=new a(this,p,v,m,y,P,E,S,w,R,A);return this.totalData=this.data.push(O),O},getValue:function(p){p===void 0&&(p=0);var v=null;return this.data&&(v=this.data[p].current),v},hasTarget:function(p){return this.targets&&this.targets.indexOf(p)!==-1},updateTo:function(p,v,m){if(m===void 0&&(m=!1),p!=="texture")for(var y=0;y<this.totalData;y++){var P=this.data[y];P.key===p&&(P.isPlayingForward()||P.isPlayingBackward())&&(P.end=v,m&&(P.start=P.current))}return this},restart:function(){switch(this.state){case r.REMOVED:case r.FINISHED:this.seek(),this.parent.makeActive(this);break;case r.PENDING:case r.PENDING_REMOVE:this.parent.reset(this);break;case r.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(u.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,d.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(p,v,m){if(p===void 0&&(p=0),v===void 0&&(v=16.6),m===void 0&&(m=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;m||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(u.TWEEN_ACTIVE,"onActive");var y=this.paused;if(this.paused=!1,p>0){for(var P=Math.floor(p/v),E=p-P*v,S=0;S<P;S++)this.update(v);E>0&&this.update(E)}return this.paused=y,this.isSeeking=!1,this},initTweenData:function(p){p===void 0&&(p=!1),this.duration=0,this.startDelay=n.MAX_SAFE_INTEGER;for(var v=this.data,m=0;m<this.totalData;m++)v[m].reset(p);this.duration=Math.max(this.duration,.01);var y=this.duration,P=this.completeDelay,E=this.loopCounter,S=this.loopDelay;E>0?this.totalDuration=y+P+(y+S)*E:this.totalDuration=y+P},reset:function(p){return p===void 0&&(p=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=r.MAX),p||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(u.TWEEN_ACTIVE,"onActive")),this},update:function(p){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.paused||this.isFinished())return!1;if(p*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(p),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(p),!1;this.hasStarted||(this.startDelay-=p,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(u.TWEEN_START,"onStart"),p=0));var v=!1;if(this.isActive())for(var m=this.data,y=0;y<this.totalData;y++)m[y].update(p)&&(v=!0);this.elapsed+=p,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=p,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),v||this.nextState();var P=this.isPendingRemove();return P&&this.persist&&(this.setFinishedState(),P=!1),P},forward:function(p){return this.update(p),this},rewind:function(p){return this.update(-p),this},dispatchEvent:function(p,v){if(!this.isSeeking){this.emit(p,this,this.targets);var m=this.callbacks[v];m&&m.func.apply(this.callbackScope,[this,this.targets].concat(m.params))}},destroy:function(){d.prototype.destroy.call(this),this.targets=null}});o.register("tween",function(p){return this.scene.sys.tweens.add(p)}),h.register("tween",function(p){return this.scene.sys.tweens.create(p)}),l.exports=c},45641:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66458),x=e(502),u=e(56694),h=e(54272),o=e(99325),n=e(61286),r=e(55303),f=new u({Extends:x,initialize:function(c){x.call(this,c),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?r.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this.dispatchEvent(h.TWEEN_ACTIVE,"onActive"),this},add:function(a){var c=this.parent.create(a);Array.isArray(c)||(c=[c]);for(var p=this.data,v=0;v<c.length;v++){var m=c[v];m.parent=this,p.push(m.reset())}return this.totalData=p.length,this},remove:function(a){return d(this.data,a),a.setRemovedState(),a===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(a){for(var c=this.data,p=0;p<this.totalData;p++)if(c[p].hasTarget(a))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(a){return a.seek(),a.setActiveState(),this},makeActive:function(a){return a.reset(),a.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(h.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var a=this.data,c=this.totalData,p=0;p<c;p++)a[p].reset(!1);this.currentIndex=0,this.currentTween=a[0]},update:function(a){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.isFinished()||this.paused)return!1;a*=this.parent.timeScale,this.isLoopDelayed()?this.updateLoopCountdown(a):this.isCompleteDelayed()?this.updateCompleteDelay(a):this.isStartDelayed()&&(a=this.updateStartCountdown(a));var c=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(a)&&this.nextTween()&&this.nextState(),c=this.isPendingRemove(),c&&this.persist&&(this.setFinishedState(),c=!1)),c},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(a){this.currentIndex=a,this.currentTween=this.data[a],this.currentTween.setActiveState(),this.currentTween.dispatchEvent(h.TWEEN_ACTIVE,"onActive")},dispatchEvent:function(a,c){this.emit(a,this);var p=this.callbacks[c];p&&p.func.apply(this.callbackScope,[this].concat(p.params))},destroy:function(){x.prototype.destroy.call(this),this.currentTween=null}});n.register("tweenchain",function(a){return this.scene.sys.tweens.chain(a)}),o.register("tweenchain",function(a){return this.scene.sys.tweens.create(a)}),l.exports=f},15718:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(65521),x=e(82897),u=e(56694),h=e(54272),o=new u({Extends:d,initialize:function(r,f,a,c,p,v,m,y,P,E,S,w,R,A,O,F,b){d.call(this,r,f,y,P,E,S,w,R,A,O),this.key=a,this.getActiveValue=v,this.getEndValue=c,this.getStartValue=p,this.ease=m,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=F,this.interpolationData=b},reset:function(n){d.prototype.reset.call(this);var r=this.tween.targets[this.targetIndex],f=this.key;n&&(r[f]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(r[f]=this.getActiveValue(r,f,0))},update:function(n){var r=this.tween,f=r.totalTargets,a=this.targetIndex,c=r.targets[a],p=this.key;if(!c)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=n,this.elapsed<=0&&(this.elapsed=0,n=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(h.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(c,p,c[p],a,f,r),this.end=this.getEndValue(c,p,this.start,a,f,r),this.current=this.start,c[p]=this.start,this.setPlayingForwardState(),!0;var v=this.isPlayingForward(),m=this.isPlayingBackward();if(v||m){var y=this.elapsed,P=this.duration,E=0,S=!1;y+=n,y>=P?(E=y-P,y=P,S=!0):y<0&&(y=0);var w=x(y/P,0,1);if(this.elapsed=y,this.progress=w,this.previous=this.current,S)v?(this.current=this.end,c[p]=this.end,this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(E)):(this.current=this.start,c[p]=this.start,this.setStateFromStart(E));else{v||(w=1-w);var R=this.ease(w);this.interpolation?this.current=this.interpolation(this.interpolationData,R):this.current=this.start+(this.end-this.start)*R,c[p]=this.current}this.dispatchEvent(h.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(n,r){var f=this.tween;if(!f.isSeeking){var a=f.targets[this.targetIndex],c=this.key,p=this.current,v=this.previous;f.emit(n,f,c,a,p,v);var m=f.callbacks[r];m&&m.func.apply(f.callbackScope,[f,a,c,p,v].concat(m.params))}},destroy:function(){d.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});l.exports=o},96490:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(65521),x=e(82897),u=e(56694),h=e(54272),o=new u({Extends:d,initialize:function(r,f,a,c,p,v,m,y,P,E,S){d.call(this,r,f,p,v,!1,m,y,P,E,S),this.key="texture",this.startTexture=null,this.endTexture=a,this.startFrame=null,this.endFrame=c,this.yoyo=y!==0},reset:function(n){d.prototype.reset.call(this);var r=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=r.texture.key,this.startFrame=r.frame.name),n&&r.setTexture(this.startTexture,this.startFrame)},update:function(n){var r=this.tween,f=this.targetIndex,a=r.targets[f];if(!a)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=n,this.elapsed<=0&&(this.elapsed=0,n=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(h.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&a.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var c=this.isPlayingForward(),p=this.isPlayingBackward();if(c||p){var v=this.elapsed,m=this.duration,y=0,P=!1;v+=n,v>=m?(y=v-m,v=m,P=!0):v<0&&(v=0);var E=x(v/m,0,1);this.elapsed=v,this.progress=E,P&&(c?(a.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(y)):(a.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(y))),this.dispatchEvent(h.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(n,r){var f=this.tween;if(!f.isSeeking){var a=f.targets[this.targetIndex],c=this.key;f.emit(n,f,c,a);var p=f.callbacks[r];p&&p.func.apply(f.callbackScope,[f,a,c].concat(p.params))}},destroy:function(){d.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});l.exports=o},55303:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};l.exports=T},56694:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(o){return!!o.get&&typeof o.get=="function"||!!o.set&&typeof o.set=="function"}function e(o,n,r){var f=r?o[n]:Object.getOwnPropertyDescriptor(o,n);return!r&&f.value&&typeof f.value=="object"&&(f=f.value),f&&T(f)?(typeof f.enumerable>"u"&&(f.enumerable=!0),typeof f.configurable>"u"&&(f.configurable=!0),f):!1}function d(o,n){var r=Object.getOwnPropertyDescriptor(o,n);return r?(r.value&&typeof r.value=="object"&&(r=r.value),r.configurable===!1):!1}function x(o,n,r,f){for(var a in n)if(n.hasOwnProperty(a)){var c=e(n,a,r);if(c!==!1){var p=f||o;if(d(p.prototype,a)){if(h.ignoreFinals)continue;throw new Error("cannot override final property '"+a+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(o.prototype,a,c)}else o.prototype[a]=n[a]}}function u(o,n){if(n){Array.isArray(n)||(n=[n]);for(var r=0;r<n.length;r++)x(o,n[r].prototype||n[r])}}function h(o){o||(o={});var n,r;if(o.initialize){if(typeof o.initialize!="function")throw new Error("initialize must be a function");n=o.initialize,delete o.initialize}else if(o.Extends){var f=o.Extends;n=function(){f.apply(this,arguments)}}else n=function(){};o.Extends?(n.prototype=Object.create(o.Extends.prototype),n.prototype.constructor=n,r=o.Extends,delete o.Extends):n.prototype.constructor=n;var a=null;return o.Mixins&&(a=o.Mixins,delete o.Mixins),u(n,a),x(n,o,!0,r),n}h.extend=x,h.mixin=u,h.ignoreFinals=!1,l.exports=h},72283:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){};l.exports=T},10618:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){return null};l.exports=T},78991:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,h){if(h===void 0&&(h=e),x>0){var o=x-e.length;if(o<=0)return null}if(!Array.isArray(d))return e.indexOf(d)===-1?(e.push(d),u&&u.call(h,d),d):null;for(var n=d.length-1;n>=0;)e.indexOf(d[n])!==-1&&d.splice(n,1),n--;if(n=d.length,n===0)return null;x>0&&n>o&&(d.splice(o),n=o);for(var r=0;r<n;r++){var f=d[r];e.push(f),u&&u.call(h,f)}return d};l.exports=T},48522:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,h,o){if(x===void 0&&(x=0),o===void 0&&(o=e),u>0){var n=u-e.length;if(n<=0)return null}if(!Array.isArray(d))return e.indexOf(d)===-1?(e.splice(x,0,d),h&&h.call(o,d),d):null;for(var r=d.length-1;r>=0;)e.indexOf(d[r])!==-1&&d.pop(),r--;if(r=d.length,r===0)return null;u>0&&r>n&&(d.splice(n),r=n);for(var f=r-1;f>=0;f--){var a=d[f];e.splice(x,0,a),h&&h.call(o,a)}return d};l.exports=T},58742:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=e.indexOf(d);return x!==-1&&x<e.length&&(e.splice(x,1),e.push(d)),d};l.exports=T},30164:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(45838),x=function(u,h,o,n,r){n===void 0&&(n=0),r===void 0&&(r=u.length);var f=0;if(d(u,n,r))for(var a=n;a<r;a++){var c=u[a];c[h]===o&&f++}return f};l.exports=x},36337:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u,h=[null];for(u=3;u<arguments.length;u++)h.push(arguments[u]);for(u=0;u<e.length;u++)h[0]=e[u],d.apply(x,h);return e};l.exports=T},46208:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(45838),x=function(u,h,o,n,r){if(n===void 0&&(n=0),r===void 0&&(r=u.length),d(u,n,r)){var f,a=[null];for(f=5;f<arguments.length;f++)a.push(arguments[f]);for(f=n;f<r;f++)a[0]=u[f],h.apply(o,a)}return u};l.exports=x},2406:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){if(d.length){if(d.length===1)return d[0]}else return NaN;var u=1,h,o;if(x){if(e<d[0][x])return d[0];for(;d[u][x]<e;)u++}else for(;d[u]<e;)u++;return u>d.length&&(u=d.length),x?(h=d[u-1][x],o=d[u][x],o-e<=e-h?d[u]:d[u-1]):(h=d[u-1],o=d[u],o-e<=e-h?o:h)};l.exports=T},5454:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){d===void 0&&(d=[]);for(var x=0;x<e.length;x++)Array.isArray(e[x])?T(e[x],d):d.push(e[x]);return d};l.exports=T},71608:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(45838),x=function(u,h,o,n,r){n===void 0&&(n=0),r===void 0&&(r=u.length);var f=[];if(d(u,n,r))for(var a=n;a<r;a++){var c=u[a];(!h||h&&o===void 0&&c.hasOwnProperty(h)||h&&o!==void 0&&c[h]===o)&&f.push(c)}return f};l.exports=x},51463:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(45838),x=function(u,h,o,n,r){if(n===void 0&&(n=0),r===void 0&&(r=u.length),d(u,n,r))for(var f=n;f<r;f++){var a=u[f];if(!h||h&&o===void 0&&a.hasOwnProperty(h)||h&&o!==void 0&&a[h]===o)return a}return null};l.exports=x},72861:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){d===void 0&&(d=0),x===void 0&&(x=e.length);var u=d+Math.floor(Math.random()*x);return e[u]===void 0?null:e[u]};l.exports=T},24218:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){if(d===x)return e;var u=e.indexOf(d),h=e.indexOf(x);if(u<0||h<0)throw new Error("Supplied items must be elements of the same array");return u>h||(e.splice(u,1),h===e.length-1?e.push(d):e.splice(h,0,d)),e};l.exports=T},58258:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){if(d===x)return e;var u=e.indexOf(d),h=e.indexOf(x);if(u<0||h<0)throw new Error("Supplied items must be elements of the same array");return u<h||(e.splice(u,1),h===0?e.unshift(d):e.splice(h,0,d)),e};l.exports=T},51172:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=e.indexOf(d);if(x>0){var u=e[x-1],h=e.indexOf(u);e[x]=u,e[h]=d}return e};l.exports=T},68396:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=e.indexOf(d);if(u===-1||x<0||x>=e.length)throw new Error("Supplied index out of bounds");return u!==x&&(e.splice(u,1),e.splice(x,0,d)),d};l.exports=T},27555:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=e.indexOf(d);if(x!==-1&&x<e.length-1){var u=e[x+1],h=e.indexOf(u);e[x]=u,e[h]=d}return e};l.exports=T},13401:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){var h=[],o,n=!1;if((x||u)&&(n=!0,x||(x=""),u||(u="")),d<e)for(o=e;o>=d;o--)n?h.push(x+o.toString()+u):h.push(o);else for(o=e;o<=d;o++)n?h.push(x+o.toString()+u):h.push(o);return h};l.exports=T},89955:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(67233),x=function(u,h,o){u===void 0&&(u=0),h===void 0&&(h=null),o===void 0&&(o=1),h===null&&(h=u,u=0);for(var n=[],r=Math.max(d((h-u)/(o||1)),0),f=0;f<r;f++)n.push(u),u+=o;return n};l.exports=x},53466:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(x,u,h){var o=x[u];x[u]=x[h],x[h]=o}function e(x,u){return x<u?-1:x>u?1:0}var d=function(x,u,h,o,n){for(h===void 0&&(h=0),o===void 0&&(o=x.length-1),n===void 0&&(n=e);o>h;){if(o-h>600){var r=o-h+1,f=u-h+1,a=Math.log(r),c=.5*Math.exp(2*a/3),p=.5*Math.sqrt(a*c*(r-c)/r)*(f-r/2<0?-1:1),v=Math.max(h,Math.floor(u-f*c/r+p)),m=Math.min(o,Math.floor(u+(r-f)*c/r+p));d(x,u,v,m,n)}var y=x[u],P=h,E=o;for(T(x,h,u),n(x[o],y)>0&&T(x,h,o);P<E;){for(T(x,P,E),P++,E--;n(x[P],y)<0;)P++;for(;n(x[E],y)>0;)E--}n(x[h],y)===0?T(x,h,E):(E++,T(x,E,o)),E<=u&&(h=E+1),u<=E&&(o=E-1)}};l.exports=d},75757:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(10850),x=e(18592),u=function(o,n,r){for(var f=[],a=0;a<o.length;a++)for(var c=0;c<n.length;c++)for(var p=0;p<r;p++)f.push({a:o[a],b:n[c]});return f},h=function(o,n,r){var f=d(r,"max",0),a=d(r,"qty",1),c=d(r,"random",!1),p=d(r,"randomB",!1),v=d(r,"repeat",0),m=d(r,"yoyo",!1),y=[];if(p&&x(n),v===-1)if(f===0)v=0;else{var P=o.length*n.length*a;m&&(P*=2),v=Math.ceil(f/P)}for(var E=0;E<=v;E++){var S=u(o,n,a);c&&x(S),y=y.concat(S),m&&(S.reverse(),y=y.concat(S))}return f&&y.splice(f),y};l.exports=h},66458:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72677),x=function(u,h,o,n){n===void 0&&(n=u);var r;if(!Array.isArray(h))return r=u.indexOf(h),r!==-1?(d(u,r),o&&o.call(n,h),h):null;for(var f=h.length-1,a=[];f>=0;){var c=h[f];r=u.indexOf(c),r!==-1&&(d(u,r),a.push(c),o&&o.call(n,c)),f--}return a};l.exports=x},8324:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72677),x=function(u,h,o,n){if(n===void 0&&(n=u),h<0||h>u.length-1)throw new Error("Index out of bounds");var r=d(u,h);return o&&o.call(n,r),r};l.exports=x},47427:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(45838),x=function(u,h,o,n,r){if(h===void 0&&(h=0),o===void 0&&(o=u.length),r===void 0&&(r=u),d(u,h,o)){var f=o-h,a=u.splice(h,f);if(n)for(var c=0;c<a.length;c++){var p=a[c];n.call(r,p)}return a}else return[]};l.exports=x},50147:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72677),x=function(u,h,o){h===void 0&&(h=0),o===void 0&&(o=u.length);var n=h+Math.floor(Math.random()*o);return d(u,n)};l.exports=x},80402:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=e.indexOf(d),h=e.indexOf(x);return u!==-1&&h===-1?(e[u]=x,!0):!1};l.exports=T},77640:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){d===void 0&&(d=1);for(var x=null,u=0;u<d;u++)x=e.shift(),e.push(x);return x};l.exports=T},38487:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){d===void 0&&(d=1);for(var x=null,u=0;u<d;u++)x=e.pop(),e.unshift(x);return x};l.exports=T},45838:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){var h=e.length;if(d<0||d>h||d>=x||x>h){if(u)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};l.exports=T},27847:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=e.indexOf(d);return x!==-1&&x>0&&(e.splice(x,1),e.unshift(d)),d};l.exports=T},6034:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(45838),x=function(u,h,o,n,r){if(n===void 0&&(n=0),r===void 0&&(r=u.length),d(u,n,r))for(var f=n;f<r;f++){var a=u[f];a.hasOwnProperty(h)&&(a[h]=o)}return u};l.exports=x},18592:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var d=e.length-1;d>0;d--){var x=Math.floor(Math.random()*(d+1)),u=e[d];e[d]=e[x],e[x]=u}return e};l.exports=T},28834:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d=/\D/g;return e.sort(function(x,u){return parseInt(x.replace(d,""),10)-parseInt(u.replace(d,""),10)}),e};l.exports=T},72677:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){if(!(d>=e.length)){for(var x=e.length-1,u=e[d],h=d;h<x;h++)e[h]=e[h+1];return e.length=x,u}};l.exports=T},17922:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(77290);function x(n,r){return String(n).localeCompare(r)}function u(n,r){var f=n.length;if(f<=1)return n;for(var a=new Array(f),c=1;c<f;c*=2){h(n,r,c,a);var p=n;n=a,a=p}return n}function h(n,r,f,a){var c=n.length,p=0,v=f*2,m,y,P,E,S;for(m=0;m<c;m+=v)for(y=m+f,P=y+f,y>c&&(y=c),P>c&&(P=c),E=m,S=y;;)if(E<y&&S<P)r(n[E],n[S])<=0?a[p++]=n[E++]:a[p++]=n[S++];else if(E<y)a[p++]=n[E++];else if(S<P)a[p++]=n[S++];else break}var o=function(n,r){if(r===void 0&&(r=x),!n||n.length<2)return n;if(d.features.stableSort)return n.sort(r);var f=u(n,r);return f!==n&&h(f,null,n.length,n),n};l.exports=o},96928:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){if(d===x)return e;var u=e.indexOf(d),h=e.indexOf(x);if(u<0||h<0)throw new Error("Supplied items must be elements of the same array");return e[u]=x,e[h]=d,e};l.exports=T},59959:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={Matrix:e(13515),Add:e(78991),AddAt:e(48522),BringToTop:e(58742),CountAllMatching:e(30164),Each:e(36337),EachInRange:e(46208),FindClosestInSorted:e(2406),Flatten:e(5454),GetAll:e(71608),GetFirst:e(51463),GetRandom:e(72861),MoveDown:e(51172),MoveTo:e(68396),MoveUp:e(27555),MoveAbove:e(24218),MoveBelow:e(58258),NumberArray:e(13401),NumberArrayStep:e(89955),QuickSelect:e(53466),Range:e(75757),Remove:e(66458),RemoveAt:e(8324),RemoveBetween:e(47427),RemoveRandomElement:e(50147),Replace:e(80402),RotateLeft:e(77640),RotateRight:e(38487),SafeRange:e(45838),SendToBack:e(27847),SetAll:e(6034),Shuffle:e(18592),SortByDigits:e(28834),SpliceOne:e(72677),StableSort:e(17922),Swap:e(96928)}},97494:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))return!1;for(var d=e[0].length,x=1;x<e.length;x++)if(e[x].length!==d)return!1;return!0};l.exports=T},68428:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(76400),x=e(97494),u=function(h){var o="";if(!x(h))return o;for(var n=0;n<h.length;n++){for(var r=0;r<h[n].length;r++){var f=h[n][r].toString();f!=="undefined"?o+=d(f,2):o+="?",r<h[n].length-1&&(o+=" |")}if(n<h.length-1){o+=`
`;for(var a=0;a<h[n].length;a++)o+="---",a<h[n].length-1&&(o+="+");o+=`
`}}return o};l.exports=u},59521:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.reverse()};l.exports=T},51995:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var d=0;d<e.length;d++)e[d].reverse();return e};l.exports=T},89011:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(63515),x=function(u){return d(u,180)};l.exports=x},42549:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(63515),x=function(u){return d(u,90)};l.exports=x},63515:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97494),x=e(78581),u=function(h,o){if(o===void 0&&(o=90),!d(h))return null;if(typeof o!="string"&&(o=(o%360+360)%360),o===90||o===-270||o==="rotateLeft")h=x(h),h.reverse();else if(o===-90||o===270||o==="rotateRight")h.reverse(),h=x(h);else if(Math.abs(o)===180||o==="rotate180"){for(var n=0;n<h.length;n++)h[n].reverse();h.reverse()}return h};l.exports=u},14305:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(63515),x=function(u){return d(u,-90)};l.exports=x},27365:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(77640),x=e(38487),u=function(h,o,n){if(o===void 0&&(o=0),n===void 0&&(n=0),n!==0&&(n<0?d(h,Math.abs(n)):x(h,n)),o!==0)for(var r=0;r<h.length;r++){var f=h[r];o<0?d(f,Math.abs(o)):x(f,o)}return h};l.exports=u},78581:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var d=e.length,x=e[0].length,u=new Array(x),h=0;h<x;h++){u[h]=new Array(d);for(var o=d-1;o>-1;o--)u[h][o]=e[o][h]}return u};l.exports=T},13515:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={CheckMatrix:e(97494),MatrixToString:e(68428),ReverseColumns:e(59521),ReverseRows:e(51995),Rotate180:e(89011),RotateLeft:e(42549),RotateMatrix:e(63515),RotateRight:e(14305),Translate:e(27365),TransposeMatrix:e(78581)}},40581:l=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=function(d,x){for(var u=new Uint8Array(d),h=u.length,o=x?"data:"+x+";base64,":"",n=0;n<h;n+=3)o+=T[u[n]>>2],o+=T[(u[n]&3)<<4|u[n+1]>>4],o+=T[(u[n+1]&15)<<2|u[n+2]>>6],o+=T[u[n+2]&63];return h%3===2?o=o.substring(0,o.length-1)+"=":h%3===1&&(o=o.substring(0,o.length-2)+"=="),o};l.exports=e},82329:l=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),d=0;d<T.length;d++)e[T.charCodeAt(d)]=d;var x=function(u){u=u.substr(u.indexOf(",")+1);var h=u.length,o=h*.75,n=0,r,f,a,c;u[h-1]==="="&&(o--,u[h-2]==="="&&o--);for(var p=new ArrayBuffer(o),v=new Uint8Array(p),m=0;m<h;m+=4)r=e[u.charCodeAt(m)],f=e[u.charCodeAt(m+1)],a=e[u.charCodeAt(m+2)],c=e[u.charCodeAt(m+3)],v[n++]=r<<2|f>>4,v[n++]=(f&15)<<4|a>>2,v[n++]=(a&3)<<6|c&63;return p};l.exports=x},78417:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={ArrayBufferToBase64:e(40581),Base64ToArrayBuffer:e(82329)}},22178:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={Array:e(59959),Base64:e(78417),Objects:e(64615),String:e(50379),NOOP:e(72283),NULL:e(10618)}},32742:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d={};for(var x in e)Array.isArray(e[x])?d[x]=e[x].slice(0):d[x]=e[x];return d};l.exports=T},28699:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d,x,u;if(typeof e!="object"||e===null)return e;d=Array.isArray(e)?[]:{};for(u in e)x=e[u],d[u]=T(x);return d};l.exports=T},98611:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(42911),x=function(){var u,h,o,n,r,f,a=arguments[0]||{},c=1,p=arguments.length,v=!1;for(typeof a=="boolean"&&(v=a,a=arguments[1]||{},c=2),p===c&&(a=this,--c);c<p;c++)if((u=arguments[c])!=null)for(h in u)o=a[h],n=u[h],a!==n&&(v&&n&&(d(n)||(r=Array.isArray(n)))?(r?(r=!1,f=o&&Array.isArray(o)?o:[]):f=o&&d(o)?o:{},a[h]=x(v,f,n)):n!==void 0&&(a[h]=n));return a};l.exports=x},20494:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(5923),x=e(10850),u=function(h,o,n){var r=x(h,o,null);if(r===null)return n;if(Array.isArray(r))return d.RND.pick(r);if(typeof r=="object"){if(r.hasOwnProperty("randInt"))return d.RND.integerInRange(r.randInt[0],r.randInt[1]);if(r.hasOwnProperty("randFloat"))return d.RND.realInRange(r.randFloat[0],r.randFloat[1])}else if(typeof r=="function")return r(o);return r};l.exports=u},72632:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=typeof e;return!e||u==="number"||u==="string"?x:e.hasOwnProperty(d)&&e[d]!==void 0?e[d]:x};l.exports=T},94324:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(10850),x=e(82897),u=function(h,o,n,r,f){f===void 0&&(f=n);var a=d(h,o,f);return x(a,n,r)};l.exports=u},10850:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){if(!e&&!u||typeof e=="number")return x;if(e&&e.hasOwnProperty(d))return e[d];if(u&&u.hasOwnProperty(d))return u[d];if(d.indexOf(".")!==-1){for(var h=d.split("."),o=e,n=u,r=x,f=x,a=!0,c=!0,p=0;p<h.length;p++)o&&o.hasOwnProperty(h[p])?(r=o[h[p]],o=o[h[p]]):a=!1,n&&n.hasOwnProperty(h[p])?(f=n[h[p]],n=n[h[p]]):c=!1;return a?r:c?f:x}else return x};l.exports=T},87701:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){for(var x=0;x<d.length;x++)if(!e.hasOwnProperty(d[x]))return!1;return!0};l.exports=T},53523:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){for(var x=0;x<d.length;x++)if(e.hasOwnProperty(d[x]))return!0;return!1};l.exports=T},19256:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.hasOwnProperty(d)};l.exports=T},42911:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){if(!e||typeof e!="object"||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!{}.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};l.exports=T},30657:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(32742),x=function(u,h){var o=d(u);for(var n in h)o.hasOwnProperty(n)||(o[n]=h[n]);return o};l.exports=x},72066:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(32742),x=function(u,h){var o=d(u);for(var n in h)o.hasOwnProperty(n)&&(o[n]=h[n]);return o};l.exports=x},28820:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(19256),x=function(u,h){for(var o={},n=0;n<h.length;n++){var r=h[n];d(u,r)&&(o[r]=u[r])}return o};l.exports=x},22440:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){if(!e||typeof e=="number")return!1;if(e.hasOwnProperty(d))return e[d]=x,!0;if(d.indexOf(".")!==-1){for(var u=d.split("."),h=e,o=e,n=0;n<u.length;n++)if(h.hasOwnProperty(u[n]))o=h,h=h[u[n]];else return!1;return o[u[u.length-1]]=x,!0}return!1};l.exports=T},64615:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={Clone:e(32742),DeepCopy:e(28699),Extend:e(98611),GetAdvancedValue:e(20494),GetFastValue:e(72632),GetMinMaxValue:e(94324),GetValue:e(10850),HasAll:e(87701),HasAny:e(53523),HasValue:e(19256),IsPlainObject:e(42911),Merge:e(30657),MergeRight:e(72066),Pick:e(28820),SetValue:e(22440)}},69429:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.replace(/%([0-9]+)/g,function(x,u){return d[Number(u)-1]})};l.exports=T},76400:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){d===void 0&&(d=0),x===void 0&&(x=" "),u===void 0&&(u=3),e=e.toString();var h=0;if(d+1>=e.length)switch(u){case 1:e=new Array(d+1-e.length).join(x)+e;break;case 3:var o=Math.ceil((h=d-e.length)/2),n=h-o;e=new Array(n+1).join(x)+e+new Array(o+1).join(x);break;default:e=e+new Array(d+1-e.length).join(x);break}return e};l.exports=T},76872:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d===0?e.slice(1):e.slice(0,d-1)+e.slice(d)};l.exports=T},8051:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.split("").reverse().join("")};l.exports=T},76583:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var d=Math.random()*16|0,x=e==="x"?d:d&3|8;return x.toString(16)})};l.exports=T},40587:l=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e&&e[0].toUpperCase()+e.slice(1)};l.exports=T},50379:(l,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */l.exports={Format:e(69429),Pad:e(76400),RemoveAt:e(76872),Reverse:e(8051),UppercaseFirst:e(40587),UUID:e(76583)}}},g={};function C(l){var T=g[l];if(T!==void 0)return T.exports;var e=g[l]={exports:{}};return s[l](e,e.exports,C),e.exports}C.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var M=C(92491);return M})())})(sp);var bm=sp.exports;const me=ip(bm);let zt={x:0,y:0,CharacterId:"",Name:"",Level:1,Experience:0,Health:100,Gold:0,Inventory:10,Quests:[],Skills:null,Achievements:[],Language:"zh-tw",Headgear:null,Armor:null,Weapon:"",Flag:[]};localStorage.getItem("PlayerData")&&(zt=JSON.parse(localStorage.getItem("PlayerData")));let Ga=0;localStorage.setItem("playerPosId",Ga);let Na="Down";localStorage.setItem("playerDirection",Na);let at={width:568,height:320,windowWidth:16,windowHeight:9,gameWindowPadding:300,scale:{},physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},fps:{target:60,forceSetTimeOut:!0},resolution:1,autoFocus:!0,transparent:!0},Fm=()=>(Ga=localStorage.getItem("playerPosId"),Ga),np=i=>{localStorage.setItem("playerPosId",i),Ga=i},Bn=()=>(Na=localStorage.getItem("playerDirection"),Na),rp=i=>{localStorage.setItem("playerDirection",i),Na=i};class ht{constructor(t){this.scene=t,this.displayList=t.sys.displayList,this.updateList=t.sys.updateList,t.events.once("destroy",this.destroy,this)}destroy(){this.scene=null,this.displayList=null,this.updateList=null}static register(t,s){ht.prototype[t]=s}}var Lm=function(i){return i===void 0&&(i=Dm),this.getFrameNameCallback=i,this},Dm=function(i,t,s){return s==="__BASE"?`${i},${t}`:`${s}_${i},${t}`};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var Im=function(i){if(typeof i!="object"||i.nodeType||i===i.window)return!1;try{if(i.constructor&&!{}.hasOwnProperty.call(i.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0},$e=function(i){var t,s,g;if(i==null||typeof i!="object")return i;if(t=Array.isArray(i)?[]:{},Im(i))for(g in i)s=i[g],t[g]=$e(s);else t=i;return t},Bm=function(i,t,s,g){Array.isArray(t)&&(g=s,s=t,t=void 0),t==null&&(t="__BASE"),typeof s=="number"&&arguments.length>=6?(s=[arguments[2],void 0,arguments[3]],g=[arguments[4],void 0,arguments[5]]):(s=$e(s),g=$e(g)),this.textureKey=i,this.baseFrameName=t,this.columns.data=s,this.columns.count=s?s.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=g,this.rows.count=g?g.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var C=this.scene.sys.textures.get(i);if(!C)return this.clear(),this;if(!s||!g)return this.clear(),this;for(var M=C.get(t),l=M.width,T=0,e=0,d=s.length;e<d;e++)s[e]===void 0?T++:typeof s[e]=="number"?l-=s[e]:l-=s[e].width;for(var x=l/T,u=M.height,h=0,e=0,d=g.length;e<d;e++)g[e]===void 0?h++:typeof g[e]=="number"?u-=g[e]:u-=g[e].width;for(var o=u/h,n,r,f,a,c,p=0,v=0,m=0,y=g.length;m<y;m++){g[m]===void 0&&(g[m]=o),typeof g[m]=="number"&&(g[m]={height:g[m],stretch:m%2}),n=g[m],f=n.height,this.rows.stretch+=n.stretch|0,this.rows.minHeight+=n.stretch>0?0:f,p=0;for(var e=0,P=s.length;e<P;e++){if(s[e]===void 0&&(s[e]=x),typeof s[e]=="number"&&(s[e]={width:s[e],stretch:e%2}),r=s[e],a=r.width,m===0&&(this.columns.stretch+=r.stretch|0,this.columns.minWidth+=r.stretch>0?0:a),a>=1&&f>=1){c=this.getFrameNameCallback(e,m,t);var E=typeof c;(E==="string"||E==="number")&&C.add(c,0,p+M.cutX,v+M.cutY,a,f)}p+=a}v+=f}return this.updateTexture(),this},Gm=function(){if(this.clear(),this.textureKey===void 0)return this;var i=this.scene.sys.textures.get(this.textureKey);if(!i)return this;var t=this.columns.minWidth*this.maxFixedPartScaleX,s=this.rows.minHeight*this.maxFixedPartScaleY,g=this.width-t,C=this.height-s,M=g>=0?this.maxFixedPartScaleX:this.width/t,l=C>=0?this.maxFixedPartScaleY:this.height/s;if(this.preserveRatio){var T=Math.min(M,l);if(M>T){var e=(M-T)*t;g>=0?g+=e:g=e,M=T}if(l>T){var d=(l-T)*s;C>=0?C+=d:C=d,l=T}}this.columns.scale=M,this.rows.scale=l;var x;g>0?x=this.columns.stretch>0?g/this.columns.stretch:0:x=0;var u;C>0?u=this.rows.stretch>0?C/this.rows.stretch:0:u=0;var h,o,n,r,f,a=0,c=0,p;this._beginDraw();for(var v=0,m=this.rows.count;v<m;v++){n=this.rows.data[v],f=n.stretch===0?n.height*l:u*n.stretch,a=0;for(var y=0,P=this.columns.count;y<P;y++)o=this.columns.data[y],r=o.stretch===0?o.width*M:x*o.stretch,h=this.getFrameNameCallback(y,v,this.baseFrameName),i.has(h)&&r>0&&f>0&&(n.stretch===0&&o.stretch===0||this.getStretchMode(y,v)===0?p=0:p=1,p===0?this._drawImage(this.textureKey,h,a,c,r,f):this._drawTileSprite(this.textureKey,h,a,c,r,f)),a+=r;c+=f}this._endDraw()};const Nm=Phaser.Utils.Objects.IsPlainObject,Pd=Phaser.Utils.Objects.GetValue;var Vm=function(i){return Nm(i)?(this.stretchMode.edge=Wo(Pd(i,"edge",0)),this.stretchMode.internal=Wo(Pd(i,"internal",0))):(i=Wo(i),this.stretchMode.edge=i,this.stretchMode.internal=i),this},Wo=function(i){return typeof i=="string"&&(i=km[i]),i};const km={scale:0,repeat:1};var zm=function(i,t){return i===0||i===this.columns.count-1||t===0||t===this.rows.count-1},Um=function(i,t){return zm.call(this,i,t)?this.stretchMode.edge:this.stretchMode.internal},Ym=function(i){return i==null&&(i=!0),this.preserveRatio=i,this},Xm=function(i,t){return t===void 0&&(t=i),this.maxFixedPartScaleX=i,this.maxFixedPartScaleY=t,this},ge=function(){};const Wm={_beginDraw:ge,_drawImage:ge,_drawTileSprite:ge,_endDraw:ge,setGetFrameNameCallback:Lm,setBaseTexture:Bm,updateTexture:Gm,setStretchMode:Vm,getStretchMode:Um,setPreserveRatio:Ym,setMaxFixedPartScale:Xm},Gn=Phaser.Utils.Objects.IsPlainObject,bt=Phaser.Utils.Objects.GetValue;var ap=function(i,t){class s extends i{constructor(C,M,l,T,e,d,x,u,h,o){if(Gn(M)?(o=M,M=bt(o,"x",0),l=bt(o,"y",0),T=bt(o,"width",1),e=bt(o,"height",1),d=bt(o,"key",void 0),x=bt(o,"baseFrame",void 0),u=bt(o,"columns",void 0),h=bt(o,"rows",void 0)):Gn(T)?(o=T,T=bt(o,"width",1),e=bt(o,"height",1),d=bt(o,"key",void 0),x=bt(o,"baseFrame",void 0),u=bt(o,"columns",void 0),h=bt(o,"rows",void 0)):Gn(d)?(o=d,d=bt(o,"key",void 0),x=bt(o,"baseFrame",void 0),u=bt(o,"columns",void 0),h=bt(o,"rows",void 0)):Gn(x)?(o=x,x=bt(o,"baseFrame",void 0),u=bt(o,"columns",void 0),h=bt(o,"rows",void 0)):Array.isArray(x)?(o=h,h=u,u=x,x=bt(o,"baseFrame",void 0)):Gn(u)&&(o=u,u=bt(o,"columns",void 0),h=bt(o,"rows",void 0)),u===void 0){var n=bt(o,"leftWidth",void 0),r=bt(o,"rightWidth",void 0);n!==void 0&&r!==void 0&&(u=[n,void 0,r])}if(h===void 0){var f=bt(o,"topHeight",void 0),a=bt(o,"bottomHeight",void 0);f!==void 0&&a!==void 0&&(h=[f,void 0,a])}super(C),this.type=t,this.setPosition(M,l).setSize(T,e).setOrigin(.5,.5),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setGetFrameNameCallback(bt(o,"getFrameNameCallback",void 0)),this.setStretchMode(bt(o,"stretchMode",0)),this.setPreserveRatio(bt(o,"preserveRatio",!0));var c=bt(o,"maxFixedPartScale",1),p=bt(o,"maxFixedPartScaleX",c),v=bt(o,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(p,v),this.setBaseTexture(d,x,u,h)}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(C,M){return this.width===C&&this.height===M?this:(super.resize?super.resize(C,M):super.setSize(C,M),this.updateTexture(),this)}}return Object.assign(s.prototype,Wm),s};const Hm=Phaser.Game;var Ed=function(i){return i instanceof Hm};const $m=Phaser.Scene;var Fs=function(i){return i instanceof $m},Pn=function(i){if(i==null||typeof i!="object")return null;if(Ed(i))return i;if(Ed(i.game))return i.game;if(Fs(i))return i.sys.game;if(Fs(i.scene))return i.scene.sys.game};const Km=Phaser.GameObjects;var zi=void 0,op=function(i,t){if(zi||(zi={},Pn(i).events.once("destroy",function(){for(var g in zi)zi[g].destroy();zi=void 0})),!zi.hasOwnProperty(t)){var s=Pn(i).scene.systemScene,i=new Km[t](s);i.setOrigin(0),zi[t]=i}return zi[t]},Zm=function(i,t,s,g,C,M){var l=op(this,"Image").setTexture(i,t).setDisplaySize(C,M);this.batchDraw(l,s,g)},jm=function(i,t,s,g,C,M){var l=op(this,"TileSprite").setTexture(i,t).setSize(C,M);this.batchDraw(l,s,g)};const xl=Phaser.GameObjects.RenderTexture;let Ka=class extends ap(xl,"rexNinePatch"){};var Jm={_beginDraw:xl.prototype.beginDraw,_endDraw:xl.prototype.endDraw,_drawImage:Zm,_drawTileSprite:jm};Object.assign(Ka.prototype,Jm);var hp=function(i){return i==null||i===""||i.length===0},Qm=function(i,t,s){var g=i;if(!hp(t)){typeof t=="string"&&(t=t.split("."));for(var C,M=0,l=t.length;M<l;M++){if(C=t[M],g[C]==null||typeof g[C]!="object"){var T;M===l-1?s===void 0?T={}:T=s:T={},g[C]=T}g=g[C]}}return g},ot=function(i,t,s,g){if(g===void 0&&(g="."),typeof i=="object"){if(hp(t)){if(s==null)return;typeof s=="object"&&(i=s)}else{typeof t=="string"&&(t=t.split(g));var C=t.pop(),M=Qm(i,t);M[C]=s}return i}};ht.register("ninePatch",function(i,t,s,g,C,M,l,T){var e=new Ka(this.scene,i,t,s,g,C,M,l,T);return this.scene.add.existing(e),e});ot(window,"RexPlugins.UI.NinePatch",Ka);const qm=Phaser.GameObjects.GetCalcMatrix;var _m=function(i,t,s,g){var C=t.getRenderList();if(C.length!==0){s.addToRenderList(t);var M=i.pipelines.set(t.pipeline),l=t.frame.glTexture,T=M.setGameObject(t),e=s.roundPixels,d=qm(t,s,g),x=M.calcMatrix.copyFrom(d.calc),u=t._displayOriginX,h=t._displayOriginY,o=s.alpha*t.alpha;i.pipelines.preBatch(t);for(var n=0,r=C.length;n<r;n++)C[n].webglRender(M,x,o,u,h,l,T,e);i.pipelines.postBatch(t)}};const tx=Phaser.Renderer.Canvas.SetTransform;var ex=function(i,t,s,g){var C=i.currentContext,M=t.getRenderList();if(!(M.length===0||!tx(i,C,t,s,g))){s.addToRenderList(t);var l=s.roundPixels,T=-t._displayOriginX,e=-t._displayOriginY;C.translate(T,e);for(var d=0,x=M.length;d<x;d++)M[d].canvasRender(C,T,e,l);C.restore()}};const ix={renderWebGL:_m,renderCanvas:ex};var sx=function(i,t){return this.texture=this.scene.sys.textures.get(i),this.frame=this.texture.get(t),this},Md=function(i,t){if(this.width===i&&this.height===t)return this;this.width=i,this.height=t,this.updateDisplayOrigin();var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=i,s.hitArea.height=t),this},nx=function(i){return this.lastAppendedChildren.length=0,Array.isArray(i)?(this.children.add(i),this.lastAppendedChildren.push(...i)):(this.children.add(i),this.lastAppendedChildren.push(i)),this};const rx=Phaser.Utils.Array.Remove;var ax=function(i){return this.poolManager&&this.poolManager.free(i),rx(this.children.list,i),this.lastAppendedChildren.length=0,this.dirty=!0,this},wd=function(){return this.poolManager&&this.poolManager.freeMultiple(this.children.list),this.children.list.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},ox=function(){return this.lastAppendedChildren},hx=function(){return this.children.list};const lx={setTint(i){return this.tint=i,this.tintFill=!1,this},setTintFill(i){return this.tint=i,this.tintFill=!0,this},clearTint(){return this.setTint(16777215),this}};var lp={setTexture:sx,resize:Md,setSize:Md,addChild:nx,removeChild:ax,removeChildren:wd,clear:wd,getLastAppendedChildren:ox,getChildren:hx};Object.assign(lp,lx);class Ci{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(t){return this.items.push(t),this}pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}clear(){return this.items.length=0,this}}const ux=Phaser.Utils.Objects.GetValue;var dx={};let fx=class{constructor(t){this.pools=ux(t,"pools",dx)}destroy(){this.pools=void 0}free(t){if(!this.pools)return this;var s=t.type;return this.pools.hasOwnProperty(s)||(this.pools[s]=new Ci),this.pools[s].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var s=0,g=t.length;s<g;s++)this.free(t[s]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}};const cx=Phaser.GameObjects.GameObject,vx=Phaser.Utils.Objects.IsPlainObject,Nn=Phaser.Utils.Objects.GetValue,px=Phaser.Structs.List,gx=Phaser.Utils.Array.StableSort;class up extends cx{constructor(t,s,g,C,M,l){vx(s)&&(l=s,s=Nn(l,"x",0),g=Nn(l,"y",0),C=Nn(l,"texture"),M=Nn(l,"frame")),s===void 0&&(s=0),g===void 0&&(g=0),super(t,"rexBlitter"),this.children=new px,this.renderList=[],this.displayListDirty=!1,this.lastAppendedChildren=[];var T=Nn(l,"reuseBob",!0);this.poolManager=T?new fx(l):void 0,this.setTexture(C,M).setPosition(s,g).setOrigin(0,0).clearTint().initPipeline()}preDestroy(){this.removeChildren(),this.children.destroy(),this.renderList.length=0,this.poolManager&&this.poolManager.destroy()}getRenderList(){if(this.displayListDirty){this.renderList.length=0;for(var t=!1,s=this.children.list,g=0,C=s.length;g<C;g++){var M=s[g];mx(M)&&(this.renderList.push(M),t||(t=M.depth!==0))}t&&gx(this.renderList,xx),this.displayListDirty=!1}return this.renderList}}var mx=function(i){return i.active&&i.visible&&i.alpha>0},xx=function(i,t){return i._depth-t._depth};const Je=Phaser.GameObjects.Components;Phaser.Class.mixin(up,[Je.Alpha,Je.BlendMode,Je.ComputedSize,Je.Depth,Je.GetBounds,Je.Mask,Je.Origin,Je.Pipeline,Je.ScrollFactor,Je.Transform,Je.Visible,ix,lp]);const dp="image";/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var kt=function(i,t,s){if(!i||typeof i=="number")return s;if(i.hasOwnProperty(t))return i[t];if(t.indexOf(".")!==-1){for(var g=t.split("."),C=i,M=s,l=0;l<g.length;l++)if(C.hasOwnProperty(g[l]))M=C[g[l]],C=C[g[l]];else{M=s;break}return M}else return s},Ii=function(i){if(typeof i!="object"||i===null)return i;if(Array.isArray(i))i.length=0;else for(var t in i)delete i[t];return i};const Za={enableData(){return this.data===void 0&&(this.data={}),this},setData(i,t){if(this.enableData(),arguments.length===1){var s=i;for(i in s)this.data[i]=s[i]}else this.data[i]=t;return this},getData(i,t){return this.enableData(),i===void 0?this.data:kt(this.data,i,t)},incData(i,t,s){return s===void 0&&(s=0),this.enableData(),this.setData(i,this.getData(i,s)+t),this},mulData(i,t,s){return s===void 0&&(s=0),this.enableData(),this.setData(i,this.getData(i,s)*t),this},clearData(){return this.data&&Ii(this.data),this}};let fp=class{constructor(t,s){this.type=s,this.data=void 0,this.setParent(t).reset().setActive()}destroy(){this.parent&&this.parent.removeChild(this)}setParent(t){return this.parent=t,this}setDisplayListDirty(t){return t&&this.parent&&(this.parent.displayListDirty=!0),this}get active(){return this._active}set active(t){this.setDisplayListDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}reset(){this.clearData()}onFree(){this.reset().setActive(!1).setParent()}};Object.assign(fp.prototype,Za);const yx=Phaser.Math.DegToRad,Tx=Phaser.Math.RadToDeg,Ws=Phaser.Utils.Objects.GetValue;let Cx=class extends fp{get visible(){return this._visible}set visible(t){this.setDisplayListDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDisplayListDirty(!!this._alpha!=!!t),this._alpha=t}setAlpha(t){return this.alpha=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setPosition(t,s){return this.x=t,this.y=s,this}setRotation(t){return this.rotation=t,this}get angle(){return Tx(this.rotation)}set angle(t){this.rotation=yx(t)}setAngle(t){return this.angle=t,this}setScaleX(t){return this.scaleX=t,this}get width(){return this._width}set width(t){this._width=t}setWidth(t,s){return s===void 0&&(s=!1),this.width=t,s&&(this.scaleY=this.scaleX),this}setScaleY(t){return this.scaleY=t,this}setScale(t,s){return s===void 0&&(s=t),this.scaleX=t,this.scaleY=s,this}get height(){return this._height}set height(t){this._height=t}setHeight(t,s){return s===void 0&&(s=!1),this.height=t,s&&(this.scaleX=this.scaleY),this}setScale(t,s){return s===void 0&&(s=t),this.scaleX=t,this.scaleY=s,this}get displayWidth(){return this._width*this.scaleX}set displayWidth(t){this.scaleX=t/this._width}setDisplayWidth(t,s){return s===void 0&&(s=!1),this.displayWidth=t,s&&(this.scaleY=this.scaleX),this}get displayHeight(){return this._height*this.scaleY}set displayHeight(t){this.scaleY=t/this._height}setDisplayHeight(t,s){return s===void 0&&(s=!1),this.displayHeight=t,s&&(this.scaleX=this.scaleY),this}setOriginX(t){return this.originX=t,this._displayOriginX=this.width*t,this}setOriginY(t){return this.originY=t,this._displayOriginY=this.height*t,this}setOrigin(t,s){return s===void 0&&(s=t),this.setOriginX(t).setOriginY(s),this}get depth(){return this._depth}set depth(t){this.setDisplayListDirty(this._depth!=t),this._depth=t}setDepth(t){return t===void 0&&(t=0),this.depth=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var s=Ws(t,"width",void 0),g=Ws(t,"height",void 0),C=Ws(t,"scale",void 0),M=Ws(t,"scaleX",C),l=Ws(t,"scaleY",C);s!==void 0?g===void 0&&l===void 0?this.setWidth(s,!0):this.setWidth(s):M!==void 0?this.setScaleX(M):t.hasOwnProperty("displayWidth")&&this.setDisplayWidth(t.displayWidth),g!==void 0?s===void 0&&M===void 0?this.setHeight(g,!0):this.setHeight(g):l!==void 0?this.setScaleY(l):t.hasOwnProperty("displayHeight")&&this.setDisplayHeight(t.displayHeight);var T=Ws(t,"origin",void 0);return T!==void 0?this.setOrigin(T):(t.hasOwnProperty("originX")&&this.setOriginX(t.originX),t.hasOwnProperty("originY")&&this.setOriginY(t.originY)),t.hasOwnProperty("depth")&&this.setDepth(t.depth),this}reset(){return super.reset(),this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setOrigin(0).setDepth(0),this}webglRender(t,s,g,C,M,l,T,e){}canvasRender(t,s,g,C){}};const Sx=Phaser.GameObjects.Components.TransformMatrix,Px=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;var Ir=new Sx,Ex=function(i,t,s,g,C,M,l,T){var e=this._width,d=this._height,x=e*this.originX,u=d*this.originY,h=this.x-g,o=this.y-C,n=1,r=1;this.flipX&&(h+=e-x*2,n=-1),this.flipY&&(o+=d-u*2,r=-1),Ir.applyITRS(h,o,this.rotation,this.scaleX*n,this.scaleY*r),t.multiply(Ir,Ir);var f=-x,a=-u,c=f+e,p=a+d,v=Ir.setQuad(f,a,c,p,T),m=this.frame.u0,y=this.frame.v0,P=this.frame.u1,E=this.frame.v1,S=Px(this.tint,this.alpha*s);i.batchQuad(this.parent,v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],m,y,P,E,S,S,S,S,this.tintFill,M,l)},Mx=function(i,t,s,g){i.save();var C=this._width,M=this._height,l=C*this.originX,T=M*this.originY,e=this.x-l,d=this.y-T,x=1,u=1;this.flipX&&(e+=C,x=-1),this.flipY&&(d+=M,u=-1),g&&(e=Math.round(e),d=Math.round(d)),i.translate(e,d),i.rotate(this.rotation),i.scale(this.scaleX*x,this.scaleY*u);var h=this.frame;i.drawImage(h.source.image,h.cutX,h.cutY,C,M,0,0,C,M),i.restore()};const wx=Phaser.Utils.Objects.IsPlainObject;let cp=class extends Cx{constructor(t,s){super(t,dp),this.setFrame(s)}get width(){return this._width}set width(t){}get height(){return this._height}set height(t){}setFrame(t){return arguments.length>0&&!wx(t)&&(t=this.parent.texture.get(t)),this.frame=t,this._width=t?t.width:0,this._height=t?t.height:0,this}setFlipX(t){return t===void 0&&(t=!0),this.flipX=t,this}setFlipY(t){return t===void 0&&(t=!0),this.flipY=t,this}resetFlip(){return this.flipX=!1,this.flipY=!1,this}get tint(){return this._tint===void 0?this.parent.tint:this._tint}set tint(t){this._tint=t}setTint(t){return this.tint=t,this.tintFill=!1,this}setTintFill(t){return this.tint=t,this.tintFill=!0,this}clearTint(){return this.setTint(16777215),this}resetTint(){return this.tint=void 0,this.tintFill=void 0,this}get tintFill(){return this._tintFill===void 0?this.parent.tintFill:this._tintFill}set tintFill(t){this._tintFill=t}reset(){return super.reset(),this.resetFlip().resetTint().setFrame(),this}modifyPorperties(t){return t?(t.hasOwnProperty("width")&&(t.displayWidth=t.width,delete t.width),t.hasOwnProperty("height")&&(t.displayHeight=t.height,delete t.height),t.hasOwnProperty("frame")&&this.setFrame(t.frame),super.modifyPorperties(t),t.hasOwnProperty("flipX")&&this.setFlipX(t.flipX),t.hasOwnProperty("flipY")&&this.setFlipY(t.flipY),t.hasOwnProperty("tint")&&this.setTint(t.tint),t.hasOwnProperty("tintFill")&&this.setTintFill(t.tintFill),this):this}};var Rx={webglRender:Ex,canvasRender:Mx};Object.assign(cp.prototype,Rx);var vp=function(i,t){typeof t=="string"&&(t={frame:t});var s=i.poolManager?i.poolManager.allocate(dp):null;return s===null?s=new cp(i):s.setParent(i).setActive(),s.modifyPorperties(t),i.addChild(s),s},Ax=function(i,t,s,g,C,M){vp(this,{frame:t,x:s,y:g,width:C,height:M})},Ox=function(i,t,s,g,C,M){var l=this.texture.get(t),T=l.width,e=l.height,d=Math.floor(C/T),x=Math.floor(M/e);s+=(C-d*T)/2,g+=(M-x*e)/2;for(var u=0;u<d;u++)for(var h=0;h<x;h++)vp(this,{frame:t,x:s+u*T,y:g+h*e})};const bx={_drawImage:Ax,_drawTileSprite:Ox};class kl extends ap(up,"rexNinePatch2"){setBaseTexture(t,s,g,C){return this.setTexture(t,s),super.setBaseTexture(t,s,g,C),this}}Object.assign(kl.prototype,bx);ht.register("ninePatch2",function(i,t,s,g,C,M,l,T){var e=new kl(this.scene,i,t,s,g,C,M,l,T);return this.scene.add.existing(e),e});ot(window,"RexPlugins.UI.NinePatch2",kl);const ji=Phaser.Utils.Objects.GetValue;let pp=class{constructor(t,s,g,C,M){t===void 0&&(t=0),s===void 0&&(s=t),g===void 0&&(g=0),C===void 0&&(C=0),M===void 0&&(M=0),this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,s,g,C,M)}setTo(t,s,g,C,M){return this.setPosition(t,s),this.setRadius(M),this.setSize(g,C),this}setPosition(t,s){return this.x=t,this.y=s,this}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setSize(t,s){return this.width=t,this.height=s,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){t==null&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){t==null&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}set radius(t){var s,g;typeof t=="number"?(s=t,g=t):(s=ji(t,"x",0),g=ji(t,"y",0));var C=this.cornerRadius;C.tl=Br(ji(t,"tl",void 0),s,g),C.tr=Br(ji(t,"tr",void 0),s,g),C.bl=Br(ji(t,"bl",void 0),s,g),C.br=Br(ji(t,"br",void 0),s,g)}get radiusTL(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)}set radiusTL(t){Gr(this.cornerRadius.tl,t)}get radiusTR(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)}set radiusTR(t){Gr(this.cornerRadius.tr,t)}get radiusBL(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)}set radiusBL(t){Gr(this.cornerRadius.bl,t)}get radiusBR(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)}set radiusBR(t){Gr(this.cornerRadius.br,t)}};var Br=function(i,t,s){return i===void 0?i={x:t,y:s}:typeof i=="number"&&(i={x:i,y:i}),gp(i),i},Gr=function(i,t){typeof t=="number"?(i.x=t,i.y=t):(i.x=ji(t,"x",0),i.y=ji(t,"y",0)),gp(i)},gp=function(i){i.convex=i.x>=0||i.y>=0,i.x=Math.abs(i.x),i.y=Math.abs(i.y)},Si=function(i,t,s){var g=s.length;if(g>=2){var C=s[g-2],M=s[g-1];if(i===C&&t===M)return s}return s.push(i,t),s};const Rd=Phaser.Math.DegToRad;var oe=function(i,t,s,g,C,M,l,T,e){l&&M>C?M-=360:!l&&M<C&&(M+=360);var d=M-C,x=Rd(d)/T;C=Rd(C);for(var u=0;u<=T;u++){var h=C+x*u,o=i+s*Math.cos(h),n=t+g*Math.sin(h);Si(o,n,e)}return e},Fx=Phaser.Renderer.WebGL.Utils,mp=function(i,t,s,g,C,M){for(var l=Fx.getTintAppendFloatAlpha(s.fillColor,s.fillAlpha*g),T=s.pathData,e=s.pathIndexes,d=0;d<e.length;d+=3){var x=e[d]*2,u=e[d+1]*2,h=e[d+2]*2,o=T[x+0]-C,n=T[x+1]-M,r=T[u+0]-C,f=T[u+1]-M,a=T[h+0]-C,c=T[h+1]-M,p=t.getX(o,n),v=t.getY(o,n),m=t.getX(r,f),y=t.getY(r,f),P=t.getX(a,c),E=t.getY(a,c);i.batchTri(s,p,v,m,y,P,E,0,0,1,1,l,l,l,2)}},Lx=Phaser.Renderer.WebGL.Utils,ja=function(i,t,s,g,C){var M=i.strokeTint,l=Lx.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*s);M.TL=l,M.TR=l,M.BL=l,M.BR=l;var T=t.pathData,e=T.length-1,d=t.lineWidth,x=d/2,u=T[0]-g,h=T[1]-C;t.closePath||(e-=2);for(var o=2;o<e;o+=2){var n=T[o]-g,r=T[o+1]-C;i.batchLine(u,h,n,r,x,x,d,o-2,t.closePath?o===e-1:!1),u=n,h=r}};const Dx=Phaser.GameObjects.GetCalcMatrix;var Ix=function(i,t,s,g){t.dirty&&(t.updateData(),t.dirty=!1),s.addToRenderList(t);var C=i.pipelines.set(t.pipeline),M=Dx(t,s,g),l=C.calcMatrix.copyFrom(M.calc),T=t._displayOriginX,e=t._displayOriginY,d=s.alpha*t.alpha;i.pipelines.preBatch(t),t.isFilled&&mp(C,l,t,d,T,e),t.isStroked&&ja(C,t,d,T,e),i.pipelines.postBatch(t)},gr=function(i,t,s,g){var C=s||t.fillColor,M=g||t.fillAlpha,l=(C&16711680)>>>16,T=(C&65280)>>>8,e=C&255;i.fillStyle="rgba("+l+","+T+","+e+","+M+")"},mr=function(i,t,s,g){var C=s||t.strokeColor,M=g||t.strokeAlpha,l=(C&16711680)>>>16,T=(C&65280)>>>8,e=C&255;i.strokeStyle="rgba("+l+","+T+","+e+","+M+")",i.lineWidth=t.lineWidth};const Bx=Phaser.Renderer.Canvas.SetTransform;var Gx=function(i,t,s,g){t.dirty&&(t.updateData(),t.dirty=!1),s.addToRenderList(t);var C=i.currentContext;if(Bx(i,C,t,s,g)){var M=t._displayOriginX,l=t._displayOriginY,T=t.pathData,e=T.length-1,d=T[0]-M,x=T[1]-l;C.beginPath(),C.moveTo(d,x),t.closePath||(e-=2);for(var u=2;u<e;u+=2){var h=T[u]-M,o=T[u+1]-l;C.lineTo(h,o)}C.closePath(),t.isFilled&&(gr(C,t),C.fill()),t.isStroked&&(mr(C,t),C.stroke()),C.restore()}};const Nx={renderWebGL:Ix,renderCanvas:Gx},Vx=Phaser.GameObjects.Shape,kx=Phaser.Utils.Objects.IsPlainObject,Ad=Phaser.Utils.Objects.GetValue,zx=Phaser.Geom.Polygon.Earcut;let rs=class extends Vx{constructor(t,s,g,C,M,l,T,e){var d,x,u,h;if(kx(s)){var o=s;s=o.x,g=o.y,C=o.width,M=o.height,l=o.radius,T=o.color,e=o.alpha,d=o.strokeColor,x=o.strokeAlpha,u=o.strokeWidth,h=o.shape}s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=1),M===void 0&&(M=C),l===void 0&&(l=0),h===void 0&&(h=0);var n=new pp;if(super(t,"rexRoundRectangleShape",n),this.setShapeType(h),this.shapeType===0){var r=Ad(l,"radius",l);n.setTo(0,0,C,M,r)}else{var r={x:C/2,y:M/2};n.setTo(0,0,C,M,r)}var f=Ad(l,"iteration",void 0);this.setIteration(f),this.setPosition(s,g),this.setFillStyle(T,e),d!==void 0&&u===void 0&&(u=2),this.setStrokeStyle(u,d,x),this.updateDisplayOrigin(),this.dirty=!0}get fillColor(){return this._fillColor}set fillColor(t){this._fillColor=t,this.isFilled=t!=null&&this._fillAlpha>0}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this._fillAlpha=t,this.isFilled=t>0&&this._fillColor!=null}setFillStyle(t,s){return s===void 0&&(s=1),this.fillColor=t,this.fillAlpha=s,this}get strokeColor(){return this._strokeColor}set strokeColor(t){this._strokeColor=t,this.isStroked=t!=null&&this._strokeAlpha>0&&this._lineWidth>0}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this._strokeAlpha=t,this.isStroked=t>0&&this._strokeColor!=null&&this._lineWidth>0}get lineWidth(){return this._lineWidth}set lineWidth(t){this._lineWidth=t,this.isStroked=t>0&&this._strokeColor!=null}setStrokeStyle(t,s,g){return g===void 0&&(g=1),this.lineWidth=t,this.strokeColor=s,this.strokeAlpha=g,this}updateData(){var t=this.geom,s=this.pathData;s.length=0;var g=t.width,C=t.height,M=t.cornerRadius,l,T=this.iteration+1;if(l=M.tl,Nr(l))if(l.convex){var e=l.x,d=l.y;oe(e,d,l.x,l.y,180,270,!1,T,s)}else{var e=0,d=0;oe(e,d,l.x,l.y,90,0,!0,T,s)}else Si(0,0,s);if(l=M.tr,Nr(l))if(l.convex){var e=g-l.x,d=l.y;oe(e,d,l.x,l.y,270,360,!1,T,s)}else{var e=g,d=0;oe(e,d,l.x,l.y,180,90,!0,T,s)}else Si(g,0,s);if(l=M.br,Nr(l))if(l.convex){var e=g-l.x,d=C-l.y;oe(e,d,l.x,l.y,0,90,!1,T,s)}else{var e=g,d=C;oe(e,d,l.x,l.y,270,180,!0,T,s)}else Si(g,C,s);if(l=M.bl,Nr(l))if(l.convex){var e=l.x,d=C-l.y;oe(e,d,l.x,l.y,90,180,!1,T,s)}else{var e=0,d=C;oe(e,d,l.x,l.y,360,270,!0,T,s)}else Si(0,C,s);return s.push(s[0],s[1]),this.pathIndexes=zx(s),this}setShapeType(t){return typeof t=="string"&&(t=Ux[t]),this.shapeType=t,this}get width(){return this.geom.width}set width(t){this.resize(t,this.height)}get height(){return this.geom.height}set height(t){this.resize(this.width,t)}setSize(t,s){if(s===void 0&&(s=t),this.geom.width===t&&this.geom.height===s)return this;this.geom.setSize(t,s),this.shapeType===1&&this.setRadius({x:t/2,y:s/2}),this.updateDisplayOrigin(),this.dirty=!0;var g=this.input;return g&&!g.customHitArea&&(g.hitArea.width=t,g.hitArea.height=s),this}resize(t,s){return this.setSize(t,s),this}get radius(){return this.geom.radius}set radius(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(t){this.geom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(t){this.geom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(t){this.geom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(t){this.geom.radiusBR=t,this.dirty=!0}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setRadiusTL(t){return t===void 0&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return t===void 0&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return t===void 0&&(t=0),this.radiusBL=t,this}setRadiusBR(t){return t===void 0&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}get iteration(){return this._iteration}set iteration(t){if(this._iteration===void 0){this._iteration=t;return}this._iteration!==t&&(this._iteration=t,this.dirty=!0)}setIteration(t){return t===void 0&&(t=6),this.iteration=t,this}};var Nr=function(i){return i.x>0&&i.y>0};const Ux={rectangle:0,circle:1};Object.assign(rs.prototype,Nx);ht.register("roundRectangle",function(i,t,s,g,C,M,l){var T=new rs(this.scene,i,t,s,g,C,M,l);return this.scene.add.existing(T),T});ot(window,"RexPlugins.UI.RoundRectangle",rs);var yl=function(i,t,s,g){if(s===void 0&&(s="."),g===void 0&&(g={}),!i)return g;if(t in i)return Object.assign(g,i[t]);t+=s;for(var C in i)C.startsWith(t)&&(g[C.replace(t,"")]=i[C]);return g},Ho=function(i,t,s){var g=yl(i,t);if(s)for(var C in g)s.hasOwnProperty(C)&&(g[s[C]]=g[C],delete g[C]);return g},zl=function(i,t,s){if(s===void 0&&(s={}),Array.isArray(t))for(var g,C=0,M=t.length;C<M;C++)g=t[C],s[g]=i[g];else for(var g in t)s[g]=i[g];return s},Ul=function(i,t){for(var s in i)if(!(s in t)||i[s]!==t[s])return!1;for(var s in t)if(!(s in i))return!1;return!0},Hs=function(i,t){if(t){var s=zl(i,t);if(!Ul(s,t))return i.modifyStyle(t),s}};const Yx={setActiveState(i){return i===void 0&&(i=!0),this.activeState===i?this:(this.activeState=i,i?this.activeStyleSave=Hs(this,this.activeStyle):(Hs(this,this.activeStyleSave),this.activeStyleSave=void 0),this)},setHoverState(i){return i===void 0&&(i=!0),this.hoverState===i?this:(this.hoverState=i,i?this.hoverStyleSave=Hs(this,this.hoverStyle):(Hs(this,this.hoverStyleSave),this.hoverStyleSave=void 0),this)},setDisableState(i){return i===void 0&&(i=!0),this.disableState===i?this:(this.disableState=i,i?this.disableStyleSave=Hs(this,this.disableStyle):(Hs(this,this.disableStyleSave),this.disableStyleSave=void 0),this)}};class Ja extends rs{constructor(t,s){s===void 0&&(s={}),super(t,s),this.activeStyle=Ho(s,"active",$o),this.hoverStyle=Ho(s,"hover",$o),this.disableStyle=Ho(s,"disable",$o)}modifyStyle(t){for(var s in t)this[s]=t[s];return this}}const $o={color:"fillColor",alpha:"fillAlpha",strokeWidth:"lineWidth"};Object.assign(Ja.prototype,Yx);ht.register("statesRoundRectangle",function(i){var t=new Ja(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.StatesRoundRectangle",Ja);const Xx=Phaser.Renderer.WebGL.Utils;var Wx=function(i,t,s,g){if(t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)){s.addToRenderList(t);var C=t.frame,M=C.width,l=C.height,T=Xx.getTintAppendFloatAlpha,e=i.pipelines.set(t.pipeline,t),d=e.setTexture2D(C.glTexture,t);i.pipelines.preBatch(t),e.batchTexture(t,C.glTexture,M,l,t.x,t.y,M/t.resolution,l/t.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,M,l,T(t.tintTopLeft,s.alpha*t._alphaTL),T(t.tintTopRight,s.alpha*t._alphaTR),T(t.tintBottomLeft,s.alpha*t._alphaBL),T(t.tintBottomRight,s.alpha*t._alphaBR),t.tintFill,0,0,s,g,!1,d),i.pipelines.postBatch(t)}},Hx=function(i,t,s,g){t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)&&(s.addToRenderList(t),i.batchSprite(t,t.frame,s,g))};const $x={renderWebGL:Wx,renderCanvas:Hx},Kx=Phaser.Display.Color,Zx={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(i){return this.context.fillStyle=i,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},drawFrame(i,t,s,g,C,M,l,T,e,d){var x=this.scene.sys.textures.getFrame(i,t);if(!x)return this;var u=x.cutWidth,h=x.cutHeight;s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=u),M===void 0&&(M=h),l===void 0&&(l=0),T===void 0&&(T=0),e===void 0&&(e=u),d===void 0&&(d=h);var o=x.cutX+l,n=x.cutY+T;return this.context.drawImage(x.source.image,o,n,e,d,s,g,C,M),this.dirty=!0,this},getDataURL(i,t){return this.canvas.toDataURL(i,t)},getPixel(i,t,s){s===void 0&&(s=new Kx);var g=this.context.getImageData(i,t,1,1);return s.setTo(g.data[0],g.data[1],g.data[2],g.data[3]),s},setPixel(i,t,s,g,C,M){if(typeof s!="number"){var l=s;s=l.red,g=l.green,C=l.blue,M=l.alpha}M===void 0&&(M=s!==0||g!==0||C!==0?255:0);var T=this.context.createImageData(1,1);return T.data[0]=s,T.data[1]=g,T.data[2]=C,T.data[3]=M,this.context.putImageData(T,i,t),this.dirty=!0,this}};var xp=function(i,t,s,g,C,M,l){var T=i.sys.textures,e=i.renderer;g===void 0&&(g=0),C===void 0&&(C=0),M===void 0&&(M=t.width),l===void 0&&(l=t.height);var d;T.exists(s)?d=T.get(s):d=T.createCanvas(s,M,l);var x=d.getSourceImage();x.width!==M&&(x.width=M),x.height!==l&&(x.height=l);var u=x.getContext("2d",{willReadFrequently:!0});u.clearRect(0,0,M,l),u.drawImage(t,g,C,M,l),e.gl&&d&&e.canvasToTexture(x,d.source[0].glTexture,!0,0)};const jx={updateTexture(i,t){i&&(t?i.call(t,this.canvas,this.context):i(this.canvas,this.context)),(this.canvas.width!==this.frame.width||this.canvas.height!==this.frame.height)&&this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!1;var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=this.width,s.hitArea.height=this.height),this},generateTexture(i,t,s,g,C){var M=this.canvas;return g===void 0?g=M.width:g*=this.resolution,C===void 0?C=M.height:C*=this.resolution,xp(this.scene,M,i,t,s,g,C),this},loadTexture(i,t){var s=this.scene.sys.textures.getFrame(i,t);return s?(this.width!==s.cutWidth||this.height!==s.cutHeight?this.setSize(s.cutWidth,s.cutHeight):this.clear(),this.drawFrame(i,t),this.dirty=!0,this):this}},Od=Phaser.Display.Canvas.CanvasPool,Jx=Phaser.GameObjects.GameObject;let as=class extends Jx{constructor(t,s,g,C,M){s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=1),M===void 0&&(M=1),super(t,"rexCanvas"),this.renderer=t.sys.game.renderer,this.resolution=1,this._width=C,this._height=M,C=Math.max(Math.ceil(C*this.resolution),1),M=Math.max(Math.ceil(M*this.resolution),1),this.canvas=Od.create(this,C,M),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.dirty=!1,this.setPosition(s,g),this.setOrigin(.5,.5),this.initPipeline(),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0}preDestroy(){Od.remove(this.canvas),this.texture.destroy(),this.canvas=null,this.context=null}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setCanvasSize(t,s){return this._width===t&&this._height===s?this:(this._width=t,this._height=s,this.updateDisplayOrigin(),t=Math.max(Math.ceil(t*this.resolution),1),s=Math.max(Math.ceil(s*this.resolution),1),this.canvas.width=t,this.canvas.height=s,this.frame.setSize(t,s),this.dirty=!0,this)}setSize(t,s){return this.setCanvasSize(t,s),this}get displayWidth(){return this.scaleX*this._width}set displayWidth(t){this.scaleX=t/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(t){this.scaleY=t/this._height}setDisplaySize(t,s){return this.displayWidth=t,this.displayHeight=s,this}getCanvas(t){return t||(this.dirty=!0),this.canvas}getContext(t){return t||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(t,s){return this.setSize(t,s),this}};const Ce=Phaser.GameObjects.Components;Phaser.Class.mixin(as,[Ce.Alpha,Ce.BlendMode,Ce.Crop,Ce.Depth,Ce.Flip,Ce.GetBounds,Ce.Mask,Ce.Origin,Ce.Pipeline,Ce.PostPipeline,Ce.ScrollFactor,Ce.Tint,Ce.Transform,Ce.Visible,$x,Zx,jx]);const Qx=Phaser.Utils.String.Pad;var St=function(i,t,s){if(i==null)return i;switch(typeof i){case"string":return i;case"number":return`#${Qx(Math.floor(i).toString(16),6,"0",1)}`;case"function":return i(t,s);case"object":return i.hasOwnProperty("r")?i.hasOwnProperty("a")?`rgba(${i.r},${i.g},${i.b},${i.a})`:`rgb(${i.r},${i.g},${i.b})`:i.hasOwnProperty("h")?i.hasOwnProperty("a")?`hsla(${i.h},${i.s},${i.l},${i.a})`:`hsl(${i.h},${i.s},${i.l})`:i;default:return i}};const bd=Phaser.Math.DegToRad;var yp=function(i,t,s,g,C,M,l){var T=new pp(t,s,g,C,M),e=T.minWidth,d=T.minHeight,x=g>=e?1:g/e,u=C>=d?1:C/d,h=T.cornerRadius,o,n,r,f,a;i.save(),i.beginPath(),i.translate(t,s),o=h.tl,kr(o)?(n=o.x*x,r=o.y*u,Vr(o)?(f=n,a=r,Ui(i,f,a,n,r,180,270,!1,l)):(f=0,a=0,Ui(i,f,a,n,r,90,0,!0,l))):i.lineTo(0,0),o=h.tr,kr(o)?(n=o.x*x,r=o.y*u,Vr(o)?(f=g-n,a=r,Ui(i,f,a,n,r,270,360,!1,l)):(f=g,a=0,Ui(i,f,a,n,r,180,90,!0,l))):i.lineTo(g,0),o=h.br,kr(o)?(n=o.x*x,r=o.y*u,Vr(o)?(f=g-n,a=C-r,Ui(i,f,a,n,r,0,90,!1,l)):(f=g,a=C,Ui(i,f,a,n,r,270,180,!0,l))):i.lineTo(g,C),o=h.bl,kr(o)?(n=o.x*x,r=o.y*u,Vr(o)?(f=n,a=C-r,Ui(i,f,a,n,r,90,180,!1,l)):(f=0,a=C,Ui(i,f,a,n,r,360,270,!0,l))):i.lineTo(0,C),i.closePath(),i.restore()},Vr=function(i){return!i.hasOwnProperty("convex")||i.convex},kr=function(i){return i.x>0&&i.y>0},Ui=function(i,t,s,g,C,M,l,T,e){if(T&&l>M?l-=360:!T&&l<M&&(l+=360),M=bd(M),l=bd(l),e==null)i.ellipse(t,s,g,C,0,M,l,T);else{e+=1;for(var d,x,u,h=(l-M)/e,o=0;o<=e;o++)u=M+h*o,d=t+g*Math.cos(u),x=s+C*Math.sin(u),i.lineTo(d,x)}},qx=function(i,t,s,g,C,M,l,T,e,d,x,u,h){if(yp(t,s,g,C,M,l,h),T!=null){if(x!=null){var o;u?o=t.createLinearGradient(0,0,C,0):o=t.createLinearGradient(0,0,0,M),o.addColorStop(0,T),o.addColorStop(1,x),T=o}t.fillStyle=T,t.fill()}e!=null&&d>0&&(t.strokeStyle=e,t.lineWidth=d,t.stroke())},Yl=function(i,t,s,g,C,M,l,T){if(!(t==null&&s==null)){var e=i.canvas.width,d=i.canvas.height;s==null&&(g=0);var x=g/2;e=Math.max(1,e-g),d=Math.max(1,d-g),qx(i.canvas,i.context,x,x,e,d,C,t,s,g,M,l,T)}},_x=function(){Yl(this,this.fillStyle,this.strokeStyle,this.lineWidth,this.radius,this.fillColor2,this.isHorizontalGradient,this.iteration)};const Fd=Phaser.Utils.Objects.GetValue;let Tp=class extends as{constructor(t,s,g,C,M,l,T,e,d,x,u){s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=1),M===void 0&&(M=C),l===void 0&&(l=0),super(t,s,g,C,M),this.type="rexRoundRectangleCanvas";var h=Fd(l,"radius",l),o=Fd(l,"iteration",void 0);this.setRadius(h),this.setIteration(o),this.setFillStyle(T,x,u),this.setStrokeStyle(e,d)}get radius(){return this._radius}set radius(t){this.dirty|=this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this}get iteration(){return this._iteration}set iteration(t){this.dirty|=this._iteration!=t,this._iteration=t}setIteration(t){return this.iteration=t,this}get fillStyle(){return this._fillStyle}set fillStyle(t){t=St(t,this.canvas,this.context),this.dirty|=this._fillStyle!=t,this._fillStyle=t}get fillColor2(){return this._fillColor2}set fillColor2(t){t=St(t,this.canvas,this.context),this.dirty|=this._fillColor2!=t,this._fillColor2=t}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setFillStyle(t,s,g){return g===void 0&&(g=!0),this.fillStyle=t,this.fillColor2=s,this.isHorizontalGradient=g,this}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){t=St(t,this.canvas,this.context),this.dirty|=this._strokeStyle!=t,this._strokeStyle=t}get lineWidth(){return this._lineWidth}set lineWidth(t){this.dirty|=this._lineWidth!=t,this._lineWidth=t}setStrokeStyle(t,s){return this.strokeStyle=t,this.lineWidth=s,this}updateTexture(){return this.clear(),_x.call(this),super.updateTexture(),this}};ht.register("roundRectangleCanvas",function(i,t,s,g,C,M,l,T,e,d){var x=new Tp(this.scene,i,t,s,g,C,M,l,T,e,d);return this.scene.add.existing(x),x});ot(window,"RexPlugins.UI.RoundRectangleCanvas",Tp);/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var ty=Phaser.Renderer.WebGL.Utils,ey=function(i,t,s,g){if(!(t.width===0||t.height===0)){s.addToRenderList(t);var C=t.frame,M=C.width,l=C.height,T=ty.getTintAppendFloatAlpha,e=i.pipelines.set(t.pipeline,t),d=e.setTexture2D(C.glTexture,t);i.pipelines.preBatch(t),e.batchTexture(t,C.glTexture,M,l,t.x,t.y,M/t.style.resolution,l/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,M,l,T(t.tintTopLeft,s.alpha*t._alphaTL),T(t.tintTopRight,s.alpha*t._alphaTR),T(t.tintBottomLeft,s.alpha*t._alphaBL),T(t.tintBottomRight,s.alpha*t._alphaBR),t.tintFill,0,0,s,g,!1,d),i.pipelines.postBatch(t)}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var iy=function(i,t,s,g){t.width===0||t.height===0||(s.addToRenderList(t),i.batchSprite(t,t.frame,s,g))};const sy={renderWebGL:ey,renderCanvas:iy},Ko=Phaser.Display.Canvas.CanvasPool;var ny=function(i,t,s){s===void 0&&(s={});var g=Ko.create(this),C=g.getContext("2d",{willReadFrequently:!0});i.syncFont(g,C);var M=C.measureText(t),l=Math.ceil(M.width*i.baselineX),T=l,e=2*T;if(T=T*i.baselineY|0,g.width=l,g.height=e,C.fillStyle="#f00",C.fillRect(0,0,l,e),C.font=i._font,C.textBaseline="alphabetic",C.fillStyle="#000",C.fillText(i.testString,0,T),s.left=0,l===0||e===0||!C.getImageData(0,0,l,e))return Ko.remove(g),s;for(var d=C.getImageData(0,0,l,e).data,x=!1,u=0;u<l;u++){for(var h=0;h<e;h++){var o=(h*l+u)*4;if(d[o]!==255){s.left=u,x=!0;break}}if(x)break}return Ko.remove(g),s};const ry=Phaser.GameObjects.GameObject;class Cp extends ry{setStyle(t){return this.style.setStyle(t)}setFont(t){return this.style.setFont(t)}setFontFamily(t){return this.style.setFontFamily(t)}setFontSize(t){return this.style.setFontSize(t)}setFontStyle(t){return this.style.setFontStyle(t)}setTestString(t){return this.style.setTestString(t)}setFixedSize(t,s){return this.style.setFixedSize(t,s)}setBackgroundColor(t,s,g){return this.style.setBackgroundColor(t,s,g)}setBackgroundStrokeColor(t,s){return this.style.setBackgroundStrokeColor(t,s)}setBackgroundCornerRadius(t,s){return this.style.setBackgroundCornerRadius(t,s)}setFill(t){return this.style.setFill(t)}setColor(t){return this.style.setColor(t)}setStroke(t,s){return this.style.setStroke(t,s)}setShadow(t,s,g,C,M,l){return this.style.setShadow(t,s,g,C,M,l)}setShadowOffset(t,s){return this.style.setShadowOffset(t,s)}setShadowColor(t){return this.style.setShadowColor(t)}setShadowBlur(t){return this.style.setShadowBlur(t)}setShadowStroke(t){return this.style.setShadowStroke(t)}setShadowFill(t){return this.style.setShadowFill(t)}setWrapMode(t){return this.style.setWrapMode(t)}setWrapWidth(t){return this.style.setWrapWidth(t)}setWordWrapWidth(t){return this.style.setWrapWidth(t)}setAlign(t){return this.style.setHAlign(t)}setHAlign(t){return this.style.setHAlign(t)}setVAlign(t){return this.style.setVAlign(t)}setLineSpacing(t){return this.style.setLineSpacing(t)}set lineSpacing(t){this.setLineSpacing(t)}get lineSpacing(){return this.style.lineSpacing}setXOffset(t){return this.style.setXOffset(t)}setMaxLines(t){return this.style.setMaxLines(t)}setResolution(t){return this.style.setResolution(t)}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(t,s){return this.style.setTextMetrics(t,s)}measureTextMargins(t,s){return ny(this.style,t,s)}}const ye=Phaser.GameObjects.Components;Phaser.Class.mixin(Cp,[ye.Alpha,ye.BlendMode,ye.ComputedSize,ye.Crop,ye.Depth,ye.Flip,ye.GetBounds,ye.Mask,ye.Origin,ye.Pipeline,ye.PostPipeline,ye.ScrollFactor,ye.Tint,ye.Transform,ye.Visible,sy]);var ay={backgroundColor:["backgroundColor",null,St],backgroundColor2:["backgroundColor2",null,St],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,St],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",St],stroke:["stroke","#fff",St],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",St],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",St],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],strikethroughColor:["strikethrough.color","#000",St],strikethroughThickness:["strikethrough.thickness",0,null],strikethroughOffset:["strikethrough.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|MÃ‰qgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */const zr=Phaser.Display.Canvas.CanvasPool;var Ld=function(i){var t=zr.create(this),s=t.getContext("2d",{willReadFrequently:!0});i.syncFont(t,s);var g=s.measureText(i.testString);if("actualBoundingBoxAscent"in g){var C=g.actualBoundingBoxAscent,M=g.actualBoundingBoxDescent,d={ascent:C,descent:M,fontSize:C+M};return zr.remove(t),d}var l=Math.ceil(g.width*i.baselineX),T=l,e=2*T;T=T*i.baselineY|0,t.width=l,t.height=e,s.fillStyle="#f00",s.fillRect(0,0,l,e),s.font=i._font,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(i.testString,0,T);var d={ascent:0,descent:0,fontSize:0};if(!s.getImageData(0,0,l,e))return d.ascent=T,d.descent=T+6,d.fontSize=d.ascent+d.descent,zr.remove(t),d;var x=s.getImageData(0,0,l,e).data,u=x.length,h=l*4,o,n,r=0,f=!1;for(o=0;o<T;o++){for(n=0;n<h;n+=4)if(x[r+n]!==255){f=!0;break}if(!f)r+=h;else break}for(d.ascent=T-o,r=u-h,f=!1,o=e;o>T;o--){for(n=0;n<h;n+=4)if(x[r+n]!==255){f=!0;break}if(!f)r-=h;else break}return d.descent=o-T,d.fontSize=d.ascent+d.descent,zr.remove(t),d},re={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,SPLITREGEXP:/(?:\r\n|\r|\n)/};const oy=Phaser.Utils.Objects.GetAdvancedValue,Ae=Phaser.Utils.Objects.GetValue;let Xl=class{constructor(t,s,g){this.parent=t,g===void 0&&(g=ay),this.propertyMap=g,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.strikethroughColor,this.strikethroughThickness,this.strikethroughOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(s,!1,!0)}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==re.NO_WRAP&&this.wrapWidth===0}setStyle(t,s,g){if(s===void 0&&(s=!0),g===void 0&&(g=!1),t&&t.hasOwnProperty("wrap")){var C=t.wrap;if(C.hasOwnProperty("mode")){var M=C.mode;typeof M=="string"&&(C.mode=Dd[M])}else C.hasOwnProperty("width")&&(C.mode=1)}t&&t.rtl&&g&&!t.hasOwnProperty("halign")&&(t.halign="right"),t&&t.hasOwnProperty("fontSize")&&typeof t.fontSize=="number"&&(t.fontSize=t.fontSize.toString()+"px");var l=this.propertyMap;for(var T in l){var e=l[T],d=e[0],x=g?e[1]:this[T],u=e[2];if(T==="wrapCallback"||T==="wrapCallbackScope")this[T]=Ae(t,d,x);else{var h=oy(t,d,x);u&&(h=u(h)),this[T]=h}}var o=Ae(t,"font",null);o===null?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=o;var n=Ae(t,"fill",null);n!==null&&(this.color=St(n));var r=Ae(t,"metrics",!1);return r?this.metrics={ascent:Ae(r,"ascent",0),descent:Ae(r,"descent",0),fontSize:Ae(r,"fontSize",0)}:(s||!this.metrics)&&(this.metrics=Ld(this)),s?this.parent.updateText():this.parent}syncFont(t,s){s.font=this._font}syncStyle(t,s){s.textBaseline="alphabetic",s.fillStyle=this.color,s.strokeStyle=this.stroke,s.lineWidth=this.strokeThickness,s.lineCap="round",s.lineJoin="round"}syncShadow(t,s){s?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)}update(t){return t&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=Ld(this)),this.parent.updateText(t)}buildFont(){var t=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return t!==this._font&&(this._font=t),this}setFont(t){return typeof t=="string"?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=Ae(t,"fontFamily","Courier"),this.fontSize=Ae(t,"fontSize","16px"),this.fontStyle=Ae(t,"fontStyle","")),this.update(!0)}setFontFamily(t){return this.fontFamily=t,this.update(!0)}setFontStyle(t){return this.fontStyle=t,this.update(!0)}setFontSize(t){return typeof t=="number"&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)}setTestString(t){return this.testString=t,this.update(!0)}setFixedSize(t,s){return this.fixedWidth=t,this.fixedHeight=s,t&&(this.parent.width=t),s&&(this.parent.height=s),this.update(this.isWrapFitMode)}setResolution(t){return this.resolution=t,this.update(!1)}setLineSpacing(t){return this.lineSpacing=t,this.update(!1)}setXOffset(t){return this.xOffset=t,this.update(!1)}setBackgroundColor(t,s,g){return g===void 0&&(g=!0),this.backgroundColor=St(t,this.parent.canvas,this.parent.context),this.backgroundColor2=St(s,this.parent.canvas,this.parent.context),this.backgroundHorizontalGradient=g,this.update(!1)}setBackgroundStrokeColor(t,s){return this.backgroundStrokeColor=St(t,this.parent.canvas,this.parent.context),this.backgroundStrokeLineWidth=s,this.update(!1)}setBackgroundCornerRadius(t,s){return this.backgroundCornerRadius=t,this.backgroundCornerIteration=s,this.update(!1)}setFill(t){return this.color=St(t,this.parent.canvas,this.parent.context),this.update(!1)}setColor(t){return this.color=St(t,this.parent.canvas,this.parent.context),this.update(!1)}setStroke(t,s){return t===void 0?this.strokeThickness=0:(s===void 0&&(s=this.strokeThickness),this.stroke=St(t,this.parent.canvas,this.parent.context),this.strokeThickness=s),this.update(!0)}setShadow(t,s,g,C,M,l){return t===void 0&&(t=0),s===void 0&&(s=0),g===void 0&&(g="#000"),C===void 0&&(C=0),M===void 0&&(M=!1),l===void 0&&(l=!0),this.shadowOffsetX=t,this.shadowOffsetY=s,this.shadowColor=St(g,this.parent.canvas,this.parent.context),this.shadowBlur=C,this.shadowStroke=M,this.shadowFill=l,this.update(!1)}setShadowOffset(t,s){return t===void 0&&(t=0),s===void 0&&(s=t),this.shadowOffsetX=t,this.shadowOffsetY=s,this.update(!1)}setShadowColor(t){return t===void 0&&(t="#000"),this.shadowColor=St(t,this.parent.canvas,this.parent.context),this.update(!1)}setShadowBlur(t){return t===void 0&&(t=0),this.shadowBlur=t,this.update(!1)}setShadowStroke(t){return this.shadowStroke=t,this.update(!1)}setShadowFill(t){return this.shadowFill=t,this.update(!1)}setUnderline(t,s,g){return t===void 0&&(t="#000"),s===void 0&&(s=0),g===void 0&&(g=0),this.underlineColor=St(t,this.parent.canvas,this.parent.context),this.underlineThickness=s,this.underlineOffset=g,this.update(!1)}setUnderlineColor(t){return t===void 0&&(t="#000"),this.underlineColor=St(t,this.parent.canvas,this.parent.context),this.update(!1)}setUnderlineThickness(t){return t===void 0&&(t=0),this.underlineThickness=t,this.update(!1)}setUnderlineOffset(t){return t===void 0&&(t=0),this.underlineOffset=t,this.update(!1)}setStrikethrough(t,s,g){return t===void 0&&(t="#000"),s===void 0&&(s=0),g===void 0&&(g=0),this.strikethroughColor=St(t,this.parent.canvas,this.parent.context),this.strikethroughThickness=s,this.strikethroughOffset=g,this.update(!1)}setStrikethroughColor(t){return t===void 0&&(t="#000"),this.strikethroughColor=St(t,this.parent.canvas,this.parent.context),this.update(!1)}setStrikethroughThickness(t){return t===void 0&&(t=0),this.strikethroughThickness=t,this.update(!1)}setStrikethroughOffset(t){return t===void 0&&(t=0),this.strikethroughOffset=t,this.update(!1)}setWrapMode(t){return typeof t=="string"&&(t=Dd[t.toLowerCase()]||0),this.wrapMode=t,this.update(!0)}setWrapWidth(t){return this.wrapWidth=t,this.update(!1)}setAlign(t,s){return t===void 0&&(t="left"),s===void 0&&(s="top"),this.halign=t,this.valign=s,this.update(!1)}setHAlign(t){return t===void 0&&(t="left"),this.halign=t,this.update(!1)}setVAlign(t){return t===void 0&&(t="top"),this.valign=t,this.update(!1)}setMaxLines(t){return t===void 0&&(t=0),this.maxLines=t,this.update(!1)}getTextMetrics(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}}setTextMetrics(t,s){return this.metrics.ascent=t.ascent,this.metrics.descent=t.descent,this.metrics.fontSize=t.fontSize,s&&(typeof s=="string"?(this.fontFamily=s,this.fontSize="",this.fontStyle=""):(this.fontFamily=Ae(s,"fontFamily",this.fontFamily),this.fontSize=Ae(s,"fontSize",this.fontSize),this.fontStyle=Ae(s,"fontStyle",this.fontStyle))),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}toJSON(){var t={},s=this.propertyMap;for(var g in s)t[g]=this[g];return t.metrics=this.getTextMetrics(),t}destroy(){this.parent=void 0}};const Dd={none:re.NO_WRAP,word:re.WORD_WRAP,char:re.CHAR_WRAP,character:re.CHAR_WRAP},hy={draw(i,t,s,g){var C=this.penManager;this.hitAreaManager.clear();var M=this.context;M.save();var l=this.defaultStyle;this.clear(),Yl(this,l.backgroundColor,l.backgroundStrokeColor,l.backgroundStrokeLineWidth,l.backgroundCornerRadius,l.backgroundColor2,l.backgroundHorizontalGradient,l.backgroundCornerIteration),i+=this.startXOffset,t+=this.startYOffset;var T=l.halign,e=l.valign,d,x=l.lineHeight,u=C.lines,h=u.length,o=l.maxLines,n,r,f;o>0&&h>o?(n=o,e==="center"?r=Math.floor((h-n)/2):e==="bottom"?r=h-n:r=0):(n=h,r=0),f=r+n;var a,c,p=this.rtl,v=p?this.parent.width:void 0;e==="center"?c=Math.max((g-n*x)/2,0):e==="bottom"?c=Math.max(g-n*x-2,0):c=0,c+=t;for(var m=r;m<f;m++)if(d=C.getLineWidth(m),d!==0){for(var y=u[m],P=y.length,E=T,S=0;S<P;S++){var w=y[S].prop.align;if(w!==void 0){E=w;break}}E==="center"?a=(s-d)/2:E==="right"?a=p?0:s-d:a=p?s-d:0,a+=i;for(var S=0;S<P;S++)this.drawPen(y[S],a,c,v)}M.restore()},drawPen(i,t,s,g){t+=i.x,s+=i.y+(i.prop.y||0),g!==void 0&&(t=g-t);var C=this.canvas,M=this.context;M.save();var l=this.parser.propToContextStyle(this.defaultStyle,i.prop);if(l.buildFont(),l.syncFont(C,M),l.syncStyle(C,M),l.underlineThickness>0&&i.width>0){var T=s+l.underlineOffset-l.underlineThickness/2;this.drawLine(t,T,i.width,l.underlineThickness,l.underlineColor)}if(i.isTextPen&&this.drawText(t,s,i.text,l),i.isImagePen&&this.drawImage(t,s,i.prop.img,l),l.strikethroughThickness>0&&i.width>0){var T=s+l.strikethroughOffset-l.strikethroughThickness/2;this.drawLine(t,T,i.width,l.strikethroughThickness,l.strikethroughColor)}if(M.restore(),i.hasAreaMarker&&i.width>0){var e,d=i.prop.area;if(d)e={key:d};else{var x=i.prop.url;e={key:`url:${x}`,url:x}}this.hitAreaManager.add(t,s-this.startYOffset,i.width,this.defaultStyle.lineHeight,e)}},clear(){var i=this.canvas;this.context.clearRect(0,0,i.width,i.height)},drawLine(i,t,s,g,C){this.autoRound&&(i=Math.round(i),t=Math.round(t));var M=this.context,l=M.lineCap;M.lineCap="butt",M.strokeStyle=C,M.lineWidth=g,M.beginPath(),M.moveTo(i,t),M.lineTo(i+s,t),M.stroke(),M.lineCap=l},drawText(i,t,s,g){this.autoRound&&(i=Math.round(i),t=Math.round(t));var C=this.context;g.stroke&&g.stroke!=="none"&&g.strokeThickness>0&&(g.syncShadow(C,g.shadowStroke),C.strokeText(s,i,t)),g.color&&g.color!=="none"&&(g.syncShadow(C,g.shadowFill),C.fillText(s,i,t))},drawImage(i,t,s,g){t-=this.startYOffset,this.parent.imageManager.draw(s,this.context,i,t,this.autoRound)}},cs=Phaser.Utils.Objects.GetValue,ly=re.NO_NEWLINE,Id=re.RAW_NEWLINE;class uy{constructor(t){this.prop={},this.resetFromJSON(t)}resetFromJSON(t){this.text=cs(t,"text",""),this.x=cs(t,"x",0),this.y=cs(t,"y",0),this.width=cs(t,"width",0);var s=cs(t,"prop",null);s===null&&(s={}),this.prop=s,this.newLineMode=cs(t,"newLineMode",0),this.startIndex=cs(t,"startIndex",0)}get plainText(){var t=this.text;return this.newLineMode===Id&&(t+=`
`),t}get wrapText(){var t=this.text;return this.newLineMode!==ly&&(t+=`
`),t}get rawTextLength(){var t=this.text.length;return this.newLineMode===Id&&(t+=1),t}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area||!!this.prop.url}}var Ls=function(i,t){var s=Array.isArray(i);if(t===void 0?t=s?[]:{}:Ii(t),s){t.length=i.length;for(var g=0,C=i.length;g<C;g++)t[g]=i[g]}else for(var M in i)t[M]=i[M];return t};const Bd=Phaser.Utils.Objects.GetFastValue,Gd=re.NO_NEWLINE,dy=re.WRAPPED_NEWLINE;class Wl{constructor(t){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.tagToText=Bd(t,"tagToText",ge),this.tagToTextScope=Bd(t,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var t=0,s=this.lines.length;t<s;t++)this.lines[t].length=0;this.pensPool.pushMultiple(this.pens),this.linesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(t,s,g,C,M,l){var T=this.pensPool.pop();return T==null&&(T=new uy),vs.text=t,vs.x=s,vs.y=g,vs.width=C,vs.prop=M,vs.newLineMode=l,T.resetFromJSON(vs),this.addPen(T),this}addImagePen(t,s,g,C){return this.addTextPen("",t,s,g,C,Gd),this}addNewLinePen(){var t=this.lastPen,s=t?t.lastX:0,g=t?t.y:0,C=t?Ls(t.prop):null;return this.addTextPen("",s,g,0,C,dy),this}addPen(t){var s=this.lastPen;s==null?t.startIndex=0:t.startIndex=s.endIndex,this.pens.push(t);var g=this.lastLine;g==null&&(g=this.linesPool.pop()||[],this.lines.push(g)),g.push(t),t.newLineMode!==Gd&&(g=this.linesPool.pop()||[],this.lines.push(g)),this.maxLinesWidth=void 0}clone(t){t==null&&(t=new Wl),t.clear();for(var s=0,g=this.lines.length;s<g;s++)for(var C=this.lines[s],M=0,l=C.length;M<l;M++){var T=C[M];t.addPen(T.text,T.x,T.y,T.width,Ls(T.prop),T.newLineMode)}return t}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var s=this.lines[t];return s&&s[0]?s[0].startIndex:0}getLineEndIndex(t){t>=this.lines.length&&(t=this.lines.length-1);var s,g=!1,C;for(s=t;s>=0&&(C=this.lines[s],g=C!=null&&C.length>0,!g);s--);if(!g)return 0;var M=C[C.length-1];return M.endIndex}getLineWidth(t){var s=this.lines[t];if(!s)return 0;var g=s[s.length-1];if(g==null)return 0;var C=g.lastX;return C}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var t,s=0,g=0,C=this.lines.length;g<C;g++)t=this.getLineWidth(g),t>s&&(s=t);return this.maxLinesWidth=s,s}getLineWidths(){for(var t=[],s=0,g=this.lines.length;s<g;s++)t.push(this.getLineWidth(s));return t}get linesCount(){return this.lines.length}get plainText(){for(var t="",s=this.pens,g=0,C=s.length;g<C;g++)t+=s[g].plainText;return t}get rawTextLength(){for(var t=0,s=this.pens,g=0,C=this.pens.length;g<C;g++)t+=s[g].rawTextLength;return t}getSliceTagText(t,s,g){if(t===void 0&&(t=0),s===void 0){var C=this.lastPen;if(C==null)return"";s=C.endIndex}g===void 0&&(g=!1);for(var M="",l,T,e,d,x,u,h,o=0,n=this.pens.length;o<n&&(l=this.pens[o],d=l.endIndex,!(!(d<=t)&&(l=this.pens[o],T=g?l.wrapText:l.plainText,u=l.prop,e=l.startIndex,x=e>=t&&d<=s,x||(T=T.substring(t-e,s-e)),this.tagToTextScope?M+=this.tagToText.call(this.tagToTextScope,T,u,h):M+=this.tagToText(T,u,h),h=u,d>=s)));o++);return M}get length(){return this.lines.length}set length(t){this.clear()}}var vs={};const fy=Phaser.Geom.Rectangle;var Nd=new Ci;class cy{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){for(var t=0,s=this.hitAreas.length;t<s;t++)Ii(this.hitAreas[t].data);return Nd.pushMultiple(this.hitAreas),this}add(t,s,g,C,M){var l=Nd.pop();return l===null?l=new fy(t,s,g,C):l.setTo(t,s,g,C),l.data=M,this.hitAreas.push(l),this}getFirst(t,s){for(var g=0,C=this.hitAreas.length;g<C;g++){var M=this.hitAreas[g];if(M.contains(t,s))return M}return null}getByKey(t){for(var s=0,g=this.hitAreas.length;s<g;s++){var C=this.hitAreas[s];if(C.data.key===t)return C}return null}drawBounds(t,s,g){s===void 0&&(s=16777215),g&&t.save().scaleCanvas(g.scaleX,g.scaleY).rotateCanvas(g.rotation).translateCanvas(g.x,g.y);for(var C=0,M=this.hitAreas.length;C<M;C++){var l=this.hitAreas[C];t.lineStyle(1,s).strokeRect(l.x,l.y,l.width,l.height)}return g&&t.restore(),this}}var vy=function(){this.parent.on("pointerdown",py,this).on("pointerup",gy,this).on("pointermove",Zo,this).on("pointerover",Zo,this).on("pointerout",function(i,t){Zo.call(this,i,null,null,t)},this)},py=function(i,t,s,g){var C=this.hitAreaManager.getFirst(t,s);if(C!==null){var M=C.data.key;Cn.call(this,"areadown",M,i,t,s,g),C.data.isDown=!0}},gy=function(i,t,s,g){var C=this.hitAreaManager.getFirst(t,s);if(C!==null){var M=C.data,l=M.key;if(Cn.call(this,"areaup",l,i,t,s,g),M.isDown){Cn.call(this,"areaclick",l,i,t,s,g);var T=M.url;T&&window.open(T,"_blank")}M.isDown=!1}},Zo=function(i,t,s,g){if(t===null){this.lastHitAreaKey!==null&&(Cn.call(this,"areaout",this.lastHitAreaKey,i,t,s,g),this.hitAreaManager.getByKey(this.lastHitAreaKey).isDown=!1,this.lastHitAreaKey=null);return}var C=this.hitAreaManager.getFirst(t,s),M=C?C.data.key:null;if(this.lastHitAreaKey!==M){if(this.lastHitAreaKey!==null){Cn.call(this,"areaout",this.lastHitAreaKey,i,t,s,g);var l=this.hitAreaManager.getByKey(this.lastHitAreaKey);this.urlTagCursorStyle&&l.data.url&&(this.scene.input.manager.canvas.style.cursor=""),l.isDown=!1}M!==null&&(Cn.call(this,"areaover",M,i,t,s,g),this.urlTagCursorStyle&&C.data.url&&(this.scene.input.manager.canvas.style.cursor=this.urlTagCursorStyle)),this.lastHitAreaKey=M}},Cn=function(i,t,s,g,C,M){this.parent.emit(`${i}-${t}`,s,g,C,M),this.parent.emit(i,t,s,g,C,M)};const my=re.NO_NEWLINE,xy=re.RAW_NEWLINE,jo=re.WRAPPED_NEWLINE,Vd=re.NO_WRAP,yy=re.WORD_WRAP,Ty=re.CHAR_WRAP,Cy=re.SPLITREGEXP;var Sp=function(i,t,s,g,C,M){g<=0&&(s=Vd);var l=[];if(!i||!i.length)return l;for(var T=s===Vd,e=s===yy,d=i.split(Cy),x,u,h,o=0,n=d.length;o<n;o++){if(x=d[o],h=o===n-1?my:xy,T){var r=t(x);l.push(M.getLine(x,r,h));continue}if(u=o===0?g-C:g,x.length<=100){var r=t(x);if(r<=u){l.push(M.getLine(x,r,h));continue}}var f,a;e?(f=x.split(" "),a=f[f.length-1]==="",a&&(f.length-=1)):f=x;for(var c,p,v,m="",y=0,P,E=e?t(" "):void 0,S=0,w=f.length;S<w;S++){if(c=f[S],p=t(c),v=S===w-1,e&&(!v||a)&&(c+=" ",p+=E),e&&p>g){m!==""?l.push(M.getLine(m,y,jo)):S===0&&C>0&&l.push(M.getLine("",0,jo)),l.push(...Sp(c,t,Ty,g,0,M));var R=l.pop();m=R.text,y=R.width,M.freeLine(R),m===" "&&(m="",y=0);continue}P=y+p,P>u?(l.push(M.getLine(m,y,jo)),m=c,y=p,u=g):(m+=c,y=P),v&&l.push(M.getLine(m,y,h))}}return l};const Jo=Phaser.Utils.Objects.GetValue,Sy=re.NO_WRAP,Py=re.NO_NEWLINE;class Pp{constructor(t){this.parent=t.parent,this.scene=this.parent.scene,this.context=Jo(t,"context",null),this.canvas=this.context.canvas,this.parser=Jo(t,"parser",null),this.defaultStyle=Jo(t,"style",null),this.autoRound=!0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.wrapTextLinesPool=t.wrapTextLinesPool,this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new cy,this.lastHitAreaKey=null,this.urlTagCursorStyle=null;var s=this.context;this.getTextWidth=function(g){return s.measureText(g).width}}destroy(){this.parent=void 0,this.scene=void 0,this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0),this.pensPool=void 0,this.linesPool=void 0,this.wrapTextLinesPool=void 0}updatePenManager(t,s,g,C,M){if(M===void 0&&(M=this.penManager),M.clear(),t==="")return M;var l=this.parent.style;if(l.isWrapFitMode){var T=this.parent.padding;g=l.fixedWidth-T.left-T.right}for(var e=this.canvas,d=this.context,x=function(b){return d.measureText(b).width},u=0,h=0,o=l.wrapCallback,n=l.wrapCallbackScope,r=!0,f,a,c,p=this.parser.splitText(t),v,m,y=this.wrapTextLinesPool,P=0,E=p.length;P<E;P++)if(v=this.parser.tagTextToProp(p[P],a),f=v.plainText,a=v.prop,a.img){var S=this.imageManager.getOuterWidth(a.img);g>0&&s!==Sy&&g<u+S&&(M.addNewLinePen(),h+=C,u=0),M.addImagePen(u,h,S,Ls(a)),u+=S}else if(f!==""){if(d.save(),c=this.parser.propToContextStyle(this.defaultStyle,a),c.buildFont(),c.syncFont(e,d),c.syncStyle(e,d),!o)m=Sp(f,x,s,g,u,y);else{m=o.call(n,f,x,g,u),typeof m=="string"&&(m=m.split(`
`));for(var A,w=0,R=m.length;w<R;w++)A=m[w],typeof A=="string"?m[w]=y.getLine(A,x(A),w<R-1?2:0):r=!1}for(var A,w=0,R=m.length;w<R;w++)A=m[w],M.addTextPen(A.text,u,h,A.width,Ls(a),A.newLineMode),A.newLineMode!==Py?(u=0,h+=C):u+=A.width;r&&y.freeLines(m),m=null,d.restore()}for(var P=0,E=this.lines.length;P<E;P++){var O=this.lines[P],F=O[O.length-1];F&&(F.width+=this.parser.getStrokeThinkness(this.defaultStyle,F.prop))}return M}get startXOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.xOffset}get startYOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.metrics.ascent}get lines(){return this.penManager.lines}get desplayLinesCount(){var t=this.penManager.linesCount,s=this.defaultStyle.maxLines;return s>0&&t>s&&(t=s),t}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var t=this.desplayLinesCount,s=this.defaultStyle.lineHeight*t;return t>0&&(s-=this.defaultStyle.lineSpacing),s}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new Wl({pensPool:this.pensPool,linesPool:this.linesPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(t,s,g){var C;if(t==null)C=this.penManager.plainText;else{var M=this.parser.splitText(t,1);C="";for(var l=0,T=M.length;l<T;l++)C+=M[l]}return(s!=null||g!=null)&&(s==null&&(s=0),g==null&&(g=C.length),C=C.substring(s,g)),C}getPenManager(t,s){if(t===void 0)return this.copyPenManager(s,this.penManager);s===void 0&&(s=this.newPenManager());var g=this.defaultStyle;return this.updatePenManager(t,g.wrapMode,g.wrapWidth,g.lineHeight,s),s}getText(t,s,g,C){if(t==null)return this.penManager.getSliceTagText(s,g,C);var M=this.tmpPenManager,l=this.defaultStyle;return this.updatePenManager(t,l.wrapMode,l.wrapWidth,l.lineHeight,M),M.getSliceTagText(s,g,C)}copyPenManager(t,s){return s===void 0&&(s=this.penManager),s.copy(t)}getTextWidth(t){return t===void 0&&(t=this.penManager),t.getMaxLineWidth()}getLastPen(t){return t===void 0&&(t=this.penManager),t.lastPen}}var Ey={setInteractive:vy};Object.assign(Pp.prototype,hy,Ey);class kd extends Ci{freeLine(t){if(t)return this.push(t),this}freeLines(t){if(t)return this.pushMultiple(t),this}getLine(t,s,g){var C=this.pop();return C===null&&(C={}),C.text=t,C.width=s,C.newLineMode=g,C}}const My=Phaser.Utils.Objects.IsPlainObject,Vn=Phaser.Utils.Objects.GetValue;var Qo=function(i,t){My(i)?(t=i,i=t.key):t===void 0&&(t={key:i}),t.hasOwnProperty("key")||(t.key=i);var s=t.key,g=t.frame,C=t.width,M=t.height;if(C===void 0||M===void 0){var l=this.textureManager.getFrame(s,g),T=l?l.cutWidth:0,e=l?l.cutHeight:0;C===void 0&&M===void 0?(C=T,M=e):C===void 0?C=T*(M/e):M===void 0&&(M=e*(C/T))}this.images[i]={key:s,frame:g,width:C,height:M,y:Vn(t,"y",0),left:Vn(t,"left",0),right:Vn(t,"right",0),originX:Vn(t,"originX",0),originY:Vn(t,"originY",0)}},wy=function(i,t,s,g,C){var M=this.get(i),l=this.textureManager.getFrame(M.key,M.frame),T=M.width,e=M.height;s+=M.left-M.originX*T,g+=M.y-M.originY*e,C&&(s=Math.round(s),g=Math.round(g)),t.drawImage(l.source.image,l.cutX,l.cutY,l.cutWidth,l.cutHeight,s,g,T,e)};class Hl{constructor(t){this.textureManager=t.sys.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(t,s){if(typeof t=="string")Qo.call(this,t,s);else if(Array.isArray(t))for(var g=t,C=0,M=g.length;C<M;C++)Qo.call(this,g[C]);else{var g=t;for(var t in g)Qo.call(this,t,g[t])}return this}has(t){return this.images.hasOwnProperty(t)}remove(t){return this.has(t)&&delete this.images[t],this}get(t){return this.has(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}getOuterWidth(t){var s=this.get(t);return s?s.width+s.left+s.right:0}getFrame(t){var s=this.get(t);return s?this.textureManager.getFrame(s.key,s.frame):void 0}hasTexture(t){return!!this.getFrame(t)}}var Ry={draw:wy};Object.assign(Hl.prototype,Ry);var Ep=function(i,t){!i&&i!==0&&(i=""),t===void 0&&(t=!0),Array.isArray(i)&&(i=i.join(`
`));var s;return t?s=`${this.text}
${i}`:s=`${this.text}${i}`,s!=this.text&&this.setText(s),this};const Ay=Phaser.Utils.Objects.IsPlainObject,zd=Phaser.DOM.AddToDOM,Ud=Phaser.Display.Canvas.CanvasPool,Oy=Phaser.GameObjects.GameObject,Se=Phaser.Utils.Objects.GetValue,by=Phaser.DOM.RemoveFromDOM,Fy=re.SPLITREGEXP;var $s=null,qo=null,_o=null;class $l extends Cp{constructor(t,s,g,C,M,l,T){if(Ay(s)){var e=s;s=Se(e,"x",0),g=Se(e,"y",0),C=Se(e,"text",""),M=Se(e,"style")}if(s===void 0&&(s=0),g===void 0&&(g=0),super(t,l),this.renderer=t.sys.game.renderer,this.setPosition(s,g),this.setOrigin(0,0),this.initPipeline(),this.canvas=Ud.create(this),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this._imageManager=void 0,M){if(M.hasOwnProperty("align")){var d=M.align;delete M.align,M.halign=d}M.hasOwnProperty("stroke")&&!M.hasOwnProperty("strokeThickness")&&(M.strokeThickness=1)}this.style=new Xl(this,M);var x=Se(M,"images",void 0);x&&this.addImage(x),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null);var u=Se(M,"sharedPool",!0),h,o,n;u?($s||($s={},qo=new Ci,_o=new kd,this.scene.game.events.once("destroy",function(){$s=null,qo=null,_o=null})),$s.hasOwnProperty(l)||($s[l]=new Ci),h=$s[l],o=qo,n=_o):(h=new Ci,o=new Ci,n=new kd),this.canvasText=new Pp({parent:this,context:this.context,parser:T,style:this.style,pensPool:h,linesPool:o,wrapTextLinesPool:n}),this.parser=T,this.initRTL(),M&&M.padding&&this.setPadding(M.padding),this.setText(C),this.setUrlTagCursorStyle(Se(M,"urlTagCursorStyle","pointer")),Se(M,"interactive",!1)&&this.setInteractive()}preDestroy(){by(this.canvas),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),Ud.remove(this.canvas),this.texture.destroy()}set text(t){this.setText(t)}get text(){return this._text}initRTL(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",zd(this.canvas,this.scene.sys.canvas),this.originX=1)}setRTL(t){t===void 0&&(t=!0);var s=this.style;if(s.rtl===t)return this;if(s.rtl=t,t?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",zd(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),s.halign==="left"?s.halign="right":s.halign==="right"&&(s.halign="left"),this._imageManager){var g=this._imageManager.images;for(var C in g)g[C].originX=1-g[C].originX}return this}setText(t){return t==null?t="":Array.isArray(t)?t=t.join(`
`):t=t.toString(),t===this._text?this:(this._text=t,this.updateText(),this)}setPadding(t,s,g,C){if(typeof t=="object"){var M=t,l=Se(M,"x",null);l!==null?(t=l,g=l):(t=Se(M,"left",0),g=Se(M,"right",t));var T=Se(M,"y",null);T!==null?(s=T,C=T):(s=Se(M,"top",0),C=Se(M,"bottom",s))}else t===void 0&&(t=0),s===void 0&&(s=t),g===void 0&&(g=t),C===void 0&&(C=s);return this.padding.left=t,this.padding.top=s,this.padding.right=g,this.padding.bottom=C,this.updateText(!1)}updateText(t){t===void 0&&(t=!0);var s=this.canvasText,g=this.style;t&&s.updatePenManager(this._text,g.wrapMode,g.wrapWidth,g.lineHeight);var C=this.padding,M,l,T=Math.ceil(s.linesWidth);g.fixedWidth===0?(this.width=T+C.left+C.right,M=T):(this.width=g.fixedWidth,M=this.width-C.left-C.right,M<T&&(M=T)),g.fixedHeight===0?(this.height=s.linesHeight+C.top+C.bottom,l=s.linesHeight):(this.height=g.fixedHeight,l=this.height-C.top-C.bottom,l<s.linesHeight&&(l=s.linesHeight));var e=this.width,d=this.height;this.updateDisplayOrigin();var x=g.resolution;e*=x,d*=x,e=Math.max(Math.ceil(e),1),d=Math.max(Math.ceil(d),1);var u=this.canvas,h=this.context;u.width!==e||u.height!==d?(u.width=e,u.height=d,this.frame.setSize(e,d)):h.clearRect(0,0,e,d),h.save(),h.scale(x,x);var o=this.style.rtl?C.right:C.left,n=C.top;s.draw(o,n,M,l),h.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(u,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var r=this.input;return r&&!r.customHitArea&&(r.hitArea.width=this.width,r.hitArea.height=this.height),this}toJSON(){var t=Components.ToJSON(this),s={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=s,t}setInteractive(t,s,g){var C=!!this.input;return Oy.prototype.setInteractive.call(this,t,s,g),C||this.canvasText.setInteractive(),this}setUrlTagCursorStyle(t){return this.urlTagCursorStyle=t,this}get urlTagCursorStyle(){return this.canvasText.urlTagCursorStyle}set urlTagCursorStyle(t){this.canvasText.urlTagCursorStyle=t}getWrappedText(t,s,g){return t=this.canvasText.getText(t,s,g,!0),t.split(Fy)}getPlainText(t,s,g){return this.canvasText.getPlainText(t,s,g)}getText(t,s,g,C){return C===void 0&&(C=!1),this.canvasText.getText(t,s,g,C)}getSubString(t,s,g){return this.getText(t,s,g)}copyPenManager(t){return this.canvasText.copyPenManager(t)}getPenManager(t,s){return this.canvasText.getPenManager(t,s)}setSize(t,s){return this.setFixedSize(t,s)}resize(t,s){return this.setFixedSize(t,s)}get imageManager(){return this._imageManager||(this._imageManager=new Hl(this.scene)),this._imageManager}addImage(t,s){return this.imageManager.add(t,s),this}drawAreaBounds(t,s){return this.canvasText.hitAreaManager.drawBounds(t,s,this),this}generateTexture(t,s,g,C,M){var l=this.canvas;return C===void 0?C=l.width:C*=this.resolution,M===void 0?M=l.height:M*=this.resolution,xp(this.scene,l,t,s,g,C,M),this}}var Ly={appendText:Ep};Object.assign($l.prototype,Ly);var Dy=function(i,t){for(var s=this.tagRegex,g=[],C=0,M=!1,l=!1;;){var T=s.RE_SPLITTEXT.exec(i);if(!T)break;var e=T[0];if(l)if(s.RE_ESC_CLOSE.test(e))l=!1;else continue;else if(M)if(s.RE_RAW_CLOSE.test(e))M=!1;else continue;else s.RE_ESC_OPEN.test(e)?l=!0:s.RE_RAW_OPEN.test(e)&&(M=!0);var d=s.RE_SPLITTEXT.lastIndex,x=d-e.length;if(C<x){var u=i.substring(C,x);g.push(u)}t===void 0&&g.push(e),C=d}var h=i.length;return C<h&&g.push(i.substring(C,h)),g};const te=!1,qt=!0;var Iy={plainText:null,prevProp:null},By=function(i,t){var s=this.tagRegex;t==null&&(t={});var g="";if(t.img&&Mt(t,te,"img"),t.esc)s.RE_ESC_CLOSE.test(i)?Mt(t,te,"esc"):g=i;else if(t.raw)s.RE_RAW_CLOSE.test(i)?Mt(t,te,"raw"):g=i;else if(s.RE_ESC_OPEN.test(i))Mt(t,qt,"esc",!0);else if(s.RE_ESC_CLOSE.test(i))Mt(t,te,"esc");else if(s.RE_RAW_OPEN.test(i))Mt(t,qt,"raw",!0);else if(s.RE_RAW_CLOSE.test(i))Mt(t,te,"raw");else if(s.RE_BLOD_OPEN.test(i))Mt(t,qt,"b",!0);else if(s.RE_BLOD_CLOSE.test(i))Mt(t,te,"b");else if(s.RE_ITALICS_OPEN.test(i))Mt(t,qt,"i",!0);else if(s.RE_ITALICS_CLOSE.test(i))Mt(t,te,"i");else if(s.RE_WEIGHT_OPEN.test(i)){var C=i.match(s.RE_WEIGHT_OPEN);Mt(t,qt,"weight",C[1])}else if(s.RE_WEIGHT_CLOSE.test(i))Mt(t,te,"weight");else if(s.RE_SIZE_OPEN.test(i)){var C=i.match(s.RE_SIZE_OPEN);Mt(t,qt,"size",`${C[1]}px`)}else if(s.RE_SIZE_CLOSE.test(i))Mt(t,te,"size");else if(s.RE_COLOR_OPEN.test(i)){var C=i.match(s.RE_COLOR_OPEN);Mt(t,qt,"color",C[1])}else if(s.RE_COLOR_CLOSE.test(i))Mt(t,te,"color");else if(s.RE_UNDERLINE_OPEN.test(i))Mt(t,qt,"u",!0);else if(s.RE_UNDERLINE_OPENC.test(i)){var C=i.match(s.RE_UNDERLINE_OPENC);Mt(t,qt,"u",C[1])}else if(s.RE_UNDERLINE_CLOSE.test(i))Mt(t,te,"u");else if(s.RE_STRIKETHROUGH_OPEN.test(i))Mt(t,qt,"s",!0);else if(s.RE_STRIKETHROUGH_OPENC.test(i)){var C=i.match(s.RE_STRIKETHROUGH_OPENC);Mt(t,qt,"s",C[1])}else if(s.RE_STRIKETHROUGH_CLOSE.test(i))Mt(t,te,"s");else if(s.RE_SHADOW_OPEN.test(i))Mt(t,qt,"shadow",!0);else if(s.RE_SHADOW_CLOSE.test(i))Mt(t,te,"shadow");else if(s.RE_STROKE_OPEN.test(i))Mt(t,qt,"stroke",!0);else if(s.RE_STROKE_OPENC.test(i)){var C=i.match(s.RE_STROKE_OPENC);Mt(t,qt,"stroke",C[1])}else if(s.RE_STROKE_CLOSE.test(i))Mt(t,te,"stroke");else if(s.RE_OFFSETY_OPEN.test(i)){var C=i.match(s.RE_OFFSETY_OPEN);Mt(t,qt,"y",parseFloat(C[1]))}else if(s.RE_OFFSETY_CLOSE.test(i))Mt(t,te,"y");else if(s.RE_IMAGE_OPEN.test(i)){var C=i.match(s.RE_IMAGE_OPEN);Mt(t,qt,"img",C[1])}else if(s.RE_IMAGE_CLOSE.test(i))Mt(t,te,"img");else if(s.RE_AREA_OPEN.test(i)){var C=i.match(s.RE_AREA_OPEN);Mt(t,qt,"area",C[1])}else if(s.RE_AREA_CLOSE.test(i))Mt(t,te,"area");else if(s.RE_URL_OPEN.test(i)){var C=i.match(s.RE_URL_OPEN);Mt(t,qt,"url",C[1])}else if(s.RE_URL_CLOSE.test(i))Mt(t,te,"url");else if(s.RE_ALIGN_OPEN.test(i)){var C=i.match(s.RE_ALIGN_OPEN);Mt(t,qt,"align",C[1])}else s.RE_ALIGN_CLOSE.test(i)?Mt(t,te,"align"):g=i;var M=Iy;return M.plainText=g,M.prop=t,M},Mt=function(i,t,s,g){return t===qt?i[s]=g:i.hasOwnProperty(s)&&delete i[s],i},Gy=function(i,t){var s=Vy;if(t.hasOwnProperty("img"))s.image=t.img;else{if(s.image=null,t.hasOwnProperty("family")?s.fontFamily=t.family:s.fontFamily=i.fontFamily,t.hasOwnProperty("size")){var g=t.size;typeof g=="number"&&(g=`${g}px`),s.fontSize=g}else s.fontSize=i.fontSize;s.fontStyle=Ny(t),t.hasOwnProperty("color")?s.color=t.color:s.color=i.color,t.hasOwnProperty("stroke")?t.stroke===!0?(s.stroke=i.stroke,s.strokeThickness=i.strokeThickness):(s.stroke=t.stroke,s.strokeThickness=i.strokeThickness):(s.stroke=i.stroke,s.strokeThickness=0)}return t.hasOwnProperty("shadow")?t.shadow===!0?(s.shadowColor=i.shadowColor,s.shadowOffsetX=i.shadowOffsetX,s.shadowOffsetY=i.shadowOffsetY,s.shadowBlur=i.shadowBlur,s.shadowStroke=!0,s.shadowFill=!0):(s.shadowColor=t.shadow,s.shadowOffsetX=i.shadowOffsetX,s.shadowOffsetY=i.shadowOffsetY,s.shadowBlur=i.shadowBlur,s.shadowStroke=!0,s.shadowFill=!0):(s.shadowColor="#000",s.shadowOffsetX=0,s.shadowOffsetY=0,s.shadowBlur=0,s.shadowStroke=!1,s.shadowFill=!1),t.hasOwnProperty("u")?t.u===!0?(s.underlineColor=i.underlineColor,s.underlineThickness=i.underlineThickness,s.underlineOffset=i.underlineOffset):(s.underlineColor=t.u,s.underlineThickness=i.underlineThickness,s.underlineOffset=i.underlineOffset):(s.underlineColor="#000",s.underlineThickness=0,s.underlineOffset=0),t.hasOwnProperty("s")?t.s===!0?(s.strikethroughColor=i.strikethroughColor,s.strikethroughThickness=i.strikethroughThickness,s.strikethroughOffset=i.strikethroughOffset):(s.strikethroughColor=t.s,s.strikethroughThickness=i.strikethroughThickness,s.strikethroughOffset=i.strikethroughOffset):(s.strikethroughColor="#000",s.strikethroughThickness=0,s.strikethroughOffset=0),s},Ny=function(i){var t=i.b,s=i.weight,g=i.i;return t||s||g?g?t?"bold italic":s?`${s} italic`:"italic":t?"bold":s.toString():""},Vy=new Xl,ky=function(i,t,s){s==null&&(s=zy);var g=this.delimiters[0],C=this.delimiters[1],M=[];for(var l in s)t.hasOwnProperty(l)||M.push(`${g}/${l}${C}`);for(var l in t){var T=t[l];if(s[l]!==T)switch(l){case"size":M.push(`${g}size=${T.replace("px","")}${C}`);break;case"color":case"weight":case"stroke":case"y":case"img":case"area":case"url":case"align":M.push(`${g}${l}=${T}${C}`);break;case"u":case"s":T===!0?M.push(`${g}${l}${C}`):M.push(`${g}${l}=${T}${C}`);break;default:M.push(`${g}${l}${C}`);break}}return M.push(i),M.join("")},zy={},En=function(i){return i.replace(Uy,"\\$&").replace(Yy,"\\x2d")},Uy=/[|\\{}()[\]^$+*?.]/g,Yy=/-/g,Yd,Xd,At={},ee=function(i,t,s,g){return g===void 0?`${i}${s}${t}`:`${i}${s}=(${g})${t}`},ce=function(i,t,s){return`${i}/${s}${t}`},th="[-.0-9]+",Ur="[a-z]+|#[0-9abcdef]+",Yr="[^\\]]+",Mp=function(i,t){if(t===void 0){var s=i;i=s[0],t=s[1]}if(Yd===i&&Xd===t)return!1;Yd=i,Xd=t,i=En(i),t=En(t);var g="esc",C=ee(i,t,g),M=ce(i,t,g),l="raw",T=ee(i,t,l),e=ce(i,t,l),d="b",x=ee(i,t,d),u=ce(i,t,d),h="i",o=ee(i,t,h),n=ce(i,t,h),r="weight",f=ee(i,t,r,th),a=ce(i,t,r),c="size",p=ee(i,t,c,th),v=ce(i,t,c),m="color",y=ee(i,t,m,Ur),P=ce(i,t,m),E="u",S=ee(i,t,E),w=ee(i,t,E,Ur),R=ce(i,t,E),A="s",O=ee(i,t,A),F=ee(i,t,A,Ur),b=ce(i,t,A),D="shadow",I=ee(i,t,D),B=ce(i,t,D),k="stroke",U=ee(i,t,k),X=ee(i,t,k,Ur),H=ce(i,t,k),N="y",z=ee(i,t,N,th),L=ce(i,t,N),G="img",V=ee(i,t,G,Yr),Y=ce(i,t,G),W="area",$=ee(i,t,W,Yr),K=ce(i,t,W),j="url",J=ee(i,t,j,Yr),q=ce(i,t,j),_="align",et=ee(i,t,_,Yr),tt=ce(i,t,_);return At.RE_ESC_OPEN=new RegExp(C,"i"),At.RE_ESC_CLOSE=new RegExp(M,"i"),At.RE_RAW_OPEN=new RegExp(T,"i"),At.RE_RAW_CLOSE=new RegExp(e,"i"),At.RE_BLOD_OPEN=new RegExp(x,"i"),At.RE_BLOD_CLOSE=new RegExp(u,"i"),At.RE_ITALICS_OPEN=new RegExp(o,"i"),At.RE_ITALICS_CLOSE=new RegExp(n,"i"),At.RE_WEIGHT_OPEN=new RegExp(f,"i"),At.RE_WEIGHT_CLOSE=new RegExp(a,"i"),At.RE_SIZE_OPEN=new RegExp(p,"i"),At.RE_SIZE_CLOSE=new RegExp(v,"i"),At.RE_COLOR_OPEN=new RegExp(y,"i"),At.RE_COLOR_CLOSE=new RegExp(P,"i"),At.RE_UNDERLINE_OPEN=new RegExp(S,"i"),At.RE_UNDERLINE_OPENC=new RegExp(w,"i"),At.RE_UNDERLINE_CLOSE=new RegExp(R,"i"),At.RE_STRIKETHROUGH_OPEN=new RegExp(O,"i"),At.RE_STRIKETHROUGH_OPENC=new RegExp(F,"i"),At.RE_STRIKETHROUGH_CLOSE=new RegExp(b,"i"),At.RE_SHADOW_OPEN=new RegExp(I,"i"),At.RE_SHADOW_CLOSE=new RegExp(B,"i"),At.RE_STROKE_OPEN=new RegExp(U,"i"),At.RE_STROKE_OPENC=new RegExp(X,"i"),At.RE_STROKE_CLOSE=new RegExp(H,"i"),At.RE_OFFSETY_OPEN=new RegExp(z,"i"),At.RE_OFFSETY_CLOSE=new RegExp(L,"i"),At.RE_IMAGE_OPEN=new RegExp(V,"i"),At.RE_IMAGE_CLOSE=new RegExp(Y,"i"),At.RE_AREA_OPEN=new RegExp($,"i"),At.RE_AREA_CLOSE=new RegExp(K,"i"),At.RE_URL_OPEN=new RegExp(J,"i"),At.RE_URL_CLOSE=new RegExp(q,"i"),At.RE_ALIGN_OPEN=new RegExp(et,"i"),At.RE_ALIGN_CLOSE=new RegExp(tt,"i"),At.RE_SPLITTEXT=new RegExp([T,e,C,M,x,u,o,n,f,a,p,v,y,P,S,w,R,O,F,b,I,B,U,X,H,z,L,V,Y,$,K,J,q,et,tt].join("|"),"ig"),!0},Wd=function(i,t){return i!==void 0&&Mp(i,t),Object.assign({},At)};const Xy=Phaser.Utils.Objects.GetValue;let wp=class{constructor(t){var s=Xy(t,"delimiters","[]");this.tagRegex=Wd(s),this.delimiters=s}getStrokeThinkness(t,s){var g;return s.hasOwnProperty("stroke")?g=t.strokeThickness:g=0,g}setDelimiters(t,s){return Mp(t,s)&&(this.tagRegex=Wd()),this}};var Wy={splitText:Dy,tagTextToProp:By,propToContextStyle:Gy,propToTagText:ky};Object.assign(wp.prototype,Wy);class Kl extends $l{constructor(t,s,g,C,M){var l=new wp(M);super(t,s,g,C,M,"rexBBCodeText",l)}setDelimiters(t,s){return this.parse.setDelimiters(t,s),this}}ht.register("BBCodeText",function(i,t,s,g){var C=new Kl(this.scene,i,t,s,g);return this.scene.add.existing(C),C});ot(window,"RexPlugins.UI.BBCodeText",Kl);var Hy={plainText:null,prevProp:null},$y=new Xl;let Ky=class{constructor(t){t===void 0&&(t={}),this.tags=t}addTag(t,s){this.tags[t]=s}getTag(t){return this.tags[t]}splitText(t,s){for(var g=[],C=0;;){var M=eh.exec(t);if(!M)break;var l=M[0],T=eh.lastIndex-l.length;if(C<T&&g.push(t.substring(C,T)),s===void 0)g.push(l);else if(s===1){if($d.test(l)){var e=l.match(Kd);g.push(e[2])}else if(Zd.test(l)){var e=l.match(jd);g.push(e[2])}}C=eh.lastIndex}var d=t.length;return C<d&&g.push(t.substring(C,d)),g}tagTextToProp(t,s){var g,C;if($d.test(t)){var M=t.match(Kd);if(M!=null){var l=M[1],T=this.tags;T.hasOwnProperty(l)?C=T[l]:C={},C._class=l,g=M[2]}}else if(Zd.test(t)){var M=t.match(jd);if(M!=null){var e=M[1];C=Zy(e),C._style=e,g=M[2]}}g==null&&(g=t),C==null&&(C={});var d=Hy;return d.plainText=g,d.prop=C,d}propToContextStyle(t,s){var g=$y;if(s.hasOwnProperty("img"))g.image=s.img;else{if(g.image=null,s.hasOwnProperty("family")||s.hasOwnProperty("fontFamily")||s.hasOwnProperty("font-family")){var C=s.hasOwnProperty("family")?s.family:s.hasOwnProperty("fontFamily")?s.fontFamily:s["font-family"];g.fontFamily=C}else g.fontFamily=t.fontFamily;if(s.hasOwnProperty("size")||s.hasOwnProperty("fontSize")||s.hasOwnProperty("font-size")){var M=s.hasOwnProperty("size")?s.size:s.hasOwnProperty("fontSize")?s.fontSize:s["font-size"];typeof M=="number"&&(M=`${M}px`),g.fontSize=M}else g.fontSize=t.fontSize;if(s.hasOwnProperty("style")||s.hasOwnProperty("fontStyle")||s.hasOwnProperty("font-style")){var l=s.hasOwnProperty("style")?s.style:s.hasOwnProperty("fontStyle")?s.fontStyle:s["font-style"];g.fontStyle=l}else g.fontStyle=t.fontStyle;if(s.hasOwnProperty("color")||s.hasOwnProperty("font-color")){var T=s.hasOwnProperty("color")?s.color:s["font-color"];g.color=T}else g.color=t.color;if(s.hasOwnProperty("stroke")){var e=s.stroke;g.stroke=e.hasOwnProperty("color")?e.color:t.stroke,g.strokeThickness=e.hasOwnProperty("thickness")?e.thickness:t.strokeThickness}else g.stroke=t.stroke,g.strokeThickness=t.strokeThickness}if(s.hasOwnProperty("shadow")){var d=s.shadow;g.shadowColor=d.hasOwnProperty("color")?d.color:t.shadowColor,g.shadowOffsetX=d.hasOwnProperty("offsetX")?d.offsetX:t.shadowOffsetX,g.shadowOffsetY=d.hasOwnProperty("offsetY")?d.offsetY:t.shadowOffsetY,g.shadowBlur=d.hasOwnProperty("blur")?d.blur:t.shadowBlur,g.shadowStroke=!0,g.shadowFill=!0}else g.shadowColor=t.shadowColor,g.shadowOffsetX=t.shadowOffsetX,g.shadowOffsetY=t.shadowOffsetY,g.shadowBlur=t.shadowBlur,g.shadowStroke=t.shadowStroke,g.shadowFill=t.shadowFill;if(s.hasOwnProperty("u")||s.hasOwnProperty("underline")){var x=s.hasOwnProperty("u")?s.u:s.underline;g.underlineColor=x.hasOwnProperty("color")?x.color:t.underlineColor,g.underlineThickness=x.hasOwnProperty("thickness")?x.thickness:t.underlineThickness,g.underlineOffset=x.hasOwnProperty("offset")?x.offset:t.underlineOffset}else g.underlineColor=t.underlineColor,g.underlineThickness=t.underlineThickness,g.underlineOffset=t.underlineOffset;if(s.hasOwnProperty("s")||s.hasOwnProperty("strikethrough")){var u=s.hasOwnProperty("s")?s.s:s.strikethrough;g.strikethroughColor=u.hasOwnProperty("color")?u.color:t.strikethroughColor,g.strikethroughThickness=u.hasOwnProperty("thickness")?u.thickness:t.strikethroughThickness,g.strikethroughOffset=u.hasOwnProperty("offset")?u.offset:t.strikethroughOffset}else g.strikethroughColor=t.strikethroughColor,g.strikethroughThickness=t.strikethroughThickness,g.strikethroughOffset=t.strikethroughOffset;return g}getStrokeThinkness(t,s){var g;if(s.hasOwnProperty("stroke")){var C=s.stroke;g=C.hasOwnProperty("thickness")?C.thickness:t.strokeThickness}else g=t.strokeThickness;return g}propToTagText(t,s,g){return s.hasOwnProperty("_class")?t===""&&this.isTextTag(s._class)?"":`<class='${s._class}'>${t}</class>`:s.hasOwnProperty("_style")?`<style='${s._style}'>${t}</style>`:t}destroy(){this.tags=void 0}isTextTag(t){var s=this.tags[t];return s?s.img==null:!1}};var Zy=function(i){i=i.split(";");for(var t={},s,g,C,M=0,l=i.length;M<l;M++)if(s=i[M].split(":"),g=s[0],C=s[1],!(Hd(g)||Hd(C))){switch(g){case"stroke":var T=C.split(" "),e=T.length;C={},e>=1&&(C.color=T[0]),e>=2&&(C.thickness=parseInt(T[1].replace("px","")));break;case"shadow":var T=C.split(" "),e=T.length;C={},e>=1&&(C.color=T[0]),e>=2&&(C.offsetX=parseInt(T[1].replace("px",""))),e>=3&&(C.offsetY=parseInt(T[2].replace("px",""))),e>=4&&(C.blur=parseInt(T[3].replace("px","")));break;case"u":case"underline":case"s":case"strikethrough":var T=C.split(" "),e=T.length;C={},e>=1&&(C.color=T[0]),e>=2&&(C.thickness=parseInt(T[1].replace("px",""))),e>=3&&(C.offset=parseInt(T[2].replace("px",""))),g==="underline"?g="u":g==="strikethrough"&&(g="s");break;case"y":C=parseFloat(C);break}t[g]=C}return t},Hd=function(i){return i=i.replace(jy,""),i.length===0},eh=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,$d=/<\s*class=/i,Kd=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,Zd=/<\s*style=/i,jd=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,jy=/^\s+|\s+$/;const Jy=Phaser.Utils.Objects.GetValue;class Rp extends $l{constructor(t,s,g,C,M){var l=Jy(M,"tags",void 0),T=new Ky(l);super(t,s,g,C,M,"rexTagText",T)}addTag(t,s){return this.parser.addTag(t,s),this.updateText(!0)}addTags(t){for(var s in t)this.parser.addTag(s,t[s]);return this.updateText(!0)}getTag(t){return this.parser.getTag(t)}preDestroy(){super.preDestroy(),this.parser.destroy(),this.parser=void 0}}ht.register("tagText",function(i,t,s,g){var C=new Rp(this.scene,i,t,s,g);return this.scene.add.existing(C),C});ot(window,"RexPlugins.UI.TagText",Rp);const Xr=Phaser.Utils.Objects.GetValue;var Oa=function(i,t){return t===void 0?i:i[t]},ts=function(i,t,s){i===void 0&&(i={}),t===void 0&&(t=0);var g=typeof t;return g==="string"?i[t]=s:g==="number"?(i.left=t,i.right=t,i.top=t,i.bottom=t):(i.left=Xr(t,"left",0),i.right=Xr(t,"right",0),i.top=Xr(t,"top",0),i.bottom=Xr(t,"bottom",0)),i};let Zl=class{constructor(t,s){this.setParent(t),this.type=s,this.renderable=!1,this.reset().setActive()}destroy(){this.parent.removeChild(this)}setParent(t){return this.parent=t,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(t){return t&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(t){this.setDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}onFree(){this.reset().setParent()}reset(){return this}render(){}contains(t,s){return!1}};Object.assign(Zl.prototype,Za);const Qy={renderContent(){},render(){if(!this.willRender)return this;var i=this.context;if(i.save(),i.globalAlpha=this.alpha,this.toLocalPosition){var t=this.drawX,s=this.drawY;this.autoRound&&(t=Math.round(t),s=Math.round(s)),i.translate(t,s),i.scale(this.scaleX,this.scaleY),i.rotate(this.rotation)}return this.drawBelowCallback&&this.drawBelowCallback(this),this.renderContent(),this.drawAboveCallback&&this.drawAboveCallback(this),i.restore(),this}},qy=Phaser.Math.RotateAround;var _y=function(i,t,s,g){return g===void 0?g={}:g===!0&&(ih===void 0&&(ih={}),g=ih),g.x=(i-s.drawX)/s.scaleX,g.y=(t-s.drawY)/s.scaleY,s.rotation!==0&&qy(g,0,0,-s.rotation),g},ih;const t1=Phaser.Geom.Rectangle;var e1=function(i,t){if(this.width===0||this.height===0)return!1;var s=_y(i,t,this,!0);return i1(this).contains(s.x,s.y)},i1=function(i){Wr===void 0&&(Wr=new t1);var t=i.drawTLX,s=i.drawTLY;return Wr.setTo(t,s,i.drawTRX-t,i.drawBLY-s),Wr},Wr;const s1=Phaser.Math.RotateAround;var Ap=function(i,t,s,g){return g===void 0?g={}:g===!0&&(sh===void 0&&(sh={}),g=sh),g.x=t,g.y=s,i.rotation!==0&&s1(g,0,0,i.rotation),g.x=g.x*i.scaleX+i.drawX,g.y=g.y*i.scaleY+i.drawY,g},sh;const Jd=Phaser.GameObjects.Components.TransformMatrix;var n1=function(i,t,s,g){g===void 0?g={}:g===!0&&(g=r1);var C=t-i.width*i.originX,M=s-i.height*i.originY;return kn===void 0&&(kn=new Jd,Qd=new Jd),i.parentContainer?i.getWorldTransformMatrix(kn,Qd):kn.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),kn.transformPoint(C,M,g),g},kn,Qd,r1={},a1=function(i,t,s,g,C){var M=Ap(t,s,g,!0),l=n1(i,M.x,M.y,C);return l},Op=function(i,t,s,g,C){typeof s!="number"&&(C=s,s=0,g=0);var M=t.drawCenterX+s,l=t.drawCenterY+g;return a1(i,t,M,l,C)},o1=function(i,t,s){return Op(this.parent,this,i,t,s)},bp={contains:e1,getWorldPosition:o1};Object.assign(bp,Qy);const h1=Phaser.Math.DegToRad,l1=Phaser.Math.RadToDeg,Hr=Phaser.Utils.Objects.GetValue;class Bs extends Zl{constructor(t,s){super(t,s),this.renderable=!0,this.toLocalPosition=!0,this.originX=0,this.offsetX=0,this.offsetY=0}get visible(){return this._visible}set visible(t){this.setDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDirty(this._alpha!=t),this._alpha=t}setAlpha(t){return this.alpha=t,this}get x(){return this._x}set x(t){this.setDirty(this._x!=t),this._x=t}setX(t){return this.x=t,this}get y(){return this._y}set y(t){this.setDirty(this._y!=t),this._y=t}setY(t){return this.y=t,this}setPosition(t,s){return this.x=t,this.y=s,this}setInitialPosition(t,s){return this.x0=t,this.y0=s,this}get rotation(){return this._rotation}set rotation(t){this.setDirty(this._rotation!=t),this._rotation=t}setRotation(t){return this.rotation=t,this}get angle(){return l1(this._rotation)}set angle(t){this.rotation=h1(t)}setAngle(t){return this.angle=t,this}get scaleX(){return this._scaleX}set scaleX(t){this.setDirty(this._scaleX!==t),this._scaleX=t}setScaleX(t){return this.scaleX=t,this}get width(){return 0}set width(t){}setWidth(t,s){return s===void 0&&(s=!1),this.width=t,s&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(t){this.setDirty(this._leftSpace!==t),this._leftSpace=t}setLeftSpace(t){return this.leftSpace=t,this}get rightSpace(){return this._rightSpace}set rightSpace(t){this.setDirty(this._rightSpace!==t),this._rightSpace=t}setRightSpace(t){return this.rightSpace=t,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(t){this.setDirty(this._scaleY!==t),this._scaleY=t}setScaleY(t){return this.scaleY=t,this}get height(){return 0}set height(t){}setHeight(t,s){return s===void 0&&(s=!1),this.height=t,s&&(this.scaleX=this.scaleY),this}setScale(t,s){return s===void 0&&(s=t),this.scaleX=t,this.scaleY=s,this}setOrigin(t){return this.originX=t,this}setAlign(t){return this.align=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var s=Hr(t,"width",void 0),g=Hr(t,"height",void 0),C=Hr(t,"scaleX",void 0),M=Hr(t,"scaleY",void 0);return s!==void 0?g===void 0&&M===void 0?this.setWidth(s,!0):this.setWidth(s):C!==void 0&&this.setScaleX(C),g!==void 0?s===void 0&&C===void 0?this.setHeight(g,!0):this.setHeight(g):M!==void 0&&this.setScaleY(M),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),this}setDrawBelowCallback(t){return this.drawBelowCallback=t,this}setDrawAboveCallback(t){return this.drawAboveCallback=t,this}reset(){return this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setAlign().setDrawBelowCallback().setDrawAboveCallback(),this}get willRender(){return this.visible&&this.alpha>0}get drawX(){return this.x+this.leftSpace+this.offsetX-this.originX*this.width}get drawY(){return this.y+this.offsetY}get drawTLX(){return 0}get drawTLY(){return 0}get drawBLX(){return 0}get drawBLY(){return 0}get drawTRX(){return 0}get drawTRY(){return 0}get drawBRX(){return 0}get drawBRY(){return 0}get drawCenterX(){return(this.drawTRX+this.drawTLX)/2}get drawCenterY(){return(this.drawBLY+this.drawTLY)/2}}Object.assign(Bs.prototype,bp);var _i=function(i,t,s){return t.hasOwnProperty(i)?t[i]:s[i]};const ps=Phaser.Utils.Objects.GetValue;class u1 extends Bs{constructor(t,s){super(t,"background"),this.setColor(ps(s,"color",null),ps(s,"color2",null),ps(s,"horizontalGradient",!0)),this.setStroke(ps(s,"stroke",null),ps(s,"strokeThickness",2)),this.setCornerRadius(ps(s,"cornerRadius",0),ps(s,"cornerIteration",null))}set color(t){t=St(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=St(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,s,g){return g===void 0&&(g=!0),this.color=t,this.color2=s,this.horizontalGradient=g,this}set stroke(t){t=St(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,s){return t!=null&&s===void 0&&(s=2),this.stroke=t,this.strokeThickness=s,this}set cornerRadius(t){this.setDirty(this._cornerRadius!=t),this._cornerRadius=t}get cornerRadius(){return this._cornerRadius}set cornerIteration(t){this.setDirty(this._cornerIteration!=t),this._cornerIteration=t}get cornerIteration(){return this._cornerIteration}modifyStyle(t){return t.hasOwnProperty("color")&&this.setColor(t.color,_i("color2",t,this),_i("horizontalGradient",t,this)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,_i("strokeThickness",t,this)),t.hasOwnProperty("cornerRadius")&&this.setCornerRadius(t.cornerRadius,_i("cornerIteration",t,this)),this}modifyPorperties(t){return super.modifyPorperties(t),this.modifyStyle(t),this}setCornerRadius(t,s){return this.cornerRadius=t,this.cornerIteration=s,this}renderContent(){Yl(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}}const Yi=Phaser.Utils.Objects.GetValue;class d1 extends Bs{constructor(t,s){super(t,"innerbounds"),this.setColor(Yi(s,"color",null),Yi(s,"color2",null),Yi(s,"horizontalGradient",!0)),this.setStroke(Yi(s,"stroke",null),Yi(s,"strokeThickness",2))}set color(t){t=St(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=St(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,s,g){return g===void 0&&(g=!0),this.color=t,this.color2=s,this.horizontalGradient=g,this}set stroke(t){t=St(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,s){return t!=null&&s===void 0&&(s=2),this.stroke=t,this.strokeThickness=s,this}modifyPorperties(t){super.modifyPorperties(t),t.hasOwnProperty("color")&&this.setColor(t.color,Yi(t,"color2",null),Yi(t,"horizontalGradient",!0)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,Yi(t,"strokeThickness",2))}renderContent(){var t=this.parent.padding,s=t.left,g=t.top,C=this.parent.width-t.left-t.right,M=this.parent.height-t.top-t.bottom,l=this.context;if(this.color!=null){var T;if(this.color2!=null){var e;this.horizontalGradient?e=l.createLinearGradient(0,0,C,0):e=l.createLinearGradient(0,0,0,M),e.addColorStop(0,this.color),e.addColorStop(1,this.color2),T=e}else T=this.color;l.fillStyle=T,l.fillRect(s,g,C,M)}this.stroke!=null&&this.strokeThickness>0&&(l.strokeStyle=this.stroke,l.lineWidth=this.strokeThickness,l.strokeRect(s,g,C,M))}}const ie=Phaser.Utils.Objects.GetValue;class Qa{constructor(t,s){this.parent=t,this.set(s)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY,leftSpace:this.leftSpace,rightSpace:this.rightSpace,backgroundHeight:this.backgroundHeight,backgroundBottomY:this.backgroundBottomY,align:this.align}}set(t){return this.setBold(ie(t,"bold",!1)),this.setItalic(ie(t,"italic",!1)),this.setFontSize(ie(t,"fontSize","16px")),this.setFontFamily(ie(t,"fontFamily","Courier")),this.setColor(ie(t,"color","#fff")),this.setStrokeStyle(ie(t,"stroke",null),ie(t,"strokeThickness",0)),this.setShadow(ie(t,"shadowColor",null),ie(t,"shadowOffsetX",0),ie(t,"shadowOffsetY",0),ie(t,"shadowBlur",0)),this.setOffset(ie(t,"offsetX",0),ie(t,"offsetY",0)),this.setSpace(ie(t,"leftSpace",0),ie(t,"rightSpace",0)),this.setAlign(ie(t,"align",void 0)),this.setBackgroundColor(ie(t,"backgroundColor",null)),this.setBackgroundHeight(ie(t,"backgroundHeight",void 0)),this.setBackgroundBottomY(ie(t,"backgroundBottomY",void 0)),this}modify(t){return t.hasOwnProperty("bold")&&this.setBold(t.bold),t.hasOwnProperty("italic")&&this.setItalic(t.italic),t.hasOwnProperty("fontSize")&&this.setFontSize(t.fontSize),t.hasOwnProperty("fontFamily")&&this.setFontFamily(t.fontFamily),t.hasOwnProperty("color")&&this.setColor(t.color),(t.hasOwnProperty("stroke")||t.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(_i("stroke",t,this),_i("strokeThickness",t,this)),t.hasOwnProperty("shadowColor")&&this.setShadowColor(t.shadowColor),(t.hasOwnProperty("shadowOffsetX")||t.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(_i("shadowOffsetX",t,this),_i("shadowOffsetY",t,this)),t.hasOwnProperty("shadowBlur")&&this.setShadowBlur(t.shaodwBlur),t.hasOwnProperty("offsetX")&&this.setOffsetX(t.offsetX),t.hasOwnProperty("offsetY")&&this.setOffsetY(t.offsetY),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),t.hasOwnProperty("backgroundColor")&&this.setBackgroundColor(t.backgroundColor),t.hasOwnProperty("backgroundHeight")&&this.setBackgroundHeight(t.backgroundHeight),t.hasOwnProperty("backgroundBottomY")&&this.setBackgroundBottomY(t.backgroundBottomY),this}setUpdateTextFlag(){return this.parent&&(this.parent.updateTextFlag=!0),this}clone(){return new Qa(null,this.toJSON())}copyFrom(t){return this.set(t.toJSON()),this}copyTo(t){return t.set(this.toJSON()),this}setBold(t){return t===void 0&&(t=!0),this.bold=t,this.setUpdateTextFlag(),this}setItalic(t){return t===void 0&&(t=!0),this.italic=t,this.setUpdateTextFlag(),this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(t){return typeof t=="number"&&(t=`${t}px`),this.fontSize=t,this.setUpdateTextFlag(),this}setFontFamily(t){return this.fontFamily=t,this.setUpdateTextFlag(),this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(t){return this.color=St(t),this}get hasFill(){return this.color!=null}setStrokeStyle(t,s){return this.stroke=St(t),s!==void 0&&(this.strokeThickness=s),this}setStrokeThickness(t){return this.strokeThickness=t,this}get hasStroke(){return this.stroke!=null&&this.strokeThickness>0}setShadowColor(t){return this.shadowColor=St(t),this}setShadowOffset(t,s){return t===void 0&&(t=0),s===void 0&&(s=0),this.shadowOffsetX=t,this.shadowOffsetY=s,this}setShadowBlur(t){return t===void 0&&(t=0),this.shaodwBlur=t,this}setShadow(t,s,g,C){return this.setShadowColor(t).setShadowOffset(s,g).setShadowBlur(C),this}setBackgroundColor(t){return this.backgroundColor=St(t),this}get hasBackgroundColor(){return this.backgroundColor!=null}setBackgroundHeight(t){return this.backgroundHeight=t,this}setBackgroundBottomY(t){return this.backgroundBottomY=t,this}setOffsetX(t){return t===void 0&&(t=0),this.offsetX=t,this}setOffsetY(t){return t===void 0&&(t=0),this.offsetY=t,this}setOffset(t,s){return this.setOffsetX(t).setOffsetY(s),this}setLeftSpace(t){return t===void 0&&(t=0),this.leftSpace=t,this}setRightSpace(t){return t===void 0&&(t=0),this.rightSpace=t,this}setSpace(t,s){return this.setLeftSpace(t).setRightSpace(s),this}setAlign(t){return this.align=t,this}syncFont(t){return t.font=this.font,this}syncStyle(t){t.textBaseline="alphabetic";var s=this.hasFill,g=this.hasStroke;return t.fillStyle=s?this.color:"#000",t.strokeStyle=g?this.stroke:"#000",t.lineWidth=g?this.strokeThickness:0,t.lineCap="round",t.lineJoin="round",this}syncShadow(t){t.shadowColor!=null?(t.shadowColor=this.shadowColor,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur):(t.shadowColor=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0)}getTextMetrics(t,s){return this.syncFont(t).syncStyle(t),t.measureText(s)}}var f1=function(i,t){i===void 0&&(i=0),t===void 0&&(t=0);var s=this.fixedWidth!==i||this.fixedHeight!==t;return s?(this.fixedWidth=i,this.fixedHeight=t,this.dirty=!0,this.setCanvasSize(i>0?i:this.width,t>0?t:this.height),this):this},c1=function(i,t){var s=this.padding,g=s.left,C=s.right,M=s.top,l=s.bottom;return ts(s,i,t),this.dirty=this.dirty||g!=s.left||C!=s.right||M!=s.top||l!=s.bottom,this},v1=function(i){return Oa(this.padding,i)},p1=function(i){return this.textStyle.modify(i),this},g1=function(i){return this.defaultTextStyle.modify(i),this},m1=function(){return this.textStyle.copyFrom(this.defaultTextStyle),this},x1=function(i){return this.testString=i,this};const y1=Phaser.Utils.Array.Remove;var T1=function(i){return this.poolManager.free(i),y1(this.children,i),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},C1=function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this};const S1=Phaser.Utils.Array.Remove;var P1=function(i){return S1(this.children,i),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},E1=function(){return this.setText(),this},Fp=function(i,t){var s=Array.isArray(i);return t===void 0||t===this.children.length?s?this.children.push(...i):this.children.push(i):s?this.children.splice(t,0,...i):this.children.splice(t,0,i),this.lastAppendedChildren.length=0,s?this.lastAppendedChildren.push(...i):this.lastAppendedChildren.push(i),this};const os="text",Lp="image",Dp="drawer",Ip="space",jl="command";var Bp=function(i){return i.type===os&&i.text===`
`},Gp=function(i){return i.type===os&&i.text==="\f"},M1=function(i){return i.type===os&&i.text===" "},Mn=function(i){return i.type===os},w1=function(i){return i.type===jl};class Np extends Bs{constructor(t,s,g){super(t,os),this.updateTextFlag=!1,this.style=new Qa(this,g),this.setText(s)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(t){this.style&&(this.style.offsetX=t)}get offsetY(){return this.style.offsetY}set offsetY(t){this.style&&(this.style.offsetY=t)}get leftSpace(){return this.style.leftSpace*this.scaleX}set leftSpace(t){this.style&&(this.style.leftSpace=t),super.leftSpace=t}get rightSpace(){return this.style.rightSpace*this.scaleX}set rightSpace(t){this.style&&(this.style.rightSpace=t),super.rightSpace=t}get align(){return this.style.align}set align(t){this.style&&(this.style.align=t)}modifyStyle(t){return this.setDirty(!0),this.style.modify(t),this.updateTextFlag&&this.updateTextSize(),this}modifyPorperties(t){return t?(this.modifyStyle(t),super.modifyPorperties(t),this):this}setText(t){return this.setDirty(this.text!=t),this.text=t,this.updateTextSize(),this}updateTextSize(){var t=this.text;if(t===`
`||t==="\f"||t==="")this.textWidth=0,this.textHeight=0,this.ascent=0,this.descent=0;else{var s=this.style.getTextMetrics(this.context,this.text);this.textWidth=s.width;var g,C;"actualBoundingBoxAscent"in s?(g=s.actualBoundingBoxAscent,C=s.actualBoundingBoxDescent):(g=0,C=0),this.textHeight=g+C,this.ascent=g,this.descent=C}return this.updateTextFlag=!1,this}get width(){return this.textWidth*this.scaleX}set width(t){this.textWidth>0?this.scaleX=t/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(t){this.textHeight>0?this.scaleY=t/this.textHeight:this.scaleY=1}get willRender(){var t=this.text;return t===`
`||t==="\f"?!1:super.willRender}renderContent(){var t=this.context,s=this.style;if(s.hasBackgroundColor){t.fillStyle=s.backgroundColor;var g=this.drawTLX,C=this.drawTRX-g,M=s.backgroundBottomY;M==null&&(M=this.drawBLY);var l=s.backgroundHeight;l==null&&(l=M-this.drawTLY);var T=M-l;t.fillRect(g,T,C,l)}var e=s.hasFill,d=s.hasStroke;!e&&!d||(s.syncFont(t).syncStyle(t),d&&(s.syncShadow(t),t.strokeText(this.text,0,0)),e&&(s.syncShadow(t),t.fillText(this.text,0,0)))}get drawTLX(){return-this.leftSpace}get drawTLY(){return-this.ascent}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.descent}get drawTRX(){return this.textWidth+this.rightSpace}get drawTRY(){return-this.ascent}get drawBRX(){return this.textWidth+this.rightSpace}get drawBRY(){return this.descent}}var R1=function(i,t){t&&this.textStyle.modify(t);var s=this.poolManager.allocate(os);return s===null?s=new Np(this,i,this.textStyle):s.setParent(this).setActive().modifyStyle(this.textStyle).setText(i),s},A1=function(i,t){t&&this.textStyle.modify(t);for(var s=[],g=0,C=i.length;g<C;g++){var M=i.charAt(g),l=this.poolManager.allocate(os);l===null?l=new Np(this,M,this.textStyle):l.setParent(this).setActive().modifyStyle(this.textStyle).setText(M),s.push(l)}return s},xr=function(i,t){var s=this.createCharChildren(i,t);return this.addChild(s),this},O1=function(i,t){return i===void 0&&(i=""),this.removeChildren(),xr.call(this,i,t),this.dirty=!0,this},b1=function(i,t,s){var g=this.createCharChildren(t,s);return i=this.getCharChildIndex(i,!0),this.addChild(g,i),this},F1=function(i,t){t===void 0&&(t=1);for(var s=0;s<t;s++){var g=this.getCharChildIndex(i,!0);if(g===void 0)break;this.removeChild(this.children[g])}return this},L1=function(i){var t="";return this.forEachCharChild(function(s){t+=s.text},void 0,i),t};class D1 extends Bs{constructor(t,s,g){super(t,Lp),this.setTexture(s,g)}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(t){}get key(){return this._key}set key(t){this.setDirty(this._key!=t),this._key=t}get frame(){return this._frame}set frame(t){this.setDirty(this._frame!=t),this._frame=t}setTexture(t,s){return this.key=t,this.frame=s,this.frameObj=this.scene.sys.textures.getFrame(t,s),this}get width(){return this.frameWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=t/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=t/this.frameHeight}setHeight(t,s){return s===void 0&&(s=!1),this.height=t,s&&(this.scaleX=this.scaleY),this}renderContent(){var t=this.context,s=this.frameObj,g=this.frameWidth,C=this.frameHeight;t.drawImage(s.source.image,s.cutX,s.cutY,g,C,0,0,g,C)}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.frameHeight}get drawTRX(){return this.frameWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.frameWidth+this.rightSpace}get drawBRY(){return this.frameHeight}}var I1=function(i,t,s){var g=this.poolManager.allocate(Lp);return g===null?g=new D1(this,i,t):g.setParent(this).setActive().setTexture(i,t),g.modifyPorperties(s),g},Vp=function(i,t,s){var g=this.createImageChild(i,t,s);return this.addChild(g),this};class B1 extends Bs{constructor(t,s,g,C){super(t,Dp),this.setRenderCallback(s),this.setDrawerSize(g,C)}setRenderCallback(t){return t?this.renderContent=t.bind(this):delete this.renderContent,this}setDrawerSize(t,s){return t===!0?(this.toLocalPosition=!1,t=void 0,s=void 0):this.toLocalPosition=!0,t===void 0&&(t=0),s===void 0&&(s=t),this.drawerWidth=t,this.drawerHeight=s,this}onFree(){super.onFree(),this.setRenderCallback()}get width(){return this.drawerWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=this.drawerWidth>0?t/this.drawerWidth:1}get height(){return this.drawerHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=this.drawerHeight>0?t/this.drawerHeight:1}get offsetY(){return-this.height}set offsetY(t){}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.drawerHeight}get drawTRX(){return this.drawerWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.drawerWidth+this.rightSpace}get drawBRY(){return this.drawerHeight}}var G1=function(i,t,s){var g=this.poolManager.allocate(Dp);return g===null?g=new B1(this,i,t,s):g.setParent(this).setActive().setRenderCallback(i).setDrawerSize(t,s),g},N1=function(i,t,s){var g=this.createDrawerChild(i,t,s);return this.addChild(g),this};let V1=class extends Bs{constructor(t,s){super(t,Ip),this.setSpaceWidth(s)}get width(){return this.spaceWidth*this.scaleX}set width(t){this.spaceWidth>0?this.scaleX=t/this.spaceWidth:this.scaleX=1}setSpaceWidth(t){return this.spaceWidth=t,this}};var k1=function(i){var t=this.poolManager.allocate(Ip);return t===null?t=new V1(this,i):t.setParent(this).setActive().setSpaceWidth(i),t},kp=function(i){var t=this.createSpaceChild(i);return this.addChild(t),this};class z1 extends Zl{constructor(t,s,g,C,M){super(t,jl),this.setName(s).setParameter(C).setCallback(g,M)}setName(t){return this.name=t,this}setParameter(t){return this.param=t,this}setCallback(t,s){return this.callback=t,this.scope=s,this}exec(){var t;return this.scope?t=this.callback.call(this.scope,this.param,this.name):t=this.callback(this.param,this.name),t}onFree(){super.onFree(),this.setName().setCallback().setParameter()}}var U1=function(i,t,s,g){var C=this.poolManager.allocate(jl);return C===null?C=new z1(this,i,t,s,g):C.setParent(this).setActive().setName(i).setCallback(t,g).setParameter(s),C},xt=function(i,t,s,g){var C=this.createCommandChild(i,t,s,g);return this.addChild(C),this},Y1=function(i){return i===void 0?i={}:typeof i=="object"&&(i=$e(i)),this.wrapConfig=i,this},X1=function(i,t,s,g){g===void 0&&(g={word:[],width:0}),g.word.length=0;for(var C=i.length,M=t,l=g.word,T=0;M<C;){var e=i[M];if(!e.renderable){l.push(e),M++;continue}var d=e.type===os?e.text:null;if(d!==null&&d!==" "&&d!==`
`&&d!=="\f")l.push(e),T+=e.outerWidth,M++;else{M===t&&(l.push(e),T+=e.outerWidth);break}if(s)break}return g.width=T,g},zp=function(i){for(var t=0,s=i.length;t<s;t++){var g=i[t];if(g.align!==void 0)return g.align}},Up=function(i,t,s){if(!(t===0&&s===0))for(var g=0,C=i.length;g<C;g++){var M=i[g];M.renderable&&(M.x+=t,M.y+=s)}},W1=function(i,t,s){var g=i.hAlign,C=i.vAlign,M,l,T=i.linesHeight;switch(C){case 1:case"center":l=(s-T)/2;break;case 2:case"bottom":l=s-T;break;default:l=0;break}for(var e=i.lines,d=0,x=e.length;d<x;d++){var u=e[d],h=u.width,o=u.children,n=zp(o);switch(n===void 0&&(n=g),n){case 1:case"center":M=(t-h)/2;break;case 2:case"right":M=t-h;break;default:M=0;break}Up(o,M,l)}},qd=function(){var i=this.defaultTextStyle.getTextMetrics(this.context,this.testString),t,s;return"actualBoundingBoxAscent"in i?(t=i.actualBoundingBoxAscent,s=i.actualBoundingBoxDescent):(t=0,s=0),$r.ascent=t,$r.descent=s,$r.height=t+s,$r},$r={};const Oe=Phaser.Utils.Objects.GetValue;var H1=function(i){var t=Oe(i,"start",0);ts(this.wrapPadding,Oe(i,"padding",0));var s=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,g=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,C=Oe(i,"lineHeight"),M=Oe(i,"ascent",C),l;if(C===void 0){var T=Oe(i,"useDefaultTextHeight",!1);if(l=Oe(i,"maxLines",0),this.fixedHeight>0&&!T){var Y=this.fixedHeight-s;if(l>0)C=Y/l;else{var e=qd.call(this);C=e.height,M=e.ascent,l=Math.floor((Y-M)/C)}}else{var e=qd.call(this);C=e.height,M=e.ascent}}else if(this.fixedHeight>0){if(l=Oe(i,"maxLines"),l===void 0){var Y=this.fixedHeight-s;l=Math.floor(Y/C)}}else l=Oe(i,"maxLines",0);M===void 0&&(M=C);var d=l===0,x=Oe(i,"wrapWidth",void 0);x===void 0&&(this.fixedWidth>0?x=this.fixedWidth-g:x=1/0);for(var u=Oe(i,"letterSpacing",0),h=Oe(i,"hAlign",0),o=Oe(i,"vAlign",0),n=Oe(i,"charWrap",!1),r={callback:"runWordWrap",start:t,isLastPage:!1,padding:this.wrapPadding,ascent:M,lineHeight:C,maxLines:l,wrapWidth:x,letterSpacing:u,hAlign:h,vAlign:o,charWrap:n,children:[],lines:[],maxLineWidth:0,linesHeight:0},f=this.children,a=0,c=f.length;a<c;a++)f[a].setActive(!1);x+=u;for(var p=this.padding.left+this.wrapPadding.left,v=this.padding.top+this.wrapPadding.top+M,m=p,y=v,P=x,E=t,S=f.length,w=r.children,R=r.lines,A=[],O=0,F=0,b,D=!1;E<S;){b=X1(f,E,n,b);var I=b.word,B=I.length,k=b.width+B*u;E+=B;var U=Bp(I[0]);D=Gp(I[0]);var X=U||D;if(P<k||X){if(X){var H=I[0];H.setActive().setPosition(m,y),w.push(H),A.push(H)}m=p,y+=C,P=x,R.push({children:A,width:O}),F=Math.max(F,O),O=0,A=[];var N=D||!d&&R.length===l;if(N)break;if(X)continue}P-=k,O+=k;for(var a=0,c=I.length;a<c;a++){var z=I[a];z.setActive(),w.push(z),A.push(z),z.renderable&&(z.setPosition(m,y),m+=z.outerWidth+u)}}A.length>0&&(R.push({children:A,width:O}),F=Math.max(F,O)),r.start+=w.length,r.isLastPage=!D&&r.start===S,r.maxLineWidth=F,r.linesHeight=R.length*C;var L=this.fixedWidth>0?this.fixedWidth:r.maxLineWidth+g,G=this.fixedHeight>0?this.fixedHeight:r.linesHeight+s,V=L-g,Y=G-s;W1(r,V,Y),this.setCanvasSize(L,G);for(var a=0,c=w.length;a<c;a++){var z=w[a];z.renderable&&(z.x0=z.x,z.y0=z.y)}return r};const $1=Phaser.Utils.Objects.Merge;var K1=function(i){return i===void 0&&(i={}),H1.call(this,$1(i,this.wrapConfig))},Z1=function(i,t,s){var g=i.hAlign,C=i.vAlign,M,l,T=i.rtl,e=i.lines,d=i.lineWidth,x=i.linesWidth;switch(g){case 1:case"center":M=(t-x)/2;break;case 2:case"right":M=t-x;break;default:M=0;break}T&&(M+=d);for(var u=0,h=e.length;u<h;u++){var o=e[T?h-u-1:u],n=o.children,r=o.height,f=zp(n);switch(f===void 0&&(f=C),f){case 1:case"center":l=(s-r)/2;break;case 2:case"bottom":l=s-r;break;default:l=0;break}Up(n,M,l),M+=d}};const be=Phaser.Utils.Objects.GetValue;var j1=function(i){var t=be(i,"start",0);ts(this.wrapPadding,be(i,"padding",0));var s=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,g=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,C=be(i,"lineWidth",void 0),M;if(C===void 0)if(M=be(i,"maxLines",0),this.fixedWidth>0){var H=this.fixedWidth-g;C=H/M}else C=0;else if(this.fixedWidth>0){if(M=be(i,"maxLines",void 0),M===void 0){var H=this.fixedWidth-g;M=Math.floor(H/C)+1}}else M=be(i,"maxLines",0);var l=M===0,T=be(i,"fixedChildHeight",void 0);if(T===void 0){var e=be(i,"charPerLine",void 0);if(e!==void 0){var N=this.fixedHeight-s;T=Math.floor(N/e)}}var d=be(i,"wrapHeight",void 0);d===void 0&&(this.fixedHeight>0?d=this.fixedHeight-s:d=1/0);for(var x=be(i,"letterSpacing",0),u=be(i,"rtl",!0),h=be(i,"hAlign",u?2:0),o=be(i,"vAlign",0),n={callback:"runVerticalWrap",start:t,isLastPage:!1,padding:this.wrapPadding,lineWidth:C,maxLines:M,fixedChildHeight:T,wrapHeight:d,letterSpacing:x,hAlign:h,vAlign:o,rtl:u,children:[],lines:[],maxLineHeight:0,linesWidth:0},r=this.children,f=0,a=r.length;f<a;f++)r[f].setActive(!1);d+=x;for(var c=this.padding.left+this.wrapPadding.left,p=this.padding.top+this.wrapPadding.top,v=c,m=p,y=d,P=t,E=r.length,S=n.children,w=n.lines,R=[],A=0,O=0;P<E;){var F=r[P];if(P++,!F.renderable){F.setActive(),S.push(F),R.push(F);continue}var b=(T!==void 0?T:F.height)+x,D=Bp(F),I=Gp(F),B=D||I;if(y<b||B){D&&(F.setActive().setPosition(v,m).setOrigin(.5),S.push(F),R.push(F)),v=c,m=p,y=d,w.push({children:R,height:A}),O=Math.max(O,A),A=0,R=[];var k=I||!l&&w.length===M;if(k)break;if(B)continue}y-=b,A+=b,F.setActive().setPosition(v,m).setOrigin(.5),S.push(F),R.push(F),m+=b}R.length>0&&(w.push({children:R,height:A}),O=Math.max(O,A)),n.start+=S.length,n.isLastPage=n.start===E,n.maxLineHeight=O,n.linesWidth=w.length*C;var U=this.fixedWidth>0?this.fixedWidth:n.linesWidth+g,X=this.fixedHeight>0?this.fixedHeight:n.maxLineHeight+s,H=U-g,N=X-s;Z1(n,H,N),this.setCanvasSize(U,X);for(var f=0,a=S.length;f<a;f++){var F=S[f];F.renderable&&(F.x0=F.x,F.y0=F.y)}return n};const J1=Phaser.Utils.Objects.Merge;var Q1=function(i){return i===void 0&&(i={}),j1.call(this,J1(i,this.wrapConfig))};const _d=Phaser.Utils.Objects.GetValue;var q1=function(i){var t=_d(this.wrapConfig,"callback");return t||(t=_d(i,"callback",this.runWordWrap)),typeof t=="string"&&(t=this[t]),t.call(this,i)};const _1={setVAlign(i){return this.wrapConfig.vAlign=i,this},setHAlign(i){return this.wrapConfig.hAlign=i,this}};var tT=function(){this.clear(),this.setCanvasSize(this.width,this.height),this.background.active&&this.background.render();for(var i,t=0,s=this.children.length;t<s;t++)i=this.children[t],i.active&&i.render();this.innerBounds.active&&this.innerBounds.render()},eT=function(i,t,s){s===void 0&&(s=!0);for(var g=this.children,C=0,M=0,l=g.length;M<l;M++){var T=g[M];if(!(s&&!T.active)){var e;if(t?e=i.call(this,T,C,g):e=i(T,C,g),C++,e)break}}return this},iT=function(i,t,s){s===void 0&&(s=!0);for(var g=this.children,C=0,M=0,l=g.length;M<l;M++){var T=g[M];if(!(s&&!T.active)&&T.renderable&&!T.removed){var e;if(t?e=i.call(this,T,C,g):e=i(T,C,g),C++,e)break}}return this},sT=function(i,t,s){s===void 0&&(s=!0);for(var g=this.children,C=0,M=0,l=g.length;M<l;M++){var T=g[M];if(!(s&&!T.active)&&Mn(T)&&!T.removed){var e;if(t?e=i.call(this,T,C,g):e=i(T,C,g),C++,e)break}}return this},nT=function(){return this.children};const rT=Phaser.Utils.Array.GetAll;var aT=function(){return rT(this.children,"active",!0)},oT=function(i,t){return t===void 0&&(t=[]),this.forEachCharChild(function(s){t.push(s)},void 0,i),t},hT=function(){return this.lastAppendedChildren},lT=function(i,t,s,g){typeof t!="number"&&(g=t,t=0,s=0);var C=i.drawCenterX+t,M=i.drawCenterY+s;return Ap(i,C,M,g)};const uT=Phaser.Math.Distance.BetweenPointsSquared;var dT=function(i,t){var s={x:i,y:t},g=1/0,C=null;return this.forEachRenderableChild(function(M){var l=uT(s,lT(M,!0));g>l&&(g=l,C=M)}),C},fT=function(i,t,s,g){return typeof i=="number"&&(i=this.getCharChild(i,!0)),Op(this,i,t,s,g)},cT=function(){for(var i=this.children,t=0,s=0,g=0,C=i.length;g<C;g++){var M=i[g];if(!(!M.renderable||!M.active||!M.visible)){var l=M.x0!==void 0?M.x0:M.x,T=M.y0!==void 0?M.y0:M.y;t=Math.max(t,l),s=Math.max(s,T)}}var e=t+this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,d=s+this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom;return(this.width!==e||this.height!==d)&&(this.dirty=!0,this.setCanvasSize(e,d)),this},vT=function(i,t){t===void 0&&(t=!0);for(var s=this.children,g=0,C=s.length;g<C;g++){var M=s[g];if(!(t&&!M.active)&&Mn(M)&&!M.removed){if(i===0)return g;i--}}},pT=function(i,t){t===void 0&&(t=!0);for(var s=this.children,g=0,C=s.length;g<C;g++){var M=s[g];if(!(t&&!M.active)&&Mn(M)&&!M.removed){if(i===0)return M;i--}}},gT=function(i,t){if(typeof i!="number"&&(i=this.children.indexOf(i),i<0))return null;t===void 0&&(t=!0);var s=this.children;i>=s.length&&(i=s.length);for(var g=0,C=0;C<i;C++){var M=s[C];t&&!M.active||Mn(M)&&!M.removed&&g++}return g},mT=function(i){return i===void 0&&(i=!0),this.childrenInteractiveEnable!==i&&(this.lastOverChild=null),this.childrenInteractiveEnable=i,this},Jl=function(g,t,s){for(var g=g,C=0,M=g.length;C<M;C++){var l=g[C];if(!(!l.active||!l.renderable)&&l.contains(t,s))return l}return null},xT=function(){return this.on("pointerdown",yT,this).on("pointerdown",TT,this).on("pointermove",nh,this).on("pointerover",nh,this).on("pointerout",function(i,t){nh.call(this,i,null,null,t)},this),this},yT=function(i,t,s,g){if(this.childrenInteractiveEnable){var C=Jl(this.children,t,s);C&&this.emit("child.pointerdown",C,i,t,s,g)}},TT=function(i,t,s,g){if(this.childrenInteractiveEnable){var C=Jl(this.children,t,s);C&&this.emit("child.pointerup",C,i,t,s,g)}},nh=function(i,t,s,g){if(this.childrenInteractiveEnable){if(t===null){this.lastOverChild!==null&&(this.emit("child.pointerout",this.lastOverChild,i,t,s,g),this.lastOverChild=null);return}var C=Jl(this.children,t,s);C!==this.lastOverChild&&(this.lastOverChild!==null&&this.emit("child.pointerout",this.lastOverChild,i,t,s,g),C!==null&&this.emit("child.pointerover",C,i,t,s,g),this.lastOverChild=C)}};const CT=Phaser.GameObjects.GameObject;var ST=function(i,t,s){var g=!!this.input;return CT.prototype.setInteractive.call(this,i,t,s),g||xT.call(this),this};const PT=Phaser.Utils.Array.BringToTop,ET=Phaser.Utils.Array.SendToBack,MT=Phaser.Utils.Array.MoveUp,wT=Phaser.Utils.Array.MoveDown,RT=Phaser.Utils.Array.MoveAbove,AT=Phaser.Utils.Array.MoveBelow,OT={moveChildToFist(i){return ET(this.children,i),this},moveChildToLast(i){return PT(this.children,i),this},movechildUp(i){return MT(this.children,i),this},movechildDown(i){return wT(this.children,i),this},movechildAbove(i,t){return RT(this.children,i,t),this},movechildBelow(i,t){return AT(this.children,i,t),this}},bT={setBackgroundColor(i,t,s){return this.background.setColor(i,t,s),this},setBackgroundStroke(i,t){return this.background.setStroke(i,t),this},setBackgroundCornerRadius(i,t){return this.background.setCornerRadius(i,t),this}},FT={setInnerBoundsColor(i,t,s){return this.innerBounds.setColor(i,t,s),this},setInnerBoundsStroke(i,t){return this.innerBounds.setStroke(i,t),this}};var Yp={setFixedSize:f1,setPadding:c1,getPadding:v1,modifyTextStyle:p1,modifyDefaultTextStyle:g1,resetTextStyle:m1,setTestString:x1,removeChild:T1,removeChildren:C1,popChild:P1,clearContent:E1,addChild:Fp,createCharChild:R1,createCharChildren:A1,setText:O1,appendText:xr,insertText:b1,removeText:F1,getText:L1,createImageChild:I1,appendImage:Vp,createDrawerChild:G1,appendDrawer:N1,createSpaceChild:k1,appendSpace:kp,createCommandChild:U1,appendCommand:xt,setWrapConfig:Y1,runWordWrap:K1,runVerticalWrap:Q1,runWrap:q1,renderContent:tT,forEachChild:eT,forEachRenderableChild:iT,forEachCharChild:sT,getChildren:nT,getActiveChildren:aT,getCharChildren:oT,getLastAppendedChildren:hT,getNearestChild:dT,getCharWorldPosition:fT,setToMinSize:cT,getCharChildIndex:vT,getCharChild:pT,getCharIndex:gT,setChildrenInteractiveEnable:mT,setInteractive:ST};Object.assign(Yp,OT,bT,FT,_1);const LT=Phaser.Utils.Objects.GetFastValue;var DT={};class IT{constructor(t){this.pools=LT(t,"pools",DT)}free(t){if(!this.pools)return this;var s=t.type;return this.pools.hasOwnProperty(s)||(this.pools[s]=new Ci),this.pools[s].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var s=0,g=t.length;s<g;s++)this.free(t[s]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}}const tf=Phaser.Utils.Objects.IsPlainObject,Pe=Phaser.Utils.Objects.GetValue;class An extends as{constructor(t,s,g,C,M,l){tf(s)?(l=s,s=Pe(l,"x",0),g=Pe(l,"y",0),C=Pe(l,"width",0),M=Pe(l,"height",0)):tf(C)&&(l=C,C=Pe(l,"width",0),M=Pe(l,"height",0));var T=C===0?1:C,e=M===0?1:M;super(t,s,g,T,e),this.type="rexDynamicText",this.autoRound=!0,this.padding=ts(),this.wrapPadding=ts();var d=Pe(l,"style",void 0);this.defaultTextStyle=new Qa(null,d),this.textStyle=this.defaultTextStyle.clone(),this.setTestString(Pe(l,"testString","|MÉqgy")),this.background=new u1(this,Pe(l,"background",void 0)),this.innerBounds=new d1(this,Pe(l,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.lastOverChild=null,this.poolManager=new IT(l),this.setFixedSize(C,M),this.setPadding(Pe(l,"padding",0)),this.setWrapConfig(Pe(l,"wrap",void 0)),this.setChildrenInteractiveEnable(Pe(l,"childrenInteractive",!1));var x=Pe(l,"text",void 0);x&&this.setText(x)}updateTexture(){return this.renderContent(),super.updateTexture(),this}get text(){return this.getText(!0)}set text(t){this.setText(t)}setSize(t,s){return this.setFixedSize(t,s),this}}Object.assign(An.prototype,Yp);ht.register("dynamicText",function(i,t,s,g,C){var M=new An(this.scene,i,t,s,g,C);return this.scene.add.existing(M),M});ot(window,"RexPlugins.UI.DynamicText",An);const On={setEventEmitter(i,t){return t===void 0&&(t=Phaser.Events.EventEmitter),this._privateEE=i===!0||i===void 0,this._eventEmitter=this._privateEE?new t:i,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(i){return this._eventEmitter&&i&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},BT={hasProperty(i){var t=this.gameObject;if(t.hasOwnProperty(i))return!0;var s=t[i];return s!==void 0},getProperty(i){return this.gameObject[i]},setProperty(i,t){return this.gameObject[i]=t,this},easeProperty(i,t,s,g,C,M,l){var T=this.tweens,e=T[i];e&&e.remove();var d=this.gameObject,x={targets:d,duration:s,ease:g,repeat:C,yoyo:M,onComplete:function(){T[i].remove(),T[i]=null,l&&l(d,i)},onCompleteScope:this};return x[i]=t,e=this.scene.tweens.add(x),e.timeScale=this.timeScale,T[i]=e,this}},GT={hasMethod(i){return typeof this.gameObject[i]=="function"},call(i,...t){if(!this.hasMethod(i))return this;var s=this.gameObject;return s[i].apply(s,t),this}},NT={hasData(i){var t=this.gameObject;return t.data?t.data.has(i):!1},getData(i){return this.gameObject.getData(i)},setData(i,t){return this.gameObject.setData(i,t),this}};class Ql{constructor(t,s,g){this.GOManager=t,this.tweens={},this.setGO(s,g)}get scene(){return this.GOManager.scene}get timeScale(){return this.GOManager.timeScale}destroy(){this.freeGO(),this.GOManager=void 0}freeTweens(){var t=this.tweens,s;for(var g in t)s=t[g],s&&s.remove(),t[g]=null;return this}freeGO(){return this.freeTweens(),this.gameObject.destroy(),this.gameObject=void 0,this}setGO(t,s){return t.setName(s),this.gameObject=t,this.name=s,this.freeTweens(),this}setTimeScale(t){var s=this.tweens;for(var g in s){var C=s[g];C&&(C.timeScale=t)}return this}}Object.assign(Ql.prototype,BT,GT,NT);var ql=function(i){for(var t in i)return!1;return!0};const VT={tint:0,alpha:1},kT={setGOFadeMode(i){return typeof i=="string"&&(i=VT[i]),this.fadeMode=i,this},setGOFadeTime(i){return this.fadeTime=i,this},hasTintFadeEffect(i){return(this.fadeMode===void 0||this.fadeMode===0)&&this.fadeTime>0&&i.setTint!==void 0},hasAlphaFadeEffect(i){return(this.fadeMode===void 0||this.fadeMode===1)&&this.fadeTime>0&&i.setAlpha!==void 0},fadeBob(i,t,s,g){var C=i.gameObject;return this.hasTintFadeEffect(C)?(t!==void 0&&i.setProperty("tintGray",255*t),i.easeProperty("tintGray",Math.floor(255*s),this.fadeTime,"Linear",0,!1,g)):this.hasAlphaFadeEffect(C)?(t!==void 0&&i.setProperty("alpha",t),i.easeProperty("alpha",s,this.fadeTime,"Linear",0,!1,g)):g&&g(C),this}};var hr=function(i){return i>>16&255},lr=function(i){return i>>8&255},ur=function(i){return i&255};const zT=~(255<<16)&16777215,UT=16711935,YT=16776960;var XT=function(i,t){return(t&255)<<16|i&zT},WT=function(i,t){return(t&255)<<8|i&UT},HT=function(i,t){return t&255|i&YT},$T=function(i,t,s,g){return(t&255)<<16|(s&255)<<8|g&255},KT=function(i,t){if(i.hasOwnProperty("tintR"))return i;t===void 0&&(t=16777215);var s=hr(t),g=lr(t),C=ur(t);return Object.defineProperty(i,"tint",{get:function(){return t},set:function(M){M=Math.floor(M)&16777215,i.setTint&&i.setTint(M),t!==M&&(t=M,s=hr(t),g=lr(t),C=ur(t))}}),Object.defineProperty(i,"tintR",{get:function(){return s},set:function(M){M=Math.floor(M)&255,s!==M&&(s=M,i.tint=XT(t,M))}}),Object.defineProperty(i,"tintG",{get:function(){return g},set:function(M){M=Math.floor(M)&255,g!==M&&(g=M,i.tint=WT(t,M))}}),Object.defineProperty(i,"tintB",{get:function(){return C},set:function(M){M=Math.floor(M)&255,C!==M&&(C=M,i.tint=HT(t,M))}}),Object.defineProperty(i,"tintGray",{get:function(){return Math.floor((s+g+C)/3)},set:function(M){M=Math.floor(M)&255,(s!==M||g!==M||C!==M)&&(s=M,g=M,C=M,i.tint=$T(t,M,M,M))}}),i.tint=t,i};const ZT=Phaser.Events.EventEmitter;var jT=function(i){if(i.events)return i;var t=new ZT,s=i.x;Object.defineProperty(i,"x",{get:function(){return s},set:function(l){s!==l&&(s=l,t.emit("update",i))}});var g=i.y;Object.defineProperty(i,"y",{get:function(){return g},set:function(l){g!==l&&(g=l,t.emit("update",i))}});var C=i.width;Object.defineProperty(i,"width",{get:function(){return C},set:function(l){C!==l&&(C=l,t.emit("update",i))}});var M=i.height;return Object.defineProperty(i,"height",{get:function(){return M},set:function(l){M!==l&&(M=l,t.emit("update",i))}}),i.events=t,i},JT=function(i,t,s,g,C,M){return M===void 0?M={}:M===!0&&(M=QT),typeof s!="number"&&(s=0,g=0),M.x=C.x+C.width*i+s,M.y=C.y+C.height*t+g,M},QT={},qT=function(i,t,s,g,C,M,l){if(i.hasOwnProperty("vp"))return i;typeof s=="function"&&(l=s,s=void 0),typeof C=="function"&&(l=C,C=void 0),s===void 0&&(s=.5),g===void 0&&(g=.5),C===void 0&&(C=0),M===void 0&&(M=0),l===void 0&&(l=JT),jT(t);var T=t.events;i.vp=t;var e=function(){l(s,g,C,M,t,i)};T.on("update",e),i.once("destroy",function(){T.off("update",e),i.vp=void 0}),Object.defineProperty(i,"vpx",{get:function(){return s},set:function(d){s!==d&&(s=d,e())}}),Object.defineProperty(i,"vpy",{get:function(){return g},set:function(d){g!==d&&(g=d,e())}}),Object.defineProperty(i,"vpxOffset",{get:function(){return C},set:function(d){C!==d&&(C=d,e())}}),Object.defineProperty(i,"vpyOffset",{get:function(){return M},set:function(d){M!==d&&(M=d,e())}}),e()};const _T=Phaser.Utils.Array.Remove,tC={has(i){return this.bobs.hasOwnProperty(i)},exists(i){return this.bobs.hasOwnProperty(i)},get(i){return this.bobs[i]},getGO(i){var t=this.get(i);return t?t.gameObject:null},addGO(i,t){this.remove(i,!0),this.hasTintFadeEffect(t)&&KT(t),this.viewportCoordinateEnable&&qT(t,this.viewport),t.once("destroy",function(){_T(this.removedGOs,t),this.isEmpty&&this.emit("empty")},this);var s=new this.BobClass(this,t,i);return this.bobs[i]=s,this},add(i,...t){var s=this.createGameObjectCallback,g=this.createGameObjectScope,C=s.call(g,this.scene,...t);this.addGO(i,C);var M=this.get(i);return this.fadeBob(M,0,1),this},forEachGO(i,t){for(var s in this.bobs){var g=this.bobs[s].gameObject,C;if(t?C=i.call(t,g,s,this):C=i(g,s,this),C)break}return this}},eC={remove(i,t){if(!this.has(i))return this;var s=this.get(i);return delete this.bobs[i],this.removedGOs.push(s.gameObject),t?s.destroy():this.fadeBob(s,void 0,0,function(){s.destroy()}),this},removeAll(){var i=this.bobs;for(var t in i)this.remove(t);return this},clear(i){i===void 0&&(i=!0);var t=this.bobs;for(var s in t)i&&t[s].destroy(),delete t[s];return this.removedGOs.length=0,this}},iC={hasProperty(i,t){return this.has(i)?this.get(i).hasProperty(t):!1},getProperty(i,t){if(this.has(i))return this.get(i).getProperty(t)},isNumberProperty(i,t){var s=this.getProperty(i,t);return typeof s=="number"},setProperty(i,t,s){return this.has(i)?(this.symbols&&typeof s=="string"&&this.isNumberProperty(i,t)&&(s in this.symbols?s=this.symbols[s]:console.warn(`Can't find symbol ${s}`)),this.get(i).setProperty(t,s),this):this},easeProperty(i,t,s,g,C,M,l,T){return this.has(i)?(g===void 0&&(g=1e3),C===void 0&&(C="Linear"),M===void 0&&(M=0),l===void 0&&(l=!1),this.symbols&&typeof s=="string"&&this.isNumberProperty(i,t)&&(s in this.symbols?s=this.symbols[s]:console.warn(`Can't find symbol ${s}`)),this.get(i).easeProperty(t,s,g,C,M,l,T),this):this},hasTweenTask(i,t){if(!this.has(i))return!1;var s=this.get(i).tweens;return s.hasOwnProperty(t)},getTweenTask(i,t){if(!this.has(i))return null;var s=this.get(i).tweens,g=s[t];return g||null}},sC={hasMethod(i,t){return this.has(i)?this.get(i).hasMethod(t):!1},call(i,t,...s){return this.has(i)?(this.get(i).call(t,...s),this):this}},nC={hasData(i,t){return this.has(i)?this.get(i).hasData(t):!1},getData(i,t){if(this.has(i))return this.get(i).getData(t)},setData(i,t,s){return this.has(i)?(this.get(i).setData(t,s),this):this}};var Ut=function(i){return i.displayWidth!==void 0?i.displayWidth:i.width},It=function(i){return i.displayHeight!==void 0?i.displayHeight:i.height};const ef=Phaser.Geom.Rectangle,ss=Phaser.Math.Vector2,rC=Phaser.Math.RotateAround;var _l=function(i,t){if(t===void 0?t=new ef:t===!0&&(rh===void 0&&(rh=new ef),t=rh),i.getBounds)return i.getBounds(t);var s,g,C,M,l,T,e,d;if(i.parentContainer){var x=i.parentContainer.getBoundsTransformMatrix();Tl(i,t),x.transformPoint(t.x,t.y,t),s=t.x,g=t.y,Cl(i,t),x.transformPoint(t.x,t.y,t),C=t.x,M=t.y,Sl(i,t),x.transformPoint(t.x,t.y,t),l=t.x,T=t.y,Pl(i,t),x.transformPoint(t.x,t.y,t),e=t.x,d=t.y}else Tl(i,t),s=t.x,g=t.y,Cl(i,t),C=t.x,M=t.y,Sl(i,t),l=t.x,T=t.y,Pl(i,t),e=t.x,d=t.y;return t.x=Math.min(s,C,l,e),t.y=Math.min(g,M,T,d),t.width=Math.max(s,C,l,e)-t.x,t.height=Math.max(g,M,T,d)-t.y,t},rh=void 0,Tl=function(i,t,s){return t===void 0?t=new ss:t===!0&&(He===void 0&&(He=new ss),t=He),i.getTopLeft?i.getTopLeft(t):(t.x=i.x-Ut(i)*i.originX,t.y=i.y-It(i)*i.originY,qa(i,t,s))},Cl=function(i,t,s){return t===void 0?t=new ss:t===!0&&(He===void 0&&(He=new ss),t=He),i.getTopRight?i.getTopRight(t):(t.x=i.x-Ut(i)*i.originX+Ut(i),t.y=i.y-It(i)*i.originY,qa(i,t,s))},Sl=function(i,t,s){return t===void 0?t=new ss:t===!0&&(He===void 0&&(He=new ss),t=He),i.getBottomLeft?i.getBottomLeft(t):(t.x=i.x-Ut(i)*i.originX,t.y=i.y-It(i)*i.originY+It(i),qa(i,t,s))},Pl=function(i,t,s){return t===void 0?t=new ss:t===!0&&(He===void 0&&(He=new ss),t=He),i.getBottomRight?i.getBottomRight(t):(t.x=i.x-Ut(i)*i.originX+Ut(i),t.y=i.y-It(i)*i.originY+It(i),qa(i,t,s))},He=void 0,qa=function(i,t,s){if(s===void 0&&(s=!1),i.rotation!==0&&rC(t,i.x,i.y,i.rotation),s&&i.parentContainer){var g=i.parentContainer.getBoundsTransformMatrix();g.transformPoint(t.x,t.y,t)}return t};const zn=Phaser.Utils.Objects.GetValue;var Xp=function(i,t,s){var g,C,M,l,T;if(typeof s=="number"?g=s:(g=zn(s,"color"),C=zn(s,"lineWidth"),M=zn(s,"fillColor"),l=zn(s,"fillAlpha",1),T=zn(s,"padding",0)),Array.isArray(i))for(var e=0,d=i.length;e<d;e++)sf(i[e],t,g,C,M,l,T);else sf(i,t,g,C,M,l,T)},sf=function(i,t,s,g,C,M,l){var T=i.getBounds||i.width!==void 0&&i.height!==void 0;if(T){s===void 0&&(s=16777215),g===void 0&&(g=1),C===void 0&&(C=null),M===void 0&&(M=1),l===void 0&&(l=0);var e=Tl(i,Ks[0]);e.x-=l,e.y-=l;var d=Cl(i,Ks[1]);d.x+=l,d.y-=l;var x=Pl(i,Ks[2]);x.x+=l,x.y+=l;var u=Sl(i,Ks[3]);u.x-=l,u.y+=l,C!==null&&t.fillStyle(C,M).fillPoints(Ks,!0,!0),s!==null&&t.lineStyle(g,s).strokePoints(Ks,!0,!0)}},Ks=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],aC=function(i,t){return this.forEachGO(function(s){s.drawBounds?s.drawBounds(i,t):Xp(s,i,t)}),this},Wp={drawGameObjectsBounds:aC};Object.assign(Wp,kT,tC,eC,iC,sC,nC);const oC=Phaser.Cameras.Scene2D.BaseCamera;var hC=function(i){return i instanceof oC};const Hp=Phaser.Geom.Rectangle;var bn=function(i,t,s){return hC(t)||(s=t,t=void 0),s===void 0?s=new Hp:s===!0&&(s=lC),t?i.scale.getViewPort(t,s):i.scale.getViewPort(s)},lC=new Hp;const Qe=Phaser.Utils.Objects.GetValue;class _a{constructor(t,s){this.scene=t,this.BobClass=Qe(s,"BobClass",Ql),this.setCreateGameObjectCallback(Qe(s,"createGameObject"),Qe(s,"createGameObjectScope")),this.setEventEmitter(Qe(s,"eventEmitter",void 0));var g=Qe(s,"fade",500);typeof g=="number"?(this.setGOFadeMode(),this.setGOFadeTime(g)):(this.setGOFadeMode(Qe(g,"mode")),this.setGOFadeTime(Qe(g,"time",500)));var C=Qe(s,"viewportCoordinate",!1);C!==!1?(this.setViewportCoordinateEnable(Qe(s,"enable",!0)),this.setViewport(Qe(C,"viewport"))):this.setViewportCoordinateEnable(!1),this.setSymbols(Qe(s,"symbols")),this.bobs={},this.removedGOs=[],this._timeScale=1}destroy(t){this.clear(!t),this.createGameObjectCallback=void 0,this.viewport=void 0,this.scene=void 0}set timeScale(t){if(this._timeScale!==t){this._timeScale=t;var s=this.bobs;for(var g in s)s[g].setTimeScale(t)}}get timeScale(){return this._timeScale}setTimeScale(t){return this.timeScale=t,this}setCreateGameObjectCallback(t,s){return this.createGameObjectCallback=t,this.createGameObjectScope=s,this}setViewportCoordinateEnable(t){return t===void 0&&(t=!0),this.viewportCoordinateEnable=t,this}setViewport(t){return t===void 0&&(t=bn(this.scene,this.scene.cameras.main)),this.viewport=t,this}setSymbols(t){return this.symbols=t,this}get isEmpty(){return ql(this.bobs)&&this.removedGOs.length===0}}Object.assign(_a.prototype,On,Wp);var Di=function(i,t){if(i.length<=1)return i;t===void 0&&(t=!1);var s=i[0].scene,g=s.sys.displayList;return g.depthSort(),t?i.sort(function(C,M){return g.getIndex(M)-g.getIndex(C)}):i.sort(function(C,M){return g.getIndex(C)-g.getIndex(M)}),i};const uC=Phaser.Utils.Objects.GetValue;class dC extends _a{constructor(t,s){s===void 0?s={}:Array.isArray(s)&&(s={layers:s}),s.hasOwnProperty("fade")||(s.fade=0),s.viewportCoordinate=!1,super(t,s);var g=uC(s,"layers");if(g)for(var C=0,M=g.length;C<M;C++)this.add(g[C])}setCreateGameObjectCallback(t,s){return t||(t=fC),super.setCreateGameObjectCallback(t,s),this}addGO(t,s){return super.addGO(t,s),s.name=t,this}getLayer(t){return this.getGO(t)}getLayers(t){return t===void 0&&(t=[]),this.forEachGO(function(s){t.push(s)}),Di(t,!1),t}addToLayer(t,s){var g=this.getGO(t);if(!g){console.warn(`Can't get layer "${t}"`);return}return s.isRexContainerLite?s.addToLayer(g):g.add(s),this}}var fC=function(i,t){var s=i.add.layer();return t!==void 0&&s.setDepth(t),s},cC=function(i){return Fs(i)?i.sys.sound:i.sound},yr=function(i){return i==null||typeof i!="object"?null:Fs(i)?i:i.scene&&Fs(i.scene)?i.scene:i.parent&&i.parent.scene&&Fs(i.parent.scene)?i.parent.scene:null};const vC=Phaser.Utils.Objects.GetValue;class he{constructor(t,s){this.setParent(t),this.isShutdown=!1,this.setEventEmitter(vC(s,"eventEmitter",!0)),this.parent&&(this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.once("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this))}shutdown(t){this.isShutdown||(this.parent&&(this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.off("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this)),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.game=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onEnvDestroy(){this.destroy(!0)}onParentDestroy(t,s){this.destroy(s)}setParent(t){return this.parent=t,this.scene=yr(t),this.game=Pn(t),this}}Object.assign(he.prototype,On);const pC=Phaser.Utils.Objects.GetValue;class to extends he{constructor(t,s){super(t,s),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(pC(s,"tickingMode",1))}boot(){this.tickingMode===2&&!this.tickingState&&this.startTicking()}shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(t))}setTickingMode(t){typeof t=="string"&&(t=gC[t]),this.tickingMode=t}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(t){this._isRunning!==t&&(this._isRunning=t,this.tickingMode===1&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}}const gC={no:0,lazy:1,always:2},mC=Phaser.Utils.Objects.GetValue;class xC extends to{constructor(t,s){super(t,s);var g=this.scene?"update":"step";this.tickEventName=mC(s,"tickEventName",g),this.isSceneTicker=!yC(this.tickEventName)}startTicking(){super.startTicking(),this.isSceneTicker?this.scene.sys.events.on(this.tickEventName,this.update,this):this.game.events.on(this.tickEventName,this.update,this)}stopTicking(){super.stopTicking(),this.isSceneTicker&&this.scene?this.scene.sys.events.off(this.tickEventName,this.update,this):this.game&&this.game.events.off(this.tickEventName,this.update,this)}}var yC=function(i){return i==="step"||i==="poststep"};const wi=Phaser.Utils.Objects.GetValue,nf=Phaser.Math.Clamp;let $p=class{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.state=wi(t,"state",Un),this.timeScale=wi(t,"timeScale",1),this.delay=wi(t,"delay",0),this.repeat=wi(t,"repeat",0),this.repeatCounter=wi(t,"repeatCounter",0),this.repeatDelay=wi(t,"repeatDelay",0),this.duration=wi(t,"duration",0),this.nowTime=wi(t,"nowTime",0),this.justRestart=wi(t,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,repeatDelay:this.repeatDelay,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(t){return this.timeScale=t,this}setDelay(t){return t===void 0&&(t=0),this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatInfinity(){return this.repeat=-1,this}setRepeatDelay(t){return this.repeatDelay=t,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?Zs:Yn,this.repeatCounter=0,this}stop(){return this.state=Un,this}update(t,s){this.state===Un||this.state===Kr||s===0||this.timeScale===0||(this.nowTime+=s*this.timeScale,this.justRestart=!1,this.nowTime>=this.duration?this.repeat===-1||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration,this.repeatDelay>0&&(this.nowTime-=this.repeatDelay,this.state=rf)):(this.nowTime=this.duration,this.state=Kr):this.nowTime>=0&&(this.state=Zs))}get t(){var t;switch(this.state){case Un:case Yn:case rf:t=0;break;case Zs:t=this.nowTime/this.duration;break;case Kr:t=1;break}return nf(t,0,1)}set t(t){t=nf(t,-1,1),t<0?(this.state=Yn,this.nowTime=-this.delay*t):(this.state=Zs,this.nowTime=this.duration*t,t===1&&this.repeat!==0&&this.repeatCounter++)}setT(t){return this.t=t,this}get isIdle(){return this.state===Un}get isDelay(){return this.state===Yn}get isCountDown(){return this.state===Zs}get isRunning(){return this.state===Yn||this.state===Zs}get isDone(){return this.state===Kr}get isOddIteration(){return(this.repeatCounter&1)===1}get isEvenIteration(){return(this.repeatCounter&1)===0}};const Un=0,Yn=1,Zs=2,rf=3,Kr=-1;class TC extends xC{constructor(t,s){super(t,s),this.timer=new $p}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}}const Xn=Phaser.Utils.Objects.GetValue,af=Phaser.Utils.Objects.GetAdvancedValue,CC=Phaser.Tweens.Builders.GetEaseFunction;class Gs extends TC{resetFromJSON(t){return this.timer.resetFromJSON(Xn(t,"timer")),this.setEnable(Xn(t,"enable",!0)),this.setTarget(Xn(t,"target",this.parent)),this.setDelay(af(t,"delay",0)),this.setDuration(af(t,"duration",1e3)),this.setEase(Xn(t,"ease","Linear")),this.setRepeat(Xn(t,"repeat",0)),this}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setTarget(t){return t===void 0&&(t=this.parent),this.target=t,this}setDelay(t){return this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatDelay(t){return this.repeatDelay=t,this}setEase(t){return t===void 0&&(t="Linear"),this.ease=t,this.easeFn=CC(t),this}start(){return this.timer.isRunning?this:(super.start(),this)}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}stop(t){return t===void 0&&(t=!1),super.stop(),t&&(this.timer.setT(1),this.updateGameObject(this.target,this.timer),this.complete()),this}update(t,s){if(!this.isRunning||!this.enable||!this.parent.active)return this;var g=this.target,C=this.timer;return C.update(t,s),C.isDelay||this.updateGameObject(g,C),this.emit("update",g,this),C.isDone&&this.complete(),this}updateGameObject(t,s){}}const SC=Phaser.Sound.BaseSound;var tu=function(i){return i instanceof SC};const of=Phaser.Utils.Objects.GetValue,hf=Phaser.Utils.Objects.GetAdvancedValue,PC=Phaser.Math.Linear;let Kp=class extends Gs{constructor(t,s,g){tu(t)&&(g=s,s=t,t=void 0),s.active=!0,s.scene=t,s.game=s.manager.game,super(s,g),this.volume={},this.resetFromJSON(g)}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(of(t,"mode",0)),this.setEnable(of(t,"enable",!0)),this.setVolumeRange(hf(t,"volume.start",this.parent.volume),hf(t,"volume.end",0)),this}setMode(t){return typeof t=="string"&&(t=EC[t]),this.mode=t,this}setVolumeRange(t,s){return this.volume.start=t,this.volume.end=s,this}start(){return this.timer.isRunning?this:(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start(),this)}updateGameObject(t,s){t.volume=PC(this.volume.start,this.volume.end,s.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.destroy();break}return this}};const EC={stop:1,destroy:2};var eo=function(i,t,s,g,C){tu(i)&&(C=g,g=s,s=t,t=i,i=void 0),g===void 0&&(g=1),C===void 0&&(C=0);var M={mode:0,volume:{start:C,end:g},duration:s};typeof t=="string"&&(t=i.sys.sound.add(t));var l;return t.hasOwnProperty("_fade")?(l=t._fade,l.stop().resetFromJSON(M)):(l=new Kp(i,t,M),t._fade=l),l.start(),t.isPlaying||t.setVolume(C).play(),t},wn=function(i,t,s,g){tu(i)&&(g=s,s=t,t=i,i=void 0),g===void 0&&(g=!0);var C={mode:g?2:1,volume:{start:t.volume,end:0},duration:s},M;return t.hasOwnProperty("_fade")?(M=t._fade,M.stop().resetFromJSON(C)):(M=new Kp(i,t,C),t._fade=M),M.start(),t.isPlaying||t.play(),t};const Wn=Phaser.Utils.Objects.GetValue,MC={setBackgroundMusicLoop(i){return i===void 0&&(i=!0),this.backgroundMusicLoop=i,this},setBackgroundMusicFadeTime(i){return this.backgroundMusicFadeTime=i,this},getBackgroundMusic(){return this.backgroundMusic},setCurrentBackgroundMusic(i){return this.backgroundMusic=i,i&&(i.once("complete",function(){this.backgroundMusic===i&&(this.backgroundMusic.destroy(),this.backgroundMusic=void 0)},this).once("destroy",function(){this.backgroundMusic===i&&(this.backgroundMusic=void 0)},this),i.isPlaying||i.play()),this},playBackgroundMusic(i,t){if(this.backgroundMusic&&this.backgroundMusic.key===i)return this;this.stopBackgroundMusic();var s=this.sound.add(i,{loop:Wn(t,"loop",this.backgroundMusicLoop),mute:Wn(t,"mute",this.backgroundMusicMute),volume:Wn(t,"volume",this.backgroundMusicVolume),detune:Wn(t,"detune",0),rate:Wn(t,"rate",1)});return this.setCurrentBackgroundMusic(s),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime),this},pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this},resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this},stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this},fadeInBackgroundMusic(i){return this.backgroundMusic&&eo(this.backgroundMusic,i,this.backgroundMusicVolume,0),this},fadeOutBackgroundMusic(i,t){return this.backgroundMusic&&wn(this.backgroundMusic,i,t),this},crossFadeBackgroundMusic(i,t){var s=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(t,!0).playBackgroundMusic(i).fadeInBackgroundMusic(t),this.backgroundMusicFadeTime=s,this},setBackgroundMusicMute(i){return i===void 0&&(i=!0),this.backgroundMusicMute=i,this},setBackgroundMusicVolume(i){return this.backgroundMusicVolume=i,this},setBackgroundMusicRate(i){return this.backgroundMusic&&this.backgroundMusic.setRate(i),this},setBackgroundMusicDetune(i){return this.backgroundMusic&&this.backgroundMusic.setDetune(i),this}},Hn=Phaser.Utils.Objects.GetValue,wC={setBackgroundMusic2Loop(i){return i===void 0&&(i=!0),this.backgroundMusic2Loop=i,this},setBackgroundMusic2FadeTime(i){return this.backgroundMusic2FadeTime=i,this},getBackgroundMusic2(){return this.backgroundMusic2},setCurrentBackgroundMusic2(i){return this.backgroundMusic2=i,i&&(i.once("complete",function(){this.backgroundMusic2===i&&(this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)},this).once("destroy",function(){this.backgroundMusic2===i&&(this.backgroundMusic2=void 0)},this),i.isPlaying||i.play()),this},playBackgroundMusic2(i,t){if(this.backgroundMusic2&&this.backgroundMusic2.key===i)return this;this.stopBackgroundMusic2();var s=this.sound.add(i,{loop:Hn(t,"loop",this.backgroundMusicLoop),mute:Hn(t,"mute",this.backgroundMusic2Mute),volume:Hn(t,"volume",this.backgroundMusic2Volume),detune:Hn(t,"detune",0),rate:Hn(t,"rate",1)});return this.setCurrentBackgroundMusic2(s),this.backgroundMusic2FadeTime>0&&this.fadeInBackgroundMusic2(this.backgroundMusic2FadeTime),this},pauseBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.pause(),this},resumeBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.resume(),this},stopBackgroundMusic2(){return this.backgroundMusic2&&(this.backgroundMusic2FadeTime>0?this.fadeOutBackgroundMusic2(this.backgroundMusic2FadeTime,!0):(this.backgroundMusic2.stop(),this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)),this},fadeInBackgroundMusic2(i){return this.backgroundMusic2&&eo(this.backgroundMusic2,i,this.backgroundMusic2Volume,0),this},fadeOutBackgroundMusic2(i,t){return this.backgroundMusic2&&wn(this.backgroundMusic2,i,t),this},crossFadeBackgroundMusic2(i,t){var s=this.backgroundMusic2FadeTime;return this.backgroundMusic2FadeTime=0,this.fadeOutBackgroundMusic2(t,!0).playBackgroundMusic2(i).fadeInBackgroundMusic2(t),this.backgroundMusic2FadeTime=s,this},setBackgroundMusic2Mute(i){return i===void 0&&(i=!0),this.backgroundMusic2Mute=i,this},setBackgroundMusic2Volume(i){return this.backgroundMusic2Volume=i,this},setBackgroundMusic2Rate(i){return this.backgroundMusic2&&this.backgroundMusic2.setRate(i),this},setBackgroundMusic2Detune(i){return this.backgroundMusic2&&this.backgroundMusic2.setDetune(i),this}},lf=Phaser.Utils.Array.Remove,Zr=Phaser.Utils.Objects.GetValue,RC={getSoundEffects(){return this.soundEffects},getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]},playSoundEffect(i,t){var s=this.sound.add(i,{mute:Zr(t,"mute",this.soundEffectsMute),volume:Zr(t,"volume",this.soundEffectsVolume),detune:Zr(t,"detune",0),rate:Zr(t,"rate",1)});return this.soundEffects.push(s),s.once("complete",function(){s.destroy(),this.sound&&lf(this.soundEffects,s)},this).once("destroy",function(){this.sound&&lf(this.soundEffects,s)},this).play(),this},stopAllSoundEffects(){for(var i=this.soundEffects.length-1;i>=0;i--){var t=this.soundEffects[i];t.stop(),t.destroy()}return this},fadeInSoundEffect(i){var t=this.getLastSoundEffect();return t&&eo(t,i,this.soundEffectsVolume,0),this},fadeOutSoundEffect(i,t){var s=this.getLastSoundEffect();return s&&wn(s,i,t),this},fadeOutAllSoundEffects(i,t){for(var s=this.soundEffects.length-1;s>=0;s--)wn(this.soundEffects[s],i,t);return this},setSoundEffectMute(i,t){if(i===void 0&&(i=!0),t===void 0&&(t=!1),t){var s=this.getLastSoundEffect();s&&s.setMute(i)}else this.soundEffectsMute=i;return this},setSoundEffectVolume(i,t){if(t===void 0&&(t=!1),t){var s=this.getLastSoundEffect();s&&s.setVolume(i)}else this.soundEffectsVolume=i;return this},setSoundEffectDetune(i,t){t===void 0&&(t=!1);var s;t?s=[this.getLastSoundEffect()]:s=this.soundEffects;for(var g=0,C=s.length;g<C;g++)s[g].setDetune(i);return this},setSoundEffectRate(i,t){t===void 0&&(t=!1);var s;t?s=[this.getLastSoundEffect()]:s=this.soundEffects;for(var g=0,C=s.length;g<C;g++)s[g].setRate(i);return this}},uf=Phaser.Utils.Array.Remove,jr=Phaser.Utils.Objects.GetValue,AC={getSoundEffects2(){return this.soundEffects2},getLastSoundEffect2(){return this.soundEffects2[this.soundEffects2.length-1]},playSoundEffect2(i,t){var s=this.sound.add(i,{mute:jr(t,"mute",this.soundEffects2Mute),volume:jr(t,"volume",this.soundEffects2Volume),detune:jr(t,"detune",0),rate:jr(t,"rate",1)});return this.soundEffects2.push(s),s.once("complete",function(){s.destroy(),this.sound&&uf(this.soundEffects2,s)},this).once("destroy",function(){this.sound&&uf(this.soundEffects2,s)},this).play(),this},stopAllSoundEffects2(){for(var i=this.soundEffects.length-1;i>=0;i--){var t=this.soundEffects[i];t.stop(),t.destroy()}return this},fadeInSoundEffect2(i){var t=this.getLastSoundEffect2();return t&&eo(t,i,this.soundEffects2Volume,0),this},fadeOutSoundEffect2(i,t){var s=this.getLastSoundEffect2();return s&&wn(s,i,t),this},fadeOutAllSoundEffects2(i,t){for(var s=this.soundEffects2.length-1;s>=0;s--)wn(this.soundEffects2[s],i,t);return this},setSoundEffect2Mute(i,t){if(i===void 0&&(i=!0),t===void 0&&(t=!1),t){var s=this.getLastSoundEffect2();s&&s.setMute(i)}else this.soundEffects2Mute=i;return this},setSoundEffect2Volume(i,t){if(t===void 0&&(t=!1),t){var s=this.getLastSoundEffect2();s&&s.setVolume(i)}else this.soundEffects2Volume=i;return this},setSoundEffect2Detune(i,t){t===void 0&&(t=!1);var s;t?s=[this.getLastSoundEffect2()]:s=this.soundEffects2;for(var g=0,C=s.length;g<C;g++)s[g].setDetune(i);return this},setSoundEffect2Rate(i,t){t===void 0&&(t=!1);var s;t?s=[this.getLastSoundEffect2()]:s=this.soundEffects2;for(var g=0,C=s.length;g<C;g++)s[g].setRate(i);return this}};var Zp={};Object.assign(Zp,MC,wC,RC,AC);const Ve=Phaser.Utils.Objects.GetValue;class jp{constructor(t,s){this.sound=cC(t),this.backgroundMusic=void 0,this._backgroundMusicVolume=Ve(s,"bgm.volume",1),this._backgroundMusicMute=Ve(s,"bgm.mute",!1),this.setBackgroundMusicLoop(Ve(s,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(Ve(s,"bgm.fade",500)),this.backgroundMusic2=void 0,this._backgroundMusic2Volume=Ve(s,"bgm2.volume",1),this._backgroundMusic2Mute=Ve(s,"bgm2.mute",!1),this.setBackgroundMusic2Loop(Ve(s,"bgm2.loop",!0)),this.setBackgroundMusic2FadeTime(Ve(s,"bgm2.fade",500)),this.soundEffects=[],this._soundEffectsVolume=Ve(s,"soundEffect.volume",1),this.soundEffects2=[],this._soundEffects2Volume=Ve(s,"soundEffect2.volume",1);var g=Ve(s,"bgm.initial",void 0);g&&this.setCurrentBackgroundMusic(g);var C=Ve(s,"bgm2.initial",void 0);C&&this.setCurrentBackgroundMusic2(C)}destroy(){if(this.backgroundMusic&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.backgroundMusic2&&this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0,this.soundEffects.length)for(var t=this.soundEffects.length-1;t>=0;t--)this.soundEffects[t].destroy();if(this.soundEffects.length=0,this.soundEffects2.length)for(var t=this.soundEffects2.length-1;t>=0;t--)this.soundEffects2[t].destroy();return this.soundEffects2.length=0,this.sound=void 0,this}get backgroundMusicMute(){return this._backgroundMusicMute}set backgroundMusicMute(t){this._backgroundMusicMute=t,this.backgroundMusic&&this.backgroundMusic.setMute(mute)}get backgroundMusicVolume(){return this._backgroundMusicVolume}set backgroundMusicVolume(t){this._backgroundMusicVolume=t,this.backgroundMusic&&this.backgroundMusic.setVolume(t)}get backgroundMusic2Mute(){return this._backgroundMusic2Mute}set backgroundMusic2Mute(t){this._backgroundMusic2Mute=t,this.backgroundMusic2&&this.backgroundMusic2.setMute(mute)}get backgroundMusic2Volume(){return this._backgroundMusic2Volume}set backgroundMusic2Volume(t){this._backgroundMusic2Volume=t,this.backgroundMusic2&&this.backgroundMusic2.setVolume(t)}get soundEffectsMute(){return this._soundEffectsMute}set soundEffectsMute(t){this._soundEffectsMute=t;for(var s=this.soundEffects,g=0,C=s.length;g<C;g++)s[g].setMute(t)}get soundEffectsVolume(){return this._soundEffectsVolume}set soundEffectsVolume(t){this._soundEffectsVolume=t;for(var s=this.soundEffects,g=0,C=s.length;g<C;g++)s[g].setVolume(t)}get soundEffects2Mute(){return this._soundEffects2Mute}set soundEffects2Mute(t){this._soundEffects2Mute=t;for(var s=this.soundEffects,g=0,C=soundEffects2.length;g<C;g++)s[g].setMute(t)}get soundEffects2Volume(){return this._soundEffects2Volume}set soundEffects2Volume(t){this._soundEffects2Volume=t;for(var s=this.soundEffects2,g=0,C=s.length;g<C;g++)s[g].setVolume(t)}}Object.assign(jp.prototype,Zp);const ah=Phaser.Utils.Objects.GetValue;class OC extends to{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.isRunning=ah(t,"isRunning",!1),this.timeScale=ah(t,"timeScale",1),this.now=ah(t,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(t){return t===void 0&&(t=0),this.delta=0,this.now=t,super.start(),this}seek(t){return this.now=t,this}setTimeScale(t){return this.timeScale=t,this}tick(t){return t*=this.timeScale,this.now+=t,this.delta=t,this.emit("update",this.now,this.delta),this}}class Jp extends OC{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}update(t,s){return!this.isRunning||this.timeScale===0?this:(this.tick(s),this)}}var Ds=function(i,t){return t===void 0&&(t=.5),i<=t?i=i/t:i=1-(i-t)/(1-t),i};const df=Phaser.Math.Clamp;class bC{constructor(t,s){this.setTimeline(t).reset(s)}setTimeline(t){return this.timeline=t,this}setName(t){return this.name=t,this}setCallbacks(t,s,g,C){return this.target=t,this.onStart=s,this.onProgress=g,this.onComplete=C,this}setDuration(t,s){return s===void 0&&(s=!1),this.duration=t,this.remainder=t,this.t=0,this.yoyo=s,this}setPaused(t){return this.isPaused=t,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(t){return this.removed=t,this}remove(){return this.removed=!0,this}seek(t){return this.remainder=this.duration*(1-t),this}reset(t){return this.setName(t.name).setDuration(t.duration,t.yoyo).setCallbacks(t.target,t.onStart,t.onProgress,t.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var t=1-this.remainder/this.duration;return t=df(t,0,1),this.yoyo&&(t=Ds(t)),t}setProgress(t){t=df(t,0,1),this.remainder=this.duration*(1-t)}runCallback(t){t&&t(this.target,this.t,this)}update(t,s){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=s,this.t=this.getProgress(),this.runCallback(this.onProgress);var g=this.remainder<=0;return g&&this.runCallback(this.onComplete),g}}let FC=class extends Ci{allocate(){return this.pop()}free(t){t.onFree(),this.push(t)}freeMultiple(t){for(var s=0,g=t.length;s<g;s++)this.free(t[s]);return this}};const LC=Phaser.Utils.Objects.GetValue,DC=new FC;class IC extends Jp{constructor(t,s){super(t,s),this.addedTimers=[],this.timers=[],this.timerPool=LC(s,"pool",DC)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(t){var s=this.timerPool.allocate();return s?s.setTimeline(this).reset(t):s=new bC(this,t),this.addedTimers.push(s),s.runCallback(s.onStart),this.isRunning||this.start(),s}delayCall(t,s,g,C){var M=this.addTimer({duration:t,onComplete:function(l,T,e){g===void 0&&(g=[]),g.push(e),s.apply(C,g)}});return M}delayEvent(t,s){this.removeDelayEvent(s);var g=this.delayCall(t,function(){this.removeDelayEvent(s),this.emit(s)},[],this);return this.once(`_remove.${s}`,function(){g.remove(),g=void 0}),this}removeDelayEvent(t){return this.emit(`_remove.${t}`),this}getTimers(t){for(var s=[],g=[this.addedTimers,this.timers],C=0,M=g.length;C<M;C++)for(var l=g[C],T=0,e=l.length;T<e;T++){var d=l[T];d.name===t&&s.push(d)}return s}update(t,s){if(super.update(t,s),!!this.isRunning){this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var g=[],C=0,M=this.timers.length;C<M;C++){var l=this.timers[C],T=l.update(this.now,this.delta);T?this.timerPool.free(l):g.push(l)}this.timers=g,this.timers.length===0&&this.addedTimers.length===0&&this.complete()}}}const BC="_wait.complete",Va="_remove.wait",GC={waitTime(i){var t=this.parent.timeline;return t.delayEvent(i,"delay"),this.parent.once(Va,function(){t.removeDelayEvent("delay")}),this.waitEvent(t,"delay")}};var NC=function(i,t){var s=`(?<!\\\\)\\${t}`,g=`\\${t}`;return i.split(new RegExp(s,"g")).map(function(C){return C.replace(g,t)})};const VC={setClickTarget(i){this.clickTarget=i,i?Fs(i)?this.clickEE=i.input:this.clickEE=i.setInteractive():this.clickEE=null},waitClick(){return this.clickEE?this.waitEvent(this.clickEE,"pointerdown"):this.waitTime(0)},waitKeyDown(i){var t=this.scene.input.keyboard;if(typeof i=="string"){if(i.indexOf("|")===-1)return this.waitEvent(t,`keydown-${i.toUpperCase()}`);for(var s=NC(i,"|"),g=0,C=s.length;g<C;g++)this.waitEvent(t,`keydown-${i.toUpperCase()}`);return this.parent}else return this.waitEvent(t,"keydown")}},kC={waitGameObjectTweenComplete(i,t,s){var g=this.parent.getGameObjectTweenTask(i,t,s);return g?this.waitEvent(g,"complete"):this.waitTime(0)},waitGameObjectDataFlag(i,t,s,g){var C=this.parent.getGameObject(i,t);if(!C)return this.waitTime(0);if(C.getData(s)===g)return this.waitTime(0);var M=`changedata-${s}`,l=function(T,e,d){e=!!e,e===g&&T.emit("_dataFlagMatch")};return C.on(M,l),this.parent.once(Va,function(){C.off(M,l)}),this.waitEvent(C,"_dataFlagMatch")},waitGameObjectDestroy(i,t){var s=this.parent.getGameObject(i,t);return s?this.waitEvent(s,"destroy"):this.waitTime(0)},waitGameObjectManagerEmpty(i){if(i){var t=this.parent.getGameObjectManager(i);return t?this.waitEvent(t,"empty"):this.waitTime(0)}else{var s=this.parent.gameObjectManagers,g=!1;for(var C in s)g=!0,this.waitEvent(s[C],"empty");return g?this.parent:this.waitTime(0)}}},zC={setCameraTarget(i){return this.cameraTarget=i,this},waitCameraEffectComplete(i){var t=this.cameraTarget;if(!t)return this.waitTime(0);var s,g;switch(i){case"camera.fadein":s=t.fadeEffect,g="camerafadeincomplete";break;case"camera.fadeout":s=t.fadeEffect,g="camerafadeoutcomplete";break;case"camera.flash":s=t.flashEffect,g="cameraflashcomplete";break;case"camera.shake":s=t.shakeEffect,g="camerashakecomplete";break;case"camera.zoom":s=t.zoomEffect,g="camerazoomcomplete";break;case"camera.rotate":s=t.rotateToEffect,g="camerarotatecomplete";break;case"camera.scroll":s=t.panEffect,g="camerapancomplete";break}return s.isRunning?this.waitEvent(t,g):this.waitTime(0)}},UC={waitSoundEffectComplete(){if(!this.parent.soundManager)return this.waitTime(0);var i=this.parent.soundManager.getLastSoundEffect();return i?this.waitEvent(i,"complete"):this.waitTime(0)},waitSoundEffect2Complete(){if(!this.parent.soundManager)return this.waitTime(0);var i=this.parent.soundManager.getLastSoundEffect2();return i?this.waitEvent(i,"complete"):this.waitTime(0)},waitBackgroundMusicComplete(){if(!this.parent.soundManager)return this.waitTime(0);var i=this.parent.soundManager.getBackgroundMusic();return i?this.waitEvent(i,"complete"):this.waitTime(0)},waitBackgroundMusic2Complete(){if(!this.parent.soundManager)return this.waitTime(0);var i=this.parent.soundManager.getBackgroundMusic2();return i?this.waitEvent(i,"complete"):this.waitTime(0)}};var YC=function(i){if(!i)return this.waitTime(0);var t=!1;for(var s in i)switch(s){case"time":t=!0,this.waitTime(i.time);break;case"click":t=!0,this.waitClick(i.key);break;case"key":t=!0,this.waitKeyDown(i.key);break;case"bgm":t=!0,this.waitBackgroundMusicComplete();break;case"bgm2":t=!0,this.waitBackgroundMusic2Complete();break;case"se":t=!0,this.waitSoundEffectComplete();break;case"se2":t=!0,this.waitSoundEffect2Complete();break;case"camera":t=!0,this.waitCameraEffectComplete(`camera.${i.camera.toLowerCase()}`);break;default:var g=s.split(".");if(g.length===2){var C=g[0],M=g[1],l=this.parent.getGameObjectManager(void 0,C);if(!l)continue;if(M==="destroy")return this.waitGameObjectDestroy(void 0,C);var T=l.getProperty(C,M);if(typeof T=="number"){t=!0,this.waitGameObjectTweenComplete(void 0,C,M);continue}var e=M,d=e.startsWith("!");d&&(e=e.substring(1)),l.hasData(C,M)&&(t=!0,this.waitGameObjectDataFlag(void 0,C,e,!d))}break}return t||this.waitTime(0),this.parent},XC=function(i,t,s,g,C){var M=yr(i),l=M.time.delayedCall(t,function(){M.sys.events.once("preupdate",function(){s.call(g,C)})});return l};class Qp{constructor(t,s){this.parent=t,this.waitCompleteEventName=kt(s,"completeEventName",BC),this.setClickTarget(kt(s,"clickTarget",this.scene)),this.setCameraTarget(kt(s,"camera",this.scene.cameras.main)),this.waitId=0}get clickTarget(){return this.parent.clickTarget}set clickTarget(t){this.parent.clickTarget=t}get cameraTarget(){return this.parent.cameraTarget}set cameraTarget(t){this.parent.cameraTarget=t}destroy(){this.removeWaitEvents(),this.clearWaitCompleteCallbacks(),this.setClickTarget(),this.setCameraTarget()}get scene(){return this.parent.managersScene}waitEvent(t,s,g){var C=this.getWaitCompleteTriggerCallback(g);return t.once(s,C,this),this.parent.once(Va,function(){t.off(s,C,this)}),this.parent}getWaitCompleteTriggerCallback(t){t===void 0&&(t=!0);var s=this.waitId,g=this,C=function(){s<g.waitId||(g.waitId++,g.removeWaitEvents(),g.parent.emit(g.waitCompleteEventName))};if(t){var M=function(){XC(g.parent,0,C)};return M}else return C}removeWaitEvents(){return this.parent.emit(Va),this}addWaitCompleteCallback(t,s){return this.parent.on(this.waitCompleteEventName,t,s),this}clearWaitCompleteCallbacks(){return this.parent.off(this.waitCompleteEventName),this}}var WC={waitAny:YC};Object.assign(Qp.prototype,GC,VC,kC,zC,UC,WC);const ff=Phaser.Utils.Objects.GetValue;var HC=function(i,t){this.clickTarget=void 0,this.cameraTarget=void 0,this.managersScene=i,this.gameObjectManagers={};var s=ff(t,"layers",!1);s!==!1&&(this.gameObjectManagers.layer=new dC(i,s));var g=ff(t,"sounds");return g!==!1&&(this.soundManager=new jp(i,g)),this.timeline=new IC(this),this.waitEventManager=new Qp(this,t),this},$C=function(i){this.timeline.timeScale=i;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].setTimeScale(i);return this},KC=function(){return this.timeline.timeScale},ZC=function(i){this.waitEventManager.destroy(),this.waitEventManager=void 0;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].destroy(i),delete this.gameObjectManagers[t];this.soundManager&&(this.soundManager.destroy(),this.soundManager=void 0),this.timeline&&(this.timeline.destroy(),this.timeline=void 0),this.clickTarget=void 0,this.cameraTarget=void 0,this.managersScene=void 0};const qp={addGameObjectManager(i,t){i===void 0&&(i={}),t===void 0&&(t=_a),i.createGameObjectScope||(i.createGameObjectScope=this);var s=new t(this.managersScene,i);return this.gameObjectManagers[i.name]=s,this},getGameObjectManager(i,t){if(i){var s=this.gameObjectManagers[i];return s}else for(var i in this.gameObjectManagers){var s=this.gameObjectManagers[i];if(s.has(t))return s}},getGameObjectManagerNames(){var i=[];for(var t in this.gameObjectManagers)i.push(t);return i},getGameObjectManagerName(i){for(var t in this.gameObjectManagers)if(this.gameObjectManagers[t].has(i))return t},hasGameObjectMananger(i){return i in this.gameObjectManagers}},jC={createGameObject(i,t,...s){return this.getGameObjectManager(i,t).add(t,...s),this},destroyGameObject(i,t){var s=this.getGameObjectManager(i,t);return t===void 0?s.removeAll():s.remove(t),this},hasGameObject(i,t){return!!this.getGameObjectManager(i,t)},callGameObjectMethod(i,t,s,...g){return this.getGameObjectManager(i,t).call(t,s,...g),this},setGameObjectProperty(i,t,s,g){return this.getGameObjectManager(i,t).setProperty(t,s,g),this},easeGameObjectProperty(i,t,s,g,C,M,l,T){return this.getGameObjectManager(i,t).easeProperty(t,s,g,C,M,l,T),this},getGameObjectTweenTask(i,t,s){return this.getGameObjectManager(i,t).getTweenTask(t,s)},getGameObject(i,t,s){var g=this.getGameObjectManager(i,t);if(typeof t=="string")return g.getGO(t);var C=t;C===void 0&&(C=g.bobs),s===void 0&&(s={});for(t in C)s[t]=g.getGO(t);return s},addGameObject(i,t,s){var g=this.getGameObjectManager(i,t);if(typeof t=="string")g.addGO(t,s);else{var C=t;for(t in C)g.addGO(t,C[t])}return this},drawGameObjectsBounds(i,t,s){i instanceof Phaser.GameObjects.Graphics&&(s=t,t=i,i=void 0),i===void 0&&(i=this.getGameObjectManagerNames()),Array.isArray(i)||(i=[i]);for(var g=0,C=i.length;g<C;g++)this.getGameObjectManager(i[g]).drawGameObjectsBounds(t,s);return this}};var JC=function(i){class t extends i{}var s={initManagers:HC,setTimeScale:$C,getTimeScale:KC,destroyManagers:ZC};return Object.assign(t.prototype,s,qp,jC),t},QC=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,qC=/^0x[0-9A-F]+$/i,eu=function(i){return typeof i!="string"||(i===""?i=null:QC.test(i)?i=parseFloat(i):qC.test(i)?i=parseInt(i,16):i==="false"?i=!1:i==="true"&&(i=!0)),i};let _p=class{constructor(t){this.setEventEmitter(kt(t,"eventEmitter",void 0)),this.setValueConverter(kt(t,"valueConvert",!0)),this.setLoopEnable(kt(t,"loop",!1)),this.setMultipleLinesTagEnable(kt(t,"multipleLinesTag",!1));var s=kt(t,"delimiters","<>");this.setDelimiters(s[0],s[1]),this.setTranslateTagNameCallback(kt(t,"translateTagNameCallback")),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.justCompleted=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setMultipleLinesTagEnable(t){return t===void 0&&(t=!0),this.multipleLinesTagEnable=t,this}setDelimiters(t,s){s===void 0&&(s=t[1],t=t[0]),this.delimiterLeft=t,this.delimiterRight=s,t=En(this.delimiterLeft),s=En(this.delimiterRight);var g=this.multipleLinesTagEnable?"gs":"gi";return this.reSplit=RegExp(`${t}(.+?)${s}`,g),this}setTranslateTagNameCallback(t){return this.translateTagNameCallback=t,this}setValueConverter(t){return t===!0?t=eu:t||(t=_C),this.valueConverter=t,this}setLoopEnable(t){return t===void 0&&(t=!0),this.loopEnable=t,this}setSource(t){return this.source=t,this}resetIndex(t){return t===void 0&&(t=0),this.progressIndex=t,this.reSplit.lastIndex=t,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this.justCompleted=!1,this.isRunning=!1,this}start(t){return this.setSource(t).restart(),this}restart(){this.resetIndex().next()}next(){if(this.isPaused&&this.onResume(),this.isRunning)return this;if(this.isRunning=!0,this.justCompleted)return this.isRunning=!1,this;this.reSplit.lastIndex===0&&this.onStart();var t=this.source,s=t.length;for(this.reSplit.lastIndex=this.progressIndex;;){var g=this.reSplit.exec(t);if(!g){if(this.progressIndex<s&&(this.onContent(t.substring(this.progressIndex,s)),this.isPaused)){this.progressIndex=s;break}this.onComplete(),this.isRunning=!1;return}var C=this.reSplit.lastIndex,M=C-g[0].length;if(this.progressIndex<M&&(this.onContent(t.substring(this.progressIndex,M)),this.isPaused)){this.progressIndex=M;break}if(this.onTag(g[1]),this.progressIndex=C,this.isPaused)break}return this.isRunning=!1,this}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}pauseUntilEvent(t,s){return this.isPaused?this:(this.pause(),t.once(s,function(){this.next()},this),this)}onContent(t){this.skipEventFlag=!1,this.emit("content",t),this.lastContent=t}onTag(t){}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.justCompleted=!0,this.emit("complete",this),this.loopEnable&&this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}};const _C=function(i){return i};Object.assign(_p.prototype,On);var tS=function(i,t){if(i==null)return[];t===void 0&&(t=eu);for(var s=i.split(","),g=0,C=s.length;g<C;g++)s[g]=t(s[g]);return s};class eS extends _p{constructor(t){t===void 0&&(t={}),t.hasOwnProperty("multipleLinesTag")||(t.multipleLinesTag=!1),super(t),this.setTagExpression(kt(t,"regex.tag",void 0)),this.setValueExpression(kt(t,"regex.value",void 0));var s=kt(t,"delimiters","<>");this.setDelimiters(s[0],s[1])}setTagExpression(t){return t||(t=Jr),this.tagExpression=t,this}setValueExpression(t){return t||(t=Jr),this.valueExpression=t,this}setDelimiters(t,s){super.setDelimiters(t,s);var g=`(${this.tagExpression})(=(${this.valueExpression}))?`;if(this.reTag=RegExp(g,"i"),this.tagExpression!==Jr||this.valueExpression!==Jr){var C=`${this.tagExpression}(=${this.valueExpression})?`,M=`/${this.tagExpression}`;t=En(this.delimiterLeft),s=En(this.delimiterRight);var l=this.multipleLinesTagEnable?"gs":"gi";this.reSplit=RegExp(`${t}((${C})|(${M}))${s}`,l)}return this}onTag(t){var s=t.match(this.reTag),g=s[1],C=g.charAt(0)==="/";if(C&&(g=g.substring(1,g.length)),this.translateTagNameCallback&&(g=this.translateTagNameCallback(g)),this.skipEventFlag=!1,C)this.emit(`-${g}`),this.skipEventFlag||this.emit("-",g),this.lastTagEnd=g;else{var M=tS(s[3],this.valueConverter);this.emit(`+${g}`,...M),this.skipEventFlag||this.emit("+",g,...M),this.lastTagStart=g}}}const Jr="[^=]+";var iS=function(i,t,s){var g="color",C;t.on("start",function(){C=i.textStyle.color}).on(`+${g}`,function(M){i.textStyle.setColor(M),t.skipEvent()}).on(`-${g}`,function(){i.textStyle.setColor(C),t.skipEvent()}).on("complete",function(){i.textStyle.setColor(C)})},sS=function(i,t,s){var g="stroke",C;t.on("start",function(){C=i.textStyle.stroke,i.textStyle.setStrokeStyle(null)}).on(`+${g}`,function(M){M===void 0&&(M=C),i.textStyle.setStrokeStyle(M),t.skipEvent()}).on(`-${g}`,function(){i.textStyle.setStrokeStyle(null),t.skipEvent()}).on("complete",function(){i.textStyle.setStrokeStyle(C)})},nS=function(i,t,s){var g="b";t.on("start",function(){i.textStyle.setBold(!1)}).on(`+${g}`,function(){i.textStyle.setBold(!0),t.skipEvent()}).on(`-${g}`,function(){i.textStyle.setBold(!1),t.skipEvent()})},rS=function(i,t,s){var g="i";t.on("start",function(){i.textStyle.setItalic(!1)}).on(`+${g}`,function(){i.textStyle.setItalic(!0),t.skipEvent()}).on(`-${g}`,function(){i.textStyle.setItalic(!1),t.skipEvent()})},aS=function(i,t,s){var g="size",C;t.on("start",function(){C=i.textStyle.fontSize}).on(`+${g}`,function(M){i.textStyle.setFontSize(M),t.skipEvent()}).on(`-${g}`,function(){i.textStyle.setFontSize(C),t.skipEvent()}).on("complete",function(){i.textStyle.setFontSize(C)})},oS=function(i,t,s){var g="y",C;t.on("start",function(){C=i.textStyle.offsetY,i.textStyle.setOffsetY(0)}).on(`+${g}`,function(M){M===void 0&&(M=C),i.textStyle.setOffsetY(M),t.skipEvent()}).on(`-${g}`,function(){i.textStyle.setOffsetY(0),t.skipEvent()}).on("complete",function(){i.textStyle.setOffsetY(0)})},hS=function(i,t,s){var g="x",C;t.on("start",function(){C=i.textStyle.offsetY,i.textStyle.setOffsetX(0)}).on(`+${g}`,function(M){M===void 0&&(M=C),i.textStyle.setOffsetX(M),t.skipEvent()}).on(`-${g}`,function(){i.textStyle.setOffsetX(0),t.skipEvent()}).on("complete",function(){i.textStyle.setOffsetX(0)})},lS=function(i,t,s){var g="left",C;t.on("start",function(){C=i.textStyle.leftSpace,i.textStyle.setLeftSpace(0)}).on(`+${g}`,function(M){M===void 0&&(M=C),i.textStyle.setLeftSpace(M),t.skipEvent()}).on(`-${g}`,function(){i.textStyle.setLeftSpace(0),t.skipEvent()}).on("complete",function(){i.textStyle.setLeftSpace(0)})},uS=function(i,t,s){var g="right",C;t.on("start",function(){C=i.textStyle.rightSpace,i.textStyle.setRightSpace(0)}).on(`+${g}`,function(M){M===void 0&&(M=C),i.textStyle.setRightSpace(M),t.skipEvent()}).on(`-${g}`,function(){i.textStyle.setRightSpace(0),t.skipEvent()}).on("complete",function(){i.textStyle.setRightSpace(0)})},dS=function(i,t,s){var g="shadow",C;t.on("start",function(){C=i.textStyle.shadowColor,i.textStyle.setShadowColor(null)}).on(`+${g}`,function(M){M===void 0&&(M=C),i.textStyle.setShadowColor(M),t.skipEvent()}).on(`-${g}`,function(){i.textStyle.setShadowColor(null),t.skipEvent()}).on("complete",function(){i.textStyle.setShadowColor(C)})},fS=function(i,t,s){var g="align";t.on(`+${g}`,function(C){i.textStyle.setAlign(C),t.skipEvent()}).on(`-${g}`,function(){i.textStyle.setAlign(),t.skipEvent()}).on("complete",function(){i.textStyle.setAlign()})},cS=function(i,t,s){var g="img";t.on(`+${g}`,function(C){var M=i.imageManager.get(C);Vp.call(i,M.key,M.frame,{width:M.width,hieght:M.height,leftSpace:M.left,rightSpace:M.right}),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()})},vS=function(i,t,s){var g="space";t.on(`+${g}`,function(C){kp.call(i,C),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()})},pS=function(i,t,s){var g="speed";t.on(`+${g}`,function(C){cf(i,C),t.skipEvent()}).on(`-${g}`,function(){cf(i,void 0),t.skipEvent()})},gS=function(i){this.typeWriter.setTypingSpeed(i)},cf=function(i,t){xt.call(i,"speed",gS,t,i)},mS=function(i,t,s){var g="se";t.on(`+${g}`,function(C,M){xt.call(i,g,xS,[C,M],i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()});var g="se2";t.on(`+${g}`,function(C,M){xt.call(i,g,yS,[C,M],i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()})},xS=function(i){if(!this.skipSoundEffect){var t=i[0],s=i[1];this.soundManager.playSoundEffect(t),s&&this.soundManager.fadeInSoundEffect(s)}},yS=function(i){if(!this.skipSoundEffect){var t=i[0],s=i[1];this.soundManager.playSoundEffect2(t),s&&this.soundManager.fadeInSoundEffect2(s)}},TS=function(i,t,s){var g="se.fadein";t.on(`+${g}`,function(C){xt.call(i,g,CS,C,i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()});var g="se2.fadein";t.on(`+${g}`,function(C){xt.call(i,g,SS,C,i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()})},CS=function(i){this.soundManager.fadeInSoundEffect(i)},SS=function(i){this.soundManager.fadeInSoundEffect2(i)},PS=function(i,t,s){var g="se.fadeout";t.on(`+${g}`,function(C,M){M=M==="stop",xt.call(i,g,ES,[C,M],i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()});var g="se2.fadeout";t.on(`+${g}`,function(C,M){M=M==="stop",xt.call(i,g,MS,[C,M],i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()})},ES=function(i){this.soundManager.fadeOutSoundEffect(...i)},MS=function(i){this.soundManager.fadeOutSoundEffect2(...i)},wS=function(i,t,s){var g="se.volume";t.on(`+${g}`,function(C){xt.call(i,g,RS,C,i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()});var g="se2.volume";t.on(`+${g}`,function(C){xt.call(i,g,AS,C,i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()})},RS=function(i){this.soundManager.setSoundEffectVolume(i,!0)},AS=function(i){this.soundManager.setSoundEffectVolume2(i,!0)},OS=function(i,t,s){var g="se.mute";t.on(`+${g}`,function(){xt.call(i,g,bS,void 0,i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()});var g="se2.mute";t.on(`+${g}`,function(){xt.call(i,g,FS,void 0,i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()});var g="se.unmute";t.on(`+${g}`,function(){xt.call(i,g,LS,void 0,i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()});var g="se2.unmute";t.on(`+${g}`,function(){xt.call(i,g,DS,void 0,i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()})},bS=function(){this.soundManager.setSoundEffectMute(!0)},FS=function(){this.soundManager.setSoundEffect2Mute(!0)},LS=function(){this.soundManager.setSoundEffectMute(!1)},DS=function(){this.soundManager.setSoundEffect2Mute(!1)},IS=function(i,t,s){var g="bgm";t.on(`+${g}`,function(C,M){xt.call(i,g,BS,[C,M],i),t.skipEvent()}).on(`-${g}`,function(){xt.call(i,"bgm.stop",GS,void 0,i),t.skipEvent()});var g="bgm2";t.on(`+${g}`,function(C,M){xt.call(i,g,NS,[C,M],i),t.skipEvent()}).on(`-${g}`,function(){xt.call(i,"bgm2.stop",VS,void 0,i),t.skipEvent()})},BS=function(i){var t=i[0],s=i[1];this.soundManager.playBackgroundMusic(t),s&&this.soundManager.fadeInBackgroundMusic(s)},GS=function(){this.soundManager.stopBackgroundMusic()},NS=function(i){var t=i[0],s=i[1];this.soundManager.playBackgroundMusic2(t),s&&this.soundManager.fadeInBackgroundMusic2(s)},VS=function(){this.soundManager.stopBackgroundMusic2()},kS=function(i,t,s){var g="bgm.fadein";t.on(`+${g}`,function(C){xt.call(i,g,zS,C,i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()});var g="bgm2.fadein";t.on(`+${g}`,function(C){xt.call(i,g,US,C,i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()})},zS=function(i){this.soundManager.fadeInBackgroundMusic(i)},US=function(i){this.soundManager.fadeInBackgroundMusic2(i)},YS=function(i,t,s){var g="bgm.fadeout";t.on(`+${g}`,function(C,M){M=M==="stop",xt.call(i,g,XS,[C,M],i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()});var g="bgm2.fadeout";t.on(`+${g}`,function(C,M){M=M==="stop",xt.call(i,g,WS,[C,M],i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()})},XS=function(i){this.soundManager.fadeOutBackgroundMusic(...i)},WS=function(i){this.soundManager.fadeOutBackgroundMusic2(...i)},HS=function(i,t,s){var g="bgm.cross";t.on(`+${g}`,function(C,M){xt.call(i,g,$S,[C,M],i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()});var g="bgm2.cross";t.on(`+${g}`,function(C,M){xt.call(i,g,KS,[C,M],i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()})},$S=function(i){this.soundManager.crossFadeBackgroundMusic(...i)},KS=function(i){this.soundManager.crossFadeBackgroundMusic2(...i)},ZS=function(i,t,s){var g="bgm.pause";t.on(`+${g}`,function(){xt.call(i,g,jS,void 0,i),t.skipEvent()}).on(`-${g}`,function(){xt.call(i,"bgm.resume",JS,void 0,i),t.skipEvent()});var g="bgm2.pause";t.on(`+${g}`,function(){xt.call(i,g,QS,void 0,i),t.skipEvent()}).on(`-${g}`,function(){xt.call(i,"bgm2.resume",qS,void 0,i),t.skipEvent()})},jS=function(){this.soundManager.pauseBackgroundMusic()},JS=function(){this.soundManager.resumeBackgroundMusic()},QS=function(){this.soundManager.pauseBackgroundMusic2()},qS=function(){this.soundManager.resumeBackgroundMusic2()},_S=function(i,t,s){var g="bgm.volume";t.on(`+${g}`,function(C){xt.call(i,g,t2,C,i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()});var g="bgm2.volume";t.on(`+${g}`,function(C){xt.call(i,g,e2,C,i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()})},t2=function(i){this.soundManager.setBackgroundMusicVolume(i)},e2=function(i){this.soundManager.setBackgroundMusicVolume2(i)},i2=function(i,t,s){var g="bgm.mute";t.on(`+${g}`,function(){xt.call(i,g,s2,void 0,i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()});var g="bgm2.mute";t.on(`+${g}`,function(){xt.call(i,g,n2,void 0,i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()});var g="bgm.unmute";t.on(`+${g}`,function(){xt.call(i,g,r2,void 0,i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()});var g="bgm2.unmute";t.on(`+${g}`,function(){xt.call(i,g,a2,void 0,i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()})},s2=function(){this.soundManager.setBackgroundMusicMute(!0)},n2=function(){this.soundManager.setBackgroundMusic2Mute(!0)},r2=function(){this.soundManager.setBackgroundMusicMute(!1)},a2=function(){this.soundManager.setBackgroundMusic2Mute(!1)},o2=function(i,t,s){var g="camera.fadein";t.on(`+${g}`,function(C,M,l,T){xt.call(i,g,h2,[C,M,l,T],i),t.skipEvent()})},h2=function(i){this.cameraTarget.fadeIn(...i)},l2=function(i,t,s){var g="camera.fadeout";t.on(`+${g}`,function(C,M,l,T){xt.call(i,g,u2,[C,M,l,T],i),t.skipEvent()})},u2=function(i){this.cameraTarget.fadeOut(...i)},d2=function(i,t,s){var g="camera.shake";t.on(`+${g}`,function(C,M){xt.call(i,g,f2,[C,M],i),t.skipEvent()})},f2=function(i){this.cameraTarget.shake(...i)},c2=function(i,t,s){var g="camera.flash";t.on(`+${g}`,function(C,M,l,T){xt.call(i,g,v2,[C,M,l,T],i),t.skipEvent()})},v2=function(i){this.cameraTarget.flash(...i)},p2=function(i,t,s){var g="camera.zoom";t.on(`+${g}`,function(C){xt.call(i,g,g2,C,i),t.skipEvent()}).on(`+${g}.to`,function(C,M,l){xt.call(i,"camera.zoom.to",m2,[C,M,l],i),t.skipEvent()})},g2=function(i){this.cameraTarget.setZoom(i)},m2=function(i){this.cameraTarget.zoomTo(...i)};const vf=Phaser.Math.DegToRad;var x2=function(i,t,s){var g="camera.rotate";t.on(`+${g}`,function(C){C=vf(C),xt.call(i,g,y2,C,i),t.skipEvent()}).on(`+${g}.to`,function(C,M,l){C=vf(C),xt.call(i,"camera.rotate.to",T2,[C,M,l],i),t.skipEvent()})},y2=function(i){this.cameraTarget.setRotation(i)},T2=function(i){var t=i[0],s=i[1],g=i[2];this.cameraTarget.rotateTo(t,!1,s,g)},C2=function(i,t,s){var g="camera.scroll";t.on(`+${g}`,function(C,M){xt.call(i,g,S2,[C,M],i),t.skipEvent()}).on(`+${g}.to`,function(C,M,l,T){xt.call(i,"camera.scroll.to",P2,[C,M,l,T],i),t.skipEvent()})},S2=function(i){this.cameraTarget.setScroll(...i)},P2=function(i){var t=i[0],s=i[1],g=i[2],C=i[3],M=this.cameraTarget,l=M.scrollX,T=M.scrollY;M.setScroll(t,s),t+=M.centerX,s+=M.centerY,M.setScroll(l,T),M.pan(t,s,g,C)},E2=function(i,t,s){var g="wait",C="click";t.on(`+${g}`,function(M){pf(i,M),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()}).on(`+${C}`,function(){pf(i,"click"),t.skipEvent()}).on(`-${C}`,function(){t.skipEvent()})},M2=function(i){this.typeWriter.wait(i)},pf=function(i,t){xt.call(i,"wait",M2,t,i)},w2=function(i,t,s){var g="r";t.on(`+${g}`,function(){xr.call(i,`
`),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()})},R2=function(i,t,s){for(var g=["pagebreak","pb"],C=0,M=g.length;C<M;C++){var l=g[C];t.on(`+${l}`,function(){xr.call(i,"\f"),t.skipEvent()}).on(`-${l}`,function(){t.skipEvent()})}},A2=function(i,t,s){var g="content.off";t.on(`+${g}`,function(){t.setContentOutputEnable(!1),t.skipEvent()})},O2=function(i,t,s){var g="content.on";t.on(`+${g}`,function(){t.setContentOutputEnable(),t.skipEvent()})},b2=function(i,t,s){t.on("content",function(g){if(t.contentOutputEnable)xr.call(i,g);else{var C=`+${t.lastTagStart}`;i.emit(`parser.${C}#content`,t,g)}})},F2=function(i,t,s){t.on("start",function(){i.emit("parser.start",t)}).on("+",function(g,...C){if(!t.skipEventFlag){var M=`+${g}`,l=C;i.emit(`parser.${M}`,t,...C,l),gf(i,M,l)}}).on("-",function(g){if(!t.skipEventFlag){var C=`-${g}`,M=[];i.emit(`parser.${C}`,t,M),gf(i,C,M)}}).on("complete",function(){i.emit("parser.complete",t)})},L2=function(i,t){var s=`tag.${t}`;i==null?this.emit(s):this.emit(s,...i)},gf=function(i,t,s){xt.call(i,t,L2,s,i)};const mf=[iS,sS,nS,rS,aS,dS,fS,oS,hS,lS,uS,cS,vS,pS,mS,TS,PS,wS,OS,IS,kS,YS,HS,ZS,_S,i2,o2,l2,d2,c2,p2,x2,C2,E2,w2,R2,A2,O2,b2,F2];var D2=function(i,t,s){for(var g=0,C=mf.length;g<C;g++)mf[g](i,t,s)},I2=function(i,t){for(var s=i.commentLineStart,g=t.split(`
`),C=0,M=g.length;C<M;C++){var l=g[C];l===""||(l.trim().length===0||s&&l.startsWith(s))&&(g[C]="")}return g.join("")};const B2=Phaser.Utils.Objects.GetValue;class G2 extends eS{constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("delimiters")||(s.delimiters="[]"),super(s),D2(t,this,s),this.setCommentLineStartSymbol(B2(s,"comment","//")),this.setContentOutputEnable()}setCommentLineStartSymbol(t){return this.commentLineStart=t,this}setContentOutputEnable(t){return t===void 0&&(t=!0),this.contentOutputEnable=t,this}start(t){return super.start(I2(this,t)),this}}const N2={setDefaultTypingSpeed(i){return this.defaultSpeed=i,this},setTypingSpeed(i){return i===void 0&&(i=this.defaultSpeed),this.speed=i,this}},As="page.fadeout",El="_remove.play",xf=[As,El];var V2=function(){if(!this.fadeOutPageCallback||!this.children)return this.emit(As),this;var i=this.children.filter(function(g){return g.renderable}),t=this.fadeOutPageCallback(i,this.fadeOutPageDuration);if(!t)this.emit(As);else if(t.once)t.once("complete",function(){this.emit(As)},this);else if(t.then){var s=this;t.then(function(){s.emit(As)})}else this.emit(As);return this},io=function(i,t){return new Promise(function(s,g){i.once(t,function(){s()})})},fe=function(i){return io(i,"complete")},k2=function(i){return this.children=i,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(i),this.typing(),fe(this)};const z2="delay",tg="anim";var eg=function(i){i===void 0&&(i=0);var t=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var s=this.getNextChild();if(!s){this.timeline.isRunning?this.timeline.once("complete",function(){this.isPageTyping=!1,this.emit("complete")},this):(this.isPageTyping=!1,this.emit("complete"));break}if(s.renderable){var g=this.animationConfig;if(g.duration>0){var C=this.timeline.addTimer({name:tg,target:s,duration:g.duration,yoyo:g.yoyo,onStart:g.onStart,onProgress:g.onProgress,onComplete:g.onComplete});this.skipTypingAnimation&&C.seek(1)}else g.onStart&&g.onStart(s,0);this.minSizeEnable&&this.textPlayer.setToMinSize(),this.textPlayer.emit("typing",s);var M=this.nextChild;if(M&&!(this.skipSpaceEnable&&M1(M))){if(t+=this.speed+i,i=0,t>0){this.typingTimer=this.timeline.addTimer({name:z2,target:this,duration:t,onComplete:function(l,T,e){l.typingTimer=void 0,eg.call(l,e.remainder)}});break}}}else w1(s)&&s.exec()}this.minSizeEnable&&this.textPlayer.setToMinSize(),this.inTypingProcessLoop=!1},U2=function(){return this.timeline.pause(),this},Y2=function(){return this.timeline.resume(),this},X2=function(){return this.isTypingPaused?this:(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0),this)},W2=function(i){return this.isTypingPaused?(i===void 0&&(i=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=i):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(i)),this):this},H2=function(i){switch(i){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},$2=function(i,t){var s=t.split(".");return i.gameObjectManagers.hasOwnProperty(s[0])},K2=function(i,t,s,g){var C=i.waitEventManager,M=t.split("."),l=M[0],T=i.getGameObjectManager(l),e=`wait.${l}`;switch(M.length){case 1:C.waitGameObjectManagerEmpty(l),i.emit(e);return;case 2:var d=M[1];C.waitGameObjectDestroy(l,d),i.emit(e,d);return;case 3:var d=M[1],x=M[2],u=T.getProperty(d,x);if(typeof u=="number"){C.waitGameObjectTweenComplete(l,d,x),i.emit(e,d,x);return}var h=x,o=h.startsWith("!");if(o&&(h=h.substring(1)),T.hasData(d,h)){C.waitGameObjectDataFlag(l,d,h,!o),i.emit(e,d,h);return}else{C.waitTime(0);return}}};const Z2=Phaser.Input.Keyboard.KeyCodes;var ig=function(i,t,s,g){var C=i.waitEventManager;C.clearWaitCompleteCallbacks().addWaitCompleteCallback(s,g),typeof t=="string"&&t.length>1&&t.indexOf("|")!==-1?t=t.split("|"):t=[t];for(var M=0,l=t.length;M<l;M++){var T=t[M];if(T==null||T==="wait"){var e=i.waitEventManager.getWaitCompleteTriggerCallback();i.emit("wait",e)}else if(typeof T=="number"||!isNaN(T)){var d=parseFloat(T);C.waitTime(d),i.emit("wait.time",d)}else if(T==="click")C.waitClick(),i.emit("wait.click");else if(T==="se"){C.waitSoundEffectComplete();var x=i.soundManager.getLastSoundEffect();i.emit("wait.music",x)}else if(T==="se2"){C.waitSoundEffect2Complete();var x=i.soundManager.getLastSoundEffect2();i.emit("wait.music",x)}else if(T==="bgm"){C.waitBackgroundMusicComplete();var x=i.soundManager.getBackgroundMusic();i.emit("wait.music",x)}else if(T==="bgm2"){C.waitBackgroundMusic2Complete();var x=i.soundManager.getBackgroundMusic2();i.emit("wait.music",x)}else if(Z2.hasOwnProperty(T.toUpperCase()))C.waitKeyDown(T),i.emit("wait.keydown",T);else if(H2(T))C.waitCameraEffectComplete(T),i.emit("wait.camera",T);else if($2(i,T))K2(i,T);else{var e=i.waitEventManager.getWaitCompleteTriggerCallback();i.emit(`wait.${T}`,e)}}},j2=function(i){return this.ignoreWait?this:(this.pauseTyping(),ig(this.textPlayer,i,this.resumeTyping,this),this)},J2=function(i){return i===void 0&&(i=!0),this.ignoreWait=i,this},Q2=function(i){return i===void 0&&(i=!0),this.skipSpaceEnable=i,this},q2=function(i){if(i===void 0&&(i=!0),this.skipTypingAnimation=i,i)for(var t=this.timeline.getTimers(tg),s=0,g=t.length;s<g;s++)t[s].seek(1);return this},_2=function(i){if(i===void 0&&(i=!0),this.skipSoundEffect=i,i){var t=this.textPlayer._soundManager;t&&t.fadeOutAllSoundEffects(100,!0)}return this},tP=function(){return this.typingTimer&&this.typingTimer.seek(1),this},sg={fadeOutPage:V2,start:k2,typing:eg,pause:U2,resume:Y2,pauseTyping:X2,resumeTyping:W2,wait:j2,setIgnoreWait:J2,setSkipSpaceEnable:Q2,setSkipTypingAnimation:q2,setSkipSoundEffect:_2,skipCurrentTypingDelay:tP};Object.assign(sg,N2);const js=Phaser.Utils.Objects.GetValue;class ng{constructor(t,s){this.setEventEmitter(),this.textPlayer=t,this.isPageTyping=!1,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback(js(s,"onTypingStart",iP)),this.setDefaultTypingSpeed(js(s,"speed",250)),this.setTypingSpeed(),this.setSkipSpaceEnable(js(s,"skipSpace",!1)),this.setAnimationConfig(js(s,"animation",void 0)),this.setMinSizeEnable(js(s,"minSizeEnable",!1)),this.setFadeOutPageCallback(js(s,"fadeOutPage"))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}get timeline(){return this.textPlayer.timeline}setTypingStartCallback(t){return this.onTypeStart=t,this}setAnimationConfig(t){return t||(t={}),t.hasOwnProperty("duration")||(t.duration=0),t.hasOwnProperty("onStart")||(t.onStart=eP),this.animationConfig=t,this}setFadeOutPageCallback(t){return this.fadeOutPageCallback=t,this}setMinSizeEnable(t){return t===void 0&&(t=!0),this.minSizeEnable=t,this}getNextChild(){var t=this.nextChild;return this.index=Math.min(this.index+1,this.children.length),this._nextChild=void 0,t}get nextChild(){return this._nextChild||(this._nextChild=this.children[this.index]),this._nextChild}}var eP=function(i){i.setVisible&&i.setVisible()},iP=function(i){for(var t=0,s=i.length;t<s;t++){var g=i[t];g.setVisible&&g.setVisible(!1)}};Object.assign(ng.prototype,On,sg);class sP extends Ql{playAnimation(t){return this.gameObject.anims.timeScale=this.timeScale,this.gameObject.play(t),this}stopAnimation(){return this.gameObject.stop(),this}chainAnimation(t){return this.gameObject.chain(t),this}pauseAnimation(){return this.gameObject.anims.pause(),this}setTimeScale(t){return super.setTimeScale(t),this.gameObject.anims&&(this.gameObject.anims.timeScale=t),this}}const nP={playAnimation(i,t){return this.has(i)||this.add(i),this.get(i).playAnimation(t),this},stopAnimation(i){return this.has(i)?(this.get(i).stopAnimation(),this):this},chainAnimation(i,t){return this.has(i)?(this.get(i).chainAnimation(t),this):this},pauseAnimation(i){return this.has(i)?(this.get(i).pauseAnimation(),this):this}};var rg={};Object.assign(rg,nP);class ag extends _a{constructor(t,s){s===void 0&&(s={}),s.BobClass=sP,super(t,s)}setCreateGameObjectCallback(t,s){return!t||t==="sprite"?t=rP:t==="image"&&(t=aP),super.setCreateGameObjectCallback(t,s),this}}var rP=function(i,t,s){return typeof s!="string"&&typeof s!="number"&&(s=void 0),i.add.sprite(0,0,t,s)},aP=function(i,t,s){return typeof s!="string"&&typeof s!="number"&&(s=void 0),i.add.image(0,0,t,s)};Object.assign(ag.prototype,rg);var yf=function(i,t){return i.length===3&&i[0]===t&&i[2]==="play"},oP=function(i,t){return i.length===3&&i[0]===t&&i[2]==="stop"},hP=function(i,t,s){var g=s.name;t.on("+",function(C,...M){if(!t.skipEventFlag){var l=C.split("."),T;if(yf(l,g))T=l[1];else return;xt.call(i,`${g}.play`,lP,[g,T,M],i),t.skipEvent()}}).on("+",function(C){if(!t.skipEventFlag){var M=C.split("."),l;if(oP(M,g))l=M[1];else return;xt.call(i,`${g}.stop`,Tf,[g,l],i),t.skipEvent()}}).on("-",function(C){if(!t.skipEventFlag){var M=C.split("."),l;if(yf(M,g))l=M[1];else return;xt.call(i,`${g}.stop`,Tf,[g,l],i),t.skipEvent()}})},lP=function(i){var t,s,g;[t,s,g]=i;var C=g.shift(),M=this.getGameObjectManager(t);M.playAnimation(s,C),g.length>0&&M.chainAnimation(s,g)},Tf=function(i){var t,s;[t,...s]=i;var g=this.getGameObjectManager(t);g.stopAnimation(...s)},uP=function(i,t){return i.length===3&&i[0]===t&&i[2]==="pause"},dP=function(i,t,s){var g=s.name;t.on("+",function(C){if(!t.skipEventFlag){var M=C.split("."),l;if(uP(M,g))l=M[1];else return;xt.call(i,`${g}.pause`,fP,[g,l],i),t.skipEvent()}})},fP=function(i){var t,s;[t,...s]=i;var g=this.getGameObjectManager(t);g.pauseAnimation(...s)},cP=function(i,t){return i.length===3&&i[0]===t&&i[2]==="chain"},vP=function(i,t,s){var g=s.name;t.on("+",function(C){if(!t.skipEventFlag){var M=C.split("."),l;if(cP(M,g))l=M[1];else return;var T=Array.prototype.slice.call(arguments,1);xt.call(i,`${g}.chain`,pP,[g,l,T],i),t.skipEvent()}})},pP=function(i){var t,s;[t,...s]=i;var g=this.getGameObjectManager(t);g.chainAnimation(...s)};const gP=[hP,dP,vP];var mP=function(i){i===void 0&&(i={}),i.name="sprite",i.parseCallbacks=gP,this.addGameObjectManager(i,ag)},Cf=function(i,t){return i.length===2&&i[0]===t},xP=function(i,t,s){var g=s.name;t.on("+",function(C,...M){if(!t.skipEventFlag){var l=C.split("."),T;if(Cf(l,g))T=l[1];else return;xt.call(i,`${g}.add`,yP,[g,T,...M],i),t.skipEvent()}}).on("-",function(C){if(!t.skipEventFlag){var M=C.split("."),l;if(Cf(M,g))l=M[1];else return;xt.call(i,`${g}.remove`,TP,[g,l],i),t.skipEvent()}})},yP=function(i){var t,s;[t,...s]=i;var g=this.getGameObjectManager(t);g.add(...s)},TP=function(i){var t,s;[t,...s]=i;var g=this.getGameObjectManager(t);g.remove(...s)},CP=function(i,t,s){var g=s.name;t.on("-",function(C){t.skipEventFlag||C===g&&(xt.call(i,`${g}.removeall`,SP,g,i),t.skipEvent())})},SP=function(i){var t=this.getGameObjectManager(i);t.removeAll()},PP=function(i,t){return i.length===3&&i[0]===t},EP=function(i,t,s){var g=s.name;t.on("+",function(C,...M){if(!t.skipEventFlag){var l=C.split("."),T,e;if(PP(l,g))T=l[1],e=l[2];else return;xt.call(i,`${g}.call`,MP,[g,T,e,...M],i),t.skipEvent()}})},MP=function(i){var t,s,g,C;[t,s,g,...C]=i;var M=`${t}.${g}`;if(this.emit(M,s,...C),!(this.listenerCount(M)>0)){var l=this.getGameObjectManager(t);l.hasMethod(s,g)?l.call(s,g,...C):l.setProperty(s,g,C[0])}},wP={to:!0,yoyo:!0,from:!0,toLeft:!0,toRight:!0,toUp:!0,toDown:!0,yoyoLeft:!0,yoyoRight:!0,yoyoUp:!0,yoyoDown:!0,fromLeft:!0,fromRight:!0,fromUp:!0,fromDown:!0},RP=function(i,t){return i.length===4&&i[0]===t&&wP[i[3]]},AP=function(i,t,s){var g=s.name;i.getGameObjectManager(g),t.on("+",function(C,M,l,T,e){if(!t.skipEventFlag){var d=C.split("."),x,u,h;if(RP(d,g))x=d[1],u=d[2],h=d[3];else return;typeof T=="number"&&(e=T,T=void 0),xt.call(i,`${g}.ease`,OP,[g,x,u,M,l,T,e,h],i),t.skipEvent()}})},OP=function(i){var t,s,g,C,M,l,T,e;[t,s,g,C,M,l,T,e]=i;var d=this.getGameObjectManager(t),x=d.getProperty(s,g);if(typeof x=="number"){e.endsWith("Left")||e.endsWith("Up")?e.startsWith("to")||e.startsWith("yoyo")?C=x-C:e.startsWith("from")&&(d.setProperty(s,g,x-C),C=x):e.endsWith("Right")||e.endsWith("Down")?e.startsWith("to")||e.startsWith("yoyo")?C=x+C:e.startsWith("from")&&(d.setProperty(s,g,x+C),C=x):e==="from"&&(d.setProperty(s,g,C),C=x);var u=e.startsWith("yoyo");d.easeProperty(s,g,C,M,l,T,u)}};const Sf=[xP,CP,EP,AP],bP=qp.addGameObjectManager,FP={addGameObjectManager(i,t){i===void 0&&(i={});var s=i.name;s||console.warn("Parameter 'name' is required in TextPlayer.addGameObjectManager(config) method"),bP.call(this,i,t);var g=i.parseCallbacks;g?g=[...g,...Sf]:g=Sf;for(var C=0,M=g.length;C<M;C++)g[C](this,this.parser,i);return this}};var LP=function(i){return this.waitEventManager.setClickTarget(i),this},DP=function(i){return this.waitEventManager.setCameraTarget(i),this},IP=function(i){var t=this;i?typeof i=="function"?this.nextPageInput=function(s,g){var C=t.waitEventManager;C.clearWaitCompleteCallbacks().addWaitCompleteCallback(s,g);var M=C.getWaitCompleteTriggerCallback();i.call(t,M)}:this.nextPageInput=function(s,g){ig(t,i,s,g)}:this.nextPageInput=null},BP=function(i,t){return this.imageManager.add(i,t),this};const GP={play(i){return this.isPlaying?this:(this.removeChildren(),this.parser.start(i),this.isPlaying=!0,this.once("complete",function(){this.isPlaying=!1},this),this.lastWrapResult=void 0,this.typingNextPage(),this)},playPromise(i){var t=fe(this);return this.play(i),t}};var Ml=function(){return!this.isPlaying||this.isPageTyping?this:(this.typeWriter.once(As,NP,this).fadeOutPage(),this)},NP=function(){var i=this.runWrap(this.lastWrapResult);this.lastWrapResult=i,this.emit("page.start");var t=function(){this.emit(El),i.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.ignoreNextPageInput?Ml.call(this):this.nextPageInput&&this.nextPageInput(Ml,this))};this.once(El,function(){this.typeWriter.off("complete",t,this)},this),this.typeWriter.once("complete",t,this).start(i.children)};const VP={pause(){return this.timeline.pause(),this},pauseTyping(){return this.typeWriter.pauseTyping(),this}},kP={resume(){return this.timeline.resume(),this},resumeTyping(i){return this.typeWriter.resumeTyping(i),this}};var zP=function(i){return this.typeWriter.wait(i),this};const UP={setDefaultTypingSpeed(i){return this.defaultTypingSpeed=i,this},setTypingSpeed(i){return this.typingSpeed=i,this}};var YP=function(i){return this.typeWriter.setIgnoreWait(i),this},XP=function(i){return i===void 0&&(i=!0),this.ignoreNextPageInput=i,this},WP=function(){if(!this.isPlaying||!this.isPageTyping)return this;var i=this.typeWriter.speed,t=this.typeWriter.ignoreWait,s=this.typeWriter.skipTypingAnimation,g=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",function(){this.typeWriter.setTypingSpeed(i).setIgnoreWait(t).setSkipTypingAnimation(s).setSkipSoundEffect(g)},this).setTypingSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this};const HP={getSprite(i){return this.getGameObject("sprite",i)},addSprite(i,t){return this.addGameObject("sprite",i,t),this}},$P={setContentOutputEnable(i){return this.parser.setContentOutputEnable(i),this},setContentCallback(i,t){return this.contentCallback=i,this.contentCallbackScope=t,this}};var og={setClickTarget:LP,setCameraTarget:DP,setNextPageInput:IP,addImage:BP,typingNextPage:Ml,wait:zP,setIgnoreWait:YP,setIgnoreNextPageInput:XP,showPage:WP};Object.assign(og,FP,GP,VP,kP,UP,HP,$P);var KP=function(i){for(var t=0,s=xf.length;t<s;t++)i.emit(xf[t])};const Pf=Phaser.Utils.Objects.IsPlainObject,Js=Phaser.Utils.Objects.GetValue;class iu extends JC(An){constructor(t,s,g,C,M,l){Pf(s)?l=s:Pf(C)&&(l=C),l===void 0&&(l={});var T=l.text;delete l.text,super(t,s,g,C,M,l),this.type="rexTextPlayer",this.initManagers(t,l),this.parser=new G2(this,Js(l,"parser",void 0)),this.typeWriter=new ng(this,Js(l,"typing",void 0)),this._imageManager=void 0;var e=Js(l,"images",void 0);e&&this.addImage(e);var d=Js(l,"sprites");d!==!1&&d!==null&&mP.call(this,d),this.setIgnoreNextPageInput(Js(l,"ignoreNextPageInput",!1)),this.setNextPageInput(Js(l,"nextPageInput",null)),this.isPlaying=!1,T&&this.play(T)}get imageManager(){return this._imageManager===void 0&&(this._imageManager=new Hl(this.scene)),this._imageManager}get spriteManager(){return this.getGameObjectManager("sprite")}destroy(t){!this.scene||this.ignoreDestroy||(KP(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(t),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(t),this._imageManager=void 0,this.destroyManagers(t),super.destroy(t))}get isPageTyping(){return this.typeWriter.isPageTyping}set defaultTypingSpeed(t){this.typeWriter.setDefaultTypingSpeed(t)}get defaultTypingSpeed(){return this.typeWriter.defaultTypingSpeed}set typingSpeed(t){this.typeWriter.setTypingSpeed(t)}get typingSpeed(){return this.typeWriter.speed}set timeScale(t){this.setTimeScale(t)}get timeScale(){return this.getTimeScale()}}Object.assign(iu.prototype,og);ht.register("textPlayer",function(i,t,s,g,C){var M=new iu(this.scene,i,t,s,g,C);return this.scene.add.existing(M),M});ot(window,"RexPlugins.UI.TextPlayer",iu);const hg={maxLength:["maxLength",void 0],minLength:["minLength",void 0],readOnly:["readOnly",!1]},lg={direction:["direction",void 0]};var Ji=function(i,t,s){if(typeof s=="string")i.hasOwnProperty(s)&&(t[s]=i[s]);else{var g=s;if(Array.isArray(g))for(var C=0,M=g.length;C<M;C++)Ji(i,t,g[C]);else for(var s in g)Ji(i,t,s)}},ZP=function(i){i===void 0&&(i={});var t={};return Ji(i,t,"inputType"),Ji(i,t,"type"),Ji(i,t,"style"),Ji(i,t,lg),Ji(i,t,hg),t},su=function(i,t,s,g){if(t)return!(s&&!s(i,t)||!Ef(i,t)||g&&!g(i,t));for(var C=i.scene.input.manager,M=C.pointersTotal,l=C.pointers,t,T=0;T<M;T++)if(t=l[T],!(s&&!s(i,t))&&Ef(i,t)&&!(g&&!g(i,t)))return!0;return!1},Ef=function(i,t){for(var s=i.scene,g=s.input.cameras.getCamerasBelowPointer(t),C=s.input.manager,M=[i],l,T=0,e=g.length;T<e;T++)if(l=C.hitTest(t,M,g[T]),l.length>0)return!0;return!1},yn=void 0,jP=function(i){i!==yn&&(yn!==void 0&&yn.close(),yn=i)},JP=function(i){i===yn&&(yn=void 0)};const QP=Phaser.Utils.Objects.GetValue;var ka=function(i,t,s){s===void 0&&(s={});var g,C;for(var M in i)g=i[M],C=QP(t,M,g[1]),C!==void 0&&(s[g[0]]=C);return s},ug=function(i){i.addEventListener("touchstart",Qs,!1),i.addEventListener("touchmove",Qs,!1),i.addEventListener("touchend",Qs,!1),i.addEventListener("mousedown",Qs,!1),i.addEventListener("mouseup",Qs,!1),i.addEventListener("mousemove",Qs,!1)},Qs=function(i){i.stopPropagation()};const oh=Phaser.Utils.Objects.GetValue;var qP=function(i,t){var s,g=oh(t,"inputType",void 0);g===void 0&&(g=oh(t,"type","text")),g==="textarea"?(s=document.createElement("textarea"),s.style.resize="none"):(s=document.createElement("input"),s.type=g);var C=oh(t,"style",void 0),M=s.style;ka(lg,C,M),M.position="absolute",M.opacity=0,M.pointerEvents="none",M.zIndex=0,M.transform="scale(0)",ka(hg,t,s),ug(s);var l=i.scene.sys.scale,T=l.isFullscreen?l.fullscreenTarget:document.body;return T.appendChild(s),s},_P=function(){return this.isOpened?this:this.readOnly?this:(jP(this),this.isOpened=!0,this.node||(this.node=qP(this,this.nodeConfig)),this.setFocus(),this.initText(),this.enterCloseEnable&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.scene.sys.events.on("postupdate",this.updateText,this),this.scene.input.on("pointerdown",this.onClickOutside,this),this.onOpenCallback&&this.onOpenCallback(this.parent,this),this.emit("open",this),this)},tE=function(i){if(i){var t=i.parentElement;t&&t.removeChild(i)}},eE=function(){return this.isOpened?(JP(this),this.setBlur(),this.isOpened=!1,this.updateText(),this.scene.sys.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),this.onCloseCallback&&this.onCloseCallback(this.parent,this),tE(this.node),this.node=void 0,this.emit("close",this),this):this},iE={open:_P,close:eE};const Xi=Phaser.Utils.Objects.GetValue;class nu extends he{constructor(t,s){super(t);var g=Xi(s,"inputType",void 0);g===void 0&&(g=Xi(s,"type","text")),this.setEnterCloseEnable(Xi(s,"enterClose",g!=="textarea"));var C=Xi(s,"onOpen",void 0);C||(C=Xi(s,"onFocus",void 0)),this.onOpenCallback=C;var M=Xi(s,"onClose",void 0);M||(M=Xi(s,"onBlur",void 0)),this.onCloseCallback=M,this.onUpdateCallback=Xi(s,"onUpdate",void 0),this.isOpened=!1,t.on("pointerdown",function(){this.open()},this).setInteractive(),this.nodeConfig=ZP(s),this.node=void 0}destroy(){this.close(),super.destroy()}onClickOutside(t){su(this.parent,t)||this.close()}setEnterCloseEnable(t){return t===void 0&&(t=!0),this.enterCloseEnable=t,this}initText(){}updateText(){}get text(){return this.node?this.node.value:""}set text(t){this.node&&(this.node.value=t)}setText(t){return this.text=t,this}get maxLength(){return this.nodeConfig.maxLength}set maxLength(t){this.nodeConfig.maxLength=t,this.node&&(this.node.maxLength=t)}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.nodeConfig.minLength}set minLength(t){this.nodeConfig.minLength=t,this.node&&(this.node.minLength=t)}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node&&(this.node.placeholder=t)}setPlaceholder(t){return this.placeholder=t,this}selectText(t,s){return this.node?(t===void 0?this.node.select():this.node.setSelectionRange(t,s),this):this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node?this.node.selectionStart:0}get selectionEnd(){return this.node?this.node.selectionEnd:0}get selectedText(){if(!this.node)return"";var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node?this.node.selectionStart:0}set cursorPosition(t){this.node&&this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node?this.node.title:""}set tooltip(t){if(!this.node)return this;this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.nodeConfig.readOnly}set readOnly(t){this.nodeConfig.readOnly=t,this.node&&(this.node.readOnly=t)}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node?this.node.spellcheck:""}set spellCheck(t){this.node&&(this.node.spellcheck=t)}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){if(this.node)return this.node.style.color}set fontColor(t){this.node&&(this.node.style.color=t)}setFontColor(t){return this.fontColor=t,this}setStyle(t,s){return this.node?(this.node.style[t]=s,this):this}getStyle(t){if(this.node)return this.node.style[t]}scrollToBottom(){return this.node?(this.node.scrollTop=this.node.scrollHeight,this):this}setEnabled(t){return this.node?(t===void 0&&(t=!0),this.node.disabled=!t,this):this}setBlur(){return this.node?(this.node.blur(),this):this}setFocus(){return this.node?(this.node.focus(),this):this}get isFocused(){return this.isOpened}}Object.assign(nu.prototype,iE);var dg=function(i,t,s){i=i.replace(" ","");var g=s.previousText;if(i===g)return i;if(isNaN(i)){s.emit("nan",i,s),i=g;var C=s.cursorPosition-1;s.setText(i),s.setCursorPosition(C)}else s.previousText=i;return i},sE=function(i){var t=i.parent,s=i.isOpened?i.selectionStart:null,g=i.isOpened?i.selectionEnd:null,C=i.prevSelectionStart,M=i.prevSelectionEnd;if(!(C===s&&M===g)){var l,T;C===null?(l=s,T=g):(l=Math.min(C,s),T=Math.max(M,g));for(var e=l;e<T;e++){var d=C===null?!1:e>=C&&e<M,x=e>=s&&e<g;if(!(d&&x)){var u=t.getCharChild(e);u&&(d?t.emit("cursorout",u,e,t):t.emit("cursorin",u,e,t))}}i.prevSelectionStart=s,i.prevSelectionEnd=g}},nE=function(i){var t=i.parent,s=t.text,g=i.cursorPosition;if(i.prevCursorPosition!==g){if(i.prevCursorPosition!==null&&i.prevCursorPosition>s.length&&(i.prevCursorPosition=null),i.prevCursorPosition!==null){var C=t.getCharChild(i.prevCursorPosition);C&&t.emit("cursorout",C,i.prevCursorPosition,t)}if(g!=null){var C=t.getCharChild(g);C&&t.emit("cursorin",C,g,t)}t.emit("movecursor",g,i.prevCursorPosition,t),i.prevCursorPosition=g}},Mf=function(i){var t=i.prevSelectionStart;if(t!==null){for(var s=i.prevSelectionEnd,g=i.parent,C=t;C<s;C++){var M=g.getCharChild(C);M&&g.emit("cursorout",M,C,g)}i.prevSelectionStart=null,i.prevSelectionEnd=null}},wf=function(i){var t=i.prevCursorPosition;if(t!==null){var s=i.parent,g=s.getCharChild(t);g&&s.emit("cursorout",g,t,s),i.prevCursorPosition=null}};const rE=Phaser.Utils.Objects.GetValue;let aE=class extends nu{constructor(t,s){super(t,s),this.setSelectAllWhenFocusEnable(rE(s,"selectAll",!1)),this.cursorMoveStartIndex=null,this.prevCursorPosition=null,this.prevSelectionStart=null,this.prevSelectionEnd=null,this.firstClickAfterOpen=!1,t.on("pointerdown",function(g,C,M,l){var T=t.getNearestChild(C,M),e=t.getCharIndex(T);(!this.selectAllWhenFocus||!this.firstClickAfterOpen)&&this.setCursorPosition(e),this.cursorMoveStartIndex=e,this.firstClickAfterOpen=!1},this).on("pointermove",function(g,C,M,l){if(g.isDown){var T=t.getNearestChild(C,M),e=t.getCharIndex(T);this.cursorMoveStartIndex<e?this.selectText(this.cursorMoveStartIndex,e+1):this.selectText(e,this.cursorMoveStartIndex+1)}},this),this.on("open",function(){this.selectAllWhenFocus&&this.selectAll(),this.firstClickAfterOpen=!0,t.emit("open")},this).on("close",function(){t.emit("close")},this)}initText(){var t=this.parent;return this.prevCursorPosition=null,this.setText(t.text),this}updateText(){var t=this.parent,s=this.text;if(this.onUpdateCallback){var g=this.onUpdateCallback(s,t,this);g!=null&&(s=g)}return t.text!==s&&(t.setText(s),t.emit("textchange",s,t,this)),this.isOpened?this.selectionStart!==this.selectionEnd?(wf(this),sE(this)):(Mf(this),nE(this)):(Mf(this),wf(this)),this}setNumberInput(){return this.onUpdateCallback=dg,this}setSelectAllWhenFocusEnable(t){return t===void 0&&(t=!0),this.selectAllWhenFocus=t,this}};const oE=Phaser.Utils.Objects.GetValue,hE=["inputType","onOpen","onFocus","onClose","onBlur","onUpdate","enterClose","readOnly","maxLength","minLength","selectAll"];var lE=function(i,t){var s=oE(t,"edit");return s===void 0&&(s={}),Ji(t,s,hE),new aE(i,s)},yi=function(i,t){if(!i||typeof i=="number")return!1;if(i.hasOwnProperty(t))return!0;if(t.indexOf(".")!==-1){for(var s=t.split("."),g=i,C=0;C<s.length;C++)if(g.hasOwnProperty(s[C]))g=g[s[C]];else return!1;return!0}else return!1},uE=function(i){var t=!i.textArea;if(!yi(i,"wrap.vAlign")){var s=t?"center":"top";ot(i,"wrap.vAlign",s)}if(yi(i,"wrap.charWrap")||ot(i,"wrap.charWrap",!0),!yi(i,"wrap.maxLines")){var s=t?1:void 0;ot(i,"wrap.maxLines",s)}if(yi(i,"wrap.useDefaultTextHeight")||ot(i,"wrap.useDefaultTextHeight",!0),i.edit||(i.edit={}),!yi(i.edit,"inputType")){var s=t?"text":"textarea";ot(i.edit,"inputType",s)}return i},dE=function(i){ql(i)||this.setCursorStyle(i).on("cursorin",function(t){var s=this.cursorStyle,g=zl(t.style,s);Ul(s,g)||(t.styleSave=g,t.modifyStyle(s))},this).on("cursorout",function(t){t.styleSave&&(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},fE=function(i){ql(i)||this.setFocusStyle(i).on("open",function(){var t=this.background,s=this.focusStyle,g=zl(t,s);Ul(s,g)||(t.styleSave=g,t.modifyStyle(s))},this).on("close",function(){var t=this.background;t.styleSave&&(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},cE=function(i){var t=i.createCharChild("|");return t.text="",Fp.call(i,t),t};function Ni(){}Ni.prototype={diff(i,t,s={}){let g=s.callback;typeof s=="function"&&(g=s,s={}),this.options=s;let C=this;function M(o){return g?(setTimeout(function(){g(void 0,o)},0),!0):o}i=this.castInput(i),t=this.castInput(t),i=this.removeEmpty(this.tokenize(i)),t=this.removeEmpty(this.tokenize(t));let l=t.length,T=i.length,e=1,d=l+T;s.maxEditLength&&(d=Math.min(d,s.maxEditLength));let x=[{newPos:-1,components:[]}],u=this.extractCommon(x[0],t,i,0);if(x[0].newPos+1>=l&&u+1>=T)return M([{value:this.join(t),count:t.length}]);function h(){for(let o=-1*e;o<=e;o+=2){let n,r=x[o-1],f=x[o+1],a=(f?f.newPos:0)-o;r&&(x[o-1]=void 0);let c=r&&r.newPos+1<l,p=f&&0<=a&&a<T;if(!c&&!p){x[o]=void 0;continue}if(!c||p&&r.newPos<f.newPos?(n=pE(f),C.pushComponent(n.components,void 0,!0)):(n=r,n.newPos++,C.pushComponent(n.components,!0,void 0)),a=C.extractCommon(n,t,i,o),n.newPos+1>=l&&a+1>=T)return M(vE(C,n.components,t,i,C.useLongestToken));x[o]=n}e++}if(g)(function o(){setTimeout(function(){if(e>d)return g();h()||o()},0)})();else for(;e<=d;){let o=h();if(o)return o}},pushComponent(i,t,s){let g=i[i.length-1];g&&g.added===t&&g.removed===s?i[i.length-1]={count:g.count+1,added:t,removed:s}:i.push({count:1,added:t,removed:s})},extractCommon(i,t,s,g){let C=t.length,M=s.length,l=i.newPos,T=l-g,e=0;for(;l+1<C&&T+1<M&&this.equals(t[l+1],s[T+1]);)l++,T++,e++;return e&&i.components.push({count:e}),i.newPos=l,T},equals(i,t){return this.options.comparator?this.options.comparator(i,t):i===t||this.options.ignoreCase&&i.toLowerCase()===t.toLowerCase()},removeEmpty(i){let t=[];for(let s=0;s<i.length;s++)i[s]&&t.push(i[s]);return t},castInput(i){return i},tokenize(i){return i.split("")},join(i){return i.join("")}};function vE(i,t,s,g,C){let M=0,l=t.length,T=0,e=0;for(;M<l;M++){let x=t[M];if(x.removed){if(x.value=i.join(g.slice(e,e+x.count)),e+=x.count,M&&t[M-1].added){let u=t[M-1];t[M-1]=t[M],t[M]=u}}else{if(!x.added&&C){let u=s.slice(T,T+x.count);u=u.map(function(h,o){let n=g[e+o];return n.length>h.length?n:h}),x.value=i.join(u)}else x.value=i.join(s.slice(T,T+x.count));T+=x.count,x.added||(e+=x.count)}}let d=t[l-1];return l>1&&typeof d.value=="string"&&(d.added||d.removed)&&i.equals("",d.value)&&(t[l-2].value+=d.value,t.pop()),t}function pE(i){return{newPos:i.newPos,components:i.components.slice(0)}}const gE=new Ni;function mE(i,t,s){return gE.diff(i,t,s)}const Rf=/^[a-zA-Z\u{C0}-\u{FF}\u{D8}-\u{F6}\u{F8}-\u{2C6}\u{2C8}-\u{2D7}\u{2DE}-\u{2FF}\u{1E00}-\u{1EFF}]+$/u,Af=/\S/,fg=new Ni;fg.equals=function(i,t){return this.options.ignoreCase&&(i=i.toLowerCase(),t=t.toLowerCase()),i===t||this.options.ignoreWhitespace&&!Af.test(i)&&!Af.test(t)};fg.tokenize=function(i){let t=i.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/);for(let s=0;s<t.length-1;s++)!t[s+1]&&t[s+2]&&Rf.test(t[s])&&Rf.test(t[s+2])&&(t[s]+=t[s+2],t.splice(s+1,2),s--);return t};const cg=new Ni;cg.tokenize=function(i){let t=[],s=i.split(/(\n|\r\n)/);s[s.length-1]||s.pop();for(let g=0;g<s.length;g++){let C=s[g];g%2&&!this.options.newlineIsToken?t[t.length-1]+=C:(this.options.ignoreWhitespace&&(C=C.trim()),t.push(C))}return t};const xE=new Ni;xE.tokenize=function(i){return i.split(/(\S.+?[.!?])(?=\s+|$)/)};const yE=new Ni;yE.tokenize=function(i){return i.split(/([{}:;,]|\s+)/)};const TE=Object.prototype.toString,dr=new Ni;dr.useLongestToken=!0;dr.tokenize=cg.tokenize;dr.castInput=function(i){const{undefinedReplacement:t,stringifyReplacer:s=(g,C)=>typeof C>"u"?t:C}=this.options;return typeof i=="string"?i:JSON.stringify(wl(i,null,null,s),s,"  ")};dr.equals=function(i,t){return Ni.prototype.equals.call(dr,i.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function wl(i,t,s,g,C){t=t||[],s=s||[],g&&(i=g(C,i));let M;for(M=0;M<t.length;M+=1)if(t[M]===i)return s[M];let l;if(TE.call(i)==="[object Array]"){for(t.push(i),l=new Array(i.length),s.push(l),M=0;M<i.length;M+=1)l[M]=wl(i[M],t,s,g,C);return t.pop(),s.pop(),l}if(i&&i.toJSON&&(i=i.toJSON()),typeof i=="object"&&i!==null){t.push(i),l={},s.push(l);let T=[],e;for(e in i)i.hasOwnProperty(e)&&T.push(e);for(T.sort(),M=0;M<T.length;M+=1)e=T[M],l[e]=wl(i[e],t,s,g,e);t.pop(),s.pop()}else l=i;return l}const Rl=new Ni;Rl.tokenize=function(i){return i.slice()};Rl.join=Rl.removeEmpty=function(i){return i};const CE=Phaser.Utils.Array.Remove;var SE=function(i,t){var s=i.text;if(t!==s){if(CE(i.children,i.lastInsertCursor),t==="")i.removeChildren();else for(var g=mE(s,t),C=0,M=0,l=g.length;M<l;M++){var T=g[M];T.removed?i.removeText(C,T.count):(T.added&&i.insertText(C,T.value),C+=T.count)}i.children.push(i.lastInsertCursor),i.runWordWrap()}};const Of=Phaser.Utils.Objects.IsPlainObject;class ru extends An{constructor(t,s,g,C,M,l){Of(s)?l=s:Of(C)&&(l=C),l===void 0&&(l={}),uE(l);var T=l.text;T&&delete l.text;var e=yl(l.background,"focus"),d=yl(l.style,"cursor");super(t,s,g,C,M,l),this.type="rexCanvasInput",this._text="",this.textEdit=lE(this,l),l.focusStyle&&Object.assign(e,l.focusStyle),fE.call(this,e),l.cursorStyle&&Object.assign(d,l.cursorStyle),dE.call(this,d);var x=l.onAddChar;x&&this.on("addchar",x);var u=l.onCursorOut;u&&this.on("cursorout",u);var h=l.onCursorIn;h&&this.on("cursorin",h);var o=l.onMoveCursor;o&&this.on("movecursor",o),this.setParseTextCallback(l.parseTextCallback),this.lastInsertCursor=cE(this),T?this.setText(T):this.runWordWrap()}addChild(t,s){if(super.addChild(t,s),Array.isArray(t))for(var g=t,C=0,M=g.length;C<M;C++){var t=g[C];Mn(t)&&this.emit("addchar",t,s+C,this)}else Mn(t)&&this.emit("addchar",t,s,this);return this}get text(){return this._text}set text(t){t==null?t="":t=t.toString(),this._text!==t&&(SE(this,t),this._text=t)}setText(t){return this.text=t,this}appendText(t){return this.setText(this.text+t),this}setSize(t,s){return this.width===t&&this.height===s?this:(super.setSize(t,s),this.runWrap(),this)}get displayText(){return this.text}set displayText(t){this.text=t}setDisplayText(t){return this.displayText=t,this}get inputText(){return this.textEdit.text}set inputText(t){this.textEdit.text=t}setInputText(t){return this.inputText=t,this}setParseTextCallback(t){return t||(t=PE),this.parseTextCallback=t,this}get value(){return this.parseTextCallback(this.text)}set value(t){this.setText(t)}getValue(){return this.value}setValue(t){return this.value=t,this}get readOnly(){return this.textEdit.readOnly}set readOnly(t){this.textEdit.readOnly=t}setReadOnly(t){return this.textEdit.setReadOnly(t),this}open(t){return t&&this.textEdit.once("close",t),this.textEdit.open(),this}close(){return this.textEdit.close(),this}get isOpened(){return this.textEdit.isOpened}setFocusStyle(t){return this.focusStyle=t,this}setCursorStyle(t){return this.cursorStyle=t,this}setNumberInput(){return this.textEdit.setNumberInput(),this.parseTextCallback=Number,this}get maxLength(){return this.textEdit.maxLength}set maxLength(t){this.textEdit.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.textEdit.minLength}set minLength(t){this.textEdit.minLength=t}setMinLength(t){return this.minLength=t,this}}var PE=function(i){return i};ht.register("canvasInput",function(i,t,s,g,C){var M=new ru(this.scene,i,t,s,g,C);return this.scene.add.existing(M),M});ot(window,"RexPlugins.UI.CanvasInput",ru);var au=function(i){return Pn(i).loop.delta};const bf=Phaser.Utils.Objects.GetValue,EE=Phaser.Math.Wrap;class vg extends nu{constructor(t,s){s===void 0&&(s={}),s.onUpdate==="number"&&(s.onUpdate=dg),super(t,s),this.setCursor(bf(s,"cursor","|")),this.setCursorFlashDuration(bf(s,"cursorFlashDuration",1e3)),this.cursorFlashTimer=0}initText(){return this.cursorFlashTimer=0,this.prevCursorPosition=void 0,this.setText(this.parent.text),this.setCursorPosition(),this}updateText(){var t=this.parent,s=this.text;if(this.onUpdateCallback){var g=this.onUpdateCallback(s,t,this);g!=null&&(s=g)}if(this.isOpened&&this.hasCursor){var C=this.cursorPosition;s=s.substring(0,C)+this.cursor+s.substring(C),this.prevCursorPosition!==C&&(this.prevCursorPosition=C)}return t.text!==s&&(t.setText(s),this.emit("textchange",s,t,this)),this}setCursor(t){return this._cursor=t,this.hasCursor=t&&t!=="",t}setCursorFlashDuration(t){return this.cursorFlashDuration=t,this}get cursor(){if(!this._isFocused)return this._cursor;var t;this.cursorFlashTimer<this.cursorFlashDuration/2?t=this._cursor:t=" ";var s=this.cursorFlashTimer+au(this.scene);return this.cursorFlashTimer=EE(s,0,this.cursorFlashDuration),t}}ht.register("hiddenEdit",function(i,t){var s=new vg(i,t);return s});ot(window,"RexPlugins.UI.HiddenEdit",vg);const ME=Phaser.GameObjects.GetCalcMatrix;var wE=function(i,t,s,g){t.updateData(),s.addToRenderList(t);var C=i.pipelines.set(t.pipeline),M=ME(t,s,g),l=C.calcMatrix.copyFrom(M.calc),T=t._displayOriginX,e=t._displayOriginY,d=s.alpha*t.alpha;i.pipelines.preBatch(t);for(var x=t.geom,u=0,h=x.length;u<h;u++)x[u].webglRender(C,l,d,T,e);i.pipelines.postBatch(t)};const RE=Phaser.Renderer.Canvas.SetTransform;var AE=function(i,t,s,g){t.updateData(),s.addToRenderList(t);var C=i.currentContext;if(RE(i,C,t,s,g)){for(var M=t._displayOriginX,l=t._displayOriginY,T=t.geom,e=0,d=T.length;e<d;e++)T[e].canvasRender(C,M,l);C.restore()}};const OE={renderWebGL:wE,renderCanvas:AE},bE=Phaser.GameObjects.Shape,FE=Phaser.Utils.Array.Remove;class Ns extends bE{constructor(t,s,g,C,M){s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=2),M===void 0&&(M=C),super(t,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(s,g),this.setSize(C,M),this.updateDisplayOrigin()}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSize(t,s){this.isSizeChanged=this.isSizeChanged||this._width!==t||this._height!==s,this.dirty=this.dirty||this.isSizeChanged,this._width=t,this._height=s,this.updateDisplayOrigin();var g=this.input;return g&&!g.customHitArea&&(g.hitArea.width=t,g.hitArea.height=s),this}resize(t,s){return this.setSize(t,s),this}get fillColor(){return this._fillColor}set fillColor(t){this.setFillStyle(t,this._fillAlpha)}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this.setFillStyle(this._fillColor,t)}setFillStyle(t,s){return s===void 0&&(s=1),this.dirty=this.dirty||this.fillColor!==t||this.fillAlpha!==s,this._fillColor=t,this._fillAlpha=s,this}get lineWidth(){return this._lineWidth}set lineWidth(t){this.setStrokeStyle(t,this._strokeColor,this._strokeAlpha)}get strokeColor(){return this._strokeColor}set strokeColor(t){this.setStrokeStyle(this._lineWidth,t,this._strokeAlpha)}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this.setStrokeStyle(this._lineWidth,this._strokeColor,t)}setStrokeStyle(t,s,g){return g===void 0&&(g=1),this.dirty=this.dirty||this.lineWidth!==t||this.strokeColor!==s||this.strokeAlpha!==g,this._lineWidth=t,this._strokeColor=s,this._strokeAlpha=g,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var t=this.geom,s=0,g=t.length;s<g;s++){var C=t[s];C.dirty&&C.updateData()}return this.isSizeChanged=!1,this.dirty=!1,this}clear(){return this.geom.length=0,Ii(this.shapes),this}getShape(t){return this.shapes[t]}getShapes(){return this.geom}addShape(t){this.geom.push(t);var s=t.name;return s&&(this.shapes[s]=t),this.dirty=!0,this}deleteShape(t){var s=this.getShape(t);return s&&(delete this.shapes[t],FE(this.geom,s)),this}}Object.assign(Ns.prototype,OE);const LE={setBoxFillStyle(i,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.boxFillColor!==i||this.boxFillAlpha!==t,this.boxFillColor=i,this.boxFillAlpha=t,this},setUncheckedBoxFillStyle(i,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.uncheckedBoxFillColor!==i||this.uncheckedBoxFillAlpha!==t,this.uncheckedBoxFillColor=i,this.uncheckedBoxFillAlpha=t,this},setBoxStrokeStyle(i,t,s){return s===void 0&&(s=1),this.dirty=this.dirty||this.boxLineWidth!==i||this.boxStrokeColor!==t||this.boxStrokeAlpha!==s,this.boxLineWidth=i,this.boxStrokeColor=t,this.boxStrokeAlpha=s,this},setUncheckedBoxStrokeStyle(i,t,s){return s===void 0&&(s=1),this.dirty=this.dirty||this.uncheckedBoxLineWidth!==i||this.uncheckedBoxStrokeColor!==t||this.uncheckedBoxStrokeAlpha!==s,this.uncheckedBoxLineWidth=i,this.uncheckedBoxStrokeColor=t,this.uncheckedBoxStrokeAlpha=s,this},setCheckerStyle(i,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.checkerColor!==i||this.checkAlpha!==t,this.checkerColor=i,this.checkAlpha=t,this},setBoxShape(i){return i===void 0&&(i=!1),this.isCircleShape===i?this:(this.isCircleShape=i,this.isSizeChanged=!0,this.dirty=!0,this)}},DE={setBoxSize(i){return this.dirty=this.dirty||this.boxSize!==i,this.boxSize=i,this},setCheckerSize(i){return this.dirty=this.dirty||this.checkerSize!==i,this.checkerSize=i,this}};var IE=function(i,t){return i==null?this.isFilled=!1:(t===void 0&&(t=1),this.isFilled=!0,this.fillColor=i,this.fillAlpha=t),this},BE=function(i,t,s){return i==null||t==null?this.isStroked=!1:(s===void 0&&(s=1),this.isStroked=!0,this.lineWidth=i,this.strokeColor=t,this.strokeAlpha=s),this};const GE={fillStyle:IE,lineStyle:BE};class so{constructor(){this.name=void 0,this.dirty=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(t){return this.name=t,this}reset(){return this.fillStyle().lineStyle(),this}webglRender(t,s,g,C,M){}canvasRender(t,s,g){}updateData(){this.dirty=!1}}Object.assign(so.prototype,GE,Za);const NE=Phaser.Geom.Polygon.Earcut;class Tr extends so{constructor(){super(),this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=NE(this.pathData),super.updateData(),this}webglRender(t,s,g,C,M){this.isFilled&&mp(t,s,this,g,C,M),this.isStroked&&ja(t,this,g,C,M)}canvasRender(t,s,g){var C=this.pathData,M=C.length-1,l=C[0]-s,T=C[1]-g;t.beginPath(),t.moveTo(l,T),this.closePath||(M-=2);for(var e=2;e<M;e+=2){var d=C[e]-s,x=C[e+1]-g;t.lineTo(d,x)}this.closePath&&t.closePath(),this.isFilled&&(gr(t,this),t.fill()),this.isStroked&&(mr(t,this),t.stroke())}}const Ff=Phaser.Math.DegToRad;class no extends Tr{constructor(t,s,g,C,M,l,T,e){t===void 0&&(t=0),s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=0),M===void 0&&(M=0),l===void 0&&(l=360),T===void 0&&(T=!1),e===void 0&&(e=!1),super(),this.setCenterPosition(t,s),this.setRadius(g,C),this.setAngle(M,l,T),this.setPie(e),this.setIterations(32)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setCenterPosition(t,s){return s===void 0&&(s=t),this.x=t,this.y=s,this}get radiusX(){return this._radiusX}set radiusX(t){this.dirty=this.dirty||this._radiusX!==t,this._radiusX=t}get radiusY(){return this._radiusY}set radiusY(t){this.dirty=this.dirty||this._radiusY!==t,this._radiusY=t}setRadius(t,s){return s===void 0&&(s=t),this.radiusX=t,this.radiusY=s,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!==t,this._startAngle=t}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!==t,this._endAngle=t}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!==t,this._anticlockwise=t}setAngle(t,s,g){return g===void 0&&(g=!1),this.startAngle=t,this.endAngle=s,this.anticlockwise=g,this}get pie(){return this._pie}set pie(t){this.dirty=this.dirty||this._pie!==t,this._pie=t}setPie(t){return t===void 0&&(t=!0),this.pie=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),oe(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(t,s,g){t.beginPath();var C=this.x-s,M=this.y-g,l=Ff(this.startAngle),T=Ff(this.endAngle);this.pie&&(t.moveTo(C,M),t.lineTo(C+Math.cos(l)*this.radiusX,M+Math.sin(l)*this.radiusY)),t.ellipse(C,M,this.radiusX,this.radiusY,0,l,T,this.anticlockwise),this.pie&&t.lineTo(C,M),this.isFilled&&(gr(t,this),t.fill()),this.isStroked&&(mr(t,this),t.stroke())}}class Al extends no{constructor(t,s,g){super(t,s,g,g,0,360)}}class VE extends Tr{constructor(t){super(),this.setCurve(t),this.setIterations(32)}get curve(){return this._curve}set curve(t){this.dirty=this.dirty||this._curve!==t,this._curve=t}setCurve(t){return this.curve=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){this.pathData.length=0;for(var t=this.curve.getPoints(this.iterations),s=0,g=t.length;s<g;s++)this.pathData.push(t[s].x,t[s].y);return this.pathData.push(t[0].x,t[0].y),super.updateData(),this}}class kE extends no{constructor(t,s,g,C){super(t,s,g,C,0,360)}}class zE extends Tr{constructor(t,s,g,C){t===void 0&&(t=0),s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=0),super(),this.setP0(t,s),this.setP1(g,C)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,s){return this.x0=t,this.y0=s,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,s){return this.x1=t,this.y1=s,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}}var UE=function(i,t,s){return s.length=0,i!=null&&s.push(i,t),s};const Lf=Phaser.Math.Interpolation.QuadraticBezier;var YE=function(i,t,s,g,C,M){for(var l=M.length,T=M[l-2],e=M[l-1],d=1,x=C-1;d<=x;d++){var u=d/x;M.push(Lf(u,T,i,s),Lf(u,e,t,g))}return M};const Df=Phaser.Math.Interpolation.CubicBezier;var XE=function(i,t,s,g,C,M,l,T){for(var e=T.length,d=T[e-2],x=T[e-1],u=1,h=l-1;u<=h;u++){var o=u/h;T.push(Df(o,d,i,s,C),Df(o,x,t,g,M))}return T},pg=function(i){var t=i.length;if(t<2)return i;var s=i[t-2],g=i[t-1];return i.push(s),i.push(g),i};const WE={clear(){return this.start(),this},start(){return this.startAt(),this},startAt(i,t){return this.restorePathData(),this.accumulationLengths=void 0,UE(i,t,this.pathData),this.firstPointX=i,this.firstPointY=t,this.lastPointX=i,this.lastPointY=t,this},lineTo(i,t,s){return s===void 0&&(s=!1),s&&(i+=this.lastPointX,t+=this.lastPointY),Si(i,t,this.pathData),this.lastPointX=i,this.lastPointY=t,this},verticalLineTo(i,t){return this.lineTo(i,this.lastPointY,t),this},horizontalLineTo(i,t){return this.lineTo(this.lastPointX,i,t),this},ellipticalArc(i,t,s,g,C,M,l){return l===void 0&&(l=!1),oe(i,t,s,g,C,M,l,this.iterations,this.pathData),this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this},arc(i,t,s,g,C,M){return this.ellipticalArc(i,t,s,s,g,C,M),this},quadraticBezierTo(i,t,s,g){return YE(i,t,s,g,this.iterations,this.pathData),this.lastPointX=s,this.lastPointY=g,this.lastCX=i,this.lastCY=t,this},smoothQuadraticBezierTo(i,t){var s=this.lastPointX*2-this.lastCX,g=this.lastPointY*2-this.lastCY;return this.quadraticBezierTo(s,g,i,t),this},cubicBezierCurveTo(i,t,s,g,C,M){return XE(i,t,s,g,C,M,this.iterations,this.pathData),this.lastPointX=C,this.lastPointY=M,this.lastCX=s,this.lastCY=g,this},smoothCubicBezierCurveTo(i,t,s,g){var C=this.lastPointX*2-this.lastCX,M=this.lastPointY*2-this.lastCY;return this.cubicBezierCurveTo(C,M,i,t,s,g),this},close(){return this.closePath=!0,this},end(){return pg(this.pathData),this}},HE=Phaser.Math.RotateAround;var $E=function(i,t,s,g){for(var C={x:0,y:0},M=0,l=g.length-1;M<l;M+=2)C.x=g[M],C.y=g[M+1],HE(C,i,t,s),g[M]=C.x,g[M+1]=C.y;return g},KE=function(i,t,s,g,C){for(var M=0,l=C.length-1;M<l;M+=2){var T=C[M]-i,e=C[M+1]-t;T*=s,e*=g,C[M]=T+i,C[M+1]=e+t}return C},gg=function(i,t,s){for(var g=0,C=s.length-1;g<C;g+=2)s[g]+=i,s[g+1]+=t;return s};const ZE=Phaser.Math.DegToRad,jE=Phaser.Math.RotateAround,JE={rotateAround(i,t,s){if(this.pathData.length===0)return this;s=ZE(s),$E(i,t,s,this.pathData);var g=this.pathData.length;if(this.lastPointX=this.pathData[g-2],this.lastPointY=this.pathData[g-1],this.lastCX!==void 0){var C={x:this.lastCX,y:this.lastCY};jE(C,i,t,s),this.lastCX=C.x,this.lastCY=C.y}return this},scale(i,t,s,g){if(this.pathData.length===0)return this;if(KE(i,t,s,g,this.pathData),this.lastPointX=this.pathData[pathDataCnt-2],this.lastPointY=this.pathData[pathDataCnt-1],this.lastCX!==void 0){var C=this.lastCX-i,M=this.lastCY-t;C*=s,M*=g,this.lastCX=C+i,this.lastCY=M+t}return this},offset(i,t){return gg(i,t,this.pathData),this}};var ou=function(i,t,s,g){s===void 0&&(s=0),g===void 0&&(g=t.length),i.length=g-s;for(var C=0,M=i.length;C<M;C++)i[C]=t[C+s];return i};const QE={savePathData(){return this.pathDataSaved?this:(this.pathDataSave=[...this.pathData],this.pathData.length=0,this.pathDataSaved=!0,this)},restorePathData(){return this.pathDataSaved?(ou(this.pathData,this.pathDataSave),this.pathDataSave=void 0,this.pathDataSaved=!1,this):this}},qE=Phaser.Math.Distance.Between,_E=Phaser.Math.Wrap,tM=Phaser.Math.Linear;var If=function(i,t,s,g,C){if(g===void 0&&(g=s,s=0),s=Bf(s),g=Bf(g),s!==g){var M=t[t.length-1],l=M*s,T=M*g;s<g?hh(i,t,l,T,C):(hh(i,t,l,M,C),hh(i,t,0,T,C)),pg(C)}},hh=function(i,t,s,g,C){for(var M=s>0,l=0,T=t.length;l<T;l++){var e=l*2,d=t[l];if(M){if(d<s)continue;if(d==s)M=!1;else{var x=d-t[l-1],u=1-(d-s)/x;C.push(Qr(i,e-2,e,u)),C.push(Qr(i,e-1,e+1,u)),M=!1}}if(d<=g){if(C.push(i[e]),C.push(i[e+1]),d===g)break}else{var x=d-t[l-1],u=1-(d-g)/x;C.push(Qr(i,e-2,e,u)),C.push(Qr(i,e-1,e+1,u));break}}},Qr=function(i,t,s,g){var C=i[t],M=i[s];return tM(C,M,g)},Bf=function(i){return i===0?0:i%1===0?1:_E(i,0,1)};const eM={updateAccumulationLengths(){if(this.accumulationLengths==null)this.accumulationLengths=[];else if(this.accumulationLengths.length===this.pathData.length/2)return this;for(var i=this.accumulationLengths,t=this.pathData,s,g,C,M,l,T=0,e=0,d=t.length;e<d;e+=2)C=t[e],M=t[e+1],l=s===void 0?0:qE(s,g,C,M),T+=l,i.push(T),s=C,g=M;return this.totalPathLength=T,this},setDisplayPathSegment(i,t){return this.pathDataSaved||(this.updateAccumulationLengths(),this.savePathData()),this.pathData.length=0,If(this.pathDataSave,this.accumulationLengths,i,t,this.pathData),this},appendFromPathSegment(i,t,s){return t===void 0?this.pathData.push(...i.pathData):(i.updateAccumulationLengths(),If(i.pathData,i.accumulationLengths,t,s,this.pathData)),this.firstPointX=this.pathData[0],this.firstPointY=this.pathData[1],this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this}},iM={draw(i,t,s){var g=this.toPoints();return t&&i.fillPoints(g,this.closePath,this.closePath),s&&i.strokePoints(g,this.closePath,this.closePath),this}};var sM=function(i,t){t===void 0&&(t=[]);for(var s=0,g=i.length-1;s<g;s+=2)t.push({x:i[s],y:i[s+1]});return t};const nM=Phaser.Geom.Polygon;var rM=function(i,t){return t===void 0&&(t=new nM),t.setTo(i),t};class mg{constructor(t){t===void 0&&(t=[]),this.pathData=t,this.closePath=!1,this.setIterations(32),this.firstPointX=void 0,this.firstPointY=void 0,this.lastPointX=void 0,this.lastPointY=void 0,this.accumulationLengths=void 0}setIterations(t){return this.iterations=t,this}toPoints(){return sM(this.pathData)}toPolygon(t){return rM(this.pathData,t)}}Object.assign(mg.prototype,WE,JE,QE,eM,iM);class Sn extends Tr{constructor(){super(),this.builder=new mg(this.pathData)}get iterations(){return this.builder.iterations}set iterations(t){this.dirty=this.dirty||this.builder.iterations!==t,this.builder.setIterations(t)}setIterations(t){return this.iterations=t,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}start(){return this.builder.start(),this.dirty=!0,this}startAt(t,s){return this.builder.startAt(t,s),this.dirty=!0,this}lineTo(t,s,g){return this.builder.lineTo(t,s,g),this.dirty=!0,this}verticalLineTo(t,s){return this.builder.verticalLineTo(t,s),this.dirty=!0,this}horizontalLineTo(t,s){return this.builder.horizontalLineTo(t,s),this.dirty=!0,this}ellipticalArc(t,s,g,C,M,l,T){return this.builder.ellipticalArc(t,s,g,C,M,l,T),this.dirty=!0,this}arc(t,s,g,C,M,l){return this.builder.arc(t,s,g,C,M,l),this.dirty=!0,this}quadraticBezierTo(t,s,g,C){return this.builder.quadraticBezierTo(t,s,g,C),this.dirty=!0,this}smoothQuadraticBezierTo(t,s){return this.builder.smoothQuadraticBezierTo(t,s),this.dirty=!0,this}cubicBezierCurveTo(t,s,g,C,M,l){return this.builder.cubicBezierCurveTo(t,s,g,C,M,l),this.dirty=!0,this}smoothCubicBezierCurveTo(t,s,g,C){return this.builder.smoothCubicBezierCurveTo(t,s,g,C),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(t,s,g){return this.builder.rotateAround(t,s,g),this.dirty=!0,this}scale(t,s,g,C){return this.builder.scale(t,s,g,C),this.dirty=!0,this}offset(t,s){return this.builder.offset(t,s),this.dirty=!0,this}toPolygon(t){return this.builder.toPolygon(t)}appendPathFrom(t,s,g){return this.builder.appendFromPathSegment(t.builder,s,g),this}copyPathFrom(t,s,g){return this.builder.clear().appendFromPathSegment(t.builder,s,g),this}setDisplayPathSegment(t,s){return this.builder.setDisplayPathSegment(t,s),this}}const aM=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;let oM=class extends so{constructor(t,s,g,C){t===void 0&&(t=0),s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=g),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(t,s),this.setSize(g,C)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,s){return this.x=t,this.y=s,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,s){return this.width=t,this.height=s,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,s){return this.centerX=t,this.centerY=s,this}updateData(){this.pathData.length=0;var t=this.x,s=t+this.width,g=this.y,C=g+this.height;return this.pathData.push(t,g),this.pathData.push(s,g),this.pathData.push(s,C),this.pathData.push(t,C),this.pathData.push(t,g),super.updateData(),this}webglRender(t,s,g,C,M){if(this.isFilled){var l=t.fillTint,T=aM(this.fillColor,this.fillAlpha*g);l.TL=T,l.TR=T,l.BL=T,l.BR=T,t.batchFillRect(-C+this.x,-M+this.y,this.width,this.height)}this.isStroked&&ja(t,this,g,C,M)}canvasRender(t,s,g){this.isFilled&&(gr(t,this),t.fillRect(-s,-g,this.width,this.height)),this.isStroked&&(mr(t,this),t.beginPath(),t.rect(-s,-g,this.width,this.height),t.stroke())}};const qr=Phaser.Utils.Objects.GetValue;class za extends Tr{constructor(t,s,g,C,M,l){t===void 0&&(t=0),s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=g),M===void 0&&(M=0),l===void 0&&(l=6),super(),this.setTopLeftPosition(t,s),this.setSize(g,C),this.setRadius(M),this.setIterations(l),this.closePath=!0}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,s){return this.x=t,this.y=s,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,s){return this.width=t,this.height=s,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,s){return this.centerX=t,this.centerY=s,this}get radiusTL(){return this._radiusTL}set radiusTL(t){var s=t>0;this.dirty=this.dirty||this._radiusTL!==t||this._convexTL!==s,this._convexTL=s,this._radiusTL=Math.abs(t)}get radiusTR(){return this._radiusTR}set radiusTR(t){var s=t>0;this.dirty=this.dirty||this._radiusTR!==t||this._convexTR!==s,this._convexTR=s,this._radiusTR=Math.abs(t)}get radiusBL(){return this._radiusBL}set radiusBL(t){var s=t>0;this.dirty=this.dirty||this._radiusBL!==t||this._convexBL!==s,this._convexBL=s,this._radiusBL=Math.abs(t)}get radiusBR(){return this._radiusBR}set radiusBR(t){var s=t>0;this.dirty=this.dirty||this._radiusBR!==t||this._convexBR!==s,this._convexBR=s,this._radiusBR=Math.abs(t)}get radius(){return Math.max(this.radiusTL,this.radiusTR,this.radiusBL,this.radiusBR)}set radius(t){typeof t=="number"?(this.radiusTL=t,this.radiusTR=t,this.radiusBL=t,this.radiusBR=t):(this.radiusTL=qr(t,"tl",0),this.radiusTR=qr(t,"tr",0),this.radiusBL=qr(t,"bl",0),this.radiusBR=qr(t,"br",0))}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){var t=this.pathData;t.length=0;var s=this.width,g=this.height,C,M=this.iterations+1;if(C=this.radiusTL,C>0)if(this._convexTL){var l=C,T=C;oe(l,T,C,C,180,270,!1,M,t)}else{var l=0,T=0;oe(l,T,C,C,90,0,!0,M,t)}else Si(0,0,t);if(C=this.radiusTR,C>0)if(this._convexTR){var l=s-C,T=C;oe(l,T,C,C,270,360,!1,M,t)}else{var l=s,T=0;oe(l,T,C,C,180,90,!0,M,t)}else Si(s,0,t);if(C=this.radiusBR,C>0)if(this._convexBR){var l=s-C,T=g-C;oe(l,T,C,C,0,90,!1,M,t)}else{var l=s,T=g;oe(l,T,C,C,270,180,!0,M,t)}else Si(s,g,t);if(C=this.radiusBL,C>0)if(this._convexBL){var l=C,T=g-C;oe(l,T,C,C,90,180,!1,M,t)}else{var l=0,T=g;oe(l,T,C,C,360,270,!0,M,t)}else Si(0,g,t);return t.push(t[0],t[1]),gg(this.x,this.y,t),super.updateData(),this}}const hM=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;let lM=class extends so{constructor(t,s,g,C,M,l){t===void 0&&(t=0),s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=0),M===void 0&&(M=0),l===void 0&&(l=0),super(),this.pathData=[],this.closePath=!0,this.setP0(t,s),this.setP1(g,C),this.setP2(M,l)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,s){return this.x0=t,this.y0=s,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,s){return this.x1=t,this.y1=s,this}get x2(){return this._x2}set x2(t){this.dirty=this.dirty||this._x2!==t,this._x2=t}get y2(){return this._y2}set y2(t){this.dirty=this.dirty||this._y2!==t,this._y2=t}setP2(t,s){return this.dirty=this.dirty||this.x2!==t||this.y2!==s,this.x2=t,this.y2=s,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),super.updateData(),this}webglRender(t,s,g,C,M){if(this.isFilled){var l=hM(this.fillColor,this.fillAlpha*g),T=this.x0-C,e=this.y0-M,d=this.x1-C,x=this.y1-M,u=this.x2-C,h=this.y2-M,o=s.getX(T,e),n=s.getY(T,e),r=s.getX(d,x),f=s.getY(d,x),a=s.getX(u,h),c=s.getY(u,h);t.batchTri(o,n,r,f,a,c,l,l,l)}this.isStroked&&ja(t,this,g,C,M)}canvasRender(t,s,g){var C=this.x1-s,M=this.y1-g,l=this.x2-s,T=this.y2-g,e=this.x3-s,d=this.y3-g;t.beginPath(),t.moveTo(C,M),t.lineTo(l,T),t.lineTo(e,d),t.closePath(),this.isFilled&&(gr(t,this),t.fill()),this.isStroked&&(mr(t,this),t.stroke())}};const uM={buildShapes(){this.addShape(new za().setName("box")).addShape(new Sn().setName("checker"))},updateShapes(){var i=this.width/2,t=this.height/2,s=Math.min(i,t),g=s*2,C=i-s,M=t-s,l=this.boxLineWidth,T=Math.max(g/10,2),e=this.getShape("box"),d=this.getShape("checker");if(this.isSizeChanged){var h=g*(1-this.boxSize)/2,x=l/2,u=g*this.boxSize-l;e.setTopLeftPosition(C+x+h,M+x+h).setSize(u,u),this.isCircleShape?e.setRadius(u/2):e.setRadius(0);var h=g*(1-this.checkerSize)/2,o=g*this.checkerSize/4,n=o*1,r=o*2,f=o*3;d.startAt(n,r).lineTo(r,f).lineTo(f,n).offset(C+h,M+h).end()}this.checked?(e.fillStyle(this.boxFillColor,this.boxFillAlpha).lineStyle(l,this.boxStrokeColor,this.boxStrokeAlpha),d.lineStyle(T,this.checkerColor)):(e.fillStyle(this.uncheckedBoxFillColor,this.uncheckedBoxFillAlpha).lineStyle(l,this.uncheckedBoxStrokeColor,this.uncheckedBoxStrokeAlpha),d.lineStyle()),this.checked&&d.setDisplayPathSegment(this.checkerAnimProgress)}},Wi=Phaser.Utils.Objects.GetValue,dM=Phaser.Math.Linear;class Vs extends Gs{constructor(t,s){super(t,s),this.resetFromJSON(),this.boot()}start(t){if(this.timer.isRunning)return this;var s=this.target;this.propertyKey=Wi(t,"key","value");var g=s[this.propertyKey];return this.fromValue=Wi(t,"from",g),this.toValue=Wi(t,"to",g),this.setEase(Wi(t,"ease",this.ease)),this.setDuration(Wi(t,"duration",this.duration)),this.setRepeat(Wi(t,"repeat",0)),this.setDelay(Wi(t,"delay",0)),this.setRepeatDelay(Wi(t,"repeatDelay",0)),this.timer.setDuration(this.duration).setRepeat(this.repeat).setDelay(this.delay).setRepeatDelay(this.repeatDelay),s[this.propertyKey]=this.fromValue,super.start(),this}updateGameObject(t,s){var g=s.t;g=this.easeFn(g),t[this.propertyKey]=dM(this.fromValue,this.toValue,g)}}const fM={setCheckerAnimationDuration(i){return i===void 0&&(i=0),this.checkerAnimDuration=i,this},playCheckerAnimation(){return this.checkerAnimProgressTask===void 0&&(this.checkerAnimProgressTask=new Vs(this,{eventEmitter:null})),this.checkerAnimProgressTask.restart({key:"checkerAnimProgress",from:0,to:1,duration:this.checkerAnimDuration}),this},stopCheckerAnimation(){return this.checkerAnimProgressTask===void 0?this:(this.checkerAnimProgressTask.stop(),this)}};var xg={};Object.assign(xg,LE,DE,uM,fM);const Zt=Phaser.Utils.Objects.GetValue,Gf=Phaser.Utils.Objects.IsPlainObject,lh=23730,cM=16777215;class yg extends Ns{constructor(t,s,g,C,M,l,T){Gf(s)?(T=s,s=Zt(T,"x",0),g=Zt(T,"y",0),C=Zt(T,"width",2),M=Zt(T,"height",2),l=Zt(T,"color",lh)):Gf(l)&&(T=l,l=Zt(T,"color",lh)),super(t,s,g,C,M),this.type="rexCheckbox",l===void 0&&(l=lh),this.setBoxShape(Zt(T,"circleBox",!1)),this.setBoxFillStyle(l,Zt(T,"boxFillAlpha",1)),this.setUncheckedBoxFillStyle(Zt(T,"uncheckedColor",null),Zt(T,"uncheckedBoxFillAlpha",1)),this.setBoxStrokeStyle(Zt(T,"boxLineWidth",4),Zt(T,"boxStrokeColor",l),Zt(T,"boxStrokeAlpha",1)),this.setUncheckedBoxStrokeStyle(this.boxLineWidth,Zt(T,"uncheckedBoxStrokeColor",this.boxStrokeColor),Zt(T,"uncheckedBoxStrokeAlpha",this.boxStrokeAlpha)),this.setCheckerStyle(Zt(T,"checkerColor",cM),Zt(T,"checkerAlpha",1)),this.setBoxSize(Zt(T,"boxSize",1)),this.setCheckerSize(Zt(T,"checkerSize",1)),this.setCheckerAnimationDuration(Zt(T,"animationDuration",150)),this.buildShapes();var e=Zt(T,"checked");e===void 0&&(e=Zt(T,"value",!1)),this.setValue(e)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,t?this.playCheckerAnimation():this.stopCheckerAnimation(),this.emit("valuechange",t))}setValue(t){return this.value=t,this}toggleValue(){return this.setValue(!this.value),this}get checked(){return this.value}set checked(t){this.value=t}setChecked(t){return t===void 0&&(t=!0),this.setValue(t),this}toggleChecked(){return this.toggleValue(),this}get checkerAnimProgress(){return this._checkerAnimProgress}set checkerAnimProgress(t){this._checkerAnimProgress!==t&&(this._checkerAnimProgress=t,this.dirty=!0)}}Object.assign(yg.prototype,xg);const $n=Phaser.Utils.Objects.GetValue;class hs extends he{constructor(t,s){super(t,s),this._enable=void 0,t.setInteractive($n(s,"inputConfig",void 0)),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable($n(t,"enable",!0)),this.setMode($n(t,"mode",1)),this.setClickInterval($n(t,"clickInterval",100)),this.setDragThreshold($n(t,"threshold",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPress,this),t.on("pointerup",this.onRelease,this),t.on("pointerout",this.onPointOut,this),t.on("pointermove",this.onMove,this),t.on("pointerover",this.onOver,this),t.on("pointerout",this.onOut,this)}shutdown(t){this.isShutdown||(this.pointer=null,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var s=t?"enable":"disable";this.emit(s,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=vM[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}onPress(t,s,g,C){this.pointer===void 0&&(this.pointer=t,this.mode===0&&this.click(t.downTime,t,C))}onRelease(t,s,g,C){this.pointer===t&&(this.mode===1&&this.click(t.upTime,t,C),this.pointer=void 0)}onPointOut(t,s){this.pointer===t&&this.cancel()}onMove(t,s,g,C){this.pointer===t&&this.dragThreshold!==void 0&&t.getDistance()>=this.dragThreshold&&this.cancel()}click(t,s,g){if(!this.enable)return this;if(t===void 0)return this.emit("click",this,this.parent,s,g),this;this.pointer=void 0;var C=this.lastClickTime;return C!==void 0&&t-C<=this.clickInterval?this:(this.lastClickTime=t,this.emit("click",this,this.parent,s,g),this)}cancel(){return this.pointer=void 0,this}onOver(t,s,g,C){return this.enable?(this.emit("over",this,this.parent,t,C),this):this}onOut(t,s){return this.enable?(this.emit("out",this,this.parent,t,s),this):this}}const vM={press:0,pointerdown:0,release:1,pointerup:1},Nf=Phaser.Utils.Objects.GetValue;class hu extends yg{constructor(t,s,g,C,M,l,T){super(t,s,g,C,M,l,T),this._click=new hs(this,Nf(T,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(Nf(T,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}}ht.register("checkbox",function(i,t,s,g,C,M){var l=new hu(this.scene,i,t,s,g,C,M);return this.scene.add.existing(l),l});ot(window,"RexPlugins.UI.Checkbox",hu);const pM={setTrackFillStyle(i,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.trackFillColor!==i||this.trackFillAlpha!==t,this.trackFillColor=i,this.trackFillAlpha=t,this},setFalseValueTrackFillStyle(i,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.falseValueTrackColor!==i||this.uncheckedTrackFillAlpha!==t,this.falseValueTrackColor=i,this.falseValueTrackFillAlpha=t,this},setThumbStyle(i,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.thumbColor!==i||this.checkAlpha!==t,this.thumbColor=i,this.thumbAlpha=t,this}},gM={setTrackSize(i,t){return this.dirty=this.dirty||this.trackWidth!==i||this.trackHeight!==t,this.trackWidth=i,this.trackHeight=t,this},setTrackRadius(i){return this.dirty=this.dirty||this.trackRadius!==i,this.trackRadius=i,this},setThumbSize(i,t){return t===void 0&&(t=i),this.dirty=this.dirty||this.thumbWidth!==i||this.thumbHeight!==t,this.thumbWidth=i,this.thumbHeight=t,this},setThumbRadius(i){return this.dirty=this.dirty||this.thumbRadius!==i,this.thumbRadius=i,this}},mM={setThumbPosition(i,t){return t===void 0&&(t=1-i),this.thumbLeftX=i,this.thumbRightX=t,this},setRTL(i){return i===void 0&&(i=!0),this.rtl=i,this}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var uh=function(i,t,s){return(t-i)*s+i},xM=function(i,t,s){var g=uh(hr(i),hr(t),s),C=uh(lr(i),lr(t),s),M=uh(ur(i),ur(t),s);return(g&255)<<16|(C&255)<<8|M&255};const Vf=Phaser.Math.Linear,yM={buildShapes(){this.addShape(new za().setName("track")).addShape(new za().setName("thumb"))},updateShapes(){var i=this.width,t=this.height,s=this.value?this.toggleAnimProgress:1-this.toggleAnimProgress,g=this.getShape("track");if(this.isSizeChanged){var C=i*this.trackWidth,M=t*this.trackHeight,l=(i-C)/2,T=(t-M)/2,e=t*this.trackRadius;g.setTopLeftPosition(l,T).setSize(C,M).setRadius(e)}var d=xM(this.falseValueTrackColor,this.trackFillColor,s),x=Vf(this.falseValueTrackFillAlpha,this.trackFillAlpha,s);g.fillStyle(d,x);var u=this.getShape("thumb");if(this.isSizeChanged){var h=i*this.thumbWidth,o=t*this.thumbHeight,n=t*this.thumbRadius;u.setSize(h,o).setRadius(n)}var r=Vf(this.thumbLeftX,this.thumbRightX,s)*i;this.rtl&&(r=i-r);var f=t/2;u.setCenterPosition(r,f),u.fillStyle(this.thumbColor,this.thumbAlpha)}},TM={setToggleAnimationDuration(i){return i===void 0&&(i=0),this.toggleAnimDuration=i,this},playToggleAnimation(){return this.toggleAnimProgressTask===void 0&&(this.toggleAnimProgressTask=new Vs(this,{eventEmitter:null})),this.toggleAnimProgressTask.restart({key:"toggleAnimProgress",from:0,to:1,duration:this.toggleAnimDuration}),this},stopToggleAnimation(){return this.toggleAnimProgressTask===void 0?this:(this.toggleAnimProgressTask.stop(),this)}};var Tg={};Object.assign(Tg,pM,gM,mM,yM,TM);var CM=function(i){var t=.3*hr(i)+.59*lr(i)+.11*ur(i);return(t&255)<<16|(t&255)<<8|t&255};const jt=Phaser.Utils.Objects.GetValue,kf=Phaser.Utils.Objects.IsPlainObject,dh=23730,SM=16777215;class Cg extends Ns{constructor(t,s,g,C,M,l,T){kf(s)?(T=s,s=jt(T,"x",0),g=jt(T,"y",0),C=jt(T,"width",2),M=jt(T,"height",2),l=jt(T,"color",dh)):kf(l)&&(T=l,l=jt(T,"color",dh)),super(t,s,g,C,M),this.type="rexToggleSwitch",l===void 0&&(l=dh),this.setTrackFillStyle(l,jt(T,"trackFillAlpha",1)),this.setFalseValueTrackFillStyle(jt(T,"falseValueTrackColor",CM(l)),jt(T,"falseValueTrackFillAlpha",1)),this.setThumbStyle(jt(T,"thumbColor",SM),jt(T,"thumbAlpha",1)),this.setTrackSize(jt(T,"trackWidth",.9),jt(T,"trackHeight",.5)),this.setTrackRadius(jt(T,"trackRadius",this.trackHeight*.5));var e=jt(T,"thumbHeight",void 0),d=jt(T,"thumbWidth",e);d===void 0&&(d=this.trackHeight*.9),this.setThumbSize(d,e),this.setThumbRadius(jt(T,"thumbRadius",this.thumbHeight*.5)),this.setThumbPosition(jt(T,"thumbLeft",.3),jt(T,"thumbRight",void 0)),this.setRTL(jt(T,"rtl",!1)),this.setToggleAnimationDuration(jt(T,"animationDuration",150)),this.buildShapes(),this.setValue(jt(T,"value",!1),0)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,this.playToggleAnimation(),this.emit("valuechange",t))}setValue(t,s){s===void 0&&(s=this.toggleAnimDuration);var g=this.toggleAnimDuration;return this.toggleAnimDuration=s,this.value=t,this.toggleAnimDuration=g,this}toggleValue(t){return this.setValue(!this.value,t),this}get toggleAnimProgress(){return this._toggleAnimProgress}set toggleAnimProgress(t){this._toggleAnimProgress!==t&&(this._toggleAnimProgress=t,this.dirty=!0)}}Object.assign(Cg.prototype,Tg);const zf=Phaser.Utils.Objects.GetValue;class lu extends Cg{constructor(t,s,g,C,M,l,T){super(t,s,g,C,M,l,T),this._click=new hs(this,zf(T,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(zf(T,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}}ht.register("toggleSwitch",function(i,t,s,g,C,M){var l=new lu(this.scene,i,t,s,g,C,M);return this.scene.add.existing(l),l});ot(window,"RexPlugins.UI.ToggleSwitch",lu);const PM={loadFromURL(i,t){var s=this,g=new Image;return g.onload=function(){s.width!==g.width||s.height!==g.height?s.resize(g.width,g.height):s.clear(),s.context.drawImage(g,0,0),s.updateTexture(),t&&t(),g.onload=null,g.src="",g.remove()},g.src=i,this},loadFromURLPromise(i){var t=this;return new Promise(function(s,g){t.loadFromURL(i,s)})},loadFromFile(i,t){var s=URL.createObjectURL(i);return this.loadFromURL(s,function(){URL.revokeObjectURL(s),t&&t()}),this},loadFromFilePromise(i){var t=this;return new Promise(function(s,g){t.loadFromFile(i,s)})}};class Fn extends as{}Object.assign(Fn.prototype,PM);ht.register("canvas",function(i,t,s,g){var C=new Fn(this.scene,i,t,s,g);return this.scene.add.existing(C),C});ot(window,"RexPlugins.UI.Canvas",Fn);const qs=Phaser.Utils.Objects.GetValue;class Sg extends as{constructor(t,s,g,C,M,l){super(t,s,g),this.type="rexCircleMaskImage",this.setTexture(C,M,l)}setTexture(t,s,g){typeof s=="object"&&(g=s,s=void 0),typeof g=="string"&&(g={maskType:g});var C=qs(g,"maskType",0),M=qs(g,"backgroundColor",void 0),l=qs(g,"strokeColor",void 0),T=l!=null?10:0,e=qs(g,"strokeWidth",T);if(C===void 0?C=0:typeof C=="string"&&(C=EM[C]),this._textureKey=t,this._frameName=s,C===null)return this.loadTexture(t,s),this.dirty=!0,this;var d=this.scene.sys.textures.getFrame(t,s);if(!d)return this;d.cutWidth!==this.width||d.cutHeight!==this.height?this.setCanvasSize(d.cutWidth,d.cutHeight):this.clear();var x=this.canvas,u=this.context,h=x.width,o=x.height;M!=null&&(u.fillStyle=M,u.fillRect(0,0,h,o)),u.save(),u.beginPath();var n=e/2;switch(C){case 1:var p=Math.floor(h/2),v=Math.floor(o/2),r=p-n,f=v-n;u.ellipse(p,v,r,f,0,0,2*Math.PI);break;case 2:var a=qs(g,"radius",0),c=qs(g,"iteration",void 0);yp(u,n,n,h-e,o-e,a,c);break;default:var p=Math.floor(h/2),v=Math.floor(o/2),m=Math.min(p,v)-n;u.arc(p,v,m,0,2*Math.PI);break}return l!=null&&(u.strokeStyle=l,u.lineWidth=e,u.stroke()),u.clip(),this.loadTexture(t,s),u.restore(),this.dirty=!0,this}resize(t,s){return this.setDisplaySize(t,s),this}}const EM={circle:0,ellipse:1,roundRectangle:2};ht.register("circleMaskImage",function(i,t,s,g,C){var M=new Sg(this.scene,i,t,s,g,C);return this.scene.add.existing(M),M});ot(window,"RexPlugins.UI.CircleMaskImage",Sg);const Kn=Phaser.Utils.Objects.GetValue;class Pg extends as{constructor(t,s,g,C,M,l){super(t,s,g),this.type="rexAlphaMaskImage",this.maskFrame=null,this.setTexture(C,M,l)}setTexture(t,s,g){typeof s=="object"&&(g=s,s=void 0),typeof g=="string"&&(g={mask:{key:g}});var C=Kn(g,"mask.key"),M=Kn(g,"mask.frame"),l=Kn(g,"mask.invertAlpha",!1),T=Kn(g,"mask.scale"),e=Kn(g,"backgroundColor");if(C){this._maskKey=C,this._maskFrame=M,this._maskScale=T;var d=C?this.scene.sys.textures.get(C):null;this.maskFrame=d?d.get(M):null}this._textureKey=t,this._frameName=s;var x=this.maskFrame;if(x===null)return this.loadTexture(t,s),this.dirty=!0,this;var u=e!=null;this.loadTexture(t,s);var h=this.canvas,o=this.context,n=h.width,r=h.height;o.save(),o.globalCompositeOperation=l?"destination-out":"destination-in";var f,a;this._maskScale!=null?(f=x.cutWidth*this._maskScale,a=x.cutHeight*this._maskScale):(f=n,a=r);var c=(n-f)/2,p=(r-a)/2;return this.drawFrame(this._maskKey,this._maskFrame,c,p,f,a),o.restore(),u&&(o.save(),o.globalCompositeOperation="destination-over",o.fillStyle=e,o.fillRect(0,0,n,r),o.restore()),this.dirty=!0,this}resize(t,s){return this.setDisplaySize(t,s),this}}ht.register("alphaMaskImage",function(i,t,s,g,C){var M=new Pg(this.scene,i,t,s,g,C);return this.scene.add.existing(M),M});ot(window,"RexPlugins.UI.AlphaMaskImage",Pg);const MM=Phaser.Math.Linear,Uf=Phaser.Math.Percent,wM={setValue(i,t,s){return i==null?this:(t!==void 0&&(i=Uf(i,t,s)),this.value=i,this)},addValue(i,t,s){return t!==void 0&&(i=Uf(i,t,s)),this.value+=i,this},getValue(i,t){var s=this.value;return i!==void 0&&(s=MM(i,t,s)),s}},RM=Phaser.Math.Percent;var AM=function(i){return this.easeValuePropName=i,this},OM=function(i){return this.easeValueDuration=i,this},bM=function(i){return this.easeFunction=i,this},FM=function(){return this.easeValueTask&&this.easeValueTask.stop(),this},LM=function(i,t,s){return i==null?this:(t!==void 0&&(i=RM(i,t,s)),this.easeValueTask===void 0&&(this.easeValueTask=new Vs(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:i,duration:this.easeValueDuration,ease:this.easeFunction}),this)},DM=function(i,t,s,g){return s===void 0&&(s=-1),g===void 0&&(g=0),this.easeValueTask===void 0&&(this.easeValueTask=new Vs(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,from:i,to:t,duration:this.easeValueDuration,ease:this.easeFunction,repeat:s,repeatDelay:g}),this};const IM={setEaseValuePropName:AM,setEaseValueDuration:OM,setEaseValueFunction:bM,stopEaseValue:FM,easeValueTo:LM,easeValueRepeat:DM},Zn=Phaser.Utils.Objects.GetValue,BM=Phaser.Math.Clamp;function ks(i){class t extends i{bootProgressBase(g){this.eventEmitter=Zn(g,"eventEmitter",this);var C=Zn(g,"valuechangeCallback",null);if(C!==null){var M=Zn(g,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",C,M)}return this.setEaseValuePropName("value").setEaseValueDuration(Zn(g,"easeValue.duration",0)).setEaseValueFunction(Zn(g,"easeValue.ease","Linear")),this}get value(){return this._value}set value(g){g=BM(g,0,1);var C=this._value,M=C!=g;this.dirty=this.dirty||M,this._value=g,M&&this.eventEmitter.emit("valuechange",this._value,C,this.eventEmitter)}}return Object.assign(t.prototype,wM,IM),t}const GM=Phaser.Math.RadToDeg,NM={buildShapes(){this.addShape(new Al().setName("track")).addShape(new no().setName("bar")).addShape(new Al().setName("center"))},updateShapes(){var i=this.radius,t=this.thickness*this.radius,s=this.radius-t/2,g=this.radius-t,C=this.getShape("track");this.trackColor!=null&&t>0?C.setCenterPosition(i,i).setRadius(s).lineStyle(t,this.trackColor):C.reset();var M=this.getShape("bar");if(this.barColor!=null&&s>0){var l,T,e;if(this.value===1)l=!1,T=0,e=361;else{l=this.anticlockwise,T=GM(this.startAngle);var d=360*(l?1-this.value:this.value);e=d+T}M.setCenterPosition(i,i).setRadius(s).setAngle(T,e,l).lineStyle(t,this.barColor)}else M.reset();var x=this.getShape("center");this.centerColor&&g>0?x.setCenterPosition(i,i).setRadius(g).fillStyle(this.centerColor):x.reset()}},hi=Phaser.Utils.Objects.GetValue,VM=Phaser.Utils.Objects.IsPlainObject,kM=Phaser.Math.Clamp,zM=Phaser.Math.DegToRad(270);let ro=class extends ks(Ns){constructor(t,s,g,C,M,l,T){VM(s)&&(T=s,s=hi(T,"x",0),g=hi(T,"y",0),C=hi(T,"radius",1),M=hi(T,"barColor",void 0),l=hi(T,"value",0)),C===void 0&&(C=1);var e=C*2;super(t,s,g,e,e),this.type="rexCircularProgress",this.bootProgressBase(T),this.setRadius(C),this.setTrackColor(hi(T,"trackColor",void 0)),this.setBarColor(M),this.setCenterColor(hi(T,"centerColor",void 0)),this.setThickness(hi(T,"thickness",.2)),this.setStartAngle(hi(T,"startAngle",zM)),this.setAnticlockwise(hi(T,"anticlockwise",!1)),this.buildShapes(),this.setValue(l)}resize(t,s){return t=Math.floor(Math.min(t,s)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var s=t*2;this.resize(s,s)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=kM(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}setCenterColor(t){return this.centerColor=t,this}};Object.assign(ro.prototype,NM);ht.register("circularProgress",function(i,t,s,g,C,M){var l=new ro(this.scene,i,t,s,g,C,M);return this.scene.add.existing(l),l});ot(window,"RexPlugins.UI.CircularProgress",ro);var fh=function(i,t,s,g,C,M,l,T,e,d,x,u){d===void 0&&(d=0),x===void 0&&(x=2*Math.PI),u===void 0&&(u=!1),t.beginPath(),t.ellipse(s,g,C,M,0,d,x,u),l!=null&&(t.fillStyle=l,t.fill()),T!=null&&(t.strokeStyle=T,t.lineWidth=e,t.stroke())},UM=function(i,t,s,g,C,M,l,T,e,d,x){e===void 0&&T!=null&&(e=2),d===void 0&&(d="start"),x===void 0&&(x="alphabetic"),t.font=M,t.textAlign=d,t.textBaseline=x,t.fillStyle=l,t.strokeStyle=T,t.lineWidth=e,t.lineCap="round",t.lineJoin="round",T!=null&&T!=="none"&&e>0&&t.strokeText(C,s,g),l!=null&&l!=="none"&&t.fillText(C,s,g)},YM=function(){var i=this.radius,t=this.thickness*this.radius,s=this.radius-t/2,g=this.radius-t,C=this.canvas,M=this.context;if(this.trackColor&&t>0&&(M.save(),fh(C,M,i,i,s,s,void 0,this.trackColor,t),M.restore()),this.barColor&&s>0){var l,T,e;if(this.value===1)l=!1,T=0,e=2*Math.PI;else{l=this.anticlockwise,T=this.startAngle;var d=2*Math.PI*(l?1-this.value:this.value);e=d+T}M.save(),fh(C,M,i,i,s,s,void 0,this.barColor,t,T,e,l),M.restore()}if(this.centerColor&&g>0){var x;this.centerColor2?(x=this.context.createRadialGradient(i,i,0,i,i,g),x.addColorStop(0,this.centerColor),x.addColorStop(1,this.centerColor2)):x=this.centerColor,M.save(),fh(C,M,i,i,g,g,x),M.restore()}this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(M.save(),UM(C,M,i,i,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),M.restore())};const se=Phaser.Utils.Objects.GetValue,XM=Phaser.Utils.Objects.IsPlainObject,WM=Phaser.Math.Clamp,HM=Phaser.Math.DegToRad(270);class Eg extends ks(as){constructor(t,s,g,C,M,l,T){XM(s)&&(T=s,s=se(T,"x",0),g=se(T,"y",0),C=se(T,"radius",1),M=se(T,"barColor",void 0),l=se(T,"value",0));var e=C*2;super(t,s,g,e,e),this.type="rexCircularProgressCanvas",this.bootProgressBase(T),this.setRadius(C),this.setTrackColor(se(T,"trackColor",void 0)),this.setBarColor(M),this.setCenterColor(se(T,"centerColor",void 0)),this.setThickness(se(T,"thickness",.2)),this.setStartAngle(se(T,"startAngle",HM)),this.setAnticlockwise(se(T,"anticlockwise",!1)),this.setTextColor(se(T,"textColor",void 0)),this.setTextStrokeColor(se(T,"textStrokeColor",void 0),se(T,"textStrokeThickness",void 0));var d=se(T,"textFont",void 0);d?this.setTextFont(d):this.setTextFont(se(T,"textSize","16px"),se(T,"textFamily","Courier"),se(T,"textStyle","")),this.setTextFormatCallback(se(T,"textFormatCallback",void 0),se(T,"textFormatCallbackScope",void 0)),this.setValue(l)}resize(t,s){return t=Math.floor(Math.min(t,s)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var s=t*2;this.resize(s,s)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){t=St(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){t=St(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=WM(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){t=St(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}get centerColor2(){return this._centerColor2}set centerColor2(t){t=St(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=t,this._centerColor2=t}setCenterColor(t,s){return this.centerColor=t,this.centerColor2=s,this}get textColor(){return this._textColor}set textColor(t){t=St(t,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=t,this._textColor=t}setTextColor(t){return this.textColor=t,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(t){t=St(t,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=t,this._textStrokeColor=t}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(t){this.dirty=this.dirty||this._textStrokeThickness!=t,this._textStrokeThickness=t}setTextStrokeColor(t,s){return s===void 0&&(s=2),this.textStrokeColor=t,this.textStrokeThickness=s,this}get textFont(){return this._textFont}set textFont(t){this.dirty=this.dirty||this._textFont!=t,this._textFont=t}setTextFont(t,s,g){var C;return s===void 0?C=t:C=g+" "+t+" "+s,this.textFont=C,this}setTextFormatCallback(t,s){return this.textFormatCallback=t,this.textFormatCallbackScope=s,this}updateTexture(){return this.clear(),YM.call(this),super.updateTexture(),this}getFormatText(t){t===void 0&&(t=this.value);var s;return this.textFormatCallbackScope?s=this.textFormatCallback(t):s=this.textFormatCallback.call(this.textFormatCallbackScope,t),s}}ht.register("circularProgressCanvas",function(i,t,s,g,C,M){var l=new Eg(this.scene,i,t,s,g,C,M);return this.scene.add.existing(l),l});ot(window,"RexPlugins.UI.CircularProgressCanvas",Eg);var $M=function(){var i=this.skewX,t=this.width-Math.abs(i),s=this.height,g=this.getShape("trackFill");g.fillStyle(this.trackColor),g.isFilled&&ch(g,0,0,t,s,i).close();var C=this.getShape("bar");if(C.fillStyle(this.barColor),C.isFilled){var M,l;this.rtl?(M=t*(1-this.value),l=t):(M=0,l=t*this.value),ch(C,M,0,l,s,i).close()}var T=this.getShape("trackStroke");T.lineStyle(this.trackStrokeThickness,this.trackStrokeColor),T.isStroked&&ch(T,0,0,t,s,i).end()},ch=function(i,t,s,g,C,M){return M>=0?i.startAt(t+M,s).lineTo(g+M,s).lineTo(g,C).lineTo(t,C).lineTo(t+M,s):i.startAt(t,s).lineTo(g,s).lineTo(g-M,C).lineTo(t-M,C).lineTo(t,s),i};const le=Phaser.Utils.Objects.GetValue,vh=Phaser.Utils.Objects.IsPlainObject;let uu=class extends ks(Ns){constructor(t,s,g,C,M,l,T,e){vh(s)?(e=s,s=le(e,"x",0),g=le(e,"y",0),C=le(e,"width",2),M=le(e,"height",2),l=le(e,"barColor",void 0),T=le(e,"value",0)):vh(C)?(e=C,C=le(e,"width",2),M=le(e,"height",2),l=le(e,"barColor",void 0),T=le(e,"value",0)):vh(l)&&(e=l,l=le(e,"barColor",void 0),T=le(e,"value",0)),super(t,s,g,C,M,e),this.type="rexLineProgress",this.bootProgressBase(e),this.addShape(new Sn().setName("trackFill")).addShape(new Sn().setName("bar")).addShape(new Sn().setName("trackStroke")),this.setTrackColor(le(e,"trackColor",void 0)),this.setBarColor(l),this.setTrackStroke(le(e,"trackStrokeThickness",2),le(e,"trackStrokeColor",void 0)),this.setSkewX(le(e,"skewX",0)),this.setRTL(le(e,"rtl",!1)),this.setValue(T)}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,s){return this.trackStrokeThickness=t,this.trackStrokeColor=s,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}};var KM={updateShapes:$M};Object.assign(uu.prototype,KM);ht.register("lineProgress",function(i,t,s,g,C,M,l){var T=new uu(this.scene,i,t,s,g,C,M,l);return this.scene.add.existing(T),T});ot(window,"RexPlugins.UI.LineProgress",uu);var ZM=function(i,t){i.save(),i.beginPath();var s=t[0];i.moveTo(s.x,s.y);for(var g=1,C=t.length;g<C;g++)s=t[g],i.lineTo(s.x,s.y);i.closePath(),i.restore()},ph=function(i,t,s,g,C,M,l){l===void 0&&(l="round"),ZM(t,s),t.lineJoin=l,g!=null&&(t.fillStyle=g,t.fill()),C!=null&&(t.strokeStyle=C,t.lineWidth=M,t.stroke())},jM=function(){var i=this.skewX,t=this.width-Math.abs(i),s=this.height,g=this.canvas,C=this.context;(this.trackColor||this.trackStrokeColor)&&Yf(0,0,t,s,i,this.trackPoints);var M,l;if(this.barColor&&(this.rtl?(M=t*(1-this.value),l=t):(M=0,l=t*this.value),Yf(M,0,l,s,i,this.barPoints)),this.trackColor&&(C.save(),ph(g,C,this.trackPoints,this.trackColor),C.restore()),this.barColor){C.save();var T;if(this.barColor2){var e;if(this.isHorizontalGradient){var d=s/2;e=C.createLinearGradient(M,d,l,d)}else{var x=t/2;e=C.createLinearGradient(x,0,x,s)}e.addColorStop(0,this.rtl?this.barColor:this.barColor2),e.addColorStop(1,this.rtl?this.barColor2:this.barColor),T=e}else T=this.barColor;ph(g,C,this.barPoints,T),C.restore()}this.trackStrokeColor&&this.trackStrokeThickness>0&&(C.save(),ph(g,C,this.trackPoints,void 0,this.trackStrokeColor,this.trackStrokeThickness),C.restore())},Yf=function(i,t,s,g,C,M){M===void 0&&(M=[]),M.length=4;for(var l=0;l<4;l++)M[l]||(M[l]={});var T;return C>=0?(T=M[0],T.x=i+C,T.y=t,T=M[1],T.x=s+C,T.y=t,T=M[2],T.x=s,T.y=g,T=M[3],T.x=i,T.y=g):(T=M[0],T.x=i,T.y=t,T=M[1],T.x=s,T.y=t,T=M[2],T.x=s-C,T.y=g,T=M[3],T.x=i-C,T.y=g),M};const ne=Phaser.Utils.Objects.GetValue,gh=Phaser.Utils.Objects.IsPlainObject;class du extends ks(as){constructor(t,s,g,C,M,l,T,e){gh(s)?(e=s,s=ne(e,"x",0),g=ne(e,"y",0),C=ne(e,"width",2),M=ne(e,"height",2),l=ne(e,"barColor",void 0),T=ne(e,"value",0)):gh(C)?(e=C,C=ne(e,"width",2),M=ne(e,"height",2),l=ne(e,"barColor",void 0),T=ne(e,"value",0)):gh(l)&&(e=l,l=ne(e,"barColor",void 0),T=ne(e,"value",0)),super(t,s,g,C,M),this.type="rexLineProgressCanvas",this.trackPoints=[],this.barPoints=[],this.bootProgressBase(e),this.setTrackColor(ne(e,"trackColor",void 0)),this.setBarColor(l,ne(e,"barColor2",void 0),ne(e,"isHorizontalGradient",void 0)),this.setTrackStroke(ne(e,"trackStrokeThickness",2),ne(e,"trackStrokeColor",void 0)),this.setSkewX(ne(e,"skewX",0)),this.setRTL(ne(e,"rtl",!1)),this.setValue(T)}get trackColor(){return this._trackColor}set trackColor(t){t=St(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){t=St(t,this.canvas,this.context),this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,s){return this.trackStrokeThickness=t,this.trackStrokeColor=s,this}get barColor(){return this._barColor}set barColor(t){t=St(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}get barColor2(){return this._barColor2}set barColor2(t){t=St(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor2!=t,this._barColor2=t}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setBarColor(t,s,g){return g===void 0&&(g=!0),this.barColor=t,this.barColor2=s,this.isHorizontalGradient=g,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}updateTexture(){return this.clear(),jM.call(this),super.updateTexture(),this}}ht.register("circularProgressCanvas",function(i,t,s,g,C,M,l){var T=new du(this.scene,i,t,s,g,C,M,l);return this.scene.add.existing(T),T});ot(window,"RexPlugins.UI.LineProgressCanvas",du);Phaser.Math.Wrap;const _s=Phaser.Math.Linear;var JM=function(){var i=this.getShape("triangle"),t=this.padding,s=this.width-t.right,g=0+t.left,C=this.height-t.bottom,M=0+t.top,l=(g+s)/2,T=(M+C)/2,e={0:{a:{x:g,y:M},b:{x:s,y:T},c:{x:g,y:C}},1:{a:{x:g,y:M},b:{x:l,y:C},c:{x:s,y:M}},2:{a:{x:s,y:M},b:{x:g,y:T},c:{x:s,y:C}},3:{a:{x:g,y:C},b:{x:l,y:M},c:{x:s,y:C}}},d,x,u,h,o,n;if(this.previousDirection===void 0){var r=e[this.direction],f=r.a,a=r.b,c=r.c;d=f.x,x=f.y,u=a.x,h=a.y,o=c.x,n=c.y}else{var p=e[this.previousDirection],v=e[this.direction],m=this.easeDirectionProgress;d=_s(p.a.x,v.a.x,m),x=_s(p.a.y,v.a.y,m),u=_s(p.b.x,v.b.x,m),h=_s(p.b.y,v.b.y,m),o=_s(p.c.x,v.c.x,m),n=_s(p.c.y,v.c.y,m)}i.startAt(d,x).lineTo(u,h).lineTo(o,n),this.arrowOnly?i.end():i.close()};const QM=Phaser.Math.DegToRad,_r=QM(120);var qM=function(t){var t=this.getShape("triangle"),s=this.width/2,g=this.height/2,C=Math.min(s,g)*this.radius,M=this.verticeRotation;t.startAt(s+C*Math.cos(M+_r),g+C*Math.sin(M+_r)).lineTo(s+C*Math.cos(M),g+C*Math.sin(M)).lineTo(s+C*Math.cos(M-_r),g+C*Math.sin(M-_r)),this.arrowOnly?t.end():t.close()};const _M={buildShapes(){this.addShape(new Sn().setName("triangle"))},updateShapes(){var i=this.getShape("triangle");this.arrowOnly?i.fillStyle().lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha):i.fillStyle(this.fillColor,this.fillAlpha).lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha),this.shapeMode===0?JM.call(this):qM.call(this)}},tw={setEaseDuration(i){return i===void 0&&(i=0),this.easeDuration=i,this},playEaseDirectionation(){return this.easeDirectionProgressTask===void 0&&(this.easeDirectionProgressTask=new Vs(this,{eventEmitter:null})),this.easeDirectionProgressTask.restart({key:"easeDirectionProgress",from:0,to:1,duration:this.easeDuration}),this},stopEaseDirection(){return this.easeDirectionProgressTask===void 0?this:(this.easeDirectionProgressTask.stop(),this)}},tn=Phaser.Utils.Objects.GetValue,ew=Phaser.Utils.Objects.IsPlainObject,iw=Phaser.Math.DegToRad,sw=Phaser.Math.RadToDeg;class ao extends Ns{constructor(t,s,g,C,M,l,T){var e,d,x,u,h,o,n,r;if(ew(s)){var f=s;s=f.x,g=f.y,C=f.width,M=f.height,l=f.color,T=f.alpha,e=f.strokeColor,d=f.strokeAlpha,x=f.strokeWidth,u=f.arrowOnly,h=f.direction,o=f.easeDuration,n=f.padding,r=f.radius}s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=1),M===void 0&&(M=C),u===void 0&&(u=!1),h===void 0&&(h=0),o===void 0&&(o=0),n===void 0&&(n=0),r===void 0&&(r=void 0),super(t,s,g,C,M),this.type="rexTriangle",this.setFillStyle(l,T),e!==void 0&&x===void 0&&(x=2),this.setStrokeStyle(x,e,d),this.setArrowOnly(u),this.setDirection(h,o),this.setPadding(n),this.setRadius(r),this.buildShapes()}get arrowOnly(){return this._arrowOnly}set arrowOnly(t){this.dirty=this.dirty||this._arrowOnly!=t,this._arrowOnly=t}setArrowOnly(t){return t===void 0&&(t=!0),this.arrowOnly=t,this}get direction(){return this._direction}set direction(t){t=rw(t),this._direction!==t&&(this.easeDuration>0&&this._direction!==void 0?this.previousDirection=this._direction:this.previousDirection=void 0,this._direction=t,this.verticeAngle=t*90,this.dirty=!0,this.previousDirection!==void 0?this.playEaseDirectionation():this.stopEaseDirection())}setDirection(t,s){return s!==void 0&&this.setEaseDuration(s),this.direction=t,this}toggleDirection(t){return this.setDirection(this.direction+2,t),this}get easeDirectionProgress(){return this._easeDirectionProgress}set easeDirectionProgress(t){this._easeDirectionProgress!==t&&(this._easeDirectionProgress=t,this.dirty=!0)}setPadding(t,s,g,C){if(typeof t=="object"){var M=t,l=tn(M,"x",null);l!==null?(t=l,g=l):(t=tn(M,"left",0),g=tn(M,"right",t));var T=tn(M,"y",null);T!==null?(s=T,C=T):(s=tn(M,"top",0),C=tn(M,"bottom",s))}else t===void 0&&(t=0),s===void 0&&(s=t),g===void 0&&(g=t),C===void 0&&(C=s);return this.padding===void 0&&(this.padding={}),this.dirty=this.dirty||this.padding.left!=t||this.padding.top!=s||this.padding.right!=g||this.padding.bottom!=C,this.padding.left=t,this.padding.top=s,this.padding.right=g,this.padding.bottom=C,this.setRadius(),this}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this.shapeMode=t==null?0:1,this}get verticeRotation(){return this._verticeRotation}set verticeRotation(t){this.dirty=this.dirty||this._verticeRotation!=t,this._verticeRotation=t}setVerticeRotation(t){return this.verticeRotation=t,this}get verticeAngle(){return sw(this.verticeRotation)}set verticeAngle(t){this.verticeRotation=iw(t)}setVerticeAngle(t){return this.verticeAngle=t,this}}const nw={right:0,down:1,left:2,up:3};var rw=function(i){return typeof i=="string"&&(i=nw[i]),i=i%4,i};Object.assign(ao.prototype,_M,tw);ht.register("triangle",function(i,t,s,g,C,M){var l=new ao(this.scene,i,t,s,g,C,M);return this.scene.add.existing(l),l});ot(window,"RexPlugins.UI.Triangle",ao);const aw=Phaser.GameObjects.Zone,ow=Phaser.Utils.Array.Add,hw=Phaser.Utils.Array.Remove;let Cr=class extends aw{constructor(t,s,g,C,M){s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=1),M===void 0&&(M=1),super(t,s,g,C,M),this.children=[]}destroy(t){if(!(!this.scene||this.ignoreDestroy)){if(t)for(var s,g=this.children.length-1;g>=0;g--)s=this.children[g],!s.parentContainer&&!s.displayList&&s.destroy(t);this.clear(!t),super.destroy(t)}}contains(t){return this.children.indexOf(t)!==-1}add(t){var s=this;return ow(this.children,t,0,function(g){g.once("destroy",s.onChildDestroy,s)},this),this}remove(t,s){var g=this;return hw(this.children,t,function(C){C.off("destroy",g.onChildDestroy,g),s&&C.destroy()}),this}onChildDestroy(t,s){this.remove(t,!1)}clear(t){for(var s=this,g,C=0,M=this.children.length;C<M;C++)g=this.children[C],g.off("destroy",s.onChildDestroy,s),t&&g.destroy();return this.children.length=0,this}};const Xf=Phaser.GameObjects.Components;Phaser.Class.mixin(Cr,[Xf.Alpha,Xf.Flip]);var Ke=function(i,t){var s;if(t===void 0)i.hasOwnProperty("rexContainer")&&(s=i.rexContainer.parent);else for(s=Ke(i);s&&s.name!==t;)s=Ke(s);return s},Mg=function(i){for(var t=Ke(i);t;)i=t,t=Ke(t);return i};const lw=Phaser.Math.DegToRad,uw=Phaser.Math.RadToDeg;var Lt=function(i){if(!i.hasOwnProperty("rexContainer")){var t={parent:null,self:null,layer:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,visible:!0,active:!0};Object.defineProperty(t,"angle",{get:function(){return uw(this.rotation)},set:function(s){this.rotation=lw(s)}}),Object.defineProperty(t,"displayWidth",{get:function(){return i.width*this.scaleX},set:function(s){this.scaleX=s/i.width}}),Object.defineProperty(t,"displayHeight",{get:function(){return i.height*this.scaleY},set:function(s){this.scaleY=s/i.height}}),i.rexContainer=t}return i.rexContainer};const dw={setParent(i,t){t===void 0&&(t=this);var s=Lt(i);return t?(s.parent=t,s.self=i):(s.parent=null,s.self=null),this},getParent(i,t){return typeof i=="string"&&(t=i,i=void 0),i===void 0&&(i=this),Ke(i,t)},getTopmostParent(i){return i===void 0&&(i=this),Mg(i)}},jn=Phaser.Utils.Objects.GetValue,wg=Cr.prototype.add;var mh=function(i,t){this.setParent(i);var s=Lt(i);return Rg(s,t),this.resetChildState(i).updateChildVisible(i).updateChildActive(i).updateChildScrollFactor(i).updateChildMask(i),wg.call(this,i),this.addToParentContainer(i),this.addToRenderLayer(i),this},xh=function(i,t){this.setParent(i);var s=Lt(i);return Rg(s,t),s.x=i.x,s.y=i.y,s.rotation=i.rotation,s.scaleX=i.scaleX,s.scaleY=i.scaleY,s.alpha=i.alpha,s.visible=i.visible,s.active=i.active,this.updateChildPosition(i).updateChildAlpha(i).updateChildVisible(i).updateChildActive(i).updateChildScrollFactor(i).updateChildMask(i),wg.call(this,i),this.addToRenderLayer(i),this},Rg=function(i,t){t===void 0&&(t=!0),typeof t=="boolean"?(i.syncPosition=t,i.syncRotation=t,i.syncScale=t,i.syncAlpha=t,i.syncScrollFactor=t):(i.syncPosition=jn(t,"syncPosition",!0),i.syncRotation=jn(t,"syncRotation",!0),i.syncScale=jn(t,"syncScale",!0),i.syncAlpha=jn(t,"syncAlpha",!0),i.syncScrollFactor=jn(t,"syncScrollFactor",!0))};const fw={add(i){return Array.isArray(i)?this.addMultiple(i):mh.call(this,i),this},pin(i,t){return Array.isArray(i)?this.addMultiple(i,t):mh.call(this,i,t),this},addMultiple(i){for(var t=0,s=i.length;t<s;t++)mh.call(this,i[t]);return this},addLocal(i){return Array.isArray(i)?this.addMultiple(i):xh.call(this,i),this},pinLocal(i,t){return Array.isArray(i)?this.addMultiple(i,t):xh.call(this,i,t),this},addLocalMultiple(i){for(var t=0,s=i.length;t<s;t++)xh.call(this,i[t]);return this}},Wf=Cr.prototype.remove,cw=Cr.prototype.clear,vw={remove(i,t){return Ke(i)!==this?this:(this.setParent(i,null),t||this.removeFromRenderLayer(i),Wf.call(this,i,t),this)},unpin(i,t){return Ke(i)!==this?this:(this.setParent(i,null),t||this.removeFromRenderLayer(i),Wf.call(this,i,t),this)},clear(i){for(var t=this.children,s=0,g=t.length;s<g;s++){var C=t[s];this.setParent(C,null),i||this.removeFromRenderLayer(C)}return cw.call(this,i),this}},pw={getLocalState(i){return Lt(i)},resetChildState(i){return this.resetChildPositionState(i).resetChildVisibleState(i).resetChildAlphaState(i).resetChildActiveState(i),this},resetChildrenState(i){for(var t=0,s=i.length;t<s;t++)this.resetChildState(i[t]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}},Hf=Phaser.Math.RotateAround,gw={worldToLocal(i){return i.x-=this.x,i.y-=this.y,Hf(i,0,0,-this.rotation),i.x/=this.scaleX,i.y/=this.scaleY,i},localToWorld(i){return i.x*=this.scaleX,i.y*=this.scaleY,Hf(i,0,0,this.rotation),i.x+=this.x,i.y+=this.y,i}};var fr=function(i,t){return i===t?1:i/t};const mw={updateChildPosition(i){i.isRexContainerLite&&(i.syncChildrenEnable=!1);var t=Lt(i),s=t.parent;return t.syncPosition&&(i.x=t.x,i.y=t.y,s.localToWorld(i)),t.syncRotation&&(i.rotation=t.rotation+s.rotation),t.syncScale&&(i.scaleX=t.scaleX*s.scaleX,i.scaleY=t.scaleY*s.scaleY),i.isRexContainerLite&&(i.syncChildrenEnable=!0,i.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(i){var t=Lt(i),s=t.parent;return t.x=i.x,t.y=i.y,s.worldToLocal(t),t.scaleX=fr(i.scaleX,s.scaleX),t.scaleY=fr(i.scaleY,s.scaleY),t.rotation=i.rotation-s.rotation,this},setChildPosition(i,t,s){return i.x=t,i.y=s,this.resetChildPositionState(i),this},setChildLocalPosition(i,t,s){var g=Lt(i);return g.x=t,g.y=s,this.updateChildPosition(i),this},resetLocalPositionState(){var i=Lt(this).parent;return i&&i.resetChildPositionState(this),this}},xw=Phaser.Math.DegToRad,yw={updateChildRotation(i){var t=Lt(i),s=t.parent;return t.syncRotation&&(i.rotation=s.rotation+t.rotation),this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(i){var t=Lt(i),s=t.parent;return t.rotation=i.rotation-s.rotation,this},setChildRotation(i,t){return i.rotation=t,this.resetChildRotationState(i),this},setChildAngle(i,t){return i.angle=t,this.resetChildRotationState(i),this},setChildLocalRotation(i,t){var s=Lt(i);return s.rotation=t,this.updateChildRotation(i),this},setChildLocalAngle(i,t){var s=Lt(i);return s.rotation=xw(t),this.updateChildRotation(i),this},resetLocalRotationState(){var i=Lt(this).parent;return i&&i.resetChildRotationState(this),this}},Tw={updateChildScale(i){var t=Lt(i),s=t.parent;return t.syncScale&&(i.scaleX=s.scaleX*t.scaleX,i.scaleY=s.scaleY*t.scaleY),this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(i){var t=Lt(i),s=t.parent;return t.scaleX=fr(i.scaleX,s.scaleX),t.scaleY=fr(i.scaleY,s.scaleY),this},setChildScale(i,t,s){return s===void 0&&(s=t),i.scaleX=t,i.scaleY=s,this.resetChildScaleState(i),this},setChildLocalScale(i,t,s){s===void 0&&(s=t);var g=Lt(i);return g.scaleX=t,g.scaleY=s,this.updateChildScale(i),this},setChildDisplaySize(i,t,s){return i.setDisplaySize(t,s),this.resetChildScaleState(i),this},resetLocalScaleState(){var i=Lt(this).parent;return i&&i.resetChildScaleState(this),this}},Cw={updateChildVisible(i){var t=Lt(i),s=t.parent,g=t.hasOwnProperty("maskVisible")?t.maskVisible:!0;return i.visible=s.visible&&t.visible&&g,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(i){var t=Lt(i);return t.hasOwnProperty("maskVisible")&&delete t.maskVisible,t.visible=i.visible,this},setChildVisible(i,t){return this.setChildLocalVisible(i,t),this},setChildLocalVisible(i,t){t===void 0&&(t=!0);var s=Lt(i);return s.visible=t,this.updateChildVisible(i),this},setChildMaskVisible(i,t){t===void 0&&(t=!0);var s=Lt(i);return s.maskVisible=t,this.updateChildVisible(i),this},resetLocalVisibleState(){var i=Lt(this).parent;return i&&i.resetChildVisibleState(this),this}},Sw={updateChildAlpha(i){var t=Lt(i),s=t.parent;return t.syncAlpha&&(i.alpha=s.alpha*t.alpha),this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(i){var t=Lt(i),s=t.parent;return t.alpha=fr(i.alpha,s.alpha),this},setChildAlpha(i,t){return i.alpha=t,this.resetChildAlphaState(i),this},setChildLocalAlpha(i,t){var s=Lt(i);return s.alpha=t,this.updateChildAlpha(i),this},resetLocalAlphaState(){var i=Lt(this).parent;return i&&i.resetChildAlphaState(this),this}},Pw={updateChildActive(i){var t=Lt(i),s=t.parent;return i.active=s.active&&t.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(i){var t=Lt(i);return t.active=i.active,this},setChildActive(i,t){return i.active=t,this.resetChildActiveState(i),this},setChildLocalActive(i,t){t===void 0&&(t=!0);var s=Lt(i);return s.active=t,this.updateChildActive(i),this},resetLocalActiveState(){var i=Lt(this).parent;return i&&i.resetChildActiveState(this),this}},Ew={updateChildScrollFactor(i){var t=Lt(i),s=t.parent;return t.syncScrollFactor&&i.setScrollFactor(s.scrollFactorX,s.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},Mw={updateChildMask(i){if(this.mask==null)return this;var t=this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask;return t!==i&&(i.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(i){return this.mask=i,this},clearMask(i){return i===void 0&&(i=!1),this._mask=null,this.children.forEach(function(t){t.clearMask(!1)}),i&&this.mask&&this.mask.destroy(),this}},ww={setDepth(i,t){if(this.depth=i,!t&&this.children)for(var s=this.getAllChildren(),g=0,C=s.length;g<C;g++)s[g].depth=i;return this},swapDepth(i){var t=this.depth,s=i.depth;return this.setDepth(s),i.setDepth(t),this},incDepth(i){if(this.depth+=i,this.children)for(var t=this.getAllChildren(),s=0,g=t.length;s<g;s++)t[s].depth+=i;return this},bringToTop(){var i=this.displayList,t=this.getAllChildren([this]);Di(t,!1);for(var s=0,g=t.length;s<g;s++){var C=t[s];i.exists(C)&&i.bringToTop(C)}return this},moveDepthBelow(i){var t=this.displayList;if(i.displayList!==t)return this;var s=this.getAllChildren([this]);Di(s,!1);for(var g=0,C=s.length;g<C;g++){var M=s[g];if(t.exists(M)){t.moveBelow(i,M);break}}return this},moveDepthAbove(i){var t=this.displayList;if(i.displayList!==t)return this;var s=this.getAllChildren([this]);Di(s,!0);for(var g=0,C=s.length;g<C;g++){var M=s[g];if(t.exists(M)){t.moveAbove(i,M);break}}return this},bringChildToTop(i){var t=this.getAllChildren([this]);Di(t,!0);var s=t[0];return s===i?this:s.displayList!==i.displayList?this:(s.displayList.moveAbove(i,s),this)},sendChildToBack(i){var t=this.getAllChildren([this]);Di(t,!1);var s=t[0];return s===i?this:s.displayList!==i.displayList?this:(s.displayList.moveBelow(i,s),this)}};var Ag=function(i,t){var s=t(i);if(!s&&i.isRexContainerLite)for(var g=i.children,C=0,M=g.length;C<M;C++)Ag(g[C],t)},yh=function(i,t){for(var s=[i];s.length>0;){var g=s.shift(),C=t(g);!C&&g.isRexContainerLite&&s.push(...g.children)}};const gs=Phaser.Utils.Array,Rw={getChildren(i){if(!i)i=this.children;else for(var t=0,s=this.children.length;t<s;t++)i.push(this.children[t]);return i},getAllChildren(i){i===void 0&&(i=[]);var t=this;return yh(t,function(s){s!==t&&i.push(s)}),i},getAllVisibleChildren(i){i===void 0&&(i=[]);var t=this;return yh(t,function(s){if(s!==t){if(!s.visible)return!0;i.push(s)}}),i},bfs(i,t){return t===void 0&&(t=this),yh(t,i),this},dfs(i,t){return t===void 0&&(t=this),Ag(t,i),this},contains(i){var t=Ke(i);return t?t===this?!0:this.contains(t):!1},getByName(i,t){if(t){for(var s=[this],g,C;s.length;){g=s.shift();for(var M=0,l=g.children.length;M<l;M++){if(C=g.children[M],C.name===i)return C;C.isRexContainerLite&&s.push(C)}}return null}else return gs.GetFirst(this.children,"name",i)},getRandom(i,t){return gs.GetRandom(this.children,i,t)},getFirst(i,t,s,g){return gs.GetFirstElement(this.children,i,t,s,g)},getAll(i,t,s,g){return gs.GetAll(this.children,i,t,s,g)},count(i,t,s,g){return gs.CountAllMatching(this.children,i,t,s,g)},swap(i,t){return gs.Swap(this.children,i,t),this},setAll(i,t,s,g){return gs.SetAll(this.children,i,t,s,g),this}};var $f=function(i){for(var t=[],s=0,g=i.length;s<g;s++){var C=i[s];C.hasOwnProperty("rexContainer")&&t.push(C.rexContainer)}return t},Aw=function(i){for(var t=0,s=i.length;t<s;t++){var g=i[t].scene;if(g)return g}return null},Kf=function(i,t,s){if(!s.parent){i.remove();return}var g=s.parent,C=s.self;switch(t){case"x":case"y":g.updateChildPosition(C);break;case"angle":case"rotation":g.updateChildRotation(C);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":g.updateChildScale(C);break;case"alpha":g.updateChildAlpha(C);break;default:g.updateChildPosition(C),g.updateChildRotation(C),g.updateChildScale(C),g.updateChildAlpha(C);break}};const Ow={tweenChild(i){var t=i.targets;Array.isArray(t)||(t=[t]);var s=this.scene||Aw(t);if(s){i.targets=$f(t);var g=s.tweens.add(i);return g.on("update",Kf),g}},tweenSelf(i){return i.targets=[this],this.tweenChild(i)},createTweenChildConfig(i){var t=i.targets;t&&(Array.isArray(t)||(t=[t]),i.targets=$f(t));var s=i.onUpdate;return i.onUpdate=function(g,C){s&&s(g,C),Kf(g,void 0,C)},i},tween(i){var t=this.scene;return i.targets||(i.targets=this),t.tweens.add(i)}},bw={addToContainer(i){this._setParentContainerFlag=!0;var t=this.getAllChildren([this]);return Di(t),i.add(t),this._setParentContainerFlag=!1,this},addToLayer(i){return this.addToContainer(i),this},removeFromContainer(){if(!this.parentContainer)return this;var i=this.getAllChildren([this]).filter(function(t){return!!t.scene});return i.length===0?this:(this._setParentContainerFlag=!0,i.length>1&&(Di(i),i.reverse()),this.parentContainer.remove(i),this._setParentContainerFlag=!1,this)},getParentContainer(){if(this.parentContainer)return this.parentContainer;for(var i=this.getParent();i;){var t=i.parentContainer;if(t)return t;i=i.getParent()}return null},addToParentContainer(i){if(!i.displayList)return this;var t=this.getParentContainer();return t?(i.isRexContainerLite?i.addToContainer(t):t.add(i),this):this}},Fw={enableLayer(){if(this.privateRenderLayer)return this;var i=this.scene.add.layer();return this.moveDepthBelow(i),this.addToLayer(i),this.privateRenderLayer=i,this},getLayer(){return this.privateRenderLayer||this.enableLayer(),this.privateRenderLayer},getRenderLayer(){if(this.privateRenderLayer)return this.privateRenderLayer;for(var i=this.getParent();i;){var t=i.privateRenderLayer;if(t)return t;i=i.getParent()}return null},addToRenderLayer(i){if(!i.displayList)return this;var t=this.getRenderLayer();if(!t)return this;i.isRexContainerLite?i.addToLayer(t):t.add(i);var s=Lt(i);return s.layer=t,this},removeFromRenderLayer(i){var t=Lt(i),s=t.layer;return s?(s.remove(i),t.layer=null,this):this}},Zf=Phaser.Geom.Rectangle,Lw=Phaser.Geom.Rectangle.Union;var Dw=function(i,t){t===void 0?t=new Zf:t===!0&&(Th===void 0&&(Th=new Zf),t=Th),t.setTo(0,0,0,0);for(var s,g=!0,C=0,M=i.length;C<M;C++)if(s=i[C],!!s.getBounds){var l=_l(s,!0);g?(t.setTo(l.x,l.y,l.width,l.height),g=!1):Lw(l,t,t)}return t},Th;const Iw=Phaser.GameObjects.GameObject;var ls=function(i){return i instanceof Iw},ms=Phaser.Utils.Objects.GetValue,Bw=Phaser.Textures.DynamicTexture,Gw=Phaser.Utils.String.UUID,fu=function(i){if(i){var t=i.gameObjects,s=i.renderTexture,g=ms(i,"x",void 0),C=ms(i,"y",void 0),M=ms(i,"width",void 0),l=ms(i,"height",void 0),T=ms(i,"originX",0),e=ms(i,"originY",0),d=ms(i,"padding",0),x,u;if(M===void 0||l===void 0||g===void 0||C===void 0){var h=Dw(t,!0),o=g!==void 0&&C!==void 0;o?(M=Math.max(g-h.left,h.right-g)*2,l=Math.max(C-h.top,h.bottom-C)*2,T=.5,e=.5):(g=h.x,C=h.y,M=h.width,l=h.height,T=0,e=0),x=h.x,u=h.y}else x=g+(0-T)*M,u=C+(0-e)*l;x-=d,u-=d,M+=d*2,l+=d*2;var n=t[0].scene;r&&!s&&(s=new Bw(n.sys.textures,Gw(),M,l)),s||(s=n.add.renderTexture(0,0,M,l)),s.setPosition&&s.setPosition(g,C),(s.width!==M||s.height!==l)&&s.setSize(M,l),s.setOrigin&&s.setOrigin(T,e),s.camera.setScroll(x,u),t=Di(Ls(t)),s.draw(t);var r=i.saveTexture;if(r)if(ls(s))s.saveTexture(r);else{var f=s,a=f.manager;a.exists(f.key)?a.renameTexture(f.key,key):(f.key=key,a.list[key]=f,a.emit("addtexture",key,f),a.emit(`addtexture-${key}`,f))}return s}};const Nw={snapshot(i){var t=this.scaleX,s=this.scaleY,g=t===1&&s===1;g||this.setScale(1),i===void 0&&(i={}),i.gameObjects=this.getAllVisibleChildren(),i.x=this.x,i.y=this.y,i.originX=this.originX,i.originY=this.originY;var C=fu(i),M=!!C.scene;return g||(this.setScale(t,s),M&&C.setScale(t,s)),M?C:this}},jf=Phaser.Utils.Objects.GetValue;var Vw=function(i,t){var s=jf(t,"drawContainer",!0),g=jf(t,"children");return g===void 0&&(g=this.getAllVisibleChildren([this])),s||(g=g.filter(function(C){return!C.isRexContainerLite})),Xp(g,i,t),this};const kw=Phaser.Math.RotateAround;var zw=function(i,t,s){s===void 0&&(s=t);var g={x:(t-i.originX)*i.displayWidth,y:(s-i.originY)*i.displayHeight};return kw(g,0,0,i.rotation),i.originX=t,i.originY=s,i.x=i.x+g.x,i.y=i.y+g.y,i},Uw=function(i,t){this.syncChildrenEnable=!1,zw(this,i,t),this.syncChildrenEnable=!0;for(var s=this.getAllChildren(),g=0,C=s.length;g<C;g++)this.resetChildPositionState(s[g]);return this},Og={changeOrigin:Uw,drawBounds:Vw};Object.assign(Og,dw,fw,vw,pw,gw,mw,yw,Tw,Cw,Sw,Pw,Ew,Mw,ww,Rw,Ow,bw,Fw,Nw);class Ne extends Cr{constructor(t,s,g,C,M,l){Array.isArray(C)&&(l=C,C=void 0,M=void 0),super(t,s,g,C,M),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,this.privateRenderLayer=void 0,l&&this.add(l)}destroy(t){!this.scene||this.ignoreDestroy||(this.syncChildrenEnable=!1,super.destroy(t),this.privateRenderLayer&&(this.privateRenderLayer.list.length=0,this.privateRenderLayer.destroy()))}resize(t,s){return this.setSize(t,s),this}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.syncPosition())}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.syncPosition())}get rotation(){return super.rotation}set rotation(t){this.rotation!==t&&(super.rotation=t,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(t){this.scaleX!==t&&(super.scaleX=t,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(t){this.scaleY!==t&&(super.scaleY=t,this.syncPosition())}get scale(){return super.scale}set scale(t){this.scale!==t&&(super.scale=t,this.syncPosition())}get visible(){return super.visible}set visible(t){super.visible!==t&&(super.visible=t,this.syncVisible())}get alpha(){return super.alpha}set alpha(t){super.alpha!==t&&(super.alpha=t,this.syncAlpha())}get active(){return this._active}set active(t){this._active!==t&&(this._active=t,this.syncActive())}get mask(){return this._mask}set mask(t){this._mask!==t&&(this._mask=t,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}get list(){return this.children}static GetParent(t){return Ke(t)}get parentContainer(){return this._parentContainer}set parentContainer(t){if(!this._parentContainer&&!t){this._parentContainer=t;return}if(this.setParentContainerFlag){this._parentContainer=t;return}this._parentContainer&&!t?(this.removeFromContainer(),this._parentContainer=t):t?(this._parentContainer=t,this.addToContainer(t)):this._parentContainer=t}get setParentContainerFlag(){if(this._setParentContainerFlag)return!0;var t=Ke(this);return t?t.setParentContainerFlag:!1}}Object.assign(Ne.prototype,Og);var oo=function(i){return i.hasOwnProperty("rexSizer")||(i.rexSizer={}),i.rexSizer};function Yw(i){return i===void 0&&(i=this),oo(i)}var Xw=function(i){var t=oo(i);return t.hasOwnProperty("prevState")||(t.prevState={}),t.prevState},Ww=function(i){return i===void 0&&(i=bn(this.scene)),this.left=Math.max(this.left,i.left),this.right=Math.min(this.right,i.right),this.top=Math.max(this.top,i.top),this.bottom=Math.min(this.bottom,i.bottom),this};const Ee=Phaser.Display.Align,Ye={center:Ee.CENTER,left:Ee.LEFT_CENTER,right:Ee.RIGHT_CENTER,top:Ee.TOP_CENTER,bottom:Ee.BOTTOM_CENTER,"left-top":Ee.TOP_LEFT,"left-center":Ee.LEFT_CENTER,"left-bottom":Ee.BOTTOM_LEFT,"center-top":Ee.TOP_CENTER,"center-center":Ee.CENTER,"center-bottom":Ee.BOTTOM_CENTER,"right-top":Ee.TOP_RIGHT,"right-center":Ee.RIGHT_CENTER,"right-bottom":Ee.BOTTOM_RIGHT};var Ol=new Phaser.GameObjects.Zone({sys:{queueDepthSort:ge,events:{once:ge}}},0,0,1,1);Ol.setOrigin(0);var Vi={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},cu=function(i){var t=It(i);return i.y+t-t*i.originY},vu=function(i){var t=Ut(i);return i.x-t*i.originX+t*.5},pu=function(i,t){var s=It(i);return i.y=t-s+s*i.originY,i},gu=function(i,t){var s=Ut(i),g=s*i.originX;return i.x=t+g-s*.5,i},Hw=function(i,t,s,g){return s===void 0&&(s=0),g===void 0&&(g=0),gu(i,vu(t)+s),pu(i,cu(t)+g),i},mu=function(i){var t=Ut(i);return i.x-t*i.originX},xu=function(i,t){var s=Ut(i);return i.x=t+s*i.originX,i},$w=function(i,t,s,g){return s===void 0&&(s=0),g===void 0&&(g=0),xu(i,mu(t)-s),pu(i,cu(t)+g),i},yu=function(i){var t=Ut(i);return i.x+t-t*i.originX},Tu=function(i,t){var s=Ut(i);return i.x=t-s+s*i.originX,i},Kw=function(i,t,s,g){return s===void 0&&(s=0),g===void 0&&(g=0),Tu(i,yu(t)+s),pu(i,cu(t)+g),i},Cu=function(i,t){var s=It(i),g=s*i.originY;return i.y=t+g-s*.5,i},Zw=function(i,t,s){return gu(i,t),Cu(i,s)},Su=function(i){var t=It(i);return i.y-t*i.originY+t*.5},jw=function(i,t,s,g){return s===void 0&&(s=0),g===void 0&&(g=0),Zw(i,vu(t)+s,Su(t)+g),i},Jw=function(i,t,s,g){return s===void 0&&(s=0),g===void 0&&(g=0),xu(i,mu(t)-s),Cu(i,Su(t)+g),i},Qw=function(i,t,s,g){return s===void 0&&(s=0),g===void 0&&(g=0),Tu(i,yu(t)+s),Cu(i,Su(t)+g),i},Pu=function(i){var t=It(i);return i.y-t*i.originY},Eu=function(i,t){var s=It(i);return i.y=t+s*i.originY,i},qw=function(i,t,s,g){return s===void 0&&(s=0),g===void 0&&(g=0),gu(i,vu(t)+s),Eu(i,Pu(t)-g),i},_w=function(i,t,s,g){return s===void 0&&(s=0),g===void 0&&(g=0),xu(i,mu(t)-s),Eu(i,Pu(t)-g),i},tR=function(i,t,s,g){return s===void 0&&(s=0),g===void 0&&(g=0),Tu(i,yu(t)+s),Eu(i,Pu(t)-g),i},Mi=[];Mi[Vi.BOTTOM_CENTER]=Hw;Mi[Vi.BOTTOM_LEFT]=$w;Mi[Vi.BOTTOM_RIGHT]=Kw;Mi[Vi.CENTER]=jw;Mi[Vi.LEFT_CENTER]=Jw;Mi[Vi.RIGHT_CENTER]=Qw;Mi[Vi.TOP_CENTER]=qw;Mi[Vi.TOP_LEFT]=_w;Mi[Vi.TOP_RIGHT]=tR;var bg=function(i,t,s,g,C){return Mi[s](i,t,g,C)},Sr=function(i,t,s,g,C,M){Ol.setPosition(t,s).setSize(g,C),bg(i,Ol,M)};const en=Phaser.Utils.Objects.GetValue,eR=Phaser.GameObjects.Group;var iR=function(i,t){var s=i.scene,g,C,M,l,T;if(typeof t=="number")g=t;else{g=en(t,"color"),C=en(t,"lineWidth");var e=en(t,"name",!1);e&&(M=en(e,"createTextCallback",sR),l=en(e,"createTextCallbackScope",void 0),T=en(e,"align","left-top"),typeof T=="string"&&(T=Ye[T]))}if(g===void 0&&(g=16777215),C===void 0&&(C=1),M&&!i.children){i.children=new eR(s),i.once("destroy",function(r,f){r.children.destroy(!f),r.children=void 0});var d=i.clear.bind(i);i.clear=function(){d(),i.children.clear(!1,!0)}}for(var x=this.getAllShownChildren([this]),u,h,o=0,n=x.length;o<n;o++){if(u=x[o],u.getBounds||u.width!==void 0&&u.height!==void 0)xs=_l(u,xs);else continue;g!=null&&i.lineStyle(C,g).strokeRectShape(xs),u.name&&M&&(l?h=M.call(l,s):h=M(s),h&&(h.setText(u.name),i.children.add(h),Sr(h,xs.x,xs.y,xs.width,xs.height,T)))}return this},sR=function(i,t,s){return i.add.text(0,0,"")},xs=void 0;const ta=Phaser.Utils.Objects.GetValue;var Ln=function(i,t){return t===void 0&&(t={}),typeof i=="number"?(t.left=i,t.right=i,t.top=i,t.bottom=i):(t.left=ta(i,"left",0),t.right=ta(i,"right",0),t.top=ta(i,"top",0),t.bottom=ta(i,"bottom",0)),t};const nR=Ne.prototype.add;var Pr=function(i){return nR.call(this,i),this.sizerEventsEnable&&(i.emit("sizer.add",i,this),this.emit("add",i,this)),this};const rR={addBackground(i,t,s){this.backgroundChildren===void 0&&(this.backgroundChildren=[]),typeof t=="string"&&(s=t,t=void 0),t===void 0&&(t=0),Pr.call(this,i),this.backgroundChildren.push(i);var g=this.getSizerConfig(i);return g.padding=Ln(t),s!==void 0&&this.addChildrenMap(s,i),this},isBackground(i){return this.backgroundChildren===void 0?!1:this.backgroundChildren.indexOf(i)!==-1}},aR=Phaser.Utils.Array.Remove,oR=Ne.prototype.remove;var Er=function(i,t){return this.isBackground(i)&&aR(this.backgroundChildren,i),oR.call(this,i,t),!t&&this.sizerEventsEnable&&(i.emit("sizer.remove",i,this),this.emit("remove",i,this)),this},es=function(i,t){var s=null;if(t===void 0)i.hasOwnProperty("rexContainer")&&(s=i.rexContainer.parent,s?s.isRexSizer||(s=es(s)):s=null);else for(s=es(i);s&&s.name!==t;)s=es(s);return s},hR=function(i){for(var t=es(i);t;)i=t,t=es(t);return i};const Mr={getParentSizer(i,t){return typeof i=="string"&&(t=i,i=void 0),i===void 0&&(i=this),es(i,t)},getTopmostSizer(i){return i===void 0&&(i=this),hR(i)},hasParentSizer(i,t){t===void 0&&(t=this);for(var s=es(t);s;){if(s===i)return!0;s=es(s)}return!1},hasChild(i,t){return t===void 0&&(t=this),this.hasParentSizer(t,i)}},lR=Phaser.Utils.Array.Remove,uR={removeFromParentSizer(){var i=Mr.getParentSizer(gameObject);return i&&i.remove(this),this},removeBackground(i,t){return this.backgroundChildren===void 0?this:this.getParentSizer(i)!==this?this:(lR(this.backgroundChildren,i),Er.call(this,i,t),this)},removeAllBackgrounds(i){if(this.backgroundChildren===void 0)return this;for(var t=this.backgroundChildren.length-1;t>=0;t--)this.remove(this.backgroundChildren[t],i);return this}};var Jf=function(i,t){if(typeof i=="string")this.childrenMap[i]=t;else{var s=i;for(i in s)this.childrenMap[i]=s[i]}return this},dR=function(i){if(typeof i=="object"){var t=i;for(var i in this.childrenMap)if(this.childrenMap[i]===t)return delete this.childrenMap[i],this}return delete this.childrenMap[i],this},fR=function(i,t){if(typeof i=="string"&&(i=i.split(".")),i.length!==0){var s=i.shift(),g=null;if(s.charAt(0)==="#")s=s.substring(1),g=this.getByName(s,t);else if(s.indexOf("[")===-1)this.childrenMap&&(g=this.childrenMap[s]);else{var C=s.match(cR);if(C!=null&&this.childrenMap){var M=this.childrenMap[C[1]];M&&(g=M[C[2]])}}return i.length===0?g:g&&g.childrenMap?g.getElement(i):null}};const cR=/(\S+)\[(\d+)\]/i,vR={getInnerPadding(i){return Oa(this.space,i)},setInnerPadding(i,t){return ts(this.space,i,t),this},getOuterPadding(i){return Oa(this.getSizerConfig(this).padding,i)},setOuterPadding(i,t){return ts(this.getSizerConfig(this).padding,i,t),this},getChildOuterPadding(i,t){return typeof i=="string"&&(i=this.getElement(i)),Oa(this.getSizerConfig(i).padding,t)},setChildOuterPadding(i,t,s){return typeof i=="string"&&(i=this.getElement(i)),ts(this.getSizerConfig(i).padding,t,s),this}};var Mu=function(i){var t=this.childrenWidth,s=this.minWidth!==void 0?this.minWidth:0;return i===void 0?(i=Math.max(s,t),s>0&&t>s&&console.warn(`Layout width warn: ${this.constructor.name}'s minWidth (${s}) < childrenWidth (${t})`)):(s>i||t>i)&&console.warn(`Layout width warn: ${this.constructor.name}'s minWidth (${s}) or childrenWidth (${t} > targetWidth ${i}`),i},pR=function(i){var t,s;for(var g in this.sizerChildren)t=this.sizerChildren[g],t&&t.isRexSizer&&!t.ignoreLayout&&(s=this.getExpandedChildWidth(t,i),s=t.resolveWidth(s),t.resolveChildrenWidth(s))},wu=function(i){var t=this.childrenHeight,s=this.minHeight!==void 0?this.minHeight:0;return i===void 0?(i=Math.max(s,t),s>0&&t>s&&console.warn(`Layout height warn: ${this.constructor.name}'s minHeight (${s}) < childrenHeight (${t})`)):(s>i||t>i)&&console.warn(`Layout height warn: ${this.constructor.name}'s minHeight (${s}) or childrenHeight (${t}) > targetHeight (${i})`),i},gR=function(i,t){},mR=function(i){var t;return i.isRexSizer?t=Math.max(i.minWidth,i.childrenWidth):i.minWidth!==void 0?t=i.minWidth:t=Ut(i),t},xR=function(i){var t;return i.isRexSizer?t=Math.max(i.minHeight,i.childrenHeight):i.minHeight!==void 0?t=i.minHeight:t=It(i),t},yR=function(i,t){return t},TR=function(i,t){return t},CR=function(){return 0},SR=function(){return 0},PR=function(i){i===void 0&&(i=[]);for(var t=i.length,s=this.getChildrenSizers(i),g=i.length,C=t;C<g;C++)s[C].getAllChildrenSizers(i);return i},ER=function(i){return i===void 0&&(i=[]),i};const MR={getShownChildren(i){i===void 0&&(i=[]);for(var t=this.children,s,g=0,C=t.length;g<C;g++)s=t[g],!(s.rexSizer&&s.rexSizer.hidden)&&i.push(s);return i},getAllShownChildren(i){i===void 0&&(i=[]);for(var t=[this];t.length>0;){var s=t.shift();s.rexSizer&&s.rexSizer.hidden||(s!==this&&i.push(s),s.isRexContainerLite&&t.push(...s.children))}return i}};var wr=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var i=this.getChildrenSizers(),t,s=0,g=i.length;s<g;s++)t=i[s],!t.ignoreLayout&&t.preLayout()},wR=function(){var i=this.scaleX,t=this.scaleY,s=i===1&&t===1;return s||this.setScale(1),this.runLayout(),s||this.setScale(i,t),this},RR=function(i,t,s){if(this.ignoreLayout)return this;var g=!i;return g&&this.preLayout(),t=this.resolveWidth(t),g&&(this.resolveChildrenWidth(t),this.runWidthWrap(t)),s=this.resolveHeight(s),this.postResolveSize(t,s),this.resize(t,s),this.sizerEventsEnable&&this.layoutedChildren===void 0&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout()},AR=function(){},OR=function(i,t,s){return this._anchor&&this._anchor.updatePosition(),this},Fg=function(i){var t,s;for(var g in this.sizerChildren)t=this.sizerChildren[g],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(s=this.getExpandedChildWidth(t,i),t.isRexSizer&&(s=t.resolveWidth(s)),t.runWidthWrap(s));return this};class Ru extends he{constructor(t,s){super(t,{eventEmitter:!1}),this.viewport=void 0,this.resetFromJSON(s)}shutdown(t){this.isShutdown||(this.autoAnchor(!1),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(t))}resetFromJSON(t){t===void 0&&(t={});var s,g;t.x!==void 0?(s=null,g=t.x):t.left!==void 0?(s=0,g=t.left):t.right!==void 0?(s=1,g=t.right):t.centerX!==void 0&&(s=.5,g=t.centerX);var C,M;t.y!==void 0?(C=null,M=t.y):t.top!==void 0?(C=0,M=t.top):t.bottom!==void 0?(C=1,M=t.bottom):t.centerY!==void 0&&(C=.5,M=t.centerY);var l,T;g!==void 0&&(g=g.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),l=parseFloat(g[0])/100,T=g[1]===""?0:parseFloat(g[1]));var e,d;M!==void 0&&(M=M.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),e=parseFloat(M[0])/100,d=M[1]===""?0:parseFloat(M[1]));var x=t.width,u,h;x!==void 0&&(x=x.split("%"),u=parseFloat(x[0])/100,h=x[1]===""?0:parseFloat(x[1]));var o=t.height,n,r;o!==void 0&&(o=o.split("%"),n=parseFloat(o[0])/100,r=o[1]===""?0:parseFloat(o[1])),this.setAlign(s,C),this.setPercentage(l,e),this.setOffset(T,d),this.setSizePercentage(u,n),this.setSizePadding(h,r);var f=t.onResizeCallback,a=t.onResizeCallbackScope;f!==void 0&&this.setResizeCallback(f,a);var c=t.onUpdateViewportCallback,p=t.onUpdateViewportCallbackScope;return c!==void 0&&this.setUpdateViewportCallback(c,p),this.autoAnchor(t.enable),this}autoAnchor(t){return t===void 0&&(t=!0),t=!!t,this.autoAnchorEnable===t?this:(t?(this.scene.sys.scale.on("resize",this.anchor,this),this.anchor()):this.scene.sys.scale.off("resize",this.anchor,this),this.autoAnchorEnable=t,this)}setAlign(t,s){return this.alignX=t,this.alignY=s,this}setPercentage(t,s){return this.percentageX=t,this.percentageY=s,this}setOffset(t,s){return this.offsetX=t,this.offsetY=s,this}setSizePercentage(t,s){return this.percentageWidth=t,this.percentageHeight=s,this}setSizePadding(t,s){return this.paddingWidth=t,this.paddingHeight=s,this}setResizeCallback(t,s){return this.onResizeCallback=t,this.onResizeCallbackScope=s,this}setUpdateViewportCallback(t,s){return this.onUpdateViewportCallback=t,this.onUpdateViewportCallbackScope=s,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var t=this.onResizeCallback,s=this.onResizeCallbackScope,g=this.anchorWidth,C=this.anchorHeight;if(!(g===void 0&&C===void 0||!t)){var M=this.parent;g===void 0&&(g=M.width),C===void 0&&(C=M.height),s?t.call(s,g,C,M,this):t(g,C,M,this)}}updatePosition(){var t=this.parent;return this.alignX===null?t.x=this.anchorX:this.alignX!==void 0&&(t.x=this.anchorX+t.displayWidth*(t.originX-this.alignX)),this.alignY===null?t.y=this.anchorY:this.alignY!==void 0&&(t.y=this.anchorY+t.displayHeight*(t.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(this.percentageWidth!==void 0)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(this.percentageHeight!==void 0)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){var t=this.parent.scene.cameras.main;this.viewport=bn(this.scene,t,this.viewport);var s=this.viewport,g=this.onUpdateViewportCallback,C=this.onUpdateViewportCallbackScope;g&&(C?g.call(C,s,this.parent,this):g(s,this.parent,this))}}var bR=function(i){i===void 0&&(i={});var t=i.hasOwnProperty("width"),s=i.hasOwnProperty("height"),g=i.hasOwnProperty("onResizeCallback");return(t||s)&&!g&&(i.onResizeCallback=function(C,M,l){t&&l.setMinWidth(C),s&&l.setMinHeight(M),l.layout()}),this._anchor===void 0?this._anchor=new Ru(this,i):this._anchor.resetFromJSON(i),this};const FR=Phaser.Utils.Objects.GetValue,sn=Phaser.Utils.Objects.GetAdvancedValue,Qf=Phaser.Math.Linear;class cr extends Gs{constructor(t,s){super(t,s),this.scaleStart={},this.scaleEnd={},this.resetFromJSON(s),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(FR(t,"mode",0)),this.setScaleRange(sn(t,"start",void 0),sn(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=LR[t]),this.mode=t,this}setScaleRange(t,s){return typeof t=="number"?(this.startX=t,this.startY=t):(this.startX=sn(t,"x",this.parent.scaleX),this.startY=sn(t,"y",this.parent.scaleY)),typeof s=="number"?(this.endX=s,this.endY=s):(this.endX=sn(s,"x",void 0),this.endY=sn(s,"y",void 0)),this.hasScaleX=this.startX!==void 0&&this.endX!==void 0,this.hasScaleY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;this.hasScaleX&&(t.scaleX=this.startX),this.hasScaleY&&(t.scaleY=this.startY);var s=this.repeat;return this.mode===2&&s!==-1&&(s=(s+1)*2-1),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(s),super.start(),this}updateGameObject(t,s){var g=s.t;s.isOddIteration&&(g=1-g),g=this.easeFn(g),this.hasScaleX&&(t.scaleX=Qf(this.startX,this.endX,g)),this.hasScaleY&&(t.scaleY=Qf(this.startY,this.endY,g))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const LR={stop:0,destroy:1,yoyo:2};var Au=function(i,t,s,g,C){g===void 0&&(g="Cubic");var M,l;switch(s){case 0:case"x":M={x:0},l={x:i.scaleX};break;case 1:case"y":M={y:0},l={y:i.scaleY};break;default:M=0,l=i.scale;break}var T={mode:0,start:M,end:l,duration:t,ease:g};return C===void 0?C=new cr(i,T):C.resetFromJSON(T),C.restart(),C},Lg=function(i,t,s,g,C,M){g===void 0&&(g="Linear"),C instanceof cr&&(M=C,C=void 0),C===void 0&&(C=!0);var l={};switch(l.mode=C?1:0,s){case 0:case"x":l.end={x:0};break;case 1:case"y":l.end={y:0};break;default:l.end=0;break}return l.duration=t,l.ease=g,M===void 0?M=new cr(i,l):M.resetFromJSON(l),M.restart(),M},DR=function(i,t,s,g,C,M,l){s===void 0&&(s=1.2),g===void 0&&(g=0),M===void 0&&(M="Cubic");var T,e;switch(C){case 0:case"x":T={x:i.scaleX},e={x:s};break;case 1:case"y":T={y:i.scaleX},e={y:s};break;default:T=i.scaleX,e=s;break}var d={mode:2,start:T,end:e,duration:t/2,ease:M,repeat:g};return l===void 0?l=new cr(i,d):l.resetFromJSON(d),l.restart(),l};const Ch=Phaser.Utils.Objects.IsPlainObject;var Sh=function(i,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(i.emit(t.completeEventName,i),t.completeEventName=void 0)}),t.on("update",function(){var s=Mr.getParentSizer(i);s&&s.resetChildPositionState(i)})};const Ou={popUp(i,t,s){if(Ch(i)){var g=i;i=g.duration,t=g.orientation,s=g.ease}var C=this._scaleBehavior===void 0;return this._scaleBehavior=Au(this,i,t,s,this._scaleBehavior),C&&Sh(this,this._scaleBehavior),this._scaleBehavior.completeEventName="popup.complete",this},popUpPromise(i,t,s){return this.popUp(i,t,s),fe(this._scaleBehavior)},scaleDownDestroy(i,t,s,g){if(Ch(i)){var C=i;i=C.duration,t=C.orientation,s=C.ease,g=C.destroy}var M=this._scaleBehavior===void 0;return this._scaleBehavior=Lg(this,i,t,s,g,this._scaleBehavior),M&&Sh(this,this._scaleBehavior),this._scaleBehavior.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(i,t,s,g){return this.scaleDownDestroy(i,t,s,g),fe(this._scaleBehavior)},scaleDown(i,t,s){return this.scaleDownDestroy(i,t,s,!1),this},scaleDownPromise(i,t,s){return this.scaleDown(i,t,s),fe(this._scaleBehavior)},scaleYoyo(i,t,s,g,C){if(Ch(i)){var M=i;i=M.duration,t=M.peakValue,s=M.repeat,g=M.orientation,C=M.ease}var l=this._scaleBehavior===void 0;return this._scaleBehavior=DR(this,i,t,s,g,C,this._scaleBehavior),l&&Sh(this,this._scaleBehavior),this._scaleBehavior.completeEventName="scaleyoyo.complete",this},scaleYoyoPromise(i,t,s,g,C){return this.scaleYoyo(i,t,s,g,C),fe(this._scaleBehavior)}},IR=Phaser.Utils.Objects.GetValue,qf=Phaser.Utils.Objects.GetAdvancedValue,BR=Phaser.Math.Linear;let bl=class extends Gs{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(IR(t,"mode",0)),this.setAlphaRange(qf(t,"start",this.parent.alpha),qf(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=GR[t]),this.mode=t,this}setAlphaRange(t,s){return this.alphaStart=t,this.alphaEnd=s,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return t.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(t,s){var g=s.t;s.isOddIteration&&(g=1-g),t.alpha=BR(this.alphaStart,this.alphaEnd,g)}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}};const GR={stop:0,destroy:1,yoyo:2},NR=Phaser.Utils.Objects.IsPlainObject;var ho=function(i,t,s,g){var C,M;NR(s)?(C=s.start,M=s.end):M=s,C===void 0&&(C=0),M===void 0&&(M=1);var l={mode:0,start:C,end:M,duration:t};return g===void 0?g=new bl(i,l):g.resetFromJSON(l),g.restart(),g},lo=function(i,t,s,g){s instanceof bl&&(g=s,s=void 0),s===void 0&&(s=!0);var C={mode:s?1:0,end:0,duration:t};return g===void 0?g=new bl(i,C):g.resetFromJSON(C),g.restart(),g};const _f=Phaser.Utils.Objects.IsPlainObject;var tc=function(i,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(i.emit(t.completeEventName,i),t.completeEventName=void 0)}),t.on("update",function(){var s=Mr.getParentSizer(i);s&&s.resetChildAlphaState(i)})};const VR={fadeIn(i,t){if(_f(i)){var s=i;i=s.duration,t=s.alpha}var g=this._fade===void 0;return this._fade=ho(this,i,t,this._fade),g&&tc(this,this._fade),this._fade.completeEventName="fadein.complete",this},fadeInPromise(i,t){return this.fadeIn(i,t),fe(this._fade)},fadeOutDestroy(i,t){if(_f(i)){var s=i;i=s.duration,t=s.destroy}var g=this._fade===void 0;return this._fade=lo(this,i,t,this._fade),g&&tc(this,this._fade),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(i,t){return this.fadeOutDestroy(i,t),fe(this._fade)},fadeOut(i){return this.fadeOutDestroy(i,!1),this},fadeOutPromise(i){return this.fadeOut(i),fe(this._fade)}},kR=Phaser.Utils.Objects.GetValue,nn=Phaser.Utils.Objects.GetAdvancedValue,ec=Phaser.Math.Linear;class Ua extends Gs{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){if(super.resetFromJSON(t),this.setMode(kR(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var s=nn(t,"x",void 0),g=nn(t,"y",void 0);this.setTargetPosition(s,g)}else this.setTargetPosition(t);return this}setMode(t){return typeof t=="string"&&(t=zR[t]),this.mode=t,this}setTargetPosition(t,s){if(typeof t=="number"||typeof s=="number")this.startX=this.parent.x,this.startY=this.parent.y,this.endX=t,this.endY=s;else{var g=t;this.startX=nn(g,"startX",void 0),this.startY=nn(g,"startY",void 0),this.endX=nn(g,"endX",void 0),this.endY=nn(g,"endY",void 0)}return this.hasMoveX=this.startX!==void 0&&this.endX!==void 0,this.hasMoveY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasMoveX&&(t.x=this.startX),this.hasMoveY&&(t.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(t,s){var g=s.t;s.isOddIteration&&(g=1-g),g=this.easeFn(g),this.hasMoveX&&(t.x=ec(this.startX,this.endX,g)),this.hasMoveY&&(t.y=ec(this.startY,this.endY,g))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const zR={stop:0,destroy:1,yoyo:2};var Ya=function(i,t){if(typeof i=="number")return i;var s=i[0],g=parseFloat(i.substr(2));switch(s){case"+":return t+g;case"-":return t-g;case"*":return t*g;case"/":return t/g}},Dg=function(i,t,s,g,C,M,l){M instanceof Ua&&(l=M,M=void 0),M===void 0&&(M=!1);var T={};return T.mode=M?1:0,s!==void 0&&(T.startX=i.x,T.endX=Ya(s,i.x)),g!==void 0&&(T.startY=i.y,T.endY=Ya(g,i.y)),T.duration=t,T.ease=C===void 0?"Linear":C,l===void 0?l=new Ua(i,T):l.resetFromJSON(T),l.restart(),l},Ig=function(i,t,s,g,C,M,l){M instanceof Ua&&(l=M,M=void 0),M===void 0&&(M=!1);var T={};return T.mode=M?1:0,s!==void 0&&(T.startX=Ya(s,i.x),T.endX=i.x),g!==void 0&&(T.startY=Ya(g,i.y),T.endY=i.y),T.duration=t,T.ease=C===void 0?"Linear":C,l===void 0?l=new Ua(i,T):l.resetFromJSON(T),l.restart(),l};const ic=Phaser.Utils.Objects.IsPlainObject,sc=Phaser.Math.Distance.Between;var nc=function(i,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(i.emit(t.completeEventName,i),t.completeEventName=void 0)}),t.on("update",function(){var s=Mr.getParentSizer(i);s&&s.resetChildPositionState(i)})};const UR={moveFrom(i,t,s,g,C){if(ic(i)){var M=i;t=M.x,s=M.y,M.hasOwnProperty("speed")?i=sc(t,s,this.x,this.y)*1e3/M.speed:i=M.duration,g=M.ease}var l=this._easeMove===void 0;return this._easeMove=Ig(this,i,t,s,g,C,this._easeMove),l&&nc(this,this._easeMove),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(i,t,s,g,C){return this.moveFrom(i,t,s,g,C),fe(this._easeMove)},moveFromDestroy(i,t,s,g){return this.moveFrom(i,t,s,g,!0),this},moveFromDestroyPromise(i,t,s,g){return this.moveFromDestroy(i,t,s,g),fe(this._easeMove)},moveTo(i,t,s,g,C){if(ic(i)){var M=i;t=M.x,s=M.y,M.hasOwnProperty("speed")?i=sc(t,s,this.x,this.y)*1e3/M.speed:i=M.duration,g=M.ease}var l=this._easeMove===void 0;return this._easeMove=Dg(this,i,t,s,g,C,this._easeMove),l&&nc(this,this._easeMove),this._easeMove.completeEventName="moveto.complete",this},moveToPromise(i,t,s,g,C){return this.moveTo(i,t,s,g,C),fe(this._easeMove)},moveToDestroy(i,t,s,g){return this.moveTo(i,t,s,g,!0),this},moveToDestroyPromise(i,t,s,g){return this.moveToDestroy(i,t,s,g,!0),fe(this._easeMove)},moveStop(i){return this._easeMove?(this._easeMove.stop(i),this):this}},ke=Phaser.Utils.Objects.GetValue;class bu extends to{constructor(t,s){super(t,s),this.timer=new $p,this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.timer.resetFromJSON(ke(t,"timer")),this.setEnable(ke(t,"enable",!0)),this.setMode(ke(t,"mode",1)),this.isRunning=ke(t,"isRunning",!1),this.setMagnitudeMode(ke(t,"magnitudeMode",1)),this.setAxisMode(ke(t,"axis",0)),this.setDuration(ke(t,"duration",500)),this.setMagnitude(ke(t,"magnitude",10)),this.ox=ke(t,"ox",void 0),this.oy=ke(t,"oy",void 0),this}toJSON(){return{timer:this.timer.toJSON(),enable:this.enable,mode:this.mode,isRunning:this.isRunning,magnitudeMode,duration:this.duration,magnitude:this.magnitude,ox:this.ox,oy:this.oy}}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}startTicking(){super.startTicking(),this.mode===0?(this.scene.game.events.on("poststep",this.update,this),this.scene.game.events.on("prestep",this.backToOrigin,this)):this.scene.sys.events.on("preupdate",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&(this.mode===0?(this.scene.game.events.off("poststep",this.update,this),this.scene.game.events.off("prestep",this.backToOrigin,this)):this.scene.sys.events.off("preupdate",this.update,this))}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setMode(t){return typeof t=="string"&&(t=YR[t]),this.mode=t,this}setMagnitudeMode(t){return typeof t=="string"&&(t=WR[t]),this.magnitudeMode=t,this}setAxisMode(t){return typeof t=="string"&&(t=XR[t]),this.axisMode=t,this}setDuration(t){return this.duration=t,this}setMagnitude(t){return this.magnitude=t,this}start(t,s){if(typeof t!="number"){var g=t;s=ke(g,"magnitude",void 0),t=ke(g,"duration",void 0)}return s!==void 0&&this.setMagnitude(s),t!==void 0&&this.setDuration(t),this.timer.setDuration(this.duration).start(),super.start(),this}shake(t,s){return this.start(t,s),this}update(t,s){if(!this.isRunning||!this.enable)return this;var g=this.parent;if(!g.active)return this;if(this.timer.update(t,s),this.timer.isDone)this.backToOrigin(),this.complete();else{this.ox===void 0&&(this.ox=g.x,this.oy=g.y);var C=this.magnitude;this.magnitudeMode===1&&(C*=1-this.timer.t);var M=Math.random()*Math.PI*2,l=this.ox+Math.cos(M)*C,T=this.oy+Math.sin(M)*C;switch(this.axisMode){case 1:g.x=l;break;case 2:g.y=T;break;default:g.x=l,g.y=T;break}}return this}backToOrigin(){if(!this.isRunning||!this.enable)return this;if(this.ox===void 0)return this;var t=this.parent;switch(this.axisMode){case 1:t.x=this.ox;break;case 2:t.y=this.oy;break;default:t.x=this.ox,t.y=this.oy;break}return this.ox=void 0,this.oy=void 0,this}}const YR={effect:0,behavior:1},XR={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2},WR={constant:0,decay:1},HR=Phaser.Utils.Objects.IsPlainObject;var $R=function(i,t){t.on("complete",function(){i.emit("shake.complete",i)})};const KR={shake(i,t,s){if(HR(i)){var g=i;i=g.duration,t=g.magnitude,s=g.magnitudeMode}return this._shake===void 0&&(this._shake=new bu(this,{mode:0,magnitudeMode:1}),$R(this,this._shake)),i!==void 0&&this._shake.setDuration(i),t!==void 0&&this._shake.setMagnitude(t),s!==void 0&&this._shake.setMagnitudeMode(s),this._shake.shake(),this},shakePromise(i,t){return this.shake(i,t),fe(this._shake)}},rc=Phaser.Utils.Objects.IsPlainObject;class ZR extends he{constructor(t,s){super(t,s),this.parent.setDataEnabled(),this.easeTasks={}}complete(t){this.emit(`complete-${t}`,this.parent,this),this.emit("complete",t,this.parent,this)}getEaseTask(t){var s=this.easeTasks[t];return s===void 0&&(s=new Vs(this.parent),this.easeTasks[t]=s,s.setTarget(this.parent.data.values).on("complete",function(){this.complete(t)},this)),s}easeTo(t,s,g,C){if(rc(t)){var M=t;t=M.key,s=M.value,g=M.duration,C=M.ease;var l=M.speed;g===void 0&&l!==void 0&&(g=Math.abs(s-this.parent.data.values[t])/l*1e3)}g===void 0&&(g=1e3),C===void 0&&(C="Linear");var T=this.getEaseTask(t);return T.restart({key:t,to:s,duration:g,ease:C}),this}easeFrom(t,s,g,C){if(rc(t)){var M=t;t=M.key,s=M.value,g=M.duration,C=M.ease;var l=M.speed;g===void 0&&l!==void 0&&(g=Math.abs(s-this.parent.data.values[t])/l*1e3)}g===void 0&&(g=1e3),C===void 0&&(C="Linear");var T=this.getEaseTask(t);return T.restart({key:t,from:s,duration:g,ease:C}),this}stopEase(t,s){s===void 0&&(s=!0);var g=this.easeTasks[t];return g&&g.stop(s),this}stopAll(t){t===void 0&&(t=!0);for(var s in this.easeTasks)this.stopEase(s,t);return this}}var jR=function(i,t){t.on("complete",function(s){i.emit(`easedata.${s}.complete`,i),i.emit("easedata.complete",s,i)})};const JR={easeDataTo(i,t,s,g){return this._easeData||(this._easeData=new ZR(this),jR(this,this._easeData)),this._easeData.easeTo(i,t,s,g),this},easeDataToPromise(i,t,s,g){return this.easeDataTo(i,t,s,g),io(this._easeData,`complete-${i}`)},stopEaseData(i,t){return this._easeData?(this._easeData.stopEase(i,t),this):this},stopAllEaseData(i){return this._easeData?(this._easeData.stopAll(i),this):this}};var Qi=function(i){Bg(i,!1)},qi=function(i){Bg(i,!0)},Fu=function(i){if(!i)return!1;var t=oo(i);return!t.hidden},Bg=function(i,t){if(i){var s=oo(i);s.hidden=t;var g=Ke(i);g?g.setChildVisible(i,!t):i.setVisible(!t)}};const QR={show(i){return i===void 0&&(i=this),Qi(i),this},hide(i){return i===void 0&&(i=this),qi(i),this},isShow(i){return i===void 0&&(i=this),Fu(i)}},qR=["next","exit","enter"];let Gg=class{constructor(t){var s=kt(t,"states",void 0);s&&this.addStates(s);var g=kt(t,"extend",void 0);if(g)for(var C in g)(!this.hasOwnProperty(C)||this[C]===void 0)&&(this[C]=g[C]);var M=kt(t,"eventEmitter",void 0),l=kt(t,"EventEmitterClass",void 0);this.setEventEmitter(M,l),this._stateLock=!1,this.resetFromJSON(t)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(t){this.setEnable(kt(t,"enable",!0)),this.start(kt(t,"start",void 0));var s=kt(t,"init",void 0);return s&&s.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(t){if(!(!this.enable||this._stateLock)&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),this._prevState!=null){var s="exit_"+this._prevState,g=this[s];g&&g.call(this),this.emit(s,this)}if(this._stateLock=!1,this._state!=null){var C="enter_"+this._state,M=this[C];M&&M.call(this),this.emit(C,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(t){return this._start=t,this._prevState=void 0,this._state=t,this}goto(t){return t!=null&&(this.state=t),this}next(){var t,s=this["next_"+this.state];return s&&(typeof s=="string"?t=s:t=s.call(this)),this.goto(t),this}get stateProperties(){return qR}addState(t,s){typeof t!="string"&&(s=t,t=s.name);for(var g=this.stateProperties,C=0,M=g.length;C<M;C++){var l=g[C],T=s[l];T&&(this[`${l}_${t}`]=T)}return this}addStates(t){if(Array.isArray(t))for(var s=0,g=t.length;s<g;s++)this.addState(t[s]);else for(var C in t)this.addState(C,t[C]);return this}runMethod(t,s,g,C,M,l){var T=this[t+"_"+this.state];if(T){var e=arguments.length;switch(e){case 1:return T.call(this);case 2:return T.call(this,s);case 3:return T.call(this,s,g);case 4:return T.call(this,s,g,C);case 5:return T.call(this,s,g,C,M);case 6:return T.call(this,s,g,C,M,l)}for(var d=new Array(e-1),x=1;x<e;x++)d[x-1]=arguments[x];return T.apply(this,d)}}};Object.assign(Gg.prototype,On);var Ph=function(i,t,s,g,C){C===void 0&&(C=!1);var M=i._events[t];if(!M)return!1;for(var l=0,T=M.length;l<T;l++){var e=M[l];if(e.fn===s&&e.context===g&&e.once===C)return!0}return!1};const _R=["next","exit","enter","update","preupdate","postupdate"];class ki extends Gg{shutdown(){this.stopUpdate(),this.stopPreUpdate(),this.stopPostUpdate(),this._scene=void 0,super.shutdown()}resetFromJSON(t){return super.resetFromJSON(t),this._scene=kt(t,"scene",void 0),this}get stateProperties(){return _R}update(t,s){this.runMethod("update",t,s)}preupdate(t,s){this.runMethod("preupdate",t,s)}postupdate(t,s){this.runMethod("postupdate",t,s)}startUpdate(t){t||(t=this._scene);var s=t.sys.events;return Ph(s,"update",this.update,this)?this:(this._scene=t,s.on("update",this.update,this),this)}stopUpdate(){return this._scene?(this._scene.sys.events.off("update",this.update,this),this):this}startPreUpdate(t){t||(t=this._scene);var s=t.sys.events;return Ph(s,"preupdate",this.preupdate,this)?this:(this._scene=t,s.on("preupdate",this.preupdate,this),this)}stopPreUpdate(){return this._scene?(this._scene.sys.events.off("preupdate",this.preupdate,this),this):this}startPostUpdate(t){t||(t=this._scene);var s=t.sys.events;return Ph(s,"postupdate",this.postupdate,this)?this:(this._scene=t,s.on("postupdate",this.postupdate,this),this)}stopPostUpdate(){return this._scene?(this._scene.sys.events.off("postupdate",this.postupdate,this),this):this}}let tA=class extends ki{constructor(t,s){super(s),this.parent=t;var g=s.initState||"IDLE";this.start(g)}init(){this.start("IDLE")}next_IDLE(){return"TRANS_OPNE"}next_TRANS_OPNE(){return"OPEN"}enter_TRANS_OPNE(){var t=this.parent;if(t.transitInTime>0){var s=t.runTransitionInCallback();t.delayCall(s,this.next,this)}else this.next()}exit_TRANS_OPNE(){var t=this.parent;t.removeDelayCall()}next_OPEN(){return"TRANS_CLOSE"}enter_OPEN(){var t=this.parent;t.onOpen()}exit_OPEN(){var t=this.parent;t.removeDelayCall()}next_TRANS_CLOSE(){return"CLOSE"}enter_TRANS_CLOSE(){var t=this.parent;if(t.transitOutTime>0){var s=t.runTransitionOutCallback();t.delayCall(s,this.next,this)}else this.next()}exit_TRANS_CLOSE(){var t=this.parent;t.removeDelayCall()}next_CLOSE(){return"TRANS_OPNE"}enter_CLOSE(){var t=this.parent;t.onClose()}exit_CLOSE(){}canOpen(){return this.state==="IDLE"||this.state==="CLOSE"}canClose(){return this.state==="IDLE"||this.state==="OPEN"}};var eA=function(i,t,s,g,C){var M=yr(i),l=M.time.delayedCall(t,function(){M.game.events.once("poststep",function(){s.call(g,C)})});return l};const iA={delayCall(i,t,s){return this.delayCallTimer=eA(this,i,t,s),this},removeDelayCall(){return this.delayCallTimer&&(this.delayCallTimer.remove(!1),this.delayCallTimer=void 0),this}},sA={setTransitInTime(i){return this.transitInTime=i,this},setTransitOutTime(i){return this.transitOutTime=i,this},setTransitInCallback(i){return i||(i=ge),this.transitInCallback=i,this},setTransitOutCallback(i){return i||(i=ge),this.transitOutCallback=i,this}},nA={runTransitionInCallback(){return this.transitInCallback(this.parent,this.transitInTime),this.transitInTime},onOpen(){},requestOpen(i,t){if(!this._state.canOpen())return this;this.openEventData=arguments.length>0?i:this.parent;var s=this.transitInTime;return t!==void 0&&(this.transitInTime=t),this._state.goto("TRANS_OPNE"),this.transitInTime=s,this}},rA={runTransitionOutCallback(){return this.transitOutCallback(this.parent,this.transitOutTime),this.transitOutTime},onClose(){this.oneShotMode&&this.parent.destroy()},requestClose(i,t){if(!this._state.canClose)return this;this.closeEventData=arguments.length>0?i:this.parent;var s=this.transitOutTime;return t!==void 0&&(this.transitOutTime=t),this._state.goto("TRANS_CLOSE"),this.transitOutTime=s,this}};var Ng={};Object.assign(Ng,iA,sA,nA,rA);const rn=Phaser.Utils.Objects.GetValue;class uo extends he{constructor(t,s){super(t,s),this.setTransitInTime(rn(s,"duration.in",200)),this.setTransitOutTime(rn(s,"duration.out",200)),this.setTransitInCallback(rn(s,"transitIn")),this.setTransitOutCallback(rn(s,"transitOut")),this.oneShotMode=rn(s,"destroy",!1),this.delayCallTimer=void 0,this._state=new tA(this,{eventEmitter:!1,initState:rn(s,"initState","IDLE")}),this.openEventData=void 0,this.closeEventData=void 0}get state(){return this._state.state}shutdown(t){this.isShutdown||(this.transitInCallback=void 0,this.transitOutCallback=void 0,this.openEventData=void 0,this.closeEventData=void 0,this.removeDelayCall(),super.shutdown(t))}}Object.assign(uo.prototype,Ng);const aA=Phaser.GameObjects.Rectangle;class Lu extends aA{constructor(t,s,g){super(t,0,0,2,2,s,1),this.setAlpha(g),this.setScrollFactor(0),this.boot()}boot(){var t=this.scene;t.sys.events.on("prerender",this.resize,this)}destroy(t){!this.scene||this.ignoreDestroy||(this.scene.sys.events.off("prerender",this.resize,this),super.destroy(t))}get tint(){return this.fillColor}set tint(t){this.setFillStyle(t,this.fillAlpha)}resize(){var t=this.scene,s=t.sys.scale.gameSize,g=t.sys.cameras.main,C=s.width,M=s.height,l=1/g.zoom,T=C/2,e=M/2,d=C*l,x=M*l;(this.x!==T||this.y!==e)&&this.setPosition(T,e),(this.width!==d||this.height!==x)&&this.setSize(d,x).setOrigin(.5)}}const Eh=Phaser.Utils.Objects.GetValue;class fo extends he{constructor(t,s){super(t,{eventEmitter:!1}),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.setHitAreaMode(Eh(t,"hitAreaMode",0)),this.setEnable(Eh(t,"enable",!0)),this.setStopMode(Eh(t,"stopAllLevels",!0)),this}boot(){this.parent.on("pointerdown",function(t,s,g,C){this.stopAllLevels&&C.stopPropagation()},this).on("pointerup",function(t,s,g,C){this.stopAllLevels&&C.stopPropagation()},this).on("pointermove",function(t,s,g,C){this.stopAllLevels&&C.stopPropagation()},this).on("pointerover",function(t,s,g,C){this.stopAllLevels&&C.stopPropagation()},this).on("pointerout",function(t,s){this.stopAllLevels&&s.stopPropagation()},this)}setHitAreaMode(t){typeof t=="string"&&(t=oA[t]);var s=this.parent;return s.input&&s.removeInteractive(),t===0?s.setInteractive():s.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}}),this}setEnable(t){return t===void 0&&(t=!0),t?this.parent.setInteractive():this.parent.disableInteractive(),this.enable=t,this}setStopMode(t){return t===void 0&&(t=!0),this.stopAllLevels=t,this}toggleEnable(){return this.setEnable(!this.enable),this}}var oA={default:0,fullWindow:1};const ac=Phaser.Utils.Objects.GetValue;class Du extends Lu{constructor(t,s){var g=ac(s,"color",0),C=ac(s,"alpha",.8);super(t,g,C),this.touchEventStop=new fo(this,{hitAreaMode:1})}}var hA=function(i,t){var s=i.scene,g=new Du(s,t);return s.add.existing(g),i.isRexContainerLite?(i.moveDepthBelow(g),i.pin(g,{syncPosition:!1,syncRotation:!1,syncScale:!1,syncAlpha:!1,syncScrollFactor:!1})):s.children.moveBelow(g,i),g};const ea={popUp(i,t){i._modalScaleSave!==void 0?(i.scaleX=i._modalScaleSave,i.scaleY=i._modalScaleSave):i._modalScaleSave=i.scaleX,Au(i,t)},scaleDown(i,t){Lg(i,t,void 0,void 0,!1)},fadeIn(i,t){i._modalAlphaSave!==void 0?i.alpha=i._modalAlphaSave:i._modalAlphaSave=i.alpha,ho(i,t)},fadeOut(i,t){lo(i,t,!1)}};var lA=function(i,t){i._modalAlphaSave!==void 0?i.alpha=i._modalAlphaSave:i._modalAlphaSave=i.alpha,ho(i,t,i.alpha)},uA=function(i,t){lo(i,t,!1)},vr=function(i,t,s,g,C){if(!i||g&&!g(i,t,s))return!1;var M=_l(i,!0);return!(!M.contains(t,s)||C&&!C(i,t,s))};const li=Phaser.Utils.Objects.GetValue;let dA=class extends uo{constructor(t,s){s===void 0&&(s={}),s.transitIn==null&&(s.transitIn=Hi.popUp),s.transitOut==null&&(s.transitOut=Hi.scaleDown),s.destroy=li(s,"destroy",!0),super(t,s);var g=li(s,"cover");this.cover=g!==!1?hA(t,g):void 0,this.cover&&(this.setCoverTransitInCallback(li(g,"transitIn",lA)),this.setCoverTransitOutCallback(li(g,"transitOut",uA)));var C=li(s,"touchOutsideClose",!1),M=li(s,"duration.hold",-1),l=li(s,"timeOutClose",M>=0),T=li(s,"anyTouchClose",!1),e=li(s,"manualClose",!1);e&&(C=!1,T=!1,l=!1),T&&(C=!1),l?this.setDisplayTime(M):this.setDisplayTime(-1),T?this.once("open",this.anyTouchClose,this):C&&this.once("open",this.touchOutsideClose,this),li(s,"openOnStart",!0)&&this.delayCall(0,this.requestOpen,this)}shutdown(t){this.isShutdown||(this.cover||this.scene.input.off("pointerup",this.touchCloseCallback,this),this.cover&&!t&&(this.cover.destroy(),this.cover=void 0),super.shutdown(t))}touchOutsideClose(){return this.cover?this.cover.on("pointerup",this.touchCloseCallback,this):this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.cover?this.cover.once("pointerup",this.touchCloseCallback,this):this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(t){this.clickOutsideTest&&vr(this.parent,t.worldX,t.worldY)||this.requestClose()}runTransitionInCallback(){var t=super.runTransitionInCallback(),s=this.cover;return s&&this.coverTransitInCallback&&this.coverTransitInCallback(s,t),t}runTransitionOutCallback(){var t=super.runTransitionOutCallback(),s=this.cover;return s&&this.coverTransitOutCallback&&this.coverTransitOutCallback(s,t),t}onOpen(){var t=this.displayTime;t>=0&&this.delayCall(t,this.requestClose,this),this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.closeEventData),super.onClose()}setDisplayTime(t){return this.displayTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=Hi[t]),t){case Hi.popUp:t=ea.popUp;break;case Hi.fadeIn:t=ea.fadeIn;break}return super.setTransitInCallback(t),this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=Hi[t]),t){case Hi.scaleDown:t=ea.scaleDown;break;case Hi.fadeOut:t=ea.fadeOut;break}return super.setTransitOutCallback(t),this}setCoverTransitInCallback(t){return this.coverTransitInCallback=t,this}setCoverTransitOutCallback(t){return this.coverTransitOutCallback=t,this}};const Hi={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};var Iu=function(i,t){var s=new dA(i,t);return s.on("open",function(){i.emit("modal.open",s)}),s.on("close",function(g){i.emit("modal.close",g,s)}),i.on("modal.requestClose",s.requestClose,s),s},fA=function(i,t){var s=Iu(i,t);return new Promise(function(g,C){s.once("close",function(M){g(M)})})},Vg=function(i,t){i.emit("modal.requestClose",t)},ns=function(i){return i&&typeof i=="function"};const Bu={modal(i,t){return ns(i)&&(t=i,i=void 0),this._modalBehavior===void 0&&(this.onCreateModalBehavior&&this.onCreateModalBehavior(this,i),this._modalBehavior=Iu(this,i)),t&&this._modalBehavior.once("close",t),this._modalBehavior.requestOpen(),this},modalPromise(i){var t=this;return new Promise(function(s,g){t.modal(i,s)})},modalClose(i){return Vg(this,i),this}};var co=function(i,t,s,g){if(t)return vr(i,t.worldX,t.worldY,s,g);for(var C=i.scene.input.manager,M=C.pointersTotal,l=C.pointers,T=0;T<M;T++)if(t=l[T],vr(i,t.worldX,t.worldY,s,g))return!0;return!1},cA=function(i,t){return(ls(i)||typeof i=="string")&&(t=i,i=void 0),t===void 0?t=this:typeof t=="string"&&(t=this.getElement(t)),co(t,i)},ri=function(i){return Object.prototype.toString.call(i)==="[object Array]"},Fl=function(i,t,s,g,C){return vr(i,t,s,vA(g),pA(C))},oc=function(i){var t=i.rexSizer&&i.rexSizer.hidden;return!t},vA=function(i){return i?function(t,s,g){return oc(t)?(i(t,s,g),!0):!1}:oc},pA=function(i){return i},gA=function(i,t,s,g,C){if(ns(s)||(C=s,s=void 0,g=void 0),C===void 0&&(this.sizerChildren?C=this.sizerChildren:C=this.children),ri(C)){for(var M,l=0,T=C.length;l<T;l++)if(M=C[l],Fl(M,i,t,s,g))return M}else{var M;for(var e in C)if(M=C[e],Fl(M,i,t,s,g))return M}return null},ai=function(i,t,s){!i||t===void 0&&s===void 0||(i.resize||i.setSize?(t===void 0&&(t=i.width),s===void 0&&(s=i.height),i.resize?i.resize(t,s):i.setSize(t,s)):(t!==void 0&&(i.displayWidth=t),s!==void 0&&(i.displayHeight=s)))},mA=function(i,t){return t===void 0?t={}:t===!0&&(t=xA),t.x=i.x,t.y=i.y,t.scaleX=i.scaleX,t.scaleY=i.scaleY,t.width=i.width,t.height=i.height,t.displayWidth=i.displayWidth,t.displayHeight=i.displayHeight,t},xA={},Rr=function(i){this.sizerEventsEnable&&(mA(i,this.getChildPrevState(i)),this.layoutedChildren.push(i))},Ar=function(i,t,s,g,C,M,l,T){Sr(i,t,s,g,C,M),l!==void 0&&(i.x+=l),T!==void 0&&(i.y+=T),this.resetChildPositionState(i),this.sizerEventsEnable&&i.emit("sizer.postlayout",i,this)};const yA=Phaser.Display.Align.CENTER;var TA=function(){if(this.backgroundChildren!==void 0)for(var i=this.backgroundChildren,t=this.left,s=this.top,g=this.width,C=this.height,M,l,T,e,d,x,u,h=0,o=i.length;h<o;h++)M=i[h],l=M.rexSizer,!l.hidden&&(T=l.padding,Rr.call(this,M),e=t+T.left,d=s+T.top,x=g-T.left-T.right,u=C-T.top-T.bottom,ai(M,x,u),Ar.call(this,M,e,d,x,u,yA))},CA=function(i,t){var s=typeof i;if(s==="string"){var g=i;if(i=this.getElement(g),!i)return console.error(`Can get element '${g}'`),this}else(i===void 0||s!="object")&&(t=i,i=this);return t===void 0&&(t=!0),i.input&&i.input._dragTopmostSizer?i.input.draggable=t:t&&(i.setInteractive(),i.scene.input.setDraggable(i),i.on("drag",function(C,M,l){var T=this.getTopmostSizer();T.x+=M-i.x,T.y+=l-i.y,T.emit("sizer.drag",C,M,l)},this).on("dragstart",function(C,M,l){var T=this.getTopmostSizer();T.emit("sizer.dragstart",C,M,l)},this).on("dragend",function(C,M,l,T){var e=this.getTopmostSizer();e.emit("sizer.dragend",C,M,l,T)},this),i.input._dragTopmostSizer=!0),this};const kg={onClick(i,t,s,g){return i?(typeof i=="function"&&(g=s,s=t,t=i,i=this),i._click===void 0&&(i._click=new hs(i,g)),i._click.on("click",t,s),this):this},offClick(i,t,s){return typeof i=="function"&&(s=t,t=i,i=this),i._click===void 0?this:(i._click.off("click",t,s),this)},enableClick(i,t){return i&&typeof i!="object"&&(t=i,i=this),i._click===void 0?this:(i._click.setEnable(t),this)},disableClick(i){return i&&typeof i!="object"&&(i=this),i._click===void 0?this:(i._click.setEnable(!1),this)}},ia=Phaser.Utils.Objects.GetValue;class Gu extends he{constructor(t,s){super(t,s),this._enable=void 0;var g=ia(s,"inputConfig",void 0);g&&t.setInteractive(g),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.setEnable(ia(t,"enable",!0)),this.setMode(ia(t,"mode",1)),this.setClickInterval(ia(t,"clickInterval",100)),this}boot(){var t=this.parent.scene;t.input.on("pointerdown",this.onPress,this),t.input.on("pointerup",this.onRelease,this)}shutdown(t){if(!this.isShutdown){var s=this.parent.scene;s.input.off("pointerdown",this.onPress,this),s.input.off("pointerup",this.onRelease,this),super.shutdown(t)}}get enable(){return this._enable}set enable(t){if(this._enable!==t){this._enable=t;var s=t?"enable":"disable";this.emit(s,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=SA[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}isPointerInside(t){var s=this.parent,g=s.input?su:co;return g(s,t)}onPress(t){if(this.mode===0){if(!this.parent.willRender(t.camera))return;this.isPointerInside(t)||this.click(t.downTime,t)}}onRelease(t){if(this.mode===1){if(!this.parent.willRender(t.camera))return;this.isPointerInside(t)||this.click(t.upTime,t)}}click(t,s){if(!this.enable)return this;if(t===void 0)return this.emit("clickoutside",this,this.parent,s),this;var g=this.lastClickTime;return g!==void 0&&t-g<=this.clickInterval?this:(this.lastClickTime=t,this.emit("clickoutside",this,this.parent,s),this)}}const SA={press:0,pointerdown:0,release:1,pointerup:1},PA={onClickOutside(i,t,s,g){return i?(typeof i=="function"&&(g=s,s=t,t=i,i=this),i._clickOutside===void 0&&(i._clickOutside=new Gu(i,g)),i._clickOutside.on("clickoutside",t,s),this):this},offClickOutside(i,t,s){return typeof i=="function"&&(s=t,t=i,i=this),i._clickOutside===void 0?this:(i._clickOutside.off("clickoutside",t,s),this)},enableClickOutside(i,t){return i&&typeof i!="object"&&(t=i,i=this),i._clickOutside===void 0?this:(i._clickOutside.setEnable(t),this)},disableClickOutside(i){return i&&typeof i!="object"&&(i=this),i._clickOutside===void 0?this:(i._clickOutside.setEnable(!1),this)}};class EA extends ki{constructor(){super({eventEmitter:!1}),this.goto("IDLE")}setCooldownTime(t){return this.cooldownTime=t,this.cooldownMode=t!==void 0,this}request(){return this.runMethod("request")}update_IDLE(){this.compensationTime=0}request_IDLE(){return this.next(),!0}next_IDLE(){if(this.cooldownMode)return"COOLDOWN"}enter_COOLDOWN(){this.remainderTime=this.cooldownTime+this.compensationTime}update_COOLDOWN(t,s){this.remainderTime-=s,this.remainderTime<0&&(this.compensationTime=this.cooldownTime>s?-this.remainderTime:0,this.goto("IDLE"))}request_COOLDOWN(){return!1}}const Mh=Phaser.Utils.Objects.GetValue;class Rn extends he{constructor(t,s){super(t,s),this._enable=void 0,this.cooldown=new EA,this.parent.setInteractive(Mh(s,"inputConfig",void 0)),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.prevIsInTouch=!1,this.isInTouching=!1,this.setEnable(Mh(t,"enable",!0)),this.setCooldown(Mh(t,"cooldown",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPointIn,this),t.on("pointerover",this.onPointIn,this),t.on("pointerup",this.onPointOut,this),t.on("pointerout",this.onPointOut,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||(this.prevIsInTouch=!1,this.isInTouching=!1,this.pointer=void 0),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get cooldownTime(){return this.cooldown.cooldownTime}set cooldownTime(t){this.cooldown.setCooldownTime(t)}setCooldown(t){return this.cooldownTime=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointIn(t,s,g){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.isInTouching=!0)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0,this.isInTouching=!1)}preupdate(t,s){this.cooldown.update(t,s),!this.prevIsInTouch&&this.isInTouching&&this.emit("touchstart",this,this.parent),this.isInTouching&&this.cooldown.request()&&this.emit("intouch",this,this.parent,this.pointer),this.prevIsInTouch&&!this.isInTouching&&this.emit("touchend",this,this.parent),this.prevIsInTouch=this.isInTouching}}const MA={isPointerInBounds(i){return i===void 0?i=this:typeof i=="string"&&(i=this.getElement(i)),i?co(i):!1},onTouching(i,t,s,g){return i?(typeof i=="function"&&(g=s,s=t,t=i,i=this),i._inTouching===void 0&&(i._inTouching=new Rn(i,g)),i._inTouching.on("intouch",t,s),this):this},offTouching(i,t,s){return typeof i=="function"&&(s=t,t=i,i=this),i._inTouching===void 0?this:(i._inTouching.off("intouch",t,s),this)},onTouchingEnd(i,t,s,g){return i?(typeof i=="function"&&(g=s,s=t,t=i,i=this),i._inTouching===void 0&&(i._inTouching=new Rn(i,g)),i._inTouching.on("touchend",t,s),this):this},offTouchingEnd(i,t,s){return typeof i=="function"&&(s=t,t=i,i=this),i._inTouching===void 0?this:(i._inTouching.off("touchend",t,s),this)},enableTouching(i,t){return i&&typeof i!="object"&&(t=i,i=this),i._inTouching===void 0?this:(i._inTouching.setEnable(t),this)},disableTouching(i){return i&&typeof i!="object"&&(i=this),i._inTouching===void 0?this:(i._inTouching.setEnable(!1),this)}};var zg=function(i,t,s){for(var g,C=0,M=i.length;C<M;C++)if(g=i[C],!!Fl(g,t,s))return g.pointToChild(t,s);return null},Pi=function(i,t,s,g,C,M,l){var T;C===void 0?T=g:T=zg(s,g,C),T&&i.emit(t,T,M,l)};const wA=Phaser.Utils.Objects.GetValue;var RA=function(i){var t=wA(i,"down",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerdown",AA,this))},AA=function(i,t,s,g){var C=this._childrenInteractive;Pi(C.eventEmitter,`${C.eventNamePrefix}down`,C.targetSizers,i.worldX,i.worldY,i,g)};const OA=Phaser.Utils.Objects.GetValue;var bA=function(i){var t=OA(i,"up",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerup",FA,this))},FA=function(i,t,s,g){var C=this._childrenInteractive;Pi(C.eventEmitter,`${C.eventNamePrefix}up`,C.targetSizers,i.worldX,i.worldY,i,g)};const LA=Phaser.Utils.Objects.GetValue;var DA=function(i){var t=LA(i,"over",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointermove",hc,this).on("pointerover",hc,this).on("pointerout",IA,this))},hc=function(i,t,s,g){var C=this._childrenInteractive,M=zg(C.targetSizers,i.worldX,i.worldY),l=C.lastOverChild;M&&l&&M===l||(C.lastOverChild=M,Pi(C.eventEmitter,`${C.eventNamePrefix}out`,C.targetSizers,l,void 0,i,g),Pi(C.eventEmitter,`${C.eventNamePrefix}over`,C.targetSizers,M,void 0,i,g))},IA=function(i,t){var s=this._childrenInteractive,g=s.lastOverChild;s.lastOverChild=null,Pi(s.eventEmitter,`${s.eventNamePrefix}out`,s.targetSizers,g,void 0,i,t)};const BA=Phaser.Utils.Objects.GetValue;var GA=function(i){var t=BA(i,"click",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("threshold")||(t.threshold=10);var s=this._childrenInteractive;this._click=new hs(this,t),this._click.on("click",function(g,C,M,l){Pi(s.eventEmitter,`${s.eventNamePrefix}click`,s.targetSizers,M.worldX,M.worldY,M,l)},this)}};const wh=Phaser.Utils.Objects.GetValue;class vo extends to{constructor(t,s){var g=yr(t);g===t&&(t=void 0),super(g,s),this.gameObject=t,t&&t.setInteractive(wh(s,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.setEnable(wh(t,"enable",!0)),this.setDetectBounds(),this.gameObject===void 0?this.setDetectBounds(wh(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=Rh,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(t){this.scene&&(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setDetectBounds(t){return this.bounds=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t,s){if(this.enable&&this.pointer===void 0){var g=this.bounds?this.bounds.contains(t.x,t.y):!0;g&&this.pointer!==t&&(this.pointer=t,this.lastPointer=t,this.movedState=!1,this.tracerState=lc,this.gameObject===void 0&&(this.isTouchingAnyObject=s.length>0),this.onDragStart())}}onPointerUp(t){if(this.enable){var s=this.bounds?this.bounds.contains(t.x,t.y):!0;s&&this.pointer===t&&(this.pointer=void 0,this.movedState=!1,this.tracerState=Rh,this.onDragEnd())}}onPointerMove(t){if(this.enable&&t.isDown){var s=this.bounds?this.bounds.contains(t.x,t.y):!0,g=this.pointer===t;!g&&s||(g&&!s?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===lc&&this.onDragEnd(),this.pointer=void 0,this.tracerState=Rh,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(t,s){}postUpdate(t,s){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=NA,this}}const Rh=0,lc=1,NA="IDLE",ys=Phaser.Utils.Objects.GetValue,VA=Phaser.Math.Distance.Between;class po extends vo{constructor(t,s){super(t,s);var g=this,C={states:{IDLE:{enter:function(){g.stop(),g.tapsCount=0,g.x=0,g.y=0,g.worldX=0,g.worldY=0},exit:function(){var M=g.lastPointer;g.x=M.x,g.y=M.y,g.worldX=M.worldX,g.worldY=M.worldY}},BEGIN:{enter:function(){g.start(),g.tapsCount=0,g.emit("tappingstart",g,g.gameObject,g.lastPointer)}},RECOGNIZED:{enter:function(){g.start(),g.emit("tap",g,g.gameObject,g.lastPointer),g.emit(`${g.tapsCount}tap`,g,g.gameObject,g.lastPointer)}}},init:function(){this.state=Ts},eventEmitter:!1};this.setRecongizedStateObject(new ki(C))}resetFromJSON(t){super.resetFromJSON(t),this.setHoldTime(ys(t,"time",250)),this.setTapInterval(ys(t,"tapInterval",200)),this.setDragThreshold(ys(t,"threshold",9)),this.setTapOffset(ys(t,"tapOffset",10));var s=ys(t,"taps",void 0);return s!==void 0?this.setTaps(s):(this.setMaxTaps(ys(t,"maxTaps",void 0)),this.setMinTaps(ys(t,"minTaps",void 0))),this}onDragStart(){switch(this.state){case Ts:this.state=an;break;case an:var t=this.lastPointer,s=VA(t.upX,t.upY,t.x,t.y);s>this.tapOffset&&(this.state=on,this.state=an);break;case on:this.state=an;break}}onDragEnd(){this.state===an&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),this.maxTaps!==void 0&&this.tapsCount===this.maxTaps&&(this.state=on))}onDrag(){this.state!==Ts&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Ts)}preUpdate(t,s){if(!(!this.isRunning||!this.enable)&&this.state===an){var g=this.lastPointer;if(g.isDown){var C=t-g.downTime;C>this.holdTime&&(this.state=Ts)}else{var M=t-g.upTime;M>this.tapInterval&&(this.minTaps===void 0||this.tapsCount>=this.minTaps?this.state=on:this.state=Ts)}}}postUpdate(t,s){!this.isRunning||!this.enable||this.state===on&&(this.state=Ts)}get isTapped(){return this.state===on}setHoldTime(t){return this.holdTime=t,this}setTapInterval(t){return this.tapInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setTapOffset(t){return this.tapOffset=t,this}setMaxTaps(t){return this.maxTaps=t,this}setMinTaps(t){return this.minTaps=t,this}setTaps(t,s){return s===void 0&&(s=t),this.setMinTaps(t).setMaxTaps(s),this}}const Ts="IDLE",an="BEGIN",on="RECOGNIZED",uc=Phaser.Utils.Objects.GetValue;class go extends vo{constructor(t,s){super(t,s);var g=this,C={states:{IDLE:{enter:function(){g.x=0,g.y=0,g.worldX=0,g.worldY=0},exit:function(){var M=g.lastPointer;g.x=M.x,g.y=M.y,g.worldX=M.worldX,g.worldY=M.worldY}},BEGIN:{enter:function(){g.start()},exit:function(){g.stop()}},RECOGNIZED:{enter:function(){g.emit("pressstart",g,g.gameObject,g.lastPointer)},exit:function(){g.emit("pressend",g,g.gameObject,g.lastPointer)}}},init:function(){this.state=sa},eventEmitter:!1};this.setRecongizedStateObject(new ki(C))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(uc(t,"threshold",9)),this.setHoldTime(uc(t,"time",251)),this}onDragStart(){this.state=dc,this.holdTime===0&&(this.state=Ah)}onDragEnd(){this.state=sa}onDrag(){this.state!==sa&&this.pointer.getDistance()>this.dragThreshold&&(this.state=sa)}preUpdate(t,s){if(!(!this.isRunning||!this.enable)&&this.state===dc){var g=t-this.pointer.downTime;g>=this.holdTime&&(this.state=Ah)}}get isPressed(){return this.state===Ah}setHoldTime(t){return this.holdTime=t,this}setDragThreshold(t){return this.dragThreshold=t,this}}const sa="IDLE",dc="BEGIN",Ah="RECOGNIZED",kA=Phaser.Utils.Objects.GetValue;class Ug extends vo{constructor(t,s){super(t,s);var g=this,C={states:{IDLE:{},BEGIN:{enter:function(){var M=g.pointer;g.startX=M.x,g.startY=M.y,g.startWorldX=M.worldX,g.startWorldY=M.worldY}},RECOGNIZED:{enter:function(){g.emit("panstart",g,g.gameObject,g.lastPointer)},exit:function(){var M=g.lastPointer;g.endX=M.x,g.endY=M.y,g.endWorldX=M.worldX,g.endWorldY=M.worldY,g.emit("panend",g,g.gameObject,g.lastPointer)}}},init:function(){this.state=fc},eventEmitter:!1};this.setRecongizedStateObject(new ki(C))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(kA(t,"threshold",10)),this}onDragStart(){this.state=cc,this.dragThreshold===0&&(this.state=na)}onDragEnd(){this.state=fc}onDrag(){switch(this.state){case cc:this.pointer.getDistance()>=this.dragThreshold&&(this.state=na);break;case na:var t=this.pointer.position,s=this.pointer.prevPosition;this.dx=t.x-s.x,this.dy=t.y-s.y;var g=this.pointer;this.x=g.x,this.y=g.y,this.worldX=g.worldX,this.worldY=g.worldY,this.emit("pan",this,this.gameObject,this.lastPointer);break}}get isPanned(){return this.state===na}setDragThreshold(t){return this.dragThreshold=t,this}}const fc="IDLE",cc="BEGIN",na="RECOGNIZED",zA=Phaser.Math.Distance.Between,UA=Phaser.Math.Angle.Between,YA={getDt:function(){var i=au(this.scene);return i},getVelocity:function(){var i=this.pointer.position,t=this.pointer.prevPosition,s=zA(t.x,t.y,i.x,i.y),g=s/(this.getDt()*.001);return g},getVelocityX:function(){var i=this.pointer.position,t=this.pointer.prevPosition,s=Math.abs(i.x-t.x),g=s/(this.getDt()*.001);return g},getVelocityY:function(){var i=this.pointer.position,t=this.pointer.prevPosition,s=Math.abs(i.y-t.y),g=s/(this.getDt()*.001);return g},getVelocityAngle:function(){var i=this.pointer.position,t=this.pointer.prevPosition,s=UA(t.x,t.y,i.x,i.y);return s}},XA={"up&down":0,"left&right":1,"4dir":2,"8dir":3};var WA=function(i,t,s){switch(s===void 0?s={}:s===!0&&(s=HA),s.left=!1,s.right=!1,s.up=!1,s.down=!1,i=(i+360)%360,t){case 0:i<180?s.down=!0:s.up=!0;break;case 1:i>90&&i<=270?s.left=!0:s.right=!0;break;case 2:i>45&&i<=135?s.down=!0:i>135&&i<=225?s.left=!0:i>225&&i<=315?s.up=!0:s.right=!0;break;case 3:i>22.5&&i<=67.5?(s.down=!0,s.right=!0):i>67.5&&i<=112.5?s.down=!0:i>112.5&&i<=157.5?(s.down=!0,s.left=!0):i>157.5&&i<=202.5?s.left=!0:i>202.5&&i<=247.5?(s.left=!0,s.up=!0):i>247.5&&i<=292.5?s.up=!0:(i>292.5&&i<=337.5&&(s.up=!0),s.right=!0);break}return s},HA={};const Oh=Phaser.Utils.Objects.GetValue,$A=Phaser.Math.RadToDeg;class Or extends vo{constructor(t,s){super(t,s);var g=this,C={states:{IDLE:{enter:function(){g.x=0,g.y=0,g.worldX=0,g.worldY=0},exit:function(){var M=g.lastPointer;g.x=M.x,g.y=M.y,g.worldX=M.worldX,g.worldY=M.worldY}},BEGIN:{enter:function(){g.validDrag=!1}},RECOGNIZED:{enter:function(){g.start(),g.updateDirectionStates(),g.emit("swipe",g,g.gameObject,g.lastPointer)},exit:function(){g.stop(),g.clearDirectionStates()}}},init:function(){this.state=bh},eventEmitter:!1};this.setRecongizedStateObject(new ki(C)),this.clearDirectionStates()}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Oh(t,"threshold",10)),this.setVelocityThreshold(Oh(t,"velocityThreshold",1e3)),this.setDirectionMode(Oh(t,"dir","8dir")),this}onDragStart(){this.state=vc}onDragEnd(){this.state=bh}onDrag(){this.state===vc&&(this.validDrag||(this.validDrag=this.dragThreshold===0||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=Fh))}postUpdate(t,s){!this.isRunning||!this.enable||this.state===Fh&&(this.state=bh)}get isSwiped(){return this.state===Fh}get dragVelocity(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity();break}return t}setDragThreshold(t){return this.dragThreshold=t,this}setVelocityThreshold(t){return this.velocityThreshold=t,this}setDirectionMode(t){return typeof t=="string"&&(t=XA[t]),this.dirMode=t,this}updateDirectionStates(){var t=$A(this.getVelocityAngle());return WA(t,this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}Object.assign(Or.prototype,YA);const bh="IDLE",vc="BEGIN",Fh="RECOGNIZED",Lh=Phaser.Utils.Objects.GetValue,KA=Phaser.Utils.Array.SpliceOne,ZA=Phaser.Math.Distance.Between,jA=Phaser.Math.Angle.Between;class Nu{constructor(t,s){var g=t.input.manager.pointersTotal-1;g<2&&t.input.addPointer(2-g),this.scene=t,this.setEventEmitter(Lh(s,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.setEnable(Lh(t,"enable",!0)),this.bounds=Lh(t,"bounds",void 0),this.tracerState=ra,this.pointers.length=0,Ii(this.movedState),this}boot(){this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){this.scene&&(this.destroyEventEmitter(),this.pointers.length=0,Ii(this.movedState),this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t){if(this.enable&&this.pointers.length!==2){var s=this.bounds?this.bounds.contains(t.x,t.y):!0;if(s){var g=this.pointers.indexOf(t);if(g===-1)switch(this.movedState[t.id]=!1,this.pointers.push(t),this.tracerState){case ra:this.tracerState=Qn,this.onDrag1Start();break;case Qn:this.tracerState=ui,this.onDrag2Start();break}}}}onPointerUp(t){if(this.enable){var s=this.bounds?this.bounds.contains(t.x,t.y):!0;if(s){var g=this.pointers.indexOf(t);if(g!==-1)switch(delete this.movedState[t.id],KA(this.pointers,g),this.tracerState){case Qn:this.tracerState=ra,this.onDrag1End();break;case ui:this.tracerState=Qn,this.onDrag2End(),this.onDrag1Start();break}}}}onPointerMove(t){if(this.enable&&t.isDown){var s=this.bounds?this.bounds.contains(t.x,t.y):!0,g=this.pointers.indexOf(t)!==-1;if(!(!g&&s)){if(g&&!s)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case Qn:this.onDrag1();break;case ui:this.onDrag2();break}}}}dragCancel(){return this.tracerState===ui&&this.onDrag2End(),this.pointers.length=0,Ii(this.movedState),this.tracerState=ra,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==ui)return 0;var t=this.pointers[0],s=this.pointers[1];return ZA(t.x,t.y,s.x,s.y)}get angleBetween(){if(this.tracerState!==ui)return 0;var t=this.pointers[0],s=this.pointers[1];return jA(t.x,t.y,s.x,s.y)}get drag1Vector(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var s=t.position,g=t.prevPosition;Jn.x=s.x-g.x,Jn.y=s.y-g.y}else Jn.x=0,Jn.y=0;return Jn}get centerX(){if(this.tracerState!==ui)return 0;var t=this.pointers[0].position,s=this.pointers[1].position;return(t.x+s.x)/2}get centerY(){if(this.tracerState!==ui)return 0;var t=this.pointers[0].position,s=this.pointers[1].position;return(t.y+s.y)/2}get prevCenterX(){if(this.tracerState!==ui)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,s=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+s.x)/2}get prevCenterY(){if(this.tracerState!==ui)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,s=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+s.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=JA,this}}Object.assign(Nu.prototype,On);var Jn={};const ra=0,Qn=1,ui=2,JA="IDLE",QA=Phaser.Utils.Objects.GetValue;class Yg extends Nu{constructor(t,s){super(t,s);var g=this,C={states:{IDLE:{enter:function(){g.prevDistance=void 0,g.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){g.emit("pinchstart",g)},exit:function(){g.emit("pinchend",g)}}},init:function(){this.state=pc},eventEmitter:!1};this.setRecongizedStateObject(new ki(C))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(QA(t,"threshold",0)),this}onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=gc,this.dragThreshold===0&&(this.state=aa)}onDrag2End(){this.state=pc}onDrag2(){switch(this.state){case gc:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.prevDistance=t,this.state=aa}break;case aa:var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.emit("pinch",this),this.prevDistance=t;break}}get isPinched(){return this.state===aa}setDragThreshold(t){return this.dragThreshold=t,this}}const pc="IDLE",gc="BEGIN",aa="RECOGNIZED",qA=Phaser.Math.RotateAround;var mc=function(i,t,s,g){return qA(i,t,s,g),i.rotation+=g,i},_A=function(i,t,s,g){return g===void 0?g={}:g===!0&&(g=tO),s.getWorldPoint(i,t,g),g},tO={},eO=function(i,t){if(!this.isRotation)return this;t===void 0&&(t=this.pointers[0].camera);var s=this.movementCenterX,g=this.movementCenterY,C=_A(this.centerX,this.centerY,t,!0),M=C.x,l=C.y,T=this.rotation;if(Array.isArray(i))for(var e=i,d=0,x=e.length;d<x;d++)i=e[d],i.x+=s,i.y+=g,mc(i,M,l,T);else i.x+=s,i.y+=g,mc(i,M,l,T);return this};const iO=Phaser.Utils.Objects.GetValue,Dh=Phaser.Math.Angle.WrapDegrees,xc=Phaser.Math.Angle.ShortestBetween,Ih=Phaser.Math.RadToDeg,sO=Phaser.Math.DegToRad;class Vu extends Nu{constructor(t,s){super(t,s);var g=this,C={states:{IDLE:{enter:function(){g.prevAngle=void 0,g.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){g.emit("rotatestart",g)},exit:function(){g.emit("rotateend",g)}}},init:function(){this.state=yc},eventEmitter:!1};this.setRecongizedStateObject(new ki(C))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(iO(t,"threshold",0)),this}onDrag2Start(){this.prevAngle=Dh(Ih(this.angleBetween)),this.state=Tc,this.dragThreshold===0&&(this.state=oa)}onDrag2End(){this.state=yc}onDrag2(){switch(this.state){case Tc:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=Dh(Ih(this.angleBetween));this.angle=xc(this.prevAngle,t),this.prevAngle=t,this.state=oa}break;case oa:var t=Dh(Ih(this.angleBetween));this.angle=xc(this.prevAngle,t),this.prevAngle=t,this.emit("rotate",this);break}}get isRotated(){return this.state===oa}get rotation(){return sO(this.angle)}setDragThreshold(t){return this.dragThreshold=t,this}}var nO={spinObject:eO};Object.assign(Vu.prototype,nO);const yc="IDLE",Tc="BEGIN",oa="RECOGNIZED",rO=Phaser.Utils.Objects.GetValue;var aO=function(i){var t=rO(i,"tap",void 0);if(t!==!1){t===!0&&(t=void 0);var s=this._childrenInteractive;this._tap=new po(this,t),this._tap.on("tap",function(g,C,M){Pi(s.eventEmitter,`${s.eventNamePrefix}${g.tapsCount}tap`,s.targetSizers,g.worldX,g.worldY,M)},this)}};const oO=Phaser.Utils.Objects.GetValue;var hO=function(i){var t=oO(i,"press",void 0);if(t!==!1){t===!0&&(t=void 0);var s=this._childrenInteractive;this._press=new go(this,t),this._press.on("pressstart",function(g,C,M){Pi(s.eventEmitter,`${s.eventNamePrefix}pressstart`,s.targetSizers,g.worldX,g.worldY,M)},this).on("pressend",function(g,C,M){Pi(s.eventEmitter,`${s.eventNamePrefix}pressend`,s.targetSizers,g.worldX,g.worldY,M)},this)}};const lO=Phaser.Utils.Objects.GetValue;var uO=function(i){var t=lO(i,"swipe",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("dir")||(t.dir="4dir");var s=this._childrenInteractive;this._swipe=new Or(this,t),this._swipe.on("swipe",function(g,C,M){var l=g.left?"left":g.right?"right":g.up?"up":"down";Pi(s.eventEmitter,`${s.eventNamePrefix}swipe${l}`,s.targetSizers,g.worldX,g.worldY,M)},this)}};const Bh=Phaser.Utils.Objects.GetValue;var ku=function(i,t){return i.setInteractive(),i._childrenInteractive={targetSizers:Bh(t,"targets",[i]),eventEmitter:Bh(t,"eventEmitter",i),eventNamePrefix:Bh(t,"inputEventPrefix","child.")},RA.call(i,t),bA.call(i,t),DA.call(i,t),GA.call(i,t),aO.call(i,t),hO.call(i,t),uO.call(i,t),i},dO=function(i){return ku(this,i),this},fO=function(){for(var i=this.getAllChildren([this]),t=0,s=i.length;t<s;t++){var g=i[t];g.emit.apply(g,arguments)}return this},Xg={getSizerConfig:Yw,getChildPrevState:Xw,pushIntoBounds:Ww,drawBounds:iR,resolveWidth:Mu,resolveChildrenWidth:pR,resolveHeight:wu,postResolveSize:gR,getChildWidth:mR,getChildHeight:xR,getExpandedChildWidth:yR,getExpandedChildHeight:TR,getChildrenWidth:CR,getChildrenHeight:SR,addChildrenMap:Jf,addElement:Jf,removeChildrenMap:dR,getElement:fR,getAllChildrenSizers:PR,getChildrenSizers:ER,preLayout:wr,layout:wR,runLayout:RR,layoutChildren:AR,runWidthWrap:Fg,layoutBackgrounds:TA,postLayout:OR,setAnchor:bR,isInTouching:cA,pointToChild:gA,setDraggable:CA,setChildrenInteractive:dO,broadcastEvent:fO};Object.assign(Xg,vR,rR,uR,Mr,Ou,VR,UR,KR,JR,kg,PA,MA,QR,Bu,MR);const hn=Phaser.Utils.Objects.GetValue;class zs extends Ne{constructor(t,s,g,C,M,l){super(t,s,g,1,1),this.isRexSizer=!0,this.setMinSize(C,M),this.setName(hn(l,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.childrenMap={},this.layoutedChildren=void 0;var T=hn(l,"anchor",void 0);T&&this.setAnchor(T),this.setInnerPadding(hn(l,"space",0));var e=hn(l,"draggable",!1);e&&this.setDraggable(e),this.setSizerEventsEnable(hn(l,"sizerEvents",!1)),this.setDirty(!0),hn(l,"enableLayer",!1)&&this.enableLayer()}destroy(t){if(!(!this.scene||this.ignoreDestroy)){if(t)for(var s=this.getAllChildrenSizers([this]),g=0,C=s.length;g<C;g++)s[g].sizerEventsEnable=!1;super.destroy(t),Ii(this.backgroundChildren),Ii(this.sizerChildren),this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(t,s){return this.setMinWidth(t).setMinHeight(s),this}setMinWidth(t){return t==null&&(t=0),this.minWidth=t,this}setMinHeight(t){return t==null&&(t=0),this.minHeight=t,this}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSizerEventsEnable(t){return t===void 0&&(t=!0),this.sizerEventsEnable=t,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-Ut(this)*this.originX}set left(t){this.x+=t-this.left}alignLeft(t){return this.left=t,this}get right(){return this.left+Ut(this)}set right(t){this.x+=t-this.right}alignRight(t){return this.right=t,this}get centerX(){return this.left+Ut(this)/2}set centerX(t){this.x+=t-this.centerX}alignCenterX(t){return this.centerX=t,this}get top(){return this.y-It(this)*this.originY}set top(t){this.y+=t-this.top}alignTop(t){return this.top=t,this}get bottom(){return this.top+It(this)}set bottom(t){this.y+=t-this.bottom}alignBottom(t){return this.bottom=t,this}get centerY(){return this.top+It(this)/2}set centerY(t){this.y+=t-this.centerY}alignCenterY(t){return this.centerY=t,this}get innerLeft(){return this.left+this.space.left}get innerRight(){return this.right-this.space.right}get innerTop(){return this.top+this.space.top}get innerBottom(){return this.bottom-this.space.bottom}get innerWidth(){return this.width-this.space.left-this.space.right}get innerHeight(){return this.height-this.space.top-this.space.bottom}get minInnerWidth(){var t=this.minWidth-this.space.left-this.space.right;return Math.max(t,0)}get minInnerHeight(){var t=this.minHeight-this.space.top-this.space.bottom;return Math.max(t,0)}}Object.assign(zs.prototype,Xg);var cO=function(){if(this.rexSizer.hidden)return 0;var i=0,t=this.sizerChildren,s,g,C;for(var M in t)s=t[M],g=s.rexSizer.padding,C=this.getChildWidth(s)+g.left+g.right,i=Math.max(C,i);return i+this.space.left+this.space.right},vO=function(){if(this.rexSizer.hidden)return 0;var i=0,t=this.sizerChildren,s,g,C;for(var M in t)s=t[M],C=s.isRexSizer?Math.max(s.minHeight,s.childrenHeight):s.minHeight!==void 0?s.minHeight:It(s),g=s.rexSizer.padding,C+=g.top+g.bottom,i=Math.max(C,i);return i+this.space.top+this.space.bottom},pO=function(i,t){t===void 0&&(t=this.width);var s,g=i.rexSizer;if(g.expandWidth){var C=t-this.space.left-this.space.right,M=g.padding;s=C-M.left-M.right}return s},gO=function(i,t){t===void 0&&(t=this.height);var s,g=i.rexSizer;if(g.expandHeight){var C=t-this.space.top-this.space.bottom,M=g.padding;s=C-M.top-M.bottom}return s},mO=function(i){i===void 0&&(i=[]);var t=this.sizerChildren,s;for(var g in t)s=t[g],s.isRexSizer&&i.push(s);return i},zu=function(i,t){i.width<i.childrenWidth&&console.warn(`Layout width error: Parent=${t.constructor.name}, Child=${i.constructor.name}`),i.height<i.childrenHeight&&console.warn(`Layout height error: Parent=${t.constructor.name}, Child=${i.constructor.name}`)},xO=function(){var i,t,s,g=this.innerLeft,C=this.innerTop,M=this.innerWidth,l=this.innerHeight,T,e,d,x,u,h,o=this.sizerChildren;for(var n in o)i=o[n],!i.rexSizer.hidden&&(t=i.rexSizer,s=t.padding,Rr.call(this,i),i.isRexSizer?(i.runLayout(this,this.getExpandedChildWidth(i),this.getExpandedChildHeight(i)),zu(i,this)):(u=void 0,h=void 0,t.expandWidth&&(u=M-s.left-s.right),t.expandHeight&&(h=l-s.top-s.bottom),ai(i,u,h)),T=g+s.left,d=M-s.left-s.right,e=C+s.top,x=l-s.top-s.bottom,Ar.call(this,i,T,e,d,x,t.align,t.alignOffsetX,t.alignOffsetY))};const Cc=Phaser.Utils.Objects.IsPlainObject,di=Phaser.Utils.Objects.GetValue,Sc=Phaser.Display.Align.CENTER,yO=Phaser.Utils.String.UUID;var TO=function(i,t,s,g,C,M,l,T,e){if(Pr.call(this,i),Cc(t)){var x=t;t=di(x,"key",void 0),s=di(x,"align",Sc),T=di(x,"offsetX",0),e=di(x,"offsetY",0),g=di(x,"padding",0),C=di(x,"expand",!0),i.isRexSizer||(M=di(x,"minWidth",i._minWidth),l=di(x,"minHeight",i._minHeighted))}var d=t!==void 0;d||(t=yO()),typeof s=="string"&&(s=Ye[s]),s===void 0&&(s=Sc),T===void 0&&(T=0),e===void 0&&(e=0),g===void 0&&(g=0),C===void 0&&(C=!0),i.isRexSizer||(M===void 0&&(M=i._minWidth),l===void 0&&(l=i._minHeight));var x=this.getSizerConfig(i);return x.align=s,x.alignOffsetX=T,x.alignOffsetY=e,x.padding=Ln(g),Cc(C)?(x.expandWidth=di(C,"width",!1),x.expandHeight=di(C,"height",!1)):(x.expandWidth=C,x.expandHeight=C),i.isRexSizer||(x.expandWidth&&(i.minWidth=M===void 0?Ut(i):M),x.expandHeight&&(i.minHeight=l===void 0?It(i):l)),this.sizerChildren.hasOwnProperty(t)&&this.sizerChildren[t].destroy(),this.sizerChildren[t]=i,d&&this.addChildrenMap(t,i),this};const CO={add:TO},SO=Ne.prototype.clear;var mo=function(i){this.backgroundChildren&&(this.backgroundChildren.length=0);var t=!i&&this.sizerEventsEnable,s;if(t&&(s=this.getChildren([])),SO.call(this,i),t)for(var g,C=0,M=s.length;C<M;C++)g=s[C],g.emit("sizer.remove",g,this),this.emit("remove",g,this);return this};const PO={remove(i,t){var s;if(typeof i=="string"){if(s=i,i=this.sizerChildren[s],!i)return this}else{if(this.getParentSizer(i)!==this)return this;s=this.childToKey(i)}return s&&(delete this.sizerChildren[s],this.childrenMap.hasOwnProperty(s)&&delete this.childrenMap[s]),Er.call(this,i,t),this},removeAll(i){for(var t in this.sizerChildren)this.remove(t,i);return this},clear(i){for(var t in this.sizerChildren)delete this.sizerChildren[t],this.childrenMap.hasOwnProperty(t)&&delete this.childrenMap[t];return mo.call(this,i),this}};var Wg={getChildrenWidth:cO,getChildrenHeight:vO,getExpandedChildWidth:pO,getExpandedChildHeight:gO,getChildrenSizers:mO,layoutChildren:xO};Object.assign(Wg,CO,PO);var xo=function(i,t){if(Array.isArray(i))return i.indexOf(t);for(var s in i)if(i[s]===t)return s;return null};const Pc=Phaser.Utils.Objects.IsPlainObject,ln=Phaser.Utils.Objects.GetValue;class Ze extends zs{constructor(t,s,g,C,M,l){Pc(s)?(l=s,s=ln(l,"x",0),g=ln(l,"y",0),C=ln(l,"width",void 0),M=ln(l,"height",void 0)):Pc(C)&&(l=C,C=ln(l,"width",void 0),M=ln(l,"height",void 0)),super(t,s,g,C,M,l),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(t){if(typeof t=="string"){var s=t;if(this.sizerChildren.hasOwnPropery(s))return s}else return xo(this.sizerChildren,t);return null}}Object.assign(Ze.prototype,Wg);var EO=Phaser.Math.Distance.Between,Xa=function(i,t,s){var g=i.width/2;return EO(g,g,t,s)<=g};const MO=Phaser.Math.Angle.Between,wO=Phaser.Math.Angle.Normalize;var Ec=function(i,t,s){if(this.enable&&i.isDown){var g=this.sizerChildren.knob;if(Xa(g,t,s)){var C=g.width/2,M=g.startAngle,l=MO(C,C,t,s),T=g.anticlockwise?M-l:l-M,e=wO(T)/(2*Math.PI);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-e)<.1?this.value=e:this.easeValueTo(e)}}},RO=function(){var i=this.sizerChildren.knob;i.on("pointerdown",Ec,this).on("pointermove",Ec,this).setInteractive()};const Mc=Phaser.Math.Angle.Between,AO=Phaser.Math.Angle.Wrap;var OO=function(i,t,s){if(!(!this.enable||this.panPointer)){var g=this.sizerChildren.knob;Xa(g,t,s)&&Hg.call(this,i)}},bO=function(i,t,s){if(this.enable&&i.isDown){var g=this.sizerChildren.knob;switch(this.panState){case Uu:Xa(g,t,s)&&Hg.call(this,i);break;case Kg:Xa(g,t,s)?LO.call(this):$g.call(this);break}}},FO=function(i,t,s){!this.enable||this.panPointer!==i||$g.call(this)},Hg=function(i){this.panPointer=i,this.panState=Kg},$g=function(){this.panPointer=void 0,this.panState=Uu},LO=function(){var i=this.panPointer.prevPosition,t=this.panPointer.position,s=this.sizerChildren.knob,g=Mc(s.x,s.y,i.x,i.y),C=Mc(s.x,s.y,t.x,t.y),M=s.anticlockwise?g-C:C-g,l=AO(M)/(Math.PI*2);this.stopEaseValue(),this.value+=l};const Uu=0,Kg=1;var DO=function(){var i=this.sizerChildren.knob;i.on("pointerdown",OO,this).on("pointermove",bO,this).on("pointerup",FO,this).setInteractive(),this.panPointer=void 0,this.panState=Uu},IO=function(i,t){return this.textFormatCallback=i,this.textFormatCallbackScope=t,this},Zg=function(i){i===void 0&&(i=this.value);var t;return this.textFormatCallbackScope?t=this.textFormatCallback(i):t=this.textFormatCallback.call(this.textFormatCallbackScope,i),t},BO=function(i){var t=this.sizerChildren.text;return t&&this.textFormatCallback&&(t.setText(Zg.call(this,i)),t.layout&&t.layout()),this};const GO={setTextFormatCallback:IO,getFormatText:Zg,updateText:BO},qe=Phaser.Utils.Objects.GetValue,NO=Phaser.Math.Snap.To;class Yu extends ks(Ze){constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexKnob",this.bootProgressBase(s);var g=qe(s,"background",void 0),C=qe(s,"text",void 0);g&&this.addBackground(g),C&&(s.textColor=void 0,s.textStrokeColor=void 0,this.setTextFormatCallback(qe(s,"textFormatCallback",void 0),qe(s,"textFormatCallbackScope",void 0)));var M=new ro(t,s);M.setDepth(qe(s,"knobDepth",0)),M._value=-1,t.add.existing(M),this.add(M,"knob"),C&&(this.add(C,"text","center",0,!1),t.children.moveBelow(M,C)),this.addChildrenMap("background",g),this.addChildrenMap("knob",M),this.addChildrenMap("text",C),this.setEnable(qe(s,"enable",void 0)),this.setGap(qe(s,"gap",void 0)),this.setValue(qe(s,"value",0),qe(s,"min",void 0),qe(s,"max",void 0));var l=qe(s,"input",0);switch(typeof l=="string"&&(l=VO[l]),l){case 0:DO.call(this);break;case 1:RO.call(this);break}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this.sizerChildren.knob.value}set value(t){this.gap!==void 0&&(t=NO(t,this.gap));var s=this.value;this.sizerChildren.knob.value=t;var g=this.value;s!==g&&(this.updateText(),this.eventEmitter.emit("valuechange",g,s,this.eventEmitter))}}const VO={pan:0,drag:0,click:1,none:-1};Object.assign(Yu.prototype,GO);ht.register("knob",function(i){var t=new Yu(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.Knob",Yu);const kO={arc:no,circle:Al,curve:VE,ellipse:kE,line:zE,lines:Sn,rectangle:oM,roundRectangle:za,triangle:lM},wc=Phaser.Utils.Objects.GetValue,zO=Phaser.Utils.Objects.IsPlainObject,UO=function(){for(var i=this.getShapes(),t=0,s=i.length;t<s;t++)i[t].lineStyle().fillStyle()},YO={createShape(i,t){var s=kO[i],g=new s;return t&&g.setName(t),g},buildShapes(i){var t=wc(i,"create",void 0);if(zO(t)){var s=t;for(var g in s){var C=s[g];switch(typeof C){case"number":for(var M=0;M<C;M++)this.addShape(this.createShape(g));break;case"string":this.addShape(this.createShape(g,C));break;default:for(var l=C,M=0,T=l.length;M<T;M++)this.addShape(this.createShape(g,l[M]));break}}}else if(Array.isArray(t))for(var s=t,M=0,T=s.length;M<T;M++){var e=s[M];this.addShape(this.createShape(e.type,e.name))}else typeof t=="function"&&t.call(this);this.setUpdateShapesCallback(wc(i,"update"))},setUpdateShapesCallback(i){return i===void 0&&(i=UO),this.dirty=this.dirty||this.updateCallback!==i,this.updateCallback=i,this},updateShapes(){this.updateCallback.call(this)}},Rc=Phaser.GameObjects.Components.TransformMatrix,XO=Phaser.Math.TransformXY;var WO=function(i,t,s,g,C){g===void 0&&(g=i.scene.cameras.main),C===void 0?C={}:C===!0&&(C=HO);var M=g.scrollX,l=g.scrollY,T=t+M*i.scrollFactorX-M,e=s+l*i.scrollFactorY-l;return i.parentContainer?(ha===void 0&&(ha=new Rc,Ac=new Rc),i.getWorldTransformMatrix(ha,Ac),ha.applyInverse(T,e,C)):XO(T,e,i.x,i.y,i.rotation,i.scaleX,i.scaleY,C),C.x+=i.displayOriginX,C.y+=i.displayOriginY,C},ha,Ac,HO={};const qn=Phaser.Utils.Objects.GetValue,$O=Phaser.Utils.Objects.IsPlainObject;class yo extends Ns{constructor(t,s,g,C,M,l){$O(s)&&(l=s,s=qn(l,"x",0),g=qn(l,"y",0),C=qn(l,"width",2),M=qn(l,"height",2)),super(t,s,g,C,M),this.type=qn(l,"type","rexCustomShapes"),this.buildShapes(l)}get centerX(){return this.width/2}get centerY(){return this.height/2}worldToLocalXY(t,s,g,C){return typeof g=="boolean"&&(C=g,g=void 0),WO(this,t,s,g,C)}}Object.assign(yo.prototype,YO);ht.register("customShapes",function(i,t,s,g,C){var M=new yo(this.scene,i,t,s,g,C);return this.scene.add.existing(M),M});ot(window,"RexPlugins.UI.CustomShapes",yo);const _n=Phaser.Utils.Objects.GetValue,KO=Phaser.Utils.Objects.IsPlainObject;class us extends ks(yo){constructor(t,s,g,C,M,l){KO(s)&&(l=s,s=_n(l,"x",0),g=_n(l,"y",0),C=_n(l,"width",2),M=_n(l,"height",2)),l===void 0&&(l={}),l.type||(l.type="rexCustomProgress"),super(t,s,g,C,M,l),this.bootProgressBase(l),this.setValue(_n(l,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}}ht.register("customProgress",function(i,t,s,g,C){var M=new us(this.scene,i,t,s,g,C);return this.scene.add.existing(M),M});ot(window,"RexPlugins.UI.CustomProgress",us);const ZO={setTransitionStartCallback(i,t){return this.onStartCallback=i,this.onStartCallbackScope=t,this},setTransitionProgressCallback(i,t){return this.onProgressCallback=i,this.onProgressCallbackScope=t,this},setTransitionCompleteCallback(i,t){return this.onCompleteCallback=i,this.onCompleteCallbackScope=t,this}},Oc=Phaser.Utils.Objects.IsPlainObject,Gh=Phaser.Utils.Objects.GetValue,jO=Phaser.Utils.Array.GetRandom;var JO={out:0,in:1},fi=function(i,t,...s){for(var g=0,C=s.length;g<C;g++){var M=s[g];if(M&&M.hasOwnProperty(i))return M[i]}return t};const QO={setTransitionDirection(i){return typeof i=="string"&&(i=JO[i]),this.dir=i,this},setDuration(i){return this.duration=i,this},setEaseFunction(i){return this.easeFunction=i,this},setNextTexture(i,t){return this.nextImage.setTexture(i,t),this},transit(i,t,s){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),s!==void 0&&(i={key:i,frame:t,mode:s}),this.currentTransitionMode=void 0,Oc(i)){var g=i;i=Gh(g,"key",void 0),t=Gh(g,"frame",void 0),s=Gh(g,"mode"),Array.isArray(s)&&(s=jO(s));var C;this.transitionModes&&this.transitionModes.hasOwnProperty(s)&&(C=this.transitionModes[s],this.currentTransitionMode=s),this.setDuration(fi("duration",this.duration,g,C)).setEaseFunction(fi("ease",this.easeFunction,g,C)).setTransitionDirection(fi("dir",this.dir,g,C));var M=fi("mask",void 0,g,C);M&&this.setMaskGameObject(M),this.setMaskEnable(M===!0);var l=fi("onStart",void 0,g,C),T=fi("onProgress",void 0,g,C),e=fi("onComplete",void 0,g,C);(l!==void 0||T!==void 0||e!==void 0)&&this.setTransitionStartCallback(l,fi("onStartScope",void 0,g,C)).setTransitionProgressCallback(T,fi("onProgressScope",void 0,g,C)).setTransitionCompleteCallback(e,fi("onCompleteScope",void 0,g,C))}return this.setNextTexture(i,t),this.start(),this},addTransitionMode(i,t){return this.transitionModes===void 0&&(this.transitionModes={}),Oc(i)&&(t=i,i=t.name,delete t.name),this.transitionModes[i]=t,this},start(){return this.easeValueTask===void 0&&(this.easeValueTask=new Vs(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}};var bc=function(i,t,s,g,C){switch(this.clear().fillStyle(16777215),this.shape){case 1:var M=Math.min(i,t)/2;this.fillCircle(-i*(g-.5),-t*(C-.5),M+s);break;default:this.fillRect(-(i*g)-s,-(t*C)-s,i+2*s,t+2*s);break}};const qO=Phaser.GameObjects.Graphics;class Ll extends qO{constructor(t,s,g){s===void 0&&(s=0),typeof s=="string"&&(s=_O[s]),g===void 0&&(g=0),super(t.scene),this.parent=t,this.shape=s,this.padding=g,this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}setPosition(t,s){var g=this.parent;return t===void 0&&(t=g.x),s===void 0&&(s=g.y),super.setPosition(t,s),this}resize(t,s,g){var C=this.parent;return t===void 0&&(t=C.width),s===void 0&&(s=C.height),g===void 0&&(g=this.padding),this.width===t&&this.height===s&&this.paddingSave===g?this:(this.width=t,this.height=s,this.originX=C.originX,this.originY=C.originY,this.paddingSave=g,bc.call(this,t,s,g,C.originX,C.originY),this)}setOrigin(t,s){s===void 0&&(s=t);var g=this.parent;return t===void 0&&(t=g.originX),s===void 0&&(s=g.originY),this.originX===t&&this.originY===s?this:(this.originX=t,this.originY=s,bc.call(this,this.width,this.height,this.paddingSave,t,s),this)}}const _O={rectangle:0,circle:1},tb={setMaskGameObject(i){if(!i)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(i===!0&&this.maskGameObject instanceof Ll)return this;if(this.maskGameObject===i)return this;this.removeMaskGameObject()}return i===!0&&(i=new Ll(this)),this.maskGameObject=i,this.maskGameObject.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(this.maskGameObject),this.childrenMask=this.maskGameObject.createGeometryMask(),this},removeMaskGameObject(i){return i===void 0&&(i=!0),this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,i),this.maskGameObject=void 0,this},setImageMaskEnable(i,t,s){return t===void 0&&(t=!0),s===void 0&&(s=!1),t?(this.childrenMask||this.setMaskGameObject(!0),i.setMask(this.childrenMask),s&&this.childrenMask.setInvertAlpha()):i.clearMask(),this},setCurrentImageMaskEnable(i,t){return this.setImageMaskEnable(this.currentImage,i,t),this},setNextImageMaskEnable(i,t){return this.setImageMaskEnable(this.nextImage,i,t),this},setCellImagesMaskEnable(i,t){for(var s=this.getCellImages(),g=0,C=s.length;g<C;g++)this.setImageMaskEnable(s[g],i,t);return this},setMaskEnable(i,t){return this.setImageMaskEnable(this.backImage,i,t),this.setImageMaskEnable(this.frontImage,i,t),this.setCellImagesMaskEnable(i,t),this}};var eb=function(i,t){t===void 0&&(t=",");var s;return i==="__BASE"?s=function(g,C){return`${g}${t}${C}`}:s=function(g,C){return`${i}_${g}${t}${C}`},s},ib=function(i,t,s,g,C,M){s==null&&(s="__BASE"),M||(M=eb(s,M));for(var l=i.sys.textures.get(t),T=typeof s=="object"?s:l.get(s),e=T.width,d=T.height,x,u,h,o=e/g,n=d/C,r=0,f=0,a=0;a<C;a++){r=0;for(var c=0;c<g;c++)h=M(c,a),x=r+T.cutX,u=f+T.cutY,l.add(h,0,x,u,o,n),r+=o;f+=n}return{getFrameNameCallback:M,cellWidth:o,cellHeight:n,columns:g,rows:C}};const Ri=Phaser.Utils.Objects.GetValue,sb=Phaser.GameObjects.Image,nb=Phaser.Utils.Objects.IsPlainObject,rb=Phaser.Math.RotateAround;var ab=function(i,t,s,g){nb(t)&&(g=t,t=Ri(g,"columns",1),s=Ri(g,"rows",1));var C=Ri(g,"onCreateImage");if(!C){var M=Ri(g,"ImageClass",sb);C=function(I,B,k){return new M(I,0,0,B,k)}}for(var l=Ri(g,"originX",.5),T=Ri(g,"originY",.5),e=Ri(g,"add",!0),d=Ri(g,"align",e),x=Ri(g,"objectPool",void 0),u=i.scene,h=i.texture,o=i.frame,n=ib(u,h,o,t,s),r=n.getFrameNameCallback,f=i.scaleX,a=i.scaleY,c=i.rotation,p=i.getTopLeft(),v=p.x,m=p.y,y=[],P=n.cellWidth*f,E=n.cellHeight*a,S=0;S<s;S++)for(var w=0;w<t;w++){var R,A=r(w,S);x&&x.length>0?R=x.pop().setTexture(h,A):R=C(u,h,A),e&&u.add.existing(R);var O=v+P*w,F=m+E*S,b=O+l*P,D=F+T*E;d&&(R.setOrigin(l,T).setPosition(b,D).setScale(f,a).setRotation(c),rb(R,v,m,c)),y.push(R)}return y};const ob={gridCutImage(i,t,s,g){g===void 0&&(g={}),g.objectPool=this.imagesPool;for(var C=ab(i,t,s,g),M,l=0,T=C.length;l<T;l++)M=C[l],M.setVisible(!0),this.add(M);return this.cellImages=C,this.setChildLocalVisible(i,!1),C},gridCutCurrentImage(i,t,s){return this.gridCutImage(this.currentImage,i,t,s)},gridCutNextImage(i,t,s){return this.gridCutImage(this.nextImage,i,t,s)},getCellImages(){return this.cellImages},freeCellImages(){if(this.cellImages.length===0)return this;for(var i=this.cellImages[0].texture,t=this.cellImages,s,g,C=0,M=t.length;C<M;C++)s=t[C],this.setChildLocalAlpha(s,1).setChildLocalScale(s,1).setChildLocalVisible(s,!1),s.clearMask(),g=s.frame.name,s.setTexture(),i.remove(g);return this.imagesPool.push(...t),t.length=0,this}},jg={setFlipX(i){return this.flipX=i,this},setFlipY(i){return this.flipY=i,this},toggleFlipX(){return this.flipX=!this.flipX,this},toggleFlipY(){return this.flipY=!this.flipY,this},setFlip(i,t){return this.flipX=i,this.flipY=t,this},resetFlip(){return this.flipX=!1,this.flipY=!1,this}};var Jg={};Object.assign(Jg,ZO,QO,tb,ob,jg);var hb=function(i,t,s,g){},lb=function(i,t,s,g){i.setChildLocalAlpha(t,1-g).setChildLocalAlpha(s,g)},ub=function(i,t,s,g){i.setChildLocalAlpha(t,1)};const Fc=Phaser.Utils.Objects.IsPlainObject,ae=Phaser.Utils.Objects.GetValue,db=Phaser.Math.Clamp;class To extends Ne{constructor(t,s,g,C,M,l){Fc(s)?(l=s,s=ae(l,"x",0),g=ae(l,"y",0),C=ae(l,"key",void 0),M=ae(l,"frame",void 0)):Fc(M)&&(l=M,M=void 0);var T=ae(l,"back",void 0),e=ae(l,"front",void 0);T||(T=t.add.image(s,g,C,M)),e||(e=t.add.image(s,g,C,M));var d=ae(l,"width",e.width),x=ae(l,"height",e.height);super(t,s,g,d,x),this.type="rexTransitionImage",T.setVisible(!1),this.addMultiple([T,e]),this.backImage=T,this.frontImage=e,this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[],this.transitionModes=void 0,this.currentTransitionMode=void 0;var u=ae(l,"onStart",void 0),h=ae(l,"onProgress",void 0),o=ae(l,"onComplete",void 0),n=ae(l,"dir",0);u===void 0&&h===void 0&&o===void 0&&(u=hb,h=lb,o=ub,n=0),this.setTransitionStartCallback(u,ae(l,"onStartScope",void 0)).setTransitionProgressCallback(h,ae(l,"onProgressScope",void 0)).setTransitionCompleteCallback(o,ae(l,"onCompleteScope",void 0)).setTransitionDirection(n).setDuration(ae(l,"duration",1e3)).setEaseFunction(ae(l,"ease","Linear"));var r=ae(l,"mask",void 0);r&&this.setMaskGameObject(r),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1}destroy(t){!this.scene||this.ignoreDestroy||(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,this.transitionModes=void 0,super.destroy(t),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return this.dir===0?this.frontImage:this.backImage}get nextImage(){return this.dir===0?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.backImage.setFlipX(t),this.frontImage.setFlipX(t))}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.backImage.setFlipY(t),this.frontImage.setFlipY(t))}get t(){return this._t}set t(t){if(t=db(t,0,1),this._t!==t){this._t=t;var s=this.currentImage,g=this.nextImage;if(t===0&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),Nh(this.onStartCallback,this.onStartCallbackScope,this,s,g,t)),Nh(this.onProgressCallback,this.onProgressCallbackScope,this,s,g,t),t===1){Nh(this.onCompleteCallback,this.onCompleteCallbackScope,this,s,g,t);var C=g.texture.key,M=g.frame.name;this.frontImage.setTexture(C,M),this.backImage.setTexture(C,M),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}t===1&&!this.ignoreCompleteEvent&&this.emit("complete")}}setT(t){return this.t=t,this}get isRunning(){return this.easeValueTask?this.easeValueTask.isRunning:!1}setOrigin(t,s){return super.setOrigin(t,s),this.backImage.setOrigin(t,s),this.frontImage.setOrigin(t,s),this.maskGameObject&&this.maskGameObject.setOrigin(t,s),this}setTexture(t,s){return this.frontImage.setTexture(t,s),this.backImage.setTexture(t,s).setVisible(!1),this}}var Nh=function(i,t,s,g,C,M){i&&(t?i.call(t,s,g,C,M):i(s,g,C,M))};Object.assign(To.prototype,Jg);ht.register("transitionImage",function(i,t,s,g,C){var M=new To(this.scene,i,t,s,g,C);return this.scene.add.existing(M),M});ot(window,"RexPlugins.UI.TransitionImage",To);const fb="slideLeft",cb="slideRight",vb="slideUp",pb="slideDown",gb="slideAwayLeft",mb="slideAwayRight",xb="slideAwayUp",yb="slideAwayDown",Tb="pushLeft",Cb="pushRight",Sb="pushUp",Pb="pushDown",Eb="zoomOut",Mb="zoomIn",wb="zoomInOut",Rb="fade",Ab="crossFade",Ob="wipeLeft",bb="wipeRight",Fb="wipeUp",Lb="wipeDown",Db="irisOut",Ib="irisIn",Bb="pieOut",Gb="pieIn",Nb="blinds",Vb="squares",kb="curtain",zb="pixellate";var Ub=function(i){i.addTransitionMode(mb,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,g,C){},onProgress:function(t,s,g,C){var M=s.width*C;t.setChildLocalPosition(s,M,0)},onComplete:function(t,s,g,C){t.setChildLocalPosition(s,0,0)}}).addTransitionMode(gb,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,g,C){},onProgress:function(t,s,g,C){var M=s.width*-C;t.setChildLocalPosition(s,M,0)},onComplete:function(t,s,g,C){t.setChildLocalPosition(s,0,0)}}).addTransitionMode(yb,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,g,C){},onProgress:function(t,s,g,C){var M=s.height*C;t.setChildLocalPosition(s,0,M)},onComplete:function(t,s,g,C){t.setChildLocalPosition(s,0,0)}}).addTransitionMode(xb,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,g,C){},onProgress:function(t,s,g,C){var M=s.height*-C;t.setChildLocalPosition(s,0,M)},onComplete:function(t,s,g,C){t.setChildLocalPosition(s,0,0)}})},Yb=function(i){i.addTransitionMode(cb,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,s,g,C){},onProgress:function(t,s,g,C){var M=g.width*(C-1);t.setChildLocalPosition(g,M,0)},onComplete:function(t,s,g,C){t.setChildLocalPosition(g,0,0)}}).addTransitionMode(fb,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,s,g,C){},onProgress:function(t,s,g,C){var M=g.width*(1-C);t.setChildLocalPosition(g,M,0)},onComplete:function(t,s,g,C){t.setChildLocalPosition(g,0,0)}}).addTransitionMode(pb,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,s,g,C){},onProgress:function(t,s,g,C){var M=g.height*(C-1);t.setChildLocalPosition(g,0,M)},onComplete:function(t,s,g,C){t.setChildLocalPosition(g,0,0)}}).addTransitionMode(vb,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,s,g,C){},onProgress:function(t,s,g,C){var M=g.height*(1-C);t.setChildLocalPosition(g,0,M)},onComplete:function(t,s,g,C){t.setChildLocalPosition(g,0,0)}})},Xb=function(i){i.addTransitionMode(Cb,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,g,C){},onProgress:function(t,s,g,C){var M=s.width*C;t.setChildLocalPosition(s,M,0);var M=g.width*(C-1);t.setChildLocalPosition(g,M,0)},onComplete:function(t,s,g,C){t.setChildLocalPosition(s,0,0),t.setChildLocalPosition(g,0,0)}}).addTransitionMode(Tb,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,g,C){},onProgress:function(t,s,g,C){var M=s.width*-C;t.setChildLocalPosition(s,M,0);var M=g.width*(1-C);t.setChildLocalPosition(g,M,0)},onComplete:function(t,s,g,C){t.setChildLocalPosition(s,0,0),t.setChildLocalPosition(g,0,0)}}).addTransitionMode(Pb,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,g,C){},onProgress:function(t,s,g,C){var M=s.height*C;t.setChildLocalPosition(s,0,M);var M=g.height*(C-1);t.setChildLocalPosition(g,0,M)},onComplete:function(t,s,g,C){t.setChildLocalPosition(s,0,0),t.setChildLocalPosition(g,0,0)}}).addTransitionMode(Sb,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,g,C){},onProgress:function(t,s,g,C){var M=s.height*-C;t.setChildLocalPosition(s,0,M);var M=g.height*(1-C);t.setChildLocalPosition(g,0,M)},onComplete:function(t,s,g,C){t.setChildLocalPosition(s,0,0),t.setChildLocalPosition(g,0,0)}})},Wb=function(i){i.addTransitionMode(Eb,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,g,C){},onProgress:function(t,s,g,C){var M=1-C;t.setChildScale(s,M,M)},onComplete:function(t,s,g,C){t.setChildScale(s,1,1)}}).addTransitionMode(Mb,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,s,g,C){},onProgress:function(t,s,g,C){var M=C;t.setChildScale(g,M,M)},onComplete:function(t,s,g,C){t.setChildScale(g,1,1)}}).addTransitionMode(wb,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,g,C){t.setChildVisible(g,!1)},onProgress:function(t,s,g,C){var M;C<.5?(M=1-C*2,t.setChildScale(s,M,M)):(s.visible&&t.setChildVisible(s,!1),g.visible||t.setChildVisible(g,!0),M=(C-.5)*2,t.setChildScale(g,M,M))},onComplete:function(t,s,g,C){t.setChildScale(s,1,1),t.setChildVisible(s,!0),t.setChildScale(g,1,1),t.setChildVisible(g,!0)}})},Hb=function(i){i.addTransitionMode(Rb,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,s,g,C){},onProgress:function(t,s,g,C){var M;C<.5?(g.visible&&t.setChildVisible(g,!1),C=Ds(C),M=Math.floor(255*(1-C)),s.tint=(M<<16)+(M<<8)+M):(s.visible&&t.setChildVisible(s,!1),g.visible||t.setChildVisible(g,!0),C=Ds(C),M=Math.floor(255*(1-C)),g.tint=(M<<16)+(M<<8)+M)},onComplete:function(t,s,g,C){s.tint=16777215,t.setChildVisible(s,!0),g.tint=16777215}}).addTransitionMode(Ab,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,s,g,C){},onProgress:function(t,s,g,C){t.setChildLocalAlpha(s,1-C),t.setChildLocalAlpha(g,C)},onComplete:function(t,s,g,C){t.setChildLocalAlpha(s,1)}})},$b=function(i){var t=new us(i,{type:"Graphics",create:[{name:"rect",type:"rectangle"}],update:function(){var s=this.getShape("rect").fillStyle(16777215),g=1-this.value;switch(this.wipeMode){case"right":s.setSize(this.width*g,this.height).setTopLeftPosition(this.width-s.width,0);break;case"left":s.setSize(this.width*g,this.height).setTopLeftPosition(0,0);break;case"down":s.setSize(this.width,this.height*g).setTopLeftPosition(0,this.height-s.height);break;case"up":s.setSize(this.width,this.height*g).setTopLeftPosition(0,0);break}}});return t},Kb=function(i){var t=$b(i.scene);i.once("destroy",function(){t.destroy()}).addTransitionMode(bb,{ease:"Linear",dir:"out",mask:t,onStart:function(s,g,C,M){s.setCurrentImageMaskEnable(!0),s.maskGameObject.wipeMode="right"},onProgress:function(s,g,C,M){s.maskGameObject.setValue(M)},onComplete:function(s,g,C,M){s.removeMaskGameObject(!1)}}).addTransitionMode(Ob,{ease:"Linear",dir:"out",mask:t,onStart:function(s,g,C,M){s.setCurrentImageMaskEnable(!0),s.maskGameObject.wipeMode="left"},onProgress:function(s,g,C,M){s.maskGameObject.setValue(M)},onComplete:function(s,g,C,M){s.removeMaskGameObject(!1)}}).addTransitionMode(Lb,{ease:"Linear",dir:"out",mask:t,onStart:function(s,g,C,M){s.setCurrentImageMaskEnable(!0),s.maskGameObject.wipeMode="down"},onProgress:function(s,g,C,M){s.maskGameObject.setValue(M)},onComplete:function(s,g,C,M){s.removeMaskGameObject(!1)}}).addTransitionMode(Fb,{ease:"Linear",dir:"out",mask:t,onStart:function(s,g,C,M){s.setCurrentImageMaskEnable(!0),s.maskGameObject.wipeMode="up"},onProgress:function(s,g,C,M){s.maskGameObject.setValue(M)},onComplete:function(s,g,C,M){s.removeMaskGameObject(!1)}})},Zb=function(i){var t=new us(i,{type:"Graphics",create:[{name:"rect",type:"rectangle"}],update:function(){this.getShape("rect").fillStyle(16777215).setSize(this.width*this.value,this.height*this.value).setCenterPosition(this.centerX,this.centerY)}});return t},jb=function(i){var t=Zb(i.scene);i.once("destroy",function(){t.destroy()}).addTransitionMode(Db,{ease:"Linear",dir:"out",mask:t,onStart:function(s,g,C,M){s.setCurrentImageMaskEnable(!0,!0)},onProgress:function(s,g,C,M){s.maskGameObject.setValue(M)},onComplete:function(s,g,C,M){s.removeMaskGameObject(!1)}}).addTransitionMode(Ib,{ease:"Linear",dir:"out",mask:t,onStart:function(s,g,C,M){s.setCurrentImageMaskEnable(!0)},onProgress:function(s,g,C,M){s.maskGameObject.setValue(1-M)},onComplete:function(s,g,C,M){s.removeMaskGameObject(!1)}})},Jb=function(i){var t=new us(i,{type:"Graphics",create:[{name:"pie",type:"arc"}],update:function(){var s=Math.max(this.width,this.height)*2,g=90*this.value;this.getShape("pie").fillStyle(16777215).setCenterPosition(this.centerX,0).setRadius(s).setAngle(90-g,90+g).setPie()}});return t},Qb=function(i){var t=Jb(i.scene);i.once("destroy",function(){t.destroy()}).addTransitionMode(Bb,{ease:"Linear",dir:"out",mask:t,onStart:function(s,g,C,M){s.setCurrentImageMaskEnable(!0,!0)},onProgress:function(s,g,C,M){s.maskGameObject.setValue(M)},onComplete:function(s,g,C,M){s.removeMaskGameObject(!1)}}).addTransitionMode(Gb,{ease:"Linear",dir:"out",mask:t,onStart:function(s,g,C,M){s.setCurrentImageMaskEnable(!0)},onProgress:function(s,g,C,M){s.maskGameObject.setValue(1-M)},onComplete:function(s,g,C,M){s.removeMaskGameObject(!1)}})},qb=function(i,t){var s=new us(i,{type:"Graphics",create:{rectangle:t},update:function(){for(var g=this.getShapes(),C=this.width/t,M=0;M<t;M++)g[M].fillStyle(16777215).setSize(C*this.value,this.height).setTopLeftPosition(C*M,0)}});return s},_b=function(i){var t=qb(i.scene,10);i.once("destroy",function(){t.destroy()}).addTransitionMode(Nb,{ease:"Linear",dir:"out",mask:t,onStart:function(s,g,C,M){s.setCurrentImageMaskEnable(!0,!0)},onProgress:function(s,g,C,M){s.maskGameObject.setValue(M)},onComplete:function(s,g,C,M){s.removeMaskGameObject(!1)}})},tF=function(i,t,s){var g=new us(i,{type:"Graphics",create:{rectangle:t*s},update:function(){for(var C=this.getShapes(),M=this.width/t,l=this.height/s,T=0;T<s;T++)for(var e=0;e<t;e++)C[e*s+T].fillStyle(16777215).setSize(M*this.value,l*this.value).setCenterPosition(M*(e+.5),l*(T+.5))}});return g},eF=function(i){var t=tF(i.scene,Math.ceil(i.width/40),Math.ceil(i.height/40));i.once("destroy",function(){t.destroy()}).addTransitionMode(Vb,{ease:"Linear",dir:"out",mask:t,onStart:function(s,g,C,M){s.setCurrentImageMaskEnable(!0,!0)},onProgress:function(s,g,C,M){s.maskGameObject.setValue(M)},onComplete:function(s,g,C,M){s.removeMaskGameObject(!1)}})},iF=function(i,t){var s=new us(i,{type:"Graphics",create:{lines:t},update:function(){for(var g=this.getShapes(),C=this.width/t,M=C/2,l=0;l<t;l++){var T=C*l,e=this.height*this.value,d=T+M;g[l].fillStyle(16777215).start(T,0).horizontalLineTo(e).arc(d,e,M,180,0,!0).horizontalLineTo(-e).lineTo(T,0).close()}}});return s},sF=function(i){var t=iF(i.scene,10);i.once("destroy",function(){t.destroy()}).addTransitionMode(kb,{ease:"Linear",dir:"out",mask:t,onStart:function(s,g,C,M){s.setCurrentImageMaskEnable(!0,!0),s.setNextImageMaskEnable(!0,!0)},onProgress:function(s,g,C,M){M<.5?(C.visible&&s.setChildVisible(C,!1),M=Ds(M),s.maskGameObject.setValue(M)):(g.visible&&s.setChildVisible(g,!1),C.visible||s.setChildVisible(C,!0),M=Ds(M),s.maskGameObject.setValue(M))},onComplete:function(s,g,C,M){s.removeMaskGameObject(!1),s.setChildVisible(g,!0)}})},nF=function(i){i.addTransitionMode(zb,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,s,g,C){s.effect=s.preFX.addPixelate(0),g.effect=g.preFX.addPixelate(0)},onProgress:function(t,s,g,C){if(C<.5){C=Ds(C);var M=Math.min(s.width,s.height)/5;s.effect.amount=Math.ceil(M*C)}else{s.visible&&t.setChildVisible(s,!1),C=Ds(C);var M=Math.min(g.width,g.height)/5;g.effect.amount=Math.ceil(M*C)}},onComplete:function(t,s,g,C){s.preFX.remove(s.effect),delete s.effect,t.setChildVisible(s,!0),g.preFX.remove(g.effect),delete g.effect}})};const Lc=[Ub,Yb,Xb,Wb,Hb,jb,Qb,Kb,_b,eF,sF,nF];class Qg extends To{constructor(t,s,g,C,M,l){super(t,s,g,C,M,l);for(var T=0,e=Lc.length;T<e;T++)Lc[T](this)}}ht.register("transitionImagePack",function(i,t,s,g,C){var M=new Qg(this.scene,i,t,s,g,C);return this.scene.add.existing(M),M});ot(window,"RexPlugins.UI.TransitionImagePack",Qg);var rF=function(i,t,s){if(s===void 0?s={}:s===!0&&(s=aF),i.width<=t.width&&i.height<=t.height)return s.width=i.width,s.height=i.height,s;var g=i.width/i.height;s.width=Math.min(i.width,t.width),s.height=Math.min(i.height,t.height);var C=s.width/s.height;return C<g?s.height=s.width/g:C>g&&(s.width=s.height*g),s},aF={};const Dc=Phaser.Utils.Objects.IsPlainObject,Cs=Phaser.Utils.Objects.GetValue;class Xu extends Ne{constructor(t,s,g,C,M,l){Dc(s)?(l=s,s=Cs(l,"x",0),g=Cs(l,"y",0),C=Cs(l,"key",void 0),M=Cs(l,"frame",void 0)):Dc(M)&&(l=M,M=void 0);var T=Cs(l,"image");T?T.setPosition(s,g).setOrigin(.5):(T=t.add.image(s,g,C,M),C===void 0&&T.setVisible(!1)),super(t,s,g,1,1),this.type="rexImageBox",this.add(T),this.image=T;var e=Cs(l,"width",T.width),d=Cs(l,"height",T.height);this.resize(e,d)}get texture(){return this.image.texture}get frame(){return this.image.frame}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.image.setFlipX(t))}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.image.setFlipY(t))}scaleImage(){var t=this.image,s=rF(t,{width:this.width,height:this.height},!0);return t.setDisplaySize(s.width,s.height),this.resetChildScaleState(t),this}resize(t,s){return super.resize(t,s),this.scaleImage(),this}setTexture(t,s){var g=this.image;return g.setTexture(t,s),t!==null?(this.setChildVisible(g,!0),this.scaleImage()):this.setChildVisible(g,!1),this}}Object.assign(Xu.prototype,jg);ht.register("imageBox",function(i,t,s,g,C){var M=new Xu(this.scene,i,t,s,g,C);return this.scene.add.existing(M),M});ot(window,"RexPlugins.UI.ImageBox",Xu);ht.register("fullWindowRectangle",function(i,t){var s=new Lu(this.scene,i,t);return this.scene.add.existing(s),s});ot(window,"RexPlugins.UI.FullWindowRectangle",Lu);ht.register("cover",function(i){var t=new Du(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.Cover",Du);var Wu=function(i,t){if(this.scene.sys.scale.autoRound&&(i=Math.floor(i),t=Math.floor(t)),this.width===i&&this.height===t)return this;var s=this.node.style;return s.width=`${i}px`,s.height=`${t}px`,this.updateSize(),this};const Ic={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"]},Bc={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],outline:["outline","none"],direction:["direction",void 0]},oF={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",compositionstart:"compositionStart",compositionend:"compositionEnd",compositionupdate:"compositionUpdate",focus:"focus",blur:"blur",select:"select"},Gc=Phaser.Utils.Objects.GetValue;var qg=function(i,t,s,g){var C=Gc(g,"preventDefault",!1),M=Gc(g,"preTest");for(let l in s)t.addEventListener(l,function(T){(!M||M(i,l))&&i.emit(s[l],i,T),C&&T.preventDefault()})};const hF=Phaser.GameObjects.DOMElement,Nc=Phaser.Utils.Objects.IsPlainObject,Ai=Phaser.Utils.Objects.GetValue;class Co extends hF{constructor(t,s,g,C,M,l){Nc(s)?(l=s,s=Ai(l,"x",0),g=Ai(l,"y",0),C=Ai(l,"width",0),M=Ai(l,"height",0)):Nc(C)&&(l=C,C=Ai(l,"width",0),M=Ai(l,"height",0)),l===void 0&&(l={});var T,e=Ai(l,"type","text");e==="textarea"?(T=document.createElement("textarea"),T.style.resize="none"):(T=document.createElement("input"),T.type=e),ka(Ic,l,T);var d=Ai(l,"style",void 0);d=ka(Bc,l,d);var x=T.style;for(var u in l)u in Ic||u in Bc||u in x&&(d[u]=l[u]);d["box-sizing"]="border-box",super(t,s,g,T,d),this.type="rexInputText",this.resize(C,M),qg(this,T,oF),ug(T),Ai(l,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",function(){this._isFocused=!0},this).on("blur",function(){this._isFocused=!1},this)}get text(){return this.node.value}set text(t){this.node.value=t}setText(t){return this.text=t,this}get maxLength(){return this.node.maxLength}set maxLength(t){this.node.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.node.minLength}set minLength(t){this.node.minLength=t}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node.placeholder=t}setPlaceholder(t){return this.placeholder=t,this}selectText(t,s){return t===void 0?this.node.select():this.node.setSelectionRange(t,s),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node.selectionStart}set cursorPosition(t){this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node.title}set tooltip(t){this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.node.readOnly}set readOnly(t){this.node.readOnly=t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node.spellcheck}set spellCheck(t){this.node.spellcheck=t}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){return this.node.style.color}set fontColor(t){this.node.style.color=t}setFontColor(t){return this.fontColor=t,this}setStyle(t,s){return this.node.style[t]=s,this}getStyle(t){return this.node.style[t]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(t){return t===void 0&&(t=!0),this.node.disabled=!t,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}}var lF={resize:Wu};Object.assign(Co.prototype,lF);ht.register("inputText",function(i){var t=new Co(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.InputText",Co);const Vc=Phaser.Utils.Objects.GetValue;var uF=function(i){var t=document.createElement("input");t.type="file";var s=Vc(i,"accept",""),g=Vc(i,"multiple",!1);return t.setAttribute("accept",s),g?t.setAttribute("multiple",""):t.removeAttribute("multiple"),t},_g=function(i,t){return i===void 0&&(i=0),new Promise(function(s,g){setTimeout(function(){s(t)},i)})},t0=function({game:i,fileInput:t,closeDelay:s}){return io(Pn(i).events,"focus").then(function(){return _g(s)}).then(function(){var g={files:t.files};return Promise.resolve(g)})};const dF=Phaser.Utils.Objects.GetValue;var fF=function(i,t){var s=dF(t,"closeDelay",200),g=uF(t);return g.click(),t0({game:i,fileInput:g,closeDelay:s}).then(function(C){return g.remove(),Promise.resolve(C)})},e0=function(i){return this.setOrigin(i.originX,i.originY),this.setPosition(i.x,i.y),this.resize(i.displayWidth,i.displayHeight),this},cF=function(i,t,s){if(s===void 0)switch(t){case"image":case"svg":s="textures";break;case"animation":s="json";break;case"tilemapTiledJSON":case"tilemapCSV":s="tilemap";break;case"glsl":s="shader";break;default:s=t;break}i=Pn(i);var g;return s==="textures"?g=i.textures:g=i.cache[s],g},i0=function(i,t,s,g,C,M){if(!(C===null||C===!1))if(ns(C))C();else{var l=cF(i,s,C);l.exists(g)&&l.remove(g)}var T=i.load;if(M&&T.once(`filecomplete-${s}-${g}`,function(d,x,u){M(u)}),ns(t))t();else{var e=window.URL.createObjectURL(t);T[s](g,e)}T.start()},vF=function(i,t,s,g,C){var M=this.scene;return i0(M,i,t,s,g,C),this},pF=function(i,t,s,g){var C=this.scene;return new Promise(function(M,l){var T=function(e){M(e)};i0(C,i,t,s,g,T)})};const s0={loadFile:vF,loadFilePromise:pF},gF=Phaser.GameObjects.DOMElement,kc=Phaser.Utils.Objects.IsPlainObject,ci=Phaser.Utils.Objects.GetValue;class So extends gF{constructor(t,s,g,C,M,l){kc(s)?(l=s,s=ci(l,"x",0),g=ci(l,"y",0),C=ci(l,"width",0),M=ci(l,"height",0)):kc(C)&&(l=C,C=ci(l,"width",0),M=ci(l,"height",0));var T=document.createElement("input");T.type="file";var e=T.style;e.display="none";var d=document.createElement("label");d.appendChild(T);var x=ci(l,"style",void 0);super(t,s,g,d,x),this.type="rexFileChooser",this.resetFromJSON(l),this.resize(C,M);var u=this;T.onchange=function(){u.emit("change",u)},this.setCloseDelay(ci(l,"closeDelay",200)),T.onclick=function(){t0({game:t,fileInput:T,closeDelay:u.closeDelay}).then(function(){u.emit("select",u)})}}resetFromJSON(t){return this.setAccept(ci(t,"accept","")),this.setMultiple(ci(t,"multiple",!1)),this}setAccept(t){return t===void 0&&(t=""),this.fileInput.setAttribute("accept",t),this}setMultiple(t){return t===void 0&&(t=!0),t?this.fileInput.setAttribute("multiple",""):this.fileInput.removeAttribute("multiple"),this}setCloseDelay(t){return t===void 0&&(t=200),this.closeDelay=t,this}get fileInput(){return this.node.children[0]}open(){return this.fileInput.click(),this}get files(){return this.fileInput.files}}var mF={resize:Wu,syncTo:e0};Object.assign(So.prototype,mF,s0);ht.register("fileChooser",function(i){var t=new So(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.FileChooser",So);const xF={setDropEnable(i){return i===void 0&&(i=!0),this.dropEnable=i,this},toggleDropEnable(){return this.dropEnable=!this.dropEnable,this}},yF={addFilter(i,t){return this.filters||(this.filters={}),this.filters[i]=t,this},addFilters(i){this.filters||(this.filters={});for(var t in i)this.filters[t]=i[t];return this}};var n0={resize:Wu,syncTo:e0};Object.assign(n0,xF,yF,s0);const TF={dragenter:"dragenter",dragleave:"dragleave",dragover:"dragover",drop:"drop"},CF=Phaser.GameObjects.DOMElement,zc=Phaser.Utils.Objects.IsPlainObject,Oi=Phaser.Utils.Objects.GetValue;class Hu extends CF{constructor(t,s,g,C,M,l){zc(s)?(l=s,s=Oi(l,"x",0),g=Oi(l,"y",0),C=Oi(l,"width",0),M=Oi(l,"height",0)):zc(C)&&(l=C,C=Oi(l,"width",0),M=Oi(l,"height",0)),l===void 0&&(l={});var T=document.createElement("div"),e=Oi(l,"style",void 0);super(t,s,g,T,e),this.type="rexFileDropZone",this.resize(C,M),this._files=[],this.setDropEnable(Oi(l,"dropEnable",!0));var d=Oi(l,"filters");d&&this.addFilters(d),qg(this,T,TF,{preventDefault:!0,preTest(x){return x.dropEnable}}),this.on("drop",function(x,u){this._files=u.dataTransfer.files;var h=this._files;if(h&&this.filters)for(var o in this.filters){for(var n=this.filters[o],r=[],f=0,a=h.length;f<a;f++){var c=h[f];n(c,h)&&r.push(c)}r.length>0&&this.emit(`drop.${o}`,r)}},this)}get files(){return this._files}}Object.assign(Hu.prototype,n0);ht.register("fileDropZone",function(i){var t=new Hu(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.FileDropZone",Hu);var SF=function(i){if(!window.Chart){var t=`Can not find chartjs! Load chartjs in preload stage.
scene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/Chart.min.js');`;return console.error(t),this}return this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,PF(this,i)),this},PF=function(i,t){t===void 0&&(t={}),t.options===void 0&&(t.options={});var s=t.options;s.responsive=!1,s.maintainAspectRatio=!1,s.hasOwnProperty("devicePixelRatio")||(s.devicePixelRatio=1);var g=!1;s.animation===void 0?s.animation={}:s.animation===!1&&(g=!0,s.animation={});var C=s.animation;g&&(C.duration=0);var M=C.onProgress;C.onProgress=function(T){M&&M(T),i.needRedraw()};var l=C.onComplete;return C.onComplete=function(T){l&&l(T),i.needRedraw()},t},EF=function(i){if(this.chart!==void 0)if(typeof i=="string"){for(var t=this.chart.data.datasets,s,g=0,C=t.length;g<C;g++)if(s=t[g],s.label===i)return s}else return this.chart.data.datasets[i]},MF=function(i,t){var s=this.getChartDataset(i);if(s!==void 0){if(typeof t=="string"){var g=this.chart.data.labels;if(t=g.indexOf(t),t===-1)return}return s.data[t]}},wF=function(i,t,s){if(this.chart===void 0)return this;var g=this.getChartDataset(i);if(typeof t=="string"){var C=this.chart.data.labels;if(t=C.indexOf(t),t===-1)return this}return g.data[t]=s,this},RF=function(){return this.chart===void 0?this:(this.chart.update(),this)};let $u=class extends Fn{constructor(t,s,g,C,M,l){super(t,s,g,C,M),this.type="rexChart",this.chart=void 0,l!==void 0&&this.setChart(l)}destroy(t){this.scene&&(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(t))}resize(t,s){if(t===this.width&&s===this.height)return this;if(super.resize(t,s),this.chart){var g=this.chart;g.height=this.canvas.height,g.width=this.canvas.width,g.aspectRatio=g.height?g.width/g.height:null,g.update()}return this}};var AF={setChart:SF,getChartDataset:EF,getChartData:MF,setChartData:wF,updateChart:RF};Object.assign($u.prototype,AF);ht.register("chart",function(i,t,s,g,C){var M=new $u(this.scene,i,t,s,g,C);return this.scene.add.existing(M),M});ot(window,"RexPlugins.UI.Chart",$u);ht.register("container",function(i,t,s,g,C){var M=new Ne(this.scene,i,t,s,g,C);return this.scene.add.existing(M),M});ot(window,"RexPlugins.UI.Container",Ne);var OF=function(i){if(this.rexSizer.hidden)return 0;i===void 0&&(i=!0);var t=0,s=this.sizerChildren,g,C,M;if(this.orientation===0)for(var l=this.space.item,T=!0,e=0,d=s.length;e<d;e++)g=s[e],!g.rexSizer.hidden&&(g.rexSizer.proportion===0||i?M=this.getChildWidth(g):M=0,C=g.rexSizer.padding,M+=C.left+C.right,T?T=!1:M+=l,t+=M);else for(var e=0,d=s.length;e<d;e++)g=s[e],g.hasOwnProperty("rexSizer")&&(g.rexSizer.hidden||(C=g.rexSizer.padding,M=this.getChildWidth(g)+C.left+C.right,t=Math.max(M,t)));return t+this.space.left+this.space.right},bF=function(i){if(this.rexSizer.hidden)return 0;i===void 0&&(i=!0);var t=0,s=this.sizerChildren,g,C,M;if(this.orientation===0)for(var l=0,T=s.length;l<T;l++)g=s[l],!g.rexSizer.hidden&&(C=g.rexSizer.padding,M=this.getChildHeight(g)+C.top+C.bottom,t=Math.max(M,t));else for(var e=this.space.item,d=!0,l=0,T=s.length;l<T;l++)g=s[l],g.hasOwnProperty("rexSizer")&&(g.rexSizer.hidden||(g.rexSizer.proportion===0||i?M=this.getChildHeight(g):M=0,C=g.rexSizer.padding,M+=C.top+C.bottom,d?d=!1:M+=e,t+=M));return t+this.space.top+this.space.bottom},FF=function(i,t){t===void 0&&(t=this.width);var s,g=i.rexSizer,C=g.padding;if(this.orientation===0)g.proportion>0&&this.proportionLength>0&&(s=g.proportion*this.proportionLength);else if(g.expand){var M=t-this.space.left-this.space.right;s=M-C.left-C.right}return s},LF=function(i,t){t===void 0&&(t=this.height);var s,g=i.rexSizer,C=g.padding;if(this.orientation===0){if(g.expand){var M=t-this.space.top-this.space.bottom;s=M-C.top-C.bottom}}else g.proportion>0&&this.proportionLength>0&&(s=g.proportion*this.proportionLength);return s},DF=function(i){i===void 0&&(i=[]);for(var t=this.sizerChildren,s,g=0,C=t.length;g<C;g++)s=t[g],s.isRexSizer&&i.push(s);return i},IF=function(){this.hasRatioFitChild=!1;for(var i=this.sizerChildren,t=0,s=i.length;t<s;t++){var g=i[t];g.rexSizer.hidden||g.rexSizer.fitRatio&&(ai(g,1,1),this.hasRatioFitChild=!0)}return this._childrenProportion=void 0,this.proportionLength=void 0,wr.call(this),this},BF=function(i,t){if(this.hasRatioFitChild){var s;this.orientation===0?s=t-this.getInnerPadding("top")-this.getInnerPadding("bottom"):i-this.getInnerPadding("left")-this.getInnerPadding("right");for(var g=this.sizerChildren,C,M,l=0,T=g.length;l<T;l++){var e=g[l];if(!e.rexSizer.hidden){var d=e.rexSizer.fitRatio;d&&(this.orientation===0?(M=s-this.getChildOuterPadding(e,"top")-this.getChildOuterPadding(e,"bottom"),C=M*d):(C=s-this.getChildOuterPadding(e,"top")-this.getChildOuterPadding(e,"bottom"),M=C/d),ai(e,C,M),e.isRexSizer&&e.setMinSize(C,M))}}this.proportionLength=void 0,this._childrenWidth=void 0,this.resolveWidth(i,!0)}};const GF=Phaser.Math.Wrap;var NF=function(){for(var i=this.sizerChildren,t,s,g,C=this.innerLeft,M=this.innerTop,l=this.innerWidth,T=this.innerHeight,e=C,d=M,x,u,h,o,n,r,f,a=this.startChildIndex,c=0,p=i.length;c<p;c++)a===0?f=c:f=GF(c+a,0,p),this.rtl&&(f=p-f-1),t=i[f],!t.rexSizer.hidden&&(s=t.rexSizer,g=s.padding,Rr.call(this,t),t.isRexSpace?(n=0,r=0):(n=this.getExpandedChildWidth(t),r=this.getExpandedChildHeight(t)),t.isRexSizer?(t.runLayout(this,n,r),zu(t,this)):ai(t,n,r),n===void 0&&(n=Ut(t)),r===void 0&&(r=It(t)),this.orientation===0?(x=e+g.left,s.proportion===0||this.proportionLength===0?h=n:h=s.proportion*this.proportionLength,u=d+g.top,o=T-g.top-g.bottom):(x=e+g.left,h=l-g.left-g.right,u=d+g.top,s.proportion===0||this.proportionLength===0?o=r:o=s.proportion*this.proportionLength),Ar.call(this,t,x,u,h,o,s.align),this.orientation===0?e+=h+g.left+g.right+this.space.item:d+=o+g.top+g.bottom+this.space.item)},VF=function(t){var t=Mu.call(this,t);if(this.proportionLength===void 0&&this.orientation===0){var s=t-this.childrenWidth;s>0?(s=t-this.getChildrenWidth(!1),this.proportionLength=s/this.childrenProportion):this.proportionLength=0}return t},kF=function(t){var t=wu.call(this,t);if(this.proportionLength===void 0&&this.orientation===1){var s=t-this.childrenHeight;s>0?(s=t-this.getChildrenHeight(!1),this.proportionLength=s/this.childrenProportion):this.proportionLength=0}return t};const zF=Phaser.GameObjects.Zone;class Ku extends zF{constructor(t){super(t,0,0,1,1),this.isRexSpace=!0}}var UF=function(i,t){var s=this.sizerChildren;if(s.length===0)return-1;for(var g=-1,C=1/0,M=0,l=s.length;M<l;M++){var T=s[M],e;this.orientation===0?e=Math.abs(T.left-i):e=Math.abs(T.top-t),C>e&&(C=e,g=M)}var T=s[s.length-1],e;return this.orientation===0?e=Math.abs(T.right-i):e=Math.abs(T.bottom-t),C>e&&(C=e,g=M+1),g};const r0=Phaser.Utils.Objects.IsPlainObject,bi=Phaser.Utils.Objects.GetValue,Uc=Phaser.Display.Align.CENTER,YF={min:0,full:-1};var Vh=function(i,t,s,g,C,M,l,T,e,d){Pr.call(this,i);var x=i.isRexSpace,u=typeof t;if(t===null)return this;if(u!=="number"){if(u==="string")t=YF[t];else if(r0(t)){var h=t;t=bi(h,"proportion",void 0),s=bi(h,"align",Uc),g=bi(h,"padding",0),C=bi(h,"expand",!1),M=bi(h,"key",void 0),l=bi(h,"index",void 0),i.isRexSizer||(T=bi(h,"minWidth",void 0),e=bi(h,"minHeight",void 0)),d=bi(h,"fitRatio",0)}}typeof s=="string"&&(s=Ye[s]),t===void 0&&(t=x?1:0),s===void 0&&(s=Uc),g===void 0&&(g=0),C===void 0&&(C=!1),T===void 0&&(x?T=0:i.isRexSizer||(T=i._minWidth)),e===void 0&&(x?e=0:i.isRexSizer||(e=i._minHeight)),d===void 0&&(d=0);var h=this.getSizerConfig(i);return h.proportion=t,h.align=s,h.padding=Ln(g),h.expand=C,h.fitRatio=t===0?d:0,l===void 0||l>=this.sizerChildren.length?this.sizerChildren.push(i):this.sizerChildren.splice(l,0,i),i.isRexSizer||(t>0&&(this.orientation===0?i.minWidth=T===void 0?Ut(i):T:i.minHeight=e===void 0?It(i):e),C&&(this.orientation===0?i.minHeight=e:i.minWidth=T)),M!==void 0&&this.addChildrenMap(M,i),this};const XF={add:Vh,addSpace(i){return this.insertSpace(void 0,i),this},insertSpace(i,t){return t===void 0&&(t=1),Vh.call(this,new Ku(this.scene),{proportion:t,minWidth:0,minHeight:0,index:i}),this},insert(i,t,s,g,C,M,l,T){return r0(s)&&(s.index=i),Vh.call(this,t,s,g,C,M,l,i,T),this},insertAtPosition(i,t,s,g,C,M,l,T,e){var d=UF.call(this,i,t);return d===-1&&(d=void 0),this.insert(d,s,g,C,M,l,T,e),this}},WF=Phaser.Utils.Array.Remove,HF={remove(i,t){return this.getParentSizer(i)!==this?this:(WF(this.sizerChildren,i),Er.call(this,i,t),this)},removeAll(i){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],i);return this},clear(i){return this.sizerChildren.length=0,mo.call(this,i),this}},$F={getChildAlign(i){return this.getSizerConfig(i).align},setChildAlign(i,t){return typeof t=="string"&&(t=Ye[t]),this.getSizerConfig(i).align=t,this}},KF={getChildProportion(i){return this.getSizerConfig(i).proportion},setChildProportion(i,t){return this.getSizerConfig(i).proportion=t,this}},ZF={getChildExpand(i){return this.getSizerConfig(i).expand},setChildExpand(i,t){return this.getSizerConfig(i).expand=t,this}};var a0={getChildrenWidth:OF,getChildrenHeight:bF,getExpandedChildWidth:FF,getExpandedChildHeight:LF,getChildrenSizers:DF,preLayout:IF,postResolveSize:BF,layoutChildren:NF,resolveWidth:VF,resolveHeight:kF};Object.assign(a0,XF,HF,$F,KF,ZF);var jF=function(){for(var i=0,t=this.sizerChildren,s,g,C=0,M=t.length;C<M;C++)s=t[C],!s.rexSizer.hidden&&(g=s.rexSizer.proportion,g>0&&(i+=g));return i},JF={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},Po=function(i){return typeof i=="string"&&(i=JF[i]),i};const kh=Phaser.Utils.Objects.IsPlainObject,ze=Phaser.Utils.Objects.GetValue;class Dt extends zs{constructor(t,s,g,C,M,l,T){kh(s)?(T=s,s=ze(T,"x",0),g=ze(T,"y",0),C=ze(T,"width",void 0),M=ze(T,"height",void 0),l=ze(T,"orientation",0)):kh(C)?(T=C,C=ze(T,"width",void 0),M=ze(T,"height",void 0),l=ze(T,"orientation",0)):kh(l)&&(T=l,l=ze(T,"orientation",0)),l===void 0&&(l=0),super(t,s,g,C,M,T),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(l),this.setItemSpacing(ze(T,"space.item",0)),this.setStartChildIndex(ze(T,"startChildIndex",0)),this.setRTL(ze(T,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=Po(t),this}setItemSpacing(t){return this.space.item=t,this}setStartChildIndex(t){return this.startChildIndex=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=jF.call(this)),this._childrenProportion}}Object.assign(Dt.prototype,a0);ht.register("sizer",function(i,t,s,g,C,M){var l=new Dt(this.scene,i,t,s,g,C,M);return this.scene.add.existing(l),l});ot(window,"RexPlugins.UI.Sizer",Dt);var o0=function(){return Array.prototype.reduce.call(arguments,QF,0)},QF=function(i,t){return i+t},qF=function(i){if(this.rexSizer.hidden)return 0;i===void 0&&(i=!0);for(var t=0,s,g=this.sizerChildren,C,M,l,T,e=0;e<this.columnCount;e++){if(T=this.columnProportions[e],s=0,T===0||i){for(var d=0;d<this.rowCount;d++)C=g[d*this.columnCount+e],C&&(C.rexSizer.hidden||(M=C.rexSizer.padding,l=this.getChildWidth(C)+M.left+M.right,s=Math.max(s,l)));t+=s}this.columnWidth[e]=s}var x=this.space,u=Math.max(x.indentLeftOdd,x.indentLeftEven);return t+o0(x.left,u,...x.column,x.right)},_F=function(i){if(this.rexSizer.hidden)return 0;i===void 0&&(i=!0);for(var t=0,s,g=this.sizerChildren,C,M,l,T,e=0;e<this.rowCount;e++){if(T=this.rowProportions[e],s=0,T===0||i){for(var d=0;d<this.columnCount;d++)C=g[e*this.columnCount+d],C&&(C.rexSizer.hidden||(l=C.isRexSizer?Math.max(C.minHeight,C.childrenHeight):C.hasOwnProperty("minHeight")?C.minHeight:It(C),M=C.rexSizer.padding,l+=M.top+M.bottom,s=Math.max(s,l)));t+=s}this.rowHeight[e]=s}var x=this.space,u=Math.max(x.indentTopOdd,x.indentTopEven);return t+o0(x.top,u,...x.row,x.bottom)},tL=function(i,t){var s,g=i.rexSizer;if(g.expand){var C=g.padding;s=t-C.left-C.right}return s},eL=function(i,t){var s,g=i.rexSizer;if(g.expand){var C=g.padding;s=t-C.top-C.bottom}return s},iL=function(i){i===void 0&&(i=[]);for(var t=this.sizerChildren,s,g=0,C=t.length;g<C;g++)s=t[g],s&&s.isRexSizer&&i.push(s);return i},sL=function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,wr.call(this),this},nL=function(){for(var i,t,s,g=this.innerLeft,C=this.innerTop,M,l=C,T,e,d,x,u,h,o=this.space.column,n=this.space.row,r=this.space.indentLeftOdd,f=this.space.indentLeftEven,a=this.space.indentTopOdd,c=this.space.indentTopEven,p,v,m,y,P=0;P<this.rowCount;P++){v=this.getRowHeight(P),m=P%2?f:r,M=g+m;for(var E=0;E<this.columnCount;E++){if(p=this.getColumnWidth(E),i=this.getChildAt(E,P),!i||i.rexSizer.hidden){M+=p+o[E];continue}Rr.call(this,i),u=this.getExpandedChildWidth(i,p),h=this.getExpandedChildHeight(i,v),i.isRexSizer?(i.runLayout(this,u,h),zu(i,this)):ai(i,u,h),t=i.rexSizer,s=t.padding,T=M+s.left,d=p-s.left-s.right,y=E%2?c:a,e=l+y+s.top,x=v-s.top-s.bottom,Ar.call(this,i,T,e,d,x,t.align),M+=p+o[E]}l+=v+n[P]}},rL=function(t){var t=Mu.call(this,t);if(this.proportionWidthLength===void 0){var s=this.totalColumnProportions;if(s>0){var g=t-this.getChildrenWidth(!1);g>=0&&(this.proportionWidthLength=g/s)}else this.proportionWidthLength=0}return t},aL=function(t){var t=wu.call(this,t);if(this.proportionHeightLength===void 0){var s=this.totalRowProportions;if(s>0){var g=t-this.getChildrenHeight(!1);g>=0&&(this.proportionHeightLength=g/s)}else this.proportionHeightLength=0}return t},oL=function(i){var t,s,g;for(var C in this.sizerChildren)t=this.sizerChildren[C],t&&t.isRexSizer&&!t.ignoreLayout&&(g=this.getColumnWidth(parseInt(C)%this.columnCount),s=this.getExpandedChildWidth(t,g),s=t.resolveWidth(s),t.resolveChildrenWidth(s))},hL=function(i){var t,s,g;for(var C in this.sizerChildren)t=this.sizerChildren[C],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(g=this.getColumnWidth(parseInt(C)%this.columnCount),s=this.getExpandedChildWidth(t,g),t.isRexSizer&&(s=t.resolveWidth(s)),t.runWidthWrap(s));return this};const lL=Phaser.Utils.Objects.IsPlainObject,un=Phaser.Utils.Objects.GetValue,Yc=Phaser.Display.Align.CENTER;var Xc=function(i,t,s,g,C){if(typeof i=="number"||typeof t=="number")if(i===void 0){for(var M,l=0;l<g;l++)if(M=t*g+l,!s[M])return M}else if(t===void 0){for(var M,l=0;l<C;l++)if(M=l*g+i,!s[M])return M}else{var M=t*g+i;if(!s[M])return M}else if(t===!0){for(var M,l=0;l<g;l++)for(var T=0;T<C;T++)if(M=T*g+l,!s[M])return M}else for(var l=0,e=s.length;l<e;l++)if(!s[l])return l;return null},uL=function(i,t,s,g,C,M,l){if(Pr.call(this,i),lL(t)){var e=t;t=un(e,"column",void 0),s=un(e,"row",void 0),g=un(e,"align",Yc),C=un(e,"padding",0),M=un(e,"expand",!1),l=un(e,"key",void 0)}var T=Xc(t,s,this.sizerChildren,this.columnCount,this.rowCount);if(T===null){if(typeof t=="number"&&typeof s=="number")return this;s===!0||typeof s=="number"?this.addEmptyColumn():this.addEmptyRow(),T=Xc(t,s,this.sizerChildren,this.columnCount,this.rowCount)}typeof g=="string"&&(g=Ye[g]),g===void 0&&(g=Yc),C===void 0&&(C=0),M===void 0&&(M=!0);var e=this.getSizerConfig(i);return e.align=g,e.padding=Ln(C),e.expand=M,this.sizerChildren[T]=i,l!==void 0&&this.addChildrenMap(l,i),this};const dL={add:uL};var xn=function(i,t,s,g){s===void 0&&(s=0),g===void 0&&(g=i.length-1);for(var C=s;C<=g;C++)i[C]=t;return i};const fL={remove(i,t){if(this.getParentSizer(i)!==this)return this;var s=this.sizerChildren.indexOf(i);return s!==-1&&(this.sizerChildren[s]=null),Er.call(this,i,t),this},removeAt(i,t,s){var g=this.getChildAt(i,t);return g&&this.remove(g,s),this},removeAll(i){for(var t=this.sizerChildren.length-1;t>=0;t--){var s=this.sizerChildren[t];s&&this.remove(s,i)}return this},clear(i){return xn(this.sizerChildren,null),mo.call(this,i),this}},Wc=Phaser.Utils.Objects.GetValue;var cL=function(i,t,s,g,C){if(s===void 0&&(s=0),g===void 0&&(g=0),this.columnCount=i,this.rowCount=t,this.gridCount=i*t,this.sizerChildren===void 0?this.sizerChildren=[]:this.removeAll(),this.sizerChildren.length=i*t,xn(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=i,typeof s=="number")xn(this.columnProportions,s);else for(var M=0;M<i;M++)this.columnProportions[M]=s[M]||0;if(this.rowProportions=[],this.rowProportions.length=t,typeof g=="number")xn(this.rowProportions,g);else for(var M=0;M<t;M++)this.rowProportions[M]=g[M]||0;this.columnWidth=[],this.columnWidth.length=i,this.rowHeight=[],this.rowHeight.length=t,this.space.column=[],this.space.column.length=i-1;var l=Wc(C,"column",0);if(typeof l=="number")xn(this.space.column,l);else for(var M=0,T=this.space.column.length;M<T;M++)this.space.column[M]=l[M]||0;this.space.row=[],this.space.row.length=t-1;var e=Wc(C,"row",0);if(typeof e=="number")xn(this.space.row,e);else for(var M=0,T=this.space.row.length;M<T;M++)this.space.row[M]=e[M]||0;return this},h0=function(i,t,s){t===void 0&&(t=this.rowProportions[0]||0),s===void 0&&(s=this.space.row[0]||0),this.rowCount+=1,this.gridCount+=this.columnCount;for(var g=[i*this.columnCount,0],C=0;C<this.columnCount;C++)g.push(null);return this.sizerChildren.splice.apply(this.sizerChildren,g),this.rowProportions.push(t),this.rowHeight.length+=1,this.space.row.splice(i,0,s),this},vL=function(i,t){return h0.call(this,this.rowCount,i,t),this},l0=function(i,t,s){t===void 0&&(t=this.columnProportions[0]||0),s===void 0&&(s=this.space.column[0]||0),this.columnCount+=1,this.gridCount+=this.rowCount;for(var g=this.rowCount-1;g>=0;g--){var C=g*this.columnCount+i;this.sizerChildren.splice(C,0,null)}return this.columnProportions.push(t),this.columnWidth.length+=1,this.space.column.splice(i,0,s),this},pL=function(i,t){return l0.call(this,this.columnCount,i,t),this},u0={getChildrenWidth:qF,getChildrenHeight:_F,getExpandedChildWidth:tL,getExpandedChildHeight:eL,getChildrenSizers:iL,preLayout:sL,layoutChildren:nL,resolveWidth:rL,resolveHeight:aL,resolveChildrenWidth:oL,runWidthWrap:hL,resetGrid:cL,inseryEmptyRow:h0,addEmptyRow:vL,insertEmptyColumn:l0,addEmptyColumn:pL};Object.assign(u0,dL,fL);var gL=function(){for(var i=0,t,s=0;s<this.columnCount;s++)t=this.columnProportions[s],t>0&&(i+=t);return i},mL=function(){for(var i=0,t,s=0;s<this.rowCount;s++)t=this.rowProportions[s],t>0&&(i+=t);return i};const la=Phaser.Utils.Objects.IsPlainObject,Yt=Phaser.Utils.Objects.GetValue;class ds extends zs{constructor(t,s,g,C,M,l,T,e,d,x){la(s)?(x=s,s=Yt(x,"x",0),g=Yt(x,"y",0),C=Yt(x,"width",void 0),M=Yt(x,"height",void 0),l=Yt(x,"column",x.col||0),T=Yt(x,"row",0),e=Yt(x,"columnProportions",0),d=Yt(x,"rowProportions",0)):la(C)?(x=C,C=Yt(x,"width",void 0),M=Yt(x,"height",void 0),l=Yt(x,"column",x.col||0),T=Yt(x,"row",0),e=Yt(x,"columnProportions",0),d=Yt(x,"rowProportions",0)):la(l)?(x=l,l=Yt(x,"column",x.col||0),T=Yt(x,"row",0),e=Yt(x,"columnProportions",0),d=Yt(x,"rowProportions",0)):la(e)&&(x=e,e=Yt(x,"columnProportions",0),d=Yt(x,"rowProportions",0)),super(t,s,g,C,M,x),this.type="rexGridSizer",this.resetGrid(l,T,e,d,Yt(x,"space",void 0)),this.setIndentLeft(Yt(x,"space.indentLeftOdd",0),Yt(x,"space.indentLeftEven",0)),this.setIndentTop(Yt(x,"space.indentTopOdd",0),Yt(x,"space.indentTopEven",0)),this.addChildrenMap("items",this.sizerChildren);var u=Yt(x,"createCellContainerCallback");if(u)for(var g=0,h=this.rowCount;g<h;g++)for(var s=0,o=this.columnCount;s<o;s++){var n={column:s,row:g},r=u(t,s,g,n);r&&this.add(r,n)}}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0)}setIndentLeft(t,s){return this.space.indentLeftOdd=t,this.space.indentLeftEven=s,this}setIndentTop(t,s){return this.space.indentTopOdd=t,this.space.indentTopEven=s,this}setColumnProportion(t,s){return t>=this.columnProportions.length?this:(this.columnProportions[t]=s,this)}setRowProportion(t,s){return t>=this.rowProportions.length?this:(this.rowProportions[t]=s,this)}get totalColumnProportions(){return this._totalColumnProportions===void 0&&(this._totalColumnProportions=gL.call(this)),this._totalColumnProportions}get totalRowProportions(){return this._totalRowProportions===void 0&&(this._totalRowProportions=mL.call(this)),this._totalRowProportions}getChildAt(t,s){return this.sizerChildren[s*this.columnCount+t]}childToGridIndex(t,s){if(!t)return null;var g=this.sizerChildren.indexOf(t);return g===-1?null:(s===void 0&&(s={}),s.x=g%this.columnCount,s.y=Math.floor(g/this.columnCount),s)}getColumnWidth(t){var s=this.columnProportions[t],g=s===0?this.columnWidth[t]:s*this.proportionWidthLength;return g}getRowHeight(t){var s=this.rowProportions[t],g=s===0?this.rowHeight[t]:s*this.proportionHeightLength;return g}}Object.assign(ds.prototype,u0);ht.register("gridSizer",function(i,t,s,g,C,M,l,T,e){var d=new ds(this.scene,i,t,s,g,C,M,l,T,e);return this.scene.add.existing(d),d});ot(window,"RexPlugins.UI.GridSizer",ds);var xL=function(){return this.rexSizer.hidden?0:this.maxChildWidth+this.space.left+this.space.right},yL=function(){return this.rexSizer.hidden?0:this.widthWrapResult.height+this.space.top+this.space.bottom},TL=function(i){i===void 0&&(i=[]);for(var t=this.sizerChildren,s,g=0,C=t.length;g<C;g++)s=t[g],s!==`
`&&s.isRexSizer&&i.push(s);return i},CL=function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,wr.call(this),this},SL=function(){for(var i=this.innerWidth,t=this.justifyPercentage,s=this.space.item,g=this.space.line,C=this.space.indentLeftOdd,M=this.space.indentLeftEven,l=this.space.indentTopOdd,T=this.space.indentTopEven,e,d,x,u=0,h,o,n=this.innerLeft,r=this.innerTop,f,a,c,p,v=this.widthWrapResult.lines,m,y,P,E,S=r,w=0,R=v.length;w<R;w++){switch(m=v[w],y=m.children,this.rtl&&y.reverse(),h=w%2?M:C,E=n+h,P=i-m.width,this.align){case 0:break;case 1:E+=P;break;case 2:E+=P/2;break;case 3:u=zh(i,P,t,y.length);break;case 4:u=zh(i,P,t,y.length),u===0&&(E+=P);break;case 5:u=zh(i,P,t,y.length),u===0&&(E+=P/2);break}for(var A=!0,O=0,F=y.length;O<F;O++)e=y[O],!e.rexSizer.hidden&&(d=e.rexSizer,x=d.padding,Rr.call(this,e),f=E+x.left,A?A=!1:f+=s,o=O%2?T:l,a=S+o+x.top,c=Ut(e),p=It(e),E=f+c+x.right+u,Ar.call(this,e,f,a,c,p,d.align));S+=m.height+g}},zh=function(i,t,s,g){return t/i<=s?t/(g-1):0},PL=function(i,t){t===void 0?t={lines:[],width:0,height:0}:(t.lines.length=0,t.width=0,t.height=0);for(var s=this.sizerChildren,g=this.space.item,C=this.space.line,M=this.space.indentLeftOdd,l=this.space.indentLeftEven,T=this.space.indentTopOdd,e=this.space.indentTopEven,d,x,u,h=0,o,n=t.lines,r=void 0,f,a=0,c=s.length;a<c;a++){if(d=s[a],d===`
`)d=void 0,x=0,f=!0;else{if(d.rexSizer.hidden)continue;d.isRexSizer&&d.layout(),x=EL(d),f=h<x||r===void 0}if(f){r&&(r.width=i-(h+g),t.width=Math.max(t.width,r.width),t.height+=r.height+C),r={children:[],height:0},n.push(r);var o=n.length%2?M:l;h=i-o}h-=x+g,d&&(r.children.push(d),u=ML(d),r.height=Math.max(r.height,u))}return r&&(r.width=i-(h+g),t.width=Math.max(t.width,r.width),t.height+=r.height),t.height+=Math.max(T,e),t},EL=function(i){var t=i.rexSizer.padding;return Ut(i)+t.left+t.right},ML=function(i){var t=i.rexSizer.padding;return It(i)+t.top+t.bottom},wL=function(i){var t=i-this.space.left-this.space.right;this.widthWrapResult=PL.call(this,t,this.widthWrapResult),Fg.call(this,i)};const Hc=Phaser.Math.Distance.Between;var RL=function(i,t){var s=this.sizerChildren;if(s.length===0)return-1;for(var g=-1,C=1/0,M=0,l=s.length;M<l;M++){var T=s[M];if(!(Math.abs(T.centerY-t)>T.height/2)){var d=Hc(T.left,T.centerY,i,t);C>d&&(C=d,g=M);var e=s[M+1];if(!(e&&e.y===T.y)){var d=Hc(T.right,T.centerY,i,t);C>d&&(C=d,g=M+1)}}}return g};const AL=Phaser.Utils.Objects.IsPlainObject,Uh=Phaser.Utils.Objects.GetValue,OL=Phaser.Display.Align.CENTER;var Yh=function(i,t,s,g){if(i===`
`)return this.addNewLine(),this;if(Pr.call(this,i),AL(t)){var C=t;t=Uh(C,"padding",0),s=Uh(C,"key",void 0),g=Uh(C,"index",void 0)}t===void 0&&(t=0);var C=this.getSizerConfig(i);return C.align=OL,C.padding=Ln(t),g===void 0||g>=this.sizerChildren.length?this.sizerChildren.push(i):this.sizerChildren.splice(g,0,i),s!==void 0&&this.addChildrenMap(s,i),this};const bL={add(i,t,s){if(ri(i))for(var g=i,C=0,M=g.length;C<M;C++)Yh.call(this,g[C],t);else Yh.call(this,i,t,s);return this},addNewLine(){return this.sizerChildren.push(`
`),this},insert(i,t,s,g){return Yh.call(this,t,s,g,i),this},insertAtPosition(i,t,s,g,C){var M=RL.call(this,i,t);return M===-1&&(M=void 0),this.insert(M,s,g,C),this}},FL=Phaser.Utils.Array.Remove,LL={remove(i,t){return this.getParentSizer(i)!==this?this:(FL(this.sizerChildren,i),Er.call(this,i,t),this)},removeAll(i){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],i);return this},clear(i){return this.sizerChildren.length=0,mo.call(this,i),this}};var d0={getChildrenWidth:xL,getChildrenHeight:yL,getChildrenSizers:TL,preLayout:CL,layoutChildren:SL,runWidthWrap:wL};Object.assign(d0,bL,LL);var DL=function(i){i===void 0&&(i=this.sizerChildren);for(var t=0,s,g,C=0,M=i.length;C<M;C++)s=i[C],s!==`
`&&(g=this.getChildWidth(s),t=Math.max(g,t));return t},IL=function(i){i===void 0&&(i=this.sizerChildren);for(var t=0,s,g,C=0,M=i.length;C<M;C++)s=i[C],s!==`
`&&(g=s.isRexSizer?Math.max(s.minHeight,s.childrenHeight):s.hasOwnProperty("minHeight")?s.minHeight:It(s),t=Math.max(g,t));return t};const $c=Phaser.Utils.Objects.IsPlainObject,ve=Phaser.Utils.Objects.GetValue;class Us extends zs{constructor(t,s,g,C,M,l){$c(s)?(l=s,s=ve(l,"x",0),g=ve(l,"y",0),C=ve(l,"width",void 0),M=ve(l,"height",void 0)):$c(C)&&(l=C,C=ve(l,"width",void 0),M=ve(l,"height",void 0)),super(t,s,g,C,M,l),this.type="rexFixWidthSizer",this.sizerChildren=[],this.setOrientation(ve(l,"orientation",0)),this.setItemSpacing(ve(l,"space.item",0)),this.setLineSpacing(ve(l,"space.line",0)),this.setIntentLeft(ve(l,"space.indentLeftOdd",0),ve(l,"space.indentLeftEven",0)),this.setIntentTop(ve(l,"space.indentTopOdd",0),ve(l,"space.indentTopEven",0)),this.setAlign(ve(l,"align",0)),this.setJustifyPercentage(ve(l,"justifyPercentage",.25)),this.setRTL(ve(l,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=Po(t),this}setItemSpacing(t){return this.space.item=t,this}setLineSpacing(t){return this.space.line=t,this}setIntentLeft(t,s){return this.space.indentLeftOdd=t,this.space.indentLeftEven=s,this}setIntentTop(t,s){return this.space.indentTopOdd=t,this.space.indentTopEven=s,this}setAlign(t){return typeof t=="string"&&(t=BL[t]),this.align=t,this}setJustifyPercentage(t){return this.justifyPercentage=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=DL.call(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=IL.call(this)),this._maxChildHeight}}const BL={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(Us.prototype,d0);ht.register("fixWidthSizer",function(i,t,s,g,C){var M=new Us(this.scene,i,t,s,g,C);return this.scene.add.existing(M),M});ot(window,"RexPlugins.UI.FixWidthSizer",Us);ht.register("overlapSizer",function(i,t,s,g,C){var M=new Ze(this.scene,i,t,s,g,C);return this.scene.add.existing(M),M});ot(window,"RexPlugins.UI.OverlapSizer",Ze);ht.register("space",function(){var i=new Ku(this.scene);return i});ot(window,"RexPlugins.UI.Space",Ku);var ua=function(i,t,s){if(i){var g=t==null,C=s==null;return g&&C||(g||(i.displayWidth=t),C||(i.displayHeight=s),g&&(i.scaleX=i.scaleY),C&&(i.scaleY=i.scaleX)),i}},GL=function(i){i===void 0?i={}:typeof i=="string"&&(i={text:i});var t=i.text||"";this.setText(t);var s=this.childrenMap.icon;if(s){i.icon?this.show(s):this.hide(s);var g=i.iconSize;g&&(this.setChildDisplaySize(s,g,g),this.iconWidth!==void 0&&this.setIconSize(g)),this.setIconTexture(i.icon,i.iconFrame)}var C=this.childrenMap.action;if(C){i.action?this.show(C):this.hide(C);var M=i.actionSize;M&&(this.setChildDisplaySize(C,M,M),this.actionWidth!==void 0&&this.setActionSize(M)),this.setActionTexture(i.action,i.actionFrame)}return this},NL={appendText:Ep,resetDisplayContent:GL};class Zu extends Dt{get text(){var t=this.childrenMap.text;return t?t.text:""}set text(t){var s=this.childrenMap.text;s&&s.setText(t)}setText(t){return this.text=t,this}setIconTexture(t,s){var g=this.childrenMap.icon;return g?(g.setTexture(t,s),this.iconWidth!==void 0&&(ua(g,this.iconWidth,this.iconHeight),this.resetChildScaleState(g)),this):this}setTexture(t,s){return this.setIconTexture(t,s),this}setIconSize(t,s){return s===void 0&&(s=t),this.iconWidth=t,this.iconHeight=s,this}get texture(){var t=this.childrenMap.icon;if(t)return t.texture}get frame(){var t=this.childrenMap.icon;if(t)return t.frame}setActionTexture(t,s){var g=this.childrenMap.action;return g===void 0?this:(g.setTexture(t,s),this.actionWidth!==void 0&&(ua(g,this.actionWidth,this.actionHeight),this.resetChildScaleState(g)),this)}get actionTexture(){var t=this.childrenMap.action;if(t)return t.texture}get actionFrame(){var t=this.childrenMap.action;if(t)return t.frame}setActionSize(t,s){return s===void 0&&(s=t),this.actionWidth=t,this.actionHeight=s,this}preLayout(){var t=this.childrenMap.icon;t&&this.iconWidth!==void 0&&ua(t,this.iconWidth,this.iconHeight);var s=this.childrenMap.action;s&&this.actionWidth!==void 0&&ua(s,this.actionWidth,this.actionHeight),super.preLayout()}runLayout(t,s,g){if(this.ignoreLayout)return this;super.runLayout(t,s,g);var C=this.childrenMap.iconMask;C&&(C.setPosition(),this.resetChildPositionState(C));var M=this.childrenMap.actionMask;return M&&(M.setPosition(),this.resetChildPositionState(M)),this}resize(t,s){super.resize(t,s);var g=this.childrenMap.iconMask;g&&g.resize();var C=this.childrenMap.actionMask;return C&&C.resize(),this}}Object.assign(Zu.prototype,NL);var oi=function(i,t,s,g){var C=new Ll(t,s,g);if(i&&!i.isRexSizer){var M=C.createGeometryMask();i.setMask(M),this.once("destroy",function(){i.setMask(),M.destroy()})}return this.pin(C),C};const Nt=Phaser.Utils.Objects.GetValue;class Ys extends Zu{constructor(t,s){super(t,s),this.type="rexLabel";var g=Nt(s,"background",void 0),C=Nt(s,"icon",void 0),M=Nt(s,"iconMask",void 0),l=Nt(s,"text",void 0),T=Nt(s,"action",void 0),e=Nt(s,"actionMask",void 0),d=Nt(s,"align",void 0);if(g&&this.addBackground(g),(d==="right"||d==="bottom"||d==="center")&&this.addSpace(),C){var x;this.orientation===0?(l||T)&&(x={right:Nt(s,"space.icon",0),top:Nt(s,"space.iconTop",0),bottom:Nt(s,"space.iconBottom",0)}):(l||T)&&(x={bottom:Nt(s,"space.icon",0),left:Nt(s,"space.iconLeft",0),right:Nt(s,"space.iconRight",0)});var u=Nt(s,"squareFitIcon",!1)?1:0;if(this.add(C,{proportion:0,padding:x,fitRatio:u}),M&&(M=oi.call(this,C,C,1)),!u){var h=Nt(s,"iconSize",void 0);this.setIconSize(Nt(s,"iconWidth",h),Nt(s,"iconHeight",h))}}if(l){var o=Nt(s,"space.text",0),n=Nt(s,"expandTextWidth",!1),r=Nt(s,"expandTextHeight",!1),f,x,a;this.orientation===0?(f=n?1:0,T&&(x={right:o}),a=r):(f=r?1:0,T&&(x={bottom:o}),a=n),this.add(l,{proportion:f,expand:a,padding:x})}if(T){var x;this.orientation===0?x={top:Nt(s,"space.actionTop",0),bottom:Nt(s,"space.actionBottom",0)}:x={left:Nt(s,"space.actionLeft",0),right:Nt(s,"space.actionRight",0)};var u=Nt(s,"squareFitAction",!1)?1:0;if(this.add(T,{proportion:0,padding:x,fitRatio:u}),e&&(e=oi.call(this,T,T,1)),!u){var c=Nt(s,"actionSize");this.setActionSize(Nt(s,"actionWidth",c),Nt(s,"actionHeight",c))}}d==="center"&&this.addSpace(),this.addChildrenMap("background",g),this.addChildrenMap("icon",C),this.addChildrenMap("iconMask",M),this.addChildrenMap("text",l),this.addChildrenMap("action",T),this.addChildrenMap("actionMask",e)}}ht.register("label",function(i){var t=new Ys(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.Label",Ys);const VL=Phaser.GameObjects.Image,Kc=Phaser.GameObjects.NineSlice;var Xe=function(i,t){var s;t&&(t.hasOwnProperty("type")?s=t.type:t.hasOwnProperty("leftWidth")?s="nineSlice":t.hasOwnProperty("key")&&(s="image"));var g;switch(s){case"image":g=new VL(i,0,0,t.key,t.frame);break;case"nineSlice":Kc&&!t.hasOwnProperty("stretchMode")?g=new Kc(i,0,0,t.key,t.frame,0,0,t.leftWidth,t.rightWidth,t.topHeight,t.bottomHeight):g=new Ka(i,t);break;default:g=new Ja(i,t);break}return i.add.existing(g),g};const dn=Phaser.Utils.Objects.GetValue,kL=Phaser.GameObjects.Text,zL=Phaser.GameObjects.BitmapText;var f0=function(i,t){var s=dn(t,"$type");s===void 0&&dn(t,"key")&&(s="bitmaptext");var g;switch(s){case"bitmaptext":var C=dn(t,"key"),M=dn(t,"size");M===void 0&&(M=dn(t,"fontSize")),g=new zL(i,0,0,C,"",M);var l=dn(t,"color");l!==void 0&&g.setTint(l);break;case"text":g=new kL(i,0,0,"",t);break;default:g=new Kl(i,0,0,"",t);break}return i.add.existing(g),g};const UL=Phaser.GameObjects.BitmapText;var c0=function(i){return i instanceof UL};const YL=Phaser.GameObjects.Text;var ju=function(i){return i instanceof YL},XL=function(i){var t=function(s){var g=i.padding,C=s-g.left-g.right,M=i.style;return ju(i)?(M.wordWrapWidth=C,M.maxLines=0):(M.wrapMode===0&&(M.wrapMode=1),M.wrapWidth=C,M.maxLines=0),M.fixedWidth=s,M.fixedHeight=0,i.updateText(),i.minHeight=i.height,i};return t},WL=function(i){var t=function(s){return i.setFixedSize(s,0).runWordWrap(),i.minHeight=i.height,i};return t},HL=function(i){var t=function(s){return i.setMaxWidth(s),i.minHeight=i.height,i};return t},$L=function(i){return i instanceof An},v0=function(i,t){return t===void 0&&(t=0),i._minWidth=t,i.runWidthWrap=$L(i)?WL(i):c0(i)?HL(i):XL(i),i};const KL=Phaser.GameObjects.Image;var Zc=function(i,t){var s=new KL(i,0,0,"");return i.add.existing(s),s};const tr=Phaser.Utils.Objects.GetValue;var Ju=function(i,t,s){t=t?$e(t):{};var g=tr(s,"background",Xe),C=tr(s,"text",f0),M=tr(s,"icon",Zc),l=tr(s,"action",Zc);if(g?t.background=g(i,t.background):delete t.background,C){var T=tr(t,"wrapText",!1);T&&(T===!0&&(T="word"),ot(t,"text.wrap.mode",T),t.expandTextWidth=!0),t.text=C(i,t.text),T&&(t.text=v0(t.text))}else delete t.text;return M&&t.icon!==null?t.icon=M(i,t.icon):delete t.icon,l&&t.action!==null?t.action=l(i,t.action):delete t.action,t};class Qu extends Ys{constructor(t,s,g){s=Ju(t,s,g),super(t,s),this.type="rexSimpleLabel"}setActiveState(t){var s=this.childrenMap.background;return s&&s.setActiveState&&s.setActiveState(t),this}setHoverState(t){var s=this.childrenMap.background;return s&&s.setHoverState&&s.setHoverState(t),this}setDisableState(t){var s=this.childrenMap.background;return s&&s.setDisableState&&s.setDisableState(t),this}}ht.register("simpleLabel",function(i,t){var s=new Qu(this.scene,i,t);return this.scene.add.existing(s),s});ot(window,"RexPlugins.UI.SimpleLabel",Qu);const Rt=Phaser.Utils.Objects.GetValue;var ZL=function(i){var t=this.scene,s=Rt(i,"orientation",0);this.setOrientation(s);var g=Rt(i,"icon",void 0),C=Rt(i,"iconMask",void 0),M=Rt(i,"innerBackground",void 0),l=Rt(i,"title",void 0),T=Rt(i,"separator",void 0),e=Rt(i,"text",void 0),d=Rt(i,"action",void 0),x=Rt(i,"actionMask",void 0);if(g){var f;this.orientation===0?f={right:Rt(i,"space.icon",0),top:Rt(i,"space.iconTop",0),bottom:Rt(i,"space.iconBottom",0)}:f={bottom:Rt(i,"space.icon",0),left:Rt(i,"space.iconLeft",0),right:Rt(i,"space.iconRight",0)};var u=Rt(i,"squareFitIcon",!1)?1:0;if(this.add(g,{proportion:0,padding:f,fitRatio:u}),C&&(C=oi.call(this,g,g,1)),!u){var h=Rt(i,"iconSize",void 0);this.setIconSize(Rt(i,"iconWidth",h),Rt(i,"iconHeight",h))}}var o=new Dt(t,{orientation:1});M&&o.addBackground(M);var n=Rt(i,"space.separator",0);if(l){var r=Rt(i,"align.title","left"),f={bottom:!T&&e?n:0,left:Rt(i,"space.titleLeft",0),right:Rt(i,"space.titleRight",0)};o.add(l,{proportion:0,align:r,padding:f})}if(T){var f={top:l?n:0,bottom:e?n:0,left:Rt(i,"space.separatorLeft",0),right:Rt(i,"space.separatorRight",0)};o.add(T,{expand:!0,padding:f})}if(e){var r=Rt(i,"align.text","left"),f={left:Rt(i,"space.textLeft",0),right:Rt(i,"space.textRight",0)};o.add(e,{proportion:0,align:r,padding:f})}var f=void 0;if(d&&(f={right:Rt(i,"space.text",0)}),this.add(o,{proportion:1,padding:f}),d){var f;this.orientation===0?f={top:Rt(i,"space.actionTop",0),bottom:Rt(i,"space.actionBottom",0)}:f={left:Rt(i,"space.actionLeft",0),right:Rt(i,"space.actionRight",0)};var u=Rt(i,"squareFitAction",!1)?1:0;if(this.add(d,{proportion:0,padding:f,fitRatio:u}),x&&(x=oi.call(this,d,d,1)),!u){var a=Rt(i,"actionSize");this.setActionSize(Rt(i,"actionWidth",a),Rt(i,"actionHeight",a))}}this.addChildrenMap("icon",g),this.addChildrenMap("iconMask",C),this.addChildrenMap("innerSizer",o),this.addChildrenMap("innerBackground",M),this.addChildrenMap("title",l),this.addChildrenMap("separator",T),this.addChildrenMap("text",e),this.addChildrenMap("action",d),this.addChildrenMap("actionMask",x)};const Pt=Phaser.Utils.Objects.GetValue;var jL=function(i){this.setOrientation(1),this.setRTL(!1);var t=this.scene,s=Pt(i,"title",void 0),g=Pt(i,"separator",void 0),C=Pt(i,"innerBackground",void 0),M=Pt(i,"icon",void 0),l=Pt(i,"iconMask",void 0),T=Pt(i,"text",void 0),e=Pt(i,"action",void 0),d=Pt(i,"actionMask",void 0);if(s){var x=Pt(i,"align.title","left"),u={bottom:Pt(i,"space.title",0),left:Pt(i,"space.titleLeft",0),right:Pt(i,"space.titleRight",0)};this.add(s,{proportion:0,align:x,padding:u})}if(g){var h=Pt(i,"space.separator",0),u={top:s?h:0,bottom:T?h:0,left:Pt(i,"space.separatorLeft",0),right:Pt(i,"space.separatorRight",0)};this.add(g,{proportion:0,expand:!0,padding:u})}var o=Pt(i,"orientation",0),n=new Dt(t,{orientation:o,rtl:Pt(i,"rtl",!1),space:{left:Pt(i,"space.innerLeft",0),right:Pt(i,"space.innerRight",0),top:Pt(i,"space.innerTop",0),bottom:Pt(i,"space.innerBottom",0)}});if(C&&n.addBackground(C),this.add(n,{proportion:1,expand:!0}),M){var u=void 0;n.orientation===0?u={right:Pt(i,"space.icon",0),top:Pt(i,"space.iconTop",0),bottom:Pt(i,"space.iconBottom",0)}:u={bottom:Pt(i,"space.icon",0),left:Pt(i,"space.iconLeft",0),right:Pt(i,"space.iconRight",0)};var r=Pt(i,"squareFitIcon",!1)?1:0;if(n.add(M,{proportion:0,padding:u,fitRatio:r}),l&&(l=oi.call(this,M,M,1)),!r){var f=Pt(i,"iconSize",void 0);this.setIconSize(Pt(i,"iconWidth",f),Pt(i,"iconHeight",f))}}if(T){var x=Pt(i,"align.text","left"),a=Pt(i,"space.text",0),c=Pt(i,"expandTextWidth",!1),p=Pt(i,"expandTextHeight",!1),v,u,m;n.orientation===0?(v=c?1:0,e&&(u={right:a}),m=p):(v=p?1:0,e&&(u={bottom:a}),m=c),n.add(T,{proportion:v,expand:m,align:x,padding:u})}if(e){var u;n.orientation===0?u={top:Pt(i,"space.actionTop",0),bottom:Pt(i,"space.actionBottom",0)}:u={left:Pt(i,"space.actionLeft",0),right:Pt(i,"space.actionRight",0)};var r=Pt(i,"squareFitAction",!1)?1:0;if(n.add(e,{proportion:0,padding:u,fitRatio:r}),d&&(d=oi.call(this,e,e,1)),!r){var y=Pt(i,"actionSize");this.setActionSize(Pt(i,"actionWidth",y),Pt(i,"actionHeight",y))}}this.addChildrenMap("title",s),this.addChildrenMap("separator",g),this.addChildrenMap("innerSizer",n),this.addChildrenMap("innerBackground",C),this.addChildrenMap("icon",M),this.addChildrenMap("iconMask",l),this.addChildrenMap("text",T),this.addChildrenMap("action",e),this.addChildrenMap("actionMask",d)};const jc=Phaser.Utils.Objects.GetValue,Jc=[ZL,jL];class qu extends Zu{constructor(t,s){super(t,s),this.type="rexTitleLabel";var g=jc(s,"background",void 0);g&&this.addBackground(g);var C=jc(s,"layoutMode",0),M=Jc[C]||Jc[0];M.call(this,s),this.addChildrenMap("background",s.background)}get title(){var t=this.childrenMap.title;return t?t.title:""}set title(t){var s=this.childrenMap.title;s&&s.setText(t)}setTitle(t){return this.title=t,this}resetDisplayContent(t){t===void 0?t={}:typeof t=="string"&&(t={text:t}),super.resetDisplayContent(t);var s=this.childrenMap.title;return s&&(t.title===void 0||(t.title?(this.show(s),this.setTitle(t.title)):this.hide(s))),this}}ht.register("titleLabel",function(i){var t=new qu(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.TitleLabel",qu);const Vt=Phaser.Utils.Objects.GetValue,JL=Phaser.Utils.Objects.IsPlainObject;var QL=function(i,t){var s=Vt(t,"background",void 0),g=Vt(t,"icon",void 0),C=Vt(t,"iconMask",void 0),M=Vt(t,"nameText",void 0),l=Vt(t,"valueText",void 0),T=Vt(t,"bar",void 0),e=Vt(t,"action",void 0),d=Vt(t,"actionMask",void 0);JL(T)&&(T=new du(i,T),i.add.existing(T),M&&i.children.moveBelow(T,M),l&&i.children.moveBelow(T,l));var x=M||l||T;if(s&&this.addBackground(s),g){var u=void 0;this.orientation===0?(x||e)&&(u={right:Vt(t,"space.icon",0),top:Vt(t,"space.iconTop",0),bottom:Vt(t,"space.iconBottom",0)}):(x||e)&&(u={bottom:Vt(t,"space.icon",0),left:Vt(t,"space.iconLeft",0),right:Vt(t,"space.iconRight",0)}),this.add(g,{proportion:0,padding:u}),C&&(C=oi.call(this,g,g,1))}if(x){var h=new Dt(i,{orientation:1}),o;if(M||l){if(o=new Dt(i,{orientation:0}),M){M.text===""&&M.setText(" "),M.setOrigin(0,M.originY);var u={left:Vt(t,"space.name",0)};o.add(M,{padding:u})}if(l){l.text===""&&l.setText(" "),l.setOrigin(1,l.originY),o.addSpace();var u={right:Vt(t,"space.value",0)};o.add(l,{padding:u}),this.setValueTextFormatCallback(Vt(t,"valueTextFormatCallback",qL),Vt(t,"valueTextFormatCallbackScope",void 0))}h.add(o,{expand:!0})}if(T){var u={top:o?Vt(t,"space.bar",0):0,bottom:Vt(t,"space.barBottom",0),left:Vt(t,"space.barLeft",0),right:Vt(t,"space.barRight",0)};h.add(T,{expand:!0,padding:u})}var u=void 0;e&&(u={right:Vt(t,"space.text",0)});var n=Vt(t,"align.text","bottom");this.add(h,{proportion:1,align:n,padding:u})}if(e){var u;this.orientation===0?u={top:Vt(t,"space.actionTop",0),bottom:Vt(t,"space.actionBottom",0)}:u={left:Vt(t,"space.actionLeft",0),right:Vt(t,"space.actionRight",0)},this.add(e,{proportion:0,padding:u}),d&&(d=oi.call(this,e,e,1))}this.addChildrenMap("background",s),this.addChildrenMap("icon",g),this.addChildrenMap("iconMask",C),this.addChildrenMap("name",M),this.addChildrenMap("value",l),this.addChildrenMap("bar",T),this.addChildrenMap("action",e),this.addChildrenMap("actionMask",d)},qL=function(i,t,s){return i.toString()};const _L=Phaser.Math.Clamp,t3={setValueTextFormatCallback(i,t){return this.valueTextFormatCallback=i,this.valueTextFormatCallbackScope=t,this},getFormatValueText(i,t,s){i===void 0&&(i=this.value),t===void 0&&(t=this.minValue),s===void 0&&(s=this.maxValue);var g;return this.valueTextFormatCallbackScope?g=this.valueTextFormatCallback(i,t,s):g=this.valueTextFormatCallback.call(this.valueTextFormatCallbackScope,i,t,s),g},updateValueText(i,t,s){var g=this.childrenMap.value;return g&&this.valueTextFormatCallback&&(g.setText(this.getFormatValueText(i,t,s)),g.layout&&g.layout()),this},setValue(i,t,s){return i=_L(i,t,s),this.value=i,this.minValue=t,this.maxValue=s,this.updateValueText(i,t,s),this.setBarValue(i,t,s),this}};class _u extends Dt{constructor(t,s){super(t,s),this.type="rexNameValueLabel",QL.call(this,t,s)}get nameText(){var t=this.childrenMap.name;return t===void 0?"":t.text}set nameText(t){var s=this.childrenMap.name;s!==void 0&&s.setText(t)}setNameText(t){return this.nameText=t,this}get valueText(){var t=this.childrenMap.value;return t===void 0?"":t.text}set valueText(t){var s=this.childrenMap.value;s!==void 0&&s.setText(t)}setValueText(t){return this.valueText=t,this}get barValue(){var t=this.childrenMap.bar;if(t!==void 0)return t.value}set barValue(t){var s=this.childrenMap.bar;s!==void 0&&s.setValue(t)}setBarValue(t,s,g){var C=this.childrenMap.bar;return C===void 0?this:(C.setValue(t,s,g),this)}easeBarValueTo(t,s,g){var C=this.childrenMap.bar;return C===void 0?this:(C.easeValueTo(t,s,g),this)}setTexture(t,s){var g=this.childrenMap.icon;if(g!==void 0)return g.setTexture(t,s),this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}runLayout(t,s,g){if(this.ignoreLayout)return this;super.runLayout(t,s,g);var C=this.childrenMap.iconMask;C&&(C.setPosition(),this.resetChildPositionState(C));var M=this.childrenMap.actionMask;return M&&(M.setPosition(),this.resetChildPositionState(M)),this}resize(t,s){super.resize(t,s);var g=this.childrenMap.iconMask;g&&g.resize();var C=this.childrenMap.actionMask;return C&&C.resize(),this}}Object.assign(_u.prototype,t3);ht.register("nameValueLabel",function(i){var t=new _u(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.NameValueLabel",_u);const da=Dt.prototype.add,Qc=Dt.prototype.addSpace;var Xh=function(i){var t=!i.isRexSpace,s=!t||this.buttonsExpand?1:0;if(this.sizerChildren.length===0)if(t){var g=!this.buttonsExpand&&(this.buttonsAlign==="right"||this.buttonsAlign==="center"||this.buttonsAlign==="bottom");g&&Qc.call(this),da.call(this,i,{proportion:s,expand:!0});var C=!this.buttonsExpand&&this.buttonsAlign==="center";C&&Qc.call(this),this.hasTailSpace=C}else da.call(this,i,{proportion:s,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var M=this.sizerChildren.length-1;da.call(this,i,{index:M,proportion:s,expand:!0})}else da.call(this,i,{proportion:s,expand:!0});return t&&this.buttonGroup.add(i),this};const e3={addButton(i){if(ri(i))for(var t=i,s=0,g=t.length;s<g;s++)Xh.call(this,t[s]);else Xh.call(this,i);return this},addButtons(i){for(var t=0,s=i.length;t<s;t++)Xh.call(this,i[t]);return this}},i3=Dt.prototype.remove,s3=Dt.prototype.clear;var Wh=function(i,t){return this.getParentSizer(i)!==this?this:(this.buttonGroup.remove(i),i3.call(this,i,t),this)};const n3={remove(i,t){if(ri(i))for(var s=i,g=0,C=s.length;g<C;g++)Wh.call(this,s[g],t);else Wh.call(this,i,t);return this},clear(i){var t=this.buttonGroup.buttons;return t.length=0,s3.call(this,i),this},removeButton(s,t){var s=this.getButton(s);return s?(this.remove(s,t),this):this},clearButtons(i){for(var t=this.buttonGroup.buttons,s=t.length-1;s>=0;s--)Wh.call(this,t[s],i);return this}};var r3=function(i,t,s){if(i){var g=this.setValueCallback,C=this.setValueCallbackScope;g&&(C?g.call(C,i,t,s):g(i,t,s)),this.fireEvent("button.statechange",i,t,s)}},a3=function(i){var t=this;i._selected=void 0,Object.defineProperty(i,"selected",{get:function(){return i._selected},set:function(s){if(i._selected!==s){var g=i._selected;i._selected=s,r3.call(t,i,s,g)}},enumerable:!0,configurable:!0}),i.selected=!1};const o3={add(i){return this.buttons.push(i),i._click||(i._click=new hs(i,this.clickConfig),i._click.on("click",function(t,s,g,C){this.fireEvent("button.click",s,g,C)},this).on("enable",function(t,s){this.fireEvent("button.enable",s)},this).on("disable",function(t,s){this.fireEvent("button.disable",s)},this),i.on("pointerover",function(t,s,g,C){this.fireEvent("button.over",i,t,C)},this).on("pointerout",function(t,s){this.fireEvent("button.out",i,t,s)},this)),this.buttonsType&&(i.name===void 0&&console.error(`${this.parent.constructor.name}: Option button miss value`),a3.call(this,i)),this},addMultiple(i){for(var t=0,s=i.length;t<s;t++)this.add(i[t]);return this}},h3=Phaser.Utils.Array.Remove,l3={remove(i){return this.buttonsType&&delete i.selected,h3(this.buttons,i),this},clear(){if(this.buttonsType)for(var i=this.buttons,t=0,s=i.length;t<s;t++)delete i[t].selected;return this.buttons.length=0,this}};var u3=function(i,t,...s){var g;if(typeof t=="number"){if(g=t,t=this.buttons[g],!t)return}else if(g=this.buttons.indexOf(t),g===-1)return;this.eventEmitter!==this.parent&&this.parent.emit(i,t,g,...s),this.groupName!==void 0?this.eventEmitter.emit(i,t,this.groupName,g,...s):this.eventEmitter.emit(i,t,g,...s)};const er=Phaser.Utils.Objects.GetValue,d3={setButtonsType(i){i===void 0&&(i={});var t=er(i,"buttonsType",i.type);if(this.buttonsType=t,!this.buttonsType)return this;var s,g;switch(s=er(i,"setValueCallback",void 0),g=er(i,"setValueCallbackScope",void 0),s===void 0&&(s=er(i,"setButtonStateCallback",void 0),g=er(i,"setButtonStateCallbackScope",void 0)),this.setValueCallback=s,this.setValueCallbackScope=g,t){case"radio":this.setRadioType();break;case"checkboxes":this.setCheckboxesType();break}return this},setRadioType(){var i=this.parent,t=this.buttons;i._value=void 0;var s=void 0;return Object.defineProperty(i,"value",{get:function(){return i._value},set:function(g){if(i._value!==g){i._value=g;for(var C=0,M=t.length;C<M;C++){var l=t[C];l.rexSizer.hidden||(s===void 0?l.name===g?l.selected=!0:l.selected=!1:s===C?l.selected=!0:l.selected=!1)}}},enumerable:!0,configurable:!0}),i.on("button.click",function(g){s=this.buttons.indexOf(g),i.value=g.name,s=void 0},this),this},setCheckboxesType(){var i=this.parent;return i.on("button.click",function(t){t.selected=!t.selected}),this},clearAllButtonsState(){for(var i=this.buttons,t=0,s=i.length;t<s;t++){var g=i[t];g.selected=!1}return this},getAllButtonsState(){for(var i={},t=this.buttons,s=0,g=t.length;s<g;s++){var C=t[s];C.rexSizer.hidden||(i[C.name]=C.selected)}return i},setSelectedButtonName(i){return this.parent.value=i,this},getSelectedButtonName(){return this.parent.value},setButtonState(i,t){t===void 0&&(t=!0);for(var s=this.buttons,g=0,C=s.length;g<C;g++){var M=s[g];if(!M.rexSizer.hidden&&M.name===i){M.selected=t;break}}return this},getButtonState(i){for(var t=this.buttons,s=0,g=t.length;s<g;s++){var C=t[s];if(!C.rexSizer.hidden&&C.name===i)return C.selected}}};var f3=function(i,t){if(i)if(ri(i)){for(var s,g=0,C=i.length;g<C;g++)if(s=qc(i[g],t),s)return s}else{var s;for(var M in i)if(s=qc(i[M],t),s)return s}else return null},qc=function(i,t){return i?i.hasOwnProperty("name")?i.name===t?i:null:GetElementByName(i,t):null};const Eo={getButton(i){var t=this.buttons,s,g=typeof i;switch(g){case"number":s=t[i];break;case"string":s=f3(t,i);break;default:s=i,t.indexOf(s)===-1&&(s=void 0);break}return s},setButtonEnable(i,t){var s=this.buttons;if(i===void 0||typeof i=="boolean"){t=i;for(var g=0,C=s.length;g<C;g++)s[g]._click.setEnable(t)}else this.getButton(i)._click.setEnable(t);return this},toggleButtonEnable(i){var t=this.buttons;if(i===void 0||typeof i=="boolean")for(var s=0,g=t.length;s<g;s++)t[s]._click.toggleEnable();else this.getButton(i)._click.toggleEnable();return this},getButtonEnable(i){return i===void 0&&(i=0),this.getButton(i)._click.enable},emitButtonClick(i){var t=this.buttonGroup?this.buttonGroup:this;return t.fireEvent("button.click",i),this},showButton(i){return Qi(this.getButton(i)),this},hideButton(i){return qi(this.getButton(i)),this},isButtonShown(i){return Fu(this.getButton(i)),this},forEachButtton(i,t){for(var s=this.buttons,g=0,C=s.length;g<C;g++)t?i.call(t,s[g],g,s):i(s[g],g,s);return this}};class Mo{constructor(t){this.parent=t.parent,this.eventEmitter=t.eventEmitter,this.groupName=t.groupName,this.clickConfig=t.clickConfig,this.buttonsType=void 0,this.buttons=[]}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}}var c3={fireEvent:u3};Object.assign(Mo.prototype,o3,l3,d3,Eo,c3);const td={clearAllButtonsState(){return this.buttonGroup.clearAllButtonsState(),this},getAllButtonsState(){return this.buttonGroup.getAllButtonsState()},setSelectedButtonName(i){return this.buttonGroup.setSelectedButtonName(i),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(i,t){return this.buttonGroup.setButtonState(i,t),this},getButtonState(i){return this.buttonGroup.getButtonState(i)}},Ss=Phaser.Utils.Objects.GetValue;let de=class extends Dt{constructor(t,s){s===void 0&&(s={});var g=s.space;typeof g=="number"&&(s.space={item:g}),super(t,s),this.type="rexButtons",this.buttonGroup=new Mo({parent:this,eventEmitter:Ss(s,"eventEmitter",this),groupName:Ss(s,"groupName",void 0),clickConfig:Ss(s,"click",void 0)}).setButtonsType(s);var C=Ss(s,"background",void 0),M=Ss(s,"buttons",void 0);this.buttonsExpand=Ss(s,"expand",!1),this.buttonsAlign=Ss(s,"align",void 0),C&&this.addBackground(C),M&&this.addButtons(M),this.addChildrenMap("background",C),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}};Object.assign(de.prototype,e3,n3,Eo,td);ht.register("buttons",function(i){var t=new de(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.Buttons",de);const v3=ds.prototype.add,p3={addButton(i,t,s){return v3.call(this,i,t,s,void 0,0,this.buttonsExpand),this.buttonGroup.add(i),this},addButtons(i,t){for(var s=0,g=i;s<g;s++)this.addButton(i[s],void 0,t);return this}},g3=ds.prototype.remove,m3=ds.prototype.clear;var Hh=function(s,t){var s=this.getButton(s);return s?(this.buttonGroup.remove(s),g3.call(this,s,t),this):this};const x3={remove(i,t){if(ri(i))for(var s=i,g=0,C=s.length;g<C;g++)Hh.call(this,s[g],t);else Hh.call(this,i,t);return this},clear(i){var t=this.buttonGroup.buttons;return t.length=0,m3.call(this,i),this},removeButton(i,t){return this.remove(i,t),this},clearButtons(i){for(var t=this.buttonGroup.buttons,s=t.length-1;s>=0;s--)Hh.call(this,t[s],i);return this}},vi=Phaser.Utils.Objects.GetValue;class wo extends ds{constructor(t,s){s===void 0&&(s={});var g=vi(s,"row",0),C=vi(s,"column",s.col||0),M=vi(s,"createCellContainerCallback"),l=vi(s,"buttons",void 0),T=vi(s,"expand",!0),e=T?1:0;if(M&&(s.createCellContainerCallback=void 0),l!==void 0){g=Math.max(g,l.length);for(var d=0,x=l.length;d<x;d++)C=Math.max(C,l[d].length)}s.row=g,s.column=C,s.columnProportions=e,s.rowProportions=e,super(t,s),this.type="rexGridButtons",this.buttonGroup=new Mo({parent:this,eventEmitter:vi(s,"eventEmitter",this),groupName:vi(s,"groupName",void 0),clickConfig:vi(s,"click",void 0)}).setButtonsType(s);var u=vi(s,"background",void 0);if(this.buttonsExpand=T,vi(s,"space",void 0),u&&this.addBackground(u),l)for(var h,o,n=0,r=l.length;n<r;n++){h=l[n];for(var f=0,a=h.length;f<a;f++)o=h[f],o&&this.addButton(o,f,n)}else if(M)for(var c=0;c<g;c++)for(var p=0;p<C;p++){var o=M(t,p,c);o&&this.addButton(o,p,c)}this.addChildrenMap("background",u),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(wo.prototype,p3,x3,Eo,td);ht.register("gridButtons",function(i){var t=new wo(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.GridButtons",wo);const p0=Us.prototype.add;var fa=function(i){return p0.call(this,i),this.buttonGroup.add(i),this};const y3={addButton(i){if(ri(i))for(var t=i,s=0,g=t.length;s<g;s++)fa.call(this,t[s]);else fa.call(this,i);return this},addButtons(i){if(ri(i[0]))for(var t=i,s,g=0,C=t.length-1;g<=C;g++){s=t[g];for(var M=0,l=s.length;M<l;M++)fa.call(this,s[M]);g>C&&p0.addNewLine(this)}else for(var M=0,l=i.length;M<l;M++)fa.call(this,i[M]);return this}},T3=Us.prototype.remove,C3=Us.prototype.clear;var $h=function(s,t){var s=this.getButton(s);return s?(this.buttonGroup.remove(s),T3.call(this,s,t),this):this};const S3={remove(i,t){if(ri(i))for(var s=i,g=0,C=s.length;g<C;g++)$h.call(this,s[g],t);else $h.call(this,i,t);return this},clear(i){var t=this.buttonGroup.buttons;return t.length=0,C3.call(this,i),this},removeButton(i,t){return this.remove(i,t),this},clearButtons(i){for(var t=this.buttonGroup.buttons,s=t.length-1;s>=0;s--)$h.call(this,t[s],i);return this}},fn=Phaser.Utils.Objects.GetValue;class Is extends Us{constructor(t,s){s===void 0&&(s={});var g=s.space;typeof g=="number"&&(s.space={item:g,line:g}),super(t,s),this.type="rexFixWidthButtons",this.buttonGroup=new Mo({parent:this,eventEmitter:fn(s,"eventEmitter",this),groupName:fn(s,"groupName",void 0),clickConfig:fn(s,"click",void 0)}).setButtonsType(s);var C=fn(s,"background",void 0),M=fn(s,"buttons",void 0);this.buttonsAlign=fn(s,"align",void 0),C&&this.addBackground(C),M&&this.addButtons(M),this.addChildrenMap("background",C),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Is.prototype,y3,S3,Eo,td);ht.register("fixWidthButtons",function(i){var t=new Is(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.FixWidthButtons",Is);const P3={setAccept(i){return this.childrenMap.fileChooser.setAccept(i),this},setMultiple(i){return this.childrenMap.fileChooser.setMultiple(i),this},loadFile(i,t,s,g,C){return this.childrenMap.fileChooser.loadFile(i,t,s,g,C),this},loadFilePromise(i,t,s,g){return this.childrenMap.fileChooser.loadFilePromise(i,t,s,g)}},_c=Phaser.Utils.Objects.GetValue;class ed extends Ys{constructor(t,s){super(t,s),this.type="rexFileSelectorButton";var g=new So(t);t.add.existing(g),this.addBackground(g),this.addChildrenMap("fileChooser",g),this.setAccept(_c(s,"accept","")),this.setMultiple(_c(s,"multiple",!1)),g.on("change",function(C){var M=C.files;M.length!==0&&(M=Array.from(M),this.emit("select",M,this))},this)}get files(){return this.childrenMap.fileChooser.files}}Object.assign(ed.prototype,P3);ht.register("fileSelectorButton",function(i){var t=new ed(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.FileSelectorButton",ed);const E3={getChoice(i){var t=this.childrenMap.choicesSizer;if(t)return t.getButton(i)},getAction(i){return this.childrenMap.actionsSizer.getButton(i)},getToolbar(i){return this.childrenMap.toolbarSizer.getButton(i)},getLeftToolbar(i){return this.childrenMap.leftToolbarSizer.getButton(i)},setChoiceEnable(i,t){var s=this.childrenMap.choicesSizer;return s&&s.setButtonEnable(i,t),this},setActionEnable(i,t){return this.childrenMap.actionsSizer.setButtonEnable(i,t),this},setToolbarEnable(i,t){return this.childrenMap.toolbarSizer.setButtonEnable(i,t),this},setLeftToolbarEnable(i,t){return this.childrenMap.leftToolbarSizer.setButtonEnable(i,t),this},toggleChoiceEnable(i){var t=this.childrenMap.choicesSizer;return t&&t.toggleButtonEnable(i),this},toggleActionEnable(i){return this.childrenMap.actionsSizer.toggleButtonEnable(i),this},toggleToolbarEnable(i){return this.childrenMap.toolbarSizer.toggleButtonEnable(i),this},toggleLeftToolbarEnable(i){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(i),this},getChoiceEnable(i){var t=this.childrenMap.choicesSizer;return t?t.getButtonEnable(i):!1},getActionEnable(i){return this.childrenMap.actionsSizer.getButtonEnable(i)},getToolbarEnable(i){return this.childrenMap.toolbarSizer.getButtonEnable(i)},getLeftToolbarEnable(i){return this.childrenMap.leftToolbarSizer.getButtonEnable(i)},emitChoiceClick(i){var t=this.childrenMap.choicesSizer;return t&&t.emitButtonClick(i),this},emitActionClick(i){return this.childrenMap.actionsSizer.emitButtonClick(i),this},emitToolbarClick(i){return this.childrenMap.toolbarSizer.emitButtonClick(i),this},emitLeftToolbarClick(i){return this.childrenMap.leftToolbarSizer.emitButtonClick(i),this},showChoice(i){var t=this.childrenMap.choicesSizer;return t&&t.showButton(i),this},showAction(i){return this.childrenMap.actionsSizer.showButton(i),this},showToolbar(i){return this.childrenMap.toolbarSizer.showButton(i),this},showLeftToolbar(i){return this.childrenMap.leftToolbarSizer.showButton(i),this},hideChoice(i){var t=this.childrenMap.choicesSizer;return t&&t.hideButton(i),this},hideAction(i){return this.childrenMap.actionsSizer.hideButton(i),this},hideToolbar(i){return this.childrenMap.toolbarSizer.hideButton(i),this},hideLeftToolbar(i){return this.childrenMap.leftToolbarSizer.hideButton(i),this},addChoice(i){var t=this.childrenMap.choicesSizer;return t&&t.addButton(i),this},addAction(i){return this.childrenMap.actionsSizer.addButton(i),this},addToolbar(i){return this.childrenMap.toolbarSizer.addButton(i),this},addLeftToolbar(i){return this.childrenMap.leftToolbarSizer.addButton(i),this},removeChoice(i,t){var s=this.childrenMap.choicesSizer;return s&&s.removeButton(i,t),this},removeAction(i,t){return this.childrenMap.actionsSizer.removeButton(i,t),this},removeToolbar(i,t){return this.childrenMap.toolbarSizer.removeButton(i,t),this},removeLeftToolbar(i,t){return this.childrenMap.leftToolbarSizer.removeButton(i,t),this},clearChoices(i){var t=this.childrenMap.choicesSizer;return t&&t.clearButtons(i),this},clearActions(i){return this.childrenMap.actionsSizer.clearButtons(i),this},clearToolbar(i){return this.childrenMap.toolbarSizer.clearButtons(i),this},clearLeftToolbar(i){return this.childrenMap.leftToolbarSizer.clearButtons(i),this},forEachChoice(i,t){var s=this.childrenMap.choicesSizer;return s&&s.forEachButtton(i,t),this},forEachAction(i,t){return this.childrenMap.actionsSizer.forEachButtton(i,t),this},forEachToolbar(i,t){return this.childrenMap.toolbarSizer.forEachButtton(i,t),this},forEachLeftToolbar(i,t){return this.childrenMap.leftToolbarSizer.forEachButtton(i,t),this},setAllButtonsEnable(i){return i===void 0&&(i=!0),this.childrenMap.toolbarSizer&&this.setToolbarEnable(i),this.childrenMap.leftToolbarSizer&&this.setLeftToolbarEnable(i),this.childrenMap.actionsSizer&&this.setActionEnable(i),this.childrenMap.choicesSizer&&this.setChoiceEnable(i),this},getChoicesButtonStates(){var i=this.childrenMap.choicesSizer;return i?i.getAllButtonsState():{}},getChoicesButtonState(i){var t=this.childrenMap.choicesSizer;return i===void 0?t?t.getAllButtonsState():{}:t?t.getButtonState(i):!1},setChoicesButtonState(i,t){var s=this.childrenMap.choicesSizer;return s&&s.setButtonState(i,t),this},clearChoicesButtonStates(){var i=this.childrenMap.choicesSizer;return i&&i.clearAllButtonsState(),this},getChoicesSelectedButtonName(){var i=this.childrenMap.choicesSizer;return i?i.getSelectedButtonName():""},setChoicesSelectedButtonName(i){var t=this.childrenMap.choicesSizer;return t&&t.setSelectedButtonName(i),this}},M3={onCreateModalBehavior(i){i.on("button.click",function(t,s,g,C,M){if(s==="actions"){var l={index:g,text:t.text,button:t,dialog:i};switch(i.buttonsType){case"radio":l.value=i.getChoicesSelectedButtonName();break;case"checkboxes":l.value=i.getChoicesButtonStates();break;default:l.value=void 0}i.modalClose(l)}})},modal(i,t){return i&&i.defaultBehavior===!1?this.onCreateModalBehavior=!1:delete this.onCreateModalBehavior,Bu.modal.call(this,i,t),this}};var g0={};Object.assign(g0,E3,M3);const gt=Phaser.Utils.Objects.GetValue;class Ro extends Dt{constructor(t,s){s===void 0&&(s={}),s.orientation=1,super(t,s),this.type="rexDialog",this.eventEmitter=gt(s,"eventEmitter",this);var g=gt(s,"background",void 0),C=gt(s,"title",void 0),M=gt(s,"toolbar",void 0),l=gt(s,"toolbarBackground",void 0),T=gt(s,"leftToolbar",void 0),e=gt(s,"leftToolbarBackground",void 0),d=gt(s,"content",void 0),x=gt(s,"description",void 0),u,h=gt(s,"choices",void 0),o=gt(s,"choicesBackground",void 0),n,r=gt(s,"actions",void 0),f=gt(s,"actionsBackground",void 0),a=gt(s,"click",void 0);g&&this.addBackground(g);var c;M&&(c=new de(t,{groupName:"toolbar",background:l,buttons:M,orientation:0,space:{item:gt(s,"space.toolbarItem",0)},click:a,eventEmitter:this.eventEmitter}));var p;if(T&&(p=new de(t,{groupName:"leftToolbar",background:e,buttons:T,orientation:0,space:{item:gt(s,"space.leftToolbarItem",0)},click:a,eventEmitter:this.eventEmitter})),C||M||T){var v=!!C&&gt(s,"expand.title",!0),m=gt(s,"align.title","center"),y=C&&!v&&m==="center"||!C&&(M||T),P=!y,E;P?E=new Dt(t,{orientation:0}):E=new Ze(t);var S=P?!0:{height:!0};if(p&&E.add(p,{align:"left",expand:S}),C){P&&!v&&m==="right"&&E.addSpace();var R={left:gt(s,"space.titleLeft",0),right:gt(s,"space.titleRight",0)},A=v?1:0;E.add(C,{align:m,proportion:A,expand:S,padding:R}),P&&!v&&m==="left"&&E.addSpace()}c&&(P&&!C&&E.addSpace(),E.add(c,{align:"right",expand:S}));var w=gt(s,"space.title",0),R;(d||x||h||r)&&(R={bottom:w});var A=gt(s,"proportion.title",0);this.add(E,{padding:R,proportion:A,expand:!0})}if(d){var O=gt(s,"align.content","center"),F=gt(s,"space.content",0),R={left:gt(s,"space.contentLeft",0),right:gt(s,"space.contentRight",0),bottom:x||h||r?F:0},A=gt(s,"proportion.content",0),b=gt(s,"expand.content",!0);this.add(d,{align:O,padding:R,proportion:A,expand:b})}if(x){var O=gt(s,"align.description","center"),D=gt(s,"space.description",0),R={left:gt(s,"space.descriptionLeft",0),right:gt(s,"space.descriptionRight",0),bottom:h||r?D:0},A=gt(s,"proportion.description",0),b=gt(s,"expand.description",!0);this.add(x,{align:O,padding:R,proportion:A,expand:b})}if(h){var I=gt(s,"choicesType","").split("-"),B=ir(I,"wrap")?Is:ir(I,"grid")?wo:de,k=ir(I,"radio")?"radio":ir(I,"checkboxes")?"checkboxes":void 0,U={left:gt(s,"space.choicesBackgroundLeft",0),right:gt(s,"space.choicesBackgroundRight",0),top:gt(s,"space.choicesBackgroundTop",0),bottom:gt(s,"space.choicesBackgroundBottom",0)},X=gt(s,"space.choice",0);B===de?U.item=X:B===Is?(U.item=X,U.line=gt(s,"space.choiceLine",X)):(U.column=gt(s,"space.choiceColumn",X),U.row=gt(s,"space.choiceRow",X));var H={width:gt(s,"choicesWidth",void 0),height:gt(s,"choicesHeight",void 0),groupName:"choices",buttonsType:k,background:o,buttons:h,space:U,click:a,eventEmitter:this.eventEmitter,setValueCallback:gt(s,"choicesSetValueCallback",void 0),setValueCallbackScope:gt(s,"choicesSetValueCallbackScope",void 0)};B===de&&(H.orientation=ir(I,"x")?0:1),u=new B(t,H);var N=gt(s,"space.choices",0),R={left:gt(s,"space.choicesLeft",0),right:gt(s,"space.choicesRight",0),bottom:r?N:0},O=gt(s,"align.choices","center"),A=gt(s,"proportion.choices",0),b=gt(s,"expand.choices",!0);this.add(u,{align:O,padding:R,proportion:A,expand:b}),this.buttonsType=k}if(r){n=new de(t,{groupName:"actions",background:f,buttons:r,orientation:0,space:{item:gt(s,"space.action",0)},expand:gt(s,"expand.actions",!1),align:gt(s,"align.actions","center"),click:a,eventEmitter:this.eventEmitter});var R={left:gt(s,"space.actionsLeft",0),right:gt(s,"space.actionsRight",0)},A=gt(s,"proportion.action",0);this.add(n,{align:"center",padding:R,proportion:A,expand:!0})}sr(this,"click"),sr(this,"over"),sr(this,"out"),sr(this,"enable"),sr(this,"disable"),this.addChildrenMap("background",g),this.addChildrenMap("title",C),this.addChildrenMap("toolbar",M),this.addChildrenMap("leftToolbar",T),this.addChildrenMap("content",d),this.addChildrenMap("description",x),this.addChildrenMap("choices",u?u.buttons:void 0),this.addChildrenMap("actions",n?n.buttons:void 0),this.addChildrenMap("choicesSizer",u),this.addChildrenMap("actionsSizer",n),this.addChildrenMap("toolbarSizer",c),this.addChildrenMap("leftToolbarSizer",p)}}var ir=function(i,t){return i.indexOf(t)!==-1},tv={actions:"action",choices:"choice",toolbar:"toolbar",leftToolbar:"leftToolbar"},sr=function(i,t){i.on(`button.${t}`,function(s,g,C,M,l){tv.hasOwnProperty(g)&&i.emit(`${tv[g]}.${t}`,s,C,M,l)})};Object.assign(Ro.prototype,g0);ht.register("dialog",function(i){var t=new Ro(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.Dialog",Ro);var We=function(i,t,s){var g=new Qu(i,t,s);return i.add.existing(g),g},w3=function(i){return i===void 0&&(i={}),R3.call(this,i),A3.call(this,i),O3.call(this,i),b3.call(this,i),this},R3=function(i){var t=this.childrenMap.title;t.resetDisplayContent(i.title)},A3=function(i){var t=this.childrenMap.content;if(t.resetDisplayContent)t.resetDisplayContent(i.content);else{var s=i.content||"";t.setText(s)}},O3=function(i){var t=this.childrenMap.actions;if(t){var s=i.buttons;if(s){for(var M=this.scene,l=this.defaultActionConfig,T=this.defaultActionButtonCreator,e=0,d=s.length;e<d;e++){var x=s[e],u=t[e];u||(u=We(M,l,T),this.addAction(u)),u.show().resetDisplayContent(x)}this.buttonMode=s.length;for(var e=s.length,d=t.length;e<d;e++)t[e].hide()}else{var g=t[0];g&&g.resetDisplayContent(i.buttonA);var C=t[1];C&&C.resetDisplayContent(i.buttonB)}}},b3=function(i){var t=this.childrenMap.choices;if(t){var s=i.choices;s||(s=[]);for(var g=this.scene,C=this.defaultChoiceConfig,M=this.defaultActionButtonCreator,l=0,T=s.length;l<T;l++){var e=s[l];typeof e=="string"&&(e={text:e});var d=t[l];d||(d=We(g,C,M),this.addChoice(d)),d.show().resetDisplayContent(e);var x;e.hasOwnProperty("value")?x=e.value:x=e.text,d.setName(x)}for(var l=s.length,T=t.length;l<T;l++)t[l].hide()}},F3=function(i,t){ns(i)&&(t=i,i=void 0),i===void 0&&(i={});var s=this.buttonMode===0;return i.hasOwnProperty("anyTouchClose")||(i.anyTouchClose=s),i.hasOwnProperty("manualClose")||(i.manualClose=!s),Bu.modal.call(this,i,t),this},L3={resetDisplayContent:w3,modal:F3},D3=function(i){i.setHoverState&&i.setHoverState(!0)},I3=function(i){i.setHoverState&&i.setHoverState(!1)},B3=function(i,t,s,g){i.setActiveState&&i.setActiveState(g)},G3=function(i){i.setDisableState&&i.setDisableState(!1)},N3=function(i){i.setDisableState&&i.setDisableState(!0)},V3=function(){this.on("button.over",D3).on("button.out",I3).on("button.enable",G3).on("button.disable",N3).on("button.statechange",B3)};const m0={v:0,vertical:0,y:0,h:1,horizontal:1,x:1},k3=Phaser.Utils.Objects.GetValue;var Ao=function(i,t){var s=k3(i,"scrollMode",0);return typeof s=="string"&&(s=m0[s]),s};const ev=Phaser.Math.Percent;var x0=function(i,t,s){var g;return i.y===t.y?g=ev(s.x,i.x,t.x):i.x===t.x&&(g=ev(s.y,i.y,t.y)),g},z3=function(i,t,s){if(this.enable){Kh.x=t,Kh.y=s;var g,C;this.reverseAxis?(g=this.getEndPoint(),C=this.getStartPoint()):(g=this.getStartPoint(),C=this.getEndPoint()),this.value=x0(g,C,Kh)}},Kh={},iv=function(i,t,s){if(this.enable&&i.isDown){Zh.x=i.worldX,Zh.y=i.worldY;var g,C;this.reverseAxis?(g=this.getEndPoint(),C=this.getStartPoint()):(g=this.getStartPoint(),C=this.getEndPoint());var M=x0(g,C,Zh);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-M)<.1?this.value=M:this.easeValueTo(M)}},Zh={},y0=function(i,t){t===void 0&&(t=U3);var s=this.childrenMap.thumb,g=s.x,C=s.y;return Sr(s,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,i),t.x=s.x,t.y=s.y,s.x=g,s.y=C,t},U3={};const Y3=Phaser.Display.Align.LEFT_CENTER,X3=Phaser.Display.Align.TOP_CENTER;var W3=function(i){if(i===void 0&&(i=H3),this.childrenMap.thumb){var t=this.orientation===0?Y3:X3;y0.call(this,t,i)}else this.orientation===0?(i.x=this.innerLeft+1,i.y=this.centerY):(i.x=this.centerX,i.y=this.innerTop+1);return i},H3={};const $3=Phaser.Display.Align.RIGHT_CENTER,K3=Phaser.Display.Align.BOTTOM_CENTER;var Z3=function(i){if(i===void 0&&(i=j3),this.childrenMap.thumb){var t=this.orientation===0?$3:K3;y0.call(this,t,i)}else this.orientation===0?(i.x=this.innerRight-1,i.y=this.centerY):(i.x=this.centerX,i.y=this.innerBottom-1);return i},j3={};const sv=Phaser.Math.Linear;var J3=function(i,t,s,g){return g===void 0&&(g=Q3),g.x=sv(t.x,s.x,i),g.y=sv(t.y,s.y,i),g},Q3={},q3=function(i){var t=this.childrenMap.thumb;if(t===void 0)return this;i===void 0&&(i=this.value);var s,g;return this.reverseAxis?(s=this.getEndPoint(),g=this.getStartPoint()):(s=this.getStartPoint(),g=this.getEndPoint()),J3(i,s,g,t),this.resetChildPositionState(t),this};const _3=Phaser.Display.Align.LEFT_CENTER,t5=Phaser.Display.Align.TOP_CENTER,e5=Phaser.Display.Align.RIGHT_CENTER,i5=Phaser.Display.Align.BOTTOM_CENTER;var s5=function(i){var t=this.childrenMap.indicator;if(t===void 0)return this;i===void 0&&(i=this.value);var s=this.reverseAxis,g,C,M=this.childrenMap.thumb;if(M)if(this.orientation===0){var l=Ut(M);if(s){var T=M.x-l*M.originX;g=this.right-T}else{var T=M.x-l*M.originX,e=T+l;g=e-this.left}}else{var d=It(M);if(s){var x=M.y-d*M.originY;C=this.bottom-x}else{var x=M.y-d*M.originY,u=x+d;C=u-this.top}}else this.orientation===0?g=this.width*i:C=this.height*i;ai(t,g,C);var h;s?h=this.orientation===0?e5:i5:h=this.orientation===0?_3:t5,bg(t,this,h),this.resetChildPositionState(t)};const _e=Phaser.Utils.Objects.GetValue,ca=Phaser.Utils.Objects.IsPlainObject,n5=Phaser.Math.Clamp,r5=Phaser.Math.Snap.To;let Dn=class extends ks(Dt){constructor(t,s){super(t,s),this.type="rexSlider",this.bootProgressBase(s),this.reverseAxis=_e(s,"reverseAxis",!1);var g=_e(s,"background",void 0),C=_e(s,"track",void 0),M=_e(s,"indicator",void 0),l=_e(s,"thumb",void 0);g&&(ca(g)&&(g=Xe(t,g)),this.addBackground(g)),C&&(ca(C)&&(C=Xe(t,C)),this.add(C,{proportion:1,expand:!0,minWidth:this.orientation===0?0:void 0,minHeight:this.orientation===1?0:void 0})),M&&(ca(M)&&(M=Xe(t,M)),this.pin(M)),l&&(ca(l)&&(l=Xe(t,l)),this.pin(l));var T=_e(s,"input",0);switch(typeof T=="string"&&(T=a5[T]),T){case 0:l&&(l.setInteractive(),this.scene.input.setDraggable(l),l.on("drag",z3,this).on("dragstart",function(e){this.eventEmitter.emit("inputstart",e)},this).on("dragend",function(e){this.eventEmitter.emit("inputend",e)},this));break;case 1:this.on("pointerdown",iv,this).on("pointermove",iv,this).on("pointerdown",function(e){this.eventEmitter.emit("inputstart",e)},this).on("pointerup",function(e){this.eventEmitter.emit("inputend",e)},this).on("pointerover",function(e){e.isDown&&this.eventEmitter.emit("inputstart",e)},this).on("pointerout",function(e){e.isDown&&this.eventEmitter.emit("inputend",e)},this).setInteractive();break}this.addChildrenMap("background",g),this.addChildrenMap("track",C),this.addChildrenMap("indicator",M),this.addChildrenMap("thumb",l),this.setEnable(_e(s,"enable",void 0)),this.setGap(_e(s,"gap",void 0)),this.setValue(_e(s,"value",0),_e(s,"min",void 0),_e(s,"max",void 0))}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t,s,g){return t&&s!==void 0&&(t=t/(g-s)),this.gap=t,this}get value(){return this._value}set value(t){this.gap!==void 0&&(t=r5(t,this.gap));var s=this._value;this._value=n5(t,0,1),s!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,s,this.eventEmitter))}runLayout(t,s,g){return this.ignoreLayout?this:(super.runLayout(t,s,g),this.updateThumb(),this.updateIndicator(),this)}};const a5={pan:0,drag:0,click:1,none:-1};var o5={getStartPoint:W3,getEndPoint:Z3,updateThumb:q3,updateIndicator:s5};Object.assign(Dn.prototype,o5);const Me=Phaser.Utils.Objects.GetValue;class id extends Dt{constructor(t,s){super(t,s),this.type="rexScrollBar";var g=Me(s,"background",void 0),C=Me(s,"buttons",void 0),M=Me(C,"top",Me(C,"left",void 0)),l=Me(C,"bottom",Me(C,"right",void 0)),T,e=Me(s,"slider",void 0);if(g&&this.addBackground(g),M){this.add(M);var d=new Rn(M);d.on("intouch",function(){if(this.enable){var f=T.reverseAxis?this.scrollStep:-this.scrollStep;this.value+=f}},this)}if(e){e.orientation=this.orientation,e.eventEmitter=this,e.value=null;var x;if(this.orientation===0){var u=Me(e,"width",void 0);x=u===void 0?1:0}else{var h=Me(e,"height",void 0);x=h===void 0?1:0}T=new Dn(t,e),t.add.existing(T),this.add(T,{proportion:x})}if(l){this.add(l);var d=new Rn(l);d.on("intouch",function(){if(this.enable){var a=T.reverseAxis?-this.scrollStep:this.scrollStep;this.value+=a}},this)}var o=[M,l];this.addChildrenMap("background",g),this.addChildrenMap("slider",T),this.addChildrenMap("buttons",o);var n=Me(s,"valuechangeCallback",null);if(n!==null){var r=Me(s,"valuechangeCallbackScope",void 0);this.on("valuechange",n,r)}this.setEnable(Me(s,"enable",void 0)),this.setValue(Me(s,"value",0)),this.setScrollStep(Me(C,"step",.01))}setScrollStep(t){return this.scrollStep=t,this}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){this.childrenMap.slider&&(this.childrenMap.slider.value=t)}setValue(t,s,g){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,s,g),this}addValue(t,s,g){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,s,g),this}getValue(t,s){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,s):0}easeValueTo(t,s,g){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,s,g),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}}class h5 extends id{constructor(t,s){s===void 0&&(s={});var g=Ls(s);s={slider:g},s.orientation=g.orientation,delete g.orientation,s.background=g.background,delete g.background,s.buttons=g.buttons,delete g.buttons,super(t,s);var C=this.childrenMap.slider;this.addChildrenMap("track",C.childrenMap.track),this.addChildrenMap("indicator",C.childrenMap.indicator),this.addChildrenMap("thumb",C.childrenMap.thumb)}}class l5 extends ki{constructor(t,s){super(s),this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){var t,s=this.parent,g=s.dragState;return g.isDown&&(t=s.dragThreshold===0?"DRAG":"DRAGBEGIN"),t}update_IDLE(t,s){this.next()}next_DRAGBEGIN(){var t,s=this.parent,g=s.dragState;return g.isDown?t=g.pointer.getDistance()>=s.dragThreshold?"DRAG":"DRAGBEGIN":t="IDLE",t}update_DRAGBEGIN(t,s){this.next()}next_DRAG(){var t,s=this.parent,g=s.dragState;return g.isUp&&(s.outOfBounds?t="BACK":s.slidingEnable?t="SLIDE":t="IDLE"),t}update_DRAG(t,s){var g=this.parent,C=g.dragState;C.justMoved&&g.dragging(),this.next()}enter_DRAG(){this.parent.onDragStart()}exit_DRAG(){this.parent.onDragEnd()}next_SLIDE(){var t,s=this.parent,g=s.dragState;return g.isDown?t="DRAG":s.isSliding||(t="IDLE"),t}enter_SLIDE(){this.parent.onSliding()}exit_SLIDE(){this.parent.stop()}update_SLIDE(t,s){this.parent.sliding(t,s),this.next()}next_BACK(){var t,s=this.parent,g=s.dragState;return g.isDown?t="DRAG":s.isPullBack||(t="IDLE"),t}enter_BACK(){this.parent.onPullBack()}exit_BACK(){this.parent.stop()}update_BACK(t,s){this.parent.pullBack(t,s),this.next()}}const va=Phaser.Utils.Objects.GetValue,u5=Phaser.Math.Distance.Between;class d5 extends he{constructor(t,s){super(t,s),this._enable=void 0,t.setInteractive(va(s,"inputConfig",void 0)),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable(va(t,"enable",!0)),this.holdThreshold=va(t,"holdThreshold",50),this.pointerOutReleaseEnable=va(t,"pointerOutRelease",!0),this}boot(){this.parent.on("pointerdown",this.onPointIn,this),this.parent.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&this.parent.on("pointerout",this.onPointOut,this),this.parent.on("pointermove",this.onPointerMove,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){this._enable!==t&&(t||(this.isInTouched=!1,this.pointer=void 0),this._enable=t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(t){return t===void 0&&(t=!0),this.pointerOutReleaseEnable=t,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){var t=au(this.scene);return t}get speed(){if(this.x===this.preX&&this.y===this.preY)return 0;var t=u5(this.preX,this.preY,this.x,this.y),s=t/(this.dt*.001);return s}get speedX(){return this.dx/(this.dt*.001)}get speedY(){return this.dy/(this.dt*.001)}onPointIn(t,s,g){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.localX=s,this.localY=g)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0)}onPointerMove(t,s,g){!this.enable||!t.isDown||this.pointer!==t||(this.localX=s,this.localY=g)}preupdate(t,s){if(this.enable){var g=this.pointer;this.justMoved=!1,g&&!this.isInTouched?(this.x=g.worldX,this.y=g.worldY,this.preX=g.worldX,this.preY=g.worldY,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",g,this.localX,this.localY)):g&&this.isInTouched?this.x===g.x&&this.y===g.y?this.holdStartTime===void 0?this.holdStartTime=t:t-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=g.worldX,this.y=g.worldY,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",g,this.localX,this.localY)):!g&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",g))}}}const jh=Phaser.Utils.Objects.GetValue;class f5{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){return this.setValue(jh(t,"value",0)),this.setSpeed(jh(t,"speed",0)),this.setAcceleration(jh(t,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(t){return this.value=t,this}setSpeed(t){return this.speed=t,this}setAcceleration(t){return this.acceleration=t,this}updateSpeed(t){return this.acceleration!==0&&(this.speed+=this.acceleration*t,this.speed<0&&(this.speed=0)),this}getDeltaValue(t){return this.updateSpeed(t),this.speed<=0?0:this.speed*t}update(t){return this.updateSpeed(t),this.speed>0&&(this.value+=this.getDeltaValue(t)),this}get isMoving(){return this.speed>0}}class c5{constructor(){this.value,this.dir,this.movement=new f5}init(t,s,g,C,M){return this.value=t,this.end=M,M!==void 0?this.dir=t<M:this.dir=s,this.movement.setSpeed(g).setAcceleration(-C),this}stop(){this.movement.reset()}update(t){var s=this.movement.getDeltaValue(t);return this.dir||(s=-s),this.end===void 0?this.value+=s:s===0?this.value=this.end:(this.value+=s,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}}const Jt=Phaser.Utils.Objects.GetValue,v5=Phaser.Math.Clamp;class p5 extends he{constructor(t,s){super(t,s);var g=Jt(s,"enable",!0);this._state=new l5(this,{enable:g,eventEmitter:!1});var C={inputConfig:Jt(s,"inputConfig",void 0),enable:g,pointerOutRelease:Jt(s,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new d5(t,C),this._enable=void 0,this._value=void 0,this._slowDown=new c5;var M=Jt(s,"valuechangeCallback",null);if(M!==null){var l=Jt(s,"valuechangeCallbackScope",void 0);this.on("valuechange",M,l)}if(M=Jt(s,"overmaxCallback",null),M!==null){var l=Jt(s,"overmaxCallbackScope",void 0);this.on("overmax",M,l)}if(M=Jt(s,"overminCallback",null),M!==null){var l=Jt(s,"overminCallbackScope",void 0);this.on("overmin",M,l)}this.resetFromJSON(s),this.boot()}resetFromJSON(t){this.setOrientationMode(Jt(t,"orientation",0)),this.setDragThreshold(Jt(t,"threshold",10)),this.setSlidingDeceleration(Jt(t,"slidingDeceleration",5e3)),this.setBackDeceleration(Jt(t,"backDeceleration",2e3));var s=Jt(t,"dragRate",1);s=s*(Jt(t,"dragReverse",!1)?-1:1),this.setDragRate(s);var g=Jt(t,"bounds",void 0);return g?this.setBounds(g):this.setBounds(Jt(t,"max",0),Jt(t,"min",0)),this.setValue(Jt(t,"value",this.maxValue||0)),this.setEnable(Jt(t,"enable",!0)),this}boot(){this.scene.sys.events.on("preupdate",this._state.update,this._state)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this._state.update,this._state),this._state.destroy(t),this.dragState.destroy(t),this._state=void 0,this.dragState=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return this._enable=t,this._state.setEnable(t),this.dragState.setEnable(t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(t){return typeof t=="string"&&(t=g5[t]),this.orientationMode=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setSlidingDeceleration(t){return this.slidingDeceleration=t,this}setBackDeceleration(t){return this.backDeceleration=t,this}setDragRate(t){return this.dragRate=t,this}setBounds(t,s){if(Array.isArray(t)){var g=t;t=g[0],s=g[1]}return t<s?(this.minValue=t,this.maxValue=s):(this.minValue=s,this.maxValue=t),this}get value(){return this._value}set value(t){if(t!==this._value){var s=this._value,g=this.overMax(t),C=this.overMin(t);g&&this.emit("overmax",t,s),C&&this.emit("overmin",t,s),this.backEnable||(g&&(t=this.maxValue),C&&(t=this.minValue)),this._value=t,this.emit("valuechange",t,s)}}setValue(t,s){return s===void 0&&(s=!1),s&&(t=v5(t,this.minValue,this.maxValue)),this.value=t,this}addValue(t,s){return this.setValue(this.value+t,s),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(t){return this.maxValue!=null&&t>this.maxValue}overMin(t){return this.minValue!=null&&t<this.minValue}get backEnable(){return typeof this.backDeceleration=="number"}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return typeof this.slidingDeceleration=="number"}get isSliding(){return this._slowDown.isMoving}get dragDelta(){var t;return this.orientationMode===0?t=this.dragState.dy:this.orientationMode===1?t=this.dragState.dx:t=0,t*=this.dragRate,t}get dragSpeed(){var t;return this.orientationMode===0?t=this.dragState.speedY:this.orientationMode===1?t=this.dragState.speedX:t=0,t*=this.dragRate,t}onDragStart(){this.emit("dragstart")}onDragEnd(){this.emit("dragend")}dragging(){this.value+=this.dragDelta}onSliding(){var t=this.value,s=this.dragSpeed;if(s===0){this._slowDown.stop(),this._state.next();return}var g=this.slidingDeceleration;this._slowDown.init(t,s>0,Math.abs(s),g)}sliding(t,s){s*=.001;var g=this._slowDown.update(s).value;this.overMax(g)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(g)?(this.value=this.minValue,this._slowDown.stop()):this.value=g}onPullBack(){var t=this.value,s=this.outOfMinBound?this.minValue:this.maxValue,g=Math.abs(s-t),C=this.backDeceleration,M=Math.sqrt(2*C*g);this._slowDown.init(t,void 0,M,C,s)}pullBack(t,s){s*=.001,this.value=this._slowDown.update(s).value,this._slowDown.isMoving||this._state.next()}stop(){this._slowDown.stop()}}const g5={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},pa=Phaser.Utils.Objects.GetValue;class m5 extends he{constructor(t,s){if(super(t,s),this.parent!==this.scene?this.focusMode=pa(s,"focus",!1):this.focusMode=!1,this.setSpeed(pa(s,"speed",.1)),this.setEnable(pa(s,"enable",!0)),!this.focusMode)this.scene.input.on("wheel",this.onSceneScroll,this);else{var t=this.parent;t.setInteractive(pa(s,"inputConfig",void 0)).on("wheel",function(C,M,l,T,e){this.enable&&this.scroll(l)},this)}}destroy(){this.focusMode||this.scene.input.off("wheel",this.onSceneScroll,this)}onSceneScroll(t,s,g,C,M,l){this.enable&&this.scroll(C)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}scroll(t){t*=this.speed,this.emit("scroll",t,this.parent,this)}}const Qt=Phaser.Utils.Objects.GetValue;var x5=function(i,t){var s=i.scene,g=Ao(t),C=new Dt(s,{orientation:g}),M=Qt(t,"child.gameObject",void 0),l=0,T=Qt(t,"slider",void 0),e,d=0,x=Qt(T,"position",0);typeof x=="string"&&(x=y5[x]);var u=x===0,h=Qt(t,"scroller",!0),o,n=Qt(t,"mouseWheelScroller",!1),r;if(M){var f=Qt(t,"space.child",0);if(i.childMargin={},typeof f!="number"){var a=f;g===0?(l={left:Qt(a,"left",0),right:Qt(a,"right",0)},i.childMargin.top=Qt(a,"top",0),i.childMargin.bottom=Qt(a,"bottom",0)):(l={top:Qt(a,"top",0),bottom:Qt(a,"bottom",0)},i.childMargin.top=Qt(a,"left",0),i.childMargin.bottom=Qt(a,"right",0))}else T&&(g===0?l=u?{right:f}:{left:f}:l=u?{bottom:f}:{top:f}),i.childMargin.top=0,i.childMargin.bottom=0;T?(T===!0&&(T={}),T.orientation=C.orientation===0?1:0,e=new h5(s,T),d=Qt(t,"space.slider",0),i.hideUnscrollableSlider=Qt(T,"hideUnscrollableSlider",!1),i.adaptThumbSizeMode=Qt(T,"adaptThumbSize",!1),i.minThumbSize=Qt(T,"minThumbSize",void 0)):(i.adaptThumbSizeMode=!1,i.minThumbSize=void 0),h&&(h===!0&&(h={}),h.orientation=g,o=new p5(M,h)),n&&(r=new m5(M,n)),e&&!u&&C.add(e,{proportion:0,align:"center",padding:d,expand:!0});var c=Qt(t,"child.proportion",1),p=Qt(t,"child.expand",!0);C.add(M,{proportion:c,align:"center",padding:l,expand:p}),e&&u&&C.add(e,{proportion:0,align:"center",padding:d,expand:!0})}return e&&e.on("valuechange",function(v){i.t=v,i.emit("scroll",i)}),o&&o.on("valuechange",function(v){i.childOY=v,i.emit("scroll",i)}),r&&r.on("scroll",function(v){i.addChildOY(-v,!0)}),i.addChildrenMap("child",M),i.addChildrenMap("slider",e),i.addChildrenMap("scroller",o),i.addChildrenMap("mouseWheelScroller",r),C},y5={right:0,left:1,bottom:0,top:1},T5=function(){var i=this.topChildOY,t=this.bottomChildOY,s=this.childrenMap.scroller,g=this.childrenMap.slider;return s&&s.setBounds(t,i),g&&g.setEnable(t!==i),this.updateController(),g&&(this.hideUnscrollableSlider&&this.setChildVisible(g,this.isOverflow),this.adaptThumbSizeMode&&C5.call(this)),this},C5=function(){var i=Math.min(this.childVisibleHeight/this.childHeight,1),t=this.childrenMap.slider,s=t.childrenMap.track,g=t.childrenMap.thumb,C=this.minThumbSize;if(this.scrollMode===0){var M=s.displayHeight*i;C!==void 0&&M<C&&(M=C),ai(g,void 0,M)}else{var l=s.displayWidth*i;C!==void 0&&l<C&&(l=C),ai(g,l,void 0)}S5.call(this)},S5=function(){var i=this.childrenMap.slider,t=i.minWidth,s=i.minHeight;i.minWidth=i.width,i.minHeight=i.height,i.layout(),i.minWidth=t,i.minHeight=s},P5=function(){var i=this.childrenMap.scroller,t=this.childrenMap.slider;i&&i.setValue(this.childOY),t&&t.setValue(this.t)};const pi=Phaser.Utils.Objects.GetValue,nv=Phaser.Math.Clamp;class Oo extends Dt{constructor(t,s){s===void 0&&(s={});var g=Ao(s);s.orientation=g===0?1:0,super(t,s),this.type=pi(s,"type","rexScrollable");var C=pi(s,"background",void 0),M=x5(this,s),l=pi(s,"header",void 0),T=pi(s,"footer",void 0);if(C&&this.addBackground(C),l){var e=pi(s,"align.header","center"),d=pi(s,"space.header",0),x;g===0?x={bottom:d}:x={right:d};var u=pi(s,"expand.header",!0);this.add(l,{proportion:0,align:e,padding:x,expand:u})}if(M&&this.add(M,{proportion:1,align:"center",padding:0,expand:!0}),T){var e=pi(s,"align.footer","center"),h=pi(s,"space.footer",0),x;g===0?x={top:h}:x={left:h};var u=pi(s,"expand.footer",!0);this.add(T,{proportion:0,align:e,padding:x,expand:u})}this.addChildrenMap("background",C),this.addChildrenMap("header",l),this.addChildrenMap("footer",T),this.runLayoutFlag=!1}runLayout(t,s,g){return this.ignoreLayout?this:(super.runLayout(t,s,g),this.resizeController(),this.runLayoutFlag||(this.runLayoutFlag=!0,this.setT(0)),this)}set t(t){var s=this.childMargin;if(s.top!==0||s.bottom!==0){var g=this.childrenMap.child,C=g.topChildOY-g.bottomChildOY,M=C+s.top+s.bottom,l=M*t-s.top;t=l/C}this.childrenMap.child.t=t,this.updateController()}get t(){var t=this.childrenMap.child.t,s=this.childMargin;if(s.top!==0||s.bottom!==0){var g=this.childrenMap.child,C=g.topChildOY-g.bottomChildOY,M=C+s.top+s.bottom,l=C*t+s.top;t=l/M}return t}set childOY(t){this.childrenMap.child.childOY=t,this.updateController()}get childOY(){return this.childrenMap.child.childOY}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get childVisibleHeight(){return this.childrenMap.child.childVisibleHeight}get childHeight(){return this.childrenMap.child.childHeight}get isOverflow(){var t=this.childrenMap.child;return t.topChildOY!==t.bottomChildOY}get scrollMode(){return this.orientation===0?1:0}setChildOY(t,s){return s===void 0&&(s=!1),s&&(t=nv(t,this.bottomChildOY,this.topChildOY)),this.childOY=t,this}addChildOY(t,s){return this.setChildOY(this.childOY+t,s),this}setT(t,s){return s===void 0&&(s=!1),s&&(t=nv(t,0,1)),this.t=t,this}addT(t,s){return this.setT(this.t+t,s),this}scrollToTop(){return this.t=0,this}scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this}get sliderEnable(){var t=this.childrenMap.slider;return t?t.enable:!1}set sliderEnable(t){var s=this.childrenMap.slider;s&&s.setEnable(t)}setSliderEnable(t){return t===void 0&&(t=!0),this.sliderEnable=t,this}get scrollerEnable(){var t=this.childrenMap.scroller;return t?t.enable:!1}set scrollerEnable(t){var s=this.childrenMap.scroller;s&&s.setEnable(t)}setScrollerEnable(t){return t===void 0&&(t=!0),this.scrollerEnable=t,this}get mouseWheelScrollerEnable(){var t=this.childrenMap.mouseWheelScroller;return t?t.enable:!1}set mouseWheelScrollerEnable(t){var s=this.childrenMap.mouseWheelScrollerEnable;s&&s.setEnable(t)}setMouseWheelScrollerEnable(t){return t===void 0&&(t=!0),this.mouseWheelScrollerEnable=t,this}setDropZoneEnable(t){t===void 0&&(t=!0);var s=this.childrenMap.child;return s.setInteractive(),s.input.dropZone=t,this}}var E5={resizeController:T5,updateController:P5};Object.assign(Oo.prototype,E5);const Re=0,Be=1,Ge=2;var In=function(i){var t;return c0(i)?t=Ge:ju(i)?t=Re:t=Be,t},sd=function(i,t,s){var g=In(i);switch(g){case Re:s=i.getWrappedText(t);break;case Be:s=i.getPenManager(t,s);break;case Ge:i.maxWidth>0?s=i.setText(t).getTextBounds().wrappedText.split(`
`):s=t.split(`
`);break}return s},M5=function(i){return i!==void 0&&(this.text=i),this.lines=sd(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},T0=function(i){return(i-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},C0=function(i){return i*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},w5=function(i){var t=i+this.visibleLinesCount+1,s;switch(this.textObjectType){case Re:s=this.lines.slice(i,t).join(`
`);break;case Be:var g=this.lines.getLineStartIndex(i),C=this.lines.getLineEndIndex(t-1);s=this.lines.getSliceTagText(g,C,!0);break;case Ge:s=this.lines.slice(i,t).join(`
`);break}return s},nd=function(i,t){var s=In(i);switch(s){case Re:var M=i.style,g=M.wordWrapWidth,C=M.wordWrapCallback;M.wordWrapWidth=0,M.wordWrapCallback=void 0,i.setText(t),M.wordWrapWidth=g,M.wordWrapCallback=C;break;case Be:var M=i.style,l=M.wrapMode;M.wrapMode=0,i.setText(t),M.wrapMode=l;break;case Ge:var T=i._maxWidth;i._maxWidth=0,i.setText(t),i._maxWidth=T;break}},S0=function(){var i=this.textObject.rexSizer;this.textObject.y+=i.offsetY-i.preOffsetY,i.preOffsetY=i.offsetY,this.resetChildPositionState(this.textObject),this.textCropEnable&&R5.call(this)},R5=function(){if(this.textObject.setCrop){var i=this.textObject.rexSizer.offsetY,t,s;i<=0?(t=-i,s=this.height):(t=0,s=this.height-i),this.textObject.setCrop(0,t,this.width,s)}},A5=function(){var i=Math.max(Math.floor(T0.call(this,-this.textOY)),0),t=C0.call(this,i)+this.textOY,s=w5.call(this,i);return nd(this.textObject,s),this.textObject.rexSizer.offsetY=t,S0.call(this),this},O5=function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,wr.call(this),this},b5=function(i,t,s){if(s+=this.textLineHeight+this.textLineSpacing,!(this.textObjectWidth===t&&this._textObjectRealHeight===s)){switch(this.textObjectWidth=t,this._textObjectRealHeight=s,this.textObjectType){case Re:case Be:i.setFixedSize(t,s);var g=i.style,C=Math.max(t,0);this.textObjectType===Re?g.wordWrapWidth=C:(g.wrapMode===0&&(g.wrapMode=1),g.wrapWidth=C);break;case Ge:i.setMaxWidth(t);break}this.setText()}},F5=function(){var i,t,s,g=this.left,C=this.top,M,l,T,e;i=this.textObject,i.rexSizer.hidden||(t=i.rexSizer,s=t.padding,M=g+s.left,l=C+s.top,T=this.width-s.left-s.right,e=this.height-s.top-s.bottom,b5.call(this,i,T,e),Sr(i,M,l,T,e,t.align),t.preOffsetY=0,S0.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))};const L5={setText:M5,updateTextObject:A5,preLayout:O5,layoutChildren:F5},rv=Phaser.Utils.Objects.IsPlainObject,Fe=Phaser.Utils.Objects.GetValue,D5=Phaser.Display.Align.TOP_LEFT;class P0 extends zs{constructor(t,s,g,C,M,l){rv(s)?(l=s,s=Fe(l,"x",0),g=Fe(l,"y",0),C=Fe(l,"width",void 0),M=Fe(l,"height",void 0)):rv(C)&&(l=C,C=Fe(l,"width",void 0),M=Fe(l,"height",void 0)),super(t,s,g,C,M,l),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this._textObjectRealHeight=0,this.lines=void 0,this.text=Fe(l,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(Fe(l,"clamplTextOY",!0)),this.alwaysScrollable=Fe(l,"alwaysScrollable",!1);var T=Fe(l,"background",void 0),e=Fe(l,"text",void 0);e===void 0&&(e=I5(t)),this.textCropEnable=Fe(l,"textCrop",!!e.setCrop);var d=Fe(l,"textMask",!this.textCropEnable);T&&this.addBackground(T),this.add(e),this.sizerChildren=[e];var x=this.getSizerConfig(e);x.align=D5,x.padding=Ln(0),x.expand=!0,this.textObject=e,this.textObjectType=In(e),x.preOffsetY=0,x.offsetY=0,d&&(this.textMask=oi.call(this,this.textObject,this)),this.addChildrenMap("background",T),this.addChildrenMap("text",e)}destroy(t){if(!(!this.scene||this.ignoreDestroy)){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case Re:this.lines.length=0;break;case Be:this.lines.destroy();break;case Ge:this.lines.length=0;break}this.lines=void 0}super.destroy(t)}}setClampMode(t){return t===void 0&&(t=!0),this.clampTextOY=t,this}get textLineHeight(){if(this._textLineHeight===void 0){var t;switch(this.textObjectType){case Re:case Be:var s=this.textObject.style;t=s.metrics.fontSize+s.strokeThickness;break;case Ge:var g=this.textObject.fontSize/this.textObject.fontData.size;t=this.textObject.fontData.lineHeight*g;break}this._textLineHeight=t}return this._textLineHeight}get textLineSpacing(){if(this._textLineSpacing===void 0){var t;switch(this.textObjectType){case Re:case Be:t=this.textObject.lineSpacing;break;case Ge:t=0;break}this._textLineSpacing=t}return this._textLineSpacing}get visibleLinesCount(){return this._visibleLinesCount===void 0&&(this._visibleLinesCount=Math.floor(T0.call(this,this._textObjectRealHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return this._textHeight===void 0&&(this._textHeight=C0.call(this,this.linesCount)),this._textHeight}get textObjectHeight(){return this._textObjectRealHeight-(this.textLineHeight+this.textLineSpacing)}get textVisibleHeight(){if(this._textVisibleHeight===void 0){var t=this.textHeight-this.textObjectHeight;!this.alwaysScrollable&&t<0&&(t=0),this._textVisibleHeight=t}return this._textVisibleHeight}textOYExceedTop(t){return t===void 0&&(t=this.textOY),t>this.topTextOY}textOYExeceedBottom(t){return t===void 0&&(t=this.textOY),t<this.bottomTextOY}get textOY(){return this._textOY}set textOY(t){var s=this.topTextOY,g=this.bottomTextOY,C=this.textOYExceedTop(t),M=this.textOYExeceedBottom(t);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?t=0:C?t=s:M&&(t=g)),this._textOY!==t&&(this._textOY=t,this.updateTextObject()),C&&(this.execeedTopState||this.emit("execeedtop",this,t,s)),this.execeedTopState=C,M&&(this.execeedBottomState||this.emit("execeedbottom",this,t,g)),this.execeedBottomState=M}setTextOY(t){return this.textOY=t,this}set t(t){this.textOY=-this.textVisibleHeight*t}get t(){var t=this.textVisibleHeight;return t===0?0:this.textOY/-t}setTextOYByPercentage(t){return this.t=t,this}}var I5=function(i){return i.add.text(0,0,"")};Object.assign(P0.prototype,L5);var B5=function(i){Object.defineProperty(i,"childOY",{configurable:!0,get:function(){return i.textOY},set:function(t){i.textOY=t}}),Object.defineProperty(i,"topChildOY",{get:function(){return i.topTextOY}}),Object.defineProperty(i,"bottomChildOY",{get:function(){return i.bottomTextOY}}),Object.defineProperty(i,"childVisibleHeight",{get:function(){return i.textObjectHeight}}),Object.defineProperty(i,"childHeight",{get:function(){return i.textHeight}})};const G5={setText(i){var t=this.childrenMap.child;return t.setText(i),this.resizeController(),this},appendText(i){return this.setText(this.text+i),this}};Phaser.Math.Clamp;const N5={scrollToLine(i){return this.setChildOY(-this.lineHeight*i),this},scrollToNextLine(i){i===void 0&&(i=1);var t=this.lineIndex+i;return this.scrollToLine(t),this}},Fi=Phaser.Utils.Objects.GetValue;class br extends Oo{constructor(t,s){s===void 0&&(s={});var g=Fi(s,"text",void 0),C=Fi(s,"textWidth",void 0),M=Fi(s,"textHeight",void 0),l=Fi(s,"textCrop",!!g.setCrop),T=Fi(s,"textMask",!l),e=Fi(s,"content",""),d=new P0(t,{width:C,height:M,text:g,textMask:T,textCrop:l&&!T,content:e,clamplTextOY:Fi(s,"clamplChildOY",!1),alwaysScrollable:Fi(s,"alwaysScrollable",!1)});t.add.existing(d);var x=C===void 0?1:0,u=M===void 0;B5(d),s.scrollMode=0,s.type="rexTextArea",s.child={gameObject:d,proportion:x,expand:u};var h=Fi(s,"space",void 0);h&&(h.child=h.text),super(t,s),this.addChildrenMap("text",g)}get text(){return this.childrenMap.child.text}get lineHeight(){var t=this.childrenMap.child;return t.textLineHeight+t.textLineSpacing}get lineIndex(){return Math.floor(-this.childOY/this.lineHeight)}get linesCount(){return this.childrenMap.child.linesCount}get contentHeight(){return this.childrenMap.child.textHeight}}Object.assign(br.prototype,G5,N5);const ga=Phaser.Utils.Objects.GetValue;var V5=function(i,t,s){t=t?$e(t):{};var g=ga(s,"background",Xe),C=ga(s,"text",f0),M=ga(s,"track",Xe),l=ga(s,"thumb",Xe);g?t.background=g(i,t.background):delete t.background,C?t.text=C(i,t.text):delete t.text;var T=t.slider;T!==!1&&(T===void 0&&(T={}),M?T.track=M(i,T.track):delete T.track,l?T.thumb=l(i,T.thumb):delete T.thumb,t.slider=T);var e=new br(i,t);return i.add.existing(e),e};const k5=Phaser.Utils.Objects.GetValue;var z5=function(i,t,s){var g=k5(t,"$type");g===void 0&&t&&(t.hasOwnProperty("slider")||t.hasOwnProperty("scroller"))&&(g="textarea");var C;switch(g){case"textarea":C=new V5(i,t,s);break;default:C=new We(i,t,s);break}return i.add.existing(C),C};const U5=Phaser.Utils.Objects.GetValue;class rd extends Ro{constructor(t,s,g){s=s?$e(s):{},g===void 0&&(g={});var C=U5(g,"background",Xe);C?s.background=C(t,s.background):delete s.background,s.title=We(t,s.title,g.title),s.content=z5(t,s.content,g.content),s.content instanceof br&&yi(s,"height")&&!yi(s,"proportion.content")&&ot(s,"proportion.content",1);var M=s.button,l=s.buttonA||M,T=s.buttonB||M,e=s.buttonMode;e===void 0&&(e=l&&T?2:l?1:0);var d=g.button,x=g.buttonA||d,u=g.buttonB||d;switch(e){case 2:s.actions=[We(t,l,x),We(t,T,u)];break;case 1:s.actions=[We(t,l,x)];break;case 0:break;default:s.actions=[];break}var h=s.choice;h&&(s.choices=[]),super(t,s),this.type="rexConfirmDialog",this.buttonMode=e,this.defaultActionConfig=M,this.defaultActionButtonCreator=d,this.defaultChoiceConfig=h,this.defaultChoiceCreator=g.choice;var o=this.childrenMap.actions;this.addChildrenMap("buttonA",o?o[0]:null),this.addChildrenMap("buttonB",o?o[1]:null),V3.call(this)}}Object.assign(rd.prototype,L3);ht.register("confirmDialog",function(i,t){var s=new rd(this.scene,i,t);return this.scene.add.existing(s),s});ot(window,"RexPlugins.UI.ConfirmDialog",rd);const ma=Phaser.Utils.Objects.GetValue;var Fr=function(i,t,s){var g=ma(i,`proportion.${t}`,s.proportion),C=ma(i,`align.${t}`,"center"),M=ma(i,`space.${t}`,void 0);if(typeof M=="number"&&s.paddingKey){var l=M;M={},M[s.paddingKey]=l}var T=ma(i,`expand.${t}`,!0);return{proportion:g,align:C,padding:M,expand:T}},bo=function(i){return Fr(i,"header",{proportion:0,paddingKey:"bottom"})},Fo=function(i){return Fr(i,"leftSide",{proportion:0,paddingKey:"right"})},Lo=function(i){return Fr(i,"content",{proportion:1})},Do=function(i){return Fr(i,"rightSide",{proportion:0,paddingKey:"left"})},Io=function(i){return Fr(i,"footer",{proportion:0,paddingKey:"top"})},Bi=function(i){return{proportion:1,align:"center",padding:0,expand:!0}},Gi=function(i,t){var s=new Dt(i,{orientation:t});return i.add.existing(s),s},Y5=function(i){var t=this.scene,s=i.header;s&&this.add(s,bo(i));var g=Gi(t,0);this.add(g,Bi());var C=i.leftSide;C&&g.add(C,Fo(i));var M=i.content;M&&g.add(M,Lo(i));var l=i.rightSide;l&&g.add(l,Do(i));var T=i.footer;T&&this.add(T,Io(i))},X5=function(i){var t=this.scene,s=i.header;s&&this.add(s,bo(i));var g=Gi(t,0);this.add(g,Bi());var C=i.leftSide;C&&g.add(C,Fo(i));var M=Gi(t,1);g.add(M,Bi());var l=Gi(t,0);M.add(l,Bi());var T=i.content;T&&l.add(T,Lo(i));var e=i.rightSide;e&&l.add(e,Do(i));var d=i.footer;d&&M.add(d,Io(i))},W5=function(i){var t=this.scene,s=i.header;s&&this.add(s,bo(i));var g=Gi(t,0);this.add(g,Bi());var C=Gi(t,1);g.add(C,Bi());var M=Gi(t,0);C.add(M,Bi());var l=i.leftSide;l&&M.add(l,Fo(i));var T=i.content;T&&M.add(T,Lo(i));var e=i.footer;e&&C.add(e,Io(i));var d=i.rightSide;d&&g.add(d,Do(i))},H5=function(i){var t=this.scene,s=i.header;s&&this.add(s,bo(i));var g=Gi(t,0);this.add(g,Bi());var C=i.leftSide;C&&g.add(C,Fo(i));var M=Gi(t,1);g.add(M,Bi());var l=i.content;l&&M.add(l,Lo(i));var T=i.footer;T&&M.add(T,Io(i));var e=i.rightSide;e&&g.add(e,Do(i))};const av=Phaser.Utils.Objects.GetValue,ov=[Y5,X5,W5,H5];var $5=function(i){this.clear(!0);var t=av(i,"background",void 0);t&&this.addBackground(t);var s=av(i,"layoutMode",0);typeof s=="string"&&(s=K5[s.toUpperCase()]);var g=ov[s]||ov[0];g.call(this,i),this.addChildrenMap("background",i.background),this.addChildrenMap("header",i.header),this.addChildrenMap("leftSide",i.leftSide),this.addChildrenMap("content",i.content),this.addChildrenMap("rightSide",i.rightSide),this.addChildrenMap("footer",i.footer)};const K5={FFF:0,LFF:1,FFR:2,LFR:3};class ad extends Dt{constructor(t,s){s===void 0&&(s={}),s.orientation=1,super(t,s),this.type="rexHolyGrail",this.build(s)}}var Z5={build:$5};Object.assign(ad.prototype,Z5);ht.register("holyGrail",function(i){var t=new ad(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.HolyGrail",ad);const j5={getButtonsSizer(i){return this.childrenMap[`${i}ButtonsSizer`]},getButton(i,t){var s=this.getButtonsSizer(i);return s?s.getButton(t):void 0},setButtonEnable(i,t,s){return this.getButtonsSizer(i).setButtonEnable(t,s),this},setLeftButtonEnable(i,t){return this.childrenMap.leftButtonsSizer.setButtonEnable(i,t),this},setRightButtonEnable(i,t){return this.childrenMap.rightButtonsSizer.setButtonEnable(i,t),this},setTopButtonEnable(i,t){return this.childrenMap.topButtonsSizer.setButtonEnable(i,t),this},setBottomButtonEnable(i,t){return this.childrenMap.bottomButtonsSizer.setButtonEnable(i,t),this},toggleButtonEnable(i,t){return this.getButtonsSizer(i).toggleButtonEnable(t),this},toggleLeftButtonEnable(i){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(i),this},toggleRightButtonEnable(i){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(i),this},toggleTopButtonEnable(i){return this.childrenMap.topButtonsSizer.toggleButtonEnable(i),this},toggleBottomButtonEnable(i){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(i),this},getButtonEnable(i,t){return this.getButtonsSizer(i).getButtonEnable(t)},getLeftButtonEnable(i){return this.childrenMap.leftButtonsSizer.getButtonEnable(i)},getRightButtonEnable(i){return this.childrenMap.rightButtonsSizer.getButtonEnable(i)},getTopButtonEnable(i){return this.childrenMap.topButtonsSizer.getButtonEnable(i)},getBottomButtonEnable(i){return this.childrenMap.bottomButtonsSizer.getButtonEnable(i)},emitButtonClick(i,t){var s=this.getButtonsSizer(i);return s?(s.emitButtonClick(t),this):this},emitLeftButtonClick(i){return this.childrenMap.leftButtonsSizer.emitButtonClick(i),this},emitRightButtonClick(i){return this.childrenMap.rightButtonsSizer.emitButtonClick(i),this},emitTopButtonClick(i){return this.childrenMap.topButtonsSizer.emitButtonClick(i),this},emitBottomButtonClick(i){return this.childrenMap.bottomButtonsSizer.emitButtonClick(i),this},getLeftButton(i){return this.childrenMap.leftButtonsSizer.getButton(i)},getRightButton(i){return this.childrenMap.rightButtonsSizer.getButton(i)},getTopButton(i){return this.childrenMap.topButtonsSizer.getButton(i)},getBottomButton(i){return this.childrenMap.bottomButtonsSizer.getButton(i)},showButton(i,t){return Qi(this.getButton(i,t)),this},showLeftButton(i){return Qi(this.getLeftButton(i)),this},showRightButton(i){return Qi(this.getRightButton(i)),this},showTopButton(i){return Qi(this.getTopButton(i)),this},showBottomButton(i){return Qi(this.getBottomButton(i)),this},hideButton(i,t){return qi(this.getButton(i,t)),this},hideLeftButton(i){return qi(this.getLeftButton(i)),this},hideRightButton(i){return qi(this.getRightButton(i)),this},hideTopButton(i){return qi(this.getTopButton(i)),this},hideBottomButton(i){return qi(this.getBottomButton(i)),this},addButton(i,t){return this.getButtonsSizer(i).addButton(t),this},addLeftButton(i){return this.addButton("left",i),this},addRightButton(i){return this.addButton("right",i),this},addTopButton(i){return this.addButton("top",i),this},removeButton(i,t,s){return this.getButtonsSizer(i).removeButton(t,s),this},removeLeftButton(i,t){return this.removeButton("left",i,t),this},removeRightButton(i,t){return this.removeButton("right",i,t),this},removeTopButton(i,t){return this.removeButton("top",i,t),this},removeBottomButton(i,t){return this.removeButton("bottom",i,t),this},clearButtons(i,t){return this.getButtonsSizer(i).clearButtons(t),this},clearLeftButtons(i){return this.clearButtons("left",i),this},clearRightButtons(i){return this.clearButtons("right",i),this},clearTopButtons(i){return this.clearButtons("top",i),this},clearBottomButtonss(i){return this.clearButtons("bottom",i),this},forEachButton(i,t,s){return this.getButtonsSizer(i).forEachButtton(t,s),this},forEachLeftButton(i,t){return this.childrenMap.leftButtonsSizer.forEachButtton(i,t),this},forEachRightButton(i,t){return this.childrenMap.rightButtonsSizer.forEachButtton(i,t),this},forEachTopButton(i,t){return this.childrenMap.topButtonsSizer.forEachButtton(i,t),this},forEachBottomButton(i,t){return this.childrenMap.bottomButtonsSizer.forEachButtton(i,t),this}},Wt=Phaser.Utils.Objects.GetValue;class od extends ds{constructor(t,s){s===void 0&&(s={}),s.column=3,s.row=3,super(t,s),this.type="rexTabs",this.eventEmitter=Wt(s,"eventEmitter",this);var g=Wt(s,"background",void 0),C=Wt(s,"panel",void 0),M=Wt(s,"leftButtons",void 0),l=Wt(s,"leftButtonsBackground",void 0),T,e=Wt(s,"rightButtons",void 0),d=Wt(s,"rightButtonsBackground",void 0),x,u=Wt(s,"topButtons",void 0),h=Wt(s,"topButtonsBackground",void 0),o,n=Wt(s,"bottomButtons",void 0),r=Wt(s,"bottomButtonsBackground",void 0),f,a=Wt(s,"click",void 0);if(g&&this.addBackground(g),C&&this.add(C,1,1,"center",0,!0),M){var c=Wt(s,"space.leftButtonsOffset",0),p=Wt(s,"space.leftButton",0);T=new de(t,{groupName:"left",background:l,buttons:M,orientation:1,space:{item:p},align:Wt(s,"align.leftButtons",void 0),click:a,eventEmitter:this.eventEmitter});var v={top:c};this.add(T,0,1,"top",v,!1)}if(e){var m=Wt(s,"space.rightButtonsOffset",0),y=Wt(s,"space.rightButton",0);x=new de(t,{groupName:"right",background:d,buttons:e,orientation:1,space:{item:y},align:Wt(s,"align.rightButtons",void 0),click:a,eventEmitter:this.eventEmitter});var v={top:m};this.add(x,2,1,"top",v,!1)}if(u){var P=Wt(s,"space.topButtonsOffset",0),E=Wt(s,"space.topButton",0);o=new de(t,{groupName:"top",background:h,buttons:u,orientation:0,space:{item:E},align:Wt(s,"align.topButtons",void 0),click:a,eventEmitter:this.eventEmitter});var v={left:P};this.add(o,1,0,"left",v,!1)}if(n){var S=Wt(s,"space.bottomButtonsOffset",0),w=Wt(s,"space.bottomButton",0);f=new de(t,{groupName:"bottom",background:r,buttons:n,orientation:0,space:{item:w},align:Wt(s,"align.bottomButtons",void 0),click:a,eventEmitter:this.eventEmitter});var v={left:S};this.add(f,1,2,"left",v,!1)}this.addChildrenMap("background",g),this.addChildrenMap("panel",C),this.addChildrenMap("leftButtons",M),this.addChildrenMap("rightButtons",e),this.addChildrenMap("topButtons",u),this.addChildrenMap("bottomButtons",n),this.addChildrenMap("leftButtonsSizer",T),this.addChildrenMap("rightButtonsSizer",x),this.addChildrenMap("topButtonsSizer",o),this.addChildrenMap("bottomButtonsSizer",f)}}Object.assign(od.prototype,j5);ht.register("tabs",function(i){var t=new od(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.Tabs",od);ht.register("slider",function(i){var t=new Dn(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.Slider",Dn);class E0{constructor(t,s){this.container=null,this._deltaHeight=0,this.setParent(t)}setParent(t){this.parent=t,this.parentContainer=t.getParentContainer()}destroy(t){t===void 0&&(t=!1),t||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(t){return t?(this.container&&this.container.destroy(),this.container=t,this.parentContainer.add(t),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var t=this.container;return this.container=null,this.parentContainer.remove(t),t}else return null}setXY(t,s){return this.container&&this.parentContainer.setChildLocalPosition(this.container,t,s),this}setCellContainerAlign(t){return typeof t=="string"&&(t=Ye[t]),this.cellContainerAlign=t,this}get deltaHeight(){return this._deltaHeight}set deltaHeight(t){t==null&&(t=0);var s=this.parent;this._deltaHeight===0&&t!==0?s.nonZeroDeltaHeightCount++:this._deltaHeight!==0&&t===0&&s.nonZeroDeltaHeightCount--;var g=this._deltaHeight!==t;if(this._deltaHeight=t,g){s.resetTotalRowsHeight();var C=this.scrollMode===0?"cellheightchange":"cellwidthchange";this.parentContainer.emit(C,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(t){this.deltaHeight=t}setDeltaHeight(t){return this.deltaHeight=t,this}setDeltaWidth(t){return this.deltaHeight=t,this}get height(){return this.scrollMode===0?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(t){this.scrollMode!==1&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setHeight(t){return this.height=t,this}get width(){return this.scrollMode===0?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(t){this.scrollMode!==0&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setWidth(t){return this.width=t,this}get scene(){return this.parentContainer.scene}}Object.assign(E0.prototype,Za);const hv=Phaser.Utils.Objects.GetValue,J5=Phaser.Utils.Array.SpliceOne;class Q5{constructor(t,s){this.parent=t,this.cells=[],this.cellPool=new Ci,this.resetFromJSON(s)}resetFromJSON(t){t===void 0&&(t={}),this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight();var s=t.cellHeight;s===void 0&&(s=30);var g=t.cellWidth;return g===void 0&&(g=30),this.setDefaultCellHeight(s),this.setDefaultCellWidth(g),this.initCells(hv(t,"cellsCount",0)),this.setColumnCount(hv(t,"columns",1)),this}destroy(t){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return this.nonZeroDeltaHeightCount===0}setDefaultCellHeight(t){return this.defaultCellHeight=t,this}setDefaultCellWidth(t){return this.defaultCellWidth=t,this}initCells(t){var s=this.cells;s.length=t;for(var g=0;g<t;g++)s[g]=null;return this}insertNewCells(t,s){var g=this.cells;if(t===g.length){var C=t+s;g.legth=C;for(var M=t;M<C;M++)g[M]=null}else{var l=[];l.length=s;for(var M=0;M<s;M++)l[M]=null;this.cells.splice(t,0,...l)}return this.resetTotalRowsHeight(),this}removeCells(t,s){for(var g=t+s,C=t;C<g;C++)this.freeCell(C);return g===this.cells.length?this.cells.length=t:(s===1?J5(this.cells,t):this.cells.splice(t,s),this.buildCellIndex(t)),this.resetTotalRowsHeight(),this}setColumnCount(t){return this.colCount=t,this.resetTotalRowsHeight(),this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(t){return t>=0&&t<this.cells.length}heightToRowIndex(t,s){if(s===void 0&&(s=0),t===0)return 0;if(this.defaultCellHeightMode){var T=t/this.defaultCellHeight;switch(s){case 0:T=Math.floor(T);break;case 1:T=Math.ceil(T);break;default:Number.isInteger(T)?T+=1:T=Math.floor(T);break}return T}for(var g=this.rowCount,C=t,M,l,T=0;;)if(l=this.getRowHeight(T),C-=l,M=T>=0&&T<g,C>0&&M)T+=1;else{if(C===0)return s===2&&(T+=1),T;if(s===1){var e=T;T+=1,M=T>=0&&T<g,M||(T=e)}return T}}widthToColIndex(t,s){if(t===0)return 0;var g=t/this.defaultCellWidth;return s?g=Math.ceil(g):g=Math.floor(g),g}colRowToCellIndex(t,s){return t>=this.colCount?null:s*this.colCount+t}rowIndexToHeight(t,s){if(this.defaultCellHeightMode)return(s-t+1)*this.defaultCellHeight;for(var g,C=0,M=t;M<=s;M++)g=this.getRowHeight(M),C+=g;return C}colIndexToWidth(t,s){return(s-t+1)*this.defaultCellWidth}getRowHeight(t){var s=this.colCount;if(s<=1)return this.getCellHeight(this.colRowToCellIndex(0,t));for(var g=0,C,M=0;M<s;M++)C=this.getCellHeight(this.colRowToCellIndex(M,t)),g<C&&(g=C);return g}getColWidth(t){return this.defaultCellWidth}getCellHeight(t){if(!this.isValidCellIdx(t))return 0;var s;if(this.defaultCellHeightMode)s=this.defaultCellHeight;else{var g=this.getCell(t,!1),C=g?g.deltaHeight:0;s=this.defaultCellHeight+C}return s}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return this._totalRowsHeight===null&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(t){return t%this.colCount}cellIndxeToRowIndex(t){return Math.floor(t/this.colCount)}getCell(t,s){if(!this.isValidCellIdx(t))return null;if(s===void 0&&(s=!0),this.cells[t]===null&&s){var g=this.newCell(t);this.cells[t]=g}return this.cells[t]}newCell(t){var s=this.cellPool.pop();return s===null?s=new E0(this):s.setParent(this),s.index=t,s}buildCellIndex(t){t===void 0&&(t=0);for(var s=this.cells,g,C=t,M=s.length;C<M;C++)g=s[C],g&&(g.index=C);return this}getParentContainer(){return this.parent}freeCell(t){return typeof t=="number"&&(t=this.cells[t]),t?(t.destroy(),this.cellPool.push(t),this):this}}var q5=function(i){var t=this.table,s=this.topTableOY,g=this.bottomTableOY,C=i>this.topTableOY,M=i<this.bottomTableOY;if(this.clampTableOXY){var l=t.rowCount,T=t.heightToRowIndex(this.instHeight,1);l<T?i=0:C?i=s:M&&(i=g)}return this._tableOY!==i&&(this._tableOY=i),C&&(this.execeedTopState||this.emit("execeedtop",this,i,s)),this.execeedTopState=C,M&&(this.execeedBottomState||this.emit("execeedbottom",this,i,g)),this.execeedBottomState=M,this},_5=function(i){var t=this.table,s=this.leftTableOX,g=this.rightTableOX,C=i>this.leftTableOX,M=i<this.rightTableOX;if(this.clampTableOXY){var l=t.colCount,T=t.widthToColIndex(this.instWidth,!0);l<T?i=0:C?i=s:M&&(i=g)}return this._tableOX!==i&&(this._tableOX=i),C&&(this.execeedLeftState||this.emit("execeedleft",this,i,s)),this.execeedLeftState=C,M&&(this.execeedRightState||this.emit("execeedright",this,i,g)),this.execeedRightState=M,this},hd=function(i){return i.hasOwnProperty("geometryMask")?i.geometryMask:i.bitmapMask};const tD=Phaser.Geom.Intersects.RectangleToRectangle,eD=Phaser.Geom.Rectangle.Overlaps;var iD=function(i,t,s){if(t){s===void 0&&(s=i.getAllChildren());for(var g=i.getBounds(),C=hd(t),M,l,T,e=0,d=s.length;e<d;e++)if(M=s[e],!M.hasOwnProperty("isRexContainerLite")&&M!==C&&sD(M))if(M.getBounds)switch(l=M.getBounds(l),T=nD(g,l),T){case 4:rD(i,M);break;case 0:tD(g,l)||eD(g,l)?Jh(i,M,t):aD(i,M);break;default:Jh(i,M,t);break}else Jh(i,M,t)}},sD=function(i){if(!i.displayList)return!1;for(;;){var t=i.rexContainer;if(t)if(t.visible){var s=t.parent;if(s){i=s;continue}else return!0}else return!1;else return i.visible}},nD=function(i,t){var s=0,g=t.top,C=t.bottom,M=t.left,l=t.right;return s+=i.contains(M,g)?1:0,s+=i.contains(M,C)?1:0,s+=i.contains(l,g)?1:0,s+=i.contains(l,C)?1:0,s},rD=function(i,t,s){i.setChildMaskVisible(t,!0),t.clearMask&&t.clearMask()},Jh=function(i,t,s){i.setChildMaskVisible(t,!0),t.setMask&&t.setMask(s)},aD=function(i,t,s){i.setChildMaskVisible(t,!1),t.clearMask&&t.clearMask()};const Qh=Phaser.Utils.Objects.GetValue,oD={update:0,everyTick:1},M0={setupChildrenMask(i){return i===!1?this:(this.setMaskUpdateMode(Qh(i,"updateMode",0)),this.enableChildrenMask(Qh(i,"padding",0)),this.setMaskLayer(Qh(i,"layer",void 0)),this.startMaskUpdate(),this)},destroyChildrenMask(){return this.childrenMask?(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0,this):this},setMaskUpdateMode(i){return typeof i=="string"&&(i=oD[i]),this.maskUpdateMode=i,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(i){var t=oi.call(this,null,this,0,i);return this.childrenMask=t.createGeometryMask(),this},setMaskChildrenFlag(i){return i===void 0&&(i=!0),this.maskChildrenFlag=i,this},setMaskLayer(i){return this.maskLayer=i,this},maskChildren(){return!this.childrenMask||!this.maskChildrenFlag||this.alpha===0||!this.visible?this:(this.privateRenderLayer?this.privateRenderLayer.setMask(this.childrenMask):this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):iD(this,this.childrenMask),this.maskUpdateMode===0&&(this.maskChildrenFlag=!1),this)},layoutChildrenMask(){if(!this.childrenMask)return this;var i=hd(this.childrenMask);return i.setPosition().resize(),this.resetChildPositionState(i),this}};var hD=function(){if(this.cellsCount!==0){var i=this.table;this.startRowIndex=Math.max(i.heightToRowIndex(-this.tableOY,2),0);for(var t=this.startRowIndex,s=Math.max(i.widthToColIndex(-this.tableOX),0),g=s,C=i.colRowToCellIndex(g,t),M=this.bottomBound,l=this.rightBound,T=i.cellsCount-1,e=i.colCount-1,d=this.getCellTLX(g),x=d,u=this.getCellTLY(t);u<M&&C<=T;){if(this.table.isValidCellIdx(C)){var h=i.getCell(C,!0);this.visibleCells.set(h),this.preVisibleCells.contains(h)||this.showCell(h);var o,n;if(this.scrollMode===0?(o=x,n=u):(o=u,n=x),h.cellContainerAlign==null)h.setXY(o,n);else{var r=h.getContainer();Sr(r,o,n,h.width,h.height,h.cellContainerAlign),h.setXY(r.x,r.y)}}x<l&&g<e?(x+=i.getColWidth(g),g+=1):(x=d,u+=i.getRowHeight(t),g=s,t+=1),C=i.colRowToCellIndex(g,t)}}},w0=function(i){var t=null,s=i.getContainer();if(s?(t=s,i.popContainer()):this.cellContainersPool&&(t=this.cellContainersPool.getFirstDead(),t!==null&&t.setActive(!0).setVisible(!0)),this.emit("cellvisible",i,t,this),this.cellContainersPool){var s=i.getContainer();s?t===null?this.cellContainersPool.add(s):t!==s&&(this.cellContainersPool.add(s),this.cellContainersPool.killAndHide(t)):t!==null&&this.cellContainersPool.killAndHide(t)}},lD=function(i){var t=this.scrollMode===0?this.topLeftX:this.topLeftY,s=this.tableOX+this.table.colIndexToWidth(0,i-1)+t;return s},uD=function(i){var t=this.scrollMode===0?this.topLeftY:this.topLeftX,s=this.tableOY+this.table.rowIndexToHeight(0,i-1)+t;return s},dD=function(){var i=this.preVisibleCells,t=this.visibleCells;i.iterate(function(s){t.contains(s)||this.hideCell(s)},this)},R0=function(i){if(this.emit("cellinvisible",i),this.cellContainersPool){var t=i.popContainer();t&&this.cellContainersPool.killAndHide(t)}i.destroyContainer()},fD=function(i){return i===void 0&&(i=!1),i&&(lv.call(this),this.hideCells()),lv.call(this),this.showCells(),this.hideCells(),this.setMaskChildrenFlag(),this},lv=function(){var i=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=i,this.visibleCells.clear()},cD=function(i){var t=this.table.getCell(i,!1);return t&&this.visibleCells.contains(t)},A0=function(i,t){t-=this.y+this.topLeftY,i-=this.x+this.topLeftX;var s=this.tableOY-(this.scrollMode===0?t:i),g=this.tableOX-(this.scrollMode===0?i:t),C=this.table,M=C.heightToRowIndex(-s,0),l=C.widthToColIndex(-g),T=C.colRowToCellIndex(l,M);return T===null||!this.isCellVisible(T)?null:T},vD=function(i,t){var s=A0.call(this,i,t);if(s!==null)return this.getCellContainer(s)},pD=function(i,t){return this.visibleCells.each(i,t),this},gD=function(i,t){return this.visibleCells.iterate(i,t),this},mD=function(i,t){return this.table.cells.slice().forEach(i,t),this},xD=function(i,t){return this.table.cells.forEach(i,t),this},yD=function(i){var t=this.cellsCount;return t===i?this:(t>i?this.removeCells(i,t-i):this.insertNewCells(t,i-t),this)};const TD=Phaser.Math.Clamp;var CD=function(i,t){return typeof i=="object"&&(i=i.index),t===void 0&&(t=1),t<=0?this:(i=TD(i,0,this.cellsCount),this.table.insertNewCells(i,t),this)},SD=function(i,t){if(typeof i=="object"&&(i=i.index),t===void 0&&(t=1),i<0&&(t+=i,i=0),t<=0)return this;if(i>this.cellsCount)return this;for(var s,g=i,C=i+t;g<C;g++)s=this.getCell(g,!1),s&&(this.visibleCells.contains(s)&&(R0.call(this,s),this.visibleCells.delete(s)),this.preVisibleCells.delete(s));return this.table.removeCells(i,t),this},PD=function(i){return this.table.colCount===i?this:(this.table.setColumnCount(i),this)},ED=function(i,t){return this.setCellsCount(i*t),this.table.setColumnCount(i),this},MD=function(i){var t=this.table.getCell(i,!1);return!t||!t.container?this:(w0.call(this,t),this)},O0={setTableOY:q5,setTableOX:_5,showCells:hD,showCell:w0,getCellTLX:lD,getCellTLY:uD,hideCells:dD,hideCell:R0,updateTable:fD,isCellVisible:cD,pointToCellIndex:A0,pointToCellContainer:vD,eachVisibleCell:pD,iterateVisibleCell:gD,eachCell:mD,iterateCell:xD,setCellsCount:yD,insertNewCells:CD,removeCells:SD,setColumnCount:PD,setGridSize:ED,updateVisibleCell:MD};Object.assign(O0,M0);const wD=Phaser.GameObjects.Group,uv=Phaser.Structs.Set,gi=Phaser.Utils.Objects.GetValue;let b0=class extends Ne{constructor(t,s,g,C,M,l){l===void 0&&(l={}),super(t,s,g,C,M),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new uv,this.preVisibleCells=new uv,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1;var T=gi(l,"reuseCellContainer",!1);T&&(this.cellContainersPool=new wD(t));var e=gi(l,"cellVisibleCallback",null);if(e!==null){var d=gi(l,"cellVisibleCallbackScope",void 0);this.on("cellvisible",e,d)}if(e=gi(l,"cellInvisibleCallback",null),e!==null){var d=gi(l,"cellInvisibleCallbackScope",void 0);this.on("cellinvisible",e,d)}gi(l,"enableLayer",!1)&&this.enableLayer(),this.setupChildrenMask(gi(l,"mask",void 0)),this.setScrollMode(gi(l,"scrollMode",0)),this.setClampMode(gi(l,"clamplTableOXY",!0));var x,u,h,o=this.scrollMode===0;if(o?(x=l.cellWidth,u=l.cellHeight,h=l.columns):(x=l.cellHeight,u=l.cellWidth,h=gi(l,"rows",l.columns)),h||(h=1),this.expandCellSize=x===void 0,this.expandCellSize){var C=o?this.width:this.height;x=C/h}l.cellWidth=x,l.cellHeight=u,l.columns=h,this.table=new Q5(this,l),this.updateTable()}destroy(t){!this.scene||this.ignoreDestroy||(this.destroyChildrenMask(),this.table.destroy(t),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=RD[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampTableOXY=t,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(t){this.setTableOY(t).updateTable()}set tableOX(t){this.setTableOX(t).updateTable()}setTableOXY(t,s){return this.setTableOY(s).setTableOX(t),this}addTableOY(t){return this.setTableOY(this.tableOY+t),this}addTableOX(t){return this.setTableOX(this.tableOX+t),this}addTableOXY(t,s){return this.addTableOY(s).addTableOX(t),this}setTableOYByPercentage(t){return this.setTableOY(-this.tableVisibleHeight*t),this}getTableOYPercentage(){var t=this.tableVisibleHeight;return t===0?0:this.tableOY/-t}set t(t){this.setTableOYByPercentage(t).updateTable()}get t(){return this.getTableOYPercentage()}scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this}scrollToRow(t){this.scrollToBottom();var s=this.table.rowIndexToHeight(0,t-1);return this.setTableOY(-s).updateTable(),this}scrollToNextRow(t){return t===void 0&&(t=1),this.scrollToRow(this.startRowIndex+t),this}getCell(t){return this.table.getCell(t,!0)}getCellContainer(t){var s=this.table.getCell(t,!1),g;return s&&(g=s.getContainer()),g}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(t,s){var g;return typeof t=="number"?g=this.table.getCell(t,!0):g=t,g.height=s,this}setCellWidth(t,s){var g;return typeof t=="number"?g=this.table.getCell(t,!0):g=t,g.width=s,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var t=this.tableHeight-this.instHeight;return t<0&&(t=0),t}get tableVisibleWidth(){var t,s=this.tableWidth,g=this.instWidth;return s>g?t=s-g:t=0,t}get bottomLeftY(){return-(this.displayHeight*this.originY)+this.displayHeight}get topRightX(){return-(this.displayWidth*this.originX)+this.displayWidth}get topLeftX(){return-(this.displayWidth*this.originX)}get topLeftY(){return-(this.displayHeight*this.originY)}get bottomBound(){return this.scrollMode===0?this.bottomLeftY:this.topRightX}get rightBound(){return this.scrollMode===0?this.topRightX:this.bottomLeftY}resize(t,s){return this.width===t&&this.height===s?this:(super.resize(t,s),this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount),this.updateTable(!0),this.layoutChildrenMask(),this.maskChildren(),this)}};Object.assign(b0.prototype,O0);const RD={v:0,vertical:0,h:1,horizontal:1};var AD=function(i){Object.defineProperty(i,"childOY",{configurable:!0,get:function(){return i.tableOY},set:function(t){i.tableOY=t}}),Object.defineProperty(i,"topChildOY",{get:function(){return i.topTableOY}}),Object.defineProperty(i,"bottomChildOY",{get:function(){return i.bottomTableOY}}),Object.defineProperty(i,"childVisibleHeight",{get:function(){return i.instHeight}}),Object.defineProperty(i,"childHeight",{get:function(){return i.tableHeight}})},OD=function(i){i.on("cellvisible",function(t,l,g){var C=this.createCellContainerCallback,M=this.createCellContainerCallbackScope;t.item=this.items[t.index],t.items=this.items;var l;M?l=C.call(M,t,l,g):l=C(t,l,g),l&&(t.cellContainerAlign==null&&l.setOrigin&&l.setOrigin(0),l.isRexSizer&&l.layout()),t.item=void 0,t.items=void 0,t.setContainer(l)},this)},Ei=function(i,t,s,g,C,M,l){var T;if(C===void 0?T=g:T=s.pointToCellIndex(g,C),T!=null){var e=s.getCellContainer(T);e&&i.emit(t,e,T,M,l)}},bD=function(i,t){i.on("pointerdown",function(s,g,C,M){Ei(this.eventEmitter,"cell.down",i,s.worldX,s.worldY,s,M)},this).on("pointerup",function(s,g,C,M){Ei(this.eventEmitter,"cell.up",i,s.worldX,s.worldY,s,M)},this)},FD=function(i,t){i.on("pointermove",dv,this).on("pointerover",dv,this).on("pointerout",LD,this)},dv=function(i,t,s,g){var C=this.childrenMap.child,M=C.pointToCellIndex(i.worldX,i.worldY);if(M!==C.input.lastOverCellIndex){var l=C.input.lastOverCellIndex;C.input.lastOverCellIndex=M,Ei(this.eventEmitter,"cell.out",C,l,void 0,i,g),Ei(this.eventEmitter,"cell.over",C,M,void 0,i,g)}},LD=function(i,t){var s=this.childrenMap.child,g=s.input.lastOverCellIndex;s.input.lastOverCellIndex=void 0,Ei(this.eventEmitter,"cell.out",s,g,void 0,i,t)};const DD=Phaser.Utils.Objects.GetValue;var ID=function(i,t){var s=DD(t,"click",void 0);s!==!1&&(s===void 0&&(s={}),s.threshold=10,i._click=new hs(i,s),i._click.on("click",function(g,C,M,l){Ei(this.eventEmitter,"cell.click",C,M.worldX,M.worldY,M,l)},this))};const BD=Phaser.Utils.Objects.GetValue;var GD=function(i,t){var s=BD(t,"tap",void 0);s!==!1&&(i._tap=new po(i,s),i._tap.on("tap",function(g,C,M){var l=`cell.${g.tapsCount}tap`;Ei(this.eventEmitter,l,g.gameObject,g.worldX,g.worldY,M)},this))};const ND=Phaser.Utils.Objects.GetValue;var VD=function(i,t){var s=ND(t,"press",void 0);s!==!1&&(i._press=new go(i,s),i._press.on("pressstart",function(g,C,M){Ei(this.eventEmitter,"cell.pressstart",i,g.worldX,g.worldY,M)},this).on("pressend",function(g,C,M){Ei(this.eventEmitter,"cell.pressend",i,g.worldX,g.worldY,M)},this))};const kD=Phaser.Utils.Objects.GetValue;var zD=function(i,t){var s=kD(t,"swipe",void 0);s!==!1&&(s===void 0&&(s={}),s.dir="4dir",i._swipe=new Or(i,s),i._swipe.on("swipe",function(g,C,M){var l=g.left?"left":g.right?"right":g.up?"up":"down";Ei(this.eventEmitter,`cell.swipe${l}`,i,g.worldX,g.worldY,M)},this))},UD=function(i,t){i.setInteractive(),bD.call(this,i,t),FD.call(this,i,t),ID.call(this,i,t),GD.call(this,i,t),VD.call(this,i,t),zD.call(this,i,t)},YD=function(i){i===void 0?this.items=[]:this.items=i;var t=this.childrenMap.child;return t.setCellsCount(this.items.length),t.updateTable(!0),this.resizeController(),this};const XD={scrollToRow(i){var t=this.childrenMap.child;return t.scrollToRow(i),this},scrollToNextRow(i){var t=this.childrenMap.child;return t.scrollToNextRow(i),this}},mi=Phaser.Utils.Objects.GetValue;class ld extends Oo{constructor(t,s){s===void 0&&(s={});var g=Ao(s),C=mi(s,"table",void 0);C===void 0&&(C={}),C.scrollMode=g,C.clamplTableOXY=mi(s,"clamplChildOY",!1);var M=mi(C,"width",void 0),l=mi(C,"height",void 0),T=new b0(t,0,0,M,l,C);t.add.existing(T);var e,d;g===0?(e=M===void 0?1:0,d=l===void 0):(e=l===void 0?1:0,d=M===void 0),AD(T),T._minWidth=M===void 0?0:void 0,T._minHeight=l===void 0?0:void 0,s.type="rexGridTable",s.child={gameObject:T,proportion:e,expand:d};var x=mi(s,"space",void 0);x&&(x.child=x.table),super(t,s),this.addChildrenMap("table",T),this.addChildrenMap("tableLayer",T.maskLayer),this.eventEmitter=mi(s,"eventEmitter",this);var u=mi(s,"createCellContainerCallback",ge),h=mi(s,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(u,h),OD.call(this,T),this.resizeControllerFlag=!1;var o=g===0?"cellheightchange":"cellwidthchange";T.on(o,function(){this.resizeControllerFlag=!0},this),mi(C,"interactive",!0)&&UD.call(this,T,C),this.setItems(mi(s,"items",[])),t.game.events.on("poststep",this.onPostStep,this)}destroy(t){!this.scene||this.ignoreDestroy||(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(t))}setCreateCellContainerCallback(t,s){return this.createCellContainerCallback=t,this.createCellContainerCallbackScope=s,this}refresh(){return this.setItems(this.items),this}getCell(t){var s=this.childrenMap.child;return s.getCell(t)}getCellContainer(t){var s=this.childrenMap.child;return s.getCellContainer(t)}updateVisibleCell(t){var s=this.childrenMap.child;return s.updateVisibleCell(t)}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}get startRowIndex(){var t=this.childrenMap.child;return t.startRowIndex}}var WD={setItems:YD};Object.assign(ld.prototype,XD,WD);ht.register("gridTable",function(i){var t=new ld(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.GridTable",ld);var ud=function(i,t){return i.sameOrientation?i.orientation=t.orientation:i.orientation=t.orientation===0?1:0,i},HD=function(i,t){i.popUp(ud(i.root.easeIn,i))},$D=function(i,t){i.scaleDown(ud(i.root.easeOut,i))};const KD={setTransitInCallback(i){return i===void 0&&(i=HD),this.transitInCallback=i,this},setTransitOutCallback(i){return i===void 0&&(i=$D),this.transitOutCallback=i,this}};var ZD=function(i,t,s,g,C){var M=yr(i),l=M.time.delayedCall(t,function(){M.sys.events.once("postupdate",function(){s.call(g,C)})});return l};const jD={delayCall(i,t,s){return this.timer=ZD(this,i,t,s),this},removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}};var JD=function(i,t){var g=this.childrenMap.subMenu;if(g&&g.parentButton===i)return this;this.collapseSubMenu();var s;this.root.toggleOrientation?s=this.orientation===0?1:0:s=this.orientation;var g=new this.constructor(this.scene,{items:t,orientation:s,space:this.space,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:i});return this.pin(g),this.childrenMap.subMenu=g,this.root.emit("expand",g,i,this),this},QD=function(){var i=this.root;i.emit("collapse",this,this.parentButton,i);var t=i.easeOut.duration;return i.transitOutCallback(this,t),this.collapseSubMenu(),this.delayCall(t,this.destroy,this),this},qD=function(){var i=this.childrenMap.subMenu;return i===void 0?this:(this.childrenMap.subMenu=void 0,this.remove(i),i.collapse(),this)},F0={expandSubMenu:JD,collapse:QD,collapseSubMenu:qD};Object.assign(F0,KD,jD);var _D=function(i,t,s,g){var C;return s&&(t.scene=i,g?C=s.call(g,t):C=s(t),t.scene=void 0),C},tI=function(i,t,s,g){var C,M=[],l;if(t&&s)for(var T=0,e=t.length;T<e;T++)C=t[T],C.scene=i,g?l=s.call(g,C,T,t):l=s(C,T,t),C.scene=void 0,M.push(l);return M},eI=function(i){i.on(i.root.expandEventName,function(t,s){if(!this._isPassedEvent){var g=this.root.childrenKey,C=this.items[s][g];C&&this.expandSubMenu(t,C)}},i).on("button.click",function(t,s,g,C){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",t,s,g,C),this.root._isPassedEvent=!1)},i).on("button.over",function(t,s,g,C){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",t,s,g,C),this.root._isPassedEvent=!1)},i).on("button.out",function(t,s,g,C){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",t,s,g,C),this.root._isPassedEvent=!1)},i)},fv=function(i,t){return typeof t=="number"&&(t={duration:t}),t.hasOwnProperty("orientation")&&t.orientation!==void 0?t.sameOrientation=Po(t.orientation)===i.orientation:t.sameOrientation=!0,t.destroy=!1,t},iI=function(){var i=this.root,t=i.easeIn.duration;i.transitInCallback(this,t),this!==this.root&&this.delayCall(t,function(){this.root.emit("popup.complete",this)},this)};const Te=Phaser.Utils.Objects.GetValue;class dd extends de{constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("orientation")||(s.orientation=1);var g=s._rootMenu,C=s._parentMenu,M=s._parentButton,l=Te(s,"popup",!0),T=Te(s,"items",void 0),e=Te(s,"createBackgroundCallback",void 0),d=Te(s,"createBackgroundCallbackScope",void 0);s.background=_D(t,T,e,d);var x=Te(s,"createButtonCallback",void 0),u=Te(s,"createButtonCallbackScope",void 0);if(s.buttons=tI(t,T,x,u),super(t,s),this.type="rexMenu",this.items=T,this.root=g===void 0?this:g,this.isRoot=this.root===this,this.parentMenu=C,this.parentButton=M,this.timer=void 0,this.isRoot){this.isPopUpMode=l;var h=s.bounds;h===void 0&&(h=bn(t)),this.bounds=h,this.subMenuSide=[this.y<h.centerY?Il:Fa,this.x<h.centerX?Dl:ba];var o=Te(s,"subMenuSide",void 0);o!==void 0&&(typeof o=="string"&&(o=sI[o]),this.subMenuSide[this.orientation]=o),this.toggleOrientation=Te(s,"toggleOrientation",!1),this.expandEventName=Te(s,"expandEvent","button.click"),this.easeIn=fv(this,Te(s,"easeIn",0)),this.easeOut=fv(this,Te(s,"easeOut",0)),this.setTransitInCallback(Te(s,"transitIn")),this.setTransitOutCallback(Te(s,"transitOut")),this.createBackgroundCallback=e,this.createBackgroundCallbackScope=d,this.createButtonCallback=x,this.createButtonCallbackScope=u,this.childrenKey=Te(s,"childrenKey","children"),this._isPassedEvent=!1,this.pointerDownOutsideCollapsing=Te(s,"pointerDownOutsideCollapsing",!0),this.pointerDownOutsideCollapsing&&t.input.on("pointerdown",this.onPointerDownOutside,this)}var n=0,r=0;if(!this.root.easeIn.sameOrientation){var f=ud(this.root.easeIn,this).orientation,a=C?C.orientation:this.orientation,o=this.root.subMenuSide[a];f===0&&o===ba&&(n=1),f===1&&o===Fa&&(r=1)}if(l&&this.setOrigin(n,r).layout(),!this.isRoot){this.setScale(this.root.scaleX,this.root.scaleY);var o=this.root.subMenuSide[C.orientation];switch(o){case ba:this.alignTop(M.top).alignRight(M.left);break;case Dl:this.alignTop(M.top).alignLeft(M.right);break;case Fa:this.alignLeft(M.left).alignBottom(M.top);break;case Il:this.alignLeft(M.left).alignTop(M.bottom);break}}eI(this),l&&(this.pushIntoBounds(this.root.bounds),iI.call(this))}destroy(t){!this.scene||this.ignoreDestroy||(this.isRoot&&this.pointerDownOutsideCollapsing&&this.scene.input.off("pointerdown",this.onPointerDownOutside,this),super.destroy(t),this.removeDelayCall())}isInTouching(t){return super.isInTouching(t)?!0:this.childrenMap.subMenu?this.childrenMap.subMenu.isInTouching(t):!1}onPointerDownOutside(t){this.isInTouching(t)||(this.isPopUpMode?this.collapse():this.collapseSubMenu())}}const ba=2,Dl=0,Fa=3,Il=1,sI={up:Fa,down:Il,left:ba,right:Dl};Object.assign(dd.prototype,F0);ht.register("menu",function(i){var t=new dd(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.Menu",dd);var nI={setWrapEnable(i){return i===void 0&&(i=!0),this.listWrapEnable=i,this},setCreateButtonCallback(i){return this.listCreateButtonCallback=i,this},setCreateListBackgroundCallback(i){return this.listCreateBackgroundCallback=i,this},setButtonClickCallback(i){return this.listOnButtonClick=i,this},setButtonOverCallback(i){return this.listOnButtonOver=i,this},setButtonOutCallback(i){return this.listOnButtonOut=i,this},setListExpandDirection(i){return typeof i=="string"&&(i=rI[i]),this.listExpandDirection=i,this},setListEaseInDuration(i){return i===void 0&&(i=0),this.listEaseInDuration=i,this},setListEaseOutDuration(i){return i===void 0&&(i=0),this.listEaseOutDuration=i,this},setListTransitInCallback(i){return this.listTransitInCallback=i,this},settListTransitOutCallback(i){return this.listTransitOutCallback=i,this},setListBounds(i){return this.listBounds=i,this},setListWidth(i){return this.listWidth=i,this},setListHeight(i){return this.listHeight=i,this},setListSize(i,t){return this.setListWidth(i).setListHeight(t),this},setListAlignmentMode(i){return this.listAlignMode=i,this},setListAlignmentSide(i){return i===void 0&&(i=""),this.listAlignSide=i,this},setListSpace(i){return i===void 0&&(i={}),this.listSpace=i,this},setListDraggable(i){return i===void 0&&(i=!0),this.listDraggable=i,this}};const rI={down:0,up:1};var aI=function(){var i=this.scene,t,s=this.listCreateBackgroundCallback;s&&(t=s.call(this,i),i.add.existing(t));var g=[],C=this.listCreateButtonCallback;if(C)for(var M=this.options,l=0,T=M.length;l<T;l++){var e=C.call(this,i,M[l],l,M);i.add.existing(e),g.push(e)}var d=this.listWidth;d===void 0&&(this.listAlignMode==="text"?d=this.getElement("text").width:d=this.width);var x=this.listHeight,u;return this.listWrapEnable?u=new Is(i,{width:d,height:x,background:t,buttons:g,space:this.listSpace,draggable:this.listDraggable}):u=new de(i,{width:d,height:x,orientation:"y",background:t,buttons:g,space:this.listSpace,draggable:this.listDraggable}),i.add.existing(u),u},oI=function(i,t,s,g,C){g===void 0&&(g="Linear");var M={};switch(M.mode=0,s){case 0:case"x":M.end={x:0};break;case 1:case"y":M.end={y:0};break;default:M.end=0;break}return M.duration=t,M.ease=g,C===void 0?C=new cr(i,M):C.resetFromJSON(M),C.restart(),C},hI=function(i,t,s,g,C){return yi(i,t)?kt(i,t):s&&yi(i,s)?kt(i,s):g&&yi(i,g)?kt(i,g):C};const cn=Phaser.Utils.Objects.GetValue;var lI=function(i,t){var s=cn(t,"expandDirection",void 0);typeof s=="string"&&(s=uI[s]);var g=hI(t,"alignTarget","alignTargetX"),C=cn(t,"alignTargetY",g),M=cn(t,"alignOffsetX",0),l=cn(t,"alignOffsetY",0),T=cn(t,"alignSide",""),e=T.includes("right"),d=cn(t,"bounds"),x=s===0,u=s===1,h=!x&&!u,o=e?1:0,n=x||h?0:1;i.setOrigin(o,n);var r,f;e?r=g.getTopRight().x:r=g.getTopLeft().x,f=C.getBottomLeft().y,i.setPosition(r+M,f+l);var a=d;a||(a=bn(i.scene)),h&&i.getBottomLeft().y>a.bottom&&(f=C.getTopLeft().y,i.setOrigin(0,1).setPosition(r+M,f+l))};const uI={down:0,up:1},cv=Phaser.Utils.Objects.GetValue;class L0 extends uo{constructor(t,s){s===void 0&&(s={}),s.transitIn==null&&(s.transitIn=function(M,l){Au(M,l,"y","Cubic")}),s.transitOut==null&&(s.transitOut=function(M,l){oI(M,l,"y","Linear")}),s.manualClose=!0,s.clickOutsideClose=!0,s.destroy=!0,super(t,s),lI(t,s),t.isRexSizer&&t.layout();var g=cv(s,"touchOutsideClose",!1),C=cv(s,"anyTouchClose",!1);C&&(g=!1),C?this.once("open",this.anyTouchClose,this):g&&this.once("open",this.touchOutsideClose,this),this.requestOpen()}shutdown(t){this.isShutdown||(this.scene.input.off("pointerup",this.touchCloseCallback,this),super.shutdown(t))}touchOutsideClose(){return this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(t){this.clickOutsideTest&&vr(this.parent,t.worldX,t.worldY)||this.requestClose()}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}var dI=function(){if(this.listPanel)return this;var i=aI.call(this);i.on("button.over",function(g,C,M,l){this.listOnButtonOver&&this.listOnButtonOver.call(this,g,C,M,l),this.emit("button.over",this,i,g,C,M,l)},this).on("button.out",function(g,C,M,l){this.listOnButtonOut&&this.listOnButtonOut.call(this,g,C,M,l),this.emit("button.out",this,i,g,C,M,l)},this);var t;!this.listAlignMode||this.listAlignMode==="label"?t=this:t=this.getElement(this.listAlignMode);var s=new L0(i,{duration:{in:this.listEaseInDuration,out:this.listEaseOutDuration},transitIn:this.listTransitInCallback,transitOut:this.listTransitOutCallback,expandDirection:this.listExpandDirection,alignTargetX:t,alignTargetY:this,alignSide:this.listAlignSide,bounds:this.listBounds,anyTouchClose:!0}).on("open",function(){i.on("button.click",function(g,C,M,l){this.listOnButtonClick&&this.listOnButtonClick.call(this,g,C,M,l),this.emit("button.click",this,i,g,C,M,l)},this),this.emit("list.open",this,i)},this).on("close",function(){this.listPanel=void 0,this.dropDownBehavior=void 0},this);return this.listPanel=i,this.dropDownBehavior=s,this.pin(i),this},fI=function(){return this.dropDownBehavior?(this.dropDownBehavior.requestClose(),this):this},cI=function(){return this.listPanel?this.closeListPanel():this.openListPanel(),this},D0={openListPanel:dI,closeListPanel:fI,toggleListPanel:cI};Object.assign(D0,nI);const Ht=Phaser.Utils.Objects.GetValue;class Lr extends Ys{constructor(t,s){super(t,s),this.type="rexDropDownList",this.timer=void 0,this.setOptions(Ht(s,"options"));var g=Ht(s,"list");this.setWrapEnable(Ht(g,"wrap",!1)),this.setCreateButtonCallback(Ht(g,"createButtonCallback")),this.setCreateListBackgroundCallback(Ht(g,"createBackgroundCallback")),this.setButtonClickCallback(Ht(g,"onButtonClick")),this.setButtonOverCallback(Ht(g,"onButtonOver")),this.setButtonOutCallback(Ht(g,"onButtonOut")),this.setListExpandDirection(Ht(g,"expandDirection")),this.setListEaseInDuration(Ht(g,"easeIn",500)),this.setListEaseOutDuration(Ht(g,"easeOut",100)),this.setListTransitInCallback(Ht(g,"transitIn")),this.settListTransitOutCallback(Ht(g,"transitOut")),this.setListSize(Ht(g,"width"),Ht(g,"height")),this.setListAlignmentMode(Ht(g,"alignParent","text")),this.setListAlignmentSide(Ht(g,"alignSide","")),this.setListBounds(Ht(g,"bounds")),this.setListSpace(Ht(g,"space")),this.setListDraggable(Ht(g,"draggable",!1)),this.setValueChangeCallback(Ht(s,"setValueCallback"),Ht(s,"setValueCallbackScope")),this.setValue(Ht(s,"value")),this.onClick(this.toggleListPanel,this)}destroy(t){!this.scene||this.ignoreDestroy||(this.listPanel&&(this.listPanel.destroy(t),this.listPanel=void 0),super.destroy(t))}setOptions(t){return t===void 0&&(t=[]),this.options=t,this}setValueChangeCallback(t,s){return this.valueChangeCallback=t,this.valueChangeCallbackScope=s,this}setValue(t){return this.value=t,this}get value(){return this._value}set value(t){if(this._value!==t){var s=this._value;this._value=t;var g=this.valueChangeCallback,C=this.valueChangeCallbackScope;g&&(C?g.call(C,this,t,s):g(this,t,s)),this.emit("valuechange",this,t,s)}}emitButtonClick(t){var s=this.options[t];return s?(this.emit("button.click",this,void 0,s,t),this):this}}Object.assign(Lr.prototype,D0);ht.register("dropDownList",function(i){var t=new Lr(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.DropDownList",Lr);var I0=function(i,t,s){t=t?$e(t):{},s===void 0&&(s={});var g=t.label||t.button,C=t.button||t.label;delete t.label,delete t.button;var M=s.label||s.button||s,l=s.button||s.label||s,T=Ju(i,g,M);return T.list=t.list||{},T.list.createButtonCallback=function(e,d){var x=We(e,C,l).resetDisplayContent({text:d.text});return d.hasOwnProperty("value")&&(x.value=d.value),x},T.list.onButtonOver=function(e,d,x,u){e.setHoverState&&e.setHoverState(!0)},T.list.onButtonOut=function(e,d,x,u){e.setHoverState&&e.setHoverState(!1)},T};class B0 extends Lr{constructor(t,s,g){s=I0(t,s,g),super(t,s),this.type="rexSimpleDropDownList"}setOptions(t){t===void 0&&(t=[]);for(var s=0,g=t.length;s<g;s++){var C=t[s];typeof C=="string"&&(t[s]={text:C,value:C})}return super.setOptions(t),this}}ht.register("simpleDropDownList",function(i,t){var s=new B0(this.scene,i,t);return this.scene.add.existing(s),s});ot(window,"RexPlugins.UI.SimpleDropDownList",B0);var vI=function(i){var t=In(i),s,g,C;switch(t){case Re:case Be:s=i.height-i.padding.top-i.padding.bottom,g=i.lineSpacing,C=i.style.metrics.fontSize+i.style.strokeThickness;break;case Ge:s=i.height,g=0;var M=i.fontSize/i.fontData.size;C=i.fontData.lineHeight*M;break}return(s-g)/(C+g)},pI=function(i,t){i===void 0&&(i=this.startLineIndex),t===void 0&&(t=i+this.pageLinesCount);var s;switch(this.textObjectType){case Re:case Ge:s=this.lines.slice(i,t).join(`
`);break;case Be:var g=this.lines.getLineStartIndex(i),C=this.lines.getLineEndIndex(t-1);s=this.lines.getSliceTagText(g,C,!0);break}return s},qh=function(i){return Array.isArray(i)?i=i.join(`
`):typeof i=="number"&&(i=i.toString()),i};const gI={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(s){var t=this.totalLinesCount;this.sections.push(qh(s));var s=this.sections.join(`
`);this.lines=sd(this.parent,s,this.lines);for(var g=this.totalLinesCount-t,C=Math.ceil(g/this.pageLinesCount),M=0;M<C;M++)this.pageStartIndexes.push(t+M*this.pageLinesCount);return this},setText(i,t){t===void 0&&(t=!0),t&&this.resetPageIdx(),this.clearText();for(var s=qh(i).split(this.pageBreak),g=0,C=s.length;g<C;g++)this.appendPage(s[g]);return this},appendText(i){var t=this.content+qh(i);return this.setText(t,!1),this}},mI=Phaser.Math.Clamp,xI={getPage(i){return i===void 0&&(i=this.pageIndex),this.setPageIndex(i).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},resetPageIdx(){return this.pageIndex=-1,this},setPageIndex(i){return i=mI(i,0,this.pageCount-1),this.pageIndex=i,this.startLineIndex=this.pageStartIndexes[i],this.endLineIndex=this.pageStartIndexes[i+1],this}},yI={showPage(i){return this.displayText(this.getPage(i)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},show(){return this.displayText(this.getLines()),this},showNextLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex+1).getLines()),this},showPreviousLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex-1).getLines()),this},displayText(i){nd(this.parent,i)}};var G0={getLines:pI};Object.assign(G0,gI,xI,yI);const nr=Phaser.Utils.Objects.GetValue,TI=Phaser.Math.Clamp;class Bo extends he{constructor(t,s){super(t,{eventEmitter:!1}),this.textObjectType=In(this.parent),this.pageStartIndexes=[],this.lines=sd(this.parent,""),this.sections=[],this.resetFromJSON(s)}resetFromJSON(t){return this.setMaxLines(nr(t,"maxLines",void 0)),this.setPageBreak(nr(t,"pageBreak",`\f
`)),this.setText(nr(t,"text","")),this.setStartLineIndex(nr(t,"start",0)),this.setPageIndex(nr(t,"page",-1)),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(t){if(!this.isShutdown){switch(this.textObjectType){case Re:this.lines.length=0;break;case Be:this.lines.destroy();break;case Ge:this.lines.length=0;break}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(t)}}setMaxLines(t){return this.maxLines=t,this}setPageBreak(t){return this.pageBreak=t,this}get pageCount(){return this.pageStartIndexes.length}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get startLineIndex(){return this._startLineIndex}set startLineIndex(t){t=TI(t,0,this.totalLinesCount-1),this._startLineIndex=t}setStartLineIndex(t){return this.startLineIndex=t,this}get pageLinesCount(){if(this.maxLines!==void 0)return this.maxLines;var t;switch(this.textObjectType){case Re:case Be:var s=this.parent.style.maxLines;s>0?t=s:t=Math.floor(vI(this.parent));break;case Ge:t=this.totalLinesCount;break}return t}get content(){return this.sections.join(this.pageBreak)}}Object.assign(Bo.prototype,G0);var CI=function(i,t){var s=In(i);switch(s){case Re:i.style.syncFont(i.canvas,i.context),t=i.runWordWrap(t);break;case Be:t=i.getText(t,void 0,void 0,!0);break;case Ge:t=i.setText(t).getTextBounds().wrappedText;break}return t};const vn=Phaser.Utils.Objects.GetFastValue,_h=Phaser.Utils.Objects.GetValue;class fd extends he{constructor(t,s){super(t,s),this.timer=null,this.resetFromJSON(s)}resetFromJSON(t){this.setTextWrapEnable(_h(t,"wrap",!1)),this.setTypeMode(_h(t,"typeMode",0)),this.setTypingSpeed(_h(t,"speed",333)),this.setTextCallback=vn(t,"setTextCallback",null),this.setTextCallbackScope=vn(t,"setTextCallbackScope",null),this.setTypingContent(vn(t,"text","")),this.typingIdx=vn(t,"typingIdx",0),this.insertIdx=vn(t,"insertIdx",null);var s=vn(t,"elapsed",null);return s!==null&&this.start(void 0,void 0,this.typingIdx,s),this}shutdown(t){this.isShutdown||(this.freeTimer(),super.shutdown(t))}setTypeMode(t){return typeof t=="string"&&(t=SI[t]),this.typeMode=t,this}setTypeSpeed(t){return this.speed=t,this}setTypingSpeed(t){return this.speed=t,this}setTextWrapEnable(t){return t===void 0&&(t=!0),this.textWrapEnable=t,this}set text(t){var s=vv(t);this.textWrapEnable&&(s=CI(this.parent,s)),this._text=s}get text(){return this._text}get isTyping(){return this.getTimer()!==null}get isLastChar(){return this.typingIdx===this.textLen}start(t,s,g,C){return t!==void 0&&this.setTypingContent(t),s!==void 0&&(this.speed=s),g===void 0&&(g=0),this.typingIdx=g+1,this.speed===0?this.stop(!0):(this.setText(""),this.startTimer(C)),this}appendText(t){var s=this.text.concat(vv(t));return this.isTyping?this.setTypingContent(s):this.start(s,void 0,this.textLen),this}stop(t){var s=this.getTimer();return s&&this.freeTimer(),t&&(this.typingIdx=this.textLen,this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)),this}pause(){var t=this.getTimer();return t&&(t.paused=!0),this}resume(){var t=this.getTimer();return t&&(t.paused=!1),this}setTypingContent(t){return this.text=t,this.textLen=this.getTextLength(this.text),this}onTyping(){var t=this.getTypingString(this.text,this.typingIdx,this.textLen,this.typeMode);this.setText(t),this.emit("type"),this.isLastChar?(this.freeTimer(),this.emit("complete",this,this.parent)):(this.timer.delay=this.speed,this.typingIdx++)}getTypingString(t,s,g,C){var M;if(C===0){var l=0,T=s;this.insertIdx=T,M=this.getSubString(t,l,T)}else if(C===1){var T=g,l=T-s;this.insertIdx=0,M=this.getSubString(t,l,T)}else if(C===2){var e=g/2,l=Math.floor(e-s/2),T=l+s;this.insertIdx=s%2?s:0,M=this.getSubString(t,l,T)}else if(C===3){var d=Math.floor(s/2),x;if(d>0){var T=g,l=T-d;x=this.getSubString(t,l,T)}else x="";var u=s-d,h;if(u>0){var l=0,T=l+u;this.insertIdx=T,h=this.getSubString(t,l,T)}else h="",this.insertIdx=0;M=h+x}return M}startTimer(t){this.timer&&this.freeTimer();var s;return t===void 0?s=0:(this.speed,s=t),this.timer=this.scene.time.addEvent({delay:1e-4,startAt:s,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(t){this.setTextCallback&&(this.setTextCallbackScope?t=this.setTextCallback.call(this.setTextCallbackScope,t,this.isLastChar,this.insertIdx):t=this.setTextCallback(t,this.isLastChar,this.insertIdx)),this.textWrapEnable?nd(this.parent,t):this.parent.setText(t)}getTextLength(t){var s=this.parent,g;return s.getPlainText?g=s.getPlainText(t).length:g=t.length,g}getSubString(t,s,g){var C=this.parent,M;return C.getSubString?M=C.getSubString(t,s,g):M=t.slice(s,g),M}}var vv=function(i){return Array.isArray(i)?i=i.join(`
`):typeof i=="number"&&(i=i.toString()),i};const SI={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3},pv=Phaser.Utils.Objects.GetValue;var PI=function(i,t){t===void 0&&(t="rexTextBox");class s extends i{constructor(C,M){super(C,M),this.type=t;var l=this.childrenMap.text;this.page=new Bo(l,pv(M,"page",void 0)),this.typing=new fd(l,pv(M,"typing",M.type)),this.typing.on("complete",this.onPageEnd,this).on("type",this.onType,this),this.textWidth=l.width,this.textHeight=l.height}start(C,M){return this.page.setText(C),M!==void 0&&this.setTypingSpeed(M),this.emit("start"),this.typeNextPage(),this}typeNextPage(){if(this.isLastPage)this.emit("complete");else{var C=this.page.getNextPage();this.typing.start(C)}return this}pause(){return this.typing.pause(),this}resume(){return this.typing.resume(),this}stop(C){return this.typing.stop(C),this}setTypeSpeed(C){return this.typing.setTypingSpeed(C),this}setTypingSpeed(C){return this.typing.setTypingSpeed(C),this}get isTyping(){return this.typing.isTyping}get isLastPage(){return this.page.isLastPage}get isFirstPage(){return this.page.isFirstPage}get pageCount(){return this.page.pageCount}get pageIndex(){return this.page.pageIndex}onType(){var C=this.childrenMap.text;(this.textWidth!==C.width||this.textHeight!==C.height)&&(this.textWidth=C.width,this.textHeight=C.height,this.getTopmostSizer().layout()),this.emit("type")}onPageEnd(){this.emit("pageend"),this.isLastPage&&this.emit("complete")}}return s};class N0 extends PI(qu){constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("layoutMode")||(s.layoutMode=1),super(t,s)}}ht.register("textBox",function(i){var t=new N0(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.TextBox",N0);const Le=Phaser.Utils.Objects.GetValue;class V0 extends Dt{constructor(t,s){super(t,s),this.type="rexNumberBar";var g=Le(s,"background",void 0),C=Le(s,"icon",void 0),M=Le(s,"iconMask",void 0),l=Le(s,"slider",void 0),T=Le(s,"text",void 0),e=Le(s,"space.icon",0),d=Le(s,"space.slider",0);if(g&&this.addBackground(g),C){var x;this.orientation===0?(l||T)&&(x={right:e}):(l||T)&&(x={bottom:e}),this.add(C,{proportion:0,align:"center",padding:x}),M&&(M=oi.call(this,C,C,1))}var u;if(l){l.orientation=this.orientation,l.eventEmitter=this,l.value=null,l.hasOwnProperty("input")||(l.input=-1),u=new Dn(t,l),t.add.existing(u);var x;this.orientation===0?T&&(x={right:d}):T&&(x={bottom:d});var h;if(this.orientation===0){var o=Le(l,"width",void 0);h=o===void 0?1:0}else{var n=Le(l,"height",void 0);h=n===void 0?1:0}this.add(u,{proportion:h,align:"center",padding:x})}T&&this.add(T),this.addChildrenMap("background",g),this.addChildrenMap("icon",C),this.addChildrenMap("iconMask",M),this.addChildrenMap("slider",u),this.addChildrenMap("text",T);var r=Le(s,"valuechangeCallback",null);if(r!==null){var f=Le(s,"valuechangeCallbackScope",void 0);this.on("valuechange",r,f)}this.setEnable(Le(s,"enable",void 0)),this.setValue(Le(s,"value",0))}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){this.childrenMap.slider&&(this.childrenMap.slider.value=t)}setValue(t,s,g){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,s,g),this}addValue(t,s,g){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,s,g),this}getValue(t,s){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,s):0}easeValueTo(t,s,g){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,s,g),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}get text(){var t=this.childrenMap.text;if(t===void 0)return"";var s;return t.text?s=t.text:s=t.getData("text"),s}set text(t){var s=this.childrenMap.text;s!==void 0&&(s.setText?s.setText(t):s.setData("text",t))}setText(t){return this.text=t,this}}ht.register("numberBar",function(i){var t=new V0(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.NumberBar",V0);ht.register("scrollBar",function(i){var t=new id(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.ScrollBar",id);const tl=Phaser.Utils.Objects.GetValue,gv={leftTop:"left-top",centerTop:"center-top",rightTop:"right-top",leftCenter:"left-center",center:"center",rightCenter:"right-center",leftBottom:"left-bottom",centerBottom:"center-bottom",rightBottom:"right-bottom"};class k0 extends Ze{constructor(t,s){super(t,s),this.type="rexBadge";var g=tl(s,"background",void 0);g&&this.addBackground(g),this.addChildrenMap("background",g);var C=tl(s,"main",void 0);C&&this.add(C,{key:"main",align:"center",expand:!1}),this.addChildrenMap("main",C);for(var M in gv){var l=tl(s,M,void 0);l&&(this.add(l,{key:M,align:gv[M],expand:!1}),this.addChildrenMap(M,l))}}}ht.register("badgeLabel",function(i){var t=new k0(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.BadgeLabel",k0);const EI=Ze.prototype.add;var mv=function(i,t,s,g,C,M,l,T,e){return i.setVisible(!1),EI.call(this,i,t,s,g,C,M,l,T,e),this};const MI={add:mv,addPage:mv};var wI=function(i){return i===void 0?null:this.sizerChildren.hasOwnProperty(i)?this.sizerChildren[i]:null};const xv=Ne.prototype.setChildVisible;var RI=function(i,t){this._previousKey=this._currentKey;var s=this.previousPage;s&&(this.swapMode===0?(xv.call(this,s,!1),this.emit("pageinvisible",s,this._previousKey,this)):s.destroy()),i&&!this.sizerChildren.hasOwnProperty(i)&&this.emit("createpage",i,this),this._currentKey=i;var g=this.currentPage;return g&&(xv.call(this,g,!0),this.emit("pagevisible",g,this._currentKey,this),t===void 0&&(t=this.fadeInDuration),t>0&&g.setAlpha(0).fadeIn(t,1)),this},AI=function(i){return this.sizerChildren.hasOwnProperty(i)},z0={getPage:wI,swapPage:RI,hasPage:AI};Object.assign(z0,MI);const yv=Phaser.Utils.Objects.GetValue;class Go extends Ze{constructor(t,s){super(t,s),this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(yv(s,"swapMode",0)),this.setFadeInDuration(yv(s,"fadeIn",0))}setSwapMode(t){return typeof t=="string"&&(t=OI[t]),this.swapMode=t,this}setFadeInDuration(t){return this.fadeInDuration=t,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(t){this.swapPage(t)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}}Object.assign(Go.prototype,z0);const OI={invisible:0,destroy:1};ht.register("pages",function(i){var t=new Go(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.Pages",Go);const U0=Phaser.Math.Vector3,bI=Phaser.Math.Matrix4;var Tv=new U0,Cv=new U0,Sv=new bI,FI=function(i,t,s,g,C,M,l){t===void 0&&(t=0),s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=0),M===void 0&&(M=0),l===void 0&&(l=0),Tv.set(t,s,g),Cv.set(C,M,l),Sv.fromRotationXYTranslation(Cv,Tv,!0);for(var T=0,e=i.vertices.length;T<e;T++)i.vertices[T].transformMat4(Sv)};const LI=Phaser.GameObjects.Mesh,DI=Phaser.Utils.Objects.IsPlainObject,Ps=Phaser.Utils.Objects.GetValue,II=Phaser.Geom.Mesh.GenerateGridVerts,el=Phaser.Math.RadToDeg,La=Phaser.Math.DegToRad,Y0=45,BI=1+1/Math.sin(La(Y0));let X0=class extends LI{constructor(t,s,g,C,M,l){DI(s)&&(l=s,s=Ps(l,"x",0),g=Ps(l,"y",0),C=Ps(l,"key",null),M=Ps(l,"frame",null)),super(t,s,g,C,M),this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(BI),this.hideCCW=Ps(l,"hideCCW",!0);var T=Ps(l,"gridWidth",32),e=Ps(l,"gridHeight",T);this.resetVerts(T,e)}get originX(){return .5}get originY(){return .5}resetPerspective(){return this.setPerspective(this.width,this.height,Y0),this}resetVerts(t,s){if(t!==void 0&&(this.gridWidth=t),s!==void 0&&(this.gridHeight=s),this.clear(),this.dirtyCache[9]=-1,this.width===0||this.height===0)return this;var g=this.frame.cutWidth,C=this.frame.cutHeight;II({mesh:this,texture:this.texture.key,frame:this.frame.name,width:g/this.height,height:C/this.height,widthSegments:Math.ceil(g/this.gridWidth),heightSegments:Math.ceil(C/this.gridHeight)});var M=this.transformInfo;return M&&this.transformVerts(M.x,M.y,M.z,M.rotateX,M.rotateY,M.rotateZ),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(t){this.modelRotation.x=t}get angleX(){return el(this.rotationX)}set angleX(t){this.rotationX=La(t)}get rotationY(){return this.modelRotation.y}set rotationY(t){this.modelRotation.y=t}get angleY(){return el(this.rotationY)}set angleY(t){this.rotationY=La(t)}get rotationZ(){return this.modelRotation.z}set rotationZ(t){this.modelRotation.z=t}get angleZ(){return el(this.rotationZ)}set angleZ(t){this.rotationZ=La(t)}transformVerts(t,s,g,C,M,l){return t===void 0&&(t=0),s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=0),M===void 0&&(M=0),l===void 0&&(l=0),this.transformInfo||(this.transformInfo={}),this.transformInfo.x=t,this.transformInfo.y=s,this.transformInfo.rotateX=C,this.transformInfo.rotateY=M,this.transformInfo.rotateZ=l,FI(this,t,s,g,C,M,l),this}forceUpdate(){return this.dirtyCache[10]=1,this}get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}};const GI=Phaser.Textures.DynamicTexture;var W0=function(i,t,s){t===void 0&&(t=2),s===void 0&&(s=2);var g=new GI(i.sys.textures,null,t,s);return g};const NI=Phaser.Utils.Objects.IsPlainObject,xa=Phaser.Utils.Objects.GetValue;class H0 extends X0{constructor(t,s,g,C,M,l){NI(s)&&(l=s,s=xa(l,"x",0),g=xa(l,"y",0),C=xa(l,"width",32),M=xa(l,"height",32));var T=W0(t,C,M);super(t,s,g,T,null,l),this.type="rexPerspectiveRenderTexture",this.rt=this.texture}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.rt.destroy(),this.rt=null)}snapshot(t,s){return s===void 0&&(s={}),s.gameObjects=t,s.renderTexture=this.rt,fu(s),(this.width!==this.frame.realWidth||this.height!==this.frame.realHeight)&&this.syncSize(),this}}Phaser.Animations.AnimationState;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;var ni=function(i,t,s,g){if(Array.isArray(i))for(var C=!1,M=0,l=i.length;M<l;M++){var T=i[M];if(!(g&&!T)&&(s?C=t.call(s,T,M,i):C=t(T,M,i),C))return}else{var C=!1;for(var e in i){var T=i[e];if(!(g&&!T)&&(s?C=t.call(s,T,e,i):C=t(T,e,i),C))return}}};const il=Phaser.Math.RadToDeg,sl=Phaser.Math.DegToRad;class VI extends Ne{constructor(t,s,g,C,M,l){super(t,s,g,C,M),this.faces=l,ni(l,function(T){T.setPosition(s,g),this.add(T)},this,!0)}get rotationX(){return 0}set rotationX(t){}get angleX(){return il(this.rotationX)}set angleX(t){this.rotationX=sl(t)}get rotationY(){return 0}set rotationY(t){}get angleY(){return il(this.rotationY)}set angleY(t){this.rotationY=sl(t)}get rotationZ(){return 0}set rotationZ(t){}get angleZ(){return il(this.rotationZ)}set angleZ(t){this.rotationZ=sl(t)}setDebug(t,s){return ni(this.faces,function(g){g.setDebug(t,s)},null,!0),this}panX(t){return ni(this.faces,function(s){s.panX(t)},null,!0),this}panY(t){return ni(this.faces,function(s){s.panY(t)},null,!0),this}panZ(t){return ni(this.faces,function(s){s.panZ(t)},null,!0),this}transformVerts(t,s,g,C,M,l){return ni(this.faces,function(T){T.transformVerts(t,s,g,C,M,l)},null,!0),this}forEachFace(t,s,g){return ni(this.faces,t,s,g),this}}const kI=Phaser.Utils.Objects.IsPlainObject,zI={key:"__WHITE"},UI={image:X0,rendertexture:H0};var Pv=function(i,t){t===void 0&&(t=zI);var s;return kI(t)?(t.hasOwnProperty("type")||(t.hasOwnProperty("key")?t.type="image":t.hasOwnProperty("width")&&(t.type="rendertexture")),s=new UI[t.type](i,t),i.add.existing(s)):s=t,s},YI=function(i,t,s){var g;if(s===void 0){g=[];for(var C,M,l=0,T=t.length;l<T;l++)M=t[l],M?C=Pv(i,M):C=null,g.push(C)}else{g={};for(var C,e,l=0,T=s.length;l<T;l++)e=s[l],t.hasOwnProperty(e)?C=Pv(i,t[e]):C=null,g[e]=C}return g};const XI=Phaser.Math.DegToRad,Ev=XI(180);var WI=function(i,t){var s=t.back;s&&(i.orientation===0?s.transformVerts(0,0,0,0,Ev,0):s.transformVerts(0,0,0,Ev,0,0))};const nl=Phaser.Utils.Objects.GetValue,HI=Phaser.Math.Linear;let $I=class extends Gs{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setEase(nl(t,"ease","Cubic")),this.setFrontToBackDirection(nl(t,"frontToBack",0)),this.setBackToFrontDirection(nl(t,"backToFront",1)),this}setFrontToBackDirection(t){return typeof t=="string"&&(t=Mv[t]),this.endAngleFB=t===0?180:-180,this}setBackToFrontDirection(t){return typeof t=="string"&&(t=Mv[t]),this.endAngleBF=t===0?-180:180,this}start(t,s){if(this.timer.isRunning)return this;this.timer.setDelay(this.delay).setDuration(t);var g=s+1,C=this.parent;return C.face===0?(this.startAngle=0,this.endAngle=this.endAngleFB*g):(this.startAngle=this.endAngleBF,this.endAngle=this.startAngle-this.endAngleBF*g),super.start(),this}flip(t,s){return this.isRunning?this:(t===void 0&&(t=this.duration),s===void 0&&(s=0),this.start(t,s),this.emit("start",this.parent,this),this.parent.currentFaceIndex=(this.parent.currentFaceIndex+s+1)%2,this)}flipRight(t,s){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(0):this.setBackToFrontDirection(0),this.flip(t,s),this}flipLeft(t,s){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(1):this.setBackToFrontDirection(1),this.flip(t,s),this}updateGameObject(t,s){var g=this.easeFn(s.t),C=HI(this.startAngle,this.endAngle,g);t.orientation===0?t.angleY=C:t.angleX=C}};const Mv={right:0,"left-to-right":0,left:1,"right-to-left":1},KI=Phaser.Utils.Objects.IsPlainObject,Es=Phaser.Utils.Objects.GetValue,ZI=["back","front"];class jI extends VI{constructor(t,s,g,C){KI(s)&&(C=s,s=Es(C,"x",0),g=Es(C,"y",0));var M=YI(t,C,ZI),l=M.back,T=M.front,e=Es(C,"width"),d=Es(C,"height");if(e===void 0||d===void 0){if(e===void 0){var x=T?T.width:0,u=l?l.width:0;e=Math.max(x,u)}if(d===void 0){var h=T?T.height:0,o=l?l.height:0;d=Math.max(h,o)}}super(t,s,g,e,d,M),this.type="rexPerspectiveCard",this.frontFaceRotationX=0,this.frontFaceRotationY=0,this.frontFaceRotationZ=0,ni(M,function(r,f){this[`${f}Face`]=r},this);var n=Es(C,"flip",void 0);n!==!1&&(this.flip=new $I(this,n)),this.setOrientation(Es(C,"orientation",0)),WI(this,M),this.setFace(Es(C,"face",0))}get rotationX(){return this.frontFaceRotationX}set rotationX(t){this.frontFaceRotationX!==t&&(this.frontFaceRotationX=t,ni(this.faces,function(s){s.rotationX=t},null,!0))}get rotationY(){return this.frontFaceRotationY}set rotationY(t){this.frontFaceRotationY!==t&&(this.frontFaceRotationY=t,ni(this.faces,function(s){s.rotationY=t},null,!0))}get rotationZ(){return this.frontFaceRotationZ}set rotationZ(t){this.frontFaceRotationZ!==t&&(this.frontFaceRotationZ=t,ni(this.faces,function(s){s.rotationZ=t},null,!0))}setOrientation(t){return typeof t=="string"&&(t=JI[t]),this.orientation=t,this}get face(){return this.currentFaceIndex}set face(t){typeof t=="string"&&(t=QI[t]),this.currentFaceIndex=t;var s=t===1,g=s?180:0;this.orientation===0?this.angleY=g:this.angleX=g}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}}const JI={x:0,horizontal:0,h:0,y:1,vertical:1,v:1},QI={front:0,back:1};Phaser.Utils.Objects.GetValue;Phaser.Math.RadToDeg;Phaser.Math.DegToRad;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Angle.ShortestBetween;Phaser.Math.Wrap;Phaser.Math.Linear;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.DegToRad;Phaser.Math.RadToDeg;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Linear;Phaser.Math.Wrap;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.Wrap;const qI=Phaser.Utils.Objects.GetValue;var _I=function(i,t,s){t.visibleSibling=[],t.isRunning=!1,t.useParentBounds=qI(s,"useParentBounds",!1),t.setPosition(i.x,i.y).setVisible(!1),i.pin(t)},$0=function(i,t){if(!i)return!1;for(var s=t.visibleSibling,g=0,C=s.length;g<C;g++)i.setChildVisible(s[g],!0);return s.length=0,i.setChildVisible(t,!1),t.isRunning=!1,!0},t6=function(i,t){if(!i)return!1;$0(i,t);var s=t.useParentBounds;fu({gameObjects:i.getAllVisibleChildren(),renderTexture:t.rt,x:t.x,y:t.y,width:s?i.displayWidth:void 0,height:s?i.displayHeighth:void 0,originX:s?i.originX:void 0,originY:s?i.originY:void 0}),i.setChildVisible(t,!0);for(var g=t.visibleSibling,C=i.children,M=0,l=C.length;M<l;M++){var T=C[M];T.visible&&T!==t&&(i.setChildVisible(T,!1),g.push(T))}return t.isRunning=!0,!0},K0=function(i){return class extends i{constructor(s,g){var C=s.scene;super(C,0,0,1,1,g),C.add.existing(this),_I(s,this,g)}destroy(s){!this.scene||this.ignoreDestroy||(this.exit(),super.destroy(s))}enter(){var s=t6(this.rexContainer.parent,this);return s&&this.syncSize(),this}exit(){return $0(this.rexContainer.parent,this),this}}};class Z0 extends K0(H0){get perspectiveState(){return this.isRunning}}const e6=Phaser.Utils.Objects.GetValue;var i6=function(i){var t=this.scene;this.setSnapshotPadding(e6(i,"snapshotPadding",0)),i=Ls(i),delete i.width,delete i.height,i.front={width:1,height:1},i.back={width:1,height:1};var s=new jI(t,i);t.add.existing(s);var g=s.flip;if(g){var C=this;g.on("start",function(){C.enterPerspectiveMode()}).on("complete",function(){C.exitPerspectiveMode()})}return s};const s6=["front","back"],n6={enterPerspectiveMode(){return this.isInPerspectiveMode?this:(this.setChildVisible(this.perspectiveCard,!0),this.snapshotFace(0),this.snapshotFace(1),this.setChildVisible(this.childrenMap.front,!1),this.setChildVisible(this.childrenMap.back,!1),this.perspectiveCard.setSize(this.width,this.height),this)},exitPerspectiveMode(){if(!this.isInPerspectiveMode)return this;this.setChildVisible(this.perspectiveCard,!1);var i=this.perspectiveCard.face===0;return this.setChildVisible(this.childrenMap.front,i),this.setChildVisible(this.childrenMap.back,!i),this},setSnapshotPadding(i){return this.snapshotPadding=i,this},snapshotFace(i){typeof i=="number"&&(i=s6[i]);var t=this.perspectiveCard.faces[i],s=this.childrenMap[i];t.rt.clear();var g=s.visible;s.visible=!0;var C=s.isRexContainerLite?s.getAllVisibleChildren():s;return t.snapshot(C,{padding:this.snapshotPadding}),s.visible=g,this}},wv=Phaser.Utils.Objects.GetValue;class cd extends Ze{constructor(t,s){super(t,s),this.type="rexPerspectiveCard";var g=s.back,C=wv(s,"expand.back",!0);this.add(g,{key:"back",expand:C});var M=s.front,l=wv(s,"expand.front",!0);this.add(M,{key:"front",expand:l}),this.perspectiveCard=i6.call(this,s),this.pin(this.perspectiveCard),this.exitPerspectiveMode(!1)}get flip(){return this.perspectiveCard.flip}get face(){return this.perspectiveCard.face}set face(t){if(!(this.flip&&this.flip.isRunning)){this.perspectiveCard.face=t;var s=t===0,g=this.childrenMap.front,C=this.childrenMap.back;this.setChildVisible(g,s),this.setChildVisible(C,!s)}}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}get isInPerspectiveMode(){return this.perspectiveCard.visible}get rotationX(){return this.perspectiveCard.rotationX}set rotationX(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationX=t}get angleX(){return this.perspectiveCard.angleX}set angleX(t){this.enterPerspectiveMode(),this.perspectiveCard.angleX=t}get rotationY(){return this.perspectiveCard.rotationY}set rotationY(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationY=t}get angleY(){return this.perspectiveCard.angleY}set angleY(t){this.enterPerspectiveMode(),this.perspectiveCard.angleY=t}get rotationZ(){return this.perspectiveCard.rotationZ}set rotationZ(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationZ=t}get angleZ(){return this.perspectiveCard.angleZ}set angleZ(t){this.enterPerspectiveMode(),this.perspectiveCard.angleZ=t}panX(t){return this.enterPerspectiveMode(),this.perspectiveCard.panX(t),this}panY(t){return this.enterPerspectiveMode(),this.perspectiveCard.panY(t),this}panZ(t){return this.enterPerspectiveMode(),this.perspectiveCard.panZ(t),this}transformVerts(t,s,g,C,M,l){return this.enterPerspectiveMode(),this.perspectiveCard.transformVerts(t,s,g,C,M,l),this}forEachFace(t,s,g){return this.enterPerspectiveMode(),this.perspectiveCard.forEachFace(t,s,g),this}}Object.assign(cd.prototype,n6);ht.register("perspectiveCard",function(i){var t=new cd(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.PerspectiveCard",cd);var r6=function(i){var t=this.getElement("tabs.buttons");if(!(i>=t.length))return t[i].name},a6=function(i){for(var t=this.getElement("tabs.buttons"),s=0,g=t.length;s<g;s++)if(t[s].name===i)return s};const o6=Phaser.Utils.Objects.IsPlainObject,rl=Phaser.Utils.Objects.GetValue,h6=Phaser.Utils.String.UUID;var l6=function(i,t,s){if(o6(i)){var g=i;i=rl(g,"key"),t=rl(g,"tab"),s=rl(g,"page")}return i||(i=h6()),t.name=i,this.childrenMap.tabs.addButton(t),this.childrenMap.pages.addPage(s,{key:i}),this},u6=function(i,t){var s;if(typeof i=="number"?s=i:s=this.getPageIndex(i),s!=null){var g;t!==void 0&&(g=this.childrenMap.pages.fadeInDuration,this.childrenMap.pages.fadeInDuration=t),this.childrenMap.tabs.emitButtonClick(s),g!==void 0&&(this.childrenMap.pages.fadeInDuration=g)}return this},d6=function(i){return this.swapPage(0,i),this},f6=function(i){var t=this.getElement("tabs.buttons").length-1;return this.swapPage(t,i),this};const c6={swapPage:u6,swapFirstPage:d6,swapLastPage:f6};var v6=function(i,t){typeof i=="number"&&(i=this.getPageKey(i));var s=this.childrenMap.tabs,g=s.getByName(i),C=this.childrenMap.pages,M=C.getElement(i);return!g||!M?this:(C.removeChildrenMap(i),s.removeButton(g,t),C.remove(M,t),this)};const p6={removePage:v6};var g6=function(i){return typeof i=="number"&&(i=this.getPageKey(i)),this.childrenMap.pages.getPage(i)},m6=function(i){var t;return typeof i=="number"?t=i:t=this.getPageIndex(i),this.getElement("tabs.buttons")[t]},j0={getPageKey:r6,getPageIndex:a6,addPage:l6,getPage:g6,getTab:m6};Object.assign(j0,c6,p6);const Ms=Phaser.Utils.Objects.GetValue,ya=Dt.prototype.add;let No=class extends Dt{constructor(t,s){s===void 0&&(s={});var g=Ms(s,"tabPosition","top"),C=g==="left"||g==="right"?"x":"y";s.orientation=C,super(t,s),this.type="rexTabPages";var M=Ms(s,"background",void 0);M&&this.addBackground(M);var l=Ms(s,"pages"),T=new Go(t,l);t.add.existing(T);var e=C==="y",d=e?Ms(s,"wrapTabs",!1):!1,x=Ms(s,"tabs",void 0);x===void 0&&(x={});var u=d?Is:de;x.orientation=e?"x":"y",x.buttonsType="radio";var h=new u(t,x);t.add.existing(h);var o=d?!0:Ms(s,"expand.tabs",!1),n=Ms(s,"align.tabs","left");switch(g){case"top":case"left":ya.call(this,h,{proportion:0,expand:o,align:n}),ya.call(this,T,{proportion:1,expand:!0});break;case"bottom":case"right":ya.call(this,T,{proportion:1,expand:!0}),ya.call(this,h,{proportion:0,expand:o,align:n});break}this.addChildrenMap("background",M),this.addChildrenMap("tabs",h),this.addChildrenMap("pages",T),h.on("button.click",function(r){var f=r.name;T.hasPage(f)&&T.swapPage(f)}),h.on("button.statechange",function(r,f,a,c){var p=a?"tab.focus":"tab.blur";this.emit(p,r,r.name)},this),T.on("pagevisible",function(r,f,a){this.emit("page.focus",r,f)}),T.on("pageinvisible",function(r,f,a){this.emit("page.blur",r,f)})}get currentKey(){return this.getElement("pages").currentKey}set currentKey(t){this.showPage(t)}get keys(){return this.getElement("pages").keys}get currentPage(){return this.getElement("pages").currentPage}get previousPage(){return this.getElement("pages").previousPage}};Object.assign(No.prototype,j0);ht.register("tabPages",function(i){var t=new No(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.TabPages",No);class x6 extends uo{constructor(t,s){s===void 0&&(s={}),s.destroy=!1,super(t,s)}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}const y6={expand(i){if(this.expanded===!0)return this;i===void 0&&(i=this.transitionDuration),this.expanded=!0;var t=this.childrenMap.title,s=this.childrenMap.child;this.show(s);var g=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();return g.layout(),t.emit("folder.expand",i,this),s.emit("folder.expand",i,this),this.emit("expand.start",this),this.childTransition.once("open",function(){this.emit("expand.complete",this)},this).requestOpen(null,i),this},collapse(i){if(this.expanded===!1)return this;i===void 0&&(i=this.transitionDuration),this.expanded=!1;var t=this.childrenMap.title,s=this.childrenMap.child;return t.emit("folder.collapse",i,this),s.emit("folder.collapse",i,this),this.emit("collapse.start",this),this.childTransition.once("close",function(){this.setChildScale(s,1,1).hide(s);var g=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();g.layout(),this.emit("collapse.complete",this)},this).requestClose(null,i),this},toggle(i){return this.expanded?this.collapse(i):this.expand(i),this}};var T6=function(i,t){Ou.popUp.call(i,t,this.expandDirection)},C6=function(i,t){Ou.scaleDown.call(i,t,this.expandDirection)};const S6={setTransitionDuration(i){return this.transitionDuration=i,this.childTransition.setTransitInTime(i).setTransitOutTime(i),this},setExpandCallback(i){return i===void 0&&(i=T6.bind(this)),this.childTransition.setTransitInCallback(i),this},setCollapseCallback(i){return i===void 0&&(i=C6.bind(this)),this.childTransition.setTransitOutCallback(i),this}},ti=Phaser.Utils.Objects.GetValue;let Vo=class extends Dt{constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("orientation")||(s.orientation=1),super(t,s),this.type="rexFolder",this.expanded=void 0,this.expandDirection=this.orientation===1?"y":"x";var g=s.background,C=s.title,M=s.child;g&&this.addBackground(g);var l=this.orientation===1?"left":"top",u=ti(s,"align.title",l),h=ti(s,"expand.title",!0);this.add(C,{proportion:0,align:u,expand:h});var T=ti(s,"toggleByTarget",void 0),e=ti(s,"toggleClickConfig");T===void 0&&(T=C),T&&kg.onClick.call(T,function(){this.toggle()},this,e),this.childTransition=new x6(M);var d=ti(s,"customChildOrigin",!1);if(!d){var x=this.rtl?1:0;M.setOrigin(x)}var u=ti(s,"align.child","left"),h=ti(s,"expand.child",!0),o=h?1:0;this.add(M,{proportion:o,align:u,expand:h}),this.addChildrenMap("title",C),this.addChildrenMap("child",M),this.addChildrenMap("background",g);var n=s.transition;this.setTransitionDuration(ti(n,"duration",200)),this.setExpandCallback(ti(n,"expandCallback",void 0)),this.setCollapseCallback(ti(n,"collapseCallback",void 0)),this.reLayoutTarget=ti(s,"reLayoutTarget",void 0);var r=s.onExpandStart;r&&this.on("expand.start",r);var f=s.onExpandComplete;f&&this.on("expand.complete",f);var a=s.onCollapseStart;a&&this.on("collapse.start",a);var c=s.onCollapseComplete;c&&this.on("collapse.complete",c)}};Object.assign(Vo.prototype,y6,S6);ht.register("folder",function(i){var t=new Vo(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.Folder",Vo);ht.register("textArea",function(i){var t=new br(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.TextArea",br);var P6=function(){if(this.rexSizer.hidden)return 0;var i,t=this.child,s=t.rexSizer;return s.hidden?i=0:this.scrollMode===0?i=this.getChildWidth(t):i=0,i},E6=function(){if(this.rexSizer.hidden)return 0;var i,t=this.child,s=t.rexSizer;return s.hidden||this.scrollMode===0?i=0:i=t.isRexSizer?Math.max(t.minHeight,t.childrenHeight):t.hasOwnProperty("minHeight")?t.minHeight:It(t),i},M6=function(i){return i===void 0&&(i=[]),this.child&&this.child.isRexSizer&&i.push(this.child),i},w6=function(){var i=this.left,t=this.top;this.scrollMode===0?t+=this.childOY:i+=this.childOY,this.child.setPosition(i,t),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},R6=function(){var i=this.child,t,s;i.rexSizer.hidden||(this.scrollMode===0?t=this.width:s=this.height,i.isRexSizer?i.runLayout(this,t,s):ai(i,t,s),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren())},J0={getChildrenWidth:P6,getChildrenHeight:E6,getChildrenSizers:M6,resetChildPosition:w6,layoutChildren:R6};Object.assign(J0,M0);const Rv=Phaser.Utils.Objects.IsPlainObject,ei=Phaser.Utils.Objects.GetValue,A6=Phaser.Display.Align.TOP_LEFT;class Q0 extends zs{constructor(t,s,g,C,M,l){Rv(s)?(l=s,s=ei(l,"x",0),g=ei(l,"y",0),C=ei(l,"width",void 0),M=ei(l,"height",void 0)):Rv(C)&&(l=C,C=ei(l,"width",void 0),M=ei(l,"height",void 0)),super(t,s,g,C,M,l),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setScrollMode(ei(l,"scrollMode",!0)),this.setClampMode(ei(l,"clamplChildOY",!0));var T=ei(l,"child",void 0),e=ei(l,"expand",!0);T.setOrigin&&T.setOrigin(0),this.add(T),this.sizerChildren=[T];var d=this.getSizerConfig(T);d.align=A6,d.expand=e,this.child=T,this.setupChildrenMask(ei(l,"mask",void 0)),this.maskGameObject=hd(this.childrenMask)}destroy(t){!this.scene||this.ignoreDestroy||(this.destroyChildrenMask(),this.child=void 0,super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=m0[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampChildOY=t,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get childHeight(){return this.scrollMode===0?It(this.child):Ut(this.child)}get childWidth(){return this.scrollMode===0?Ut(this.child):It(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get childVisibleHeight(){return this.instHeight}get visibleHeight(){var t=this.childHeight-this.childVisibleHeight;return t<0&&(t=0),t}childOYExceedTop(t){return t===void 0&&(t=this.childOY),t>this.topChildOY}childOYExeceedBottom(t){return t===void 0&&(t=this.childOY),t<this.bottomChildOY}get childOY(){return this._childOY}set childOY(t){var s=this.topChildOY,g=this.bottomChildOY,C=this.childOYExceedTop(t),M=this.childOYExeceedBottom(t);this.clampChildOY&&(this.childVisibleHeight>this.childHeight?t=0:C?t=s:M&&(t=g)),this._childOY!==t&&(this._childOY=t,this.resetChildPosition()),C&&(this.execeedTopState||this.emit("execeedtop",this,t,s)),this.execeedTopState=C,M&&(this.execeedBottomState||this.emit("execeedbottom",this,t,g)),this.execeedBottomState=M}setChildOY(t){return this.childOY=t,this}set t(t){this.childOY=-this.visibleHeight*t}get t(){var t=this.visibleHeight;return t===0?0:this.childOY/-t}setChildOYByPercentage(t){return this.t=t,this}}Object.assign(Q0.prototype,J0);var O6=function(i,t){if(!this.hasChild(i))return this;var s;if(this.scrollMode===0)switch(t){case Ye.top:case"top":s=this.top-i.getTopLeft().y;break;case Ye.bottom:case"bottom":s=this.bottom-i.getBottomLeft().y;break;case Ye.center:case"center":s=this.centerY-i.getCenter().y;break;default:var g=this.top-i.getTopLeft().y,C=this.bottom-i.getBottomLeft().y;g<=0&&C>=0?s=0:s=Math.abs(g)<=Math.abs(C)?g:C;break}else switch(t){case Ye.left:case"left":s=this.left-i.getTopLeft().x;break;case Ye.right:case"right":s=this.right-i.getTopRight().x;break;case Ye.center:case"center":s=this.centerX-i.getCenter().x;break;default:var M=this.left-i.getTopLeft().x,l=this.right-i.getTopRight().x;M<=0&&l>=0?s=0:s=Math.abs(M)<=Math.abs(l)?M:l;break}return this.childOY+=s,this};const rr=Phaser.Utils.Objects.GetValue;class vd extends Oo{constructor(t,s){s===void 0&&(s={});var g=Ao(s),C=rr(s,"panel",void 0);C===void 0&&(C={}),C.scrollMode=g,C.clamplChildOY=rr(s,"clamplChildOY",!1);var M=new Q0(t,C);t.add.existing(M);var l=rr(C,"width",void 0),T=rr(C,"height",void 0),e,d;g===0?(e=l===void 0?1:0,d=T===void 0):(e=T===void 0?1:0,d=l===void 0),s.type="rexScrollablePanel",s.child={gameObject:M,proportion:e,expand:d};var x=rr(s,"space",void 0);x&&(x.child=x.panel),super(t,s),this.addChildrenMap("panel",M.child),this.addChildrenMap("panelLayer",M.maskLayer),this.addChildrenMap("mask",M.maskGameObject)}setChildrenInteractive(t){return t===void 0&&(t={}),t.hasOwnProperty("eventEmitter")||(t.eventEmitter=this),t.hasOwnProperty("targets")||(t.targets=[this.childrenMap.panel]),ku(this.childrenMap.child,t),this}}var b6={scrollToChild:O6};Object.assign(vd.prototype,b6);ht.register("scrollablePanel",function(i){var t=new vd(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.ScrollablePanel",vd);const Ta={popUp:function(i,t){i.popUp(t)},scaleDown:function(i,t){i.scaleDown(t)},fadeIn:function(i,t){i.fadeIn(t)},fadeOut:function(i,t){i.fadeOut(t)}};var Bl=function(i,t,s){var g=kt(s,"reverse",!1),C;if(ri(i[0]))if(g)for(var l=i.length,M=l-1;M>=0;M--)C=Bl(i[M],t,s);else for(var M=0,l=i.length;M<l;M++)C=Bl(i[M],t,s);else C=F6(i,t,s);return C},F6=function(i,t,s){var g=kt(s,"argsConvert",void 0),C=kt(s,"argsConvertScope",void 0),M=i[0];if($i=ou($i,i,1),g){g===!0&&(g=eu,C=void 0);for(var l=0,T=$i.length;l<T;l++)C?$i[l]=g.call(C,$i[l],i):$i[l]=g($i[l],i)}var e;typeof M=="string"?(e=t[M],e==null&&(e=kt(t,M,null))):e=M;var d=e.apply(t,$i);return d},$i=[];const ii=Phaser.Utils.Objects.GetValue;let L6=class extends he{constructor(t,s){super(t,s);var g=ii(s,"clock",void 0);g||(g=new Jp(t)),this.clock=g,this.clock.on("update",this.update,this),this.resetFromJSON(s)}resetFromJSON(t){return this.clock.resetFromJSON(ii(t,"clock",void 0)),this.state=ii(t,"state",0),this.commands=ii(t,"commands",[]),this.scope=ii(t,"scope",void 0),this.setTimeUnit(ii(t,"timeUnit",0)),this.setDtMode(ii(t,"dtMode",0)),this.index=ii(t,"index",0),this.nextTime=ii(t,"nextTime",0),this}toJSON(){return{clock:this.clock.toJSON(),state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextTime:this.nextTime}}shutdown(t){this.isShutdown||(this.clock.shutdown(t),this.commands=void 0,super.shutdown(t))}load(t,s,g){this.stop();var C=ii(g,"timeUnit",void 0);C!==void 0&&this.setTimeUnit(C);var M=ii(g,"dtMode",void 0);return M!==void 0&&this.setDtMode(M),t=t.filter(function(l){var T=l[0];return!isNaN(T)}).map(function(l){var T=l[0];return typeof T=="string"&&(l[0]=parseFloat(l[0])),l}),this.dtMode===0&&t.sort(function(l,T){var e=l[0],d=T[0];return e>d?1:e<d?-1:0}),this.commands=t,this.scope=s,this}start(t){return t===void 0&&(t=0),this.stop(),this.index=0,this.state=1,this.nextTime=this.getNextDt(0),this.clock.start(t),this.update(t),this.emit("start",this.parent,this),this}pause(){return this.clock.pause(),this.emit("pause",this.parent,this),this}resume(){return this.clock.resume(),this.emit("resume",this.parent,this),this}stop(){return this.clock.stop(),this.state=0,this.emit("stop",this.parent,this),this}seek(t){return this.clock.seek(t),this}seekToNext(){return this.seek(this.nextTime),this}get isPlaying(){return this.clock.isRunning}get completed(){return this.state===2}get timeScale(){return this.clock.timeScale}set timeScale(t){this.clock.timeScale=t}setTimeScale(t){return this.timeScale=t,this}get now(){return this.clock.now}update(t){if(this.nextTime>t)return this;for(var s=this.commands.length-1;;){var g=this.commands[this.index],C=g[1];if(ri(C)||(C=ou(D6,g,1)),Bl(C,this.scope),this.emit("runcommand",C,this.scope),this.index===s)return this.complete(),this;if(this.index++,this.nextTime=this.getNextDt(this.nextTime),this.nextTime>t)return this}}complete(){this.clock.stop(),this.state=2,this.emit("complete",this.parent,this)}getNextDt(t){var s=this.commands[this.index][0];return this.timeUnit===1&&(s=s*1e3),this.dtMode===1&&(s+=t),s}setDtMode(t){return typeof t=="string"&&(t=B6[t]),this.dtMode=t,this}setTimeUnit(t){return typeof t=="string"&&(t=I6[t]),this.timeUnit=t,this}};var D6=[];const I6={ms:0,s:1,sec:1},B6={abs:0,absolute:0,inc:1,increment:1},ar=Phaser.Utils.Objects.GetValue;class q0 extends Ys{constructor(t,s){s===void 0&&(s={text:createDefaultTextObject(t)}),super(t,s),this.type="rexToast",this.setTransitInTime(ar(s,"duration.in",200)),this.setDisplayTime(ar(s,"duration.hold",1200)),this.setTransitOutTime(ar(s,"duration.out",200)),this.setTransitInCallback(ar(s,"transitIn",Ki.popUp)),this.setTransitOutCallback(ar(s,"transitOut",Ki.scaleDown)),this.player=new L6(this,{dtMode:1}),this.messages=[],this.scaleX0=void 0,this.scaleY0=void 0,this.setVisible(!1)}destroy(t){!this.scene||this.ignoreDestroy||(this.player.destroy(),this.player=void 0,this.messages=void 0,super.destroy(t))}setDisplayTime(t){return this.displayTime=t,this}setTransitOutTime(t){return this.transitOutTime=t,this}setTransitInTime(t){return this.transitInTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=Ki[t]),t){case Ki.popUp:t=Ta.popUp;break;case Ki.fadeIn:t=Ta.fadeIn;break}return t||(t=ge),this.transitInCallback=t,this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=Ki[t]),t){case Ki.scaleDown:t=Ta.scaleDown;break;case Ki.fadeOut:t=Ta.fadeOut;break}return t||(t=ge),this.transitOutCallback=t,this}setScale(t,s){return s===void 0&&(s=t),this.scaleX0=t,this.scaleY0=s,super.setScale(t,s),this}showMessage(t){if(this.scaleX0===void 0&&(this.scaleX0=this.scaleX),this.scaleY0===void 0&&(this.scaleY0=this.scaleY),t===void 0){if(this.messages.length===0)return this;t=this.messages.shift()}if(this.player.isPlaying)return this.messages.push(t),this;this.setScale(this.scaleX0,this.scaleY0).setVisible(!0),typeof t=="string"?this.setText(t):t(this),this.layout();var s=[[0,[this.transitInCallback,this,this.transitInTime]],[this.transitInTime,[ge]],[this.displayTime,[this.transitOutCallback,this,this.transitOutTime]],[this.transitOutTime,[this.setVisible,!1]],[30,[ge]]];return this.player.load(s,this).once("complete",function(){this.showMessage()},this).start(),this}}const Ki={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};ht.register("toast",function(i){var t=new q0(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.Toast",q0);var G6=function(i,t){if(t===!1)return null;if(ls(t))return t;var s=new rs(i,t);return i.add.existing(s),s},Dr=function(i,t,s){s===void 0&&(s=!0),s?t=t?$e(t):{}:t||(t={});var g=new ru(i,t);return i.add.existing(g),g};const Av=["AliceBlue","AntiqueWhite","Aqua","Aquamarine","Azure","Beige","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Cornsilk","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGrey","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","DarkOrange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkSlateGrey","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DimGrey","DodgerBlue","FireBrick","FloralWhite","ForestGreen","Fuchsia","Gainsboro","GhostWhite","Gold","GoldenRod","Gray","Grey","Green","GreenYellow","HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGray","LightGrey","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSlateGrey","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","NavajoWhite","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","RebeccaPurple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","SlateGrey","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","White","WhiteSmoke","Yellow","YellowGreen"],N6=[15792383,16444375,65535,8388564,15794175,16119260,16770244,0,16772045,255,9055202,10824234,14596231,6266528,8388352,13789470,16744272,6591981,16775388,14423100,65535,139,35723,12092939,11119017,11119017,25600,12433259,9109643,5597999,16747520,10040012,9109504,15308410,9419919,4734347,3100495,3100495,52945,9699539,16716947,49151,6908265,6908265,2003199,11674146,16775920,2263842,16711935,14474460,16316671,16766720,14329120,8421504,8421504,32768,11403055,15794160,16738740,13458524,4915330,16777200,15787660,15132410,16773365,8190976,16775885,11393254,15761536,14745599,16448210,13882323,13882323,9498256,16758465,16752762,2142890,8900346,7833753,7833753,11584734,16777184,65280,3329330,16445670,16711935,8388608,6737322,205,12211667,9662683,3978097,8087790,64154,4772300,13047173,1644912,16121850,16770273,16770229,16768685,128,16643558,8421376,7048739,16753920,16729344,14315734,15657130,10025880,11529966,14381203,16773077,16767673,13468991,16761035,14524637,11591910,8388736,6697881,16711680,12357519,4286945,9127187,16416882,16032864,3050327,16774638,10506797,12632256,8900331,6970061,7372944,7372944,16775930,65407,4620980,13808780,32896,14204888,16737095,4251856,15631086,16113331,16777215,16119285,16776960,10145074];var Gl={},Ov;for(var Ca=0,V6=Av.length;Ca<V6;Ca++)Ov=Av[Ca].toLowerCase(),Gl[Ov]=N6[Ca];var k6=function(i){return i=i.toLowerCase(),Gl.hasOwnProperty(i)?Gl[i]:null},z6=function(i){return typeof i!="string"||(i.startsWith("#")?i=parseInt(i.substring(1),16):i.startsWith("0x")?i=parseInt(i.substring(2),16):i=k6(i)),i};const U6=Phaser.Utils.String.Pad;var bv=function(i,t){t===void 0&&(t="0x");var s=i.toString(16).toUpperCase();return s=U6(s,6,0,1),s=t+s,s},Y6=function(i,t){i&&(i.setTint?i.setTint(t):i.setFillStyle&&i.setFillStyle(t))};const Ue=Phaser.Utils.Objects.GetValue,X6=Phaser.Utils.Objects.IsPlainObject,W6=Phaser.Math.Clamp;let pd=class extends Dt{constructor(t,s){s===void 0&&(s={}),s.orientation=0,super(t,s),this.type="rexColorInputLite";var g=Ue(s,"background",void 0),C=Ue(s,"swatch"),M;X6(C)&&(M=Ue(C,"size"));var l=G6(t,Ue(s,"swatch")),T=Ue(s,"inputText",!0),e;if(T&&(e=Dr(t,T)),g&&this.addBackground(g),l){M=Ue(s,"swatchSize",M);var d;M!==void 0?(ai(l,M,M),d=!1):d=Ue(s,"squareExpandSwatch",!0);var x=d?1:0;this.add(l,{proportion:0,expand:!1,fitRatio:x})}if(e){var u=Ue(T,"width")===void 0?1:0,h=Ue(T,"height")===void 0;this.add(e,{proportion:u,expand:h})}this.addChildrenMap("background",g),this.addChildrenMap("swatch",l),this.addChildrenMap("inputText",e),e&&e.on("close",function(){this.setValue(e.value)},this);var o=Ue(s,"valuechangeCallback",null);if(o!==null){var n=Ue(s,"valuechangeCallbackScope",void 0);this.on("valuechange",o,n)}this.setValue(Ue(s,"value",0))}get value(){return this._value}set value(t){if(typeof t=="string"){if(t=z6(t),t==null){var g=this.childrenMap.inputText;g&&g.setText(bv(this._value));return}}else t=W6(Math.floor(t),0,16777215);if(this._value!==t){this._value=t;var s=this.childrenMap.swatch;s&&Y6(s,t);var g=this.childrenMap.inputText;g&&g.setText(bv(t)),this.emit("valuechange",this._value)}}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}};var H6={setCreateColorPickerBackgroundCallback(i){return this.colorPickerCreateBackgroundCallback=i,this},setColorPickerHPalettePosition(i){return this.colorPickerHPalettePosition=i,this},setColorPickerExpandDirection(i){return typeof i=="string"&&(i=$6[i]),this.colorPickerExpandDirection=i,this},setColorPickerEaseInDuration(i){return i===void 0&&(i=0),this.colorPickerEaseInDuration=i,this},setColorPickerEaseOutDuration(i){return i===void 0&&(i=0),this.colorPickerEaseOutDuration=i,this},setColorPickerTransitInCallback(i){return this.colorPickerTransitInCallback=i,this},setColorPickerTransitOutCallback(i){return this.colorPickerTransitOutCallback=i,this},setColorPickerBounds(i){return this.colorPickerBounds=i,this},setColorPickerWidth(i){return this.colorPickerWidth=i,this},setColorPickerHeight(i){return this.colorPickerHeight=i,this},setColorPickerSize(i,t){return this.setColorPickerWidth(i).setColorPickerHeight(t),this},setColorPickerSpace(i){return i===void 0&&(i={}),this.colorPickerSpace=i,this},setColorComponentsHeight(i){return this.colorComponentsHeight=i,this},setColorComponentsFormatLabelConfig(i){return this.colorComponentsFormatLabelConfig=i,this},setColorComponentsInputTextConfig(i){return this.colorComponentsInputTextConfig=i,this},setColorComponentsSpace(i){return i===void 0&&(i={}),this.colorComponentsSpace=i,this}};const $6={down:0,up:1},_0=Phaser.Display.Color,Wa=Phaser.Math.Percent;var K6=function(i,t,s){s===void 0&&(s=!1);var g=i.width,C=i.height,M=new _0;if(s)for(var l=0;l<C;l++){var T=Wa(l,0,C);M.setFromHSV(T,1,1),t.fillStyle=M.rgba,t.fillRect(0,l,g,1)}else for(var e=0;e<g;e++){var T=Wa(e,0,g);M.setFromHSV(T,1,1),t.fillStyle=M.rgba,t.fillRect(e,0,1,C)}},Z6=function(i,t,s){for(var g=i.width,C=i.height,M=t.getImageData(0,0,g,C),l=M.data,T=new _0,e=0;e<C;e++)for(var d=0;d<g;d++){var x=Wa(d,0,g),u=1-Wa(e,0,C);T.setFromHSV(s,x,u);var h=(e*g+d)*4;l[h]=T.red,l[h+1]=T.green,l[h+2]=T.blue,l[h+3]=255}t.putImageData(M,0,0)};const j6=Phaser.Display.Color,Fv=Phaser.Math.Percent,J6=Phaser.Display.Color.ColorToRGBA,Q6=Phaser.Display.Color.HSVToRGB;class q6 extends Fn{constructor(t,s,g,C,M,l){s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=2),M===void 0&&(M=2),super(t,s,g,C,M),this.type="rexColorPicker.HPaletteCanvas",this.colorObject=new j6,this.setOrientation(l),this.setSize(C,M)}setOrientation(t){return this.orientation=Po(t),this}updateTexture(){return K6(this.canvas,this.context,this.orientation),super.updateTexture(),this}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue=t}getHue(t,s){return t===void 0?this.hue:(this.orientation===0?this.hue=Fv(t,0,this.width):this.hue=Fv(s,0,this.height),this.hue)}getColor(t,s){if(t===void 0)return this.color;var g=this.getHue(t,s);return this.colorObject.setFromRGB(Q6(g,1,1)),this.colorObject.color}setColor(t){return this.color===t?this:this}colorToLocalPosition(t,s){return s===void 0?s={}:s===!0&&(al===void 0&&(al={}),s=al),this.colorObject.setFromRGB(J6(t)),this.orientation===0?(s.x=this.width*this.colorObject.h,s.y=this.height/2):(s.x=this.width/2,s.y=this.height*this.colorObject.h),s}}var al=void 0,_6=Phaser.Math.RotateAround,tm=function(i,t,s,g){g===void 0?g={}:g===!0&&(ol===void 0&&(ol={}),g=ol),t-=i.width*i.originX,s-=i.height*i.originY;var C={x:t*i.scaleX,y:s*i.scaleY};return _6(C,0,0,-i.rotation),g.x=i.x+t,g.y=i.y+s,g},ol;class tB extends Ze{constructor(t,s){s===void 0&&(s={}),super(t,s);var g=s.width!=null?1:0,C=new q6(t).setOrientation(g);t.add.existing(C),this.type="rexColorPicker.HPalette",C.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var M=new rs(t,{strokeColor:16777215,strokeWidth:2});t.add.existing(M),this.add(C,{key:"paletteCanvas",expand:!0}).add(M,{key:"marker",expand:!1})}resize(t,s){if(this.width===t&&this.height===s)return this;super.resize(t,s);var g=Math.min(t,s);return this.childrenMap.marker.setSize(g,g),this}onPaletteCanvasPointerDown(t,s,g,C){if(t.isDown){var M=this.childrenMap.paletteCanvas,l=M.getColor(s,g);this.setMarkerPosition(l),this.emit("input",l)}}get color(){return this.childrenMap.paletteCanvas.color}setColor(t){if(this.color===t)return this;var s=this.childrenMap.paletteCanvas;return s.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var s=this.childrenMap.paletteCanvas,g=this.childrenMap.marker,C=s.colorToLocalPosition(t,!0);return tm(s,C.x,C.y,g),this.resetChildPositionState(g),this}getHue(t,s){var g=this.childrenMap.paletteCanvas;return g.getHue(t,s)}}const eB=Phaser.Display.Color,Lv=Phaser.Math.Percent,Dv=Phaser.Display.Color.ColorToRGBA,iB=Phaser.Display.Color.HSVToRGB;class sB extends Fn{constructor(t,s,g,C,M,l){s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=2),M===void 0&&(M=2),super(t,s,g,C,M),this.type="rexColorPicker.SVPaletteCanvas",l===void 0&&(l=1),this.colorObject=new eB,this.setHue(l),this.setSize(C,M)}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue!==t&&(this._hue=t,this.colorObject.h=t,this.dirty=!0)}setHue(t){return this.hue=t,this}updateTexture(){return Z6(this.canvas,this.context,this.hue),super.updateTexture(),this}getColor(t,s){if(t===void 0)return this.colorObject.color;var g=Lv(t,0,this.width),C=1-Lv(s,0,this.height);return this.colorObject.setFromRGB(iB(this.hue,g,C)),this.colorObject.color}setColor(t){return this.color===t?this:(this.colorObject.setFromRGB(Dv(t)),this.setHue(this.colorObject.h),this)}colorToLocalPosition(t,s){return s===void 0?s={}:s===!0&&(hl===void 0&&(hl={}),s=hl),this.colorObject.setFromRGB(Dv(t)),s.x=this.width*this.colorObject.s,s.y=this.height*(1-this.colorObject.v),s}}var hl=void 0;class nB extends Ze{constructor(t,s){super(t,s);var g=new sB(t);t.add.existing(g),this.type="rexColorPicker.SVPalette",g.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var C=new rs(t,{radius:5,strokeColor:16777215,strokeWidth:2});t.add.existing(C),this.add(g,{key:"paletteCanvas",expand:!0}).add(C,{key:"marker",expand:!1})}onPaletteCanvasPointerDown(t,s,g,C){if(t.isDown){var M=this.childrenMap.paletteCanvas,l=M.getColor(s,g);this.setMarkerPosition(l),this.emit("input",l)}}get color(){return this.childrenMap.paletteCanvas.color}setHue(t){var s=this.childrenMap.paletteCanvas;return s.setHue(t),this}setColor(t){if(this.color===t)return this;var s=this.childrenMap.paletteCanvas;return s.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var s=this.childrenMap.paletteCanvas,g=this.childrenMap.marker,C=s.colorToLocalPosition(t,!0);return tm(s,C.x,C.y,g),this.resetChildPositionState(g),this}}const si=Phaser.Utils.Objects.GetValue;class gd extends Dt{constructor(t,s){super(t,s),this.type="rexColorPicker",this.freezePalettes=!1;var g=si(s,"hPalette.position",0);typeof g=="string"&&(g=rB[g]);var C=g===0||g===2?1:0;this.setOrientation(C);var M=si(s,"background",void 0),l,T;if(this.orientation===0){var l=si(s,"hPalette.width",void 0);l===void 0&&(l=si(s,"hPalette.size",10))}else T=si(s,"hPalette.height",void 0),T===void 0&&(T=si(s,"hPalette.size",10));var e=new tB(t,{width:l,height:T});t.add.existing(e);var d=si(s,"svPalette.width",void 0),x=si(s,"svPalette.height",void 0),u=new nB(t,{width:d,height:x});t.add.existing(u),M&&this.addBackground(M);var h={proportion:0,expand:!0},o,n;this.orientation===0?(o=d===void 0?1:0,n=x===void 0):(o=x===void 0?1:0,n=d===void 0);var r={proportion:o,expand:n};g===0||g===3?this.add(u,r).add(e,h):this.add(e,h).add(u,r),e.on("input",function(){u.setHue(e.getHue()),this.setValue(u.color,!0)},this),u.on("input",function(){this.setValue(u.color,!0)},this),this.addChildrenMap("background",M),this.addChildrenMap("hPalette",e),this.addChildrenMap("svPalette",u);var f=si(s,"valuechangeCallback",null);if(f!==null){var a=si(s,"valuechangeCallbackScope",void 0);this.on("valuechange",f,a)}this.setValue(si(s,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){var s=this._value;this._value=t,this.freezePalettes||this.updatePalettes(),this.emit("valuechange",t,s,this)}}setValue(t,s){return this.freezePalettes=!!s,this.value=t,this.freezePalettes=!1,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}updatePalettes(){return this.childrenMap.hPalette.setColor(this.color),this.childrenMap.svPalette.setColor(this.color),this}runLayout(t,s,g){return this.ignoreLayout?this:(super.runLayout(t,s,g),this.childrenMap.hPalette.setMarkerPosition(this.value),this.childrenMap.svPalette.setMarkerPosition(this.value),this)}}var rB={bottom:0,left:1,top:2,right:3};const xi=Phaser.Utils.Objects.GetValue,aB=Phaser.Display.Color,oB=Phaser.Display.Color.ColorToRGBA,hB=Phaser.Display.Color.HSVToRGB,ws=Phaser.Math.Clamp;class md extends Dt{constructor(t,s){s===void 0&&(s={}),s.orientation=0,super(t,s),this.type="rexColorComponents",this.colorObject=new aB;var g=xi(s,"background",void 0),C=xi(s,"formatLabel",void 0);ls(C)||(C=We(t,C).resetDisplayContent());var M=[];if(s.inputText0&&s.inputText1&&s.inputText2)M.push(s.inputText0),M.push(s.inputText1),M.push(s.inputText2);else for(var l=xi(s,"inputText"),T=0;T<3;T++){var e=Dr(t,l).setMaxLength(3).setNumberInput();M.push(e)}g&&this.addBackground(g);var x=xi(s,"proportion.formatLabel",0),d=!!C.isRexContainerLite,u=xi(s,"expand.formatLabel",d);this.add(C,{proportion:x,expand:u});for(var x=xi(l,"width")===void 0?1:0,u=xi(l,"height")===void 0,T=0,h=M.length;T<h;T++)this.add(M[T],{proportion:x,expand:u});this.addChildrenMap("background",g),this.addChildrenMap("formatLabel",C),this.addChildrenMap("components",M),this.onClick(C,this.toggleColorFormat,this);for(var T=0,h=M.length;T<h;T++)M[T].on("close",function(){this.updateColorObject(),this.setValue(this.colorObject.color)},this);var o=xi(s,"valuechangeCallback",null);if(o!==null){var n=xi(s,"valuechangeCallbackScope",void 0);this.on("valuechange",o,n)}C.setText("RGB"),this.setValue(xi(s,"value",16777215))}get value(){return this._value}set value(t){t=ws(Math.floor(t),0,16777215),this._value!==t&&(this._value=t,this.colorObject.setFromRGB(oB(t)),this.updateComponents(),this.emit("valuechange",this._value))}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}get colorFormat(){return this.childrenMap.formatLabel.text}set colorFormat(t){this.colorFormat!==t&&(this.childrenMap.formatLabel.setText(t),this.updateComponents())}setColorFormat(t){return this.colorFormat=t,this}toggleColorFormat(){return this.colorFormat=this.colorFormat==="RGB"?"HSV":"RGB",this}updateComponents(){var t=this.childrenMap.components,s,g,C;return this.colorFormat==="RGB"?(s=this.colorObject.red,g=this.colorObject.green,C=this.colorObject.blue):(s=Math.floor(this.colorObject.h*360),g=Math.floor(this.colorObject.s*100),C=Math.floor(this.colorObject.v*100)),t[0].setValue(s),t[1].setValue(g),t[2].setValue(C),this}updateColorObject(){var t=this.childrenMap.components;if(this.colorFormat==="RGB"){var s=ws(t[0].value,0,255),g=ws(t[1].value,0,255),C=ws(t[2].value,0,255);this.colorObject.setTo(s,g,C)}else{var M=ws(t[0].value,0,359)/360,l=ws(t[1].value,0,100)/100,T=ws(t[2].value,0,100)/100;this.colorObject.setFromRGB(hB(M,l,T))}return this}}const ll=Phaser.Utils.Objects.GetValue;class lB extends Dt{constructor(t,s){s===void 0&&(s={}),s.orientation=1,super(t,s),this.type="rexColorInput.ColorPickerPanel";var g=ll(s,"background",void 0),C=new gd(t,{hPalette:s.hPalette||{},svPalette:s.svPalette||{},space:{item:ll(s,"space.hPalette",8)}});t.add.existing(C);var M;s.colorComponents&&(M=new md(t,s.colorComponents),t.add.existing(M)),g&&(this.addBackground(g),new fo(g,{stopAllLevels:!1})),this.add(C,{proportion:1,expand:!0}),M&&this.add(M,{proportion:0,expand:!0}),this.addChildrenMap("background",g),this.addChildrenMap("colorPicker",C),this.addChildrenMap("colorComponents",M),C.on("valuechange",function(l){this.setValue(l)},this),M&&M.on("valuechange",function(l){this.setValue(l)},this),this.setValue(ll(s,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){this._value=t;var s=this.childrenMap.colorPicker;s.setValue(t);var g=this.childrenMap.colorComponents;g&&g.setValue(t),this.emit("valuechange",t)}}setValue(t){return this.value=t,this}}Phaser.Utils.Objects.GetValue;var uB=function(t){var t=this.scene,s,g=this.colorPickerCreateBackgroundCallback;g&&(s=g.call(this,t),t.add.existing(s));var C=this.colorPickerWidth;C===void 0&&(C=this.width);var M=this.colorPickerHeight;M===void 0&&(M=C);var l;this.colorComponentsHeight>0?l={height:this.colorComponentsHeight,formatLabel:this.colorComponentsFormatLabelConfig,inputText:this.colorComponentsInputTextConfig,space:this.colorComponentsSpace}:l=!1;var T=new lB(t,{width:C,height:M,background:s,space:this.colorPickerSpace,hPalette:{position:this.colorPickerHPalettePosition},colorComponents:l,value:this.value});return t.add.existing(T),T},dB=function(){if(!this.colorPicker){var i=uB.call(this).layout(),t=new L0(i,{duration:{in:this.colorPickerEaseInDuration,out:this.colorPickerEaseOutDuration},transitIn:this.colorPickerTransitInCallback,transitOut:this.colorPickerTransitOutCallback,expandDirection:this.colorPickerExpandDirection,alignTargetX:this,alignTargetY:this,bounds:this.colorPickerBounds,touchOutsideClose:!0}).on("open",function(){i.on("valuechange",function(s){this.setValue(s)},this)},this).on("close",function(){this.colorPicker=void 0,this.dropDownBehavior=void 0},this);return this.colorPicker=i,this.dropDownBehavior=t,this.pin(i),this}},em={openColorPicker:dB};Object.assign(em,H6);const ue=Phaser.Utils.Objects.GetValue;let ko=class extends pd{constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexColorInput",s.hasOwnProperty("colorPicker")||(s.colorPicker={background:{color:0}});var g=s.colorPicker,C=g!==!1&&g!==null;if(C){this.setColorPickerSize(ue(g,"width",160),ue(g,"height",170));var M,l=ue(g,"background");l?M=function(o){return Xe(o,l)}:M=ue(g,"createBackgroundCallback"),this.setCreateColorPickerBackgroundCallback(M),this.setColorPickerHPalettePosition(ue(g,"hPalettePosition",0)),this.setColorPickerExpandDirection(ue(g,"expandDirection")),this.setColorPickerEaseInDuration(ue(g,"easeIn",200)),this.setColorPickerEaseOutDuration(ue(g,"easeOut",200)),this.setColorPickerTransitInCallback(ue(g,"transitIn")),this.setColorPickerTransitOutCallback(ue(g,"transitOut")),this.setColorPickerBounds(ue(g,"bounds"));var T=ue(g,"space");T===void 0&&(T={left:10,right:10,top:10,bottom:10,item:8}),this.setColorPickerSpace(T)}var e=s.colorComponents,d=e!==!1&&e!==null;if(C&&d){this.setColorComponentsHeight(ue(e,"height",30)),this.setColorComponentsFormatLabelConfig(ue(e,"formatLabel"));var x=ue(e,"inputText");x||(x=ue(s,"inputText")),this.setColorComponentsInputTextConfig(x);var u=ue(e,"space");u===void 0&&(u={item:8}),this.setColorComponentsSpace(u)}var h=this.childrenMap.swatch;h&&C&&this.onClick(h,this.openColorPicker,this)}};Object.assign(ko.prototype,em);ht.register("colorInput",function(i){var t=new ko(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.ColorInput",ko);ht.register("colorInputLite",function(i){var t=new pd(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.ColorInputBase",pd);ht.register("colorPicker",function(i){var t=new gd(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.ColorPicker",gd);ht.register("colorComponents",function(i){var t=new md(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.ColorComponents",md);var fB=function(){return function(i,t,s,g){t!=="panel"&&s.setChildVisible(i,!0)}},cB=function(){return function(i,t,s,g){t!=="panel"&&s.setChildVisible(i,!1)}};const vB={show:fB,hide:cB};var pB=function(i,t){return t===void 0&&(t=1),function(s,g,C,M){g!=="panel"&&C.fadeChild(s,M?0:i,t)}},gB=function(i,t){return t===void 0&&(t=0),function(s,g,C,M){g!=="panel"&&C.fadeChild(s,M?0:i,t)}};const mB={show:pB,hide:gB};var Iv=function(i,t){return function(s,g,C,M){g!=="panel"&&C.moveChild(s,M?0:i,t)}};const xB={show:Iv,hide:Iv};var Bv=function(i,t){return function(s,g,C,M){g==="panel"&&C.moveChild(s,M?0:i,t)}};const yB={show:Bv,hide:Bv},ul={visible:vB,fade:mB,move:xB,"move-panel":yB};var TB=function(i){var t,s;[t,...s]=typeof i=="string"?[i]:i;var g,C;return ul.hasOwnProperty(t)?(g=ul[t].show.apply(null,s),C=ul[t].hide.apply(null,s)):(g=ge,C=ge),{show:g,hide:C}};const CB={showChild(i,t){var s=this.sizerChildren[i];return s&&(this.emit("showchild",s,i,this,t),this.resetChildState(s)),this},hideChild(i,t){var s=this.sizerChildren[i];return s&&(this.emit("hidechild",s,i,this,t),this.resetChildState(s)),this},swapChild(i,t){return this.currentChildKey===i||(this.currentChildKey==="panel"||i==="panel"?(this.previousChildKey=this.currentChildKey,this.currentChildKey=i,this.hideChild(this.previousChildKey,t),this.showChild(this.currentChildKey,t)):(this.swapChild("panel",t),this.swapChild(i,t))),this},showPanel(i){return this.swapChild("panel",i),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return this.currentChildKey=="leftSide"&&this.showPanel(),this},hideRightSide(){return this.currentChildKey=="rightSide"&&this.showPanel(),this},hideTopSide(){return this.currentChildKey=="topSide"&&this.showPanel(),this},hideBottomSide(){return this.currentChildKey=="bottomSide"&&this.showPanel(),this},toggleLeftSide(){var i=this.currentChildKey!=="panel"?"panel":"leftSide";return this.swapChild(i),this},toggleRightSide(){var i=this.currentChildKey!=="panel"?"panel":"rightSide";return this.swapChild(i),this},toggleTopSide(){var i=this.currentChildKey!=="panel"?"panel":"topSide";return this.swapChild(i),this},toggleBottomSide(){var i=this.currentChildKey!=="panel"?"panel":"bottomSide";return this.swapChild(i),this}},SB=Ne.prototype.setChildVisible,PB={setChildVisible(i,t){var s;if(typeof i=="string"){var s=i;i=this.sizerChildren[s]}else s=xo(this.sizerChildren,i);return t===void 0&&(t=this.currentChildKey===s),SB.call(this,i,t),this}},EB={fadeChild(i,t,s){var g;return typeof i=="string"?(g=i,i=this.sizerChildren[g]):g=xo(this.sizerChildren,i),t===void 0&&(t=500),s===void 0&&(s=this.currentChildKey===g?1:0),i.fadeIn(t,{start:i.alpha,end:s}),this},fadeChildPromise(i,t,s){return typeof i=="string"&&(i=this.sizerChildren[key]),this.fadeChild(i,t,s),i._fade?fe(i._fade):Promise.resolve()}},MB={moveChild(i,t,s,g){var C;typeof i=="string"?(C=i,i=this.sizerChildren[C]):C=xo(this.sizerChildren,i),t===void 0&&(t=500);var M=this.currentChildKey===C;if(g===void 0)switch(C){case"leftSide":case"rightSide":g=Ut(i);break;case"topSide":case"bottomSide":g=It(i);break;default:if(M)switch(this.previousChildKey){case"leftSide":case"rightSide":g=Ut(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":g=It(this.sizerChildren[this.previousChildKey]);break;default:g=0;break}else switch(this.currentChildKey){case"leftSide":case"rightSide":g=Ut(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":g=It(this.sizerChildren[this.currentChildKey]);break;default:g=0;break}break}var l,T,e,d;if(M)switch(C){case"panel":switch(this.previousChildKey){case"leftSide":l=!0;break;case"rightSide":T=!0;break;case"topSide":e=!0;break;case"bottomSide":d=!0;break}break;case"leftSide":T=!0;break;case"rightSide":l=!0;break;case"topSide":d=!0;break;case"bottomSide":e=!0;break}else switch(C){case"panel":switch(this.currentChildKey){case"leftSide":T=!0;break;case"rightSide":l=!0;break;case"topSide":d=!0;break;case"bottomSide":e=!0;break}break;case"leftSide":l=!0;break;case"rightSide":T=!0;break;case"topSide":e=!0;break;case"bottomSide":d=!0;break}return l?i.moveTo(t,`-=${g}`,void 0,s):T?i.moveTo(t,`+=${g}`,void 0,s):e?i.moveTo(t,void 0,`-=${g}`,s):d?i.moveTo(t,void 0,`+=${g}`,s):i.moveTo(0),this},moveChildPromise(i,t,s,g){return typeof i=="string"&&(i=this.sizerChildren[key]),this.moveChild(i,t,s,g),i._easeMove?fe(i._easeMove):Promise.resolve()}};var im={};Object.assign(im,PB,EB,MB);const we=Phaser.Utils.Objects.GetValue;class xd extends Ze{constructor(t,s){super(t,s),this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var g=we(s,"showChildCallback",void 0);if(g)if(ns(g)){var C=we(s,"showChildCallbackScope",void 0);this.on("showchild",g,C);var M=we(s,"hideChildCallback",void 0),l=we(s,"hideChildCallbackScope",void 0);this.on("hidechild",M,l)}else{var T=TB(g);this.on("showchild",T.show),this.on("hidechild",T.hide)}var e=we(s,"background",void 0),d=we(s,"panel",void 0),x=we(s,"leftSide",void 0),u=we(s,"rightSide",void 0),h=we(s,"topSide",void 0),o=we(s,"bottomSide",void 0);if(e&&this.addBackground(e),d&&this.add(d,"panel","center",0,!0),x){var n=we(s,"expand.left",!0);this.add(x,"leftSide","left-top",0,{height:n})}if(u){var n=we(s,"expand.right",!0);this.add(u,"rightSide","right-top",0,{height:n})}if(h){var n=we(s,"expand.top",!0);this.add(h,"topSide","left-top",0,{width:n})}if(o){var n=we(s,"expand.bottom",!0);this.add(o,"bottomSide","left-bottom",0,{width:n})}}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}}Object.assign(xd.prototype,CB,im);ht.register("sides",function(i){var t=new xd(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.Sides",xd);class sm extends Ys{constructor(t,s){s=Ju(t,s),super(t,s),this.type="rexTweaker.Title"}setTitle(t){return t=t?$e(t):{},t.hasOwnProperty("text")||(t.hasOwnProperty("title")?t.text=t.title:t.text=""),this.resetDisplayContent(t),this}}class wB extends sm{constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexTweaker.FolderTitle";var g=new ao(t,s.expandedIcon);t.add.existing(g),this.addSpace().add(g,{proportion:0,expand:!1,padding:1,fitRatio:1}),this.addChildrenMap("expandedIcon",g)}setExpandedState(t){t===void 0&&(t=!0);var s=t?"down":"right",g=this.childrenMap.expandedIcon;return g.setDirection(s),this}}var nm=function(i,t){var s=new Cd(i,t);return i.add.existing(s),s},yd=function(i,t,s){return Xe(i,s)};const RB={setBindingTarget(i){var t=this.childrenMap.child;return t.setBindingTarget(i),this}},AB={getMaxInputRowTitleWidth(){var i=this.childrenMap.child,t=i.getMaxInputRowTitleWidth();return t+this.getInnerPadding("left")},setInputRowTitleWidth(i){i-=this.getInnerPadding("left");var t=this.childrenMap.child;return t.setInputRowTitleWidth(i),this}};class rm extends Vo{constructor(t,s){super(t,s),this.type="rexTweaker.Folder"}setTitle(t){var s=this.childrenMap.title;return s.setTitle(t),this}}Object.assign(rm.prototype,RB,AB);const pn=Phaser.Utils.Objects.GetValue;var OB=function(i,t,s){var g=pn(s,"title")||{},C=new wB(i,g);i.add.existing(C),C.on("folder.expand",function(){C.setExpandedState(!0)}).on("folder.collapse",function(){C.setExpandedState(!1)});var M={root:pn(s,"root"),styles:pn(s,"tweaker"),space:pn(s,"space")||{}},l=nm(i,M),T=pn(s,"background"),e=yd(i,t,T),d=new rm(i,{orientation:1,title:C,child:l,background:e,transition:{duration:pn(s,"transition.duration",200)}});return i.add.existing(d),d};const Gv=Phaser.Utils.Objects.GetValue;var bB=function(i){var t=this.scene,s=Gv(this.styles,"folder")||{};s.tweaker=this.styles,s.root=this.root;var g=OB(t,i,s);delete s.tweaker,delete s.root,this.add(g,{expand:!0}),g.setTitle(i);var C=Gv(i,"expanded",!0);C?g.expand(0):g.collapse(0);var M=g.getElement("child");return i.key&&this.root.addChildrenMap(i.key,M),M};const FB={setBindingTarget(i){for(var t=this.childrenMap.pages.children,s=0,g=t.length;s<g;s++)t[s].setBindingTarget(i);return this}},LB={getMaxInputRowTitleWidth(){for(var i=0,t=this.childrenMap.pages.children,s=0,g=t.length;s<g;s++)i=Math.max(i,t[s].getMaxInputRowTitleWidth());return i+this.getInnerPadding("left")},setInputRowTitleWidth(i){i-=this.getInnerPadding("left");for(var t=this.childrenMap.pages.children,s=0,g=t.length;s<g;s++)t[s].setInputRowTitleWidth(i);return this}};class am extends No{constructor(t,s){super(t,s),this.type="rexTweaker.TabPages"}}Object.assign(am.prototype,FB,LB);const Sa=Phaser.Utils.Objects.GetValue;var DB=function(i,t,s){var g=new am(i,s);i.add.existing(g);for(var C=Sa(s,"tab"),M={root:Sa(s,"root"),styles:Sa(s,"tweaker")},l=Sa(t,"pages")||[],T=0,e=l.length;T<e;T++){var d=l[T];g.addPage({key:d.title,tab:We(i,C).setActiveState(!1).resetDisplayContent({text:d.title}),page:nm(i,M)})}return g.on("tab.focus",function(x,u){x.setActiveState(!0)}).on("tab.blur",function(x,u){x.setActiveState(!1)}),g};const Nv=Phaser.Utils.Objects.GetValue;var IB=function(i){var t=this.scene,s=Nv(this.styles,"tab")||{};s.tweaker=this.styles,s.root=this.root;var g=DB(t,i,s);delete s.tweaker,delete s.root,this.add(g,{expand:!0});for(var C=Nv(i,"pages")||[],M=[],l=0,T=0,e=C.length;T<e;T++){var d=g.getPage(T),x=C[T].show;x&&(l=T);var u=C[T].key;u&&this.root.addChildrenMap(u,d),M.push(d)}return g.swapPage(l,0),M};const Da="string",om="number",hm="range",lm="list",BB="buttons",um="boolean",GB="toggleSwitch",NB="color";var VB=function(i,t,s){if(s.view)return s.view;if(s.options)return lm;if(!i)return Da;var g=i[t];switch(typeof g){case"number":return kB(s,"min","max")?hm:om;case"string":return Da;case"boolean":return um;default:return Da}},kB=function(i,...t){for(var s=0,g=t.length;s<g;s++)if(i[t[s]]===void 0)return!1;return!0};const zB={setupBinding(){var i=this.childrenMap.inputField;return i.on("valuechange",function(t){!this.bindingTarget||!this.autoUpdateEnable||(this.bindingTarget[this.bindTargetKey]=t)},this),this},setAutoUpdateEnable(i){return i===void 0&&(i=!0),this.autoUpdateEnable=i,this},setBindingTarget(i,t){return this.bindingTarget=i,t!==void 0&&this.setBindingTargetKey(t),this.syncTargetValue(),this},setBindingTargetKey(i){return this.bindTargetKey=i,this},syncTargetValue(){if(!this.bindingTarget||!this.bindTargetKey)return this;var i=this.childrenMap.inputField;return i.syncValue(this.bindingTarget[this.bindTargetKey]),this}},UB={startMonitorTarget(){return this.isMonitoring?this:(this.isMonitoring=!0,this.scene.events.on("postupdate",this.onMonitorTarget,this),this)},stopMonitorTarget(){return this.isMonitoring?(this.isMonitoring=!1,this.scene.events.off("postupdate",this.onMonitorTarget,this),this):this},onMonitorTarget(){if(this.bindingTarget){var i=this.bindingTarget[this.bindTargetKey],t=this.childrenMap.inputField;t.value!==i&&t.syncValue(i)}}},YB={getMinTitleWidth(){var i=this.childrenMap.title;if(!i)return 0;var t=i.rexSizer.padding,s=this.getChildWidth(this.childrenMap.title)+t.left+t.right;return s+this.getInnerPadding("left")},setMinTitleWidth(i){var t=this.childrenMap.title;if(!t)return this;var s=t.rexSizer.padding;return i-=s.left+s.right,t.minWidth=i,this}},dl=Phaser.Utils.Objects.GetValue;class Td extends Dt{constructor(t,s){super(t,s),this.type="rexTweaker.InputRow",this.bindingTarget=void 0,this.bindTargetKey=void 0,this.autoUpdateEnable=!0;var g=s.inputTitle,C=s.inputField,M=s.background,d=dl(s,"proportion.title",0),l=dl(s,"space.title",0),T;this.orientation===0?T={right:l}:T={bottom:l},this.add(g,{proportion:d,expand:!0,padding:T});var e=s.parentOrientation===1?1:0,d=dl(s,"proportion.inputField",e);this.add(C,{proportion:d,expand:!0}),M&&this.addBackground(M),this.addChildrenMap("title",g),this.addChildrenMap("inputField",C),this.addChildrenMap("background",M),this.setupBinding()}destroy(t){!this.scene||this.ignoreDestroy||(this.stopMonitorTarget(),super.destroy(t))}setTitle(t){var s=this.childrenMap.title;return s.setTitle(t),this}preLayout(){var t=this.childrenMap.title;t&&(t.minWidth=0),super.preLayout()}}Object.assign(Td.prototype,zB,UB,YB);var dm=function(i,t,s){var g=new sm(i,s);return i.add.existing(g),g};class fs extends Dt{get bindingTarget(){return this.getParentSizer().bindingTarget}get bindingKey(){return this.getParentSizer().bindTargetKey}get value(){return this._value}validate(t){return this.syncValueFlag||!this.validateCallback?!0:this.validateCallback(t,this._value,this.bindingTarget,this.bindingKey)}set value(t){if(this._value!==t){var s=this._value;this._value=t,this.syncValueFlag||this.emit("valuechange",t,s,this.bindingTarget,this.bindingKey)}}getValue(){return this.value}setValue(t){return this.value=t,this}syncValue(t){return this.syncValueFlag=!0,this.value=t,this.syncValueFlag=!1,this}get readOnly(){return this._readOnly}set readOnly(t){this._readOnly=t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,!0}setTextFormatCallback(t){return this.textFormatCallback=t,this}setValidateCallback(t){return this.validateCallback=t,this}}class XB extends fs{constructor(t,s){s===void 0&&(s={}),super(t),this.type="rexTweaker.TextInput";var g=s.inputText,C=Dr(t,g);this.add(C,{proportion:1,expand:!0}),this.addChildrenMap("inputText",C),C.on("close",function(){this.setValue(C.value)},this)}get value(){return this._value}set value(t){if(this._value!==t){this.validate(t)||(t=this._value);var s=this.textFormatCallback?this.textFormatCallback(t):t;this.childrenMap.inputText.setText(s),super.value=t}}setInputTextReadOnly(t){return t===void 0&&(t=!0),this.childrenMap.inputText.setReadOnly(t),this}}var Vv=function(i,t,s){var g=new XB(i,s);return i.add.existing(g),g.setInputTextReadOnly(!!t.inputTextReadOnly),g};class WB extends fs{constructor(t,s){s===void 0&&(s={}),super(t),this.type="rexTweaker.NumberInput";var g=s.inputNumber||s.inputText,C=Dr(t,g).setNumberInput();this.add(C,{proportion:1,expand:!0}),this.addChildrenMap("inputText",C),C.on("close",function(){this.setValue(C.value)},this)}get value(){return this._value}set value(t){if(this._value!==t){this.validate(t)||(t=this._value);var s=this.textFormatCallback?this.textFormatCallback(t):t;this.childrenMap.inputText.setText(s),super.value=t}}setInputTextReadOnly(t){return t===void 0&&(t=!0),this.childrenMap.inputText.setReadOnly(t),this}}var HB=function(i,t,s){var g=new WB(i,s);return i.add.existing(g),g.setInputTextReadOnly(!!t.inputTextReadOnly),g},$B=function(i,t){var s=new Dn(i,t);return i.add.existing(s),s};const fl=Phaser.Utils.Objects.GetValue,KB=Phaser.Math.Linear,ZB=Phaser.Math.Snap.Floor;class jB extends fs{constructor(t,s){s===void 0&&(s={}),super(t),this.type="rexTweaker.RangeInput";var g=s.slider,C=this.orientation===0?"track.height":"track.width",M=fl(g,C),l=$B(t,g),x=s.parentOrientation===1?2:0,u=fl(s,"proportion.range.slider",x),T=M===void 0;this.add(l,{proportion:u,expand:T});var e=s.inputNumber||s.inputText,d=Dr(t,e).setNumberInput(),x=s.parentOrientation===1?1:0,u=fl(s,"proportion.range.inputText",x);this.add(d,{proportion:u,expand:!0}),this.addChildrenMap("slider",l),this.addChildrenMap("inputText",d),d.on("close",function(){this.setValue(d.value)},this),l.on("valuechange",function(){var h=KB(this.minValue,this.maxValue,l.value);this.step&&(h=ZB(h,this.step,this.minValue)),this.setValue(h)},this)}get value(){return this._value}set value(t){if(this._value!==t){this.validate(t)||(t=this._value);var s=this.textFormatCallback?this.textFormatCallback(t):t;this.childrenMap.inputText.setText("").setText(s),this.childrenMap.slider.setValue(t,this.minValue,this.maxValue),super.value=t}}setRange(t,s,g){return this.minValue=t,this.maxValue=s,this.step=g,this.childrenMap.slider.setGap(g,t,s),this}setInputTextReadOnly(t){return t===void 0&&(t=!0),this.childrenMap.inputText.setReadOnly(t),this}}var JB=function(i,t,s){var g=new jB(i,s);return i.add.existing(g),g.setRange(t.min,t.max,t.step),g.setInputTextReadOnly(!!t.inputTextReadOnly),g},QB=function(i,t){t=I0(i,t);var s=new Lr(i,t);return i.add.existing(s),s},fm=function(i,t){for(var s=0,g=i.length;s<g;s++){var C=i[s];if(C.value===t)return s}},qB=function(i,t){var s=fm(i,t);if(s!=null)return i[s].text};class _B extends fs{constructor(t,s){s===void 0&&(s={}),super(t),this.type="rexTweaker.ListInput";var g=QB(t,s.list);this.add(g,{proportion:1,expand:!0}),this.addChildrenMap("list",g),g.on("button.click",function(C,M,l,T,e,d){this.setValue(l.value)},this)}get value(){return this._value}set value(t){if(this._value!==t){this.validate(t)||(t=this._value);var s=this.childrenMap.list,g=qB(s.options,t);s.resetDisplayContent({text:g}),super.value=t}}setOptions(t){return this.childrenMap.list.setOptions(t),this}}var t4=function(i,t,s){var g=new _B(i,s);return i.add.existing(g),g.setOptions(t.options),g},cm=function(i,t){var s=new de(i,t);return i.add.existing(s),s},e4=function(i,t){for(var s=0,g=i.length;s<g;s++){var C=i[s];C&&C.setActiveState(s===t)}};const i4=Phaser.Utils.Objects.GetValue;class s4 extends fs{constructor(t,s){s===void 0&&(s={}),super(t),this.type="rexTweaker.ButtonsInput";var g=s.button?$e(s.button):{},C=i4(g,"expand",!0);C&&(g.align="center"),delete g.expand;var M=cm(t,{expand:C});M.buttonConfig=g,this.add(M,{proportion:1,expand:!0}),this.addChildrenMap("list",M),M.on("button.click",function(l,T,e,d){var x=M.options[T];x&&(this._selectedIndex=T,this.setValue(x.value),this._selectedIndex=void 0)},this)}get value(){return this._value}set value(t){if(this._value!==t){this.validate(t)||(t=this._value);var s=this.childrenMap.list,g=this._selectedIndex;g===void 0&&(g=fm(s.options,t)),e4(s.childrenMap.buttons,g),super.value=t}}setOptions(t){var s=this.childrenMap.list;s.options=t;var g=this.scene,C=s.buttonConfig;s.clearButtons(!0);for(var M=0,l=t.length;M<l;M++){var T=t[M],e=We(g,C).setActiveState(!1).resetDisplayContent({text:T.text});s.addButton(e)}return this}}var n4=function(i,t,s){var g=new s4(i,s);return i.add.existing(g),g.setOptions(t.options),g},r4=function(i,t){var s=new hu(i,t);return i.add.existing(s),s};const a4=Phaser.Utils.Objects.GetValue;class o4 extends fs{constructor(t,s){s===void 0&&(s={}),super(t),this.type="rexTweaker.CheckboxInput";var g=s.checkbox,C=r4(t,g),M=a4(g,"size");M!==void 0&&C.setSize(M,M);var l=M!==void 0?0:1;this.add(C,{proportion:0,expand:!1,fitRatio:l}),this.addChildrenMap("checkbox",C),C.on("valuechange",function(T){this.setValue(T)},this)}get value(){return this._value}set value(t){this._value!==t&&(this.validate(t)||(t=this._value),this.childrenMap.checkbox.setValue(t),super.value=t)}}var h4=function(i,t,s){var g=new o4(i,s);return i.add.existing(g),g},l4=function(i,t){var s=new lu(i,t);return i.add.existing(s),s};const u4=Phaser.Utils.Objects.GetValue;class d4 extends fs{constructor(t,s){s===void 0&&(s={}),super(t),this.type="rexTweaker.ToggleSwitchInput";var g=s.toggleSwitch,C=l4(t,g),M=u4(g,"size");M!==void 0&&C.setSize(M,M);var l=M!==void 0?0:1;this.addSpace().add(C,{proportion:0,expand:!1,fitRatio:l}),this.addChildrenMap("toggleSwitch",C),C.on("valuechange",function(T){this.setValue(T)},this)}get value(){return this._value}set value(t){this._value!==t&&(this.validate(t)||(t=this._value),this.childrenMap.toggleSwitch.setValue(t),super.value=t)}}var f4=function(i,t,s){var g=new d4(i,s);return i.add.existing(g),g},c4=function(i,t,s){s===void 0&&(s=!0),s?t=t?$e(t):{}:t||(t={});var g=new ko(i,t);return i.add.existing(g),g};class v4 extends fs{constructor(t,s){s===void 0&&(s={}),super(t),this.type="rexTweaker.ColorInput";var g=s.colorInput,C=c4(t,g);this.add(C,{proportion:1,expand:!0}),this.addChildrenMap("colorInput",C),C.on("valuechange",function(M){this.setValue(M)},this)}get value(){return this._value}set value(t){this._value!==t&&(this.validate(t)||(t=this._value),this.childrenMap.colorInput.setValue(t),super.value=t)}}var p4=function(i,t,s){var g=new v4(i,s);return i.add.existing(g),g},g4=function(i,t,s){var g=t.view,C;switch(g){case Da:C=Vv;break;case om:C=HB;break;case hm:C=JB;break;case lm:C=t4;break;case BB:C=n4;break;case um:C=h4;break;case GB:C=f4;break;case NB:C=p4;break;default:C=ns(g)?g:Vv;break}var M=C(i,t,s,M);return M.setTextFormatCallback(t.format),M};const kv=Phaser.Utils.Objects.GetValue;var m4=function(i,t,s){var g=kv(s,"title")||{},C=dm(i,t,g),M=g4(i,t,s),l=kv(s,"background")||{},T=Xe(i,l),e=new Td(i,{...t,...s,inputTitle:C,inputField:M,background:T});return i.add.existing(e),e.setTitle(t),e};Phaser.Utils.Objects.GetValue;var x4=function(i,t,s){arguments.length===1?(s=i,i=s.bindingTarget,t=s.bindingKey):s===void 0&&(s={}),s.title||(s.title=t),s.view||(s.view=VB(i,t,s));var g=this.styles.inputRow||{};g.parentOrientation=this.styles.orientation;var C=m4(this.scene,s,g),M=C.childrenMap.inputField,l;return this.orientation===1?l=0:(l=this.itemWidth>0?0:1,C.setMinWidth(this.itemWidth)),this.add(C,{proportion:l,expand:!0}),s.onValueChange&&M.on("valuechange",s.onValueChange),s.onValidate&&M.setValidateCallback(s.onValidate),C.setAutoUpdateEnable(s.autoUpdate),C.setBindingTarget(i,t),s.monitor&&C.startMonitorTarget(),s.key&&this.root.addChildrenMap(s.key,C),this},y4=function(i,t){var s=new rs(i,t);return i.add.existing(s),s};const cl=Phaser.Utils.Objects.GetValue;var T4=function(i,t,s){for(var g=cl(s,"title")||{},C=dm(i,t,g),M=t.buttons,l=cl(s,"button")||{},T=[],e=0,d=M.length;e<d;e++){var x=We(i,l);T.push(x);var u=M[e];x.resetDisplayContent({text:u.label}),x.callback=u.callback}var h=cm(i,{buttons:T,expand:T.length===1}),o=cl(s,"background")||{},n=y4(i,o),r=new Td(i,{...s,inputTitle:C,inputField:h,background:n});return i.add.existing(r),r.setTitle(t),h.on("button.click",function(f){f.callback(r.bindingTarget)}),r};const C4=Phaser.Utils.Objects.GetValue;var zv=function(i){var t=this.scene;i===void 0&&(i={}),i.hasOwnProperty("label")&&(i.buttons=[{label:i.label,callback:i.callback}],delete i.label,delete i.callback);var s=i.bindingTarget;delete i.bindingTarget;var g=C4(this.styles,"inputRow")||{},C=T4(t,i,g);return this.add(C,{expand:!0}),s&&C.setBindingTarget(s),i.key&&this.root.addChildrenMap(i.key,C),this};const S4=Phaser.Utils.Objects.GetValue;var P4=function(i){var t=this.scene,s=S4(this.styles,"separator"),g=yd(t,i,s);return this.add(g,{expand:!0}),this},E4=function(i){for(var t=this.sizerChildren,s=0,g=t.length;s<g;s++){var C=t[s];C.setBindingTarget&&C.setBindingTarget(i)}return this},M4=function(){for(var i=0,t=this.sizerChildren,s=0,g=t.length;s<g;s++){var C=t[s];C.rexSizer.hidden||(C.getMinTitleWidth?i=Math.max(i,C.getMinTitleWidth()):C.getMaxInputRowTitleWidth&&(i=Math.max(i,C.getMaxInputRowTitleWidth())))}return i+this.getInnerPadding("left")},w4=function(i){i-=this.getInnerPadding("left");for(var t=this.sizerChildren,s=0,g=t.length;s<g;s++){var C=t[s];C.rexSizer.hidden||(C.setMinTitleWidth?C.setMinTitleWidth(i):C.setInputRowTitleWidth&&C.setInputRowTitleWidth(i))}return this},R4={addFolder:bB,addTab:IB,addInput:x4,addButton:zv,addButtons:zv,addSeparator:P4,setBindingTarget:E4,getMaxInputRowTitleWidth:M4,setInputRowTitleWidth:w4};const Pa=Phaser.Utils.Objects.GetValue;class Cd extends Dt{constructor(t,s){if(s===void 0&&(s={}),s.orientation===void 0&&(s.orientation=1),super(t,s),this.type="rexTweakerShell",this.root=s.root||this,this.styles=Pa(s,"styles")||{},this.styles.orientation=this.orientation,this.itemWidth=Pa(this.styles,"itemWidth",0),this.root===this&&this.orientation===1){var g=Pa(s,"inputRow.alignTitle");if(g===void 0){var C=Pa(this.styles,"inputRow.proportion.title");g=!C}else g&&ot(this.styles,"inputRow.proportion.title",0);this.alignInputRowTitle=g}else this.alignInputRowTitle=!1;var M=yd(t,void 0,s.background);M&&this.addBackground(M)}preLayout(){super.preLayout(),this.alignInputRowTitle&&this.setInputRowTitleWidth(this.getMaxInputRowTitleWidth())}}Object.assign(Cd.prototype,R4);class vm extends Cd{constructor(t,s){s===void 0&&(s={}),s.styles===void 0&&(s.styles={}),s.background=s.styles.background||{},s.space=s.styles.space||{},super(t,s),this.type="rexTweaker"}}ht.register("tweaker",function(i){var t=new vm(this.scene,i);return this.scene.add.existing(t),t});ot(window,"RexPlugins.UI.Tweaker",vm);ht.register("click",function(i,t){return new hs(i,t)});ot(window,"RexPlugins.UI.Click",hs);ht.register("clickOutside",function(i,t){return new Gu(i,t)});ot(window,"RexPlugins.UI.ClickOutside",Gu);ht.register("inTouching",function(i,t){return new Rn(i,t)});ot(window,"RexPlugins.UI.InTouching",Rn);ht.register("tap",function(i,t){return ls(i)||(t=i,i=this.scene),new po(i,t)});ot(window,"RexPlugins.UI.Tap",po);ht.register("press",function(i,t){return ls(i)||(t=i,i=this.scene),new go(i,t)});ot(window,"RexPlugins.UI.Press",go);ht.register("swipe",function(i,t){return ls(i)||(t=i,i=this.scene),new Or(i,t)});ot(window,"RexPlugins.UI.Swipe",Or);ht.register("pan",function(i,t){return ls(i)||(t=i,i=this.scene),new Ug(i,t)});ot(window,"RexPlugins.UI.Pan",Ug);var pm=function(i){for(var t=i.scene.input,s=t.manager,g=s.pointersTotal,C=s.pointers,M,l=0;l<g;l++)if(M=C[l],!(!M.primaryDown||t.getDragState(M)!==0||!su(i,M)))return t.setDragState(M,1),t._drag[M.id]=[i],t.dragDistanceThreshold===0||t.dragTimeThreshold===0?(t.setDragState(M,3),t.processDragStartList(M)):t.setDragState(M,2),!0;return!1};const Ea=Phaser.Utils.Objects.GetValue,Uv=Phaser.Math.Distance.Between,Yv=Phaser.Math.RotateAroundDistance;class gm extends he{constructor(t,s){super(t,{eventEmitter:!1}),this._enable=void 0,t.setInteractive(Ea(s,"inputConfig",void 0)),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.setEnable(Ea(t,"enable",!0)),this.setAxisMode(Ea(t,"axis",0)),this.setAxisRotation(Ea(t,"rotation",0)),this}toJSON(){return{enable:this.enable,axis:this.axisMode,rotation:this.axisRotation}}boot(){var t=this.parent;t.on("dragstart",this.onDragStart,this),t.on("drag",this.onDrag,this),t.on("dragend",this.onDragEnd,this)}shutdown(t){this.isShutdown||(this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragend(),this._enable=t,this.scene.input.setDraggable(this.parent,t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setAxisMode(t){return typeof t=="string"&&(t=A4[t]),this.axisMode=t,this}setAxisRotation(t){return this.axisRotation=t,this}drag(){return pm(this.parent),this}dragend(){if(this.isDragging)return this.scene.input.setDragState(this.pointer,5),this}onDragStart(t,s,g){this.isDragging||(this.pointer=t)}onDrag(t,s,g){if(this.pointer===t){var C=this.parent;if(this.axisMode===0)C.x=s,C.y=g;else if(this.axisRotation===0)this.axisMode===1?C.x=s:this.axisMode===2&&(C.y=g);else{var M,l={x:s,y:g};M=Uv(l.x,l.y,C.x,C.y),l=Yv(l,C.x,C.y,-this.axisRotation,M),this.axisMode===1?l.y=C.y:this.axisMode===2&&(l.x=C.x),M=Uv(l.x,l.y,C.x,C.y),l=Yv(l,C.x,C.y,this.axisRotation,M),C.x=l.x,C.y=l.y}}}onDragEnd(t,s,g,C){this.pointer===t&&(this.pointer=void 0)}get isDragging(){return this.pointer!==void 0}}const A4={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2};ht.register("drag",function(i,t){return new gm(i,t)});ot(window,"RexPlugins.UI.Drag",gm);ht.register("pinch",function(i){return new Yg(this.scene,i)});ot(window,"RexPlugins.UI.Pinch",Yg);ht.register("rotate",function(i){return new Vu(this.scene,i)});ot(window,"RexPlugins.UI.Rotate",Vu);const O4=Phaser.Utils.Objects.IsPlainObject,Xv=Phaser.Utils.Objects.GetValue;var Wv=function(i,t,s){var g;if(i===void 0)i=s.texture.key,t=s.frame.name;else if(O4(i)){var C=i;i=Xv(C,"key",s.texture.key),t=Xv(C,"frame",s.frame.name)}else typeof i=="string"||(g=i);return g===void 0&&(g=function(M){M.setTexture(i,t)}),g};const or=Phaser.Utils.Objects.GetValue,b4=Phaser.Utils.Objects.GetAdvancedValue,F4=Phaser.Math.Linear;class mm extends Gs{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setDuration(b4(t,"duration",500)),this.setEase(or(t,"ease","Sine")),this.setOrientation(or(t,"orientation",0)),this.setFrontFace(or(t,"front",void 0)),this.setBackFace(or(t,"back",void 0)),this.setFace(or(t,"face",0)),this}setOrientation(t){return typeof t=="string"&&(t=L4[t]),this.orientation=t,this}get face(){return this._face}set face(t){typeof t=="string"&&(t=D4[t]),this._face=t,t===0&&this.frontFaceCallback?this.frontFaceCallback(this.parent):t===1&&this.backFaceCallback&&this.backFaceCallback(this.parent)}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}setFrontFace(t,s){return this.frontFaceCallback=Wv(t,s,this.parent),this}setBackFace(t,s){return this.backFaceCallback=Wv(t,s,this.parent),this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.orientation===0?this.scale0=t.scaleX:this.scale0=t.scaleY,this.timer.setDelay(this.delay).setDuration(this.duration/2).setRepeat(1),super.start(),this}flip(t){return this.isRunning?this:(t!==void 0&&this.setDuration(t),this.start(),this)}updateGameObject(t,s){s.justRestart&&this.toggleFace();var g=s.t;s.isOddIteration&&(g=1-g),g=this.easeFn(g);var C=F4(this.scale0,0,g);this.orientation===0?t.scaleX=C:t.scaleY=C}}const L4={x:0,horizontal:0,y:1,vertical:1},D4={front:0,back:1};ht.register("flip",function(i,t){return new mm(i,t)});ot(window,"RexPlugins.UI.Flip",mm);ht.register("shake",function(i,t){return new bu(i,t)});ot(window,"RexPlugins.UI.Shake",bu);ht.register("touchEventStop",function(i,t){return new fo(i,t)});ot(window,"RexPlugins.UI.TouchEventStop",fo);ht.register("perspective",function(i,t){return new Z0(i,t)});ot(window,"RexPlugins.UI.Perspective",Z0);const xm=Phaser.Math.RotateAround;var vl=function(i,t,s){var g=i.width/2,C=i.height/2;return pe.x=t-g,pe.y=s-C,xm(pe,0,0,i.rotation),pe.x*=i.scaleX,pe.y*=i.scaleY,pe.x+=i.x,pe.y+=i.y,pe},I4=function(i,t,s){var g=i.width/2,C=i.height/2;return pe.x=t-i.x,pe.y=s-i.y,pe.x/=i.scaleX,pe.y/=i.scaleY,xm(pe,0,0,-i.rotation),pe.x+=g,pe.y+=C,pe},pe={x:0,y:0};class B4{constructor(t,s){this.parent=t,this.vertex=s,this._localX=void 0,this._localY=void 0}destroy(){this.parent=void 0,this.vertex=void 0}updateVertexPosition(t,s){var g=this.parent,C=g.height,M=g.frame.cutWidth/C/2,l=g.frame.cutHeight/C/2,T=t/C-M,e=s/C-l,d=this.vertex;return d.x=T,d.y=-e,g.forceUpdate(),this}get localX(){return this._localX}set localX(t){this.setLocalXY(t,this._localY)}get localY(){return this._localY}set localY(t){this.setLocalXY(this._localX,t)}get localXOrigin(){return this._localXOrigin}get localYOrigin(){return this._localYOrigin}resetLocalXY(t,s){return this._localXOrigin=t,this._localYOrigin=s,this._localX=t,this._localY=s,this}setLocalXY(t,s,g){return this._localX===t&&this._localY===s?this:(this._localX=t,this._localY=s,g||this.updateVertexPosition(t,s),this)}setWorldXY(t,s){if(this._worldX===t&&this._worldY===s)return this;var g=I4(this.parent,t,s);return this.setLocalXY(g.x,g.y),this}setPosition(t,s){return this.setWorldXY(t,s),this}getWorldXY(){return vl(this.parent,this._localX,this._localY)}get x(){var t=vl(this.parent,this._localX,this._localY);return t.x}set x(t){this.setWorldXY(t,this.y)}get y(){var t=vl(this.parent,this._localX,this._localY);return t.y}set y(t){this.setWorldXY(this.x,t)}}const G4=Phaser.Geom.Mesh.Vertex,N4=Phaser.Geom.Mesh.Face;var V4=function(i){for(var t=i.isNinePointMode,s=t?9:4,g=i.vertices,C=i.faces,M=i.controlPoints,l=0;l<s;l++){var T=new G4;g.push(T),M.push(new B4(i,T))}var e;t?e=U4:i.fourPointsModeRTL?e=z4:e=k4;for(var l=0,d=e.length;l<d;l+=3){var x=g[e[l+0]],u=g[e[l+1]],h=g[e[l+2]];C.push(new N4(x,u,h))}t?(i.topLeft=M[0],i.topCenter=M[1],i.topRight=M[2],i.centerLeft=M[3],i.center=M[4],i.centerRight=M[5],i.bottomLeft=M[6],i.bottomCenter=M[7],i.bottomRight=M[8]):(i.topLeft=M[0],i.topRight=M[1],i.bottomLeft=M[2],i.bottomRight=M[3])};const k4=[0,2,3,0,3,1],z4=[1,3,2,1,2,0],U4=[0,3,4,0,4,1,1,4,2,4,5,2,3,6,4,6,7,4,4,7,8,4,8,5];var Y4=function(i){var t,s=0,g=i.height,C=0,M=i.width;if(i.isNinePointMode){var l=(C+M)/2,T=(s+g)/2;t=[C,s,l,s,M,s,C,T,l,T,M,T,C,g,l,g,M,g]}else t=[C,s,M,s,C,g,M,g];return t};const X4=Phaser.GameObjects.Mesh,W4=Phaser.Utils.Objects.IsPlainObject,gn=Phaser.Utils.Objects.GetValue;let H4=class extends X4{constructor(t,s,g,C,M,l){W4(s)&&(l=s,s=gn(l,"x",0),g=gn(l,"y",0),C=gn(l,"key",null),M=gn(l,"frame",null)),super(t,s,g,C,M),this.type="rexQuadImage",this.isNinePointMode=gn(l,"ninePointMode",!1),this.fourPointsModeRTL=gn(l,"rtl",!1),this.controlPoints=[],V4(this),this.hideCCW=!1,this.syncSize()}destroy(t){if(!(!this.scene||this.ignoreDestroy)){super.destroy(t);for(var s=0,g=this.controlPoints.length;s<g;s++)this.controlPoints[s].destroy();this.controlPoints=void 0}}resetVerts(){this.dirtyCache[9]=-1;for(var t=Y4(this),s=this.width,g=this.height,C=this.frame.cutWidth/g/2,M=this.frame.cutHeight/g/2,l=this.frame.u0,T=this.frame.u1,e=this.frame.v0,d=this.frame.v1,x=T-l,u=d-e,h=this.controlPoints,o=0,n=t.length;o<n;o+=2){var r=t[o+0],f=t[o+1],a=o/2,c=r/g-C,p=f/g-M,v=l+x*(r/s),m=e+u*(f/g);this.vertices[a].set(c,-p,0).setUVs(v,m),h[a].resetLocalXY(r,f)}return this}syncSize(){return this.setSizeToFrame(),this.setOrtho(this.width/this.height,1),this.resetVerts(),this}forceUpdate(){return this.dirtyCache[10]=1,this}get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}};Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;var Hv=function(i,t,s){t===void 0&&(t=0),s===void 0&&(s=0);for(var g=i.width,C=i.height,M=g*.5,l=C*.5,T=Math.tan(t)*l,e=Math.tan(s)*M,d=i.controlPoints,x=0,u=d.length;x<u;x++){var h=d[x],o=h.localXOrigin,n=h.localYOrigin;h.localX=o+(n>l?T:-T),h.localY=n+(o>M?e:-e)}};const $4=Phaser.Utils.Objects.IsPlainObject,Ma=Phaser.Utils.Objects.GetValue,$v=Phaser.Math.DegToRad,Kv=Phaser.Math.RadToDeg;class K4 extends H4{constructor(t,s,g,C,M){if($4(s)){var l=s;s=Ma(l,"x",0),g=Ma(l,"y",0),C=Ma(l,"key",null),M=Ma(l,"frame",null)}super(t,s,g,C,M),this.type="rexSkewmage",this._skewX=0,this._skewY=0}get skewX(){return this._skewX}set skewX(t){this._skewX=t,Hv(this,this._skewX,this._skewY)}get skewXDeg(){return Kv(this._skewX)}set skewXDeg(t){this.skewX=$v(t)}get skewY(){return this._skewY}set skewY(t){this._skewY=t,Hv(this,this._skewX,this._skewY)}get skewYDeg(){return Kv(this._skewY)}set skewYDeg(t){this.skewY=$v(t)}setSkewX(t){return this.skewX=t,this}setSkewY(t){return this.skewY=t,this}setSkew(t,s){return s===void 0&&(s=t),this.skewX=t,this.skewY=s,this}setSkewXDeg(t){return this.skewXDeg=t,this}setSkewYDeg(t){return this.skewYDeg=t,this}setSkewDeg(t,s){return s===void 0&&(s=t),this.skewXDeg=t,this.skewYDeg=s,this}}const Z4=Phaser.Utils.Objects.IsPlainObject,wa=Phaser.Utils.Objects.GetValue;class j4 extends K4{constructor(t,s,g,C,M){if(Z4(s)){var l=s;s=wa(l,"x",0),g=wa(l,"y",0),C=wa(l,"width",32),M=wa(l,"height",32)}var T=W0(t,C,M);super(t,s,g,T,null),this.type="rexSkewRenderTexture",this.rt=this.texture}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.rt.destroy(),this.rt=null)}}class ym extends K0(j4){get skewState(){return this.isRunning}}ht.register("skew",function(i,t){return new ym(i,t)});ot(window,"RexPlugins.UI.Skew",ym);ht.register("anchor",function(i,t){return new Ru(i,t)});ot(window,"RexPlugins.UI.Anchor",Ru);ht.register("textTyping",function(i,t){return new fd(i,t)});ot(window,"RexPlugins.UI.TextTyping",fd);ht.register("textPage",function(i,t){return new Bo(i,t)});ot(window,"RexPlugins.UI.TextPage",Bo);var Tn=void 0,J4=function(i){i!==Tn&&(Tn!==void 0&&Tn.close(),Tn=i)},Q4=function(i){i===Tn&&(Tn=void 0)};const Li=Phaser.Utils.Objects.GetValue,q4=Phaser.Utils.Objects.Clone;var _4=function(i,t){t===void 0&&(t={}),t=q4(t);var s=i.scene,g=i.style,C=Li(t,"backgroundColor",g.backgroundColor);C===null&&(C="transparent"),t.text=Li(t,"text",i.text),t.fontFamily=Li(t,"fontFamily",g.fontFamily),t.fontSize=Li(t,"fontSize",g.fontSize),t.color=Li(t,"color",g.color),t.backgroundColor=C,t.direction=Li(t,"rtl",g.rtl)?"rtl":"ltr",t.align=Li(t,"align",t9(g)),t.direction==="rtl"&&ju(i)&&(t.align="right");var M=new Co(s,i.x,i.y,Li(t,"width",i.width),Li(t,"height",i.height),t);M.setOrigin(i.originX,i.originY).setScrollFactor(i.scrollFactorX,i.scrollFactorY);var l=i.parentContainer;return l?l.add(M):s.add.existing(M),M},t9=function(i){return i.hasOwnProperty("align")?i.align:i.hasOwnProperty("halign")?i.halign:"left"},e9=function(i,t,s){return i.time.delayedCall(0,t,[],s)};const Ra=Phaser.Utils.Objects.GetValue,i9=Phaser.Utils.Objects.Merge;var s9=function(i,t){i===void 0&&(i={}),i=i9(i,this.openConfig),J4(this),ns(i)&&(t=i,i=void 0),t===void 0&&(t=Ra(i,"onClose",void 0));var s=Ra(i,"onOpen",void 0),g=Ra(i,"onTextChanged",void 0);return this.inputText=_4(this.parent,i).on("textchange",function(C){var M=C.text;g?g(this.parent,M):this.parent.text=M},this).setFocus(),this.parent.setVisible(!1),this.onClose=t,Ra(i,"enterClose",!0)&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=e9(this.scene,function(){this.scene.input.once("pointerdown",this.close,this),s&&s(this.parent),this.emit("open",this.parent)},this),this},n9=function(){return Q4(this),this.parent.setVisible(!0),this.inputText&&(this.inputText.destroy(),this.inputText=void 0),this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this.emit("close",this.parent),this},r9={open:s9,close:n9};const a9=Phaser.Utils.Objects.GetValue;class zo extends he{constructor(t,s){super(t),this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0,this.setOpenConfig(s);var g=a9(s,"clickEnable",!0);g&&t.on("pointerdown",function(){this.open()},this).setInteractive()}shutdown(t){this.isShutdown||(this.close(),super.shutdown(t))}setOpenConfig(t){return t===void 0&&(t={}),this.openConfig=t,this}get isOpened(){return this.inputText!==void 0}get text(){return this.isOpened?this.inputText.text:this.parent.text}}Object.assign(zo.prototype,r9);var o9=function(i,t,s){return i._edit||(i._edit=new zo(i,{clickEnable:!1})),i._edit.open(t,s),i._edit};ht.register("textEdit",function(i,t){return new zo(i,t)});ot(window,"RexPlugins.UI.TextEdit",zo);const pl=65535;var Ha=function(i,t,s){if(t==null)return i;if(t===0)return gl(i,0,s),i;var g=i.text.length;if(g===0)return gl(i,t,s),i;var C=Math.floor(t*1.5/g);s!==void 0&&C>s&&(C=Math.floor(s));for(var M={},l=jv(i,C,t,s,M),T=0;T<=pl&&l!==0;T++){if(C+=l,C<0){C=0;break}l=jv(i,C,t,s,M)}return T===pl&&console.warn(`FontSizeFit: Test count exceeds ${pl}`),i.setFontSize(C),gl(i,t,s),i},Zv=function(i,t,s){return s[t]===void 0&&(i.setFontSize(t),s[t]={width:i.width,height:i.height}),s[t]},jv=function(i,t,s,g,C){var M=Zv(i,t,C),l=Zv(i,t+1,C),T;if(g!==void 0)if(M.height<=g&&l.height>g)T=0;else{if(M.height>g)return-1;T=Math.floor(g-M.height)}var e;if(M.width<=s&&l.width>s)return 0;if(M.width>s)return-1;var e=Math.floor(s-M.width);return T===void 0?e:Math.min(e,T)},gl=function(i,t,s){var g=i.style;g&&(g.fixedWidth=t,g.parent.width=t,s!==void 0&&(g.fixedHeight=s,g.parent.height=s),g.update(!1))};const ml=Phaser.Utils.Objects.GetValue;var h9=function(i,t){typeof t=="number"&&(t={minWidth:t});var s=ml(t,"minWidth",0),g=ml(t,"minHeight",0),C=ml(t,"fitHeight",!1);return i._minWidth=s,i._minHeight=g,C?(i.runWidthWrap=function(M){return i.setFixedSize&&i.setFixedSize(0,0),i.setFontSize(1),i},i.resize=function(M,l){return Ha(i,M,l),i}):(i.runWidthWrap=function(M){return i.setFixedSize&&i.setFixedSize(0,0),Ha(i,M,void 0),i},i.resize=function(M,l){return i.width===M&&i.height===l||i.setFixedSize(M,l),i}),i};class Tm extends Phaser.Plugins.ScenePlugin{constructor(t,s){super(t,s),this.add=new ht(t)}start(){var t=this.scene.events;t.on("destroy",this.destroy,this)}isInTouching(t,s,g,C){return t.visible?co(t,s,g,C):!1}get viewport(){return bn(this.scene,this.scene.cameras.main,!0)}}var l9={getParentSizer:Ke,getTopmostSizer:Mg,hide:qi,show:Qi,isShown:Fu,edit:o9,wrapExpandText:v0,fontSizeExpandText:h9,fontSizeResize:Ha,setFontSizeToFitWidth:Ha,waitEvent:io,waitComplete:fe,delayPromise:_g,setChildrenInteractive:ku,fadeIn:ho,fadeOutDestroy:lo,easeMoveTo:Dg,easeMoveFrom:Ig,modal:Iu,modalPromise:fA,modalClose:Vg,requestDrag:pm,openFileChooser:fF};Object.assign(Tm.prototype,l9);var Cm={exports:{}};(function(i){(function(){function t(Z,Q,nt){return Z.call.apply(Z.bind,arguments)}function s(Z,Q,nt){if(!Z)throw Error();if(2<arguments.length){var it=Array.prototype.slice.call(arguments,2);return function(){var lt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(lt,it),Z.apply(Q,lt)}}return function(){return Z.apply(Q,arguments)}}function g(Z,Q,nt){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?t:s,g.apply(null,arguments)}var C=Date.now||function(){return+new Date};function M(Z,Q){this.a=Z,this.o=Q||Z,this.c=this.o.document}var l=!!window.FontFace;function T(Z,Q,nt,it){if(Q=Z.c.createElement(Q),nt)for(var lt in nt)nt.hasOwnProperty(lt)&&(lt=="style"?Q.style.cssText=nt[lt]:Q.setAttribute(lt,nt[lt]));return it&&Q.appendChild(Z.c.createTextNode(it)),Q}function e(Z,Q,nt){Z=Z.c.getElementsByTagName(Q)[0],Z||(Z=document.documentElement),Z.insertBefore(nt,Z.lastChild)}function d(Z){Z.parentNode&&Z.parentNode.removeChild(Z)}function x(Z,Q,nt){Q=Q||[],nt=nt||[];for(var it=Z.className.split(/\s+/),lt=0;lt<Q.length;lt+=1){for(var pt=!1,mt=0;mt<it.length;mt+=1)if(Q[lt]===it[mt]){pt=!0;break}pt||it.push(Q[lt])}for(Q=[],lt=0;lt<it.length;lt+=1){for(pt=!1,mt=0;mt<nt.length;mt+=1)if(it[lt]===nt[mt]){pt=!0;break}pt||Q.push(it[lt])}Z.className=Q.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function u(Z,Q){for(var nt=Z.className.split(/\s+/),it=0,lt=nt.length;it<lt;it++)if(nt[it]==Q)return!0;return!1}function h(Z){return Z.o.location.hostname||Z.a.location.hostname}function o(Z,Q,nt){function it(){Et&&lt&&pt&&(Et(mt),Et=null)}Q=T(Z,"link",{rel:"stylesheet",href:Q,media:"all"});var lt=!1,pt=!0,mt=null,Et=nt||null;l?(Q.onload=function(){lt=!0,it()},Q.onerror=function(){lt=!0,mt=Error("Stylesheet failed to load"),it()}):setTimeout(function(){lt=!0,it()},0),e(Z,"head",Q)}function n(Z,Q,nt,it){var lt=Z.c.getElementsByTagName("head")[0];if(lt){var pt=T(Z,"script",{src:Q}),mt=!1;return pt.onload=pt.onreadystatechange=function(){mt||this.readyState&&this.readyState!="loaded"&&this.readyState!="complete"||(mt=!0,nt&&nt(null),pt.onload=pt.onreadystatechange=null,pt.parentNode.tagName=="HEAD"&&lt.removeChild(pt))},lt.appendChild(pt),setTimeout(function(){mt||(mt=!0,nt&&nt(Error("Script load timeout")))},it||5e3),pt}return null}function r(){this.a=0,this.c=null}function f(Z){return Z.a++,function(){Z.a--,c(Z)}}function a(Z,Q){Z.c=Q,c(Z)}function c(Z){Z.a==0&&Z.c&&(Z.c(),Z.c=null)}function p(Z){this.a=Z||"-"}p.prototype.c=function(Z){for(var Q=[],nt=0;nt<arguments.length;nt++)Q.push(arguments[nt].replace(/[\W_]+/g,"").toLowerCase());return Q.join(this.a)};function v(Z,Q){this.c=Z,this.f=4,this.a="n";var nt=(Q||"n4").match(/^([nio])([1-9])$/i);nt&&(this.a=nt[1],this.f=parseInt(nt[2],10))}function m(Z){return E(Z)+" "+(Z.f+"00")+" 300px "+y(Z.c)}function y(Z){var Q=[];Z=Z.split(/,\s*/);for(var nt=0;nt<Z.length;nt++){var it=Z[nt].replace(/['"]/g,"");it.indexOf(" ")!=-1||/^\d/.test(it)?Q.push("'"+it+"'"):Q.push(it)}return Q.join(",")}function P(Z){return Z.a+Z.f}function E(Z){var Q="normal";return Z.a==="o"?Q="oblique":Z.a==="i"&&(Q="italic"),Q}function S(Z){var Q=4,nt="n",it=null;return Z&&((it=Z.match(/(normal|oblique|italic)/i))&&it[1]&&(nt=it[1].substr(0,1).toLowerCase()),(it=Z.match(/([1-9]00|normal|bold)/i))&&it[1]&&(/bold/i.test(it[1])?Q=7:/[1-9]00/.test(it[1])&&(Q=parseInt(it[1].substr(0,1),10)))),nt+Q}function w(Z,Q){this.c=Z,this.f=Z.o.document.documentElement,this.h=Q,this.a=new p("-"),this.j=Q.events!==!1,this.g=Q.classes!==!1}function R(Z){Z.g&&x(Z.f,[Z.a.c("wf","loading")]),O(Z,"loading")}function A(Z){if(Z.g){var Q=u(Z.f,Z.a.c("wf","active")),nt=[],it=[Z.a.c("wf","loading")];Q||nt.push(Z.a.c("wf","inactive")),x(Z.f,nt,it)}O(Z,"inactive")}function O(Z,Q,nt){Z.j&&Z.h[Q]&&(nt?Z.h[Q](nt.c,P(nt)):Z.h[Q]())}function F(){this.c={}}function b(Z,Q,nt){var it=[],lt;for(lt in Q)if(Q.hasOwnProperty(lt)){var pt=Z.c[lt];pt&&it.push(pt(Q[lt],nt))}return it}function D(Z,Q){this.c=Z,this.f=Q,this.a=T(this.c,"span",{"aria-hidden":"true"},this.f)}function I(Z){e(Z.c,"body",Z.a)}function B(Z){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+y(Z.c)+";"+("font-style:"+E(Z)+";font-weight:"+(Z.f+"00")+";")}function k(Z,Q,nt,it,lt,pt){this.g=Z,this.j=Q,this.a=it,this.c=nt,this.f=lt||3e3,this.h=pt||void 0}k.prototype.start=function(){var Z=this.c.o.document,Q=this,nt=C(),it=new Promise(function(mt,Et){function wt(){C()-nt>=Q.f?Et():Z.fonts.load(m(Q.a),Q.h).then(function($t){1<=$t.length?mt():setTimeout(wt,25)},function(){Et()})}wt()}),lt=null,pt=new Promise(function(mt,Et){lt=setTimeout(Et,Q.f)});Promise.race([pt,it]).then(function(){lt&&(clearTimeout(lt),lt=null),Q.g(Q.a)},function(){Q.j(Q.a)})};function U(Z,Q,nt,it,lt,pt,mt){this.v=Z,this.B=Q,this.c=nt,this.a=it,this.s=mt||"BESbswy",this.f={},this.w=lt||3e3,this.u=pt||null,this.m=this.j=this.h=this.g=null,this.g=new D(this.c,this.s),this.h=new D(this.c,this.s),this.j=new D(this.c,this.s),this.m=new D(this.c,this.s),Z=new v(this.a.c+",serif",P(this.a)),Z=B(Z),this.g.a.style.cssText=Z,Z=new v(this.a.c+",sans-serif",P(this.a)),Z=B(Z),this.h.a.style.cssText=Z,Z=new v("serif",P(this.a)),Z=B(Z),this.j.a.style.cssText=Z,Z=new v("sans-serif",P(this.a)),Z=B(Z),this.m.a.style.cssText=Z,I(this.g),I(this.h),I(this.j),I(this.m)}var X={D:"serif",C:"sans-serif"},H=null;function N(){if(H===null){var Z=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);H=!!Z&&(536>parseInt(Z[1],10)||parseInt(Z[1],10)===536&&11>=parseInt(Z[2],10))}return H}U.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=C(),L(this)};function z(Z,Q,nt){for(var it in X)if(X.hasOwnProperty(it)&&Q===Z.f[X[it]]&&nt===Z.f[X[it]])return!0;return!1}function L(Z){var Q=Z.g.a.offsetWidth,nt=Z.h.a.offsetWidth,it;(it=Q===Z.f.serif&&nt===Z.f["sans-serif"])||(it=N()&&z(Z,Q,nt)),it?C()-Z.A>=Z.w?N()&&z(Z,Q,nt)&&(Z.u===null||Z.u.hasOwnProperty(Z.a.c))?V(Z,Z.v):V(Z,Z.B):G(Z):V(Z,Z.v)}function G(Z){setTimeout(g(function(){L(this)},Z),50)}function V(Z,Q){setTimeout(g(function(){d(this.g.a),d(this.h.a),d(this.j.a),d(this.m.a),Q(this.a)},Z),0)}function Y(Z,Q,nt){this.c=Z,this.a=Q,this.f=0,this.m=this.j=!1,this.s=nt}var W=null;Y.prototype.g=function(Z){var Q=this.a;Q.g&&x(Q.f,[Q.a.c("wf",Z.c,P(Z).toString(),"active")],[Q.a.c("wf",Z.c,P(Z).toString(),"loading"),Q.a.c("wf",Z.c,P(Z).toString(),"inactive")]),O(Q,"fontactive",Z),this.m=!0,$(this)},Y.prototype.h=function(Z){var Q=this.a;if(Q.g){var nt=u(Q.f,Q.a.c("wf",Z.c,P(Z).toString(),"active")),it=[],lt=[Q.a.c("wf",Z.c,P(Z).toString(),"loading")];nt||it.push(Q.a.c("wf",Z.c,P(Z).toString(),"inactive")),x(Q.f,it,lt)}O(Q,"fontinactive",Z),$(this)};function $(Z){--Z.f==0&&Z.j&&(Z.m?(Z=Z.a,Z.g&&x(Z.f,[Z.a.c("wf","active")],[Z.a.c("wf","loading"),Z.a.c("wf","inactive")]),O(Z,"active")):A(Z.a))}function K(Z){this.j=Z,this.a=new F,this.h=0,this.f=this.g=!0}K.prototype.load=function(Z){this.c=new M(this.j,Z.context||this.j),this.g=Z.events!==!1,this.f=Z.classes!==!1,J(this,new w(this.c,Z),Z)};function j(Z,Q,nt,it,lt){var pt=--Z.h==0;(Z.f||Z.g)&&setTimeout(function(){var mt=lt||null,Et=it||null||{};if(nt.length===0&&pt)A(Q.a);else{Q.f+=nt.length,pt&&(Q.j=pt);var wt,$t=[];for(wt=0;wt<nt.length;wt++){var Kt=nt[wt],xe=Et[Kt.c],je=Q.a,Xs=Kt;if(je.g&&x(je.f,[je.a.c("wf",Xs.c,P(Xs).toString(),"loading")]),O(je,"fontloading",Xs),je=null,W===null)if(window.FontFace){var Xs=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),Am=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);W=Xs?42<parseInt(Xs[1],10):!Am}else W=!1;W?je=new k(g(Q.g,Q),g(Q.h,Q),Q.c,Kt,Q.s,xe):je=new U(g(Q.g,Q),g(Q.h,Q),Q.c,Kt,Q.s,mt,xe),$t.push(je)}for(wt=0;wt<$t.length;wt++)$t[wt].start()}},0)}function J(Z,Q,nt){var lt=[],it=nt.timeout;R(Q);var lt=b(Z.a,nt,Z.c),pt=new Y(Z.c,Q,it);for(Z.h=lt.length,Q=0,nt=lt.length;Q<nt;Q++)lt[Q].load(function(mt,Et,wt){j(Z,pt,mt,Et,wt)})}function q(Z,Q){this.c=Z,this.a=Q}q.prototype.load=function(Z){function Q(){if(pt["__mti_fntLst"+it]){var mt=pt["__mti_fntLst"+it](),Et=[],wt;if(mt)for(var $t=0;$t<mt.length;$t++){var Kt=mt[$t].fontfamily;mt[$t].fontStyle!=null&&mt[$t].fontWeight!=null?(wt=mt[$t].fontStyle+mt[$t].fontWeight,Et.push(new v(Kt,wt))):Et.push(new v(Kt))}Z(Et)}else setTimeout(function(){Q()},50)}var nt=this,it=nt.a.projectId,lt=nt.a.version;if(it){var pt=nt.c.o;n(this.c,(nt.a.api||"https://fast.fonts.net/jsapi")+"/"+it+".js"+(lt?"?v="+lt:""),function(mt){mt?Z([]):(pt["__MonotypeConfiguration__"+it]=function(){return nt.a},Q())}).id="__MonotypeAPIScript__"+it}else Z([])};function _(Z,Q){this.c=Z,this.a=Q}_.prototype.load=function(Z){var Q,nt,it=this.a.urls||[],lt=this.a.families||[],pt=this.a.testStrings||{},mt=new r;for(Q=0,nt=it.length;Q<nt;Q++)o(this.c,it[Q],f(mt));var Et=[];for(Q=0,nt=lt.length;Q<nt;Q++)if(it=lt[Q].split(":"),it[1])for(var wt=it[1].split(","),$t=0;$t<wt.length;$t+=1)Et.push(new v(it[0],wt[$t]));else Et.push(new v(it[0]));a(mt,function(){Z(Et,pt)})};function et(Z,Q){Z?this.c=Z:this.c=tt,this.a=[],this.f=[],this.g=Q||""}var tt="https://fonts.googleapis.com/css";function rt(Z,Q){for(var nt=Q.length,it=0;it<nt;it++){var lt=Q[it].split(":");lt.length==3&&Z.f.push(lt.pop());var pt="";lt.length==2&&lt[1]!=""&&(pt=":"),Z.a.push(lt.join(pt))}}function ft(Z){if(Z.a.length==0)throw Error("No fonts to load!");if(Z.c.indexOf("kit=")!=-1)return Z.c;for(var Q=Z.a.length,nt=[],it=0;it<Q;it++)nt.push(Z.a[it].replace(/ /g,"+"));return Q=Z.c+"?family="+nt.join("%7C"),0<Z.f.length&&(Q+="&subset="+Z.f.join(",")),0<Z.g.length&&(Q+="&text="+encodeURIComponent(Z.g)),Q}function vt(Z){this.f=Z,this.a=[],this.c={}}var ct={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},st={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},dt={i:"i",italic:"i",n:"n",normal:"n"},ut=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function Ct(Z){for(var Q=Z.f.length,nt=0;nt<Q;nt++){var it=Z.f[nt].split(":"),lt=it[0].replace(/\+/g," "),pt=["n4"];if(2<=it.length){var mt,Et=it[1];if(mt=[],Et)for(var Et=Et.split(","),wt=Et.length,$t=0;$t<wt;$t++){var Kt;if(Kt=Et[$t],Kt.match(/^[\w-]+$/)){var xe=ut.exec(Kt.toLowerCase());if(xe==null)Kt="";else{if(Kt=xe[2],Kt=Kt==null||Kt==""?"n":dt[Kt],xe=xe[1],xe==null||xe=="")xe="4";else var je=st[xe],xe=je||(isNaN(xe)?"4":xe.substr(0,1));Kt=[Kt,xe].join("")}}else Kt="";Kt&&mt.push(Kt)}0<mt.length&&(pt=mt),it.length==3&&(it=it[2],mt=[],it=it?it.split(","):mt,0<it.length&&(it=ct[it[0]])&&(Z.c[lt]=it))}for(Z.c[lt]||(it=ct[lt])&&(Z.c[lt]=it),it=0;it<pt.length;it+=1)Z.a.push(new v(lt,pt[it]))}}function Tt(Z,Q){this.c=Z,this.a=Q}var Xt={Arimo:!0,Cousine:!0,Tinos:!0};Tt.prototype.load=function(Z){var Q=new r,nt=this.c,it=new et(this.a.api,this.a.text),lt=this.a.families;rt(it,lt);var pt=new vt(lt);Ct(pt),o(nt,ft(it),f(Q)),a(Q,function(){Z(pt.a,pt.c,Xt)})};function Bt(Z,Q){this.c=Z,this.a=Q}Bt.prototype.load=function(Z){var Q=this.a.id,nt=this.c.o;Q?n(this.c,(this.a.api||"https://use.typekit.net")+"/"+Q+".js",function(it){if(it)Z([]);else if(nt.Typekit&&nt.Typekit.config&&nt.Typekit.config.fn){it=nt.Typekit.config.fn;for(var lt=[],pt=0;pt<it.length;pt+=2)for(var mt=it[pt],Et=it[pt+1],wt=0;wt<Et.length;wt++)lt.push(new v(mt,Et[wt]));try{nt.Typekit.load({events:!1,classes:!1,async:!0})}catch{}Z(lt)}},2e3):Z([])};function Ot(Z,Q){this.c=Z,this.f=Q,this.a=[]}Ot.prototype.load=function(Z){var Q=this.f.id,nt=this.c.o,it=this;Q?(nt.__webfontfontdeckmodule__||(nt.__webfontfontdeckmodule__={}),nt.__webfontfontdeckmodule__[Q]=function(lt,pt){for(var mt=0,Et=pt.fonts.length;mt<Et;++mt){var wt=pt.fonts[mt];it.a.push(new v(wt.name,S("font-weight:"+wt.weight+";font-style:"+wt.style)))}Z(it.a)},n(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+h(this.c)+"/"+Q+".js",function(lt){lt&&Z([])})):Z([])};var yt=new K(window);yt.a.c.custom=function(Z,Q){return new _(Q,Z)},yt.a.c.fontdeck=function(Z,Q){return new Ot(Q,Z)},yt.a.c.monotype=function(Z,Q){return new q(Q,Z)},yt.a.c.typekit=function(Z,Q){return new Bt(Q,Z)},yt.a.c.google=function(Z,Q){return new Tt(Q,Z)};var Gt={load:g(yt.load,yt)};i.exports?i.exports=Gt:(window.WebFont=Gt,window.WebFontConfig&&yt.load(window.WebFontConfig))})()})(Cm);var u9=Cm.exports;const d9=ip(u9);class f9 extends me.Loader.File{constructor(t,s,g="google"){super(t,{type:"webfont",key:s.toString()}),this.fontNames=Array.isArray(s)?s:[s],this.service=g}load(){const t={active:()=>{this.loader.nextFile(this,!0)}};switch(this.service){case"google":t.google={families:this.fontNames};break;default:throw new Error("Unsupported font service")}d9.load(t)}}class c9 extends Phaser.Scene{constructor(){super("bootGame")}init(){}preload(){this.add.text(20,20,"Loading game",{fontSize:24});var t=this.add.text(260,20,"0%",{fontSize:24}),s=this,g=!1,C=!1,M=!1;this.load.on("progress",function(l){var T=parseInt(l*100);t.text=T+"%",T<90&&T>60&&M==!1?(M=!0,s.add.text(240,20,".",{fontSize:24})):T<60&&T>30&&C==!1?(C=!0,s.add.text(220,20,".",{fontSize:24})):T<30&&T>0&&g==!1&&(g=!0,s.add.text(200,20,".",{fontSize:24}))}),this.load.on("complete",function(){}),this.load.addFile(new f9(this.load,"Press Start 2P")),this.load.image("homeBg","./src/assets/images/home/BG.png")}create(){this.scene.start("Index")}update(){}}class J8 extends Phaser.GameObjects.Container{constructor(t,s,g,C,M,l,T,e,d){super(t,s,g),this.leftPart=t.add.sprite(-C/2,0,M,l).setOrigin(.5,.5),this.middlePart=t.add.sprite(0,0,M,T).setOrigin(.5,.5),this.middlePart.setDisplaySize(C-16,this.middlePart.height),this.rightPart=t.add.sprite(C/2,0,M,e).setOrigin(.5,.5),this.add([this.leftPart,this.middlePart,this.rightPart]),this.setInteractive(),this.on("pointerdown",d),t.add.existing(this)}}class v9 extends Phaser.Scene{constructor(){super("Index")}create(){this.cameras.main.fadeIn(1e3,0,0,0),this.input.setDefaultCursor("url(./src/assets/images/cursor.png), pointer"),this.background=this.add.tileSprite(0,0,at.width*2,at.height*2,"homeBg").setScale(1),this.add.text(at.width/2,at.height/5*4,"Enter",{fontFamily:'"Press Start 2P"',fontSize:"16px",color:"#FFFFFF",wordWrap:{width:at.width-30,useAdvancedWrap:!0}}).setOrigin(.5,.5),this.input.keyboard.once("keydown-ENTER",()=>{this.cameras.main.fadeOut(1e3,0,0,0)}),this.cameras.main.once(Phaser.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,(t,s)=>{this.scene.start("CreatePlayerPreload")})}update(){this.background.tilePositionX+=.3,this.background.tilePositionY+=.3}playGame(){}}const p9={theme:[{name:"davidmartinez",assetsUrl:"./src/assets/images/characters/davidmartinez.png",frameWidth:64,frameHeight:64,frames:[[0,1,2,3],[4,5,6,7],[8,9,10,11],[12,13,14,15]],frameRate:[0,6,12]},{name:"dorio",assetsUrl:"./src/assets/images/characters/dorio.png",frameWidth:64,frameHeight:64,frames:[[0,1,2,3],[4,5,6,7],[8,9,10,11],[12,13,14,15]],frameRate:[0,6,12]},{name:"faraday",assetsUrl:"./src/assets/images/characters/faraday.png",frameWidth:64,frameHeight:64,frames:[[0,1,2,3],[4,5,6,7],[8,9,10,11],[12,13,14,15]],frameRate:[0,6,12]},{name:"judy",assetsUrl:"./src/assets/images/characters/judy.png",frameWidth:64,frameHeight:64,frames:[[0,1,2,3],[4,5,6,7],[8,9,10,11],[12,13,14,15]],frameRate:[0,6,12]},{name:"kiwi",assetsUrl:"./src/assets/images/characters/kiwi.png",frameWidth:64,frameHeight:64,frames:[[0,1,2,3],[4,5,6,7],[8,9,10,11],[12,13,14,15]],frameRate:[0,6,12]},{name:"lucy",assetsUrl:"./src/assets/images/characters/lucy.png",frameWidth:64,frameHeight:64,frames:[[0,1,2,3],[4,5,6,7],[8,9,10,11],[12,13,14,15]],frameRate:[0,6,12]},{name:"maine",assetsUrl:"./src/assets/images/characters/maine.png",frameWidth:64,frameHeight:64,frames:[[0,1,2,3],[4,5,6,7],[8,9,10,11],[12,13,14,15]],frameRate:[0,6,12]},{name:"rebecca",assetsUrl:"./src/assets/images/characters/rebecca.png",frameWidth:64,frameHeight:64,frames:[[0,1,2,3],[4,5,6,7],[8,9,10,11],[12,13,14,15]],frameRate:[0,6,12]},{name:"johnny",assetsUrl:"./src/assets/images/characters/johnny.png",frameWidth:64,frameHeight:64,frames:[[0,1,2,3],[4,5,6,7],[8,9,10,11],[12,13,14,15]],frameRate:[0,6,12]},{name:"takemurajacket",assetsUrl:"./src/assets/images/characters/takemurajacket.png",frameWidth:64,frameHeight:64,frames:[[0,1,2,3],[4,5,6,7],[8,9,10,11],[12,13,14,15]],frameRate:[0,6,12]}]},g9={theme:[{name:"river",assetsUrl:"./src/assets/images/characters/river.png",frameWidth:64,frameHeight:64,frames:[[0,1,2,3],[4,5,6,7],[8,9,10,11],[12,13,14,15]],frameRate:[0,6,12]}]},m9={theme:[{name:"Boss",assetsUrl:"./src/assets/images/Boss/Boss01.png",frameWidth:128,frameHeight:128,frames:[[0],[0],[0],[0]],frameRate:[0]}]},Ti={Player:p9,Npc:g9,Boss:m9};class x9 extends Phaser.Scene{constructor(){super("CreatePlayerPreload")}init(){}preload(){this.add.text(20,20,"Loading game",{fontSize:24});var t=this.add.text(260,20,"0%",{fontSize:24}),s=this,g=!1,C=!1,M=!1;this.load.on("progress",function(l){var T=parseInt(l*100);t.text=T+"%",T<90&&T>60&&M==!1?(M=!0,s.add.text(240,20,".",{fontSize:24})):T<60&&T>30&&C==!1?(C=!0,s.add.text(220,20,".",{fontSize:24})):T<30&&T>0&&g==!1&&(g=!0,s.add.text(200,20,".",{fontSize:24}))}),this.load.on("complete",function(){}),this.load.image("homeBg","./src/assets/images/home/BG.png"),this.load.bitmapFont("pixelFont","./src/assets/fonts/PressStart2P.png","./src/assets/fonts/PressStart2P.xml"),Ti.Player.theme.map(l=>{this.load.spritesheet(l.name,l.assetsUrl,{frameWidth:l.frameWidth,frameHeight:l.frameHeight})}),Ti.Npc.theme.map(l=>{this.load.spritesheet(l.name+"Npc",l.assetsUrl,{frameWidth:l.frameWidth,frameHeight:l.frameHeight})})}create(){Ti.Player.theme.map(t=>{this.anims.create({key:t.name+"_Idle",frames:this.anims.generateFrameNumbers(t.name,{frames:[0,1,2,3]}),frameRate:t.frameRate,repeat:-1})}),this.scene.start("CreatePlayerGame")}update(){}}class y9 extends Phaser.Scene{constructor(){super("CreatePlayerGame")}create(){this.CharacterId=0,this.cameras.main.fadeIn(300,0,0,0),this.background=this.add.tileSprite(0,0,at.width*2.8,at.height*2.8,"homeBg").setScale(.8),this.coverColor=new Phaser.GameObjects.Rectangle(this,0,0,at.width,at.height,0,.5).setOrigin(0,0),this.add.existing(this.coverColor),this.Character=new Phaser.Physics.Arcade.Sprite(this,at.width/2,at.height/2,Ti.Player.theme[this.CharacterId].name).setOrigin(.5,.5).setScale(1);var t=Ti.Player.theme[this.CharacterId].name+"_Idle";this.Character.anims.play(t,!0),this.add.existing(this.Character),this.cursors=this.input.keyboard.createCursorKeys(),this.cursorsIsDown=!1,this.add.text(at.width/2,at.height/5*4-30,"← →: Change theme",{fontFamily:'"Press Start 2P"',fontSize:"10px",color:"#FFFFFF",wordWrap:{width:at.width-30,useAdvancedWrap:!0}}).setOrigin(.5,.5),this.add.text(at.width/2,at.height/5*4,"Enter: Choose character",{fontFamily:'"Press Start 2P"',fontSize:"10px",color:"#FFFFFF",wordWrap:{width:at.width-30,useAdvancedWrap:!0}}).setOrigin(.5,.5),this.input.keyboard.once("keydown-ENTER",()=>{console.log(this.CharacterId);var s={CharacterId:this.CharacterId,Name:"Player 1",Level:1,Experience:0,Health:100,Gold:0,Inventory:10,Quests:[],Skills:null,Achievements:[],Language:"zh-tw",Headgear:null,Armor:null,Weapon:null,Flag:[]};localStorage.setItem("PlayerData",JSON.stringify(s)),this.cameras.main.fadeOut(1e3,0,0,0)}),this.cameras.main.once(Phaser.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,(s,g)=>{this.scene.start("RoomPreload")})}update(){this.cursors.left.isDown&&this.cursorsIsDown==!1?(this.cursorsIsDown=!0,console.log("left"),this.CharacterId--,this.CharacterId<0&&(this.CharacterId=Ti.Player.theme.length-1)):this.cursors.right.isDown&&this.cursorsIsDown==!1?(this.cursorsIsDown=!0,console.log("right"),this.CharacterId++,this.CharacterId>=Ti.Player.theme.length&&(this.CharacterId=0)):this.cursors.right.isUp&&this.cursors.left.isUp&&(this.cursorsIsDown=!1);var t=Ti.Player.theme[this.CharacterId].name+"_Idle";this.Character.anims.play(t,!0),this.background.tilePositionX-=.3,this.background.tilePositionY-=.3}}let Uo=i=>{var t=JSON.parse(localStorage.getItem("PlayerData")),s=Ti.Player.theme[t.CharacterId],g=s.name;i.anims.create({key:"CharacterIdleDown",frames:i.anims.generateFrameNumbers(g,{frames:[0]}),frameRate:0,repeat:-1}),i.anims.create({key:"CharacterIdleRight",frames:i.anims.generateFrameNumbers(g,{frames:[4]}),frameRate:0,repeat:-1}),i.anims.create({key:"CharacterIdleUp",frames:i.anims.generateFrameNumbers(g,{frames:[12]}),frameRate:0,repeat:-1}),i.anims.create({key:"CharacterIdleLeft",frames:i.anims.generateFrameNumbers(g,{frames:[8]}),frameRate:0,repeat:-1}),i.anims.create({key:"CharacterWalkDown",frames:i.anims.generateFrameNumbers(g,{frames:s.frames[0]}),frameRate:s.frameRate[1],repeat:-1}),i.anims.create({key:"CharacterWalkRight",frames:i.anims.generateFrameNumbers(g,{frames:s.frames[1]}),frameRate:s.frameRate[1],repeat:-1}),i.anims.create({key:"CharacterWalkUp",frames:i.anims.generateFrameNumbers(g,{frames:s.frames[3]}),frameRate:s.frameRate[1],repeat:-1}),i.anims.create({key:"CharacterWalkLeft",frames:i.anims.generateFrameNumbers(g,{frames:s.frames[2]}),frameRate:s.frameRate[1],repeat:-1}),i.anims.create({key:"CharacterRunDown",frames:i.anims.generateFrameNumbers(g,{frames:s.frames[0]}),frameRate:s.frameRate[2],repeat:-1}),i.anims.create({key:"CharacterRunRight",frames:i.anims.generateFrameNumbers(g,{frames:s.frames[1]}),frameRate:s.frameRate[2],repeat:-1}),i.anims.create({key:"CharacterRunUp",frames:i.anims.generateFrameNumbers(g,{frames:s.frames[3]}),frameRate:s.frameRate[2],repeat:-1}),i.anims.create({key:"CharacterRunLeft",frames:i.anims.generateFrameNumbers(g,{frames:s.frames[2]}),frameRate:s.frameRate[2],repeat:-1})},Sm=i=>{Ti.Npc.theme.map(t=>{i.anims.create({key:t.name+"NpcIdleDown",frames:i.anims.generateFrameNumbers(t.name+"Npc",{frames:[0]}),frameRate:t.frameRate[0],repeat:-1}),i.anims.create({key:t.name+"NpcIdleRight",frames:i.anims.generateFrameNumbers(t.name+"Npc",{frames:[4]}),frameRate:t.frameRate[0],repeat:-1}),i.anims.create({key:t.name+"NpcIdleUp",frames:i.anims.generateFrameNumbers(t.name+"Npc",{frames:[12]}),frameRate:t.frameRate[0],repeat:-1}),i.anims.create({key:t.name+"NpcIdleLeft",frames:i.anims.generateFrameNumbers(t.name+"Npc",{frames:[8]}),frameRate:t.frameRate[0],repeat:-1})})};class T9 extends Phaser.Scene{constructor(){super("RoomPreload")}init(){}preload(){this.add.text(20,20,"Loading game",{fontSize:24});var t=this.add.text(260,20,"0%",{fontSize:24}),s=this,g=!1,C=!1,M=!1;this.load.on("progress",function(l){var T=parseInt(l*100);t.text=T+"%",T<90&&T>60&&M==!1?(M=!0,s.add.text(240,20,".",{fontSize:24})):T<60&&T>30&&C==!1?(C=!0,s.add.text(220,20,".",{fontSize:24})):T<30&&T>0&&g==!1&&(g=!0,s.add.text(200,20,".",{fontSize:24}))}),this.load.on("complete",function(){}),this.load.tilemapTiledJSON("CyberRoomJSON","./src/assets/maps/CyberRoom.json"),this.load.image("CyberRoom1TileImg","./src/assets/images/32CyberPop Vexed/Mid-TownA5.png"),this.load.image("CyberRoom2TileImg","./src/assets/images/32CyberPop Vexed/Mid-TownD.png"),this.load.image("CyberRoom3TileImg","./src/assets/images/32CyberPop Vexed/Mid-TownB.png"),this.load.image("CyberRoom4TileImg","./src/assets/images/32CyberPop Vexed/Mid-TownC.png"),this.load.image("CyberRoom5TileImg","./src/assets/images/32CyberPop Vexed/CP_WallsA4.png"),this.load.spritesheet("AorusGirl","./src/assets/images/NewAorusGirl.png",{frameWidth:64,frameHeight:64})}create(){Uo(this),this.anims.create({key:"AorusGirlIdleDown",frames:this.anims.generateFrameNumbers("AorusGirl",{frames:[0,1,2,3]}),frameRate:5,repeat:-1}),this.anims.create({key:"AorusGirlIdleUp",frames:this.anims.generateFrameNumbers("AorusGirl",{frames:[0,1,2,3]}),frameRate:5,repeat:-1}),this.anims.create({key:"AorusGirlIdleLeft",frames:this.anims.generateFrameNumbers("AorusGirl",{frames:[0,1,2,3]}),frameRate:5,repeat:-1}),this.anims.create({key:"AorusGirlIdleRight",frames:this.anims.generateFrameNumbers("AorusGirl",{frames:[0,1,2,3]}),frameRate:5,repeat:-1}),Sm(this),this.scene.start("RoomGame")}update(){}}let C9=class extends Phaser.Physics.Arcade.Sprite{constructor(t,s,g,C,M){super(t,0,-14,C.Name,0),this.scene=t,this.scene.add.existing(this),this.setInteractive(),this.setScale(1),this.status="Idle",this.hp=100,this.movePath=[],this.isDestroy=!1,this.stand=!0,this.setDepth(2),this.create(),this.setAnims(),this.moveSpeed=80,this.runSpeed=2.5,this.isAttack=!1,this.AttackTimes=0,this.isDownZ=!1}deletePlayer(){clearTimeout(this.setInter),this.movePath=[],this.name.destroy(),this.destroy()}setAnims(){var t="Character";this.setTexture(t)}create(){}update(t,s,g){var C=this;if(t&&s&&g=="play"){if(zt.Weapon&&s.Z.isDown&&this.isDownZ==!1&&this.isAttack==!1&&this.AttackTimes<=1){this.isDownZ=!0,this.AttackTimes=this.AttackTimes+1,this.scene.playerContainer.body.setVelocityX(0),this.scene.playerContainer.body.setVelocityY(0),this.isAttack=!0,this.stand=!0,this.status="Attack";let e=this.scene.swordHitbox;e.setActive(!0).setVisible(!0),e.body.setVelocityX(0),e.body.setVelocityY(0),e.x=0,e.y=0,e.isAttack=!0,this.direction=="Up"&&this.AttackTimes==1&&(e.y=this.y-18,e.setSize(48,24),e.setOrigin(.5,.5),e.body.setSize(48,24),this.scene.playerContainer.body.setVelocityY(-10)),this.direction=="Down"&&this.AttackTimes==1&&(e.y=this.y+18,e.setSize(48,24),e.setOrigin(.5,.5),e.body.setSize(48,24),this.scene.playerContainer.body.setVelocityY(10)),this.direction=="Right"&&this.AttackTimes==1&&(e.x=this.x+18,e.setSize(24,48),e.setOrigin(.5,.5),e.body.setSize(24,48),this.scene.playerContainer.body.setVelocityX(10)),this.direction=="Left"&&this.AttackTimes==1&&(e.x=this.x-18,e.setSize(24,48),e.setOrigin(.5,.5),e.body.setSize(24,48),this.scene.playerContainer.body.setVelocityX(-10));var M=setTimeout(()=>{if(C.AttackTimes==2){C.direction=="Up"&&(e.y=this.y-18,e.setSize(48,24),e.setOrigin(.5,.5),e.body.setSize(48,24),C.scene.playerContainer.body.setVelocityY(-10)),C.direction=="Down"&&(e.y=this.y+18,e.setSize(48,24),e.setOrigin(.5,.5),e.body.setSize(48,24),C.scene.playerContainer.body.setVelocityY(10)),C.direction=="Right"&&(e.x=this.x+18,e.setSize(24,48),e.setOrigin(.5,.5),e.body.setSize(24,48),C.scene.playerContainer.body.setVelocityX(10)),C.direction=="Left"&&(e.x=this.x-18,e.setSize(24,48),e.setOrigin(.5,.5),e.body.setSize(24,48),C.scene.playerContainer.body.setVelocityX(-10));var d=setTimeout(()=>{e.x=0,e.y=0,e.setSize(12,12),e.setOrigin(.5,.5),e.body.setSize(12,12),e.body.setVelocityX(0),e.body.setVelocityY(0),e.attackNum=0,e.setActive(!1).setVisible(!1),e.isAttack=!1,C.isAttack=!1,C.scene.playerContainer.body.setVelocityX(0),C.scene.playerContainer.body.setVelocityY(0),clearTimeout(d)},150)}else e.x=0,e.y=0,e.setSize(12,12),e.setOrigin(.5,.5),e.body.setSize(12,12),e.body.setVelocityX(0),e.body.setVelocityY(0),e.attackNum=0,e.setActive(!1).setVisible(!1),e.isAttack=!1,C.isAttack=!1,C.scene.playerContainer.body.setVelocityX(0),C.scene.playerContainer.body.setVelocityY(0);clearTimeout(M)},150);if(C.AttackTimes!=0)var l=setTimeout(()=>{C.AttackTimes<2&&(C.AttackTimes=0);var d=setTimeout(()=>{C.AttackTimes==2&&(C.AttackTimes=0),clearTimeout(d)},150);clearTimeout(l)},300);var T=setTimeout(()=>{t.left.isDown?(C.anims.play("CharacterIdleLeft",!0),C.direction="Left"):t.right.isDown?(C.anims.play("CharacterIdleRight",!0),C.direction="Right"):t.up.isDown?(C.anims.play("CharacterIdleUp",!0),C.direction="Up"):t.down.isDown&&(C.anims.play("CharacterIdleDown",!0),C.direction="Down"),clearTimeout(T)},C.AttackTimes==2?300:150)}zt.Weapon&&s.Z.isUp&&(this.isDownZ=!1),this.isAttack==!0?this.status="Attack":this.status="Idle",this.status!="Attack"&&(this.scene.playerContainer.body.setVelocityX(0),this.scene.playerContainer.body.setVelocityY(0),t.up.isDown&&t.left.isDown?t.shift.isDown?(this.scene.playerContainer.body.setVelocityX(-(this.moveSpeed*this.runSpeed)/3*2),this.scene.playerContainer.body.setVelocityY(-(this.moveSpeed*this.runSpeed)/3*2)):(this.scene.playerContainer.body.setVelocityX(-this.moveSpeed/3*2),this.scene.playerContainer.body.setVelocityY(-this.moveSpeed/3*2)):t.up.isDown&&t.right.isDown?t.shift.isDown?(this.scene.playerContainer.body.setVelocityX(this.moveSpeed*this.runSpeed/3*2),this.scene.playerContainer.body.setVelocityY(-(this.moveSpeed*this.runSpeed)/3*2)):(this.scene.playerContainer.body.setVelocityX(this.moveSpeed/3*2),this.scene.playerContainer.body.setVelocityY(-this.moveSpeed/3*2)):t.down.isDown&&t.left.isDown?t.shift.isDown?(this.scene.playerContainer.body.setVelocityX(-(this.moveSpeed*this.runSpeed)/3*2),this.scene.playerContainer.body.setVelocityY(this.moveSpeed*this.runSpeed/3*2)):(this.scene.playerContainer.body.setVelocityX(-this.moveSpeed/3*2),this.scene.playerContainer.body.setVelocityY(this.moveSpeed/3*2)):t.down.isDown&&t.right.isDown?t.shift.isDown?(this.scene.playerContainer.body.setVelocityX(this.moveSpeed*this.runSpeed/3*2),this.scene.playerContainer.body.setVelocityY(this.moveSpeed*this.runSpeed/3*2)):(this.scene.playerContainer.body.setVelocityX(this.moveSpeed/3*2),this.scene.playerContainer.body.setVelocityY(this.moveSpeed/3*2)):t.left.isDown?(t.shift.isDown?(this.scene.playerContainer.body.setVelocityX(-this.moveSpeed*this.runSpeed),this.anims.play("CharacterRunLeft",!0)):(this.scene.playerContainer.body.setVelocityX(-this.moveSpeed),this.anims.play("CharacterWalkLeft",!0)),this.direction="Left"):t.right.isDown?(t.shift.isDown?(this.scene.playerContainer.body.setVelocityX(this.moveSpeed*this.runSpeed),this.anims.play("CharacterRunRight",!0)):(this.scene.playerContainer.body.setVelocityX(this.moveSpeed),this.anims.play("CharacterWalkRight",!0)),this.direction="Right"):t.up.isDown?(t.shift.isDown?(this.scene.playerContainer.body.setVelocityY(-this.moveSpeed*this.runSpeed),this.anims.play("CharacterRunUp",!0)):(this.scene.playerContainer.body.setVelocityY(-this.moveSpeed),this.anims.play("CharacterWalkUp",!0)),this.direction="Up"):t.down.isDown?(t.shift.isDown?(this.scene.playerContainer.body.setVelocityY(this.moveSpeed*this.runSpeed),this.anims.play("CharacterRunDown",!0)):(this.scene.playerContainer.body.setVelocityY(this.moveSpeed),this.anims.play("CharacterWalkDown",!0)),this.direction="Down"):(this.status="Idle",this.direction=="Up"&&this.anims.play("CharacterIdleUp",!0),this.direction=="Down"&&this.anims.play("CharacterIdleDown",!0),this.direction=="Right"&&this.anims.play("CharacterIdleRight",!0),this.direction=="Left"&&this.anims.play("CharacterIdleLeft",!0),this.scene.playerContainer.body.setVelocityX(0),this.scene.playerContainer.body.setVelocityY(0)))}}},q8=class extends Phaser.Physics.Arcade.Sprite{constructor(t){var s=t.player.x,g=t.player.y;super(t,s,g,"Smear"),this.scene=t,this.scene.physics.world.enable(this),this.scene.add.existing(this),this.setInteractive(),this.setScale(1),this.body.immovable=!0,this.status="Idle",this.setBounce(0),this.setDepth(.5),this.create(),this.setAnims(),this.setSize(16,32),this.setOffset(24,16),zt.Weapon==null&&(this.visible=!1),this.moveSpeed=100,this.runSpeed=2,this.isAttack=!1}delete(){clearTimeout(this.setInter),this.movePath=[],this.name.destroy(),this.destroy()}setAnims(){var t="Smear";this.setTexture(t)}create(){}update(t,s){}};class t7 extends Phaser.Physics.Arcade.Sprite{constructor(t){var s=t.player.x,g=t.player.y;super(t,s,g,"Sword"),this.scene=t,this.scene.physics.world.enable(this),this.scene.add.existing(this),this.setInteractive(),this.setScale(1),this.body.immovable=!0,this.status="Idle",this.setBounce(0),this.setDepth(.5),this.create(),this.setAnims(),this.setSize(16,32),this.setOffset(24,16),zt.Weapon==null&&(this.visible=!1),this.moveSpeed=100,this.runSpeed=2,this.isAttack=!1}delete(){clearTimeout(this.setInter),this.movePath=[],this.name.destroy(),this.destroy()}setAnims(){var t="Sword";this.setTexture(t)}create(){}update(t,s){}}let S9=function(i){i.playerContainer=i.add.container(zt.x,zt.y),i.playerContainer.setSize(12,24),i.physics.world.enable(i.playerContainer),i.player=new C9(i,zt.x,zt.y,zt,"Player"),console.log(Bn()),Bn()=="Down"&&(i.player.direction="Down",i.player.anims.play("CharacterIdleDown",!0)),Bn()=="Up"&&(i.player.direction="Up",i.player.anims.play("CharacterIdleUp",!0)),Bn()=="Left"&&(i.player.direction="Left",i.player.anims.play("CharacterIdleLeft",!0)),Bn()=="Right"&&(i.player.direction="Right",i.player.anims.play("CharacterIdleRight",!0)),i.player.isUser=!0,i.swordHitbox=i.add.rectangle(0,0,12,12,16711680,.5).setOrigin(.5,.5),i.swordHitbox.setActive(!1).setVisible(!1),i.swordHitbox.isAttack=!1,i.swordHitbox.attackNum=0,i.physics.add.existing(i.swordHitbox),i.playerContainer.add(i.player),i.playerContainer.add(i.swordHitbox),i.playerContainer.setDepth(2),i.physics.add.collider(i.playerContainer,i.Wall),i.cursors=i.input.keyboard.createCursorKeys(),i.keys=i.input.keyboard.addKeys("A,W,D,S,C,Z"),console.log(i.Map.widthInPixels,at.width),i.Map.widthInPixels<at.width?i.cameras.main.setBounds(-(at.width/2-i.Map.widthInPixels/2),-(at.height/2-i.Map.heightInPixels/2),0,0):i.cameras.main.setBounds(0,0,i.Map.widthInPixels,i.Map.heightInPixels),i.cameras.main.startFollow(i.playerContainer,!0)},P9=function(i){i.player.update(i.cursors,i.keys,i.GameStatus)};class E9 extends Phaser.Physics.Arcade.Sprite{constructor(t,s,g,C,M){switch(super(t,0,-8,C.name,0),this.scene=t,this.scene.add.existing(this),this.setInteractive(),this.setScale(1),this.status="Idle",this.setDepth(2),this.setAnims(M),this.animsKeyName=M+"NpcIdle",M){case"AorusGirl":this.animsKeyName="AorusGirlIdle";break;case"AORUSGirl1":this.animsKeyName="CharacterAorusIdle";break;case"AORUSGirl2":this.animsKeyName="CharacterAorusIdle16";break;case"AORUSGirl3":this.animsKeyName="CharacterAorusIdle162";break;case"river":this.animsKeyName=M+"NpcIdle";break;default:this.animsKeyName=M+"NpcIdle"}console.log(this.animsKeyName+"Down"),this.anims.play(this.animsKeyName+"Down",!0),this.direction="down"}deletePlayer(){clearTimeout(this.setInter),this.movePath=[],this.name.destroy(),this.destroy()}setAnims(t){var s="CharacterNpc";switch(t){case"AorusGirl":s="AorusGirl";break;case"AORUSGirl1":s="CharacterAorus";break;case"AORUSGirl2":s="CharacterAorus16";break;case"AORUSGirl3":s="CharacterAorus162";break;default:s="CharacterNpc"}this.setTexture(s)}create(){}update(t){t=="pause"&&(this.direction=this.scene.player.direction),this.direction=="Left"?this.anims.play(this.animsKeyName+"Right",!0):this.direction=="Right"?this.anims.play(this.animsKeyName+"Left",!0):this.direction=="Up"?this.anims.play(this.animsKeyName+"Down",!0):this.direction=="Down"&&this.anims.play(this.animsKeyName+"Up",!0)}}let M9=function(i,t,s){i.npcContainer=i.add.container(t.x+s.width/2,t.y+s.height/2),i.npcContainer.setSize(18,18),i.physics.world.enable(i.npcContainer);let g=new E9(i,t.x,t.y,t,t.properties[2].value);i.npcContainer.add(g),i.npcContainer.body.immovable=!0,i.npcContainer.setDepth(1),console.log(i.npcContainer),i.NpcGroup.add(i.npcContainer)},w9=function(i){i.NpcGroup.getChildren().forEach(t=>{i.physics.add.collider(t,i.playerContainer),t.y>i.playerContainer.y?(t.setDepth(2),i.playerContainer.setDepth(1.5)):(t.setDepth(1.5),i.playerContainer.setDepth(2)),t.list[0].update(i.GameStatus)})},R9=function(i,t,s){i.Weapon=new Phaser.Physics.Arcade.Sprite(i,t.x,t.y,"Sword").setOrigin(.5,.5).setScale(1),i.Weapon.setTexture("Sword"),i.Weapon.anims.play("SwordRunUp",!0),i.add.existing(i.Weapon)};const Ft=new me.Events.EventEmitter;let Yo=function(i){i.dialogTarget=null,i.Wall=i.add.group(),i.objectList=i.add.group(),i.NpcCount=0,i.NpcGroup=i.add.group(),i.WeaponCount=0,i.Map.objects.map(t=>{t.name=="Wall"&&t.objects.map(s=>{let g=null;var C=s.width!=0?s.width:20,M=s.height!=0?s.height:20;s.rectangle==!0&&(g=new me.GameObjects.Rectangle(i,s.x,s.y,C,M,16711680,0).setOrigin(0,0)),s.ellipse==!0&&(g=new me.GameObjects.Ellipse(i,s.x,s.y,C,M,16711680,0),s.width==0?g.setOrigin(.5,.5):g.setOrigin(0,0)),i.add.existing(g),i.physics.world.enable(g),s.rectangle==!0&&g.body.setSize(C,M),s.ellipse==!0&&g.body.setCircle(C/2),g.body.setImmovable(!0),i.Wall.add(g)}),t.name=="UserPosition"&&t.objects.map(s=>{s.properties.map(g=>{g.name=="Position"&&g.value==Fm()&&(zt.x=s.x,zt.y=s.y)})}),t.name=="Event"&&t.objects.map(s=>{let g=s.width?s.width:20,C=s.height?s.height:20,M=new me.GameObjects.Rectangle(i,s.x,s.y,g,C,65280,.7);i.physics.add.existing(M),M.visible=!1,s.width==0?M.setOrigin(.5,.5):M.setOrigin(0,0),M.isTrigger=!1,M.name=s.name,M.messageId=s.properties[0].value,s.name=="Npc"&&(M.type=s.properties[2].value,M9(i,s,M),i.NpcCount++),s.name=="Weapon"&&(R9(i,s),i.WeaponCount++),i.objectList.add(M)})}),S9(i),console.log(i.scenePage),i.scenePage=="Boss"?(i.scene.run("BossUI"),setTimeout(()=>{Ft.emit("set-scene-page",i.scenePage)},1)):i.scene.run("BagUI"),i.scene.run("PlayerUI"),i.scene.run("MsgUI"),setTimeout(()=>{Ft.emit("create-msg-btn",i),Ft.emit("set-scene-page",i.scenePage)},10),i.objectList.children.entries.forEach(t=>{i.physics.add.overlap(i.playerContainer,t,(s,g)=>{i.physics.overlapRect(s.x,s.y,s.width,s.height,g.x,g.y,g.width,g.height)&&g.isTrigger==!1&&i.dialogTarget==null&&(i.dialogTarget=g,g.isTrigger=!0,console.log("??????????"),Ft.emit("show-msg-btn",i,g))},null,i)})},Xo=function(i){i.scenePage!="Boss"&&Ft.emit("update-bag-status",i),Ft.emit("update-game-status",i),P9(i),i.NpcCount>0&&w9(i),i.dialogTarget!=null&&(i.physics.overlap(i.playerContainer,i.dialogTarget)||(i.dialogTarget.isTrigger=!1,Ft.emit("hide-msg-btn",i,i.dialogTarget),i.dialogTarget=null))};class A9 extends Phaser.Scene{constructor(){super("RoomGame")}create(){this.cameras.main.fadeIn(1e3,0,0,0),document.querySelectorAll("canvas")[0].style.background="#352a29",this.scenePage="Room",this.playerName="",this.GameStatus="play",this.Map=this.make.tilemap({key:"CyberRoomJSON"}),this.tileSet1=this.Map.addTilesetImage("Mid-TownA5","CyberRoom1TileImg"),this.tileSet2=this.Map.addTilesetImage("Mid-TownD","CyberRoom2TileImg"),this.tileSet3=this.Map.addTilesetImage("Mid-TownB","CyberRoom3TileImg"),this.tileSet4=this.Map.addTilesetImage("Mid-TownC","CyberRoom4TileImg"),this.tileSet5=this.Map.addTilesetImage("CP_WallsA4","CyberRoom5TileImg"),this.Ground=this.Map.createLayer("Ground",[this.tileSet1,this.tileSet2,this.tileSet3,this.tileSet4,this.tileSet5],0,0),this.MapGround=this.Map.createLayer("Map",[this.tileSet1,this.tileSet2,this.tileSet3,this.tileSet4,this.tileSet5],0,0),this.Object=this.Map.createLayer("Object",[this.tileSet1,this.tileSet2,this.tileSet3,this.tileSet4,this.tileSet5],0,0),this.ObjectPos=this.Map.createFromObjects("Object","Object",{key:"Object"}),this.Ground.setDepth(0),this.MapGround.setDepth(0),this.Object.setDepth(0),this.cameras.main.setBounds(0,0,this.Map.widthInPixels,this.Map.heightInPixels),Yo(this),this.RoomDoor=null,this.objectList.children.entries.map(t=>{t.name=="RoomDoor"&&(this.RoomDoor=t,this.RoomDoor.body.enable=!1)}),this.isShowGirl=!1}update(){Xo(this),zt.Flag.indexOf("room_npc_1")!=-1&&(this.RoomDoor.body.enable=!0),this.isShowGirl==!1&&zt.Flag.indexOf("show_girl")!=-1&&(this.isShowGirl=!0)}playGame(){}}class O9 extends Phaser.Scene{constructor(){super("MainPreload")}init(){}preload(){this.add.text(20,20,"Loading game",{fontSize:24});var t=this.add.text(260,20,"0%",{fontSize:24}),s=this,g=!1,C=!1,M=!1;this.load.on("progress",function(l){var T=parseInt(l*100);t.text=T+"%",T<90&&T>60&&M==!1?(M=!0,s.add.text(240,20,".",{fontSize:24})):T<60&&T>30&&C==!1?(C=!0,s.add.text(220,20,".",{fontSize:24})):T<30&&T>0&&g==!1&&(g=!0,s.add.text(200,20,".",{fontSize:24}))}),this.load.on("complete",function(){}),this.load.tilemapTiledJSON("CyberMainJSON","./src/assets/maps/CyberMain.json"),this.load.image("CyberMain1TileImg","./src/assets/images/32CyberPop Vexed/Mid-TownA5.png"),this.load.image("CyberMain2TileImg","./src/assets/images/32CyberPop Vexed/Mid-TownD.png"),this.load.image("CyberMain3TileImg","./src/assets/images/32CyberPop Vexed/Mid-TownB.png"),this.load.image("CyberMain4TileImg","./src/assets/images/32CyberPop Vexed/Mid-TownC.png"),this.load.image("CyberMain5TileImg","./src/assets/images/32CyberPop Vexed/CP_WallsA4.png"),this.load.spritesheet("CharacterAORUS","./src/assets/images/AllanimAorusgirl.png",{frameWidth:35,frameHeight:64}),this.load.spritesheet("CharacterAORUS16","./src/assets/images/16AorusGirl.png",{frameWidth:50,frameHeight:64}),this.load.spritesheet("CharacterAORUS162","./src/assets/images/16AorusGirl2.png",{frameWidth:50,frameHeight:64}),this.load.spritesheet("ButtonBg","./src/assets/images/ui/PixelGUIButtons.png",{frameWidth:16,frameHeight:32}),this.load.image("BagBgUI","./src/assets/images/ui/GameUi/UI06.png"),this.load.image("BagConcentBgUI","./src/assets/images/ui/GameUi/UI_D_01.png"),this.load.spritesheet("IconUI","./src/assets/images/ui/Modern and Sci-Fi Icons/Icons/IconSheet.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("IconChoose","./src/assets/images/ui/Modern and Sci-Fi Icons/Icons/icon_choose.png",{frameWidth:32,frameHeight:32})}create(){Uo(this),this.anims.create({key:"CharacterAorusIdleDown",frames:this.anims.generateFrameNumbers("CharacterAORUS",{frames:[0,1,2,3,4]}),frameRate:5,repeat:-1}),this.anims.create({key:"CharacterAorusIdle16Down",frames:this.anims.generateFrameNumbers("CharacterAORUS16",{frames:[0]}),frameRate:5,repeat:-1}),this.anims.create({key:"CharacterAorusIdle162Down",frames:this.anims.generateFrameNumbers("CharacterAORUS162",{frames:[0]}),frameRate:5,repeat:-1}),this.anims.create({key:"IconChooseAnims",frames:this.anims.generateFrameNumbers("IconChoose",{frames:[0,1]}),frameRate:3,repeat:-1}),this.scene.start("MainGame")}update(){}}class b9 extends Phaser.Scene{constructor(){super("MainGame")}create(){this.cameras.main.fadeIn(1e3,0,0,0),this.scenePage="Main",this.playerName="Player1",this.GameStatus="play",this.Map=this.make.tilemap({key:"CyberMainJSON"}),this.tileSet1=this.Map.addTilesetImage("CyberMain1Tiled","CyberMain1TileImg"),this.tileSet2=this.Map.addTilesetImage("CyberMain2Tiled","CyberMain2TileImg"),this.tileSet3=this.Map.addTilesetImage("CyberMain3Tiled","CyberMain3TileImg"),this.tileSet4=this.Map.addTilesetImage("CyberMain4Tiled","CyberMain4TileImg"),this.tileSet5=this.Map.addTilesetImage("CyberMain5Tiled","CyberMain5TileImg"),this.Ground=this.Map.createLayer("Ground",[this.tileSet1,this.tileSet2,this.tileSet3,this.tileSet4,this.tileSet5],0,0),this.MapGround=this.Map.createLayer("Map",[this.tileSet1,this.tileSet2,this.tileSet3,this.tileSet4,this.tileSet5],0,0),this.Object=this.Map.createLayer("Object",[this.tileSet1,this.tileSet2,this.tileSet3,this.tileSet4,this.tileSet5],0,0),this.ObjectPos=this.Map.createFromObjects("Object","Object",{key:"Object"}),this.Ground.setDepth(0),this.MapGround.setDepth(0),this.Object.setDepth(0),Yo(this)}update(){Xo(this)}playGame(){}}class F9 extends Phaser.Scene{constructor(){super("HomePreload")}init(){}preload(){this.add.text(20,20,"Loading game",{fontSize:24});var t=this.add.text(260,20,"0%",{fontSize:24}),s=this,g=!1,C=!1,M=!1;this.load.on("progress",function(l){var T=parseInt(l*100);t.text=T+"%",T<90&&T>60&&M==!1?(M=!0,s.add.text(240,20,".",{fontSize:24})):T<60&&T>30&&C==!1?(C=!0,s.add.text(220,20,".",{fontSize:24})):T<30&&T>0&&g==!1&&(g=!0,s.add.text(200,20,".",{fontSize:24}))}),this.load.on("complete",function(){}),this.load.tilemapTiledJSON("CyberHomeJSON","./src/assets/maps/CyberHome.json"),this.load.image("Cyber1TileImg","./src/assets/images/32CyberPop Vexed/Low-TownA5.png"),this.load.image("Cyber2TileImg","./src/assets/images/32CyberPop Vexed/Low-TownD.png"),this.load.image("Cyber3TileImg","./src/assets/images/32CyberPop Vexed/Low-TownB.png"),this.load.image("Cyber4TileImg","./src/assets/images/32CyberPop Vexed/Low-TownC.png"),this.load.image("Cyber5TileImg","./src/assets/images/32CyberPop Vexed/CP_WallsA4.png")}create(){Uo(this),Sm(this),this.scene.start("HomeGame")}update(){}}class L9 extends Phaser.Scene{constructor(){super("HomeGame")}create(){this.cameras.main.fadeIn(1e3,0,0,0),document.querySelectorAll("canvas")[0].style.background="#2d3035",this.scenePage="Home",this.playerName="Player1",this.GameStatus="play",this.Map=this.make.tilemap({key:"CyberHomeJSON"}),this.tileSet1=this.Map.addTilesetImage("Cyber1Tiled","Cyber1TileImg"),this.tileSet2=this.Map.addTilesetImage("Cyber2Tiled","Cyber2TileImg"),this.tileSet3=this.Map.addTilesetImage("Cyber3Tiled","Cyber3TileImg"),this.tileSet4=this.Map.addTilesetImage("Cyber4Tiled","Cyber4TileImg"),this.tileSet5=this.Map.addTilesetImage("Cyber5Tiled","Cyber5TileImg"),this.Ground=this.Map.createLayer("Ground",[this.tileSet1,this.tileSet2,this.tileSet3,this.tileSet4,this.tileSet5],0,0),this.MapGround=this.Map.createLayer("Map",[this.tileSet1,this.tileSet2,this.tileSet3,this.tileSet4,this.tileSet5],0,0),this.Object=this.Map.createLayer("Object",[this.tileSet1,this.tileSet2,this.tileSet3,this.tileSet4,this.tileSet5],0,0),this.ObjectPos=this.Map.createFromObjects("Object","Object",{key:"Object"}),this.Ground.setDepth(0),this.MapGround.setDepth(0),this.Object.setDepth(0),this.cameras.main.setBounds(0,0,this.Map.widthInPixels,this.Map.heightInPixels),Yo(this)}update(){Xo(this)}playGame(){}}class D9 extends Phaser.Scene{constructor(){super("BossPreload")}init(){}preload(){this.add.text(20,20,"Loading game",{fontSize:24});var t=this.add.text(260,20,"0%",{fontSize:24}),s=this,g=!1,C=!1,M=!1;this.load.on("progress",function(l){var T=parseInt(l*100);t.text=T+"%",T<90&&T>60&&M==!1?(M=!0,s.add.text(240,20,".",{fontSize:24})):T<60&&T>30&&C==!1?(C=!0,s.add.text(220,20,".",{fontSize:24})):T<30&&T>0&&g==!1&&(g=!0,s.add.text(200,20,".",{fontSize:24}))}),this.load.on("complete",function(){}),this.load.tilemapTiledJSON("CyberBossJSON","./src/assets/maps/CyberBoss.json"),this.load.image("CyberBoss1TileImg","./src/assets/images/32CyberPop Vexed/CP_WallsA4.png"),this.load.image("CyberBoss2TileImg","./src/assets/images/32CyberPop Vexed/Low-TownB.png"),this.load.image("CyberBoss3TileImg","./src/assets/images/32CyberPop Vexed/Low-TownD.png"),this.load.image("CyberBoss4TileImg","./src/assets/images/32CyberPop Vexed/Mid-TownA5.png"),this.load.image("CyberBoss5TileImg","./src/assets/images/32CyberPop Vexed/Mid-TownD.png"),this.load.image("CyberBoss6TileImg","./src/assets/images/Add16x2/Tileset.png"),this.load.spritesheet("ButtonBg","./src/assets/images/ui/PixelGUIButtons.png",{frameWidth:16,frameHeight:32}),this.load.image("BagBgUI","./src/assets/images/ui/GameUi/UI06.png"),this.load.image("BagConcentBgUI","./src/assets/images/ui/GameUi/UI_D_01.png"),this.load.spritesheet("IconUI","./src/assets/images/ui/Modern and Sci-Fi Icons/Icons/IconSheet.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("IconChoose","./src/assets/images/ui/Modern and Sci-Fi Icons/Icons/icon_choose.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("Boss","./src/assets/images/Boss/NewBossIdeo.png",{frameWidth:128,frameHeight:128}),this.load.spritesheet("BossX4","./src/assets/images/Boss/BossUI_buejka.png",{frameWidth:512,frameHeight:512}),this.load.spritesheet("BossAttack1","./src/assets/images/Boss/BossAtk1t.png",{frameWidth:128,frameHeight:128}),this.load.spritesheet("BossDead","./src/assets/images/Boss/BossDead.png",{frameWidth:128,frameHeight:128}),this.load.spritesheet("bossAttackNormalBall","./src/assets/images/Effects/Super Pixel Effects Pack 2/spritesheet/fx2_fire_burst_small_blue/spritesheet.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("AttackCircle","./src/assets/images/Effects/weaponhit.png",{frameWidth:100,frameHeight:100}),this.load.spritesheet("AttackShock","./src/assets/images/Effects/shock.png",{frameWidth:140,frameHeight:50}),this.load.spritesheet("AttackWater","./src/assets/images/Effects/water.png",{frameWidth:64,frameHeight:192}),this.load.spritesheet("AttackBox","./src/assets/images/Effects/attackBox.png",{frameWidth:320,frameHeight:320}),this.load.spritesheet("Attack3Fire","./src/assets/images/Effects/attack3Fire.png",{frameWidth:100,frameHeight:100}),this.load.spritesheet("BossDieFire","./src/assets/images/Effects/bossDieFire.png",{frameWidth:320,frameHeight:320})}create(){Uo(this),this.anims.create({key:"AttackNormalBallRun",frames:this.anims.generateFrameNumbers("bossAttackNormalBall",{start:0,end:16}),frameRate:8,repeat:-1}),this.anims.create({key:"AttackCicleRun",frames:this.anims.generateFrameNumbers("AttackCircle",{start:0,end:35}),frameRate:15,repeat:-1}),this.anims.create({key:"AttackShockRun",frames:this.anims.generateFrameNumbers("AttackShock",{start:0,end:6}),frameRate:15,repeat:-1}),this.anims.create({key:"AttackWaterRun",frames:this.anims.generateFrameNumbers("AttackWater",{start:0,end:4}),frameRate:10,repeat:-1}),this.anims.create({key:"AttackBoxRun",frames:this.anims.generateFrameNumbers("AttackBox",{start:0,end:15}),frameRate:16,repeat:-1}),this.anims.create({key:"Attack3FireRun1",frames:this.anims.generateFrameNumbers("Attack3Fire",{start:5,end:24}),frameRate:39,repeat:0}),this.anims.create({key:"Attack3FireRun2",frames:this.anims.generateFrameNumbers("Attack3Fire",{start:25,end:65}),frameRate:39,repeat:-1}),this.anims.create({key:"Attack3FireRun3",frames:this.anims.generateFrameNumbers("Attack3Fire",{start:65,end:83}),frameRate:39,repeat:0}),this.anims.create({key:"BossDieFireRun",frames:this.anims.generateFrameNumbers("BossDieFire",{start:0,end:15}),frameRate:16,repeat:0}),this.scene.start("BossGame")}update(){}}let Zi=class extends Phaser.Physics.Arcade.Sprite{constructor(t,s,g){super(t,0,0),this.scene=t,this.scene.add.existing(this),this.setInteractive(),this.setScale(1),this.setOrigin(.5),this.timer=null,this.status=1,this.hp=100,this.bossStatus="Idle",this.bossFightMode=1,this.bossAttackStatus="normal",this.normal_mode_1_attack1PosList=[],this.normal_mode_1_isAttackInit=!1,this.normal_mode_1_attackNum=3,this.normal_mode_1_attackTimes=0,this.normal_mode_1_attackMaxTimes=1,this.normal_mode_1_attackDelayTime=50,this.normal_mode_1_atackTime=1e4,this.normal_mode_1_atackSpeed=500,this.normal_mode_1_atackSpeedFire=150,this.normal_mode_1_attackStatus="attack",this.normal_mode_1_waitTime=4.5,this.normal_mode_1_hitPlayerValue=1,this.mode1_attack1PosList=[],this.mode1_isAttackInit=!1,this.mode1_attackNum=200,this.mode1_attackTimes=0,this.mode1_attackMaxTimes=1,this.mode1_attackDelayTime=25,this.mode1_waitTime=4.5,this.mode1_hitPlayerValue=2,this.mode2_attack1PosList=[],this.mode2_isAttackInit=!1,this.mode2_attackNum=3,this.mode2_attackTimes=0,this.mode2_attackMaxTimes=3,this.mode2_attackDelayTime=50,this.mode2_waitTime=4.5,this.mode2_hitPlayerValue=4,this.mode3_attack1PosList=[],this.mode3_isAttackInit=!1,this.mode3_attackNum=3,this.mode3_attackTimes=0,this.mode3_attackMaxTimes=1,this.mode3_attackDelayTime=50,this.mode3_waitTime=4.5,this.mode3_hitPlayerValue=3,this.isBossHitPlayer=0,this.setTexture("Boss"),this.anims.play("BossIdle")}preload(){}delete(){clearTimeout(this.timer),this.destroy()}update(){this.scene.GameStatus=="Load",this.scene.GameStatus=="Start"&&this.bossFightMode==1&&(this.bossStatus=="Idle"&&this.anims.play("BossIdle",!0),this.bossStatus=="Attack"&&this.anims.play("BossIdle2",!0))}};class I9 extends Phaser.Scene{constructor(){super("BossGame")}create(){console.log("Create BossGame"),this.cameras.main.fadeIn(1e3,0,0,0),this.GameStatus="play",this.scenePage="Boss",this.playerName="Player1",this.BossGameStatus="Init",this.Map=this.make.tilemap({key:"CyberBossJSON"}),this.tileSet1=this.Map.addTilesetImage("CP_WallsA4","CyberBoss1TileImg"),this.tileSet2=this.Map.addTilesetImage("Low-TownB","CyberBoss2TileImg"),this.tileSet3=this.Map.addTilesetImage("Low-TownD","CyberBoss3TileImg"),this.tileSet4=this.Map.addTilesetImage("Mid-TownA5","CyberBoss4TileImg"),this.tileSet5=this.Map.addTilesetImage("Mid-TownD","CyberBoss5TileImg"),this.tileSet6=this.Map.addTilesetImage("Tileset","CyberBoss6TileImg"),this.Ground=this.Map.createLayer("Ground",[this.tileSet1,this.tileSet2,this.tileSet3,this.tileSet4,this.tileSet5,this.tileSet6],0,0),this.MapGround=this.Map.createLayer("Map",[this.tileSet1,this.tileSet2,this.tileSet3,this.tileSet4,this.tileSet5,this.tileSet6],0,0),this.Object=this.Map.createLayer("Object",[this.tileSet1,this.tileSet2,this.tileSet3,this.tileSet4,this.tileSet5,this.tileSet6],0,0),this.ObjectPos=this.Map.createFromObjects("Object","Object",{key:"Object"}),this.Ground.setDepth(0),this.MapGround.setDepth(0),this.Object.setDepth(0),this.cameras.main.setBounds(0,0,this.Map.widthInPixels,this.Map.heightInPixels),Yo(this),this.BossDoor=null,this.objectList.children.entries.map(t=>{t.name=="BossDoor"&&(this.BossDoor=t,console.log(this.BossDoor),this.BossDoor.body.enable=!1)}),zt.Weapon="Sword1",this.swordHitbox.setVisible(!0),this.swordHitbox.setActive(!1),this.bossInitPosItem=null,this.Map.objects.map(t=>{t.name=="BossPosition"&&t.objects.map(s=>{s.properties.map(g=>{if(g.name=="Position"&&g.value==0){this.anims.create({key:"BossIdle",frames:this.anims.generateFrameNumbers("Boss",{frames:[0,1,2,3,4]}),frameRate:6,repeat:-1}),this.anims.create({key:"BossAttack1Run1",frames:this.anims.generateFrameNumbers("BossAttack1",{frames:[0,1,2,3,4]}),frameRate:15,repeat:0}),this.anims.create({key:"BossAttack1Run2",frames:this.anims.generateFrameNumbers("BossAttack1",{frames:[5,6]}),frameRate:4,repeat:-1}),this.anims.create({key:"BossAttack1Run3",frames:this.anims.generateFrameNumbers("BossAttack1",{frames:[4,2,0]}),frameRate:10,repeat:0}),this.anims.create({key:"BossDeadRun",frames:this.anims.generateFrameNumbers("BossDead",{frames:[0,1,2,3,4]}),frameRate:10,repeat:0}),this.anims.create({key:"BossDeadIdle",frames:this.anims.generateFrameNumbers("BossDead",{frames:[4]}),frameRate:15,repeat:0}),this.bossInitPosItem=s;var C=s.x,M=s.y;this.bossContainer=this.add.container(C,M),this.physics.world.enable(this.bossContainer);let l=new Zi(this,0,0);this.bossBody=new Phaser.GameObjects.Rectangle(this,0,18,64,64,65280,0).setOrigin(.5),this.add.existing(this.bossBody),this.physics.world.enable(this.bossBody),this.bossContainer.add(l),this.bossContainer.add(this.bossBody),this.bossContainer.setSize(64,70),this.bossContainer.setDepth(1)}})})}),this.Map.objects.map(t=>{t.name=="BossAttack1"&&(this.bossContainer.mode1_attackPosList=t.objects),t.name=="BossAttack2"&&(this.bossContainer.mode2_attackPosList=t.objects),t.name=="BossAttack3"&&(this.bossContainer.mode3_attackPosList=t.objects)}),this.attack3Container=null,zt.Flag.indexOf("boss_quest_1")==-1&&zt.Flag.indexOf("boss_quest_2")==-1&&(this.initBossTarget=this.add.rectangle(this.Map.widthInPixels/2,this.Map.heightInPixels/2,256,256,65280,0).setOrigin(.5),this.add.existing(this.initBossTarget),this.physics.world.enable(this.initBossTarget),this.isInitTarget=!1,this.physics.add.overlap(this.initBossTarget,this.playerContainer,function(){if(!this.isInitTarget){this.isInitTarget=!0;let t={name:"BossTarget",messageId:"boss_quest_1_1"};this.GameStatus="pause",this.playerContainer.body.setVelocityY(0),this.playerContainer.body.setVelocityX(0),this.scene.get("MsgUI").TargetShowMsg(this,t),this.initBossTarget.destroy()}},null,this)),this.timer=this.time.addEvent({delay:250,callback:this.playerOverlapBossEvent,callbackScope:this,loop:!0}),this.swordHitBoxAttackBoss=!1,this.physics.add.overlap(this.swordHitbox,this.bossBody,function(){if(this.swordHitbox.active&&this.swordHitbox.visible&&!this.swordHitBoxAttackBoss){this.swordHitBoxAttackBoss=!0;let s=this.bossContainer.list.find(g=>g instanceof Zi);s.setTint(16711680),setTimeout(()=>{s.clearTint()},50),this.time.delayedCall(100,function(){this.swordHitBoxAttackBoss=!1,this.hitBossHp(1)},[],this)}},null,this),Ft.emit("Change-boss-game-status",this.BossGameStatus),this.isPlayerDie=!1,this.isBossDie=!1}playerOverlapBossEvent(){}hitPlayerHp(t){let s=this.scene.get("PlayerUI").hp;s>0&&this.BossGameStatus=="Play"&&(this.scene.get("PlayerUI").hp=s-t),s<0&&(this.scene.get("PlayerUI").hp=0)}hitBossHp(t){let s=this.scene.get("BossUI").hp;s>0&&(this.scene.get("BossUI").hp=s-t),s<0&&(this.scene.get("BossUI").hp=0)}update(){Xo(this);const t=this.physics.overlap(this.bossBody,this.playerContainer);t?t&&(this.timer.paused=!1):this.timer.paused=!0,this.bossContainer.y+50>this.playerContainer.y?(this.bossContainer.setDepth(2),this.playerContainer.setDepth(1.5)):(this.bossContainer.setDepth(1.5),this.playerContainer.setDepth(2)),this.updateGameMode(),this.BossTimer=null,this.isReady=!1}updateGameMode(){var t=this;let s=this.bossContainer.list.find(M=>M instanceof Zi),g=this.scene.get("PlayerUI").hp,C=this.scene.get("BossUI").hp;if(this.BossGameStatus=="Init"&&(zt.Flag.indexOf("boss_quest_1")!=-1||zt.Flag.indexOf("boss_quest_2")!=-1)&&(console.log("???AAAAAAAAAAAAAAAAAAAAA"),this.BossGameStatus="Load",Ft.emit("Change-boss-game-status",this.BossGameStatus)),this.BossGameStatus=="Load"&&(this.GameStatus="pause",this.BossTimer==null&&(this.BossTimer=setTimeout(()=>{this.BossGameStatus="Waiting",t.scene.get("PlayerUI").initFun(),t.scene.get("BossUI").initFun(),Ft.emit("Change-boss-game-status",this.BossGameStatus),clearTimeout(this.BossTimer)},2e3))),this.BossGameStatus=="Waiting"&&(this.bossContainer.y<this.Map.heightInPixels/2?this.bossContainer.body.setVelocityY(80):this.bossContainer.body.setVelocityY(0),this.GameStatus="pause",this.BossTimerReady==null&&(this.BossTimerReady=setTimeout(()=>{this.scene.get("PlayerUI").PlayerUIStatus="Show",t.BossGameStatus="Ready",Ft.emit("Change-boss-game-status",this.BossGameStatus),clearTimeout(this.BossTimerReady),t.BossTimerReady=null},2e3))),this.BossGameStatus=="Ready"&&!this.isReady){this.isReady=!0,this.scene.get("BossUI").startTimer();let M=setTimeout(()=>{t.BossGameStatus="Play",Ft.emit("Change-boss-game-status",this.BossGameStatus),s.bossStatus="Idle",clearTimeout(M),this.isReady=!1,t.GameStatus="play"},2e3)}if(this.BossGameStatus=="Play"&&(s.bossAttackStatus=="normal"&&s.bossFightMode==1&&this.BossAttackNormalMode1(),s.bossAttackStatus=="ultimate"&&s.bossFightMode==1&&this.BossAttackUltimateMode1(),s.bossAttackStatus=="ultimate"&&s.bossFightMode==2&&this.BossAttackUltimateMode2(),s.bossAttackStatus=="ultimate"&&s.bossFightMode==3&&this.BossAttackUltimateMode3()),(g<=0||C<=0)&&(this.BossGameStatus="GameOver",Ft.emit("Change-boss-game-status",this.BossGameStatus)),this.BossGameStatus=="GameOver"){if(this.scene.get("BossUI").resetTimer(),this.scene.get("PlayerUI").PlayerUIStatus="Hide",this.bossContainer.body.setVelocityX(0),this.bossContainer.body.setVelocityY(0),g<=0&&this.isPlayerDie==!1){console.log("玩家死亡！"),this.isPlayerDie=!0,this.GameStatus="pause",this.playerContainer.body.setVelocityX(0),this.playerContainer.body.setVelocityY(0);let M=setTimeout(()=>{t.scene.get("BossUI").resetTimer(),clearTimeout(M)},3e3),l=setTimeout(()=>{np(2),rp("Down"),t.BossGameStatus="Done",Ft.emit("Change-boss-game-status",this.BossGameStatus),t.scene.get("BossUI").initFun(),t.scene.get("PlayerUI").initFun(),t.scene.stop("BossUI"),t.cameras.main.fadeOut(1e3,0,0,0),t.cameras.main.once(Phaser.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,(T,e)=>{t.scene.stop("BossGame"),t.scene.start("MainPreload")}),clearTimeout(l)},4e3)}if(C<=0&&this.isBossDie==!1){this.attackNormalTimer.pause=!0,console.log("boss die");let M=t.add.sprite(this.bossContainer.x,this.bossContainer.y,"BossDieFire");M.play("BossDieFireRun",!0);let l=setTimeout(()=>{M.destroy(),s.play("BossDeadRun",!0),clearTimeout(l)},1e3);this.isBossDie=!0,this.GameStatus="play",this.GameWinLeaveTarget=this.add.rectangle(this.Map.widthInPixels/2,this.Map.heightInPixels-32,20,20,65280,.3).setOrigin(.5),this.add.existing(this.GameWinLeaveTarget),this.physics.world.enable(this.GameWinLeaveTarget),this.isInitTarget=!1,this.physics.add.overlap(this.GameWinLeaveTarget,this.playerContainer,function(){this.isInitTarget||(this.isInitTarget=!0,this.playerContainer.body.setVelocityY(0),this.playerContainer.body.setVelocityX(0),this.GameWinLeaveTarget.destroy(),this.BossDoor.body.enable=!0,zt.Flag.push("boss_quest_1_2"),t.cameras.main.once(Phaser.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,(T,e)=>{t.BossGameStatus="Done",Ft.emit("Change-boss-game-status",this.BossGameStatus),t.scene.get("BossUI").initFun(),t.scene.get("PlayerUI").initFun(),t.scene.stop("BossUI"),t.scene.stop("BossGame"),t.scene.stop("BossGame")}))},null,this)}}}changeNormalUltimateMode(t){t.bossAttackStatus=="normal"?t.bossAttackStatus="ultimate":t.bossAttackStatus="normal",this.randomMode(t)}randomMode(t){var s=0;t.bossAttackStatus=="normal"?s=Math.floor(Math.random()*1)+1:s=Math.floor(Math.random()*3)+1,t.bossFightMode=s}BossMoveToTarget(t,s,g){const C=s.x-t.x,M=s.y-t.y;if(Math.sqrt(C*C+M*M)>1){const e=Math.atan2(M,C);t.body.setVelocityX(Math.cos(e)*g),t.body.setVelocityY(Math.sin(e)*g)}else t.body.setVelocity(0,0)}bossAttackNormal(){if(this.BossGameStatus=="Play"){const t=this.physics.add.sprite(this.bossContainer.x,this.bossContainer.y,"bossAttackNormalFireBall");t.body.setCircle(16),t.play("AttackNormalBallRun");let s=this.bossContainer.list.find(g=>g instanceof Zi);this.BossMoveToTarget(t,this.playerContainer,s.normal_mode_1_atackSpeedFire),this.attackSpritHitPlayer=!1,this.physics.add.overlap(t,this.playerContainer,function(){this.attackSpritHitPlayer||(this.attackSpritHitPlayer=!0,this.time.delayedCall(100,function(){this.attackSpritHitPlayer=!1,t.destroy(),this.hitPlayerHp(s.normal_mode_1_hitPlayerValue)},[],this))},null,this),this.time.delayedCall(2e3,()=>{t.destroy()},[],this)}}BossAttackNormalMode1(){var t=this;let s=this.bossContainer.list.find(g=>g instanceof Zi);if(s.bossStatus="Attack",s.bossStatus=="Attack"){if(!s.normal_mode_1_isAttackInit){this.attackNormalTimer=this.time.addEvent({delay:s.normal_mode_1_atackSpeed,loop:!0,callback:this.bossAttackNormal,callbackScope:this}),s.normal_mode_1_attackStatus="attack",console.log("AttackNormalMode1 Start"),s.normal_mode_1_isAttackInit=!0;let g=setTimeout(()=>{s.normal_mode_1_attackStatus="wait",t.attackNormalTimer.remove(),clearTimeout(g)},s.normal_mode_1_atackTime)}if(s.normal_mode_1_attackStatus=="attack"){const g=this.playerContainer,C=this.bossContainer;this.BossMoveToTarget(C,g,50)}if(s.normal_mode_1_attackStatus=="wait"){let g=this.bossInitPosItem;g.y=this.Map.heightInPixels/2;const C=this.bossContainer;this.BossMoveToTarget(C,g,50),C.body.velocity.x==0&&C.body.velocity.y==0&&(s.normal_mode_1_attackStatus="end",console.log(s.normal_mode_1_attackStatus))}s.normal_mode_1_attackStatus=="end"&&(s.bossStatus="Idle",s.normal_mode_1_isAttackInit=!1,s.normal_mode_1_attackStatus="none",console.log(s.normal_mode_1_attackStatus),this.changeNormalUltimateMode(s),s.play("BossIdle1",!0))}}BossAttackUltimateMode1(){var t=this;let s=this.bossContainer.list.find(l=>l instanceof Zi);if(s.bossStatus="Attack",s.bossStatus=="Attack"&&!s.mode1_isAttackInit){console.log("AttackMode1 Start"),s.mode1_isAttackInit=!0,s.mode1_attackTimes=s.mode1_attackTimes+1,s.play("BossAttack1Run1",!0);for(var g=[],C=0;C<this.bossContainer.mode1_attackPosList.length;C++)g.push(C);for(var M=0;M<s.mode1_attackNum;M++){let d=setTimeout(()=>{var x=Math.floor(Math.random()*g.length),u=t.add.sprite(t.bossContainer.mode1_attackPosList[g[x]].x,t.bossContainer.mode1_attackPosList[g[x]].y,"AttackCicle"),h=t.add.sprite(t.bossContainer.mode1_attackPosList[g[x]].x,t.bossContainer.mode1_attackPosList[g[x]].y,"AttackWater"),o=t.add.sprite(t.bossContainer.mode1_attackPosList[g[x]].x,t.bossContainer.mode1_attackPosList[g[x]].y-16,"AttackShock");h.visible=!1,o.visible=!1,u.play("AttackCicleRun",!0),g.splice(x,1);let n=setTimeout(()=>{u.destroy(),h.visible=!0,t.physics.add.existing(h),h.setOrigin(.5,1),h.setScale(1),h.body.setSize(32,32),h.body.setOffset(16,178),h.body.setCircle(16),h.setDepth(3),h.play("AttackWaterRun",!0),h.isBossHitPlayer=0;let r=setTimeout(()=>{o.visible=!0,o.play("AttackShockRun",!0),t.physics.add.overlap(h,t.playerContainer,()=>{h.isBossHitPlayer==0&&(h.isBossHitPlayer=1,setTimeout(()=>{console.log("Mode1 攻擊到玩家"),t.hitPlayerHp(s.mode1_hitPlayerValue),t.playerContainer.list[0].setTint(16711680),setTimeout(()=>{t.playerContainer.list[0].clearTint(),setTimeout(()=>{h.isBossHitPlayer=0},850)},50)},100))},null,!0);let a=setTimeout(()=>{o.destroy(),clearTimeout(a)},200);clearTimeout(r)},200),f=setTimeout(()=>{h.destroy(),clearTimeout(f)},500);clearTimeout(n)},2e3);clearTimeout(d)},s.mode1_attackDelayTime+s.mode1_attackDelayTime*M)}let l=setTimeout(()=>{s.play("BossAttack1Run2",!0),clearTimeout(l)},250),T=setTimeout(()=>{s.play("BossAttack1Run3",!0),clearTimeout(T)},(s.mode1_attackNum+1)*s.mode1_attackDelayTime+2750),e=setTimeout(()=>{if(s.mode1_isAttackInit=!1,s.bossStatus="Idle",s.mode1_attackMaxTimes==s.mode1_attackTimes){s.bossStatus="Idle",s.bossFightMode="0",s.mode1_attackTimes=0,s.bossStatus="Attack",s.play("BossIdle",!0),console.log("AttackMode1 End");let d=setTimeout(()=>{t.changeNormalUltimateMode(s),clearTimeout(d)},2e3)}clearTimeout(e)},(s.mode1_attackNum+1)*s.mode1_attackDelayTime+3e3)}}BossAttackUltimateMode2(){var t=this;let s=this.bossContainer.list.find(T=>T instanceof Zi);if(s.bossStatus="Attack",s.bossStatus=="Attack"&&!s.mode2_isAttackInit){s.play("BossAttack1Run1",!0),console.log("AttackMode2 Start"),s.mode2_isAttackInit=!0,s.mode2_attackTimes=s.mode2_attackTimes+1;for(var g=[],C=0;C<this.bossContainer.mode2_attackPosList.length;C++)g.push(C);for(var M=0;M<3;M++){var l=Math.floor(Math.random()*g.length);let x=t.bossContainer.mode2_attackPosList[g[l]].x,u=t.bossContainer.mode2_attackPosList[g[l]].y,h=t.bossContainer.mode2_attackPosList[g[l]].width,o=t.bossContainer.mode2_attackPosList[g[l]].height,n=t.add.sprite(x+h/2,u+o/2,"AttackBox");n.visible=!1;let r=new Phaser.GameObjects.Rectangle(this,x,u,h,o,16711680,.3).setOrigin(0);t.add.existing(r),t.physics.world.enable(r),r.setScale(1),g.splice(l,1);let f=0,a=setInterval(()=>{if(f++,r.visible==!0?r.visible=!1:r.visible=!0,f==8){let p=new Phaser.GameObjects.Rectangle(this,x,u,h,o,16711680,0).setOrigin(0);t.add.existing(p),t.physics.world.enable(p),p.setScale(1),n.visible=!0,n.setOrigin(.5),n.setScale(1).setDepth(2),n.play("AttackBoxRun",!0),p.isBossHitPlayer=0,t.physics.add.overlap(p,t.playerContainer,()=>{p.isBossHitPlayer==0&&(p.isBossHitPlayer=1,setTimeout(()=>{console.log("Mode2 攻擊到玩家"),t.hitPlayerHp(s.mode2_hitPlayerValue),t.playerContainer.list[0].setTint(16711680),setTimeout(()=>{t.playerContainer.list[0].clearTint(),setTimeout(()=>{p.isBossHitPlayer=0},850)},50)},100))},null,!0);let v=setTimeout(()=>{n.destroy(),p.destroy(),clearTimeout(v)},1e3);clearInterval(a),r.destroy()}},200),c=setTimeout(()=>{s.mode2_isAttackInit=!1,s.bossStatus="Idle",s.mode2_attackMaxTimes==s.mode2_attackTimes&&(s.bossStatus="Idle",s.bossFightMode="0",s.mode2_attackTimes=0,t.changeNormalUltimateMode(s),s.bossStatus="Attack",console.log("AttackMode2 End")),clearTimeout(c)},s.mode2_waitTime*1e3)}let T=setTimeout(()=>{s.play("BossAttack1Run2",!0),clearTimeout(T)},250),e=setTimeout(()=>{s.play("BossAttack1Run3",!0),clearTimeout(e)},1e3),d=setTimeout(()=>{s.play("BossIdle",!0),clearTimeout(d)},1250)}}BossAttackUltimateMode3(){var t=this;let s=this.bossContainer.list.find(g=>g instanceof Zi);if(s.bossStatus="Attack",s.bossStatus=="Attack"){if(!s.mode3_isAttackInit){s.mode3_isAttackInit=!0,s.play("BossAttack1Run1",!0),console.log("AttackMode3 Start");let g=setTimeout(()=>{s.mode3_attackTimes=s.mode3_attackTimes+1;let C=this.bossContainer.mode3_attackPosList[0].x,M=this.bossContainer.mode3_attackPosList[0].y,l=this.add.sprite(0,0,"Attack3Fire"),T=this.add.sprite(0,0,"Attack3Fire"),e=this.add.sprite(0,0,"Attack3Fire"),d=this.add.sprite(0,0,"Attack3Fire");l.setOrigin(.5,1),l.setScale(3.5).setDepth(1).setAngle(0),l.play("Attack3FireRun1",!0),T.setOrigin(.5,1),T.setScale(3.5).setDepth(1).setAngle(90),T.play("Attack3FireRun1",!0),e.setOrigin(.5,1),e.setScale(3.5).setDepth(1).setAngle(180),e.play("Attack3FireRun1",!0),d.setOrigin(.5,1),d.setScale(3.5).setDepth(1).setAngle(270),d.play("Attack3FireRun1",!0),t.attack3Container=t.add.container(C,M),t.physics.world.enable(t.attack3Container),t.attack3Container.setSize(64,0),t.attack3Container.setDepth(1),t.attack3Container.add(l),t.attack3Container.add(T),t.attack3Container.add(e),t.attack3Container.add(d);let x=setTimeout(()=>{l.play("Attack3FireRun2",!0),T.play("Attack3FireRun2",!0),e.play("Attack3FireRun2",!0),d.play("Attack3FireRun2",!0);for(let o=0;o<10;o++){let n=new Phaser.GameObjects.Ellipse(t,0,0-o*32,64,64,65280,0).setOrigin(.5),r=new Phaser.GameObjects.Ellipse(t,0,0+o*32,64,64,65280,0).setOrigin(.5),f=new Phaser.GameObjects.Ellipse(t,0+o*32,0,64,64,65280,0).setOrigin(.5),a=new Phaser.GameObjects.Ellipse(t,0-o*32,0,64,64,65280,0).setOrigin(.5);t.add.existing(n),t.add.existing(r),t.add.existing(f),t.add.existing(a),t.physics.world.enable(n),t.physics.world.enable(r),t.physics.world.enable(f),t.physics.world.enable(a),n.body.setCircle(64/2),r.body.setCircle(64/2),f.body.setCircle(64/2),a.body.setCircle(64/2),t.attack3Container.add(n),t.attack3Container.add(r),t.attack3Container.add(f),t.attack3Container.add(a),n.isBossHitPlayer=0,r.isBossHitPlayer=0,f.isBossHitPlayer=0,a.isBossHitPlayer=0,t.physics.add.overlap(n,t.playerContainer,()=>{n.isBossHitPlayer==0&&(n.isBossHitPlayer=1,setTimeout(()=>{console.log("Mode3 攻擊到玩家"),t.hitPlayerHp(s.mode3_hitPlayerValue),t.playerContainer.list[0].setTint(16711680),setTimeout(()=>{t.playerContainer.list[0].clearTint(),setTimeout(()=>{n.isBossHitPlayer=0},850)},50)},100))},null,!0),t.physics.add.overlap(r,t.playerContainer,()=>{r.isBossHitPlayer==0&&(r.isBossHitPlayer=1,setTimeout(()=>{console.log("Mode3 攻擊到玩家"),t.hitPlayerHp(s.mode3_hitPlayerValue),t.playerContainer.list[0].setTint(16711680),setTimeout(()=>{t.playerContainer.list[0].clearTint(),setTimeout(()=>{r.isBossHitPlayer=0},850)},50)},100))},null,!0),t.physics.add.overlap(f,t.playerContainer,()=>{f.isBossHitPlayer==0&&(f.isBossHitPlayer=1,setTimeout(()=>{console.log("Mode3 攻擊到玩家"),t.hitPlayerHp(s.mode3_hitPlayerValue),t.playerContainer.list[0].setTint(16711680),setTimeout(()=>{t.playerContainer.list[0].clearTint(),setTimeout(()=>{f.isBossHitPlayer=0},850)},50)},100))},null,!0),t.physics.add.overlap(a,t.playerContainer,()=>{a.isBossHitPlayer==0&&(a.isBossHitPlayer=1,setTimeout(()=>{console.log("Mode3 攻擊到玩家"),t.hitPlayerHp(s.mode3_hitPlayerValue),t.playerContainer.list[0].setTint(16711680),setTimeout(()=>{t.playerContainer.list[0].clearTint(),setTimeout(()=>{a.isBossHitPlayer=0},850)},50)},100))},null,!0)}clearTimeout(x)},500);t.attack3Container.angle=25;let u=setTimeout(()=>{for(let o=t.attack3Container.list.length-1;o>=4;o--)t.attack3Container.list[o].destroy();l.play("Attack3FireRun3",!0),T.play("Attack3FireRun3",!0),e.play("Attack3FireRun3",!0),d.play("Attack3FireRun3",!0),clearTimeout(u)},4500),h=setTimeout(()=>{if(t.attack3Container.destroy(),s.play("BossAttack1Run3",!0),t.attack3Container=null,s.mode3_isAttackInit=!1,s.bossStatus="Idle",s.mode3_attackMaxTimes==s.mode3_attackTimes){s.bossStatus="Idle",s.bossFightMode="0",s.mode3_attackTimes=0;let o=setTimeout(()=>{t.changeNormalUltimateMode(s),clearTimeout(o)},2e3);s.play("BossIdle",!0),console.log("AttackMode3 End")}clearTimeout(h)},5e3);clearTimeout(g)},1e3)}this.attack3Container&&(this.attack3Container.angle>=360&&this.attack3Container.setAngle(0),this.attack3Container.setAngle(this.attack3Container.angle+1))}}playGame(){}}class B9 extends me.Scene{constructor(){super("PlayerUI"),this.PlayerUIStatus="Load",this.hp=10,this.PlayerMaxHp=10}create(){this.PlayerNameText=this.add.text(10,-25,"Player 1",{fontFamily:'"Press Start 2P"',fontSize:"12px",color:"#FFFFFF",wordWrap:{width:at.width-30,useAdvancedWrap:!0}}).setOrigin(0,0),this.add.existing(this.PlayerNameText),this.physics.world.enable(this.PlayerNameText),this.PlayerHpBar=new me.GameObjects.Rectangle(this,10,-10,200,10,16737280,.7).setOrigin(0,0),this.add.existing(this.PlayerHpBar),this.physics.world.enable(this.PlayerHpBar)}initFun(){this.PlayerNameText.x=10,this.PlayerNameText.y=-25,this.PlayerHpBar.x=10,this.PlayerHpBar.y=-10,this.hp=this.PlayerMaxHp,this.PlayerHpBar.width=200}update(){this.PlayerUIStatus=="Show"&&(this.PlayerNameText.y<10?this.PlayerNameText.body.setVelocityY(100):this.PlayerNameText.body.setVelocityY(0),this.PlayerHpBar.y<25?this.PlayerHpBar.body.setVelocityY(100):this.PlayerHpBar.body.setVelocityY(0),this.PlayerHpBar.width=this.hp/this.PlayerMaxHp*200),this.PlayerUIStatus=="Hide"&&(this.PlayerNameText.y>-25?this.PlayerNameText.body.setVelocityY(-100):this.PlayerNameText.body.setVelocityY(0),this.PlayerHpBar.y>-10?this.PlayerHpBar.body.setVelocityY(-100):this.PlayerHpBar.body.setVelocityY(0))}}const Pm=[{Main:[{Name:"Home",ObjectId:2,EventId:"main_house_1_1,main_house_2_1"},{Name:"Room",ObjectId:8,EventId:"main_room_1_1"},{Name:"Boss",ObjectId:6,EventId:"main_bossdoor_0_1,main_bossdoor_1_1,main_bossdoor_2_1"}]},{Home:[{Name:"Door",ObjectId:4,EventId:"home_door_1_1"},{Name:"river",ObjectId:5,EventId:"home_quest_1_1,home_quest_2_1,home_quest_3_1"}]},{Room:[{Name:"Notice",ObjectId:1,EventId:"room_notice_1_1"},{Name:"RoomDoor",ObjectId:7,EventId:"room_door_1_1"},{Name:"AorusGirl",ObjectId:10,EventId:"room_npc_1_1,room_npc_2_1,room_npc_3_1"}]},{Boss:[{Name:"BossTarget",ObjectId:9,EventId:"boss_quest_1_1"},{Name:"BossDoor",ObjectId:11,EventId:"boss_door_2_1"}]}],G9=[{room_notice_1:[{DiglogueId:1,DiglogueContent:"是一本日記",Identity:"Player",NameId:"player",Name:"玩家"},{DiglogueId:2,DiglogueContent:"感覺有點熟悉...",Identity:"Player",NameId:"player",Name:"玩家"}]},{room_npc_1:[{DiglogueId:1,DiglogueContent:"（驚喜）你醒啦！你還好嗎？",Identity:"Npc",NameId:"aorusgirl",Name:"鷹妹"},{DiglogueId:2,DiglogueContent:"（茫然）我頭好痛。你是誰，這裡是哪裡？",Identity:"Player",NameId:"player",Name:"玩家"},{DiglogueId:3,DiglogueContent:"（驚喜）你什麼都不記得了嗎？",Identity:"Npc",NameId:"aorusgirl",Name:"鷹妹"},{DiglogueId:4,DiglogueContent:"（困惑）我...我不記得任何事情。",Identity:"Player",NameId:"player",Name:"玩家"},{DiglogueId:5,DiglogueContent:"我剛好在這附近找尋資源時發現你昏迷在地上，你可以稱呼我為鷹妹。請問你叫什麼名子？",Identity:"Npc",NameId:"aorusgirl",Name:"鷹妹"}]},{room_npc_2:[{DiglogueId:1,DiglogueContent:"雖然現在這樣時候說很不好意思，不知道能不能請你幫一個忙。",Identity:"Npc",NameId:"aorusgirl",Name:"鷹妹"},{DiglogueId:2,DiglogueContent:"不確定我現在失憶，是否能夠幫上忙。",Identity:"Player",NameId:"player",Name:"玩家"},{DiglogueId:3,DiglogueContent:"（鼓勵）沒關係，我們也會幫助你恢復記憶，失去記憶並不代表失去了一切。我們會一步步尋找答案，你的記憶會逐漸恢復。",Identity:"Npc",NameId:"aorusgirl",Name:"鷹妹"},{DiglogueId:4,DiglogueContent:"好吧，我答應，況且妳也幫我療傷，我希望也可以報答鷹妹你。",Identity:"Player",NameId:"player",Name:"玩家"},{DiglogueId:5,DiglogueContent:"謝謝！我們的地下工廠的供電場似乎出了一些問題，導致我們的醫療儀器和部分商店都沒有辦法正常供電，所以希望有人可以去察看一下狀況。",Identity:"Npc",NameId:"aorusgirl",Name:"鷹妹"},{DiglogueId:6,DiglogueContent:"好，沒問題，那我該怎麼去呢。",Identity:"Player",NameId:"player",Name:"玩家"},{DiglogueId:7,DiglogueContent:"你去商店街武器店的{{NpcNameValue:xxx}}。，他會告訴你詳細情況的。",Identity:"Npc",NameId:"aorusgirl",Name:"鷹妹"},{DiglogueId:8,DiglogueContent:"（下定決心）好的！",Identity:"Player",NameId:"player",Name:"玩家"}]},{room_npc_3:[{DiglogueId:1,DiglogueContent:"謝謝你的幫忙",Identity:"Npc",NameId:"aorusgirl",Name:"鷹妹"},{DiglogueId:2,DiglogueContent:"你去商店街武器店的{{NpcNameValue:xxx}}。，他會告訴你詳細情況的。",Identity:"Npc",NameId:"aorusgirl",Name:"鷹妹"}]},{room_npc_4:[{DiglogueId:1,DiglogueContent:"你回來了",Identity:"Npc",NameId:"aorusgirl",Name:""},{DiglogueId:2,DiglogueContent:"感覺被擺了一道。",Identity:"Player",NameId:"player",Name:"玩家"},{DiglogueId:3,DiglogueContent:"至少你回來也解決了問題，我是在想也許透過戰鬥可以稍微讓你恢復記憶，就是所謂的強制治療吧，哈哈哈",Identity:"Npc",NameId:"aorusgirl",Name:""},{DiglogueId:4,DiglogueContent:"….",Identity:"Player",NameId:"player",Name:"玩家"},{DiglogueId:5,DiglogueContent:"至少你暫時忘記的失意的焦慮，好啦，也不會讓你做白工，這是{{NpcNameValue:xxx}}。給你的獎勵。",Identity:"Npc",NameId:"aorusgirl",Name:""},{DiglogueId:6,DiglogueContent:"確實，謝謝。",Identity:"Player",NameId:"player",Name:"玩家"}]},{main_noticeboard_1:[{DiglogueId:1,DiglogueContent:"歡迎來到實驗島嶼!",Identity:"System",NameId:"noticeboard",Name:"告示牌"},{DiglogueId:2,DiglogueContent:"請隨意晃晃",Identity:"System",NameId:"noticeboard",Name:"告示牌"}]},{main_house_1:[{DiglogueId:1,DiglogueContent:"是誰? 才幾點而已，在那邊一直敲門...",Identity:"Npc",NameId:"somebody",Name:"神秘人"},{DiglogueId:2,DiglogueContent:"我是{{PlayerName}}..",Identity:"Player",NameId:"player",Name:"玩家"},{DiglogueId:3,DiglogueContent:"歐!原來是你啊! 你來的正好，請進來吧!",Identity:"Npc",NameId:"somebody",Name:"神秘人"}]},{home_quest_1:[{DiglogueId:1,DiglogueContent:"小夥子妳醒拉，我是{{NpcNameValue:xxx}}",Identity:"Npc",NameId:"xxx",Name:""},{DiglogueId:2,DiglogueContent:"你好，{{NpcNameValue:xxx}}。請問我該怎麼到地下工廠。",Identity:"Player",NameId:"player",Name:"玩家"},{DiglogueId:3,DiglogueContent:"歐{{PlayerName}}答應這個忙了，太好了，我這裡剛好騰不出人手出來。",Identity:"Npc",NameId:"xxx",Name:""},{DiglogueId:4,DiglogueContent:"你只要從最右邊的電梯往下到達-4樓就可以到達地下供電場。",Identity:"Npc",NameId:"xxx",Name:""},{DiglogueId:5,DiglogueContent:"好，就交給我吧。",Identity:"Player",NameId:"player",Name:"玩家"},{DiglogueId:6,DiglogueContent:"等等，這個東西給你吧，用來自保應該是還可以沒問題的，那就萬事拜託啦。",Identity:"Npc",NameId:"xxx",Name:""}]},{home_quest_2:[{DiglogueId:1,DiglogueContent:"歐{{PlayerName}} ",Identity:"Npc",NameId:"xxx",Name:""},{DiglogueId:2,DiglogueContent:"你已經拿走武器了!",Identity:"Npc",NameId:"xxx",Name:""},{DiglogueId:3,DiglogueContent:"你只要從最右邊的電梯往下到達-4樓就可以到達地下供電場。",Identity:"Npc",NameId:"xxx",Name:""},{DiglogueId:4,DiglogueContent:"阿! 忘了告訴你",Identity:"Npc",NameId:"xxx",Name:""},{DiglogueId:5,DiglogueContent:'按下 "Z" 可以攻擊',Identity:"Npc",NameId:"xxx",Name:""},{DiglogueId:6,DiglogueContent:'按下 "Shift" 可以奔跑',Identity:"Npc",NameId:"xxx",Name:""}]},{home_quest_3:[{DiglogueId:1,DiglogueContent:"你回來啦",Identity:"Npc",NameId:"xxx",Name:""},{DiglogueId:2,DiglogueContent:"沒跟我說裡面有怪物阿。",Identity:"Player",NameId:"player",Name:"玩家"},{DiglogueId:3,DiglogueContent:"哈哈哈哈哈，我相信你一定有辦法打倒他，反正謝謝你幫我們解決這個大麻煩，我們的店都可以正常供電了。",Identity:"Npc",NameId:"xxx",Name:""},{DiglogueId:4,DiglogueContent:"@&)(&$(#(@&#)@*",Identity:"Player",NameId:"player",Name:"玩家"},{DiglogueId:5,DiglogueContent:"別生氣啦，至少你回復生氣，回去找鷹妹吧。",Identity:"Npc",NameId:"xxx",Name:""}]},{main_bossdoor_0:[{DiglogueId:1,DiglogueContent:"是電梯",Identity:"Player",NameId:"player",Name:""},{DiglogueId:2,DiglogueContent:"無法使用...",Identity:"Player",NameId:"player",Name:""}]},{main_bossdoor_1:[{DiglogueId:1,DiglogueContent:"阿! 門開了",Identity:"Player",NameId:"player",Name:""},{DiglogueId:2,DiglogueContent:"電梯下樓...",Identity:"Player",NameId:"player",Name:""}]},{main_bossdoor_2:[{DiglogueId:1,DiglogueContent:"再去一次好了",Identity:"Player",NameId:"player",Name:""},{DiglogueId:2,DiglogueContent:"電梯下樓...",Identity:"Player",NameId:"player",Name:""}]},{boss_quest_1:[{DiglogueId:1,DiglogueContent:"吼吼吼 兮兮兮兮 沙沙沙",Identity:"Npc",NameId:"boejgar",Name:"布傑卡"},{DiglogueId:2,DiglogueContent:"竟然有怪物，原來元凶是你啊。",Identity:"Player",NameId:"player",Name:"玩家"}]}],_t=[{EventID:"room_notice_1_1",DES:"查看日記",Require:"UserAction:F",HaveFlag:"",Action:"",ReturnId:"",Next:"room_notice_1_2",Location:"看板"},{EventID:"room_notice_1_2",DES:"",Require:"",HaveFlag:"",Action:"AddFlag",ReturnId:"ADD:show_girl",Next:"room_notice_1_3",Location:""},{EventID:"room_notice_1_3",DES:"",Require:"UserAction:Space",HaveFlag:"",Action:"MessagePad",ReturnId:"MSG:room_notice_1",Next:"End",Location:""},{EventID:"room_npc_1_1",DES:"與鵰妹對話",Require:"UserAction:F",HaveFlag:"",Action:"",ReturnId:"",Next:"room_npc_1_2",Location:""},{EventID:"room_npc_1_2",DES:"產生第一段對話",Require:"UserAction:Space",HaveFlag:"",Action:"MessagePad",ReturnId:"MSG:room_npc_1",Next:"room_npc_1_3",Location:""},{EventID:"room_npc_1_3",DES:"輸入名字",Require:"UserAction:Enter",HaveFlag:"",Action:"InputPlayerName",ReturnId:"",Next:"room_npc_1_4",Location:""},{EventID:"room_npc_1_4",DES:"",Require:"",HaveFlag:"",Action:"AddFlag",ReturnId:"ADD:room_npc_1",Next:"room_npc_1_5",Location:""},{EventID:"room_npc_1_5",DES:"",Require:"UserAction:Space",HaveFlag:"",Action:"MessagePad",ReturnId:"MSG:room_npc_2",Next:"End",Location:""},{EventID:"room_npc_2_1",DES:"",Require:"UserAction:F",HaveFlag:"room_npc_1",Action:"",ReturnId:"",Next:"room_npc_2_2",Location:""},{EventID:"room_npc_2_2",DES:"",Require:"UserAction:Space",HaveFlag:"",Action:"MessagePad",ReturnId:"MSG:room_npc_3",Next:"End",Location:""},{EventID:"room_npc_3_1",DES:"",Require:"UserAction:F",HaveFlag:"home_quest_3",Action:"",ReturnId:"",Next:"room_npc_3_2",Location:""},{EventID:"room_npc_3_2",DES:"",Require:"UserAction:Space",HaveFlag:"",Action:"MessagePad",ReturnId:"MSG:room_npc_4",Next:"End",Location:""},{EventID:"room_door_1_1",DES:"互動 門1",Require:"UserAction:F",HaveFlag:"",Action:"",ReturnId:"",Next:"room_door_1_2",Location:""},{EventID:"room_door_1_2",DES:"切換場景",Require:"",HaveFlag:"",Action:"ChangeScene",ReturnId:"POS:Main,0,Up",Next:"End",Location:""},{EventID:"main_room_1_1",DES:"互動 門1",Require:"UserAction:F",HaveFlag:"",Action:"",ReturnId:"",Next:"main_room_1_2",Location:""},{EventID:"main_room_1_2",DES:"切換場景",Require:"",HaveFlag:"",Action:"ChangeScene",ReturnId:"POS:Room,1,Down",Next:"End",Location:""},{EventID:"main_house_1_1",DES:"互動 門1",Require:"UserAction:F",HaveFlag:"",Action:"",ReturnId:"",Next:"main_house_1_2",Location:"房子門"},{EventID:"main_house_1_2",DES:"彈出對話框 1",Require:"UserAction:Space",HaveFlag:"",Action:"MessagePad",ReturnId:"MSG:main_house_1",Next:"main_house_1_3",Location:""},{EventID:"main_house_1_3",DES:"對話框結束 彈出是否選項",Require:"",HaveFlag:"",Action:"TFPad",ReturnId:"BTN:in,cancel",Next:"main_house_select_1_1,main_house_select_1_2",Location:""},{EventID:"main_house_select_1_1",DES:"是,進門",Require:"UserAction:Space",HaveFlag:"",Action:"AddFlag",ReturnId:"ADD:main_house_1_2",Next:"main_house_1_6",Location:""},{EventID:"main_house_select_1_2",DES:"否",Require:"UserAction:F",HaveFlag:"",Action:"",ReturnId:"",Next:"End",Location:""},{EventID:"main_house_1_6",DES:"切換場景",Require:"",HaveFlag:"",Action:"ChangeScene",ReturnId:"POS:Home,0,Up",Next:"End",Location:""},{EventID:"main_house_2_1",DES:"互動 門1",Require:"UserAction:F",HaveFlag:"main_house_1_2",Action:"",ReturnId:"",Next:"main_house_2_2",Location:"房子門"},{EventID:"main_house_2_2",DES:"切換場景",Require:"",HaveFlag:"",Action:"ChangeScene",ReturnId:"POS:Home,0,Up",Next:"End",Location:""},{EventID:"main_bossdoor_0_1",DES:"互動 門1",Require:"UserAction:F",HaveFlag:"",Action:"",ReturnId:"",Next:"main_bossdoor_0_2",Location:"Boss"},{EventID:"main_bossdoor_0_2",DES:"",Require:"UserAction:Space",HaveFlag:"",Action:"MessagePad",ReturnId:"MSG:main_bossdoor_0",Next:"End",Location:""},{EventID:"main_bossdoor_1_1",DES:"互動 門1",Require:"UserAction:F",HaveFlag:"home_quest_1_1",Action:"",ReturnId:"",Next:"main_bossdoor_1_2",Location:"Boss"},{EventID:"main_bossdoor_1_2",DES:"彈出對話框 1",Require:"UserAction:Space",HaveFlag:"",Action:"MessagePad",ReturnId:"MSG:main_bossdoor_1",Next:"main_bossdoor_1_3",Location:""},{EventID:"main_bossdoor_1_3",DES:"對話框結束 彈出是否選項",Require:"",HaveFlag:"",Action:"TFPad",ReturnId:"BTN:in,cancel",Next:"main_bossdoor_select_1_1,main_bossdoor_select_1_2",Location:""},{EventID:"main_bossdoor_select_1_1",DES:"是,進門",Require:"UserAction:Space",HaveFlag:"",Action:"AddFlag",ReturnId:"ADD:main_bossdoor_1_2",Next:"main_bossdoor_1_6",Location:""},{EventID:"main_bossdoor_select_1_2",DES:"否",Require:"UserAction:F",HaveFlag:"",Action:"",ReturnId:"",Next:"End",Location:""},{EventID:"main_bossdoor_1_6",DES:"切換場景",Require:"",HaveFlag:"",Action:"ChangeScene",ReturnId:"POS:Boss,0,Up",Next:"End",Location:""},{EventID:"main_bossdoor_2_1",DES:"互動 門1",Require:"UserAction:F",HaveFlag:"boss_quest_1_2",Action:"",ReturnId:"",Next:"main_bossdoor_2_2",Location:"Boss"},{EventID:"main_bossdoor_2_2",DES:"彈出對話框 1",Require:"UserAction:Space",HaveFlag:"",Action:"MessagePad",ReturnId:"MSG:main_bossdoor_2",Next:"main_bossdoor_2_3",Location:""},{EventID:"main_bossdoor_2_3",DES:"對話框結束 彈出是否選項",Require:"",HaveFlag:"",Action:"TFPad",ReturnId:"BTN:in,cancel",Next:"main_bossdoor_select_2_1,main_bossdoor_select_2_2",Location:""},{EventID:"main_bossdoor_select_2_1",DES:"是,進門",Require:"UserAction:Space",HaveFlag:"",Action:"AddFlag",ReturnId:"ADD:main_bossdoor_1_2",Next:"main_bossdoor_2_6",Location:""},{EventID:"main_bossdoor_select_2_2",DES:"否",Require:"UserAction:F",HaveFlag:"",Action:"",ReturnId:"",Next:"End",Location:""},{EventID:"main_bossdoor_2_6",DES:"切換場景",Require:"",HaveFlag:"",Action:"ChangeScene",ReturnId:"POS:Boss,0,Up",Next:"End",Location:""},{EventID:"home_door_1_1",DES:"互動 門1",Require:"UserAction:F",HaveFlag:"",Action:"",ReturnId:"",Next:"home_door_1_2",Location:"房子門"},{EventID:"home_door_1_2",DES:"切換場景",Require:"",HaveFlag:"",Action:"ChangeScene",ReturnId:"POS:Main,1,Down",Next:"End",Location:""},{EventID:"home_quest_1_1",DES:"拿武器任務",Require:"UserAction:F",HaveFlag:"",Action:"",ReturnId:"",Next:"home_quest_1_2",Location:"NPC"},{EventID:"home_quest_1_2",DES:"對話框",Require:"UserAction:Space",HaveFlag:"",Action:"MessagePad",ReturnId:"MSG:home_quest_1",Next:"home_quest_1_3",Location:""},{EventID:"home_quest_1_3",DES:"",Require:"",HaveFlag:"",Action:"AddFlag",ReturnId:"ADD:home_quest_1_1",Next:"home_quest_1_4",Location:""},{EventID:"home_quest_1_4",DES:"",Require:"",HaveFlag:"",Action:"AddObject",ReturnId:"ADD:Sword1",Next:"End",Location:""},{EventID:"home_quest_2_1",DES:"",Require:"UserAction:F",HaveFlag:"home_quest_1_1",Action:"",ReturnId:"",Next:"home_quest_2_2",Location:""},{EventID:"home_quest_2_2",DES:"",Require:"UserAction:Space",HaveFlag:"",Action:"MessagePad",ReturnId:"MSG:home_quest_2",Next:"home_quest_2_3",Location:""},{EventID:"home_quest_2_3",DES:"",Require:"",HaveFlag:"",Action:"DelMainQuest",ReturnId:"DEL:home_quest_1_2",Next:"home_quest_2_4",Location:""},{EventID:"home_quest_2_4",DES:"",Require:"",HaveFlag:"",Action:"AddMainQuest",ReturnId:"ADD:home_quest_1_1",Next:"End",Location:""},{EventID:"home_quest_3_1",DES:"",Require:"UserAction:F",HaveFlag:"boss_quest_1_2",Action:"",ReturnId:"",Next:"home_quest_3_2",Location:""},{EventID:"home_quest_3_2",DES:"",Require:"",HaveFlag:"",Action:"AddFlag",ReturnId:"ADD:home_quest_3",Next:"home_quest_3_3",Location:""},{EventID:"home_quest_3_3",DES:"",Require:"UserAction:Space",HaveFlag:"",Action:"MessagePad",ReturnId:"MSG:home_quest_3",Next:"End",Location:""},{EventID:"boss_quest_1_1",DES:"",Require:"UserAction:F",HaveFlag:"",Action:"",ReturnId:"",Next:"boss_quest_1_2",Location:""},{EventID:"boss_quest_1_2",DES:"",Require:"UserAction:Space",HaveFlag:"",Action:"MessagePad",ReturnId:"MSG:boss_quest_1",Next:"boss_quest_1_3",Location:""},{EventID:"boss_quest_1_3",DES:"",Require:"",HaveFlag:"",Action:"AddFlag",ReturnId:"ADD:boss_quest_1",Next:"End",Location:""},{EventID:"boss_door_2_1",DES:"互動 門1",Require:"UserAction:F",HaveFlag:"",Action:"",ReturnId:"",Next:"boss_door_2_2",Location:""},{EventID:"boss_door_2_2",DES:"切換場景",Require:"",HaveFlag:"",Action:"ChangeScene",ReturnId:"POS:Main,2,Down",Next:"End",Location:""}],N9={noticeboard:"Notice Board",somebody:"Some Body",player:"Player",stone:"Stone",xxx:"",aorusgirl:"",boejgar:"Bo Je Gar"},V9={next:"Next",in:"In",getweapon:"Get",out:"Out",cancel:"Cancel"},k9={"//Notice":"",room_notice_1_1:"",room_notice_1_2:"","//NpcAORUSgirl":"",room_npc_1_1:"",room_npc_1_2:"",room_npc_1_3:"",room_npc_1_4:"",room_npc_1_5:"",room_npc_2_1:"",room_npc_2_2:"",room_npc_2_3:"",room_npc_2_4:"",room_npc_2_5:"",room_npc_2_6:"",room_npc_2_7:"",room_npc_2_8:"",room_npc_3_1:"",room_npc_3_2:"",room_npc_4_1:"",room_npc_4_2:"",room_npc_4_3:"",room_npc_4_4:"",room_npc_4_5:"",room_npc_4_6:""},z9={"//門":"",main_house_1_1:"",main_house_1_2:"",main_house_1_3:"","//石頭":"",main_bossdoor_0_1:"",main_bossdoor_0_2:"",main_bossdoor_1_1:"",main_bossdoor_1_2:"",main_bossdoor_2_1:"",main_bossdoor_2_2:""},U9={"//Npc":"",home_quest_1_1:"",home_quest_1_2:"",home_quest_1_3:"",home_quest_1_4:"",home_quest_1_5:"",home_quest_1_6:"",home_quest_2_1:"",home_quest_2_2:"",home_quest_2_3:"",home_quest_2_4:"",home_quest_2_5:"",home_quest_2_6:"",home_quest_3_1:"",home_quest_3_2:"",home_quest_3_3:"",home_quest_3_4:"",home_quest_3_5:""},Y9={"//boss":"",boss_quest_1_1:"",boss_quest_1_2:""},Jv={Message:N9,TpadBtn:V9,Room:k9,Main:z9,Home:U9,Boss:Y9},X9={noticeboard:"告示牌",somebody:"神秘人",player:"玩家",stone:"不知名的石頭",xxx:"布蘭德",aorusgirl:"鷹妹",boejgar:"布傑卡"},W9={next:"繼續",in:"進去",getweapon:"收下",out:"出去",cancel:"不了"},H9={"//Notice":"",room_notice_1_1:"是一本日記",room_notice_1_2:"感覺有點熟悉...","//NpcAORUSgirl":"",room_npc_1_1:"（驚喜）你醒啦！你還好嗎？",room_npc_1_2:"（茫然）我頭好痛。你是誰，這裡是哪裡？",room_npc_1_3:"（驚喜）你什麼都不記得了嗎？",room_npc_1_4:"（困惑）我...我不記得任何事情。",room_npc_1_5:"我剛好在這附近找尋資源時發現你昏迷在地上，你可以稱呼我為鷹妹。請問你叫什麼名子？",room_npc_2_1:"雖然現在這樣時候說很不好意思，不知道能不能請你幫一個忙。",room_npc_2_2:"不確定我現在失憶，是否能夠幫上忙。",room_npc_2_3:"（鼓勵）沒關係，我們也會幫助你恢復記憶，失去記憶並不代表失去了一切。我們會一步步尋找答案，你的記憶會逐漸恢復。",room_npc_2_4:"好吧，我答應，況且妳也幫我療傷，我希望也可以報答鷹妹你。",room_npc_2_5:"謝謝！我們的地下工廠的供電場似乎出了一些問題，導致我們的醫療儀器和部分商店都沒有辦法正常供電，所以希望有人可以去察看一下狀況。",room_npc_2_6:"好，沒問題，那我該怎麼去呢。",room_npc_2_7:"你去商店街武器店的{{NpcNameValue:xxx}}，他會告訴你詳細情況的。",room_npc_2_8:"（下定決心）好的！",room_npc_3_1:"謝謝你的幫忙",room_npc_3_2:"你去商店街武器店的{{NpcNameValue:xxx}}。，他會告訴你詳細情況的。",room_npc_4_1:"你回來了",room_npc_4_2:"感覺被擺了一道。",room_npc_4_3:"至少你回來也解決了問題，我是在想也許透過戰鬥可以稍微讓你恢復記憶，就是所謂的強制治療吧，哈哈哈",room_npc_4_4:"….",room_npc_4_5:"至少你暫時忘記的失意的焦慮，好啦，也不會讓你做白工，這是{{NpcNameValue:xxx}}給你的獎勵。",room_npc_4_6:"確實，謝謝。"},$9={"//門":"",main_house_1_1:"是誰? 才幾點而已，在那邊一直敲門...",main_house_1_2:"我是{{PlayerName}}..",main_house_1_3:"歐!原來是你啊! 你來的正好，請進來吧!","//石頭":"",main_bossdoor_0_1:"是電梯",main_bossdoor_0_2:"無法使用...",main_bossdoor_1_1:"阿! 門開了",main_bossdoor_1_2:"電梯下樓...",main_bossdoor_2_1:"再挑戰一次",main_bossdoor_2_2:"電梯下樓..."},K9={"//Npc":"",home_quest_1_1:"小夥子妳醒拉，我是{{NpcNameValue:xxx}}",home_quest_1_2:"你好，{{NpcNameValue:xxx}}。請問我該怎麼到地下工廠。",home_quest_1_3:"歐{{PlayerName}}答應這個忙了，太好了，我這裡剛好騰不出人手出來。",home_quest_1_4:"你只要從最右邊的電梯往下到達-4樓就可以到達地下供電場。",home_quest_1_5:"好，就交給我吧。",home_quest_1_6:"等等，這個東西給你吧，用來自保應該是還可以沒問題的，那就萬事拜託啦。",home_quest_2_1:"歐{{PlayerName}} ",home_quest_2_2:"你已經拿走武器了!",home_quest_2_3:"你只要從最右邊的電梯往下到達-4樓就可以到達地下供電場。",home_quest_2_4:"阿! 忘了告訴你",home_quest_2_5:'按下 "Z" 可以攻擊',home_quest_2_6:'按下 "Shift" 可以奔跑',home_quest_3_1:"你回來啦",home_quest_3_2:"沒跟我說裡面有怪物阿。",home_quest_3_3:"哈哈哈哈哈，我相信你一定有辦法打倒他，反正謝謝你幫我們解決這個大麻煩，我們的店都可以正常供電了。",home_quest_3_4:"@&)(&$(#(@&#)@*",home_quest_3_5:"別生氣啦，至少你回復生氣，回去找鷹妹吧。"},Z9={"//boss":"",boss_quest_1_1:"吼吼吼 兮兮兮兮 沙沙沙",boss_quest_1_2:"竟然有怪物，原來元凶是你啊。"},j9={Message:X9,TpadBtn:W9,Room:H9,Main:$9,Home:K9,Boss:Z9};let Qv="zh-tw",Em=null;const J9=i=>{switch(i){case"en-us":return Jv;case"zh-tw":return j9;default:return Jv}},Q9=()=>{Em=J9(Qv),console.log("initLanguage:",Qv)},Rs=(i,t)=>Em[i][t];let De="",qv=0,Ie=0,bs=null,is=null,q9=i=>{i.dialogBtn=i.rexUI.add.dialog({x:0,y:0,background:i.rexUI.add.roundRectangle(0,0,0,0,5,"0xffffff"),leftToolbar:[i.rexUI.add.label({width:10,text:i.add.text(0,0,"",{fontSize:"10px",color:"#ff6400"}),space:{left:2}})],space:{left:2,right:2,top:2,bottom:2},align:{leftToolbar:"center"}}).layout(),i.dialogBtn.setDepth(6),Sd(i)},_9=i=>{i.dialog=i.rexUI.add.dialog({x:at.width/2,y:0,width:at.width-20,background:i.rexUI.add.roundRectangle(0,0,100,100,5,"0xffffff"),toolbar:[_v(i,"")],leftToolbar:[_v(i,"")],content:e8(i,""),actions:[tp(i,"F: OK"),tp(i,"Space: Next")],space:{left:0,right:0,top:-10,bottom:0,toolbarItem:1},align:{actions:"right"}}).layout(),i.dialog.setDepth(999),i.dialog.setOrigin(.5,1),i.dialog.y=at.height-10,$a(i)},t8=i=>{i.dialogTpad=i.rexUI.add.dialog({x:at.width/2,y:at.height/2,width:at.width-20,toolbar:[],leftToolbar:[],actions:[ep(i,""),ep(i,"")],space:{left:0,right:0,top:-10,bottom:0,toolbarItem:1},align:{actions:"center"}}).layout(),i.dialogTpad.setDepth(1e3),Nl(i)};var Mm=function(i,t,s){let g=s.ReturnId.split(":")[1];console.log(g),De="",t.dialog.layout();var C=!1;t.dialog.childrenMap.leftToolbar[0].visible=!1,t.dialog.childrenMap.toolbar[0].visible=!1;var M=!1;G9.map(d=>{if(console.log(d[g]),d[g]&&(qv=d[g].length,d[g][Ie])){let h=function(){if(C){if(Ie++,qv>Ie)Mm(i,t,s),u.off("down",h,i);else if(Ie=0,$a(t),i.scene.get(i.scenePage+"Game").GameStatus="play",i.isFStatus=!1,u.off("down",h,i),u.removeAllListeners(),u.destroy(),s.Next!="End"){let r=Os(s);pr(i,t,r)}}};var x=h;if(d[g][Ie+1]==null){for(let r in _t)if(_t[r].EventID==s.Next&&(_t[r].Action=="TFPad"||_t[r].Action=="InputPlayerName"))break;M=!0}t.dialog.childrenMap.actions[0].visible=!1,t.dialog.childrenMap.actions[1].visible=!0,t.dialog.childrenMap.actions[1].text="Space: "+Rs("TpadBtn","next");const u=i.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE);u.on("down",h,i),De=Rs(i.scenePage,g+"_"+d[g][Ie].DiglogueId);const o=/\{\{NpcNameValue:(.*?)\}\}/g,n=De.match(o);if(console.log(De,n),n)for(const r of n){const f=r.slice(15,-2);De=De.replace(n,Rs("Message",f))}De=De.replace(/{{PlayerName}}/g,zt.Name),d[g][Ie].Identity.match(/Npc/)?(t.dialog.childrenMap.toolbar[0].text=Rs("Message",d[g][Ie].NameId),t.dialog.childrenMap.leftToolbar[0].visible=!1,t.dialog.childrenMap.toolbar[0].visible=!0,De=De.replace(/{{NpcName}}/g,Rs("Message",d[g][Ie].NameId))):d[g][Ie].Identity.match(/Player|System/)&&(t.dialog.childrenMap.leftToolbar[0].text=Rs("Message",d[g][Ie].NameId),t.dialog.childrenMap.toolbar[0].visible=!1,t.dialog.childrenMap.leftToolbar[0].visible=!0),t.dialog.childrenMap.content.text=De,t.dialog.layout()}});var l=De.length,T=0;t.dialog.childrenMap.content.text="";var e=setInterval(()=>{T==l-1&&(C=!0,clearInterval(e),M&&s.Next!="End"&&(s.Next!="End"?Os(s):clearInterval(eventInterval))),t.dialog.childrenMap.content.text+=De[T],T++},50)},_v=function(i,t){return i.rexUI.add.label({width:0,height:0,background:i.rexUI.add.roundRectangle(0,0,100,40,5,16737280),text:i.add.text(0,-10,t,{fontSize:"10px"}),space:{left:5,right:5,top:5,bottom:5}})},e8=function(i,t){return i.rexUI.add.label({width:0,height:0,background:i.rexUI.add.roundRectangle(0,0,0,0,80,null),text:i.add.text(0,0,t,{fontSize:"12px",color:"#000000",wordWrap:{width:at.width-30,useAdvancedWrap:!0}}),space:{left:5,right:5,top:5,bottom:5}})},tp=function(i,t){return i.rexUI.add.label({background:i.rexUI.add.roundRectangle(0,0,100,40,5,16777215),text:i.add.text(0,0,t,{fontSize:"10px",color:"#cccccc"}),space:{left:5,right:5,top:5,bottom:5}})},ep=function(i,t){return i.rexUI.add.label({background:i.rexUI.add.roundRectangle(0,0,100,40,5,16737280),text:i.add.text(0,0,t,{fontSize:"10px",color:"#fff"}),margin:{left:5,right:5},space:{left:5,right:5,top:5,bottom:5}})};let Os=function(i){for(let t in _t)if(_t[t].EventID==i.Next)return _t[t]},pr=function(i,t,s){console.log(s);var g=setInterval(()=>{if(s.Action=="")console.log("End"),s.Next!="End"?s=Os(s):clearInterval(g);else if(s.Action=="MessagePad")i.scene.get(i.scenePage+"Game").GameStatus="pause",i.isFStatus=!0,console.log("MessagePad"),t.dialog.setVisible(!0),console.log(s),Mm(i,t,s),clearInterval(g);else if(s.Action=="TFPad")i.scene.get(i.scenePage+"Game").GameStatus="pause",i.isFStatus=!0,console.log("TFPad"),i8(i,t,s),clearInterval(g);else if(s.Action=="AddFlag")console.log("AddFlag"),zt.Flag.push(s.ReturnId.split(":")[1]),s.Next!="End"?s=Os(s):clearInterval(g);else if(s.Action=="ChangeScene"){console.log("ChangeScene"),clearInterval(g);var C=s.ReturnId.split(":")[1],M=C.split(",");np(M[1]),rp(M[2]),console.log(M[1],M[2]),i.cameras.main.fadeOut(1e3,0,0,0),i.cameras.main.once(Phaser.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,(T,e)=>{i.scene.start(M[0]+"Preload")})}else if(s.Action=="AddMainQuest"){console.log("AddMainQuest");var l=s.ReturnId.split(":")[1];s.Next!="End"?s=Os(s):clearInterval(g)}else if(s.Action=="AddObject"){console.log("AddObject");var l=s.ReturnId.split(":")[1];l=="Sword1"&&(zt.Weapon="Sword1",i.swordHitbox.visible=!0),s.Next!="End"?s=Os(s):clearInterval(g)}else if(s.Action=="InputPlayerName"){i.scene.get(i.scenePage+"Game").GameStatus="pause",i.isFStatus=!0,clearInterval(g),t.InputMessageBox=t.add.rectangle(at.width/2,at.height-10,at.width-30,50,16777215,1).setOrigin(.5,1),t.playerNameText=t.add.text(t.InputMessageBox.x-at.width/2+25,t.InputMessageBox.y-40,"請輸入玩家名稱:",{fontSize:"14px",fill:"#00000"}),t.playerNameTextEnter=t.add.text(at.width-20,t.InputMessageBox.y-5,"Enter : 送出",{fontSize:"10px",fill:"#cccccc"}).setOrigin(1,1);let T="";t.input.keyboard.on("keydown",function(e){e.key==="Enter"?(zt.Name=T,T="",s.Next!="End"&&(t.InputMessageBox.destroy(),t.playerNameText.destroy(),t.playerNameTextEnter.destroy(),t.input.keyboard.removeListener("keydown"),i.scene.get(i.scenePage+"Game").GameStatus="play",i.isFStatus=!1,pr(i,t,Os(s)))):e.key==="Backspace"?(T=T.slice(0,-1),t.playerNameText.setText("請輸入玩家名稱:"+T)):e.key.length===1&&(T.length<20&&(T+=e.key),t.playerNameText.setText("請輸入玩家名稱:"+T))})}},100)};var wm=function(i,t,s){pr(i,t,s)},i8=function(i,t,s){let g=s,M=g.ReturnId.split(":")[1].split(",");for(let u=0;u<M.length;u++)t.dialogTpad.childrenMap.actions[u].text=(u==0?"Space: ":"F: ")+Rs("TpadBtn",M[u]),t.dialogTpad.childrenMap.actions[u].visible=!0;let l=g.Next.split(",");const T=i.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE);T.on("down",d,i);const e=i.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.F);e.on("down",x,i);function d(){Ie=0,$a(t),i.scene.get(i.scenePage+"Game").GameStatus="play",i.isFStatus=!1,Nl(t),e.off("down",x,i),e.removeAllListeners(),e.destroy(),T.off("down",d,i),T.removeAllListeners(),T.destroy();for(let u in _t)_t[u].EventID==l[0]&&pr(i,t,_t[u])}function x(){Ie=0,$a(t),i.scene.get(i.scenePage+"Game").GameStatus="play",i.isFStatus=!1,Nl(t),T.off("down",d,i),T.removeAllListeners(),T.destroy(),e.off("down",x,i),e.removeAllListeners(),e.destroy();for(let u in _t)_t[u].EventID==l[1]&&pr(i,t,_t[u])}t.dialogTpad.setVisible(!0),t.dialogTpad.layout()},Rm=function(i,t){for(let s in t)for(let g in _t)if(_t[g].EventID==t[s]){if(console.log(zt.Flag,_t[g].HaveFlag),console.log(zt.Flag.indexOf(_t[g].HaveFlag)),zt.Flag&&zt.Flag.indexOf(_t[g].HaveFlag)!=-1)return _t[g];is=_t[g]}return is},s8=function(i,t,s){console.log(s),is=null;var g=null;Pm.map(C=>{C[i.scenePage]&&(g=null,C[i.scenePage].map(M=>{(M.Name==s.type||M.Name==s.name)&&(g=M.EventId.split(","))}))}),console.log(g),g!=null&&(g.reverse(),is=Rm(i,g),wm(i,t,is),i.scene.get(i.scenePage+"Game").GameStatus="pause",i.isFStatus=!0)},n8=function(i,t,s){console.log(s),is=null;var g=null;if(Pm.map(T=>{T[i.scenePage]&&(g=null,T[i.scenePage].map(e=>{(e.Name==s.type||e.Name==s.name)&&(g=e.EventId.split(","))}))}),console.log(g),g==null)return;g.reverse(),is=Rm(i,g),i.dialogBtn.childrenMap.leftToolbar[0].text="F";var C=0,M=0;at.width>i.Map.widthInPixels,C=s.x+(s.width>20?s.width/2:0),M=s.y-32,i.dialogBtn.x=C,i.dialogBtn.y=M,console.log(i.dialogBtn),i.dialogBtn.setVisible(!0),bs=i.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.F),bs.on("down",l,i);function l(){wm(i,t,is),i.isFStatus=!0,i.scene.get(i.scenePage+"Game").GameStatus="pause",i.isFStatus=!0,Sd(i),bs.removeAllListeners(),bs.destroy()}},$a=function(i){i.dialog.setVisible(!1)},Nl=function(i){i.dialogTpad.setVisible(!1)},Sd=function(i){i.dialogBtn.setVisible(!1),bs&&(bs.removeAllListeners(),bs.destroy())};class r8 extends me.Scene{constructor(){super("MsgUI")}create(){this.scenePage=null,_9(this),t8(this),Ft.on("set-scene-page",this.setScenePage,this),Ft.on("create-msg-btn",this.CreatedMsgBtn,this),Ft.on("show-msg-btn",this.ShowMsgBtn,this),Ft.on("hide-msg-btn",this.HideMsgBtn,this),Ft.on("update-game-status",this.updateGameStatus,this),this.events.on(me.Scenes.Events.SHUTDOWN,()=>{Ft.off("set-scene-page",this.setScenePage,this),Ft.off("create-msg-btn",this.CreatedMsgBtn,this),Ft.off("show-msg-btn",this.ShowMsgBtn,this),Ft.off("hide-msg-btn",this.HideMsgBtn,this),Ft.off("update-game-status",this.updateGameStatus,this)})}update(){}updateGameStatus(t){}setScenePage(t){this.scenePage=t}CreatedMsgBtn(t){q9(t)}ShowMsgBtn(t,s){n8(t,this,s)}HideMsgBtn(t,s){Sd(t),t.scene.get(t.scenePage+"Game").GameStatus="play"}TargetShowMsg(t,s){s8(t,this,s)}}class i7 extends Phaser.GameObjects.Container{constructor(t,s,g,C,M,l,T){super(t,s,g),this.topLeft=t.add.sprite(-C/2+4,-M/2+4,l,T[0]).setOrigin(.5,.5),this.topCenter=t.add.sprite(0,-M/2+4,l,T[1]).setOrigin(.5,.5).setDisplaySize(C-16,8),this.topRight=t.add.sprite(C/2-4,-M/2+4,l,T[3]).setOrigin(.5,.5),this.centerLeft=t.add.sprite(-C/2+4,0,l,T[4]).setOrigin(.5,.5).setDisplaySize(8,M-16),this.centerCenter=t.add.sprite(0,0,l,T[6]).setOrigin(.5,.5).setDisplaySize(C-16,M-16),this.centerRight=t.add.sprite(C/2-4,0,l,T[7]).setOrigin(.5,.5).setDisplaySize(8,M-16),this.bottomLeft=t.add.sprite(-C/2+4,M/2-4,l,T[12]).setOrigin(.5,.5),this.bottomCenter=t.add.sprite(0,M/2-4,l,T[13]).setOrigin(.5,.5).setDisplaySize(C-16,8),this.bottomRight=t.add.sprite(C/2-4,M/2-4,l,T[15]).setOrigin(.5,.5),this.add([this.topLeft,this.topCenter,this.topRight,this.centerLeft,this.centerCenter,this.centerRight,this.bottomLeft,this.bottomCenter,this.bottomRight]),this.setInteractive(),this.visible=!0,t.add.existing(this)}}class a8 extends me.Scene{constructor(){super("BagUI")}create(){this.scenePage=null,Ft.on("set-scene-page",this.setScenePage,this),this.BagOpenStatus=!1;let t=32*10,s=32*6;this.bgCover=this.add.rectangle(0,0,at.width,at.height,0,.5).setOrigin(0,0).setDepth(4).setInteractive(),this.TabList=this.add.group(),this.bag=this.add.sprite(at.width/2,at.height/2,"BagBgUI",0).setDepth(5),this.bagContent=this.add.sprite(at.width/2+38,at.height/2+18,"BagConcentBgUI",0).setDepth(6),this.titleText=this.add.text(this.bag.x-at.width/4-12,this.bag.y+at.height/4+10,"Setting",{fontFamily:'"Press Start 2P"',fontSize:"12px",color:"#ffffe0",wordWrap:{width:at.width-30,useAdvancedWrap:!0}}).setOrigin(0).setDepth(6).setAngle(-90),this.tabChooseIndex=0,this.tabXArr=[this.bag.x+t/2-204,this.bag.x+t/2-168,this.bag.x+t/2-132,this.bag.x+t/2-96,this.bag.x+t/2-60,this.bag.x+t/2-24],this.tabYArr=[this.bag.y-s/2+24,this.bag.y-s/2+24,this.bag.y-s/2+24,this.bag.y-s/2+24,this.bag.y-s/2+24,this.bag.y-s/2+24],this.pos=[12,17,38,29,43,5],this.textList=["Character","Bag","","","","Setting"];for(var g in this.tabXArr){let C=this.add.sprite(this.tabXArr[g],this.tabYArr[g],"IconUI",this.pos[g]).setInteractive().setOrigin(.5,.5).setDepth(6).setVisible(!0);this.TabList.add(C)}this.tabChoosing=this.add.sprite(this.tabXArr[0],this.tabYArr[0],"IconChoose",12).setOrigin(.5,.5).setDepth(7),this.tabChoosing.play("IconChooseAnims"),this.input.keyboard.on("keydown-RIGHT",()=>{this.tabChooseIndex++,this.tabChooseIndex>this.tabXArr.length-1&&(this.tabChooseIndex=0),this.changeBagTag()}),this.input.keyboard.on("keydown-LEFT",()=>{this.tabChooseIndex--,this.tabChooseIndex<0&&(this.tabChooseIndex=this.tabXArr.length-1),this.changeBagTag()}),this.scene.setVisible(this.BagOpenStatus),Ft.on("update-bag-status",this.updateBagStatus,this),Ft.on("open-bag",this.openBag,this),this.events.on(me.Scenes.Events.SHUTDOWN,()=>{Ft.off("set-scene-page",this.setScenePage,this),Ft.off("update-bag-status",this.updateBagStatus,this),Ft.off("open-bag",this.openBag,this)}),this.input.keyboard.on("keydown-ESC",()=>{this.openBag("esc",null)})}update(){}setScenePage(t){this.scenePage=t}changeBagTag(){this.titleText.text=this.textList[this.tabChooseIndex],this.tabChoosing.x=this.tabXArr[this.tabChooseIndex],this.tabChoosing.y=this.tabYArr[this.tabChooseIndex]}openBag(t,s){switch(this.BagOpenStatus?(this.BagOpenStatus=!1,this.scene.resume(this.scenePage+"Game"),this.scene.get(this.scenePage+"Game").GameStatus="play"):(this.BagOpenStatus=!0,this.scene.pause(this.scenePage+"Game"),this.scene.get(this.scenePage+"Game").GameStatus="pause"),this.scene.setVisible(this.BagOpenStatus),t){case"esc":this.tabChooseIndex=this.tabXArr.length-1;break;default:this.tabChooseIndex=0}this.changeBagTag()}updateBagStatus(t){}}class o8 extends me.Scene{constructor(){super("BossUI"),this.hp=100,this.BossMaxHp=100}create(){this.totalSeconds,this.timerInterval,this.BossGameStatus="Init",Ft.on("Change-boss-game-status",this.ChangeBossGameStatus,this),this.events.on(me.Scenes.Events.SHUTDOWN,()=>{Ft.off("Change-boss-game-status",this.ChangeBossGameStatus,this)}),this.BossImg=this.add.sprite(150,at.height+300,"BossX4",0).setScale(1),this.BossImg.setInteractive(),this.physics.world.enable(this.BossImg),this.leftTopContainer=this.add.container(-100,10),this.BossText=this.add.text(10,10,"BOSS",{fontFamily:'"Press Start 2P"',fontSize:"14px",color:"#FFFFFF",wordWrap:{width:at.width-30,useAdvancedWrap:!0}}).setOrigin(.5,.5),this.BossText2=this.add.text(10,25,"LEVEL",{fontFamily:'"Press Start 2P"',fontSize:"12px",color:"#FFFFFF",wordWrap:{width:at.width-30,useAdvancedWrap:!0}}).setOrigin(.5,.5),this.BossText3=this.add.text(10,48,"100",{fontFamily:'"Press Start 2P"',fontSize:"30px",color:"#FFFFFF",wordWrap:{width:at.width-30,useAdvancedWrap:!0}}).setOrigin(.5,.5),this.leftTopContainer.add(this.BossText),this.leftTopContainer.add(this.BossText2),this.leftTopContainer.add(this.BossText3),this.rightBottomContainer=this.add.container(at.width+200,at.height-60),this.BossNameText=this.add.text(10,10,"BO EJ GAR",{fontFamily:'"Press Start 2P"',fontSize:"40px",color:"#FFFFFF",wordWrap:{width:at.width-30,useAdvancedWrap:!0}}).setOrigin(.5,.5),this.rightBottomContainer.add(this.BossNameText),this.physics.world.enable(this.leftTopContainer),this.leftTopContainer.setSize(50,0),this.physics.world.enable(this.rightBottomContainer),this.rightBottomContainer.setSize(50,0),this.rightBottomContainer.add(this.BossNameText),this.BossHPNameText=this.add.text(at.width-10,at.height+10,"BO EJ GAR",{fontFamily:'"Press Start 2P"',fontSize:"14px",color:"#FFFFFF",wordWrap:{width:at.width-25,useAdvancedWrap:!0}}).setOrigin(1,.5),this.add.existing(this.BossHPNameText),this.physics.world.enable(this.BossHPNameText),this.BossHpBar=new me.GameObjects.Rectangle(this,at.width-10,at.height+30,at.width-20,10,16711680,.7).setOrigin(1,0),this.add.existing(this.BossHpBar),this.physics.world.enable(this.BossHpBar),this.FightText=this.add.text(at.width+150,at.height/2,"READY !!",{fontFamily:'"Press Start 2P"',fontSize:"36px",color:"#FF00FF",wordWrap:{width:at.width-30,useAdvancedWrap:!0}}).setOrigin(.5,.5),this.add.existing(this.FightText),this.physics.world.enable(this.FightText),this.BossTimerTitle=this.add.text(at.width-10,-35,"計時",{fontFamily:'"Press Start 2P"',fontSize:"12px",color:"#FFFFFF",wordWrap:{width:at.width-30,useAdvancedWrap:!0}}).setOrigin(1,0),this.add.existing(this.BossTimerTitle),this.physics.world.enable(this.BossTimerTitle),this.BossTimerText=this.add.text(at.width-10,-15,"0:00",{fontFamily:'"Press Start 2P"',fontSize:"12px",color:"#FFFFFF",wordWrap:{width:at.width-30,useAdvancedWrap:!0}}).setOrigin(1,0),this.add.existing(this.BossTimerText),this.physics.world.enable(this.BossTimerText),this.PlayerDieText=this.add.text(at.width/2,-30,"GameOver",{fontFamily:'"Press Start 2P"',fontSize:"42px",color:"#FF00FF",wordWrap:{width:at.width-30,useAdvancedWrap:!0}}).setOrigin(.5,.5),this.add.existing(this.PlayerDieText),this.physics.world.enable(this.PlayerDieText)}startTimer(){let t=this;this.updateTimer(t),this.resetTimer(),this.timerInterval=setInterval(()=>{t.totalSeconds++,t.updateTimer(t)},1e3)}padZero(t){return t.toString().padStart(2,"0")}resetTimer(){clearInterval(this.timerInterval),this.totalSeconds=0}updateTimer(t){Math.floor(t.totalSeconds/3600);const s=Math.floor(t.totalSeconds%3600/60),g=t.totalSeconds%60,C=`${t.padZero(s)}:${t.padZero(g)}`;t.BossTimerText.text=C}initFun(){this.leftTopContainer.x=-100,this.leftTopContainer.y=10,this.rightBottomContainer.x=at.width+200,this.rightBottomContainer.y=at.height-60,this.BossHPNameText.x=at.width-10,this.BossHPNameText.y=at.height+10,this.BossHpBar.x=at.width-10,this.BossHpBar.y=at.height+30,this.FightText.x=at.width+150,this.FightText.y=at.height/2,this.BossTimerTitle.x=at.width-10,this.BossTimerTitle.y=-35,this.BossTimerText.x=at.width-10,this.BossTimerText.y=-15,this.PlayerDieText.x=at.width/2,this.PlayerDieText.y=-30,this.hp=this.BossMaxHp,this.BossHpBar.width=at.width-20}update(){this.BossGameStatus=="Load"&&(this.BossImg&&this.BossImg.y>at.height/5*4?this.BossImg.body.setVelocityY(-500):this.BossImg.body.setVelocityY(0),this.leftTopContainer.x<40?this.leftTopContainer.body.setVelocityX(200):this.leftTopContainer.body.setVelocityX(0),this.rightBottomContainer.x>at.width-200?this.rightBottomContainer.body.setVelocityX(-500):this.rightBottomContainer.body.setVelocityX(0)),this.BossGameStatus=="Waiting"&&(this.leftTopContainer.x>-100?this.leftTopContainer.body.setVelocityX(-200):this.leftTopContainer.body.setVelocityX(0),this.rightBottomContainer.x<at.width+200?this.rightBottomContainer.body.setVelocityX(500):this.rightBottomContainer.body.setVelocityX(0),this.BossImg&&this.BossImg.y<at.height+300?this.BossImg.body.setVelocityY(500):this.BossImg.body.setVelocityY(0)),this.BossGameStatus=="Ready"&&(this.BossHPNameText.y>at.height-30?this.BossHPNameText.body.setVelocityY(-100):this.BossHPNameText.body.setVelocityY(0),this.BossHpBar.y>at.height-20?this.BossHpBar.body.setVelocityY(-100):this.BossHpBar.body.setVelocityY(0),this.BossTimerTitle.y<10?this.BossTimerTitle.body.setVelocityY(100):this.BossTimerTitle.body.setVelocityY(0),this.BossTimerText.y<25?this.BossTimerText.body.setVelocityY(100):this.BossTimerText.body.setVelocityY(0),this.FightText.x<at.width/3*2?(this.FightText.body.setVelocityX(-500),this.FightText.text="FIGHT !!"):this.FightText.x>-150?this.FightText.body.setVelocityX(-200):this.FightText.body.setVelocityX(0),this.BossHpBar.width=this.hp/this.BossMaxHp*(at.width-20)),this.BossGameStatus=="Play"&&(this.BossHPNameText.y>at.height-30?this.BossHPNameText.body.setVelocityY(-100):this.BossHPNameText.body.setVelocityY(0),this.BossHpBar.y>at.height-20?this.BossHpBar.body.setVelocityY(-100):this.BossHpBar.body.setVelocityY(0),this.BossTimerTitle.y<10?this.BossTimerTitle.body.setVelocityY(100):this.BossTimerTitle.body.setVelocityY(0),this.BossTimerText.y<25?this.BossTimerText.body.setVelocityY(100):this.BossTimerText.body.setVelocityY(0),this.FightText.x<at.width/3*2?(this.FightText.body.setVelocityX(-500),this.FightText.text="FIGHT !!"):this.FightText.x>-150?this.FightText.body.setVelocityX(-200):this.FightText.body.setVelocityX(0),this.BossHpBar.width=this.hp/this.BossMaxHp*(at.width-20)),this.BossGameStatus=="GameOver"&&(this.hp>0&&(this.PlayerDieText.y<at.height/2?this.PlayerDieText.body.setVelocityY(100):this.PlayerDieText.body.setVelocityY(0)),this.BossHPNameText.y<at.height+10?this.BossHPNameText.body.setVelocityY(100):this.BossHPNameText.body.setVelocityY(0),this.BossHpBar.y<at.height+30?this.BossHpBar.body.setVelocityY(100):this.BossHpBar.body.setVelocityY(0),this.BossTimerTitle.y>-35?this.BossTimerTitle.body.setVelocityY(-100):this.BossTimerTitle.body.setVelocityY(0),this.BossTimerText.y>-10?this.BossTimerText.body.setVelocityY(-100):this.BossTimerText.body.setVelocityY(0)),this.BossGameStatus=="Done"&&this.hp>0&&(console.log(this.PlayerDieText.y),this.PlayerDieText.y>0?this.PlayerDieText.body.setVelocityY(-100):(this.PlayerDieText.body.setVelocityY(0),this.initFun()))}ChangeBossGameStatus(t){this.BossGameStatus=t}}const mn=window.innerWidth,Aa=window.innerHeight;Q9();var Vl={type:me.AUTO,plugins:{scene:[{key:"rexUI",plugin:Tm,mapping:"rexUI"}]},scene:[c9,v9,x9,y9,T9,A9,O9,b9,F9,L9,D9,I9,B9,a8,r8,o8]};Vl=Object.assign(Vl,at);new me.Game(Vl);var Ia,Ba;mn>Aa?(Ba=Aa,Ia=Aa/at.windowHeight*at.windowWidth,Aa/mn>at.windowHeight/at.windowWidth&&(Ia=mn,Ba=mn/at.windowWidth*at.windowHeight)):(Ia=mn,Ba=mn/at.windowWidth*at.windowHeight);document.querySelector("canvas").style.width=Ia+"px";document.querySelector("canvas").style.height=Ba+"px";function h8(){var i=document.createElement("script");i.onload=function(){var t=new window.Stats;t.dom.style.setProperty("position","absolute"),t.dom.style.setProperty("top","0"),t.dom.style.setProperty("left","auto"),t.dom.style.setProperty("right","0"),t.dom.style.setProperty("z-index","999"),document.body.appendChild(t.dom),requestAnimationFrame(function s(){t.update(),requestAnimationFrame(s)})},i.src="//mrdoob.github.io/stats.js/build/stats.min.js",document.head.appendChild(i)}h8();
